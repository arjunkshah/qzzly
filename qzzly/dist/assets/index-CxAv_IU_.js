var L$=Object.defineProperty;var m1=t=>{throw TypeError(t)};var F$=(t,e,n)=>e in t?L$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>F$(t,typeof e!="symbol"?e+"":e,n),gC=(t,e,n)=>e.has(t)||m1("Cannot "+n);var d=(t,e,n)=>(gC(t,e,"read from private field"),n?n.call(t):e.get(t)),R=(t,e,n)=>e.has(t)?m1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),E=(t,e,n,s)=>(gC(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),N=(t,e,n)=>(gC(t,e,"access private method"),n);var rn=(t,e,n,s)=>({set _(r){E(t,e,r,n)},get _(){return d(t,e,s)}});function O$(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function WM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KM={exports:{}},fw={},YM={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py=Symbol.for("react.element"),U$=Symbol.for("react.portal"),V$=Symbol.for("react.fragment"),$$=Symbol.for("react.strict_mode"),B$=Symbol.for("react.profiler"),j$=Symbol.for("react.provider"),z$=Symbol.for("react.context"),H$=Symbol.for("react.forward_ref"),G$=Symbol.for("react.suspense"),q$=Symbol.for("react.memo"),W$=Symbol.for("react.lazy"),g1=Symbol.iterator;function K$(t){return t===null||typeof t!="object"?null:(t=g1&&t[g1]||t["@@iterator"],typeof t=="function"?t:null)}var JM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XM=Object.assign,QM={};function Xh(t,e,n){this.props=t,this.context=e,this.refs=QM,this.updater=n||JM}Xh.prototype.isReactComponent={};Xh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZM(){}ZM.prototype=Xh.prototype;function LE(t,e,n){this.props=t,this.context=e,this.refs=QM,this.updater=n||JM}var FE=LE.prototype=new ZM;FE.constructor=LE;XM(FE,Xh.prototype);FE.isPureReactComponent=!0;var y1=Array.isArray,ek=Object.prototype.hasOwnProperty,OE={current:null},tk={key:!0,ref:!0,__self:!0,__source:!0};function nk(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ek.call(e,s)&&!tk.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Py,type:t,key:i,ref:o,props:r,_owner:OE.current}}function Y$(t,e){return{$$typeof:Py,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function UE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Py}function J$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v1=/\/+/g;function yC(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J$(""+t.key):e.toString(36)}function Vv(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Py:case U$:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+yC(o,0):s,y1(r)?(n="",t!=null&&(n=t.replace(v1,"$&/")+"/"),Vv(r,e,n,"",function(c){return c})):r!=null&&(UE(r)&&(r=Y$(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(v1,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",y1(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+yC(i,a);o+=Vv(i,e,n,l,r)}else if(l=K$(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+yC(i,a++),o+=Vv(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sv(t,e,n){if(t==null)return t;var s=[],r=0;return Vv(t,s,"","",function(i){return e.call(n,i,r++)}),s}function X$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rs={current:null},$v={transition:null},Q$={ReactCurrentDispatcher:rs,ReactCurrentBatchConfig:$v,ReactCurrentOwner:OE};function sk(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:sv,forEach:function(t,e,n){sv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sv(t,function(){e++}),e},toArray:function(t){return sv(t,function(e){return e})||[]},only:function(t){if(!UE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=Xh;je.Fragment=V$;je.Profiler=B$;je.PureComponent=LE;je.StrictMode=$$;je.Suspense=G$;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q$;je.act=sk;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=XM({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=OE.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ek.call(e,l)&&!tk.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Py,type:t.type,key:r,ref:i,props:s,_owner:o}};je.createContext=function(t){return t={$$typeof:z$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j$,_context:t},t.Consumer=t};je.createElement=nk;je.createFactory=function(t){var e=nk.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:H$,render:t}};je.isValidElement=UE;je.lazy=function(t){return{$$typeof:W$,_payload:{_status:-1,_result:t},_init:X$}};je.memo=function(t,e){return{$$typeof:q$,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=$v.transition;$v.transition={};try{t()}finally{$v.transition=e}};je.unstable_act=sk;je.useCallback=function(t,e){return rs.current.useCallback(t,e)};je.useContext=function(t){return rs.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return rs.current.useDeferredValue(t)};je.useEffect=function(t,e){return rs.current.useEffect(t,e)};je.useId=function(){return rs.current.useId()};je.useImperativeHandle=function(t,e,n){return rs.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return rs.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return rs.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return rs.current.useMemo(t,e)};je.useReducer=function(t,e,n){return rs.current.useReducer(t,e,n)};je.useRef=function(t){return rs.current.useRef(t)};je.useState=function(t){return rs.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return rs.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return rs.current.useTransition()};je.version="18.3.1";YM.exports=je;var b=YM.exports;const K=WM(b),rk=O$({__proto__:null,default:K},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z$=b,eB=Symbol.for("react.element"),tB=Symbol.for("react.fragment"),nB=Object.prototype.hasOwnProperty,sB=Z$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rB={key:!0,ref:!0,__self:!0,__source:!0};function ik(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)nB.call(e,s)&&!rB.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:eB,type:t,key:i,ref:o,props:r,_owner:sB.current}}fw.Fragment=tB;fw.jsx=ik;fw.jsxs=ik;KM.exports=fw;var m=KM.exports,xS={},ok={exports:{}},Qs={},ak={exports:{}},lk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,V){var H=B.length;B.push(V);e:for(;0<H;){var Q=H-1>>>1,J=B[Q];if(0<r(J,V))B[Q]=V,B[H]=J,H=Q;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var V=B[0],H=B.pop();if(H!==V){B[0]=H;e:for(var Q=0,J=B.length,se=J>>>1;Q<se;){var ye=2*(Q+1)-1,Me=B[ye],De=ye+1,Y=B[De];if(0>r(Me,H))De<J&&0>r(Y,Me)?(B[Q]=Y,B[De]=H,Q=De):(B[Q]=Me,B[ye]=H,Q=ye);else if(De<J&&0>r(Y,H))B[Q]=Y,B[De]=H,Q=De;else break e}}return V}function r(B,V){var H=B.sortIndex-V.sortIndex;return H!==0?H:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,g=3,y=!1,x=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var V=n(c);V!==null;){if(V.callback===null)s(c);else if(V.startTime<=B)s(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function T(B){if(v=!1,_(B),!x)if(n(l)!==null)x=!0,$(A);else{var V=n(c);V!==null&&z(T,V.startTime-B)}}function A(B,V){x=!1,v&&(v=!1,w(I),I=-1),y=!0;var H=g;try{for(_(V),p=n(l);p!==null&&(!(p.expirationTime>V)||B&&!L());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var J=Q(p.expirationTime<=V);V=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(l)&&s(l),_(V)}else s(l);p=n(l)}if(p!==null)var se=!0;else{var ye=n(c);ye!==null&&z(T,ye.startTime-V),se=!1}return se}finally{p=null,g=H,y=!1}}var P=!1,M=null,I=-1,k=5,D=-1;function L(){return!(t.unstable_now()-D<k)}function U(){if(M!==null){var B=t.unstable_now();D=B;var V=!0;try{V=M(!0,B)}finally{V?G():(P=!1,M=null)}}else P=!1}var G;if(typeof S=="function")G=function(){S(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=U,G=function(){W.postMessage(null)}}else G=function(){C(U,0)};function $(B){M=B,P||(P=!0,G())}function z(B,V){I=C(function(){B(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,$(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var H=g;g=V;try{return B()}finally{g=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=g;g=B;try{return V()}finally{g=H}},t.unstable_scheduleCallback=function(B,V,H){var Q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,B={id:u++,callback:V,priorityLevel:B,startTime:H,expirationTime:J,sortIndex:-1},H>Q?(B.sortIndex=H,e(c,B),n(l)===null&&B===n(c)&&(v?(w(I),I=-1):v=!0,z(T,H-Q))):(B.sortIndex=J,e(l,B),x||y||(x=!0,$(A))),B},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(B){var V=g;return function(){var H=g;g=V;try{return B.apply(this,arguments)}finally{g=H}}}})(lk);ak.exports=lk;var iB=ak.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oB=b,Xs=iB;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ck=new Set,_m={};function pd(t,e){Lh(t,e),Lh(t+"Capture",e)}function Lh(t,e){for(_m[t]=e,t=0;t<e.length;t++)ck.add(e[t])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wS=Object.prototype.hasOwnProperty,aB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x1={},w1={};function lB(t){return wS.call(w1,t)?!0:wS.call(x1,t)?!1:aB.test(t)?w1[t]=!0:(x1[t]=!0,!1)}function cB(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uB(t,e,n,s){if(e===null||typeof e>"u"||cB(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function is(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rn[t]=new is(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rn[e]=new is(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rn[t]=new is(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rn[t]=new is(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rn[t]=new is(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rn[t]=new is(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rn[t]=new is(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rn[t]=new is(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rn[t]=new is(t,5,!1,t.toLowerCase(),null,!1,!1)});var VE=/[\-:]([a-z])/g;function $E(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(VE,$E);Rn[e]=new is(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(VE,$E);Rn[e]=new is(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(VE,$E);Rn[e]=new is(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rn[t]=new is(t,1,!1,t.toLowerCase(),null,!1,!1)});Rn.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rn[t]=new is(t,1,!1,t.toLowerCase(),null,!0,!0)});function BE(t,e,n,s){var r=Rn.hasOwnProperty(e)?Rn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uB(e,n,r,s)&&(n=null),s||r===null?lB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ca=oB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rv=Symbol.for("react.element"),$d=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),uk=Symbol.for("react.provider"),dk=Symbol.for("react.context"),zE=Symbol.for("react.forward_ref"),SS=Symbol.for("react.suspense"),bS=Symbol.for("react.suspense_list"),HE=Symbol.for("react.memo"),La=Symbol.for("react.lazy"),fk=Symbol.for("react.offscreen"),C1=Symbol.iterator;function yp(t){return t===null||typeof t!="object"?null:(t=C1&&t[C1]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,vC;function Lp(t){if(vC===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vC=e&&e[1]||""}return`
`+vC+t}var xC=!1;function wC(t,e){if(!t||xC)return"";xC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xC=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lp(t):""}function dB(t){switch(t.tag){case 5:return Lp(t.type);case 16:return Lp("Lazy");case 13:return Lp("Suspense");case 19:return Lp("SuspenseList");case 0:case 2:case 15:return t=wC(t.type,!1),t;case 11:return t=wC(t.type.render,!1),t;case 1:return t=wC(t.type,!0),t;default:return""}}function _S(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bd:return"Fragment";case $d:return"Portal";case CS:return"Profiler";case jE:return"StrictMode";case SS:return"Suspense";case bS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dk:return(t.displayName||"Context")+".Consumer";case uk:return(t._context.displayName||"Context")+".Provider";case zE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case HE:return e=t.displayName||null,e!==null?e:_S(t.type)||"Memo";case La:e=t._payload,t=t._init;try{return _S(t(e))}catch{}}return null}function fB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _S(e);case 8:return e===jE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hB(t){var e=hk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function iv(t){t._valueTracker||(t._valueTracker=hB(t))}function pk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=hk(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function $x(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ES(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function S1(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Jl(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mk(t,e){e=e.checked,e!=null&&BE(t,"checked",e,!1)}function TS(t,e){mk(t,e);var n=Jl(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?AS(t,e.type,n):e.hasOwnProperty("defaultValue")&&AS(t,e.type,Jl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function AS(t,e,n){(e!=="number"||$x(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fp=Array.isArray;function sf(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Jl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function RS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Fp(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jl(n)}}function gk(t,e){var n=Jl(e.value),s=Jl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function E1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ov,vk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ov=ov||document.createElement("div"),ov.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ov.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Em(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pB=["Webkit","ms","Moz","O"];Object.keys(um).forEach(function(t){pB.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),um[e]=um[t]})});function xk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||um.hasOwnProperty(t)&&um[t]?(""+e).trim():e+"px"}function wk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=xk(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var mB=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PS(t,e){if(e){if(mB[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function MS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kS=null;function GE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var IS=null,rf=null,of=null;function T1(t){if(t=Iy(t)){if(typeof IS!="function")throw Error(X(280));var e=t.stateNode;e&&(e=yw(e),IS(t.stateNode,t.type,e))}}function Ck(t){rf?of?of.push(t):of=[t]:rf=t}function Sk(){if(rf){var t=rf,e=of;if(of=rf=null,T1(t),e)for(t=0;t<e.length;t++)T1(e[t])}}function bk(t,e){return t(e)}function _k(){}var CC=!1;function Ek(t,e,n){if(CC)return t(e,n);CC=!0;try{return bk(t,e,n)}finally{CC=!1,(rf!==null||of!==null)&&(_k(),Sk())}}function Tm(t,e){var n=t.stateNode;if(n===null)return null;var s=yw(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var DS=!1;if(fa)try{var vp={};Object.defineProperty(vp,"passive",{get:function(){DS=!0}}),window.addEventListener("test",vp,vp),window.removeEventListener("test",vp,vp)}catch{DS=!1}function gB(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var dm=!1,Bx=null,jx=!1,LS=null,yB={onError:function(t){dm=!0,Bx=t}};function vB(t,e,n,s,r,i,o,a,l){dm=!1,Bx=null,gB.apply(yB,arguments)}function xB(t,e,n,s,r,i,o,a,l){if(vB.apply(this,arguments),dm){if(dm){var c=Bx;dm=!1,Bx=null}else throw Error(X(198));jx||(jx=!0,LS=c)}}function md(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A1(t){if(md(t)!==t)throw Error(X(188))}function wB(t){var e=t.alternate;if(!e){if(e=md(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return A1(r),t;if(i===s)return A1(r),e;i=i.sibling}throw Error(X(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==s)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function Ak(t){return t=wB(t),t!==null?Rk(t):null}function Rk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rk(t);if(e!==null)return e;t=t.sibling}return null}var Nk=Xs.unstable_scheduleCallback,R1=Xs.unstable_cancelCallback,CB=Xs.unstable_shouldYield,SB=Xs.unstable_requestPaint,Vt=Xs.unstable_now,bB=Xs.unstable_getCurrentPriorityLevel,qE=Xs.unstable_ImmediatePriority,Pk=Xs.unstable_UserBlockingPriority,zx=Xs.unstable_NormalPriority,_B=Xs.unstable_LowPriority,Mk=Xs.unstable_IdlePriority,hw=null,qi=null;function EB(t){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(hw,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:RB,TB=Math.log,AB=Math.LN2;function RB(t){return t>>>=0,t===0?32:31-(TB(t)/AB|0)|0}var av=64,lv=4194304;function Op(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hx(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Op(a):(i&=o,i!==0&&(s=Op(i)))}else o=n&~r,o!==0?s=Op(o):i!==0&&(s=Op(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Zr(e),r=1<<n,s|=t[n],e&=~r;return s}function NB(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PB(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zr(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=NB(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function FS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kk(){var t=av;return av<<=1,!(av&4194240)&&(av=64),t}function SC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function My(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=n}function MB(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Zr(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function WE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Zr(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var it=0;function Ik(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dk,KE,Lk,Fk,Ok,OS=!1,cv=[],Ul=null,Vl=null,$l=null,Am=new Map,Rm=new Map,Ua=[],kB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N1(t,e){switch(t){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Am.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rm.delete(e.pointerId)}}function xp(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Iy(e),e!==null&&KE(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function IB(t,e,n,s,r){switch(e){case"focusin":return Ul=xp(Ul,t,e,n,s,r),!0;case"dragenter":return Vl=xp(Vl,t,e,n,s,r),!0;case"mouseover":return $l=xp($l,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Am.set(i,xp(Am.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Rm.set(i,xp(Rm.get(i)||null,t,e,n,s,r)),!0}return!1}function Uk(t){var e=wc(t.target);if(e!==null){var n=md(e);if(n!==null){if(e=n.tag,e===13){if(e=Tk(n),e!==null){t.blockedOn=e,Ok(t.priority,function(){Lk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=US(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);kS=s,n.target.dispatchEvent(s),kS=null}else return e=Iy(n),e!==null&&KE(e),t.blockedOn=n,!1;e.shift()}return!0}function P1(t,e,n){Bv(t)&&n.delete(e)}function DB(){OS=!1,Ul!==null&&Bv(Ul)&&(Ul=null),Vl!==null&&Bv(Vl)&&(Vl=null),$l!==null&&Bv($l)&&($l=null),Am.forEach(P1),Rm.forEach(P1)}function wp(t,e){t.blockedOn===e&&(t.blockedOn=null,OS||(OS=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,DB)))}function Nm(t){function e(r){return wp(r,t)}if(0<cv.length){wp(cv[0],t);for(var n=1;n<cv.length;n++){var s=cv[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ul!==null&&wp(Ul,t),Vl!==null&&wp(Vl,t),$l!==null&&wp($l,t),Am.forEach(e),Rm.forEach(e),n=0;n<Ua.length;n++)s=Ua[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)Uk(n),n.blockedOn===null&&Ua.shift()}var af=Ca.ReactCurrentBatchConfig,Gx=!0;function LB(t,e,n,s){var r=it,i=af.transition;af.transition=null;try{it=1,YE(t,e,n,s)}finally{it=r,af.transition=i}}function FB(t,e,n,s){var r=it,i=af.transition;af.transition=null;try{it=4,YE(t,e,n,s)}finally{it=r,af.transition=i}}function YE(t,e,n,s){if(Gx){var r=US(t,e,n,s);if(r===null)kC(t,e,s,qx,n),N1(t,s);else if(IB(r,t,e,n,s))s.stopPropagation();else if(N1(t,s),e&4&&-1<kB.indexOf(t)){for(;r!==null;){var i=Iy(r);if(i!==null&&Dk(i),i=US(t,e,n,s),i===null&&kC(t,e,s,qx,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else kC(t,e,s,null,n)}}var qx=null;function US(t,e,n,s){if(qx=null,t=GE(s),t=wc(t),t!==null)if(e=md(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qx=t,null}function Vk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bB()){case qE:return 1;case Pk:return 4;case zx:case _B:return 16;case Mk:return 536870912;default:return 16}default:return 16}}var Fl=null,JE=null,jv=null;function $k(){if(jv)return jv;var t,e=JE,n=e.length,s,r="value"in Fl?Fl.value:Fl.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return jv=r.slice(t,1<s?1-s:void 0)}function zv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uv(){return!0}function M1(){return!1}function Zs(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?uv:M1,this.isPropagationStopped=M1,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uv)},persist:function(){},isPersistent:uv}),e}var Qh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XE=Zs(Qh),ky=kt({},Qh,{view:0,detail:0}),OB=Zs(ky),bC,_C,Cp,pw=kt({},ky,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cp&&(Cp&&t.type==="mousemove"?(bC=t.screenX-Cp.screenX,_C=t.screenY-Cp.screenY):_C=bC=0,Cp=t),bC)},movementY:function(t){return"movementY"in t?t.movementY:_C}}),k1=Zs(pw),UB=kt({},pw,{dataTransfer:0}),VB=Zs(UB),$B=kt({},ky,{relatedTarget:0}),EC=Zs($B),BB=kt({},Qh,{animationName:0,elapsedTime:0,pseudoElement:0}),jB=Zs(BB),zB=kt({},Qh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HB=Zs(zB),GB=kt({},Qh,{data:0}),I1=Zs(GB),qB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KB[t])?!!e[t]:!1}function QE(){return YB}var JB=kt({},ky,{key:function(t){if(t.key){var e=qB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QE,charCode:function(t){return t.type==="keypress"?zv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XB=Zs(JB),QB=kt({},pw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D1=Zs(QB),ZB=kt({},ky,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QE}),e3=Zs(ZB),t3=kt({},Qh,{propertyName:0,elapsedTime:0,pseudoElement:0}),n3=Zs(t3),s3=kt({},pw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r3=Zs(s3),i3=[9,13,27,32],ZE=fa&&"CompositionEvent"in window,fm=null;fa&&"documentMode"in document&&(fm=document.documentMode);var o3=fa&&"TextEvent"in window&&!fm,Bk=fa&&(!ZE||fm&&8<fm&&11>=fm),L1=" ",F1=!1;function jk(t,e){switch(t){case"keyup":return i3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jd=!1;function a3(t,e){switch(t){case"compositionend":return zk(e);case"keypress":return e.which!==32?null:(F1=!0,L1);case"textInput":return t=e.data,t===L1&&F1?null:t;default:return null}}function l3(t,e){if(jd)return t==="compositionend"||!ZE&&jk(t,e)?(t=$k(),jv=JE=Fl=null,jd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bk&&e.locale!=="ko"?null:e.data;default:return null}}var c3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c3[t.type]:e==="textarea"}function Hk(t,e,n,s){Ck(s),e=Wx(e,"onChange"),0<e.length&&(n=new XE("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var hm=null,Pm=null;function u3(t){tI(t,0)}function mw(t){var e=Gd(t);if(pk(e))return t}function d3(t,e){if(t==="change")return e}var Gk=!1;if(fa){var TC;if(fa){var AC="oninput"in document;if(!AC){var U1=document.createElement("div");U1.setAttribute("oninput","return;"),AC=typeof U1.oninput=="function"}TC=AC}else TC=!1;Gk=TC&&(!document.documentMode||9<document.documentMode)}function V1(){hm&&(hm.detachEvent("onpropertychange",qk),Pm=hm=null)}function qk(t){if(t.propertyName==="value"&&mw(Pm)){var e=[];Hk(e,Pm,t,GE(t)),Ek(u3,e)}}function f3(t,e,n){t==="focusin"?(V1(),hm=e,Pm=n,hm.attachEvent("onpropertychange",qk)):t==="focusout"&&V1()}function h3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mw(Pm)}function p3(t,e){if(t==="click")return mw(e)}function m3(t,e){if(t==="input"||t==="change")return mw(e)}function g3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ti=typeof Object.is=="function"?Object.is:g3;function Mm(t,e){if(ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!wS.call(e,r)||!ti(t[r],e[r]))return!1}return!0}function $1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function B1(t,e){var n=$1(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$1(n)}}function Wk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kk(){for(var t=window,e=$x();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$x(t.document)}return e}function eT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y3(t){var e=Kk(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wk(n.ownerDocument.documentElement,n)){if(s!==null&&eT(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=B1(n,i);var o=B1(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v3=fa&&"documentMode"in document&&11>=document.documentMode,zd=null,VS=null,pm=null,$S=!1;function j1(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$S||zd==null||zd!==$x(s)||(s=zd,"selectionStart"in s&&eT(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pm&&Mm(pm,s)||(pm=s,s=Wx(VS,"onSelect"),0<s.length&&(e=new XE("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=zd)))}function dv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hd={animationend:dv("Animation","AnimationEnd"),animationiteration:dv("Animation","AnimationIteration"),animationstart:dv("Animation","AnimationStart"),transitionend:dv("Transition","TransitionEnd")},RC={},Yk={};fa&&(Yk=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function gw(t){if(RC[t])return RC[t];if(!Hd[t])return t;var e=Hd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yk)return RC[t]=e[n];return t}var Jk=gw("animationend"),Xk=gw("animationiteration"),Qk=gw("animationstart"),Zk=gw("transitionend"),eI=new Map,z1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oc(t,e){eI.set(t,e),pd(e,[t])}for(var NC=0;NC<z1.length;NC++){var PC=z1[NC],x3=PC.toLowerCase(),w3=PC[0].toUpperCase()+PC.slice(1);oc(x3,"on"+w3)}oc(Jk,"onAnimationEnd");oc(Xk,"onAnimationIteration");oc(Qk,"onAnimationStart");oc("dblclick","onDoubleClick");oc("focusin","onFocus");oc("focusout","onBlur");oc(Zk,"onTransitionEnd");Lh("onMouseEnter",["mouseout","mouseover"]);Lh("onMouseLeave",["mouseout","mouseover"]);Lh("onPointerEnter",["pointerout","pointerover"]);Lh("onPointerLeave",["pointerout","pointerover"]);pd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pd("onBeforeInput",["compositionend","keypress","textInput","paste"]);pd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Up="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Up));function H1(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,xB(s,e,void 0,t),t.currentTarget=null}function tI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;H1(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;H1(r,a,c),i=l}}}if(jx)throw t=LS,jx=!1,LS=null,t}function yt(t,e){var n=e[GS];n===void 0&&(n=e[GS]=new Set);var s=t+"__bubble";n.has(s)||(nI(e,t,2,!1),n.add(s))}function MC(t,e,n){var s=0;e&&(s|=4),nI(n,t,s,e)}var fv="_reactListening"+Math.random().toString(36).slice(2);function km(t){if(!t[fv]){t[fv]=!0,ck.forEach(function(n){n!=="selectionchange"&&(C3.has(n)||MC(n,!1,t),MC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fv]||(e[fv]=!0,MC("selectionchange",!1,e))}}function nI(t,e,n,s){switch(Vk(e)){case 1:var r=LB;break;case 4:r=FB;break;default:r=YE}n=r.bind(null,e,n,t),r=void 0,!DS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kC(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=wc(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}Ek(function(){var c=i,u=GE(n),p=[];e:{var g=eI.get(t);if(g!==void 0){var y=XE,x=t;switch(t){case"keypress":if(zv(n)===0)break e;case"keydown":case"keyup":y=XB;break;case"focusin":x="focus",y=EC;break;case"focusout":x="blur",y=EC;break;case"beforeblur":case"afterblur":y=EC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=k1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=VB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=e3;break;case Jk:case Xk:case Qk:y=jB;break;case Zk:y=n3;break;case"scroll":y=OB;break;case"wheel":y=r3;break;case"copy":case"cut":case"paste":y=HB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=D1}var v=(e&4)!==0,C=!v&&t==="scroll",w=v?g!==null?g+"Capture":null:g;v=[];for(var S=c,_;S!==null;){_=S;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,w!==null&&(T=Tm(S,w),T!=null&&v.push(Im(S,T,_)))),C)break;S=S.return}0<v.length&&(g=new y(g,x,null,n,u),p.push({event:g,listeners:v}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==kS&&(x=n.relatedTarget||n.fromElement)&&(wc(x)||x[ha]))break e;if((y||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?wc(x):null,x!==null&&(C=md(x),x!==C||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(v=k1,T="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=D1,T="onPointerLeave",w="onPointerEnter",S="pointer"),C=y==null?g:Gd(y),_=x==null?g:Gd(x),g=new v(T,S+"leave",y,n,u),g.target=C,g.relatedTarget=_,T=null,wc(u)===c&&(v=new v(w,S+"enter",x,n,u),v.target=_,v.relatedTarget=C,T=v),C=T,y&&x)t:{for(v=y,w=x,S=0,_=v;_;_=_d(_))S++;for(_=0,T=w;T;T=_d(T))_++;for(;0<S-_;)v=_d(v),S--;for(;0<_-S;)w=_d(w),_--;for(;S--;){if(v===w||w!==null&&v===w.alternate)break t;v=_d(v),w=_d(w)}v=null}else v=null;y!==null&&G1(p,g,y,v,!1),x!==null&&C!==null&&G1(p,C,x,v,!0)}}e:{if(g=c?Gd(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var A=d3;else if(O1(g))if(Gk)A=m3;else{A=h3;var P=f3}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(A=p3);if(A&&(A=A(t,c))){Hk(p,A,n,u);break e}P&&P(t,g,c),t==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&AS(g,"number",g.value)}switch(P=c?Gd(c):window,t){case"focusin":(O1(P)||P.contentEditable==="true")&&(zd=P,VS=c,pm=null);break;case"focusout":pm=VS=zd=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,j1(p,n,u);break;case"selectionchange":if(v3)break;case"keydown":case"keyup":j1(p,n,u)}var M;if(ZE)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else jd?jk(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Bk&&n.locale!=="ko"&&(jd||I!=="onCompositionStart"?I==="onCompositionEnd"&&jd&&(M=$k()):(Fl=u,JE="value"in Fl?Fl.value:Fl.textContent,jd=!0)),P=Wx(c,I),0<P.length&&(I=new I1(I,t,null,n,u),p.push({event:I,listeners:P}),M?I.data=M:(M=zk(n),M!==null&&(I.data=M)))),(M=o3?a3(t,n):l3(t,n))&&(c=Wx(c,"onBeforeInput"),0<c.length&&(u=new I1("onBeforeInput","beforeinput",null,n,u),p.push({event:u,listeners:c}),u.data=M))}tI(p,e)})}function Im(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wx(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Tm(t,n),i!=null&&s.unshift(Im(t,i,r)),i=Tm(t,e),i!=null&&s.push(Im(t,i,r))),t=t.return}return s}function _d(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function G1(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=Tm(n,i),l!=null&&o.unshift(Im(n,l,a))):r||(l=Tm(n,i),l!=null&&o.push(Im(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var S3=/\r\n?/g,b3=/\u0000|\uFFFD/g;function q1(t){return(typeof t=="string"?t:""+t).replace(S3,`
`).replace(b3,"")}function hv(t,e,n){if(e=q1(e),q1(t)!==e&&n)throw Error(X(425))}function Kx(){}var BS=null,jS=null;function zS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HS=typeof setTimeout=="function"?setTimeout:void 0,_3=typeof clearTimeout=="function"?clearTimeout:void 0,W1=typeof Promise=="function"?Promise:void 0,E3=typeof queueMicrotask=="function"?queueMicrotask:typeof W1<"u"?function(t){return W1.resolve(null).then(t).catch(T3)}:HS;function T3(t){setTimeout(function(){throw t})}function IC(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Nm(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Nm(e)}function Bl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zh=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Zh,Dm="__reactProps$"+Zh,ha="__reactContainer$"+Zh,GS="__reactEvents$"+Zh,A3="__reactListeners$"+Zh,R3="__reactHandles$"+Zh;function wc(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ha]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K1(t);t!==null;){if(n=t[Vi])return n;t=K1(t)}return e}t=n,n=t.parentNode}return null}function Iy(t){return t=t[Vi]||t[ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function yw(t){return t[Dm]||null}var qS=[],qd=-1;function ac(t){return{current:t}}function xt(t){0>qd||(t.current=qS[qd],qS[qd]=null,qd--)}function pt(t,e){qd++,qS[qd]=t.current,t.current=e}var Xl={},$n=ac(Xl),Cs=ac(!1),Yu=Xl;function Fh(t,e){var n=t.type.contextTypes;if(!n)return Xl;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ss(t){return t=t.childContextTypes,t!=null}function Yx(){xt(Cs),xt($n)}function Y1(t,e,n){if($n.current!==Xl)throw Error(X(168));pt($n,e),pt(Cs,n)}function sI(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(X(108,fB(t)||"Unknown",r));return kt({},n,s)}function Jx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xl,Yu=$n.current,pt($n,t),pt(Cs,Cs.current),!0}function J1(t,e,n){var s=t.stateNode;if(!s)throw Error(X(169));n?(t=sI(t,e,Yu),s.__reactInternalMemoizedMergedChildContext=t,xt(Cs),xt($n),pt($n,t)):xt(Cs),pt(Cs,n)}var yo=null,vw=!1,DC=!1;function rI(t){yo===null?yo=[t]:yo.push(t)}function N3(t){vw=!0,rI(t)}function lc(){if(!DC&&yo!==null){DC=!0;var t=0,e=it;try{var n=yo;for(it=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}yo=null,vw=!1}catch(r){throw yo!==null&&(yo=yo.slice(t+1)),Nk(qE,lc),r}finally{it=e,DC=!1}}return null}var Wd=[],Kd=0,Xx=null,Qx=0,ur=[],dr=0,Ju=null,na=1,sa="";function hc(t,e){Wd[Kd++]=Qx,Wd[Kd++]=Xx,Xx=t,Qx=e}function iI(t,e,n){ur[dr++]=na,ur[dr++]=sa,ur[dr++]=Ju,Ju=t;var s=na;t=sa;var r=32-Zr(s)-1;s&=~(1<<r),n+=1;var i=32-Zr(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,na=1<<32-Zr(e)+r|n<<r|s,sa=i+t}else na=1<<i|n<<r|s,sa=t}function tT(t){t.return!==null&&(hc(t,1),iI(t,1,0))}function nT(t){for(;t===Xx;)Xx=Wd[--Kd],Wd[Kd]=null,Qx=Wd[--Kd],Wd[Kd]=null;for(;t===Ju;)Ju=ur[--dr],ur[dr]=null,sa=ur[--dr],ur[dr]=null,na=ur[--dr],ur[dr]=null}var Ks=null,Ws=null,Et=!1,Kr=null;function oI(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ks=t,Ws=Bl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ks=t,Ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ju!==null?{id:na,overflow:sa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ks=t,Ws=null,!0):!1;default:return!1}}function WS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function KS(t){if(Et){var e=Ws;if(e){var n=e;if(!X1(t,e)){if(WS(t))throw Error(X(418));e=Bl(n.nextSibling);var s=Ks;e&&X1(t,e)?oI(s,n):(t.flags=t.flags&-4097|2,Et=!1,Ks=t)}}else{if(WS(t))throw Error(X(418));t.flags=t.flags&-4097|2,Et=!1,Ks=t}}}function Q1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ks=t}function pv(t){if(t!==Ks)return!1;if(!Et)return Q1(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zS(t.type,t.memoizedProps)),e&&(e=Ws)){if(WS(t))throw aI(),Error(X(418));for(;e;)oI(t,e),e=Bl(e.nextSibling)}if(Q1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ws=Bl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ws=null}}else Ws=Ks?Bl(t.stateNode.nextSibling):null;return!0}function aI(){for(var t=Ws;t;)t=Bl(t.nextSibling)}function Oh(){Ws=Ks=null,Et=!1}function sT(t){Kr===null?Kr=[t]:Kr.push(t)}var P3=Ca.ReactCurrentBatchConfig;function Sp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var s=n.stateNode}if(!s)throw Error(X(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function mv(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Z1(t){var e=t._init;return e(t._payload)}function lI(t){function e(w,S){if(t){var _=w.deletions;_===null?(w.deletions=[S],w.flags|=16):_.push(S)}}function n(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function s(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function r(w,S){return w=Gl(w,S),w.index=0,w.sibling=null,w}function i(w,S,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<S?(w.flags|=2,S):_):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,S,_,T){return S===null||S.tag!==6?(S=BC(_,w.mode,T),S.return=w,S):(S=r(S,_),S.return=w,S)}function l(w,S,_,T){var A=_.type;return A===Bd?u(w,S,_.props.children,T,_.key):S!==null&&(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===La&&Z1(A)===S.type)?(T=r(S,_.props),T.ref=Sp(w,S,_),T.return=w,T):(T=Jv(_.type,_.key,_.props,null,w.mode,T),T.ref=Sp(w,S,_),T.return=w,T)}function c(w,S,_,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=jC(_,w.mode,T),S.return=w,S):(S=r(S,_.children||[]),S.return=w,S)}function u(w,S,_,T,A){return S===null||S.tag!==7?(S=Wu(_,w.mode,T,A),S.return=w,S):(S=r(S,_),S.return=w,S)}function p(w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=BC(""+S,w.mode,_),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rv:return _=Jv(S.type,S.key,S.props,null,w.mode,_),_.ref=Sp(w,null,S),_.return=w,_;case $d:return S=jC(S,w.mode,_),S.return=w,S;case La:var T=S._init;return p(w,T(S._payload),_)}if(Fp(S)||yp(S))return S=Wu(S,w.mode,_,null),S.return=w,S;mv(w,S)}return null}function g(w,S,_,T){var A=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(w,S,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case rv:return _.key===A?l(w,S,_,T):null;case $d:return _.key===A?c(w,S,_,T):null;case La:return A=_._init,g(w,S,A(_._payload),T)}if(Fp(_)||yp(_))return A!==null?null:u(w,S,_,T,null);mv(w,_)}return null}function y(w,S,_,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(_)||null,a(S,w,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case rv:return w=w.get(T.key===null?_:T.key)||null,l(S,w,T,A);case $d:return w=w.get(T.key===null?_:T.key)||null,c(S,w,T,A);case La:var P=T._init;return y(w,S,_,P(T._payload),A)}if(Fp(T)||yp(T))return w=w.get(_)||null,u(S,w,T,A,null);mv(S,T)}return null}function x(w,S,_,T){for(var A=null,P=null,M=S,I=S=0,k=null;M!==null&&I<_.length;I++){M.index>I?(k=M,M=null):k=M.sibling;var D=g(w,M,_[I],T);if(D===null){M===null&&(M=k);break}t&&M&&D.alternate===null&&e(w,M),S=i(D,S,I),P===null?A=D:P.sibling=D,P=D,M=k}if(I===_.length)return n(w,M),Et&&hc(w,I),A;if(M===null){for(;I<_.length;I++)M=p(w,_[I],T),M!==null&&(S=i(M,S,I),P===null?A=M:P.sibling=M,P=M);return Et&&hc(w,I),A}for(M=s(w,M);I<_.length;I++)k=y(M,w,I,_[I],T),k!==null&&(t&&k.alternate!==null&&M.delete(k.key===null?I:k.key),S=i(k,S,I),P===null?A=k:P.sibling=k,P=k);return t&&M.forEach(function(L){return e(w,L)}),Et&&hc(w,I),A}function v(w,S,_,T){var A=yp(_);if(typeof A!="function")throw Error(X(150));if(_=A.call(_),_==null)throw Error(X(151));for(var P=A=null,M=S,I=S=0,k=null,D=_.next();M!==null&&!D.done;I++,D=_.next()){M.index>I?(k=M,M=null):k=M.sibling;var L=g(w,M,D.value,T);if(L===null){M===null&&(M=k);break}t&&M&&L.alternate===null&&e(w,M),S=i(L,S,I),P===null?A=L:P.sibling=L,P=L,M=k}if(D.done)return n(w,M),Et&&hc(w,I),A;if(M===null){for(;!D.done;I++,D=_.next())D=p(w,D.value,T),D!==null&&(S=i(D,S,I),P===null?A=D:P.sibling=D,P=D);return Et&&hc(w,I),A}for(M=s(w,M);!D.done;I++,D=_.next())D=y(M,w,I,D.value,T),D!==null&&(t&&D.alternate!==null&&M.delete(D.key===null?I:D.key),S=i(D,S,I),P===null?A=D:P.sibling=D,P=D);return t&&M.forEach(function(U){return e(w,U)}),Et&&hc(w,I),A}function C(w,S,_,T){if(typeof _=="object"&&_!==null&&_.type===Bd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case rv:e:{for(var A=_.key,P=S;P!==null;){if(P.key===A){if(A=_.type,A===Bd){if(P.tag===7){n(w,P.sibling),S=r(P,_.props.children),S.return=w,w=S;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===La&&Z1(A)===P.type){n(w,P.sibling),S=r(P,_.props),S.ref=Sp(w,P,_),S.return=w,w=S;break e}n(w,P);break}else e(w,P);P=P.sibling}_.type===Bd?(S=Wu(_.props.children,w.mode,T,_.key),S.return=w,w=S):(T=Jv(_.type,_.key,_.props,null,w.mode,T),T.ref=Sp(w,S,_),T.return=w,w=T)}return o(w);case $d:e:{for(P=_.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){n(w,S.sibling),S=r(S,_.children||[]),S.return=w,w=S;break e}else{n(w,S);break}else e(w,S);S=S.sibling}S=jC(_,w.mode,T),S.return=w,w=S}return o(w);case La:return P=_._init,C(w,S,P(_._payload),T)}if(Fp(_))return x(w,S,_,T);if(yp(_))return v(w,S,_,T);mv(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(n(w,S.sibling),S=r(S,_),S.return=w,w=S):(n(w,S),S=BC(_,w.mode,T),S.return=w,w=S),o(w)):n(w,S)}return C}var Uh=lI(!0),cI=lI(!1),Zx=ac(null),e0=null,Yd=null,rT=null;function iT(){rT=Yd=e0=null}function oT(t){var e=Zx.current;xt(Zx),t._currentValue=e}function YS(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function lf(t,e){e0=t,rT=Yd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ws=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(rT!==t)if(t={context:t,memoizedValue:e,next:null},Yd===null){if(e0===null)throw Error(X(308));Yd=t,e0.dependencies={lanes:0,firstContext:t}}else Yd=Yd.next=t;return e}var Cc=null;function aT(t){Cc===null?Cc=[t]:Cc.push(t)}function uI(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,aT(e)):(n.next=r.next,r.next=n),e.interleaved=n,pa(t,s)}function pa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fa=!1;function lT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jl(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ye&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,pa(t,n)}return r=s.interleaved,r===null?(e.next=e,aT(s)):(e.next=r.next,r.next=e),s.interleaved=e,pa(t,n)}function Hv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,WE(t,n)}}function eR(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function t0(t,e,n,s){var r=t.updateQueue;Fa=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var p=r.baseState;o=0,u=c=l=null,a=i;do{var g=a.lane,y=a.eventTime;if((s&g)===g){u!==null&&(u=u.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,v=a;switch(g=e,y=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){p=x.call(y,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,g=typeof x=="function"?x.call(y,p,g):x,g==null)break e;p=kt({},p,g);break e;case 2:Fa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=y,l=p):u=u.next=y,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(u===null&&(l=p),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Qu|=o,t.lanes=o,t.memoizedState=p}}function tR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(X(191,r));r.call(s)}}}var Dy={},Wi=ac(Dy),Lm=ac(Dy),Fm=ac(Dy);function Sc(t){if(t===Dy)throw Error(X(174));return t}function cT(t,e){switch(pt(Fm,e),pt(Lm,t),pt(Wi,Dy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=NS(e,t)}xt(Wi),pt(Wi,e)}function Vh(){xt(Wi),xt(Lm),xt(Fm)}function fI(t){Sc(Fm.current);var e=Sc(Wi.current),n=NS(e,t.type);e!==n&&(pt(Lm,t),pt(Wi,n))}function uT(t){Lm.current===t&&(xt(Wi),xt(Lm))}var Pt=ac(0);function n0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var LC=[];function dT(){for(var t=0;t<LC.length;t++)LC[t]._workInProgressVersionPrimary=null;LC.length=0}var Gv=Ca.ReactCurrentDispatcher,FC=Ca.ReactCurrentBatchConfig,Xu=0,Mt=null,en=null,pn=null,s0=!1,mm=!1,Om=0,M3=0;function Pn(){throw Error(X(321))}function fT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function hT(t,e,n,s,r,i){if(Xu=i,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gv.current=t===null||t.memoizedState===null?L3:F3,t=n(s,r),mm){i=0;do{if(mm=!1,Om=0,25<=i)throw Error(X(301));i+=1,pn=en=null,e.updateQueue=null,Gv.current=O3,t=n(s,r)}while(mm)}if(Gv.current=r0,e=en!==null&&en.next!==null,Xu=0,pn=en=Mt=null,s0=!1,e)throw Error(X(300));return t}function pT(){var t=Om!==0;return Om=0,t}function vi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Mt.memoizedState=pn=t:pn=pn.next=t,pn}function wr(){if(en===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=en.next;var e=pn===null?Mt.memoizedState:pn.next;if(e!==null)pn=e,en=t;else{if(t===null)throw Error(X(310));en=t,t={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},pn===null?Mt.memoizedState=pn=t:pn=pn.next=t}return pn}function Um(t,e){return typeof e=="function"?e(t):e}function OC(t){var e=wr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var s=en,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Xu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=s):l=l.next=p,Mt.lanes|=u,Qu|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,ti(s,e.memoizedState)||(ws=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Mt.lanes|=i,Qu|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function UC(t){var e=wr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);ti(i,e.memoizedState)||(ws=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function hI(){}function pI(t,e){var n=Mt,s=wr(),r=e(),i=!ti(s.memoizedState,r);if(i&&(s.memoizedState=r,ws=!0),s=s.queue,mT(yI.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Vm(9,gI.bind(null,n,s,r,e),void 0,null),mn===null)throw Error(X(349));Xu&30||mI(n,e,r)}return r}function mI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gI(t,e,n,s){e.value=n,e.getSnapshot=s,vI(e)&&xI(t)}function yI(t,e,n){return n(function(){vI(e)&&xI(t)})}function vI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ti(t,n)}catch{return!0}}function xI(t){var e=pa(t,1);e!==null&&ei(e,t,1,-1)}function nR(t){var e=vi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Um,lastRenderedState:t},e.queue=t,t=t.dispatch=D3.bind(null,Mt,t),[e.memoizedState,t]}function Vm(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function wI(){return wr().memoizedState}function qv(t,e,n,s){var r=vi();Mt.flags|=t,r.memoizedState=Vm(1|e,n,void 0,s===void 0?null:s)}function xw(t,e,n,s){var r=wr();s=s===void 0?null:s;var i=void 0;if(en!==null){var o=en.memoizedState;if(i=o.destroy,s!==null&&fT(s,o.deps)){r.memoizedState=Vm(e,n,i,s);return}}Mt.flags|=t,r.memoizedState=Vm(1|e,n,i,s)}function sR(t,e){return qv(8390656,8,t,e)}function mT(t,e){return xw(2048,8,t,e)}function CI(t,e){return xw(4,2,t,e)}function SI(t,e){return xw(4,4,t,e)}function bI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _I(t,e,n){return n=n!=null?n.concat([t]):null,xw(4,4,bI.bind(null,e,t),n)}function gT(){}function EI(t,e){var n=wr();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&fT(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function TI(t,e){var n=wr();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&fT(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function AI(t,e,n){return Xu&21?(ti(n,e)||(n=kk(),Mt.lanes|=n,Qu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ws=!0),t.memoizedState=n)}function k3(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var s=FC.transition;FC.transition={};try{t(!1),e()}finally{it=n,FC.transition=s}}function RI(){return wr().memoizedState}function I3(t,e,n){var s=Hl(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},NI(t))PI(e,n);else if(n=uI(t,e,n,s),n!==null){var r=ts();ei(n,t,s,r),MI(n,e,s)}}function D3(t,e,n){var s=Hl(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(NI(t))PI(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,ti(a,o)){var l=e.interleaved;l===null?(r.next=r,aT(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=uI(t,e,r,s),n!==null&&(r=ts(),ei(n,t,s,r),MI(n,e,s))}}function NI(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function PI(t,e){mm=s0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MI(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,WE(t,n)}}var r0={readContext:xr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},L3={readContext:xr,useCallback:function(t,e){return vi().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:sR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qv(4194308,4,bI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qv(4194308,4,t,e)},useInsertionEffect:function(t,e){return qv(4,2,t,e)},useMemo:function(t,e){var n=vi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=vi();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=I3.bind(null,Mt,t),[s.memoizedState,t]},useRef:function(t){var e=vi();return t={current:t},e.memoizedState=t},useState:nR,useDebugValue:gT,useDeferredValue:function(t){return vi().memoizedState=t},useTransition:function(){var t=nR(!1),e=t[0];return t=k3.bind(null,t[1]),vi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Mt,r=vi();if(Et){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),mn===null)throw Error(X(349));Xu&30||mI(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,sR(yI.bind(null,s,i,t),[t]),s.flags|=2048,Vm(9,gI.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=vi(),e=mn.identifierPrefix;if(Et){var n=sa,s=na;n=(s&~(1<<32-Zr(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Om++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=M3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},F3={readContext:xr,useCallback:EI,useContext:xr,useEffect:mT,useImperativeHandle:_I,useInsertionEffect:CI,useLayoutEffect:SI,useMemo:TI,useReducer:OC,useRef:wI,useState:function(){return OC(Um)},useDebugValue:gT,useDeferredValue:function(t){var e=wr();return AI(e,en.memoizedState,t)},useTransition:function(){var t=OC(Um)[0],e=wr().memoizedState;return[t,e]},useMutableSource:hI,useSyncExternalStore:pI,useId:RI,unstable_isNewReconciler:!1},O3={readContext:xr,useCallback:EI,useContext:xr,useEffect:mT,useImperativeHandle:_I,useInsertionEffect:CI,useLayoutEffect:SI,useMemo:TI,useReducer:UC,useRef:wI,useState:function(){return UC(Um)},useDebugValue:gT,useDeferredValue:function(t){var e=wr();return en===null?e.memoizedState=t:AI(e,en.memoizedState,t)},useTransition:function(){var t=UC(Um)[0],e=wr().memoizedState;return[t,e]},useMutableSource:hI,useSyncExternalStore:pI,useId:RI,unstable_isNewReconciler:!1};function kr(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function JS(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ww={isMounted:function(t){return(t=t._reactInternals)?md(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ts(),r=Hl(t),i=ra(s,r);i.payload=e,n!=null&&(i.callback=n),e=jl(t,i,r),e!==null&&(ei(e,t,r,s),Hv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ts(),r=Hl(t),i=ra(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jl(t,i,r),e!==null&&(ei(e,t,r,s),Hv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ts(),s=Hl(t),r=ra(n,s);r.tag=2,e!=null&&(r.callback=e),e=jl(t,r,s),e!==null&&(ei(e,t,s,n),Hv(e,t,s))}};function rR(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Mm(n,s)||!Mm(r,i):!0}function kI(t,e,n){var s=!1,r=Xl,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(r=Ss(e)?Yu:$n.current,s=e.contextTypes,i=(s=s!=null)?Fh(t,r):Xl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ww,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function iR(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ww.enqueueReplaceState(e,e.state,null)}function XS(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},lT(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=xr(i):(i=Ss(e)?Yu:$n.current,r.context=Fh(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(JS(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ww.enqueueReplaceState(r,r.state,null),t0(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $h(t,e){try{var n="",s=e;do n+=dB(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function VC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function QS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var U3=typeof WeakMap=="function"?WeakMap:Map;function II(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){o0||(o0=!0,lb=s),QS(t,e)},n}function DI(t,e,n){n=ra(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){QS(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){QS(t,e),typeof s!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function oR(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new U3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=Q3.bind(null,t,e,n),e.then(t,t))}function aR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lR(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,jl(n,e,1))),n.lanes|=1),t)}var V3=Ca.ReactCurrentOwner,ws=!1;function Jn(t,e,n,s){e.child=t===null?cI(e,null,n,s):Uh(e,t.child,n,s)}function cR(t,e,n,s,r){n=n.render;var i=e.ref;return lf(e,r),s=hT(t,e,n,s,i,r),n=pT(),t!==null&&!ws?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ma(t,e,r)):(Et&&n&&tT(e),e.flags|=1,Jn(t,e,s,r),e.child)}function uR(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!_T(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LI(t,e,i,s,r)):(t=Jv(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mm,n(o,s)&&t.ref===e.ref)return ma(t,e,r)}return e.flags|=1,t=Gl(i,s),t.ref=e.ref,t.return=e,e.child=t}function LI(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Mm(i,s)&&t.ref===e.ref)if(ws=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(ws=!0);else return e.lanes=t.lanes,ma(t,e,r)}return ZS(t,e,n,s,r)}function FI(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Xd,Bs),Bs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Xd,Bs),Bs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,pt(Xd,Bs),Bs|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,pt(Xd,Bs),Bs|=s;return Jn(t,e,r,n),e.child}function OI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ZS(t,e,n,s,r){var i=Ss(n)?Yu:$n.current;return i=Fh(e,i),lf(e,r),n=hT(t,e,n,s,i,r),s=pT(),t!==null&&!ws?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ma(t,e,r)):(Et&&s&&tT(e),e.flags|=1,Jn(t,e,n,r),e.child)}function dR(t,e,n,s,r){if(Ss(n)){var i=!0;Jx(e)}else i=!1;if(lf(e,r),e.stateNode===null)Wv(t,e),kI(e,n,s),XS(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xr(c):(c=Ss(n)?Yu:$n.current,c=Fh(e,c));var u=n.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&iR(e,o,s,c),Fa=!1;var g=e.memoizedState;o.state=g,t0(e,s,o,r),l=e.memoizedState,a!==s||g!==l||Cs.current||Fa?(typeof u=="function"&&(JS(e,n,u,s),l=e.memoizedState),(a=Fa||rR(e,n,a,s,g,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,dI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kr(e.type,a),o.props=c,p=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=Ss(n)?Yu:$n.current,l=Fh(e,l));var y=n.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&iR(e,o,s,l),Fa=!1,g=e.memoizedState,o.state=g,t0(e,s,o,r);var x=e.memoizedState;a!==p||g!==x||Cs.current||Fa?(typeof y=="function"&&(JS(e,n,y,s),x=e.memoizedState),(c=Fa||rR(e,n,c,s,g,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),o.props=s,o.state=x,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return eb(t,e,n,s,i,r)}function eb(t,e,n,s,r,i){OI(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&J1(e,n,!1),ma(t,e,i);s=e.stateNode,V3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Uh(e,t.child,null,i),e.child=Uh(e,null,a,i)):Jn(t,e,a,i),e.memoizedState=s.state,r&&J1(e,n,!0),e.child}function UI(t){var e=t.stateNode;e.pendingContext?Y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y1(t,e.context,!1),cT(t,e.containerInfo)}function fR(t,e,n,s,r){return Oh(),sT(r),e.flags|=256,Jn(t,e,n,s),e.child}var tb={dehydrated:null,treeContext:null,retryLane:0};function nb(t){return{baseLanes:t,cachePool:null,transitions:null}}function VI(t,e,n){var s=e.pendingProps,r=Pt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),pt(Pt,r&1),t===null)return KS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bw(o,s,0,null),t=Wu(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nb(n),e.memoizedState=tb,t):yT(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return $3(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Gl(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Gl(a,i):(i=Wu(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?nb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tb,s}return i=t.child,t=i.sibling,s=Gl(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function yT(t,e){return e=bw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gv(t,e,n,s){return s!==null&&sT(s),Uh(e,t.child,null,n),t=yT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $3(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=VC(Error(X(422))),gv(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=bw({mode:"visible",children:s.children},r,0,null),i=Wu(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Uh(e,t.child,null,o),e.child.memoizedState=nb(o),e.memoizedState=tb,i);if(!(e.mode&1))return gv(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(X(419)),s=VC(i,s,void 0),gv(t,e,o,s)}if(a=(o&t.childLanes)!==0,ws||a){if(s=mn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,pa(t,r),ei(s,t,r,-1))}return bT(),s=VC(Error(X(421))),gv(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Z3.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Ws=Bl(r.nextSibling),Ks=e,Et=!0,Kr=null,t!==null&&(ur[dr++]=na,ur[dr++]=sa,ur[dr++]=Ju,na=t.id,sa=t.overflow,Ju=e),e=yT(e,s.children),e.flags|=4096,e)}function hR(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),YS(t.return,e,n)}function $C(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function $I(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Jn(t,e,s.children,n),s=Pt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hR(t,n,e);else if(t.tag===19)hR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(pt(Pt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&n0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),$C(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&n0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}$C(e,!0,n,null,i);break;case"together":$C(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Gl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B3(t,e,n){switch(e.tag){case 3:UI(e),Oh();break;case 5:fI(e);break;case 1:Ss(e.type)&&Jx(e);break;case 4:cT(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;pt(Zx,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(pt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?VI(t,e,n):(pt(Pt,Pt.current&1),t=ma(t,e,n),t!==null?t.sibling:null);pt(Pt,Pt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return $I(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),pt(Pt,Pt.current),s)break;return null;case 22:case 23:return e.lanes=0,FI(t,e,n)}return ma(t,e,n)}var BI,sb,jI,zI;BI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sb=function(){};jI=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Sc(Wi.current);var i=null;switch(n){case"input":r=ES(t,r),s=ES(t,s),i=[];break;case"select":r=kt({},r,{value:void 0}),s=kt({},s,{value:void 0}),i=[];break;case"textarea":r=RS(t,r),s=RS(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Kx)}PS(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_m.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_m.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&yt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};zI=function(t,e,n,s){n!==s&&(e.flags|=4)};function bp(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Mn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function j3(t,e,n){var s=e.pendingProps;switch(nT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(e),null;case 1:return Ss(e.type)&&Yx(),Mn(e),null;case 3:return s=e.stateNode,Vh(),xt(Cs),xt($n),dT(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(pv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kr!==null&&(db(Kr),Kr=null))),sb(t,e),Mn(e),null;case 5:uT(e);var r=Sc(Fm.current);if(n=e.type,t!==null&&e.stateNode!=null)jI(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(X(166));return Mn(e),null}if(t=Sc(Wi.current),pv(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Vi]=e,s[Dm]=i,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",s),yt("close",s);break;case"iframe":case"object":case"embed":yt("load",s);break;case"video":case"audio":for(r=0;r<Up.length;r++)yt(Up[r],s);break;case"source":yt("error",s);break;case"img":case"image":case"link":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"input":S1(s,i),yt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},yt("invalid",s);break;case"textarea":_1(s,i),yt("invalid",s)}PS(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&hv(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&hv(s.textContent,a,t),r=["children",""+a]):_m.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&yt("scroll",s)}switch(n){case"input":iv(s),b1(s,i,!0);break;case"textarea":iv(s),E1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Kx)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Vi]=e,t[Dm]=s,BI(t,e,!1,!1),e.stateNode=t;e:{switch(o=MS(n,s),n){case"dialog":yt("cancel",t),yt("close",t),r=s;break;case"iframe":case"object":case"embed":yt("load",t),r=s;break;case"video":case"audio":for(r=0;r<Up.length;r++)yt(Up[r],t);r=s;break;case"source":yt("error",t),r=s;break;case"img":case"image":case"link":yt("error",t),yt("load",t),r=s;break;case"details":yt("toggle",t),r=s;break;case"input":S1(t,s),r=ES(t,s),yt("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=kt({},s,{value:void 0}),yt("invalid",t);break;case"textarea":_1(t,s),r=RS(t,s),yt("invalid",t);break;default:r=s}PS(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wk(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vk(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Em(t,l):typeof l=="number"&&Em(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_m.hasOwnProperty(i)?l!=null&&i==="onScroll"&&yt("scroll",t):l!=null&&BE(t,i,l,o))}switch(n){case"input":iv(t),b1(t,s,!1);break;case"textarea":iv(t),E1(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Jl(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?sf(t,!!s.multiple,i,!1):s.defaultValue!=null&&sf(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Kx)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mn(e),null;case 6:if(t&&e.stateNode!=null)zI(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(X(166));if(n=Sc(Fm.current),Sc(Wi.current),pv(e)){if(s=e.stateNode,n=e.memoizedProps,s[Vi]=e,(i=s.nodeValue!==n)&&(t=Ks,t!==null))switch(t.tag){case 3:hv(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hv(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Vi]=e,e.stateNode=s}return Mn(e),null;case 13:if(xt(Pt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Ws!==null&&e.mode&1&&!(e.flags&128))aI(),Oh(),e.flags|=98560,i=!1;else if(i=pv(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Vi]=e}else Oh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mn(e),i=!1}else Kr!==null&&(db(Kr),Kr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?nn===0&&(nn=3):bT())),e.updateQueue!==null&&(e.flags|=4),Mn(e),null);case 4:return Vh(),sb(t,e),t===null&&km(e.stateNode.containerInfo),Mn(e),null;case 10:return oT(e.type._context),Mn(e),null;case 17:return Ss(e.type)&&Yx(),Mn(e),null;case 19:if(xt(Pt),i=e.memoizedState,i===null)return Mn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)bp(i,!1);else{if(nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=n0(t),o!==null){for(e.flags|=128,bp(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(Pt,Pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vt()>Bh&&(e.flags|=128,s=!0,bp(i,!1),e.lanes=4194304)}else{if(!s)if(t=n0(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Et)return Mn(e),null}else 2*Vt()-i.renderingStartTime>Bh&&n!==1073741824&&(e.flags|=128,s=!0,bp(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vt(),e.sibling=null,n=Pt.current,pt(Pt,s?n&1|2:n&1),e):(Mn(e),null);case 22:case 23:return ST(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Bs&1073741824&&(Mn(e),e.subtreeFlags&6&&(e.flags|=8192)):Mn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function z3(t,e){switch(nT(e),e.tag){case 1:return Ss(e.type)&&Yx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vh(),xt(Cs),xt($n),dT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uT(e),null;case 13:if(xt(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Oh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Pt),null;case 4:return Vh(),null;case 10:return oT(e.type._context),null;case 22:case 23:return ST(),null;case 24:return null;default:return null}}var yv=!1,Un=!1,H3=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Jd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Lt(t,e,s)}else n.current=null}function rb(t,e,n){try{n()}catch(s){Lt(t,e,s)}}var pR=!1;function G3(t,e){if(BS=Gx,t=Kk(),eT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,p=t,g=null;t:for(;;){for(var y;p!==n||r!==0&&p.nodeType!==3||(a=o+r),p!==i||s!==0&&p.nodeType!==3||(l=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++c===r&&(a=o),g===i&&++u===s&&(l=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jS={focusedElem:t,selectionRange:n},Gx=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,C=x.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:kr(e.type,v),C);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(T){Lt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return x=pR,pR=!1,x}function gm(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&rb(e,n,i)}r=r.next}while(r!==s)}}function Cw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ib(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HI(t){var e=t.alternate;e!==null&&(t.alternate=null,HI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Dm],delete e[GS],delete e[A3],delete e[R3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GI(t){return t.tag===5||t.tag===3||t.tag===4}function mR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ob(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kx));else if(s!==4&&(t=t.child,t!==null))for(ob(t,e,n),t=t.sibling;t!==null;)ob(t,e,n),t=t.sibling}function ab(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(ab(t,e,n),t=t.sibling;t!==null;)ab(t,e,n),t=t.sibling}var bn=null,Wr=!1;function Na(t,e,n){for(n=n.child;n!==null;)qI(t,e,n),n=n.sibling}function qI(t,e,n){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(hw,n)}catch{}switch(n.tag){case 5:Un||Jd(n,e);case 6:var s=bn,r=Wr;bn=null,Na(t,e,n),bn=s,Wr=r,bn!==null&&(Wr?(t=bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bn.removeChild(n.stateNode));break;case 18:bn!==null&&(Wr?(t=bn,n=n.stateNode,t.nodeType===8?IC(t.parentNode,n):t.nodeType===1&&IC(t,n),Nm(t)):IC(bn,n.stateNode));break;case 4:s=bn,r=Wr,bn=n.stateNode.containerInfo,Wr=!0,Na(t,e,n),bn=s,Wr=r;break;case 0:case 11:case 14:case 15:if(!Un&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rb(n,e,o),r=r.next}while(r!==s)}Na(t,e,n);break;case 1:if(!Un&&(Jd(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Lt(n,e,a)}Na(t,e,n);break;case 21:Na(t,e,n);break;case 22:n.mode&1?(Un=(s=Un)||n.memoizedState!==null,Na(t,e,n),Un=s):Na(t,e,n);break;default:Na(t,e,n)}}function gR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H3),e.forEach(function(s){var r=ej.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bn=a.stateNode,Wr=!1;break e;case 3:bn=a.stateNode.containerInfo,Wr=!0;break e;case 4:bn=a.stateNode.containerInfo,Wr=!0;break e}a=a.return}if(bn===null)throw Error(X(160));qI(i,o,r),bn=null,Wr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Lt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WI(e,t),e=e.sibling}function WI(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),pi(t),s&4){try{gm(3,t,t.return),Cw(3,t)}catch(v){Lt(t,t.return,v)}try{gm(5,t,t.return)}catch(v){Lt(t,t.return,v)}}break;case 1:Ar(e,t),pi(t),s&512&&n!==null&&Jd(n,n.return);break;case 5:if(Ar(e,t),pi(t),s&512&&n!==null&&Jd(n,n.return),t.flags&32){var r=t.stateNode;try{Em(r,"")}catch(v){Lt(t,t.return,v)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mk(r,i),MS(a,o);var c=MS(a,i);for(o=0;o<l.length;o+=2){var u=l[o],p=l[o+1];u==="style"?wk(r,p):u==="dangerouslySetInnerHTML"?vk(r,p):u==="children"?Em(r,p):BE(r,u,p,c)}switch(a){case"input":TS(r,i);break;case"textarea":gk(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?sf(r,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?sf(r,!!i.multiple,i.defaultValue,!0):sf(r,!!i.multiple,i.multiple?[]:"",!1))}r[Dm]=i}catch(v){Lt(t,t.return,v)}}break;case 6:if(Ar(e,t),pi(t),s&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Lt(t,t.return,v)}}break;case 3:if(Ar(e,t),pi(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Nm(e.containerInfo)}catch(v){Lt(t,t.return,v)}break;case 4:Ar(e,t),pi(t);break;case 13:Ar(e,t),pi(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(wT=Vt())),s&4&&gR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Un=(c=Un)||u,Ar(e,t),Un=c):Ar(e,t),pi(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(pe=t,u=t.child;u!==null;){for(p=pe=u;pe!==null;){switch(g=pe,y=g.child,g.tag){case 0:case 11:case 14:case 15:gm(4,g,g.return);break;case 1:Jd(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){Lt(s,n,v)}}break;case 5:Jd(g,g.return);break;case 22:if(g.memoizedState!==null){vR(p);continue}}y!==null?(y.return=g,pe=y):vR(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{r=p.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xk("display",o))}catch(v){Lt(t,t.return,v)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){Lt(t,t.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ar(e,t),pi(t),s&4&&gR(t);break;case 21:break;default:Ar(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GI(n)){var s=n;break e}n=n.return}throw Error(X(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Em(r,""),s.flags&=-33);var i=mR(t);ab(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=mR(t);ob(t,a,o);break;default:throw Error(X(161))}}catch(l){Lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q3(t,e,n){pe=t,KI(t)}function KI(t,e,n){for(var s=(t.mode&1)!==0;pe!==null;){var r=pe,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||yv;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Un;a=yv;var c=Un;if(yv=o,(Un=l)&&!c)for(pe=r;pe!==null;)o=pe,l=o.child,o.tag===22&&o.memoizedState!==null?xR(r):l!==null?(l.return=o,pe=l):xR(r);for(;i!==null;)pe=i,KI(i),i=i.sibling;pe=r,yv=a,Un=c}yR(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,pe=i):yR(t)}}function yR(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Un||Cw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Un)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:kr(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tR(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Nm(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Un||e.flags&512&&ib(e)}catch(g){Lt(e,e.return,g)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function vR(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function xR(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cw(4,e)}catch(l){Lt(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Lt(e,r,l)}}var i=e.return;try{ib(e)}catch(l){Lt(e,i,l)}break;case 5:var o=e.return;try{ib(e)}catch(l){Lt(e,o,l)}}}catch(l){Lt(e,e.return,l)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var W3=Math.ceil,i0=Ca.ReactCurrentDispatcher,vT=Ca.ReactCurrentOwner,mr=Ca.ReactCurrentBatchConfig,Ye=0,mn=null,qt=null,Tn=0,Bs=0,Xd=ac(0),nn=0,$m=null,Qu=0,Sw=0,xT=0,ym=null,xs=null,wT=0,Bh=1/0,po=null,o0=!1,lb=null,zl=null,vv=!1,Ol=null,a0=0,vm=0,cb=null,Kv=-1,Yv=0;function ts(){return Ye&6?Vt():Kv!==-1?Kv:Kv=Vt()}function Hl(t){return t.mode&1?Ye&2&&Tn!==0?Tn&-Tn:P3.transition!==null?(Yv===0&&(Yv=kk()),Yv):(t=it,t!==0||(t=window.event,t=t===void 0?16:Vk(t.type)),t):1}function ei(t,e,n,s){if(50<vm)throw vm=0,cb=null,Error(X(185));My(t,n,s),(!(Ye&2)||t!==mn)&&(t===mn&&(!(Ye&2)&&(Sw|=n),nn===4&&Va(t,Tn)),bs(t,s),n===1&&Ye===0&&!(e.mode&1)&&(Bh=Vt()+500,vw&&lc()))}function bs(t,e){var n=t.callbackNode;PB(t,e);var s=Hx(t,t===mn?Tn:0);if(s===0)n!==null&&R1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&R1(n),e===1)t.tag===0?N3(wR.bind(null,t)):rI(wR.bind(null,t)),E3(function(){!(Ye&6)&&lc()}),n=null;else{switch(Ik(s)){case 1:n=qE;break;case 4:n=Pk;break;case 16:n=zx;break;case 536870912:n=Mk;break;default:n=zx}n=nD(n,YI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YI(t,e){if(Kv=-1,Yv=0,Ye&6)throw Error(X(327));var n=t.callbackNode;if(cf()&&t.callbackNode!==n)return null;var s=Hx(t,t===mn?Tn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=l0(t,s);else{e=s;var r=Ye;Ye|=2;var i=XI();(mn!==t||Tn!==e)&&(po=null,Bh=Vt()+500,qu(t,e));do try{J3();break}catch(a){JI(t,a)}while(!0);iT(),i0.current=i,Ye=r,qt!==null?e=0:(mn=null,Tn=0,e=nn)}if(e!==0){if(e===2&&(r=FS(t),r!==0&&(s=r,e=ub(t,r))),e===1)throw n=$m,qu(t,0),Va(t,s),bs(t,Vt()),n;if(e===6)Va(t,s);else{if(r=t.current.alternate,!(s&30)&&!K3(r)&&(e=l0(t,s),e===2&&(i=FS(t),i!==0&&(s=i,e=ub(t,i))),e===1))throw n=$m,qu(t,0),Va(t,s),bs(t,Vt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(X(345));case 2:pc(t,xs,po);break;case 3:if(Va(t,s),(s&130023424)===s&&(e=wT+500-Vt(),10<e)){if(Hx(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){ts(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=HS(pc.bind(null,t,xs,po),e);break}pc(t,xs,po);break;case 4:if(Va(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Zr(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Vt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*W3(s/1960))-s,10<s){t.timeoutHandle=HS(pc.bind(null,t,xs,po),s);break}pc(t,xs,po);break;case 5:pc(t,xs,po);break;default:throw Error(X(329))}}}return bs(t,Vt()),t.callbackNode===n?YI.bind(null,t):null}function ub(t,e){var n=ym;return t.current.memoizedState.isDehydrated&&(qu(t,e).flags|=256),t=l0(t,e),t!==2&&(e=xs,xs=n,e!==null&&db(e)),t}function db(t){xs===null?xs=t:xs.push.apply(xs,t)}function K3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!ti(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Va(t,e){for(e&=~xT,e&=~Sw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zr(e),s=1<<n;t[n]=-1,e&=~s}}function wR(t){if(Ye&6)throw Error(X(327));cf();var e=Hx(t,0);if(!(e&1))return bs(t,Vt()),null;var n=l0(t,e);if(t.tag!==0&&n===2){var s=FS(t);s!==0&&(e=s,n=ub(t,s))}if(n===1)throw n=$m,qu(t,0),Va(t,e),bs(t,Vt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pc(t,xs,po),bs(t,Vt()),null}function CT(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(Bh=Vt()+500,vw&&lc())}}function Zu(t){Ol!==null&&Ol.tag===0&&!(Ye&6)&&cf();var e=Ye;Ye|=1;var n=mr.transition,s=it;try{if(mr.transition=null,it=1,t)return t()}finally{it=s,mr.transition=n,Ye=e,!(Ye&6)&&lc()}}function ST(){Bs=Xd.current,xt(Xd)}function qu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_3(n)),qt!==null)for(n=qt.return;n!==null;){var s=n;switch(nT(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Yx();break;case 3:Vh(),xt(Cs),xt($n),dT();break;case 5:uT(s);break;case 4:Vh();break;case 13:xt(Pt);break;case 19:xt(Pt);break;case 10:oT(s.type._context);break;case 22:case 23:ST()}n=n.return}if(mn=t,qt=t=Gl(t.current,null),Tn=Bs=e,nn=0,$m=null,xT=Sw=Qu=0,xs=ym=null,Cc!==null){for(e=0;e<Cc.length;e++)if(n=Cc[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Cc=null}return t}function JI(t,e){do{var n=qt;try{if(iT(),Gv.current=r0,s0){for(var s=Mt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}s0=!1}if(Xu=0,pn=en=Mt=null,mm=!1,Om=0,vT.current=null,n===null||n.return===null){nn=1,$m=e,qt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=aR(o);if(y!==null){y.flags&=-257,lR(y,o,a,i,e),y.mode&1&&oR(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var v=new Set;v.add(l),e.updateQueue=v}else x.add(l);break e}else{if(!(e&1)){oR(i,c,e),bT();break e}l=Error(X(426))}}else if(Et&&a.mode&1){var C=aR(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),lR(C,o,a,i,e),sT($h(l,a));break e}}i=l=$h(l,a),nn!==4&&(nn=2),ym===null?ym=[i]:ym.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=II(i,l,e);eR(i,w);break e;case 1:a=l;var S=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(zl===null||!zl.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=DI(i,a,e);eR(i,T);break e}}i=i.return}while(i!==null)}ZI(n)}catch(A){e=A,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function XI(){var t=i0.current;return i0.current=r0,t===null?r0:t}function bT(){(nn===0||nn===3||nn===2)&&(nn=4),mn===null||!(Qu&268435455)&&!(Sw&268435455)||Va(mn,Tn)}function l0(t,e){var n=Ye;Ye|=2;var s=XI();(mn!==t||Tn!==e)&&(po=null,qu(t,e));do try{Y3();break}catch(r){JI(t,r)}while(!0);if(iT(),Ye=n,i0.current=s,qt!==null)throw Error(X(261));return mn=null,Tn=0,nn}function Y3(){for(;qt!==null;)QI(qt)}function J3(){for(;qt!==null&&!CB();)QI(qt)}function QI(t){var e=tD(t.alternate,t,Bs);t.memoizedProps=t.pendingProps,e===null?ZI(t):qt=e,vT.current=null}function ZI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z3(n,e),n!==null){n.flags&=32767,qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nn=6,qt=null;return}}else if(n=j3(n,e,Bs),n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);nn===0&&(nn=5)}function pc(t,e,n){var s=it,r=mr.transition;try{mr.transition=null,it=1,X3(t,e,n,s)}finally{mr.transition=r,it=s}return null}function X3(t,e,n,s){do cf();while(Ol!==null);if(Ye&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MB(t,i),t===mn&&(qt=mn=null,Tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vv||(vv=!0,nD(zx,function(){return cf(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mr.transition,mr.transition=null;var o=it;it=1;var a=Ye;Ye|=4,vT.current=null,G3(t,n),WI(n,t),y3(jS),Gx=!!BS,jS=BS=null,t.current=n,q3(n),SB(),Ye=a,it=o,mr.transition=i}else t.current=n;if(vv&&(vv=!1,Ol=t,a0=r),i=t.pendingLanes,i===0&&(zl=null),EB(n.stateNode),bs(t,Vt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(o0)throw o0=!1,t=lb,lb=null,t;return a0&1&&t.tag!==0&&cf(),i=t.pendingLanes,i&1?t===cb?vm++:(vm=0,cb=t):vm=0,lc(),null}function cf(){if(Ol!==null){var t=Ik(a0),e=mr.transition,n=it;try{if(mr.transition=null,it=16>t?16:t,Ol===null)var s=!1;else{if(t=Ol,Ol=null,a0=0,Ye&6)throw Error(X(331));var r=Ye;for(Ye|=4,pe=t.current;pe!==null;){var i=pe,o=i.child;if(pe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pe=c;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:gm(8,u,i)}var p=u.child;if(p!==null)p.return=u,pe=p;else for(;pe!==null;){u=pe;var g=u.sibling,y=u.return;if(HI(u),u===c){pe=null;break}if(g!==null){g.return=y,pe=g;break}pe=y}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pe=o;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gm(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,pe=w;break e}pe=i.return}}var S=t.current;for(pe=S;pe!==null;){o=pe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,pe=_;else e:for(o=S;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cw(9,a)}}catch(A){Lt(a,a.return,A)}if(a===o){pe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,pe=T;break e}pe=a.return}}if(Ye=r,lc(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(hw,t)}catch{}s=!0}return s}finally{it=n,mr.transition=e}}return!1}function CR(t,e,n){e=$h(n,e),e=II(t,e,1),t=jl(t,e,1),e=ts(),t!==null&&(My(t,1,e),bs(t,e))}function Lt(t,e,n){if(t.tag===3)CR(t,t,n);else for(;e!==null;){if(e.tag===3){CR(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(zl===null||!zl.has(s))){t=$h(n,t),t=DI(e,t,1),e=jl(e,t,1),t=ts(),e!==null&&(My(e,1,t),bs(e,t));break}}e=e.return}}function Q3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(Tn&n)===n&&(nn===4||nn===3&&(Tn&130023424)===Tn&&500>Vt()-wT?qu(t,0):xT|=n),bs(t,e)}function eD(t,e){e===0&&(t.mode&1?(e=lv,lv<<=1,!(lv&130023424)&&(lv=4194304)):e=1);var n=ts();t=pa(t,e),t!==null&&(My(t,e,n),bs(t,n))}function Z3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eD(t,n)}function ej(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(e),eD(t,n)}var tD;tD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cs.current)ws=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ws=!1,B3(t,e,n);ws=!!(t.flags&131072)}else ws=!1,Et&&e.flags&1048576&&iI(e,Qx,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Wv(t,e),t=e.pendingProps;var r=Fh(e,$n.current);lf(e,n),r=hT(null,e,s,t,r,n);var i=pT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(s)?(i=!0,Jx(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,lT(e),r.updater=ww,e.stateNode=r,r._reactInternals=e,XS(e,s,t,n),e=eb(null,e,s,!0,i,n)):(e.tag=0,Et&&i&&tT(e),Jn(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Wv(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=nj(s),t=kr(s,t),r){case 0:e=ZS(null,e,s,t,n);break e;case 1:e=dR(null,e,s,t,n);break e;case 11:e=cR(null,e,s,t,n);break e;case 14:e=uR(null,e,s,kr(s.type,t),n);break e}throw Error(X(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:kr(s,r),ZS(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:kr(s,r),dR(t,e,s,r,n);case 3:e:{if(UI(e),t===null)throw Error(X(387));s=e.pendingProps,i=e.memoizedState,r=i.element,dI(t,e),t0(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=$h(Error(X(423)),e),e=fR(t,e,s,n,r);break e}else if(s!==r){r=$h(Error(X(424)),e),e=fR(t,e,s,n,r);break e}else for(Ws=Bl(e.stateNode.containerInfo.firstChild),Ks=e,Et=!0,Kr=null,n=cI(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oh(),s===r){e=ma(t,e,n);break e}Jn(t,e,s,n)}e=e.child}return e;case 5:return fI(e),t===null&&KS(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,zS(s,r)?o=null:i!==null&&zS(s,i)&&(e.flags|=32),OI(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&KS(e),null;case 13:return VI(t,e,n);case 4:return cT(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Uh(e,null,s,n):Jn(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:kr(s,r),cR(t,e,s,r,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,pt(Zx,s._currentValue),s._currentValue=o,i!==null)if(ti(i.value,o)){if(i.children===r.children&&!Cs.current){e=ma(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=ra(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),YS(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),YS(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,lf(e,n),r=xr(r),s=s(r),e.flags|=1,Jn(t,e,s,n),e.child;case 14:return s=e.type,r=kr(s,e.pendingProps),r=kr(s.type,r),uR(t,e,s,r,n);case 15:return LI(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:kr(s,r),Wv(t,e),e.tag=1,Ss(s)?(t=!0,Jx(e)):t=!1,lf(e,n),kI(e,s,r),XS(e,s,r,n),eb(null,e,s,!0,t,n);case 19:return $I(t,e,n);case 22:return FI(t,e,n)}throw Error(X(156,e.tag))};function nD(t,e){return Nk(t,e)}function tj(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,s){return new tj(t,e,n,s)}function _T(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nj(t){if(typeof t=="function")return _T(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zE)return 11;if(t===HE)return 14}return 2}function Gl(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jv(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")_T(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bd:return Wu(n.children,r,i,e);case jE:o=8,r|=8;break;case CS:return t=hr(12,n,e,r|2),t.elementType=CS,t.lanes=i,t;case SS:return t=hr(13,n,e,r),t.elementType=SS,t.lanes=i,t;case bS:return t=hr(19,n,e,r),t.elementType=bS,t.lanes=i,t;case fk:return bw(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uk:o=10;break e;case dk:o=9;break e;case zE:o=11;break e;case HE:o=14;break e;case La:o=16,s=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=hr(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Wu(t,e,n,s){return t=hr(7,t,s,e),t.lanes=n,t}function bw(t,e,n,s){return t=hr(22,t,s,e),t.elementType=fk,t.lanes=n,t.stateNode={isHidden:!1},t}function BC(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function jC(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sj(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=SC(0),this.expirationTimes=SC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SC(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ET(t,e,n,s,r,i,o,a,l){return t=new sj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lT(i),t}function rj(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$d,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function sD(t){if(!t)return Xl;t=t._reactInternals;e:{if(md(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Ss(n))return sI(t,n,e)}return e}function rD(t,e,n,s,r,i,o,a,l){return t=ET(n,s,!0,t,r,i,o,a,l),t.context=sD(null),n=t.current,s=ts(),r=Hl(n),i=ra(s,r),i.callback=e??null,jl(n,i,r),t.current.lanes=r,My(t,r,s),bs(t,s),t}function _w(t,e,n,s){var r=e.current,i=ts(),o=Hl(r);return n=sD(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=jl(r,e,o),t!==null&&(ei(t,r,o,i),Hv(t,r,o)),o}function c0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function SR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TT(t,e){SR(t,e),(t=t.alternate)&&SR(t,e)}function ij(){return null}var iD=typeof reportError=="function"?reportError:function(t){console.error(t)};function AT(t){this._internalRoot=t}Ew.prototype.render=AT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));_w(t,e,null,null)};Ew.prototype.unmount=AT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zu(function(){_w(null,t,null,null)}),e[ha]=null}};function Ew(t){this._internalRoot=t}Ew.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&Uk(t)}};function RT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bR(){}function oj(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=c0(o);i.call(c)}}var o=rD(e,s,t,0,null,!1,!1,"",bR);return t._reactRootContainer=o,t[ha]=o.current,km(t.nodeType===8?t.parentNode:t),Zu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=c0(l);a.call(c)}}var l=ET(t,0,!1,null,null,!1,!1,"",bR);return t._reactRootContainer=l,t[ha]=l.current,km(t.nodeType===8?t.parentNode:t),Zu(function(){_w(e,l,n,s)}),l}function Aw(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=c0(o);a.call(l)}}_w(e,o,t,r)}else o=oj(n,e,t,r,s);return c0(o)}Dk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Op(e.pendingLanes);n!==0&&(WE(e,n|1),bs(e,Vt()),!(Ye&6)&&(Bh=Vt()+500,lc()))}break;case 13:Zu(function(){var s=pa(t,1);if(s!==null){var r=ts();ei(s,t,1,r)}}),TT(t,1)}};KE=function(t){if(t.tag===13){var e=pa(t,134217728);if(e!==null){var n=ts();ei(e,t,134217728,n)}TT(t,134217728)}};Lk=function(t){if(t.tag===13){var e=Hl(t),n=pa(t,e);if(n!==null){var s=ts();ei(n,t,e,s)}TT(t,e)}};Fk=function(){return it};Ok=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};IS=function(t,e,n){switch(e){case"input":if(TS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=yw(s);if(!r)throw Error(X(90));pk(s),TS(s,r)}}}break;case"textarea":gk(t,n);break;case"select":e=n.value,e!=null&&sf(t,!!n.multiple,e,!1)}};bk=CT;_k=Zu;var aj={usingClientEntryPoint:!1,Events:[Iy,Gd,yw,Ck,Sk,CT]},_p={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lj={bundleType:_p.bundleType,version:_p.version,rendererPackageName:_p.rendererPackageName,rendererConfig:_p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ak(t),t===null?null:t.stateNode},findFiberByHostInstance:_p.findFiberByHostInstance||ij,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xv.isDisabled&&xv.supportsFiber)try{hw=xv.inject(lj),qi=xv}catch{}}Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aj;Qs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RT(e))throw Error(X(200));return rj(t,e,null,n)};Qs.createRoot=function(t,e){if(!RT(t))throw Error(X(299));var n=!1,s="",r=iD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ET(t,1,!1,null,null,n,!1,s,r),t[ha]=e.current,km(t.nodeType===8?t.parentNode:t),new AT(e)};Qs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=Ak(e),t=t===null?null:t.stateNode,t};Qs.flushSync=function(t){return Zu(t)};Qs.hydrate=function(t,e,n){if(!Tw(e))throw Error(X(200));return Aw(null,t,e,!0,n)};Qs.hydrateRoot=function(t,e,n){if(!RT(t))throw Error(X(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=iD;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rD(e,null,t,1,n??null,r,!1,i,o),t[ha]=e.current,km(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ew(e)};Qs.render=function(t,e,n){if(!Tw(e))throw Error(X(200));return Aw(null,t,e,!1,n)};Qs.unmountComponentAtNode=function(t){if(!Tw(t))throw Error(X(40));return t._reactRootContainer?(Zu(function(){Aw(null,null,t,!1,function(){t._reactRootContainer=null,t[ha]=null})}),!0):!1};Qs.unstable_batchedUpdates=CT;Qs.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Tw(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Aw(t,e,n,!1,s)};Qs.version="18.3.1-next-f1338f8080-20240426";function oD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oD)}catch(t){console.error(t)}}oD(),ok.exports=Qs;var gd=ok.exports;const aD=WM(gd);var _R=gd;xS.createRoot=_R.createRoot,xS.hydrateRoot=_R.hydrateRoot;const cj=1,uj=1e6;let zC=0;function dj(){return zC=(zC+1)%Number.MAX_SAFE_INTEGER,zC.toString()}const HC=new Map,ER=t=>{if(HC.has(t))return;const e=setTimeout(()=>{HC.delete(t),xm({type:"REMOVE_TOAST",toastId:t})},uj);HC.set(t,e)},fj=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,cj)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ER(n):t.toasts.forEach(s=>{ER(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Xv=[];let Qv={toasts:[]};function xm(t){Qv=fj(Qv,t),Xv.forEach(e=>{e(Qv)})}function hj({...t}){const e=dj(),n=r=>xm({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>xm({type:"DISMISS_TOAST",toastId:e});return xm({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:n}}function Cr(){const[t,e]=b.useState(Qv);return b.useEffect(()=>(Xv.push(e),()=>{const n=Xv.indexOf(e);n>-1&&Xv.splice(n,1)}),[t]),{...t,toast:hj,dismiss:n=>xm({type:"DISMISS_TOAST",toastId:n})}}function te(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function TR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rw(...t){return e=>{let n=!1;const s=t.map(r=>{const i=TR(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():TR(t[r],null)}}}}function Oe(...t){return b.useCallback(Rw(...t),t)}function pj(t,e){const n=b.createContext(e),s=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};s.displayName=t+"Provider";function r(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,r]}function os(t,e=[]){let n=[];function s(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=p=>{var w;const{scope:g,children:y,...x}=p,v=((w=g==null?void 0:g[t])==null?void 0:w[l])||a,C=b.useMemo(()=>x,Object.values(x));return m.jsx(v.Provider,{value:C,children:y})};c.displayName=i+"Provider";function u(p,g){var v;const y=((v=g==null?void 0:g[t])==null?void 0:v[l])||a,x=b.useContext(y);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[c,u]}const r=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[s,mj(r,...e)]}function mj(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:c})=>{const p=l(i)[`__scope${c}`];return{...a,...p}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ed(t){const e=gj(t),n=b.forwardRef((s,r)=>{const{children:i,...o}=s,a=b.Children.toArray(i),l=a.find(vj);if(l){const c=l.props.children,u=a.map(p=>p===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:p);return m.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var lD=ed("Slot");function gj(t){const e=b.forwardRef((n,s)=>{const{children:r,...i}=n;if(b.isValidElement(r)){const o=wj(r),a=xj(i,r.props);return r.type!==b.Fragment&&(a.ref=s?Rw(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cD=Symbol("radix.slottable");function yj(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=cD,e}function vj(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cD}function xj(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function wj(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ly(t){const e=t+"CollectionProvider",[n,s]=os(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:C,children:w}=v,S=K.useRef(null),_=K.useRef(new Map).current;return m.jsx(r,{scope:C,itemMap:_,collectionRef:S,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=ed(a),c=K.forwardRef((v,C)=>{const{scope:w,children:S}=v,_=i(a,w),T=Oe(C,_.collectionRef);return m.jsx(l,{ref:T,children:S})});c.displayName=a;const u=t+"CollectionItemSlot",p="data-radix-collection-item",g=ed(u),y=K.forwardRef((v,C)=>{const{scope:w,children:S,..._}=v,T=K.useRef(null),A=Oe(C,T),P=i(u,w);return K.useEffect(()=>(P.itemMap.set(T,{ref:T,..._}),()=>void P.itemMap.delete(T))),m.jsx(g,{[p]:"",ref:A,children:S})});y.displayName=u;function x(v){const C=i(t+"CollectionConsumer",v);return K.useCallback(()=>{const S=C.collectionRef.current;if(!S)return[];const _=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(C.itemMap.values()).sort((P,M)=>_.indexOf(P.ref.current)-_.indexOf(M.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:o,Slot:c,ItemSlot:y},x,s]}var Cj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=Cj.reduce((t,e)=>{const n=ed(`Primitive.${e}`),s=b.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function NT(t,e){t&&gd.flushSync(()=>t.dispatchEvent(e))}function _s(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function Sj(t,e=globalThis==null?void 0:globalThis.document){const n=_s(t);b.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var bj="DismissableLayer",fb="dismissableLayer.update",_j="dismissableLayer.pointerDownOutside",Ej="dismissableLayer.focusOutside",AR,uD=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ep=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(uD),[u,p]=b.useState(null),g=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=b.useState({}),x=Oe(e,M=>p(M)),v=Array.from(c.layers),[C]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(C),S=u?v.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,T=S>=w,A=Aj(M=>{const I=M.target,k=[...c.branches].some(D=>D.contains(I));!T||k||(r==null||r(M),o==null||o(M),M.defaultPrevented||a==null||a())},g),P=Rj(M=>{const I=M.target;[...c.branches].some(D=>D.contains(I))||(i==null||i(M),o==null||o(M),M.defaultPrevented||a==null||a())},g);return Sj(M=>{S===c.layers.size-1&&(s==null||s(M),!M.defaultPrevented&&a&&(M.preventDefault(),a()))},g),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(AR=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),RR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=AR)}},[u,g,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),RR())},[u,c]),b.useEffect(()=>{const M=()=>y({});return document.addEventListener(fb,M),()=>document.removeEventListener(fb,M)},[]),m.jsx(xe.div,{...l,ref:x,style:{pointerEvents:_?T?"auto":"none":void 0,...t.style},onFocusCapture:te(t.onFocusCapture,P.onFocusCapture),onBlurCapture:te(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:te(t.onPointerDownCapture,A.onPointerDownCapture)})});ep.displayName=bj;var Tj="DismissableLayerBranch",dD=b.forwardRef((t,e)=>{const n=b.useContext(uD),s=b.useRef(null),r=Oe(e,s);return b.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(xe.div,{...t,ref:r})});dD.displayName=Tj;function Aj(t,e=globalThis==null?void 0:globalThis.document){const n=_s(t),s=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){fD(_j,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function Rj(t,e=globalThis==null?void 0:globalThis.document){const n=_s(t),s=b.useRef(!1);return b.useEffect(()=>{const r=i=>{i.target&&!s.current&&fD(Ej,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function RR(){const t=new CustomEvent(fb);document.dispatchEvent(t)}function fD(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?NT(r,i):r.dispatchEvent(i)}var Nj=ep,Pj=dD,Nn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},Mj="Portal",Fy=b.forwardRef((t,e)=>{var a;const{container:n,...s}=t,[r,i]=b.useState(!1);Nn(()=>i(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aD.createPortal(m.jsx(xe.div,{...s,ref:e}),o):null});Fy.displayName=Mj;function kj(t,e){return b.useReducer((n,s)=>e[n][s]??n,t)}var er=t=>{const{present:e,children:n}=t,s=Ij(e),r=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),i=Oe(s.ref,Dj(r));return typeof n=="function"||s.isPresent?b.cloneElement(r,{ref:i}):null};er.displayName="Presence";function Ij(t){const[e,n]=b.useState(),s=b.useRef(null),r=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=kj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=wv(s.current);i.current=a==="mounted"?c:"none"},[a]),Nn(()=>{const c=s.current,u=r.current;if(u!==t){const g=i.current,y=wv(c);t?l("MOUNT"):y==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&g!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Nn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,p=y=>{const v=wv(s.current).includes(y.animationName);if(y.target===e&&v&&(l("ANIMATION_END"),!r.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},g=y=>{y.target===e&&(i.current=wv(s.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function wv(t){return(t==null?void 0:t.animationName)||"none"}function Dj(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Lj=rk[" useInsertionEffect ".trim().toString()]||Nn;function Xi({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,i,o]=Fj({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const p=u.current;p!==a&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,s])}const c=b.useCallback(u=>{var p;if(a){const g=Oj(u)?u(t):u;g!==t&&((p=o.current)==null||p.call(o,g))}else i(u)},[a,t,i,o]);return[l,c]}function Fj({defaultProp:t,onChange:e}){const[n,s]=b.useState(t),r=b.useRef(n),i=b.useRef(e);return Lj(()=>{i.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=i.current)==null||o.call(i,n),r.current=n)},[n,r]),[n,s,i]}function Oj(t){return typeof t=="function"}var hD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Uj="VisuallyHidden",Nw=b.forwardRef((t,e)=>m.jsx(xe.span,{...t,ref:e,style:{...hD,...t.style}}));Nw.displayName=Uj;var Vj=Nw,PT="ToastProvider",[MT,$j,Bj]=Ly("Toast"),[pD,xoe]=os("Toast",[Bj]),[jj,Pw]=pD(PT),mD=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),p=b.useRef(!1),g=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${PT}\`. Expected non-empty \`string\`.`),m.jsx(MT.Provider,{scope:e,children:m.jsx(jj,{scope:e,label:n,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(y=>y+1),[]),onToastRemove:b.useCallback(()=>u(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:o})})};mD.displayName=PT;var gD="ToastViewport",zj=["F8"],hb="toast.viewportPause",pb="toast.viewportResume",yD=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:s=zj,label:r="Notifications ({hotkey})",...i}=t,o=Pw(gD,n),a=$j(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),p=b.useRef(null),g=Oe(e,p,o.onViewportChange),y=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;b.useEffect(()=>{const C=w=>{var _;s.length!==0&&s.every(T=>w[T]||w.code===T)&&((_=p.current)==null||_.focus())};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[s]),b.useEffect(()=>{const C=l.current,w=p.current;if(x&&C&&w){const S=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(hb);w.dispatchEvent(P),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(pb);w.dispatchEvent(P),o.isClosePausedRef.current=!1}},T=P=>{!C.contains(P.relatedTarget)&&_()},A=()=>{C.contains(document.activeElement)||_()};return C.addEventListener("focusin",S),C.addEventListener("focusout",T),C.addEventListener("pointermove",S),C.addEventListener("pointerleave",A),window.addEventListener("blur",S),window.addEventListener("focus",_),()=>{C.removeEventListener("focusin",S),C.removeEventListener("focusout",T),C.removeEventListener("pointermove",S),C.removeEventListener("pointerleave",A),window.removeEventListener("blur",S),window.removeEventListener("focus",_)}}},[x,o.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:C})=>{const S=a().map(_=>{const T=_.ref.current,A=[T,...n5(T)];return C==="forwards"?A:A.reverse()});return(C==="forwards"?S.reverse():S).flat()},[a]);return b.useEffect(()=>{const C=p.current;if(C){const w=S=>{var A,P,M;const _=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!_){const I=document.activeElement,k=S.shiftKey;if(S.target===C&&k){(A=c.current)==null||A.focus();return}const U=v({tabbingDirection:k?"backwards":"forwards"}),G=U.findIndex(O=>O===I);GC(U.slice(G+1))?S.preventDefault():k?(P=c.current)==null||P.focus():(M=u.current)==null||M.focus()}};return C.addEventListener("keydown",w),()=>C.removeEventListener("keydown",w)}},[a,v]),m.jsxs(Pj,{ref:l,role:"region","aria-label":r.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&m.jsx(mb,{ref:c,onFocusFromOutsideViewport:()=>{const C=v({tabbingDirection:"forwards"});GC(C)}}),m.jsx(MT.Slot,{scope:n,children:m.jsx(xe.ol,{tabIndex:-1,...i,ref:g})}),x&&m.jsx(mb,{ref:u,onFocusFromOutsideViewport:()=>{const C=v({tabbingDirection:"backwards"});GC(C)}})]})});yD.displayName=gD;var vD="ToastFocusProxy",mb=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=t,i=Pw(vD,n);return m.jsx(Nw,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&s()}})});mb.displayName=vD;var Oy="Toast",Hj="toast.swipeStart",Gj="toast.swipeMove",qj="toast.swipeCancel",Wj="toast.swipeEnd",xD=b.forwardRef((t,e)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:i,...o}=t,[a,l]=Xi({prop:s,defaultProp:r??!0,onChange:i,caller:Oy});return m.jsx(er,{present:n||a,children:m.jsx(Jj,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:_s(t.onPause),onResume:_s(t.onResume),onSwipeStart:te(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:te(t.onSwipeMove,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:te(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:te(t.onSwipeEnd,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});xD.displayName=Oy;var[Kj,Yj]=pD(Oy,{onClose(){}}),Jj=b.forwardRef((t,e)=>{const{__scopeToast:n,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:y,...x}=t,v=Pw(Oy,n),[C,w]=b.useState(null),S=Oe(e,O=>w(O)),_=b.useRef(null),T=b.useRef(null),A=r||v.duration,P=b.useRef(0),M=b.useRef(A),I=b.useRef(0),{onToastAdd:k,onToastRemove:D}=v,L=_s(()=>{var W;(C==null?void 0:C.contains(document.activeElement))&&((W=v.viewport)==null||W.focus()),o()}),U=b.useCallback(O=>{!O||O===1/0||(window.clearTimeout(I.current),P.current=new Date().getTime(),I.current=window.setTimeout(L,O))},[L]);b.useEffect(()=>{const O=v.viewport;if(O){const W=()=>{U(M.current),c==null||c()},$=()=>{const z=new Date().getTime()-P.current;M.current=M.current-z,window.clearTimeout(I.current),l==null||l()};return O.addEventListener(hb,$),O.addEventListener(pb,W),()=>{O.removeEventListener(hb,$),O.removeEventListener(pb,W)}}},[v.viewport,A,l,c,U]),b.useEffect(()=>{i&&!v.isClosePausedRef.current&&U(A)},[i,A,v.isClosePausedRef,U]),b.useEffect(()=>(k(),()=>D()),[k,D]);const G=b.useMemo(()=>C?TD(C):null,[C]);return v.viewport?m.jsxs(m.Fragment,{children:[G&&m.jsx(Xj,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),m.jsx(Kj,{scope:n,onClose:L,children:gd.createPortal(m.jsx(MT.ItemSlot,{scope:n,children:m.jsx(Nj,{asChild:!0,onEscapeKeyDown:te(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||L(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:te(t.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:te(t.onPointerDown,O=>{O.button===0&&(_.current={x:O.clientX,y:O.clientY})}),onPointerMove:te(t.onPointerMove,O=>{if(!_.current)return;const W=O.clientX-_.current.x,$=O.clientY-_.current.y,z=!!T.current,B=["left","right"].includes(v.swipeDirection),V=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=B?V(0,W):0,Q=B?0:V(0,$),J=O.pointerType==="touch"?10:2,se={x:H,y:Q},ye={originalEvent:O,delta:se};z?(T.current=se,Cv(Gj,p,ye,{discrete:!1})):NR(se,v.swipeDirection,J)?(T.current=se,Cv(Hj,u,ye,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>J||Math.abs($)>J)&&(_.current=null)}),onPointerUp:te(t.onPointerUp,O=>{const W=T.current,$=O.target;if($.hasPointerCapture(O.pointerId)&&$.releasePointerCapture(O.pointerId),T.current=null,_.current=null,W){const z=O.currentTarget,B={originalEvent:O,delta:W};NR(W,v.swipeDirection,v.swipeThreshold)?Cv(Wj,y,B,{discrete:!0}):Cv(qj,g,B,{discrete:!0}),z.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Xj=t=>{const{__scopeToast:e,children:n,...s}=t,r=Pw(Oy,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return e5(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(Fy,{asChild:!0,children:m.jsx(Nw,{...s,children:i&&m.jsxs(m.Fragment,{children:[r.label," ",n]})})})},Qj="ToastTitle",wD=b.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return m.jsx(xe.div,{...s,ref:e})});wD.displayName=Qj;var Zj="ToastDescription",CD=b.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return m.jsx(xe.div,{...s,ref:e})});CD.displayName=Zj;var SD="ToastAction",bD=b.forwardRef((t,e)=>{const{altText:n,...s}=t;return n.trim()?m.jsx(ED,{altText:n,asChild:!0,children:m.jsx(kT,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${SD}\`. Expected non-empty \`string\`.`),null)});bD.displayName=SD;var _D="ToastClose",kT=b.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t,r=Yj(_D,n);return m.jsx(ED,{asChild:!0,children:m.jsx(xe.button,{type:"button",...s,ref:e,onClick:te(t.onClick,r.onClose)})})});kT.displayName=_D;var ED=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:s,...r}=t;return m.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function TD(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),t5(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...TD(s))}}),e}function Cv(t,e,n,{discrete:s}){const r=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?NT(r,i):r.dispatchEvent(i)}var NR=(t,e,n=0)=>{const s=Math.abs(t.x),r=Math.abs(t.y),i=s>r;return e==="left"||e==="right"?i&&s>n:!i&&r>n};function e5(t=()=>{}){const e=_s(t);Nn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function t5(t){return t.nodeType===t.ELEMENT_NODE}function n5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function GC(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var s5=mD,AD=yD,RD=xD,ND=wD,PD=CD,MD=bD,kD=kT;function ID(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=ID(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function DD(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=ID(t))&&(s&&(s+=" "),s+=e);return s}const PR=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,MR=DD,IT=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return MR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const u=n==null?void 0:n[c],p=i==null?void 0:i[c];if(u===null)return null;const g=PR(u)||PR(p);return r[c][g]}),a=n&&Object.entries(n).reduce((c,u)=>{let[p,g]=u;return g===void 0||(c[p]=g),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:p,className:g,...y}=u;return Object.entries(y).every(x=>{let[v,C]=x;return Array.isArray(C)?C.includes({...i,...a}[v]):{...i,...a}[v]===C})?[...c,p,g]:c},[]);return MR(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LD=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...i5,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:LD("lucide",r),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(t,e)=>{const n=b.forwardRef(({className:s,...r},i)=>b.createElement(o5,{ref:i,iconNode:e,className:LD(`lucide-${r5(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=st("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=st("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=st("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=st("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=st("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=st("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=st("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=st("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=st("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=st("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=st("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=st("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=st("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=st("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=st("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=st("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=st("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=st("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=st("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=st("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=st("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),LT="-",b5=t=>{const e=E5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:o=>{const a=o.split(LT);return a[0]===""&&a.length!==1&&a.shift(),BD(a,e)||_5(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},BD=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?BD(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=t.join(LT);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},DR=/^\[(.+)\]$/,_5=t=>{if(DR.test(t)){const e=DR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},E5=t=>{const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return A5(Object.entries(t.classGroups),n).forEach(([i,o])=>{yb(o,s,i,e)}),s},yb=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const i=r===""?e:LR(e,r);i.classGroupId=n;return}if(typeof r=="function"){if(T5(r)){yb(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{yb(o,LR(e,i),n,s)})})},LR=(t,e)=>{let n=t;return e.split(LT).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},T5=t=>t.isThemeGetter,A5=(t,e)=>e?t.map(([n,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,r]}):t,R5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},jD="!",N5=t=>{const{separator:e,experimentalParseClassName:n}=t,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,p;for(let C=0;C<a.length;C++){let w=a[C];if(c===0){if(w===r&&(s||a.slice(C,C+i)===e)){l.push(a.slice(u,C)),u=C+i;continue}if(w==="/"){p=C;continue}}w==="["?c++:w==="]"&&c--}const g=l.length===0?a:a.substring(u),y=g.startsWith(jD),x=y?g.substring(1):g,v=p&&p>u?p-u:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},P5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e},M5=t=>({cache:R5(t.cacheSize),parseClassName:N5(t),...b5(t)}),k5=/\s+/,I5=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=t.trim().split(k5);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}=n(c);let x=!!y,v=s(x?g.substring(0,y):g);if(!v){if(!x){a=c+(a.length>0?" "+a:a);continue}if(v=s(g),!v){a=c+(a.length>0?" "+a:a);continue}x=!1}const C=P5(u).join(":"),w=p?C+jD:C,S=w+v;if(i.includes(S))continue;i.push(S);const _=r(v,x);for(let T=0;T<_.length;++T){const A=_[T];i.push(w+A)}a=c+(a.length>0?" "+a:a)}return a};function D5(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=zD(e))&&(s&&(s+=" "),s+=n);return s}const zD=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=zD(t[s]))&&(n&&(n+=" "),n+=e);return n};function L5(t,...e){let n,s,r,i=o;function o(l){const c=e.reduce((u,p)=>p(u),t());return n=M5(c),s=n.cache.get,r=n.cache.set,i=a,a(l)}function a(l){const c=s(l);if(c)return c;const u=I5(l,n);return r(l,u),u}return function(){return i(D5.apply(null,arguments))}}const gt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},HD=/^\[(?:([a-z-]+):)?(.+)\]$/i,F5=/^\d+\/\d+$/,O5=new Set(["px","full","screen"]),U5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,V5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,B5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ao=t=>uf(t)||O5.has(t)||F5.test(t),Pa=t=>tp(t,"length",J5),uf=t=>!!t&&!Number.isNaN(Number(t)),WC=t=>tp(t,"number",uf),Ep=t=>!!t&&Number.isInteger(Number(t)),z5=t=>t.endsWith("%")&&uf(t.slice(0,-1)),Ue=t=>HD.test(t),Ma=t=>U5.test(t),H5=new Set(["length","size","percentage"]),G5=t=>tp(t,H5,GD),q5=t=>tp(t,"position",GD),W5=new Set(["image","url"]),K5=t=>tp(t,W5,Q5),Y5=t=>tp(t,"",X5),Tp=()=>!0,tp=(t,e,n)=>{const s=HD.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1},J5=t=>V5.test(t)&&!$5.test(t),GD=()=>!1,X5=t=>B5.test(t),Q5=t=>j5.test(t),Z5=()=>{const t=gt("colors"),e=gt("spacing"),n=gt("blur"),s=gt("brightness"),r=gt("borderColor"),i=gt("borderRadius"),o=gt("borderSpacing"),a=gt("borderWidth"),l=gt("contrast"),c=gt("grayscale"),u=gt("hueRotate"),p=gt("invert"),g=gt("gap"),y=gt("gradientColorStops"),x=gt("gradientColorStopPositions"),v=gt("inset"),C=gt("margin"),w=gt("opacity"),S=gt("padding"),_=gt("saturate"),T=gt("scale"),A=gt("sepia"),P=gt("skew"),M=gt("space"),I=gt("translate"),k=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Ue,e],U=()=>[Ue,e],G=()=>["",ao,Pa],O=()=>["auto",uf,Ue],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Ue],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[uf,Ue];return{cacheSize:500,separator:":",theme:{colors:[Tp],spacing:[ao,Pa],blur:["none","",Ma,Ue],brightness:Q(),borderColor:[t],borderRadius:["none","","full",Ma,Ue],borderSpacing:U(),borderWidth:G(),contrast:Q(),grayscale:V(),hueRotate:Q(),invert:V(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[z5,Pa],inset:L(),margin:L(),opacity:Q(),padding:U(),saturate:Q(),scale:Q(),sepia:V(),skew:Q(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[Ma]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ue]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ep,Ue]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Ep,Ue]}],"grid-cols":[{"grid-cols":[Tp]}],"col-start-end":[{col:["auto",{span:["full",Ep,Ue]},Ue]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Tp]}],"row-start-end":[{row:["auto",{span:[Ep,Ue]},Ue]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,e]}],"min-w":[{"min-w":[Ue,e,"min","max","fit"]}],"max-w":[{"max-w":[Ue,e,"none","full","min","max","fit","prose",{screen:[Ma]},Ma]}],h:[{h:[Ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ma,Pa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",WC]}],"font-family":[{font:[Tp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",uf,WC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ao,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ao,Pa]}],"underline-offset":[{"underline-offset":["auto",ao,Ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),q5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",G5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},K5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[ao,Ue]}],"outline-w":[{outline:[ao,Pa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ao,Pa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ma,Y5]}],"shadow-color":[{shadow:[Tp]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ma,Ue]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[p]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Ep,Ue]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ao,Pa,WC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ez=L5(Z5);function Ee(...t){return ez(DD(t))}const tz=s5,qD=b.forwardRef(({className:t,...e},n)=>m.jsx(AD,{ref:n,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));qD.displayName=AD.displayName;const nz=IT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WD=b.forwardRef(({className:t,variant:e,...n},s)=>m.jsx(RD,{ref:s,className:Ee(nz({variant:e}),t),...n}));WD.displayName=RD.displayName;const sz=b.forwardRef(({className:t,...e},n)=>m.jsx(MD,{ref:n,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));sz.displayName=MD.displayName;const KD=b.forwardRef(({className:t,...e},n)=>m.jsx(kD,{ref:n,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(Uy,{className:"h-4 w-4"})}));KD.displayName=kD.displayName;const YD=b.forwardRef(({className:t,...e},n)=>m.jsx(ND,{ref:n,className:Ee("text-sm font-semibold",t),...e}));YD.displayName=ND.displayName;const JD=b.forwardRef(({className:t,...e},n)=>m.jsx(PD,{ref:n,className:Ee("text-sm opacity-90",t),...e}));JD.displayName=PD.displayName;function rz(){const{toasts:t}=Cr();return m.jsxs(tz,{children:[t.map(function({id:e,title:n,description:s,action:r,...i}){return m.jsxs(WD,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(YD,{children:n}),s&&m.jsx(JD,{children:s})]}),r,m.jsx(KD,{})]},e)}),m.jsx(qD,{})]})}var iz=(t,e,n,s,r,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(y){(Array.isArray(t)?t:[t]).forEach(x=>{let v=x==="class",C=v&&i?r.map(w=>i[w]||w):r;v?(l.classList.remove(...C),l.classList.add(i&&i[y]?i[y]:y)):l.setAttribute(x,y)}),p(y)}function p(y){a&&c.includes(y)&&(l.style.colorScheme=y)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)u(s);else try{let y=localStorage.getItem(e)||n,x=o&&y==="system"?g():y;u(x)}catch{}},oz=b.createContext(void 0),az={setTheme:t=>{},themes:[]},lz=()=>{var t;return(t=b.useContext(oz))!=null?t:az};b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,e,i,t,a,o,s,r]).slice(1,-1);return b.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${iz.toString()})(${u})`}})});var cz=t=>{switch(t){case"success":return fz;case"info":return pz;case"warning":return hz;case"error":return mz;default:return null}},uz=Array(12).fill(0),dz=({visible:t,className:e})=>K.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},K.createElement("div",{className:"sonner-spinner"},uz.map((n,s)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),fz=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hz=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),pz=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),mz=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gz=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),yz=()=>{let[t,e]=K.useState(document.hidden);return K.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},vb=1,vz=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...s}=t,r=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:vb++,i=this.toasts.find(a=>a.id===r),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(a=>a.id===r?(this.publish({...a,...t,id:r,title:n}),{...a,...t,id:r,dismissible:o,title:n}):a):this.addToast({title:n,...s,dismissible:o,id:r}),r},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=t instanceof Promise?t:t(),r=n!==void 0,i,o=s.then(async l=>{if(i=["resolve",l],K.isValidElement(l))r=!1,this.create({id:n,type:"default",message:l});else if(wz(l)&&!l.ok){r=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){r=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){r=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;r&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||vb++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ys=new vz,xz=(t,e)=>{let n=(e==null?void 0:e.id)||vb++;return ys.addToast({title:t,...e,id:n}),n},wz=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cz=xz,Sz=()=>ys.toasts,bz=()=>ys.getActiveToasts();Object.assign(Cz,{success:ys.success,info:ys.info,warning:ys.warning,error:ys.error,custom:ys.custom,message:ys.message,promise:ys.promise,dismiss:ys.dismiss,loading:ys.loading},{getHistory:Sz,getToasts:bz});function _z(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}_z(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sv(t){return t.label!==void 0}var Ez=3,Tz="32px",Az="16px",FR=4e3,Rz=356,Nz=14,Pz=20,Mz=200;function Rr(...t){return t.filter(Boolean).join(" ")}function kz(t){let[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var Iz=t=>{var e,n,s,r,i,o,a,l,c,u,p;let{invert:g,toast:y,unstyled:x,interacting:v,setHeights:C,visibleToasts:w,heights:S,index:_,toasts:T,expanded:A,removeToast:P,defaultRichColors:M,closeButton:I,style:k,cancelButtonStyle:D,actionButtonStyle:L,className:U="",descriptionClassName:G="",duration:O,position:W,gap:$,loadingIcon:z,expandByDefault:B,classNames:V,icons:H,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:J}=t,[se,ye]=K.useState(null),[Me,De]=K.useState(null),[Y,_e]=K.useState(!1),[re,we]=K.useState(!1),[Te,Re]=K.useState(!1),[At,gn]=K.useState(!1),[ui,di]=K.useState(!1),[so,bd]=K.useState(0),[ro,F]=K.useState(0),j=K.useRef(y.duration||O||FR),q=K.useRef(null),oe=K.useRef(null),ie=_===0,ne=_+1<=w,de=y.type,ze=y.dismissible!==!1,at=y.className||"",ls=y.descriptionClassName||"",io=K.useMemo(()=>S.findIndex(Le=>Le.toastId===y.id)||0,[S,y.id]),fi=K.useMemo(()=>{var Le;return(Le=y.closeButton)!=null?Le:I},[y.closeButton,I]),ev=K.useMemo(()=>y.duration||O||FR,[y.duration,O]),dc=K.useRef(0),hi=K.useRef(0),tv=K.useRef(0),oo=K.useRef(null),[pC,nv]=W.split("-"),h1=K.useMemo(()=>S.reduce((Le,lt,wt)=>wt>=io?Le:Le+lt.height,0),[S,io]),p1=yz(),I$=y.invert||g,mC=de==="loading";hi.current=K.useMemo(()=>io*$+h1,[io,h1]),K.useEffect(()=>{j.current=ev},[ev]),K.useEffect(()=>{_e(!0)},[]),K.useEffect(()=>{let Le=oe.current;if(Le){let lt=Le.getBoundingClientRect().height;return F(lt),C(wt=>[{toastId:y.id,height:lt,position:y.position},...wt]),()=>C(wt=>wt.filter(_r=>_r.toastId!==y.id))}},[C,y.id]),K.useLayoutEffect(()=>{if(!Y)return;let Le=oe.current,lt=Le.style.height;Le.style.height="auto";let wt=Le.getBoundingClientRect().height;Le.style.height=lt,F(wt),C(_r=>_r.find(Er=>Er.toastId===y.id)?_r.map(Er=>Er.toastId===y.id?{...Er,height:wt}:Er):[{toastId:y.id,height:wt,position:y.position},..._r])},[Y,y.title,y.description,C,y.id]);let Ta=K.useCallback(()=>{we(!0),bd(hi.current),C(Le=>Le.filter(lt=>lt.toastId!==y.id)),setTimeout(()=>{P(y)},Mz)},[y,P,C,hi]);K.useEffect(()=>{if(y.promise&&de==="loading"||y.duration===1/0||y.type==="loading")return;let Le;return A||v||J&&p1?(()=>{if(tv.current<dc.current){let lt=new Date().getTime()-dc.current;j.current=j.current-lt}tv.current=new Date().getTime()})():j.current!==1/0&&(dc.current=new Date().getTime(),Le=setTimeout(()=>{var lt;(lt=y.onAutoClose)==null||lt.call(y,y),Ta()},j.current)),()=>clearTimeout(Le)},[A,v,y,de,J,p1,Ta]),K.useEffect(()=>{y.delete&&Ta()},[Ta,y.delete]);function D$(){var Le,lt,wt;return H!=null&&H.loading?K.createElement("div",{className:Rr(V==null?void 0:V.loader,(Le=y==null?void 0:y.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":de==="loading"},H.loading):z?K.createElement("div",{className:Rr(V==null?void 0:V.loader,(lt=y==null?void 0:y.classNames)==null?void 0:lt.loader,"sonner-loader"),"data-visible":de==="loading"},z):K.createElement(dz,{className:Rr(V==null?void 0:V.loader,(wt=y==null?void 0:y.classNames)==null?void 0:wt.loader),visible:de==="loading"})}return K.createElement("li",{tabIndex:0,ref:oe,className:Rr(U,at,V==null?void 0:V.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[de],(n=y==null?void 0:y.classNames)==null?void 0:n[de]),"data-sonner-toast":"","data-rich-colors":(s=y.richColors)!=null?s:M,"data-styled":!(y.jsx||y.unstyled||x),"data-mounted":Y,"data-promise":!!y.promise,"data-swiped":ui,"data-removed":re,"data-visible":ne,"data-y-position":pC,"data-x-position":nv,"data-index":_,"data-front":ie,"data-swiping":Te,"data-dismissible":ze,"data-type":de,"data-invert":I$,"data-swipe-out":At,"data-swipe-direction":Me,"data-expanded":!!(A||B&&Y),style:{"--index":_,"--toasts-before":_,"--z-index":T.length-_,"--offset":`${re?so:hi.current}px`,"--initial-height":B?"auto":`${ro}px`,...k,...y.style},onDragEnd:()=>{Re(!1),ye(null),oo.current=null},onPointerDown:Le=>{mC||!ze||(q.current=new Date,bd(hi.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(Re(!0),oo.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,lt,wt,_r;if(At||!ze)return;oo.current=null;let Er=Number(((Le=oe.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Aa=Number(((lt=oe.current)==null?void 0:lt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fc=new Date().getTime()-((wt=q.current)==null?void 0:wt.getTime()),Tr=se==="x"?Er:Aa,Ra=Math.abs(Tr)/fc;if(Math.abs(Tr)>=Pz||Ra>.11){bd(hi.current),(_r=y.onDismiss)==null||_r.call(y,y),De(se==="x"?Er>0?"right":"left":Aa>0?"down":"up"),Ta(),gn(!0),di(!1);return}Re(!1),ye(null)},onPointerMove:Le=>{var lt,wt,_r,Er;if(!oo.current||!ze||((lt=window.getSelection())==null?void 0:lt.toString().length)>0)return;let Aa=Le.clientY-oo.current.y,fc=Le.clientX-oo.current.x,Tr=(wt=t.swipeDirections)!=null?wt:kz(W);!se&&(Math.abs(fc)>1||Math.abs(Aa)>1)&&ye(Math.abs(fc)>Math.abs(Aa)?"x":"y");let Ra={x:0,y:0};se==="y"?(Tr.includes("top")||Tr.includes("bottom"))&&(Tr.includes("top")&&Aa<0||Tr.includes("bottom")&&Aa>0)&&(Ra.y=Aa):se==="x"&&(Tr.includes("left")||Tr.includes("right"))&&(Tr.includes("left")&&fc<0||Tr.includes("right")&&fc>0)&&(Ra.x=fc),(Math.abs(Ra.x)>0||Math.abs(Ra.y)>0)&&di(!0),(_r=oe.current)==null||_r.style.setProperty("--swipe-amount-x",`${Ra.x}px`),(Er=oe.current)==null||Er.style.setProperty("--swipe-amount-y",`${Ra.y}px`)}},fi&&!y.jsx?K.createElement("button",{"aria-label":Q,"data-disabled":mC,"data-close-button":!0,onClick:mC||!ze?()=>{}:()=>{var Le;Ta(),(Le=y.onDismiss)==null||Le.call(y,y)},className:Rr(V==null?void 0:V.closeButton,(r=y==null?void 0:y.classNames)==null?void 0:r.closeButton)},(i=H==null?void 0:H.close)!=null?i:gz):null,y.jsx||b.isValidElement(y.title)?y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title:K.createElement(K.Fragment,null,de||y.icon||y.promise?K.createElement("div",{"data-icon":"",className:Rr(V==null?void 0:V.icon,(o=y==null?void 0:y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||D$():null,y.type!=="loading"?y.icon||(H==null?void 0:H[de])||cz(de):null):null,K.createElement("div",{"data-content":"",className:Rr(V==null?void 0:V.content,(a=y==null?void 0:y.classNames)==null?void 0:a.content)},K.createElement("div",{"data-title":"",className:Rr(V==null?void 0:V.title,(l=y==null?void 0:y.classNames)==null?void 0:l.title)},typeof y.title=="function"?y.title():y.title),y.description?K.createElement("div",{"data-description":"",className:Rr(G,ls,V==null?void 0:V.description,(c=y==null?void 0:y.classNames)==null?void 0:c.description)},typeof y.description=="function"?y.description():y.description):null),b.isValidElement(y.cancel)?y.cancel:y.cancel&&Sv(y.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:Le=>{var lt,wt;Sv(y.cancel)&&ze&&((wt=(lt=y.cancel).onClick)==null||wt.call(lt,Le),Ta())},className:Rr(V==null?void 0:V.cancelButton,(u=y==null?void 0:y.classNames)==null?void 0:u.cancelButton)},y.cancel.label):null,b.isValidElement(y.action)?y.action:y.action&&Sv(y.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||L,onClick:Le=>{var lt,wt;Sv(y.action)&&((wt=(lt=y.action).onClick)==null||wt.call(lt,Le),!Le.defaultPrevented&&Ta())},className:Rr(V==null?void 0:V.actionButton,(p=y==null?void 0:y.classNames)==null?void 0:p.actionButton)},y.action.label):null))};function OR(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Dz(t,e){let n={};return[t,e].forEach((s,r)=>{let i=r===1,o=i?"--mobile-offset":"--offset",a=i?Az:Tz;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),n}var Lz=b.forwardRef(function(t,e){let{invert:n,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:p,duration:g,style:y,visibleToasts:x=Ez,toastOptions:v,dir:C=OR(),gap:w=Nz,loadingIcon:S,icons:_,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:A}=t,[P,M]=K.useState([]),I=K.useMemo(()=>Array.from(new Set([s].concat(P.filter(J=>J.position).map(J=>J.position)))),[P,s]),[k,D]=K.useState([]),[L,U]=K.useState(!1),[G,O]=K.useState(!1),[W,$]=K.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=K.useRef(null),B=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=K.useRef(null),H=K.useRef(!1),Q=K.useCallback(J=>{M(se=>{var ye;return(ye=se.find(Me=>Me.id===J.id))!=null&&ye.delete||ys.dismiss(J.id),se.filter(({id:Me})=>Me!==J.id)})},[]);return K.useEffect(()=>ys.subscribe(J=>{if(J.dismiss){M(se=>se.map(ye=>ye.id===J.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{aD.flushSync(()=>{M(se=>{let ye=se.findIndex(Me=>Me.id===J.id);return ye!==-1?[...se.slice(0,ye),{...se[ye],...J},...se.slice(ye+1)]:[J,...se]})})})}),[]),K.useEffect(()=>{if(u!=="system"){$(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{$(se?"dark":"light")})}catch{J.addListener(({matches:ye})=>{try{$(ye?"dark":"light")}catch(Me){console.error(Me)}})}},[u]),K.useEffect(()=>{P.length<=1&&U(!1)},[P]),K.useEffect(()=>{let J=se=>{var ye,Me;r.every(De=>se[De]||se.code===De)&&(U(!0),(ye=z.current)==null||ye.focus()),se.code==="Escape"&&(document.activeElement===z.current||(Me=z.current)!=null&&Me.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[r]),K.useEffect(()=>{if(z.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,H.current=!1)}},[z.current]),K.createElement("section",{ref:e,"aria-label":`${T} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((J,se)=>{var ye;let[Me,De]=J.split("-");return P.length?K.createElement("ol",{key:J,dir:C==="auto"?OR():C,tabIndex:-1,ref:z,className:a,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Me,"data-lifted":L&&P.length>1&&!i,"data-x-position":De,style:{"--front-toast-height":`${((ye=k[0])==null?void 0:ye.height)||0}px`,"--width":`${Rz}px`,"--gap":`${w}px`,...y,...Dz(l,c)},onBlur:Y=>{H.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(H.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||H.current||(H.current=!0,V.current=Y.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{G||U(!1)},onDragEnd:()=>U(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},P.filter(Y=>!Y.position&&se===0||Y.position===J).map((Y,_e)=>{var re,we;return K.createElement(Iz,{key:Y.id,icons:_,index:_e,toast:Y,defaultRichColors:p,duration:(re=v==null?void 0:v.duration)!=null?re:g,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:x,closeButton:(we=v==null?void 0:v.closeButton)!=null?we:o,interacting:G,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Q,toasts:P.filter(Te=>Te.position==Y.position),heights:k.filter(Te=>Te.position==Y.position),setHeights:D,expandByDefault:i,gap:w,loadingIcon:S,expanded:L,pauseWhenPageIsHidden:A,swipeDirections:t.swipeDirections})})):null}))});const Fz=({...t})=>{const{theme:e="system"}=lz();return m.jsx(Lz,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Oz=rk[" useId ".trim().toString()]||(()=>{}),Uz=0;function Ki(t){const[e,n]=b.useState(Oz());return Nn(()=>{n(s=>s??String(Uz++))},[t]),e?`radix-${e}`:""}const Vz=["top","right","bottom","left"],Ql=Math.min,Gs=Math.max,f0=Math.round,bv=Math.floor,Yi=t=>({x:t,y:t}),$z={left:"right",right:"left",bottom:"top",top:"bottom"},Bz={start:"end",end:"start"};function xb(t,e,n){return Gs(t,Ql(e,n))}function ga(t,e){return typeof t=="function"?t(e):t}function ya(t){return t.split("-")[0]}function np(t){return t.split("-")[1]}function FT(t){return t==="x"?"y":"x"}function OT(t){return t==="y"?"height":"width"}function ji(t){return["top","bottom"].includes(ya(t))?"y":"x"}function UT(t){return FT(ji(t))}function jz(t,e,n){n===void 0&&(n=!1);const s=np(t),r=UT(t),i=OT(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=h0(o)),[o,h0(o)]}function zz(t){const e=h0(t);return[wb(t),e,wb(e)]}function wb(t){return t.replace(/start|end/g,e=>Bz[e])}function Hz(t,e,n){const s=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:s:e?s:r;case"left":case"right":return e?i:o;default:return[]}}function Gz(t,e,n,s){const r=np(t);let i=Hz(ya(t),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(wb)))),i}function h0(t){return t.replace(/left|right|bottom|top/g,e=>$z[e])}function qz(t){return{top:0,right:0,bottom:0,left:0,...t}}function XD(t){return typeof t!="number"?qz(t):{top:t,right:t,bottom:t,left:t}}function p0(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function UR(t,e,n){let{reference:s,floating:r}=t;const i=ji(e),o=UT(e),a=OT(o),l=ya(e),c=i==="y",u=s.x+s.width/2-r.width/2,p=s.y+s.height/2-r.height/2,g=s[a]/2-r[a]/2;let y;switch(l){case"top":y={x:u,y:s.y-r.height};break;case"bottom":y={x:u,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:p};break;case"left":y={x:s.x-r.width,y:p};break;default:y={x:s.x,y:s.y}}switch(np(e)){case"start":y[o]-=g*(n&&c?-1:1);break;case"end":y[o]+=g*(n&&c?-1:1);break}return y}const Wz=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:p}=UR(c,s,l),g=s,y={},x=0;for(let v=0;v<a.length;v++){const{name:C,fn:w}=a[v],{x:S,y:_,data:T,reset:A}=await w({x:u,y:p,initialPlacement:s,placement:g,strategy:r,middlewareData:y,rects:c,platform:o,elements:{reference:t,floating:e}});u=S??u,p=_??p,y={...y,[C]:{...y[C],...T}},A&&x<=50&&(x++,typeof A=="object"&&(A.placement&&(g=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):A.rects),{x:u,y:p}=UR(c,g,l)),v=-1)}return{x:u,y:p,placement:g,strategy:r,middlewareData:y}};async function Bm(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:g=!1,padding:y=0}=ga(e,t),x=XD(y),C=a[g?p==="floating"?"reference":"floating":p],w=p0(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(C)))==null||n?C:C.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=p==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),T=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},A=p0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:_,strategy:l}):S);return{top:(w.top-A.top+x.top)/T.y,bottom:(A.bottom-w.bottom+x.bottom)/T.y,left:(w.left-A.left+x.left)/T.x,right:(A.right-w.right+x.right)/T.x}}const Kz=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ga(t,e)||{};if(c==null)return{};const p=XD(u),g={x:n,y:s},y=UT(r),x=OT(y),v=await o.getDimensions(c),C=y==="y",w=C?"top":"left",S=C?"bottom":"right",_=C?"clientHeight":"clientWidth",T=i.reference[x]+i.reference[y]-g[y]-i.floating[x],A=g[y]-i.reference[y],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let M=P?P[_]:0;(!M||!await(o.isElement==null?void 0:o.isElement(P)))&&(M=a.floating[_]||i.floating[x]);const I=T/2-A/2,k=M/2-v[x]/2-1,D=Ql(p[w],k),L=Ql(p[S],k),U=D,G=M-v[x]-L,O=M/2-v[x]/2+I,W=xb(U,O,G),$=!l.arrow&&np(r)!=null&&O!==W&&i.reference[x]/2-(O<U?D:L)-v[x]/2<0,z=$?O<U?O-U:O-G:0;return{[y]:g[y]+z,data:{[y]:W,centerOffset:O-W-z,...$&&{alignmentOffset:z}},reset:$}}}),Yz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...C}=ga(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=ya(r),S=ji(a),_=ya(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=g||(_||!v?[h0(a)]:zz(a)),P=x!=="none";!g&&P&&A.push(...Gz(a,v,x,T));const M=[a,...A],I=await Bm(e,C),k=[];let D=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&k.push(I[w]),p){const O=jz(r,o,T);k.push(I[O[0]],I[O[1]])}if(D=[...D,{placement:r,overflows:k}],!k.every(O=>O<=0)){var L,U;const O=(((L=i.flip)==null?void 0:L.index)||0)+1,W=M[O];if(W&&(!(p==="alignment"?S!==ji(W):!1)||D.every(B=>B.overflows[0]>0&&ji(B.placement)===S)))return{data:{index:O,overflows:D},reset:{placement:W}};let $=(U=D.filter(z=>z.overflows[0]<=0).sort((z,B)=>z.overflows[1]-B.overflows[1])[0])==null?void 0:U.placement;if(!$)switch(y){case"bestFit":{var G;const z=(G=D.filter(B=>{if(P){const V=ji(B.placement);return V===S||V==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(V=>V>0).reduce((V,H)=>V+H,0)]).sort((B,V)=>B[1]-V[1])[0])==null?void 0:G[0];z&&($=z);break}case"initialPlacement":$=a;break}if(r!==$)return{reset:{placement:$}}}return{}}}};function VR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $R(t){return Vz.some(e=>t[e]>=0)}const Jz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=ga(t,e);switch(s){case"referenceHidden":{const i=await Bm(e,{...r,elementContext:"reference"}),o=VR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$R(o)}}}case"escaped":{const i=await Bm(e,{...r,altBoundary:!0}),o=VR(i,n.floating);return{data:{escapedOffsets:o,escaped:$R(o)}}}default:return{}}}}};async function Xz(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=ya(n),a=np(n),l=ji(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,p=ga(e,t);let{mainAxis:g,crossAxis:y,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof x=="number"&&(y=a==="end"?x*-1:x),l?{x:y*u,y:g*c}:{x:g*c,y:y*u}}const Qz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:o,middlewareData:a}=e,l=await Xz(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}}},Zz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:C=>{let{x:w,y:S}=C;return{x:w,y:S}}},...l}=ga(t,e),c={x:n,y:s},u=await Bm(e,l),p=ji(ya(r)),g=FT(p);let y=c[g],x=c[p];if(i){const C=g==="y"?"top":"left",w=g==="y"?"bottom":"right",S=y+u[C],_=y-u[w];y=xb(S,y,_)}if(o){const C=p==="y"?"top":"left",w=p==="y"?"bottom":"right",S=x+u[C],_=x-u[w];x=xb(S,x,_)}const v=a.fn({...e,[g]:y,[p]:x});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[g]:i,[p]:o}}}}}},e6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ga(t,e),u={x:n,y:s},p=ji(r),g=FT(p);let y=u[g],x=u[p];const v=ga(a,e),C=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const _=g==="y"?"height":"width",T=i.reference[g]-i.floating[_]+C.mainAxis,A=i.reference[g]+i.reference[_]-C.mainAxis;y<T?y=T:y>A&&(y=A)}if(c){var w,S;const _=g==="y"?"width":"height",T=["top","left"].includes(ya(r)),A=i.reference[p]-i.floating[_]+(T&&((w=o.offset)==null?void 0:w[p])||0)+(T?0:C.crossAxis),P=i.reference[p]+i.reference[_]+(T?0:((S=o.offset)==null?void 0:S[p])||0)-(T?C.crossAxis:0);x<A?x=A:x>P&&(x=P)}return{[g]:y,[p]:x}}}},t6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ga(t,e),u=await Bm(e,c),p=ya(r),g=np(r),y=ji(r)==="y",{width:x,height:v}=i.floating;let C,w;p==="top"||p==="bottom"?(C=p,w=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=p,C=g==="end"?"top":"bottom");const S=v-u.top-u.bottom,_=x-u.left-u.right,T=Ql(v-u[C],S),A=Ql(x-u[w],_),P=!e.middlewareData.shift;let M=T,I=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(M=S),P&&!g){const D=Gs(u.left,0),L=Gs(u.right,0),U=Gs(u.top,0),G=Gs(u.bottom,0);y?I=x-2*(D!==0||L!==0?D+L:Gs(u.left,u.right)):M=v-2*(U!==0||G!==0?U+G:Gs(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:M});const k=await o.getDimensions(a.floating);return x!==k.width||v!==k.height?{reset:{rects:!0}}:{}}}};function Mw(){return typeof window<"u"}function sp(t){return QD(t)?(t.nodeName||"").toLowerCase():"#document"}function Ys(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function no(t){var e;return(e=(QD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function QD(t){return Mw()?t instanceof Node||t instanceof Ys(t).Node:!1}function ni(t){return Mw()?t instanceof Element||t instanceof Ys(t).Element:!1}function Qi(t){return Mw()?t instanceof HTMLElement||t instanceof Ys(t).HTMLElement:!1}function BR(t){return!Mw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ys(t).ShadowRoot}function Vy(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=si(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!["inline","contents"].includes(r)}function n6(t){return["table","td","th"].includes(sp(t))}function kw(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function VT(t){const e=$T(),n=ni(t)?si(t):t;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function s6(t){let e=Zl(t);for(;Qi(e)&&!jh(e);){if(VT(e))return e;if(kw(e))return null;e=Zl(e)}return null}function $T(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function jh(t){return["html","body","#document"].includes(sp(t))}function si(t){return Ys(t).getComputedStyle(t)}function Iw(t){return ni(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zl(t){if(sp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||BR(t)&&t.host||no(t);return BR(e)?e.host:e}function ZD(t){const e=Zl(t);return jh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Qi(e)&&Vy(e)?e:ZD(e)}function jm(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=ZD(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),o=Ys(r);if(i){const a=Cb(o);return e.concat(o,o.visualViewport||[],Vy(r)?r:[],a&&n?jm(a):[])}return e.concat(r,jm(r,[],n))}function Cb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function e2(t){const e=si(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Qi(t),i=r?t.offsetWidth:n,o=r?t.offsetHeight:s,a=f0(n)!==i||f0(s)!==o;return a&&(n=i,s=o),{width:n,height:s,$:a}}function BT(t){return ni(t)?t:t.contextElement}function df(t){const e=BT(t);if(!Qi(e))return Yi(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=e2(e);let o=(i?f0(n.width):n.width)/s,a=(i?f0(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const r6=Yi(0);function t2(t){const e=Ys(t);return!$T()||!e.visualViewport?r6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function i6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ys(t)?!1:e}function td(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=BT(t);let o=Yi(1);e&&(s?ni(s)&&(o=df(s)):o=df(t));const a=i6(i,n,s)?t2(i):Yi(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,p=r.height/o.y;if(i){const g=Ys(i),y=s&&ni(s)?Ys(s):s;let x=g,v=Cb(x);for(;v&&s&&y!==x;){const C=df(v),w=v.getBoundingClientRect(),S=si(v),_=w.left+(v.clientLeft+parseFloat(S.paddingLeft))*C.x,T=w.top+(v.clientTop+parseFloat(S.paddingTop))*C.y;l*=C.x,c*=C.y,u*=C.x,p*=C.y,l+=_,c+=T,x=Ys(v),v=Cb(x)}}return p0({width:u,height:p,x:l,y:c})}function jT(t,e){const n=Iw(t).scrollLeft;return e?e.left+n:td(no(t)).left+n}function n2(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-(n?0:jT(t,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function o6(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",o=no(s),a=e?kw(e.floating):!1;if(s===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Yi(1);const u=Yi(0),p=Qi(s);if((p||!p&&!i)&&((sp(s)!=="body"||Vy(o))&&(l=Iw(s)),Qi(s))){const y=td(s);c=df(s),u.x=y.x+s.clientLeft,u.y=y.y+s.clientTop}const g=o&&!p&&!i?n2(o,l,!0):Yi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+g.x,y:n.y*c.y-l.scrollTop*c.y+u.y+g.y}}function a6(t){return Array.from(t.getClientRects())}function l6(t){const e=no(t),n=Iw(t),s=t.ownerDocument.body,r=Gs(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Gs(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+jT(t);const a=-n.scrollTop;return si(s).direction==="rtl"&&(o+=Gs(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}function c6(t,e){const n=Ys(t),s=no(t),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;const c=$T();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:o,x:a,y:l}}function u6(t,e){const n=td(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=Qi(t)?df(t):Yi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=r*i.x,c=s*i.y;return{width:o,height:a,x:l,y:c}}function jR(t,e,n){let s;if(e==="viewport")s=c6(t,n);else if(e==="document")s=l6(no(t));else if(ni(e))s=u6(e,n);else{const r=t2(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return p0(s)}function s2(t,e){const n=Zl(t);return n===e||!ni(n)||jh(n)?!1:si(n).position==="fixed"||s2(n,e)}function d6(t,e){const n=e.get(t);if(n)return n;let s=jm(t,[],!1).filter(a=>ni(a)&&sp(a)!=="body"),r=null;const i=si(t).position==="fixed";let o=i?Zl(t):t;for(;ni(o)&&!jh(o);){const a=si(o),l=VT(o);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Vy(o)&&!l&&s2(t,o))?s=s.filter(u=>u!==o):r=a,o=Zl(o)}return e.set(t,s),s}function f6(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const o=[...n==="clippingAncestors"?kw(e)?[]:d6(e,this._c):[].concat(n),s],a=o[0],l=o.reduce((c,u)=>{const p=jR(e,u,r);return c.top=Gs(p.top,c.top),c.right=Ql(p.right,c.right),c.bottom=Ql(p.bottom,c.bottom),c.left=Gs(p.left,c.left),c},jR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function h6(t){const{width:e,height:n}=e2(t);return{width:e,height:n}}function p6(t,e,n){const s=Qi(e),r=no(e),i=n==="fixed",o=td(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Yi(0);function c(){l.x=jT(r)}if(s||!s&&!i)if((sp(e)!=="body"||Vy(r))&&(a=Iw(e)),s){const y=td(e,!0,i,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else r&&c();i&&!s&&r&&c();const u=r&&!s&&!i?n2(r,a):Yi(0),p=o.left+a.scrollLeft-l.x-u.x,g=o.top+a.scrollTop-l.y-u.y;return{x:p,y:g,width:o.width,height:o.height}}function KC(t){return si(t).position==="static"}function zR(t,e){if(!Qi(t)||si(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return no(t)===n&&(n=n.ownerDocument.body),n}function r2(t,e){const n=Ys(t);if(kw(t))return n;if(!Qi(t)){let r=Zl(t);for(;r&&!jh(r);){if(ni(r)&&!KC(r))return r;r=Zl(r)}return n}let s=zR(t,e);for(;s&&n6(s)&&KC(s);)s=zR(s,e);return s&&jh(s)&&KC(s)&&!VT(s)?n:s||s6(t)||n}const m6=async function(t){const e=this.getOffsetParent||r2,n=this.getDimensions,s=await n(t.floating);return{reference:p6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function g6(t){return si(t).direction==="rtl"}const y6={convertOffsetParentRelativeRectToViewportRelativeRect:o6,getDocumentElement:no,getClippingRect:f6,getOffsetParent:r2,getElementRects:m6,getClientRects:a6,getDimensions:h6,getScale:df,isElement:ni,isRTL:g6};function i2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function v6(t,e){let n=null,s;const r=no(t);function i(){var a;clearTimeout(s),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:p,width:g,height:y}=c;if(a||e(),!g||!y)return;const x=bv(p),v=bv(r.clientWidth-(u+g)),C=bv(r.clientHeight-(p+y)),w=bv(u),_={rootMargin:-x+"px "+-v+"px "+-C+"px "+-w+"px",threshold:Gs(0,Ql(1,l))||1};let T=!0;function A(P){const M=P[0].intersectionRatio;if(M!==l){if(!T)return o();M?o(!1,M):s=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!i2(c,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(A,{..._,root:r.ownerDocument})}catch{n=new IntersectionObserver(A,_)}n.observe(t)}return o(!0),i}function x6(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=BT(t),u=r||i?[...c?jm(c):[],...jm(e)]:[];u.forEach(w=>{r&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const p=c&&a?v6(c,n):null;let g=-1,y=null;o&&(y=new ResizeObserver(w=>{let[S]=w;S&&S.target===c&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var _;(_=y)==null||_.observe(e)})),n()}),c&&!l&&y.observe(c),y.observe(e));let x,v=l?td(t):null;l&&C();function C(){const w=td(t);v&&!i2(v,w)&&n(),v=w,x=requestAnimationFrame(C)}return n(),()=>{var w;u.forEach(S=>{r&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),p==null||p(),(w=y)==null||w.disconnect(),y=null,l&&cancelAnimationFrame(x)}}const w6=Qz,C6=Zz,S6=Yz,b6=t6,_6=Jz,HR=Kz,E6=e6,T6=(t,e,n)=>{const s=new Map,r={platform:y6,...n},i={...r.platform,_c:s};return Wz(t,e,{...r,platform:i})};var A6=typeof document<"u",R6=function(){},Zv=A6?b.useLayoutEffect:R6;function m0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!m0(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!m0(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function o2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function GR(t,e){const n=o2(t);return Math.round(e*n)/n}function YC(t){const e=b.useRef(t);return Zv(()=>{e.current=t}),e}function N6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,p]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=b.useState(s);m0(g,s)||y(s);const[x,v]=b.useState(null),[C,w]=b.useState(null),S=b.useCallback(B=>{B!==P.current&&(P.current=B,v(B))},[]),_=b.useCallback(B=>{B!==M.current&&(M.current=B,w(B))},[]),T=i||x,A=o||C,P=b.useRef(null),M=b.useRef(null),I=b.useRef(u),k=l!=null,D=YC(l),L=YC(r),U=YC(c),G=b.useCallback(()=>{if(!P.current||!M.current)return;const B={placement:e,strategy:n,middleware:g};L.current&&(B.platform=L.current),T6(P.current,M.current,B).then(V=>{const H={...V,isPositioned:U.current!==!1};O.current&&!m0(I.current,H)&&(I.current=H,gd.flushSync(()=>{p(H)}))})},[g,e,n,L,U]);Zv(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(B=>({...B,isPositioned:!1})))},[c]);const O=b.useRef(!1);Zv(()=>(O.current=!0,()=>{O.current=!1}),[]),Zv(()=>{if(T&&(P.current=T),A&&(M.current=A),T&&A){if(D.current)return D.current(T,A,G);G()}},[T,A,G,D,k]);const W=b.useMemo(()=>({reference:P,floating:M,setReference:S,setFloating:_}),[S,_]),$=b.useMemo(()=>({reference:T,floating:A}),[T,A]),z=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!$.floating)return B;const V=GR($.floating,u.x),H=GR($.floating,u.y);return a?{...B,transform:"translate("+V+"px, "+H+"px)",...o2($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:H}},[n,a,$.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:G,refs:W,elements:$,floatingStyles:z}),[u,G,W,$,z])}const P6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?HR({element:s.current,padding:r}).fn(n):{}:s?HR({element:s,padding:r}).fn(n):{}}}},M6=(t,e)=>({...w6(t),options:[t,e]}),k6=(t,e)=>({...C6(t),options:[t,e]}),I6=(t,e)=>({...E6(t),options:[t,e]}),D6=(t,e)=>({...S6(t),options:[t,e]}),L6=(t,e)=>({...b6(t),options:[t,e]}),F6=(t,e)=>({..._6(t),options:[t,e]}),O6=(t,e)=>({...P6(t),options:[t,e]});var U6="Arrow",a2=b.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...i}=t;return m.jsx(xe.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});a2.displayName=U6;var V6=a2;function Dw(t){const[e,n]=b.useState(void 0);return Nn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var zT="Popper",[l2,rp]=os(zT),[$6,c2]=l2(zT),u2=t=>{const{__scopePopper:e,children:n}=t,[s,r]=b.useState(null);return m.jsx($6,{scope:e,anchor:s,onAnchorChange:r,children:n})};u2.displayName=zT;var d2="PopperAnchor",f2=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,i=c2(d2,n),o=b.useRef(null),a=Oe(e,o);return b.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:m.jsx(xe.div,{...r,ref:a})});f2.displayName=d2;var HT="PopperContent",[B6,j6]=l2(HT),h2=b.forwardRef((t,e)=>{var Y,_e,re,we,Te,Re;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:x,...v}=t,C=c2(HT,n),[w,S]=b.useState(null),_=Oe(e,At=>S(At)),[T,A]=b.useState(null),P=Dw(T),M=(P==null?void 0:P.width)??0,I=(P==null?void 0:P.height)??0,k=s+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],U=L.length>0,G={padding:D,boundary:L.filter(H6),altBoundary:U},{refs:O,floatingStyles:W,placement:$,isPositioned:z,middlewareData:B}=N6({strategy:"fixed",placement:k,whileElementsMounted:(...At)=>x6(...At,{animationFrame:y==="always"}),elements:{reference:C.anchor},middleware:[M6({mainAxis:r+I,alignmentAxis:o}),l&&k6({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?I6():void 0,...G}),l&&D6({...G}),L6({...G,apply:({elements:At,rects:gn,availableWidth:ui,availableHeight:di})=>{const{width:so,height:bd}=gn.reference,ro=At.floating.style;ro.setProperty("--radix-popper-available-width",`${ui}px`),ro.setProperty("--radix-popper-available-height",`${di}px`),ro.setProperty("--radix-popper-anchor-width",`${so}px`),ro.setProperty("--radix-popper-anchor-height",`${bd}px`)}}),T&&O6({element:T,padding:a}),G6({arrowWidth:M,arrowHeight:I}),g&&F6({strategy:"referenceHidden",...G})]}),[V,H]=g2($),Q=_s(x);Nn(()=>{z&&(Q==null||Q())},[z,Q]);const J=(Y=B.arrow)==null?void 0:Y.x,se=(_e=B.arrow)==null?void 0:_e.y,ye=((re=B.arrow)==null?void 0:re.centerOffset)!==0,[Me,De]=b.useState();return Nn(()=>{w&&De(window.getComputedStyle(w).zIndex)},[w]),m.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:z?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(we=B.transformOrigin)==null?void 0:we.x,(Te=B.transformOrigin)==null?void 0:Te.y].join(" "),...((Re=B.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(B6,{scope:n,placedSide:V,onArrowChange:A,arrowX:J,arrowY:se,shouldHideArrow:ye,children:m.jsx(xe.div,{"data-side":V,"data-align":H,...v,ref:_,style:{...v.style,animation:z?void 0:"none"}})})})});h2.displayName=HT;var p2="PopperArrow",z6={top:"bottom",right:"left",bottom:"top",left:"right"},m2=b.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,i=j6(p2,s),o=z6[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(V6,{...r,ref:n,style:{...r.style,display:"block"}})})});m2.displayName=p2;function H6(t){return t!==null}var G6=t=>({name:"transformOrigin",options:t,fn(e){var C,w,S;const{placement:n,rects:s,middlewareData:r}=e,o=((C=r.arrow)==null?void 0:C.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=g2(n),p={start:"0%",center:"50%",end:"100%"}[u],g=(((w=r.arrow)==null?void 0:w.x)??0)+a/2,y=(((S=r.arrow)==null?void 0:S.y)??0)+l/2;let x="",v="";return c==="bottom"?(x=o?p:`${g}px`,v=`${-l}px`):c==="top"?(x=o?p:`${g}px`,v=`${s.floating.height+l}px`):c==="right"?(x=`${-l}px`,v=o?p:`${y}px`):c==="left"&&(x=`${s.floating.width+l}px`,v=o?p:`${y}px`),{data:{x,y:v}}}});function g2(t){const[e,n="center"]=t.split("-");return[e,n]}var y2=u2,GT=f2,qT=h2,WT=m2,[Lw,woe]=os("Tooltip",[rp]),KT=rp(),v2="TooltipProvider",q6=700,qR="tooltip.open",[W6,x2]=Lw(v2),w2=t=>{const{__scopeTooltip:e,delayDuration:n=q6,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(W6,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:r,children:i})};w2.displayName=v2;var C2="Tooltip",[Coe,Fw]=Lw(C2),Sb="TooltipTrigger",K6=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,r=Fw(Sb,n),i=x2(Sb,n),o=KT(n),a=b.useRef(null),l=Oe(e,a,r.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),p=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),m.jsx(GT,{asChild:!0,...o,children:m.jsx(xe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:l,onPointerMove:te(t.onPointerMove,g=>{g.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:te(t.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:te(t.onPointerDown,()=>{r.open&&r.onClose(),c.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:te(t.onFocus,()=>{c.current||r.onOpen()}),onBlur:te(t.onBlur,r.onClose),onClick:te(t.onClick,r.onClose)})})});K6.displayName=Sb;var Y6="TooltipPortal",[Soe,J6]=Lw(Y6,{forceMount:void 0}),zh="TooltipContent",S2=b.forwardRef((t,e)=>{const n=J6(zh,t.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=t,o=Fw(zh,t.__scopeTooltip);return m.jsx(er,{present:s||o.open,children:o.disableHoverableContent?m.jsx(b2,{side:r,...i,ref:e}):m.jsx(X6,{side:r,...i,ref:e})})}),X6=b.forwardRef((t,e)=>{const n=Fw(zh,t.__scopeTooltip),s=x2(zh,t.__scopeTooltip),r=b.useRef(null),i=Oe(e,r),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,u=r.current,{onPointerInTransitChange:p}=s,g=b.useCallback(()=>{a(null),p(!1)},[p]),y=b.useCallback((x,v)=>{const C=x.currentTarget,w={x:x.clientX,y:x.clientY},S=nH(w,C.getBoundingClientRect()),_=sH(w,S),T=rH(v.getBoundingClientRect()),A=oH([..._,...T]);a(A),p(!0)},[p]);return b.useEffect(()=>()=>g(),[g]),b.useEffect(()=>{if(l&&u){const x=C=>y(C,u),v=C=>y(C,l);return l.addEventListener("pointerleave",x),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",v)}}},[l,u,y,g]),b.useEffect(()=>{if(o){const x=v=>{const C=v.target,w={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(C))||(u==null?void 0:u.contains(C)),_=!iH(w,o);S?g():_&&(g(),c())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,u,o,c,g]),m.jsx(b2,{...t,ref:i})}),[Q6,Z6]=Lw(C2,{isInside:!1}),eH=yj("TooltipContent"),b2=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Fw(zh,n),c=KT(n),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener(qR,u),()=>document.removeEventListener(qR,u)),[u]),b.useEffect(()=>{if(l.trigger){const p=g=>{const y=g.target;y!=null&&y.contains(l.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[l.trigger,u]),m.jsx(ep,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:m.jsxs(qT,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(eH,{children:s}),m.jsx(Q6,{scope:n,isInside:!0,children:m.jsx(Vj,{id:l.contentId,role:"tooltip",children:r||s})})]})})});S2.displayName=zh;var _2="TooltipArrow",tH=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,r=KT(n);return Z6(_2,n).isInside?null:m.jsx(WT,{...r,...s,ref:e})});tH.displayName=_2;function nH(t,e){const n=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function sH(t,e,n=5){const s=[];switch(e){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function rH(t){const{top:e,right:n,bottom:s,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:s},{x:r,y:s}]}function iH(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,p=l.x,g=l.y;u>s!=g>s&&n<(p-c)*(s-u)/(g-u)+c&&(r=!r)}return r}function oH(t){const e=t.slice();return e.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),aH(e)}function aH(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const r=t[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let s=t.length-1;s>=0;s--){const r=t[s];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var lH=w2,E2=S2;const cH=lH,uH=b.forwardRef(({className:t,sideOffset:e=4,...n},s)=>m.jsx(E2,{ref:s,sideOffset:e,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));uH.displayName=E2.displayName;var ip=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nd=typeof window>"u"||"Deno"in globalThis;function Xn(){}function dH(t,e){return typeof t=="function"?t(e):t}function bb(t){return typeof t=="number"&&t>=0&&t!==1/0}function T2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ql(t,e){return typeof t=="function"?t(e):t}function Yr(t,e){return typeof t=="function"?t(e):t}function WR(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==YT(o,e.options))return!1}else if(!zm(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function KR(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(sd(e.options.mutationKey)!==sd(i))return!1}else if(!zm(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function YT(t,e){return((e==null?void 0:e.queryKeyHashFn)||sd)(t)}function sd(t){return JSON.stringify(t,(e,n)=>_b(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function zm(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>zm(t[n],e[n])):!1}function A2(t,e){if(t===e)return t;const n=YR(t)&&YR(e);if(n||_b(t)&&_b(e)){const s=n?t:Object.keys(t),r=s.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},l=new Set(s);let c=0;for(let u=0;u<o;u++){const p=n?u:i[u];(!n&&l.has(p)||n)&&t[p]===void 0&&e[p]===void 0?(a[p]=void 0,c++):(a[p]=A2(t[p],e[p]),a[p]===t[p]&&t[p]!==void 0&&c++)}return r===o&&c===r?t:a}return e}function g0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function YR(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _b(t){if(!JR(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!JR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function JR(t){return Object.prototype.toString.call(t)==="[object Object]"}function fH(t){return new Promise(e=>{setTimeout(e,t)})}function Eb(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?A2(t,e):e}function hH(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function pH(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var JT=Symbol();function R2(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===JT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function N2(t,e){return typeof t=="function"?t(...e):!!t}var Nc,za,vf,FM,mH=(FM=class extends ip{constructor(){super();R(this,Nc);R(this,za);R(this,vf);E(this,vf,e=>{if(!nd&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){d(this,za)||this.setEventListener(d(this,vf))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,za))==null||e.call(this),E(this,za,void 0))}setEventListener(e){var n;E(this,vf,e),(n=d(this,za))==null||n.call(this),E(this,za,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){d(this,Nc)!==e&&(E(this,Nc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof d(this,Nc)=="boolean"?d(this,Nc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Nc=new WeakMap,za=new WeakMap,vf=new WeakMap,FM),XT=new mH,xf,Ha,wf,OM,gH=(OM=class extends ip{constructor(){super();R(this,xf,!0);R(this,Ha);R(this,wf);E(this,wf,e=>{if(!nd&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){d(this,Ha)||this.setEventListener(d(this,wf))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,Ha))==null||e.call(this),E(this,Ha,void 0))}setEventListener(e){var n;E(this,wf,e),(n=d(this,Ha))==null||n.call(this),E(this,Ha,e(this.setOnline.bind(this)))}setOnline(e){d(this,xf)!==e&&(E(this,xf,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return d(this,xf)}},xf=new WeakMap,Ha=new WeakMap,wf=new WeakMap,OM),y0=new gH;function Tb(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}function yH(t){return Math.min(1e3*2**t,3e4)}function P2(t){return(t??"online")==="online"?y0.isOnline():!0}var M2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function JC(t){return t instanceof M2}function k2(t){let e=!1,n=0,s=!1,r;const i=Tb(),o=v=>{var C;s||(g(new M2(v)),(C=t.abort)==null||C.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>XT.isFocused()&&(t.networkMode==="always"||y0.isOnline())&&t.canRun(),u=()=>P2(t.networkMode)&&t.canRun(),p=v=>{var C;s||(s=!0,(C=t.onSuccess)==null||C.call(t,v),r==null||r(),i.resolve(v))},g=v=>{var C;s||(s=!0,(C=t.onError)==null||C.call(t,v),r==null||r(),i.reject(v))},y=()=>new Promise(v=>{var C;r=w=>{(s||c())&&v(w)},(C=t.onPause)==null||C.call(t)}).then(()=>{var v;r=void 0,s||(v=t.onContinue)==null||v.call(t)}),x=()=>{if(s)return;let v;const C=n===0?t.initialPromise:void 0;try{v=C??t.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(p).catch(w=>{var P;if(s)return;const S=t.retry??(nd?0:3),_=t.retryDelay??yH,T=typeof _=="function"?_(n,w):_,A=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,w);if(e||!A){g(w);return}n++,(P=t.onFail)==null||P.call(t,n,w),fH(T).then(()=>c()?void 0:y()).then(()=>{e?g(w):x()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?x():y().then(x),i)}}var vH=t=>setTimeout(t,0);function xH(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=vH;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var tn=xH(),Pc,UM,I2=(UM=class{constructor(){R(this,Pc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bb(this.gcTime)&&E(this,Pc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(nd?1/0:5*60*1e3))}clearGcTimeout(){d(this,Pc)&&(clearTimeout(d(this,Pc)),E(this,Pc,void 0))}},Pc=new WeakMap,UM),Cf,Mc,nr,kc,Dn,Qm,Ic,Ir,co,VM,wH=(VM=class extends I2{constructor(e){super();R(this,Ir);R(this,Cf);R(this,Mc);R(this,nr);R(this,kc);R(this,Dn);R(this,Qm);R(this,Ic);E(this,Ic,!1),E(this,Qm,e.defaultOptions),this.setOptions(e.options),this.observers=[],E(this,kc,e.client),E(this,nr,d(this,kc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,E(this,Cf,CH(this.options)),this.state=e.state??d(this,Cf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,Dn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Qm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,nr).remove(this)}setData(e,n){const s=Eb(this.state.data,e,this.options);return N(this,Ir,co).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){N(this,Ir,co).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=d(this,Dn))==null?void 0:s.promise;return(r=d(this,Dn))==null||r.cancel(e),n?n.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Cf))}isActive(){return this.observers.some(e=>Yr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===JT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ql(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!T2(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=d(this,Dn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=d(this,Dn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,nr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(d(this,Dn)&&(d(this,Ic)?d(this,Dn).cancel({revert:!0}):d(this,Dn).cancelRetry()),this.scheduleGc()),d(this,nr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||N(this,Ir,co).call(this,{type:"invalidate"})}fetch(e,n){var c,u,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(d(this,Dn))return d(this,Dn).continueRetry(),d(this,Dn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(y=>y.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,r=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(E(this,Ic,!0),s.signal)})},i=()=>{const g=R2(this.options,n),x=(()=>{const v={client:d(this,kc),queryKey:this.queryKey,meta:this.meta};return r(v),v})();return E(this,Ic,!1),this.options.persister?this.options.persister(g,x,this):g(x)},a=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:d(this,kc),state:this.state,fetchFn:i};return r(g),g})();(c=this.options.behavior)==null||c.onFetch(a,this),E(this,Mc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&N(this,Ir,co).call(this,{type:"fetch",meta:(p=a.fetchOptions)==null?void 0:p.meta});const l=g=>{var y,x,v,C;JC(g)&&g.silent||N(this,Ir,co).call(this,{type:"error",error:g}),JC(g)||((x=(y=d(this,nr).config).onError)==null||x.call(y,g,this),(C=(v=d(this,nr).config).onSettled)==null||C.call(v,this.state.data,g,this)),this.scheduleGc()};return E(this,Dn,k2({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var y,x,v,C;if(g===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(w){l(w);return}(x=(y=d(this,nr).config).onSuccess)==null||x.call(y,g,this),(C=(v=d(this,nr).config).onSettled)==null||C.call(v,g,this.state.error,this),this.scheduleGc()},onError:l,onFail:(g,y)=>{N(this,Ir,co).call(this,{type:"failed",failureCount:g,error:y})},onPause:()=>{N(this,Ir,co).call(this,{type:"pause"})},onContinue:()=>{N(this,Ir,co).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,Dn).start()}},Cf=new WeakMap,Mc=new WeakMap,nr=new WeakMap,kc=new WeakMap,Dn=new WeakMap,Qm=new WeakMap,Ic=new WeakMap,Ir=new WeakSet,co=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...D2(s.data,this.options),fetchMeta:e.meta??null};case"success":return E(this,Mc,void 0),{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return JC(r)&&r.revert&&d(this,Mc)?{...d(this,Mc),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),d(this,nr).notify({query:this,type:"updated",action:e})})},VM);function D2(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:P2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var xi,$M,SH=($M=class extends ip{constructor(e={}){super();R(this,xi);this.config=e,E(this,xi,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??YT(r,n);let o=this.get(i);return o||(o=new wH({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){d(this,xi).has(e.queryHash)||(d(this,xi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=d(this,xi).get(e.queryHash);n&&(e.destroy(),n===e&&d(this,xi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,xi).get(e)}getAll(){return[...d(this,xi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>WR(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>WR(e,s)):n}notify(e){tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xi=new WeakMap,$M),wi,zn,Dc,Ci,ka,BM,bH=(BM=class extends I2{constructor(e){super();R(this,Ci);R(this,wi);R(this,zn);R(this,Dc);this.mutationId=e.mutationId,E(this,zn,e.mutationCache),E(this,wi,[]),this.state=e.state||L2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,wi).includes(e)||(d(this,wi).push(e),this.clearGcTimeout(),d(this,zn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){E(this,wi,d(this,wi).filter(n=>n!==e)),this.scheduleGc(),d(this,zn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,wi).length||(this.state.status==="pending"?this.scheduleGc():d(this,zn).remove(this))}continue(){var e;return((e=d(this,Dc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,c,u,p,g,y,x,v,C,w,S,_,T,A,P,M,I;const n=()=>{N(this,Ci,ka).call(this,{type:"continue"})};E(this,Dc,k2({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,D)=>{N(this,Ci,ka).call(this,{type:"failed",failureCount:k,error:D})},onPause:()=>{N(this,Ci,ka).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,zn).canRun(this)}));const s=this.state.status==="pending",r=!d(this,Dc).canStart();try{if(s)n();else{N(this,Ci,ka).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=d(this,zn).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));D!==this.state.context&&N(this,Ci,ka).call(this,{type:"pending",context:D,variables:e,isPaused:r})}const k=await d(this,Dc).start();return await((u=(c=d(this,zn).config).onSuccess)==null?void 0:u.call(c,k,e,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,k,e,this.state.context)),await((x=(y=d(this,zn).config).onSettled)==null?void 0:x.call(y,k,null,this.state.variables,this.state.context,this)),await((C=(v=this.options).onSettled)==null?void 0:C.call(v,k,null,e,this.state.context)),N(this,Ci,ka).call(this,{type:"success",data:k}),k}catch(k){try{throw await((S=(w=d(this,zn).config).onError)==null?void 0:S.call(w,k,e,this.state.context,this)),await((T=(_=this.options).onError)==null?void 0:T.call(_,k,e,this.state.context)),await((P=(A=d(this,zn).config).onSettled)==null?void 0:P.call(A,void 0,k,this.state.variables,this.state.context,this)),await((I=(M=this.options).onSettled)==null?void 0:I.call(M,void 0,k,e,this.state.context)),k}finally{N(this,Ci,ka).call(this,{type:"error",error:k})}}finally{d(this,zn).runNext(this)}}},wi=new WeakMap,zn=new WeakMap,Dc=new WeakMap,Ci=new WeakSet,ka=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{d(this,wi).forEach(s=>{s.onMutationUpdate(e)}),d(this,zn).notify({mutation:this,type:"updated",action:e})})},BM);function L2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vo,Dr,Zm,jM,_H=(jM=class extends ip{constructor(e={}){super();R(this,vo);R(this,Dr);R(this,Zm);this.config=e,E(this,vo,new Set),E(this,Dr,new Map),E(this,Zm,0)}build(e,n,s){const r=new bH({mutationCache:this,mutationId:++rn(this,Zm)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){d(this,vo).add(e);const n=_v(e);if(typeof n=="string"){const s=d(this,Dr).get(n);s?s.push(e):d(this,Dr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,vo).delete(e)){const n=_v(e);if(typeof n=="string"){const s=d(this,Dr).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&d(this,Dr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=_v(e);if(typeof n=="string"){const s=d(this,Dr).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=_v(e);if(typeof n=="string"){const r=(s=d(this,Dr).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{d(this,vo).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,vo).clear(),d(this,Dr).clear()})}getAll(){return Array.from(d(this,vo))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>KR(n,s))}findAll(e={}){return this.getAll().filter(n=>KR(e,n))}notify(e){tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},vo=new WeakMap,Dr=new WeakMap,Zm=new WeakMap,jM);function _v(t){var e;return(e=t.options.scope)==null?void 0:e.id}function XR(t){return{onFetch:(e,n)=>{var u,p,g,y,x;const s=e.options,r=(g=(p=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const C=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},w=R2(e.options,e.fetchOptions),S=async(_,T,A)=>{if(v)return Promise.reject();if(T==null&&_.pages.length)return Promise.resolve(_);const M=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:T,direction:A?"backward":"forward",meta:e.options.meta};return C(L),L})(),I=await w(M),{maxPages:k}=e.options,D=A?pH:hH;return{pages:D(_.pages,I,k),pageParams:D(_.pageParams,T,k)}};if(r&&i.length){const _=r==="backward",T=_?EH:QR,A={pages:i,pageParams:o},P=T(s,A);a=await S(A,P,_)}else{const _=t??i.length;do{const T=l===0?o[0]??s.initialPageParam:QR(s,a);if(l>0&&T==null)break;a=await S(a,T),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var v,C;return(C=(v=e.options).persister)==null?void 0:C.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function QR(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function EH(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var It,Ga,qa,Sf,bf,Wa,_f,Ef,zM,TH=(zM=class{constructor(t={}){R(this,It);R(this,Ga);R(this,qa);R(this,Sf);R(this,bf);R(this,Wa);R(this,_f);R(this,Ef);E(this,It,t.queryCache||new SH),E(this,Ga,t.mutationCache||new _H),E(this,qa,t.defaultOptions||{}),E(this,Sf,new Map),E(this,bf,new Map),E(this,Wa,0)}mount(){rn(this,Wa)._++,d(this,Wa)===1&&(E(this,_f,XT.subscribe(async t=>{t&&(await this.resumePausedMutations(),d(this,It).onFocus())})),E(this,Ef,y0.subscribe(async t=>{t&&(await this.resumePausedMutations(),d(this,It).onOnline())})))}unmount(){var t,e;rn(this,Wa)._--,d(this,Wa)===0&&((t=d(this,_f))==null||t.call(this),E(this,_f,void 0),(e=d(this,Ef))==null||e.call(this),E(this,Ef,void 0))}isFetching(t){return d(this,It).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return d(this,Ga).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=d(this,It).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=d(this,It).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ql(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return d(this,It).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=d(this,It).get(s.queryHash),i=r==null?void 0:r.state.data,o=dH(e,i);if(o!==void 0)return d(this,It).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return tn.batch(()=>d(this,It).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=d(this,It).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=d(this,It);tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=d(this,It);return tn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=tn.batch(()=>d(this,It).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(Xn).catch(Xn)}invalidateQueries(t,e={}){return tn.batch(()=>(d(this,It).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=tn.batch(()=>d(this,It).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=d(this,It).build(this,e);return n.isStaleByTime(ql(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=XR(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=XR(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return y0.isOnline()?d(this,Ga).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,It)}getMutationCache(){return d(this,Ga)}getDefaultOptions(){return d(this,qa)}setDefaultOptions(t){E(this,qa,t)}setQueryDefaults(t,e){d(this,Sf).set(sd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...d(this,Sf).values()],n={};return e.forEach(s=>{zm(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){d(this,bf).set(sd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...d(this,bf).values()],n={};return e.forEach(s=>{zm(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...d(this,qa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=YT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===JT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...d(this,qa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){d(this,It).clear(),d(this,Ga).clear()}},It=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Sf=new WeakMap,bf=new WeakMap,Wa=new WeakMap,_f=new WeakMap,Ef=new WeakMap,zM),ds,Ge,eg,Hn,Lc,Tf,Ka,Ya,tg,Af,Rf,Fc,Oc,Ja,Nf,tt,Vp,Ab,Rb,Nb,Pb,Mb,kb,Ib,F2,HM,AH=(HM=class extends ip{constructor(e,n){super();R(this,tt);R(this,ds);R(this,Ge);R(this,eg);R(this,Hn);R(this,Lc);R(this,Tf);R(this,Ka);R(this,Ya);R(this,tg);R(this,Af);R(this,Rf);R(this,Fc);R(this,Oc);R(this,Ja);R(this,Nf,new Set);this.options=n,E(this,ds,e),E(this,Ya,null),E(this,Ka,Tb()),this.options.experimental_prefetchInRender||d(this,Ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,Ge).addObserver(this),ZR(d(this,Ge),this.options)?N(this,tt,Vp).call(this):this.updateResult(),N(this,tt,Pb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Db(d(this,Ge),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Db(d(this,Ge),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,N(this,tt,Mb).call(this),N(this,tt,kb).call(this),d(this,Ge).removeObserver(this)}setOptions(e){const n=this.options,s=d(this,Ge);if(this.options=d(this,ds).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yr(this.options.enabled,d(this,Ge))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");N(this,tt,Ib).call(this),d(this,Ge).setOptions(this.options),n._defaulted&&!g0(this.options,n)&&d(this,ds).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,Ge),observer:this});const r=this.hasListeners();r&&eN(d(this,Ge),s,this.options,n)&&N(this,tt,Vp).call(this),this.updateResult(),r&&(d(this,Ge)!==s||Yr(this.options.enabled,d(this,Ge))!==Yr(n.enabled,d(this,Ge))||ql(this.options.staleTime,d(this,Ge))!==ql(n.staleTime,d(this,Ge)))&&N(this,tt,Ab).call(this);const i=N(this,tt,Rb).call(this);r&&(d(this,Ge)!==s||Yr(this.options.enabled,d(this,Ge))!==Yr(n.enabled,d(this,Ge))||i!==d(this,Ja))&&N(this,tt,Nb).call(this,i)}getOptimisticResult(e){const n=d(this,ds).getQueryCache().build(d(this,ds),e),s=this.createResult(n,e);return NH(this,s)&&(E(this,Hn,s),E(this,Tf,this.options),E(this,Lc,d(this,Ge).state)),s}getCurrentResult(){return d(this,Hn)}trackResult(e,n){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),n==null||n(r),Reflect.get(s,r))})}trackProp(e){d(this,Nf).add(e)}getCurrentQuery(){return d(this,Ge)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=d(this,ds).defaultQueryOptions(e),s=d(this,ds).getQueryCache().build(d(this,ds),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(e){return N(this,tt,Vp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,Hn)))}createResult(e,n){var k;const s=d(this,Ge),r=this.options,i=d(this,Hn),o=d(this,Lc),a=d(this,Tf),c=e!==s?e.state:d(this,eg),{state:u}=e;let p={...u},g=!1,y;if(n._optimisticResults){const D=this.hasListeners(),L=!D&&ZR(e,n),U=D&&eN(e,s,n,r);(L||U)&&(p={...p,...D2(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:v,status:C}=p;y=p.data;let w=!1;if(n.placeholderData!==void 0&&y===void 0&&C==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,w=!0):D=typeof n.placeholderData=="function"?n.placeholderData((k=d(this,Rf))==null?void 0:k.state.data,d(this,Rf)):n.placeholderData,D!==void 0&&(C="success",y=Eb(i==null?void 0:i.data,D,n),g=!0)}if(n.select&&y!==void 0&&!w)if(i&&y===(o==null?void 0:o.data)&&n.select===d(this,tg))y=d(this,Af);else try{E(this,tg,n.select),y=n.select(y),y=Eb(i==null?void 0:i.data,y,n),E(this,Af,y),E(this,Ya,null)}catch(D){E(this,Ya,D)}d(this,Ya)&&(x=d(this,Ya),y=d(this,Af),v=Date.now(),C="error");const S=p.fetchStatus==="fetching",_=C==="pending",T=C==="error",A=_&&S,P=y!==void 0,I={status:C,fetchStatus:p.fetchStatus,isPending:_,isSuccess:C==="success",isError:T,isInitialLoading:A,isLoading:A,data:y,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>c.dataUpdateCount||p.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!_,isLoadingError:T&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:T&&P,isStale:QT(e,n),refetch:this.refetch,promise:d(this,Ka)};if(this.options.experimental_prefetchInRender){const D=G=>{I.status==="error"?G.reject(I.error):I.data!==void 0&&G.resolve(I.data)},L=()=>{const G=E(this,Ka,I.promise=Tb());D(G)},U=d(this,Ka);switch(U.status){case"pending":e.queryHash===s.queryHash&&D(U);break;case"fulfilled":(I.status==="error"||I.data!==U.value)&&L();break;case"rejected":(I.status!=="error"||I.error!==U.reason)&&L();break}}return I}updateResult(){const e=d(this,Hn),n=this.createResult(d(this,Ge),this.options);if(E(this,Lc,d(this,Ge).state),E(this,Tf,this.options),d(this,Lc).data!==void 0&&E(this,Rf,d(this,Ge)),g0(n,e))return;E(this,Hn,n);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!d(this,Nf).size)return!0;const o=new Set(i??d(this,Nf));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,Hn)).some(a=>{const l=a;return d(this,Hn)[l]!==e[l]&&o.has(l)})};N(this,tt,F2).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&N(this,tt,Pb).call(this)}},ds=new WeakMap,Ge=new WeakMap,eg=new WeakMap,Hn=new WeakMap,Lc=new WeakMap,Tf=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,tg=new WeakMap,Af=new WeakMap,Rf=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,Ja=new WeakMap,Nf=new WeakMap,tt=new WeakSet,Vp=function(e){N(this,tt,Ib).call(this);let n=d(this,Ge).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Xn)),n},Ab=function(){N(this,tt,Mb).call(this);const e=ql(this.options.staleTime,d(this,Ge));if(nd||d(this,Hn).isStale||!bb(e))return;const s=T2(d(this,Hn).dataUpdatedAt,e)+1;E(this,Fc,setTimeout(()=>{d(this,Hn).isStale||this.updateResult()},s))},Rb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,Ge)):this.options.refetchInterval)??!1},Nb=function(e){N(this,tt,kb).call(this),E(this,Ja,e),!(nd||Yr(this.options.enabled,d(this,Ge))===!1||!bb(d(this,Ja))||d(this,Ja)===0)&&E(this,Oc,setInterval(()=>{(this.options.refetchIntervalInBackground||XT.isFocused())&&N(this,tt,Vp).call(this)},d(this,Ja)))},Pb=function(){N(this,tt,Ab).call(this),N(this,tt,Nb).call(this,N(this,tt,Rb).call(this))},Mb=function(){d(this,Fc)&&(clearTimeout(d(this,Fc)),E(this,Fc,void 0))},kb=function(){d(this,Oc)&&(clearInterval(d(this,Oc)),E(this,Oc,void 0))},Ib=function(){const e=d(this,ds).getQueryCache().build(d(this,ds),this.options);if(e===d(this,Ge))return;const n=d(this,Ge);E(this,Ge,e),E(this,eg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},F2=function(e){tn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(d(this,Hn))}),d(this,ds).getQueryCache().notify({query:d(this,Ge),type:"observerResultsUpdated"})})},HM);function RH(t,e){return Yr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ZR(t,e){return RH(t,e)||t.state.data!==void 0&&Db(t,e,e.refetchOnMount)}function Db(t,e,n){if(Yr(e.enabled,t)!==!1&&ql(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&QT(t,e)}return!1}function eN(t,e,n,s){return(t!==e||Yr(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&QT(t,n)}function QT(t,e){return Yr(e.enabled,t)!==!1&&t.isStaleByTime(ql(e.staleTime,t))}function NH(t,e){return!g0(t.getCurrentResult(),e)}var Xa,Qa,fs,xo,ca,ex,Lb,GM,PH=(GM=class extends ip{constructor(n,s){super();R(this,ca);R(this,Xa);R(this,Qa);R(this,fs);R(this,xo);E(this,Xa,n),this.setOptions(s),this.bindMethods(),N(this,ca,ex).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const s=this.options;this.options=d(this,Xa).defaultMutationOptions(n),g0(this.options,s)||d(this,Xa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,fs),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&sd(s.mutationKey)!==sd(this.options.mutationKey)?this.reset():((r=d(this,fs))==null?void 0:r.state.status)==="pending"&&d(this,fs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=d(this,fs))==null||n.removeObserver(this)}onMutationUpdate(n){N(this,ca,ex).call(this),N(this,ca,Lb).call(this,n)}getCurrentResult(){return d(this,Qa)}reset(){var n;(n=d(this,fs))==null||n.removeObserver(this),E(this,fs,void 0),N(this,ca,ex).call(this),N(this,ca,Lb).call(this)}mutate(n,s){var r;return E(this,xo,s),(r=d(this,fs))==null||r.removeObserver(this),E(this,fs,d(this,Xa).getMutationCache().build(d(this,Xa),this.options)),d(this,fs).addObserver(this),d(this,fs).execute(n)}},Xa=new WeakMap,Qa=new WeakMap,fs=new WeakMap,xo=new WeakMap,ca=new WeakSet,ex=function(){var s;const n=((s=d(this,fs))==null?void 0:s.state)??L2();E(this,Qa,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Lb=function(n){tn.batch(()=>{var s,r,i,o,a,l,c,u;if(d(this,xo)&&this.hasListeners()){const p=d(this,Qa).variables,g=d(this,Qa).context;(n==null?void 0:n.type)==="success"?((r=(s=d(this,xo)).onSuccess)==null||r.call(s,n.data,p,g),(o=(i=d(this,xo)).onSettled)==null||o.call(i,n.data,null,p,g)):(n==null?void 0:n.type)==="error"&&((l=(a=d(this,xo)).onError)==null||l.call(a,n.error,p,g),(u=(c=d(this,xo)).onSettled)==null||u.call(c,void 0,n.error,p,g))}this.listeners.forEach(p=>{p(d(this,Qa))})})},GM),O2=b.createContext(void 0),ZT=t=>{const e=b.useContext(O2);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},MH=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(O2.Provider,{value:t,children:e})),U2=b.createContext(!1),kH=()=>b.useContext(U2);U2.Provider;function IH(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var DH=b.createContext(IH()),LH=()=>b.useContext(DH),FH=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},OH=t=>{b.useEffect(()=>{t.clearReset()},[t])},UH=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||N2(n,[t.error,s])),VH=t=>{if(t.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...s)=>e(n(...s)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},$H=(t,e)=>t.isLoading&&t.isFetching&&!e,BH=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,tN=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function jH(t,e,n){var p,g,y,x,v;const s=kH(),r=LH(),i=ZT(),o=i.defaultQueryOptions(t);(g=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||g.call(p,o),o._optimisticResults=s?"isRestoring":"optimistic",VH(o),FH(o,r),OH(r);const a=!i.getQueryCache().get(o.queryHash),[l]=b.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),u=!s&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(C=>{const w=u?l.subscribe(tn.batchCalls(C)):Xn;return l.updateResult(),w},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),b.useEffect(()=>{l.setOptions(o)},[o,l]),BH(o,c))throw tN(o,l,r);if(UH({result:c,errorResetBoundary:r,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((x=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||x.call(y,o,c),o.experimental_prefetchInRender&&!nd&&$H(c,s)){const C=a?tN(o,l,r):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;C==null||C.catch(Xn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function V2(t,e){return jH(t,AH)}function nN(t,e){const n=ZT(),[s]=b.useState(()=>new PH(n,t));b.useEffect(()=>{s.setOptions(t)},[s,t]);const r=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(tn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,a)=>{s.mutate(o,a).catch(Xn)},[s]);if(r.error&&N2(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}var eA={};Object.defineProperty(eA,"__esModule",{value:!0});eA.parse=YH;eA.serialize=JH;const zH=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,HH=/^[\u0021-\u003A\u003C-\u007E]*$/,GH=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,qH=/^[\u0020-\u003A\u003D-\u007E]*$/,WH=Object.prototype.toString,KH=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function YH(t,e){const n=new KH,s=t.length;if(s<2)return n;const r=(e==null?void 0:e.decode)||XH;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const a=t.indexOf(";",i),l=a===-1?s:a;if(o>l){i=t.lastIndexOf(";",o-1)+1;continue}const c=sN(t,i,o),u=rN(t,o,c),p=t.slice(c,u);if(n[p]===void 0){let g=sN(t,o+1,l),y=rN(t,l,g);const x=r(t.slice(g,y));n[p]=x}i=l+1}while(i<s);return n}function sN(t,e,n){do{const s=t.charCodeAt(e);if(s!==32&&s!==9)return e}while(++e<n);return n}function rN(t,e,n){for(;e>n;){const s=t.charCodeAt(--e);if(s!==32&&s!==9)return e+1}return n}function JH(t,e,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!zH.test(t))throw new TypeError(`argument name is invalid: ${t}`);const r=s(e);if(!HH.test(r))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+r;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!GH.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!qH.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!QH(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function XH(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function QH(t){return WH.call(t)==="[object Date]"}var iN="popstate";function ZH(t={}){function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Fb("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Hm(r)}return tG(e,n,null,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ri(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eG(){return Math.random().toString(36).substring(2,10)}function oN(t,e){return{usr:t.state,key:t.key,idx:e}}function Fb(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?op(e):e,state:n,key:e&&e.key||s||eG()}}function Hm({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function op(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function tG(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function p(){a="POP";let C=u(),w=C==null?null:C-c;c=C,l&&l({action:a,location:v.location,delta:w})}function g(C,w){a="PUSH";let S=Fb(v.location,C,w);c=u()+1;let _=oN(S,c),T=v.createHref(S);try{o.pushState(_,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(T)}i&&l&&l({action:a,location:v.location,delta:1})}function y(C,w){a="REPLACE";let S=Fb(v.location,C,w);c=u();let _=oN(S,c),T=v.createHref(S);o.replaceState(_,"",T),i&&l&&l({action:a,location:v.location,delta:0})}function x(C){return nG(C)}let v={get action(){return a},get location(){return t(r,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(iN,p),l=C,()=>{r.removeEventListener(iN,p),l=null}},createHref(C){return e(r,C)},createURL:x,encodeLocation(C){let w=x(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:y,go(C){return o.go(C)}};return v}function nG(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Hm(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function $2(t,e,n="/"){return sG(t,e,n,!1)}function sG(t,e,n,s){let r=typeof e=="string"?op(e):e,i=va(r.pathname||"/",n);if(i==null)return null;let o=B2(t);rG(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=mG(i);a=hG(o[l],c,s)}return a}function B2(t,e=[],n=[],s=""){let r=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Tt(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length));let c=ia([s,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Tt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),B2(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:dG(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let l of j2(i.path))r(i,o,l)}),e}function j2(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=j2(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fG(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iG=/^:[\w-]+$/,oG=3,aG=2,lG=1,cG=10,uG=-2,aN=t=>t==="*";function dG(t,e){let n=t.split("/"),s=n.length;return n.some(aN)&&(s+=uG),e&&(s+=aG),n.filter(r=>!aN(r)).reduce((r,i)=>r+(iG.test(i)?oG:i===""?lG:cG),s)}function fG(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function hG(t,e,n=!1){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,u=i==="/"?e:e.slice(i.length)||"/",p=v0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),g=l.route;if(!p&&c&&n&&!s[s.length-1].route.index&&(p=v0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:ia([i,p.pathname]),pathnameBase:xG(ia([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=ia([i,p.pathnameBase]))}return o}function v0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=pG(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((c,{paramName:u,isOptional:p},g)=>{if(u==="*"){let x=a[g]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[g];return p&&!y?c[u]=void 0:c[u]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function pG(t,e=!1,n=!0){ri(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function mG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ri(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function gG(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?op(t):t;return{pathname:n?n.startsWith("/")?n:yG(n,e):e,search:wG(s),hash:CG(r)}}function yG(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function XC(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vG(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tA(t){let e=vG(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function nA(t,e,n,s=!1){let r;typeof t=="string"?r=op(t):(r={...t},Tt(!r.pathname||!r.pathname.includes("?"),XC("?","pathname","search",r)),Tt(!r.pathname||!r.pathname.includes("#"),XC("#","pathname","hash",r)),Tt(!r.search||!r.search.includes("#"),XC("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;r.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=gG(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var ia=t=>t.join("/").replace(/\/\/+/g,"/"),xG=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wG=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CG=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SG(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var z2=["POST","PUT","PATCH","DELETE"];new Set(z2);var bG=["GET",...z2];new Set(bG);var ap=b.createContext(null);ap.displayName="DataRouter";var Ow=b.createContext(null);Ow.displayName="DataRouterState";var H2=b.createContext({isTransitioning:!1});H2.displayName="ViewTransition";var _G=b.createContext(new Map);_G.displayName="Fetchers";var EG=b.createContext(null);EG.displayName="Await";var ai=b.createContext(null);ai.displayName="Navigation";var $y=b.createContext(null);$y.displayName="Location";var Sr=b.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var sA=b.createContext(null);sA.displayName="RouteError";function TG(t,{relative:e}={}){Tt(lp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=b.useContext(ai),{hash:r,pathname:i,search:o}=By(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:ia([n,i])),s.createHref({pathname:a,search:o,hash:r})}function lp(){return b.useContext($y)!=null}function Sa(){return Tt(lp(),"useLocation() may be used only in the context of a <Router> component."),b.useContext($y).location}var G2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q2(t){b.useContext(ai).static||b.useLayoutEffect(t)}function yd(){let{isDataRoute:t}=b.useContext(Sr);return t?jG():AG()}function AG(){Tt(lp(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(ap),{basename:e,navigator:n}=b.useContext(ai),{matches:s}=b.useContext(Sr),{pathname:r}=Sa(),i=JSON.stringify(tA(s)),o=b.useRef(!1);return q2(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(ri(o.current,G2),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=nA(l,JSON.parse(i),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ia([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,r,t])}var RG=b.createContext(null);function NG(t){let e=b.useContext(Sr).outlet;return e&&b.createElement(RG.Provider,{value:t},e)}function PG(){let{matches:t}=b.useContext(Sr),e=t[t.length-1];return e?e.params:{}}function By(t,{relative:e}={}){let{matches:n}=b.useContext(Sr),{pathname:s}=Sa(),r=JSON.stringify(tA(n));return b.useMemo(()=>nA(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function MG(t,e){return W2(t,e)}function W2(t,e,n,s){var w;Tt(lp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=b.useContext(ai),{matches:i}=b.useContext(Sr),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let S=u&&u.path||"";K2(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=Sa(),g;if(e){let S=typeof e=="string"?op(e):e;Tt(c==="/"||((w=S.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let y=g.pathname||"/",x=y;if(c!=="/"){let S=c.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=$2(t,{pathname:x});ri(u||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ri(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=FG(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:ia([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:ia([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,s);return e&&C?b.createElement($y.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function kG(){let t=BG(),e=SG(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,o)}var IG=b.createElement(kG,null),DG=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(Sr.Provider,{value:this.props.routeContext},b.createElement(sA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LG({routeContext:t,match:e,children:n}){let s=b.useContext(ap);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Sr.Provider,{value:t},n)}function FG(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,i=n==null?void 0:n.errors;if(i!=null){let l=r.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Tt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<r.length;l++){let c=r[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:p}=n,g=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||g){o=!0,a>=0?r=r.slice(0,a+1):r=[r[0]];break}}}return r.reduceRight((l,c,u)=>{let p,g=!1,y=null,x=null;n&&(p=i&&c.route.id?i[c.route.id]:void 0,y=c.route.errorElement||IG,o&&(a<0&&u===0?(K2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):a===u&&(g=!0,x=c.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,u+1)),C=()=>{let w;return p?w=y:g?w=x:c.route.Component?w=b.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,b.createElement(LG,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?b.createElement(DG,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:C(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):C()},null)}function rA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OG(t){let e=b.useContext(ap);return Tt(e,rA(t)),e}function UG(t){let e=b.useContext(Ow);return Tt(e,rA(t)),e}function VG(t){let e=b.useContext(Sr);return Tt(e,rA(t)),e}function iA(t){let e=VG(t),n=e.matches[e.matches.length-1];return Tt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function $G(){return iA("useRouteId")}function BG(){var s;let t=b.useContext(sA),e=UG("useRouteError"),n=iA("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function jG(){let{router:t}=OG("useNavigate"),e=iA("useNavigate"),n=b.useRef(!1);return q2(()=>{n.current=!0}),b.useCallback(async(r,i={})=>{ri(n.current,G2),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var lN={};function K2(t,e,n){!e&&!lN[t]&&(lN[t]=!0,ri(!1,n))}b.memo(zG);function zG({routes:t,future:e,state:n}){return W2(t,void 0,n,e)}function HG({to:t,replace:e,state:n,relative:s}){Tt(lp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=b.useContext(ai);ri(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(Sr),{pathname:o}=Sa(),a=yd(),l=nA(t,tA(i),o,s==="path"),c=JSON.stringify(l);return b.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:s})},[a,c,s,e,n]),null}function GG(t){return NG(t.context)}function Md(t){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qG({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){Tt(!lp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof n=="string"&&(n=op(n));let{pathname:l="/",search:c="",hash:u="",state:p=null,key:g="default"}=n,y=b.useMemo(()=>{let x=va(l,o);return x==null?null:{location:{pathname:x,search:c,hash:u,state:p,key:g},navigationType:s}},[o,l,c,u,p,g,s]);return ri(y!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:b.createElement(ai.Provider,{value:a},b.createElement($y.Provider,{children:e,value:y}))}function WG({children:t,location:e}){return MG(Ob(t),e)}function Ob(t,e=[]){let n=[];return b.Children.forEach(t,(s,r)=>{if(!b.isValidElement(s))return;let i=[...e,r];if(s.type===b.Fragment){n.push.apply(n,Ob(s.props.children,i));return}Tt(s.type===Md,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ob(s.props.children,i)),n.push(o)}),n}var tx="get",nx="application/x-www-form-urlencoded";function Uw(t){return t!=null&&typeof t.tagName=="string"}function KG(t){return Uw(t)&&t.tagName.toLowerCase()==="button"}function YG(t){return Uw(t)&&t.tagName.toLowerCase()==="form"}function JG(t){return Uw(t)&&t.tagName.toLowerCase()==="input"}function XG(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QG(t,e){return t.button===0&&(!e||e==="_self")&&!XG(t)}var Ev=null;function ZG(){if(Ev===null)try{new FormData(document.createElement("form"),0),Ev=!1}catch{Ev=!0}return Ev}var eq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function QC(t){return t!=null&&!eq.has(t)?(ri(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nx}"`),null):t}function tq(t,e){let n,s,r,i,o;if(YG(t)){let a=t.getAttribute("action");s=a?va(a,e):null,n=t.getAttribute("method")||tx,r=QC(t.getAttribute("enctype"))||nx,i=new FormData(t)}else if(KG(t)||JG(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(s=l?va(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||tx,r=QC(t.getAttribute("formenctype"))||QC(a.getAttribute("enctype"))||nx,i=new FormData(a,t),!ZG()){let{name:c,type:u,value:p}=t;if(u==="image"){let g=c?`${c}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else c&&i.append(c,p)}}else{if(Uw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tx,s=null,r=nx,o=t}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}function oA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function nq(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sq(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rq(t,e,n){let s=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await nq(i,n);return o.links?o.links():[]}return[]}));return lq(s.flat(1).filter(sq).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function cN(t,e,n,s,r,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var p;let u=s.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function iq(t,e,{includeHydrateFallback:n}={}){return oq(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function oq(t){return[...new Set(t)]}function aq(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function lq(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let i=JSON.stringify(aq(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cq=new Set([100,101,204,205]);function uq(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&va(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Y2(){let t=b.useContext(ap);return oA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dq(){let t=b.useContext(Ow);return oA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var aA=b.createContext(void 0);aA.displayName="FrameworkContext";function J2(){let t=b.useContext(aA);return oA(t,"You must render this element inside a <HydratedRouter> element"),t}function fq(t,e){let n=b.useContext(aA),[s,r]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:p}=e,g=b.useRef(null);b.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=w=>{w.forEach(S=>{o(S.isIntersecting)})},C=new IntersectionObserver(v,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[t]),b.useEffect(()=>{if(s){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[s]);let y=()=>{r(!0)},x=()=>{r(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Ap(a,y),onBlur:Ap(l,x),onMouseEnter:Ap(c,y),onMouseLeave:Ap(u,x),onTouchStart:Ap(p,y)}]:[!1,g,{}]}function Ap(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function hq({page:t,...e}){let{router:n}=Y2(),s=b.useMemo(()=>$2(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?b.createElement(mq,{page:t,matches:s,...e}):null}function pq(t){let{manifest:e,routeModules:n}=J2(),[s,r]=b.useState([]);return b.useEffect(()=>{let i=!1;return rq(t,e,n).then(o=>{i||r(o)}),()=>{i=!0}},[t,e,n]),s}function mq({page:t,matches:e,...n}){let s=Sa(),{manifest:r,routeModules:i}=J2(),{basename:o}=Y2(),{loaderData:a,matches:l}=dq(),c=b.useMemo(()=>cN(t,e,l,r,s,"data"),[t,e,l,r,s]),u=b.useMemo(()=>cN(t,e,l,r,s,"assets"),[t,e,l,r,s]),p=b.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let x=new Set,v=!1;if(e.forEach(w=>{var _;let S=r.routes[w.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===w.route.id)&&w.route.id in a&&((_=i[w.route.id])!=null&&_.shouldRevalidate)||S.hasClientLoader?v=!0:x.add(w.route.id))}),x.size===0)return[];let C=uq(t,o);return v&&x.size>0&&C.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[o,a,s,r,c,e,t,i]),g=b.useMemo(()=>iq(u,r),[u,r]),y=pq(u);return b.createElement(b.Fragment,null,p.map(x=>b.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),g.map(x=>b.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),y.map(({key:x,link:v})=>b.createElement("link",{key:x,...v})))}function gq(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var X2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X2&&(window.__reactRouterVersion="7.6.3")}catch{}function yq({basename:t,children:e,window:n}){let s=b.useRef();s.current==null&&(s.current=ZH({window:n,v5Compat:!0}));let r=s.current,[i,o]=b.useState({action:r.action,location:r.location}),a=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>r.listen(a),[r,a]),b.createElement(qG,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var Q2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hh=b.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p,...g},y){let{basename:x}=b.useContext(ai),v=typeof c=="string"&&Q2.test(c),C,w=!1;if(typeof c=="string"&&v&&(C=c,X2))try{let k=new URL(window.location.href),D=c.startsWith("//")?new URL(k.protocol+c):new URL(c),L=va(D.pathname,x);D.origin===k.origin&&L!=null?c=L+D.search+D.hash:w=!0}catch{ri(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=TG(c,{relative:r}),[_,T,A]=fq(s,g),P=Cq(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:p});function M(k){e&&e(k),k.defaultPrevented||P(k)}let I=b.createElement("a",{...g,...A,href:C||S,onClick:w||i?e:M,ref:gq(y,T),target:l,"data-discover":!v&&n==="render"?"true":void 0});return _&&!v?b.createElement(b.Fragment,null,I,b.createElement(hq,{page:S})):I});Hh.displayName="Link";var vq=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let p=By(o,{relative:c.relative}),g=Sa(),y=b.useContext(Ow),{navigator:x,basename:v}=b.useContext(ai),C=y!=null&&Tq(p)&&a===!0,w=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,S=g.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(S=S.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&v&&(_=va(_,v)||_);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let A=S===w||!r&&S.startsWith(w)&&S.charAt(T)==="/",P=_!=null&&(_===w||!r&&_.startsWith(w)&&_.charAt(w.length)==="/"),M={isActive:A,isPending:P,isTransitioning:C},I=A?e:void 0,k;typeof s=="function"?k=s(M):k=[s,A?"active":null,P?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(M):i;return b.createElement(Hh,{...c,"aria-current":I,className:k,ref:u,style:D,to:o,viewTransition:a},typeof l=="function"?l(M):l)});vq.displayName="NavLink";var xq=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:i,method:o=tx,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:p,...g},y)=>{let x=_q(),v=Eq(a,{relative:c}),C=o.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&Q2.test(a),S=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,A=(T==null?void 0:T.getAttribute("formmethod"))||o;x(T||_.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:r,state:i,relative:c,preventScrollReset:u,viewTransition:p})};return b.createElement("form",{ref:y,method:C,action:v,onSubmit:s?l:S,...g,"data-discover":!w&&t==="render"?"true":void 0})});xq.displayName="Form";function wq(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z2(t){let e=b.useContext(ap);return Tt(e,wq(t)),e}function Cq(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let a=yd(),l=Sa(),c=By(t,{relative:i});return b.useCallback(u=>{if(QG(u,e)){u.preventDefault();let p=n!==void 0?n:Hm(l)===Hm(c);a(t,{replace:p,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[l,a,c,n,s,e,t,r,i,o])}var Sq=0,bq=()=>`__${String(++Sq)}__`;function _q(){let{router:t}=Z2("useSubmit"),{basename:e}=b.useContext(ai),n=$G();return b.useCallback(async(s,r={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=tq(s,e);if(r.navigate===!1){let u=r.fetcherKey||bq();await t.fetch(u,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function Eq(t,{relative:e}={}){let{basename:n}=b.useContext(ai),s=b.useContext(Sr);Tt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...By(t||".",{relative:e})},o=Sa();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let u=a.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ia([n,i.pathname])),Hm(i)}function Tq(t,e={}){let n=b.useContext(H2);Tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Z2("useViewTransitionState"),r=By(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=va(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=va(n.nextLocation.pathname,s)||n.nextLocation.pathname;return v0(r.pathname,o)!=null||v0(r.pathname,i)!=null}[...cq];function ZC(){const t=localStorage.getItem("quiz_io_current_user");return t?JSON.parse(t):null}async function Aq(t){const e={id:`user_${Date.now()}`,email:t.email,name:t.email.split("@")[0]};return localStorage.setItem("quiz_io_current_user",JSON.stringify(e)),!0}async function Rq(t){const e={id:`user_${Date.now()}`,email:t.email,name:t.name};return localStorage.setItem("quiz_io_current_user",JSON.stringify(e)),!0}function Nq(){localStorage.removeItem("quiz_io_current_user")}const eL=b.createContext(void 0);function Pq({children:t}){const[e,n]=b.useState(null),[s,r]=b.useState(!0);b.useEffect(()=>{const y=ZC();n(y),r(!1)},[]);const g={user:e,isAuthenticated:!!e,login:async(y,x)=>{try{r(!0);const v=await Aq({email:y,password:x});if(v){const C=ZC();n(C)}return!!v}catch(v){return console.error("Login error:",v),!1}finally{r(!1)}},signup:async(y,x,v)=>{try{r(!0);const C=await Rq({email:y,password:x,name:v});if(C){const w=ZC();n(w)}return!!C}catch(C){return console.error("Signup error:",C),!1}finally{r(!1)}},logout:()=>{Nq(),n(null)},isLoading:s,signInWithGoogle:async()=>{r(!0);try{await new Promise(x=>setTimeout(x,1e3));const y={id:`google_user_${Date.now()}`,email:"demo@example.com",name:"Demo User",subscription:{plan:"free",status:"active",startDate:new Date().toISOString()},sessionCount:0,createdat:new Date().toISOString(),updatedat:new Date().toISOString(),usage:{monthlySessions:0,monthlyFiles:0,currentMonth:new Date().toISOString().slice(0,7),lastResetDate:new Date().toISOString()}};n(y),localStorage.setItem("quiz_io_current_user",JSON.stringify(y))}catch(y){console.error("Google sign-in error:",y)}finally{r(!1)}},updateSubscription:async(y,x)=>{if(!e)return!1;if(x&&x.trim().toUpperCase()==="BETAX"){const v={...e,subscription:{...e.subscription,plan:"pro",status:"active",startDate:new Date().toISOString()},updatedat:new Date().toISOString()};return n(v),localStorage.setItem("quiz_io_current_user",JSON.stringify(v)),!0}else try{await new Promise(C=>setTimeout(C,1e3));const v={...e,subscription:{...e.subscription,plan:"pro",status:"active",startDate:new Date().toISOString()},updatedat:new Date().toISOString()};return n(v),localStorage.setItem("quiz_io_current_user",JSON.stringify(v)),!0}catch(v){return console.error("Subscription update failed:",v),!1}},checkUsageLimit:y=>{if(!e)return!1;if(e.subscription.plan==="pro")return!0;const x=new Date().toISOString().slice(0,7);if(e.usage.currentMonth!==x){const v={...e,usage:{...e.usage,monthlySessions:0,monthlyFiles:0,currentMonth:x,lastResetDate:new Date().toISOString()}};n(v),localStorage.setItem("quiz_io_current_user",JSON.stringify(v))}switch(y){case"session":return e.usage.monthlySessions<1;case"file":return e.usage.monthlyFiles<1;case"chat":return!1;default:return!1}},incrementUsage:async y=>{if(!e)return;const x={...e,usage:{...e.usage,monthlySessions:y==="session"?e.usage.monthlySessions+1:e.usage.monthlySessions,monthlyFiles:y==="file"?e.usage.monthlyFiles+1:e.usage.monthlyFiles}};n(x),localStorage.setItem("quiz_io_current_user",JSON.stringify(x))}};return m.jsx(eL.Provider,{value:g,children:t})}const li=()=>{const t=b.useContext(eL);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function Mq({redirectTo:t="/"}){const{isAuthenticated:e,isLoading:n}=li();return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e?m.jsx(GG,{}):m.jsx(HG,{to:t,replace:!0})}const kq=IT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),he=b.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},i)=>{const o=s?lD:"button";return m.jsx(o,{className:Ee(kq({variant:e,size:n,className:t})),ref:i,...r})});he.displayName="Button";var jy=t=>t.type==="checkbox",bc=t=>t instanceof Date,Qn=t=>t==null;const tL=t=>typeof t=="object";var $t=t=>!Qn(t)&&!Array.isArray(t)&&tL(t)&&!bc(t),nL=t=>$t(t)&&t.target?jy(t.target)?t.target.checked:t.target.value:t,Iq=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,sL=(t,e)=>t.has(Iq(e)),Dq=t=>{const e=t.constructor&&t.constructor.prototype;return $t(e)&&e.hasOwnProperty("isPrototypeOf")},lA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function yn(t){let e;const n=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(lA&&(t instanceof Blob||s))&&(n||$t(t)))if(e=n?[]:{},!n&&!Dq(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=yn(t[r]));else return t;return e}var Vw=t=>/^\w*$/.test(t),Ut=t=>t===void 0,cA=t=>Array.isArray(t)?t.filter(Boolean):[],uA=t=>cA(t.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(t,e,n)=>{if(!e||!$t(t))return n;const s=(Vw(e)?[e]:uA(e)).reduce((r,i)=>Qn(r)?r:r[i],t);return Ut(s)||s===t?Ut(t[e])?n:t[e]:s},js=t=>typeof t=="boolean",et=(t,e,n)=>{let s=-1;const r=Vw(e)?[e]:uA(e),i=r.length,o=i-1;for(;++s<i;){const a=r[s];let l=n;if(s!==o){const c=t[a];l=$t(c)||Array.isArray(c)?c:isNaN(+r[s+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const x0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Jr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dA=K.createContext(null);dA.displayName="HookFormContext";const $w=()=>K.useContext(dA),Lq=t=>{const{children:e,...n}=t;return K.createElement(dA.Provider,{value:n},e)};var rL=(t,e,n,s=!0)=>{const r={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(r,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Jr.all&&(e._proxyFormState[o]=!s||Jr.all),n&&(n[o]=!0),t[o]}});return r};const fA=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Fq(t){const e=$w(),{control:n=e.control,disabled:s,name:r,exact:i}=t||{},[o,a]=K.useState(n._formState),l=K.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return fA(()=>n._subscribe({name:r,formState:l.current,exact:i,callback:c=>{!s&&a({...n._formState,...c})}}),[r,s,i]),K.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),K.useMemo(()=>rL(o,n,l.current,!1),[o,n])}var zi=t=>typeof t=="string",iL=(t,e,n,s,r)=>zi(t)?(s&&e.watch.add(t),le(n,t,r)):Array.isArray(t)?t.map(i=>(s&&e.watch.add(i),le(n,i))):(s&&(e.watchAll=!0),n);function Oq(t){const e=$w(),{control:n=e.control,name:s,defaultValue:r,disabled:i,exact:o}=t||{},a=K.useRef(r),[l,c]=K.useState(n._getWatch(s,a.current));return fA(()=>n._subscribe({name:s,formState:{values:!0},exact:o,callback:u=>!i&&c(iL(s,n._names,u.values||n._formValues,!1,a.current))}),[s,n,i,o]),K.useEffect(()=>n._removeUnmounted()),l}function Uq(t){const e=$w(),{name:n,disabled:s,control:r=e.control,shouldUnregister:i}=t,o=sL(r._names.array,n),a=Oq({control:r,name:n,defaultValue:le(r._formValues,n,le(r._defaultValues,n,t.defaultValue)),exact:!0}),l=Fq({control:r,name:n,exact:!0}),c=K.useRef(t),u=K.useRef(r.register(n,{...t.rules,value:a,...js(t.disabled)?{disabled:t.disabled}:{}})),p=K.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!le(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!le(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!le(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!le(l.validatingFields,n)},error:{enumerable:!0,get:()=>le(l.errors,n)}}),[l,n]),g=K.useCallback(C=>u.current.onChange({target:{value:nL(C),name:n},type:x0.CHANGE}),[n]),y=K.useCallback(()=>u.current.onBlur({target:{value:le(r._formValues,n),name:n},type:x0.BLUR}),[n,r._formValues]),x=K.useCallback(C=>{const w=le(r._fields,n);w&&C&&(w._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:S=>C.setCustomValidity(S),reportValidity:()=>C.reportValidity()})},[r._fields,n]),v=K.useMemo(()=>({name:n,value:a,...js(s)||l.disabled?{disabled:l.disabled||s}:{},onChange:g,onBlur:y,ref:x}),[n,s,l.disabled,g,y,x,a]);return K.useEffect(()=>{const C=r._options.shouldUnregister||i;r.register(n,{...c.current.rules,...js(c.current.disabled)?{disabled:c.current.disabled}:{}});const w=(S,_)=>{const T=le(r._fields,S);T&&T._f&&(T._f.mount=_)};if(w(n,!0),C){const S=yn(le(r._options.defaultValues,n));et(r._defaultValues,n,S),Ut(le(r._formValues,n))&&et(r._formValues,n,S)}return!o&&r.register(n),()=>{(o?C&&!r._state.action:C)?r.unregister(n):w(n,!1)}},[n,r,o,i]),K.useEffect(()=>{r._setDisabledField({disabled:s,name:n})},[s,n,r]),K.useMemo(()=>({field:v,formState:l,fieldState:p}),[v,l,p])}const Vq=t=>t.render(Uq(t));var oL=(t,e,n,s,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:r||!0}}:{},wm=t=>Array.isArray(t)?t:[t],uN=()=>{let t=[];return{get observers(){return t},next:r=>{for(const i of t)i.next&&i.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(i=>i!==r)}}),unsubscribe:()=>{t=[]}}},Ub=t=>Qn(t)||!tL(t);function $a(t,e){if(Ub(t)||Ub(e))return t===e;if(bc(t)&&bc(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const i=t[r];if(!s.includes(r))return!1;if(r!=="ref"){const o=e[r];if(bc(i)&&bc(o)||$t(i)&&$t(o)||Array.isArray(i)&&Array.isArray(o)?!$a(i,o):i!==o)return!1}}return!0}var gs=t=>$t(t)&&!Object.keys(t).length,hA=t=>t.type==="file",Xr=t=>typeof t=="function",w0=t=>{if(!lA)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},aL=t=>t.type==="select-multiple",pA=t=>t.type==="radio",$q=t=>pA(t)||jy(t),eS=t=>w0(t)&&t.isConnected;function Bq(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=Ut(t)?s++:t[e[s++]];return t}function jq(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ut(t[e]))return!1;return!0}function Yt(t,e){const n=Array.isArray(e)?e:Vw(e)?[e]:uA(e),s=n.length===1?t:Bq(t,n),r=n.length-1,i=n[r];return s&&delete s[i],r!==0&&($t(s)&&gs(s)||Array.isArray(s)&&jq(s))&&Yt(t,n.slice(0,-1)),t}var lL=t=>{for(const e in t)if(Xr(t[e]))return!0;return!1};function C0(t,e={}){const n=Array.isArray(t);if($t(t)||n)for(const s in t)Array.isArray(t[s])||$t(t[s])&&!lL(t[s])?(e[s]=Array.isArray(t[s])?[]:{},C0(t[s],e[s])):Qn(t[s])||(e[s]=!0);return e}function cL(t,e,n){const s=Array.isArray(t);if($t(t)||s)for(const r in t)Array.isArray(t[r])||$t(t[r])&&!lL(t[r])?Ut(e)||Ub(n[r])?n[r]=Array.isArray(t[r])?C0(t[r],[]):{...C0(t[r])}:cL(t[r],Qn(e)?{}:e[r],n[r]):n[r]=!$a(t[r],e[r]);return n}var Rp=(t,e)=>cL(t,e,C0(e));const dN={value:!1,isValid:!1},fN={value:!0,isValid:!0};var uL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ut(t[0].attributes.value)?Ut(t[0].value)||t[0].value===""?fN:{value:t[0].value,isValid:!0}:fN:dN}return dN},dL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>Ut(t)?t:e?t===""?NaN:t&&+t:n&&zi(t)?new Date(t):s?s(t):t;const hN={isValid:!1,value:null};var fL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,hN):hN;function pN(t){const e=t.ref;return hA(e)?e.files:pA(e)?fL(t.refs).value:aL(e)?[...e.selectedOptions].map(({value:n})=>n):jy(e)?uL(t.refs).value:dL(Ut(e.value)?t.ref.value:e.value,t)}var zq=(t,e,n,s)=>{const r={};for(const i of t){const o=le(e,i);o&&et(r,i,o._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:s}},S0=t=>t instanceof RegExp,Np=t=>Ut(t)?t:S0(t)?t.source:$t(t)?S0(t.value)?t.value.source:t.value:t,mN=t=>({isOnSubmit:!t||t===Jr.onSubmit,isOnBlur:t===Jr.onBlur,isOnChange:t===Jr.onChange,isOnAll:t===Jr.all,isOnTouch:t===Jr.onTouched});const gN="AsyncFunction";var Hq=t=>!!t&&!!t.validate&&!!(Xr(t.validate)&&t.validate.constructor.name===gN||$t(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===gN)),Gq=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),yN=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const Cm=(t,e,n,s)=>{for(const r of n||Object.keys(t)){const i=le(t,r);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],r)&&!s)return!0;if(o.ref&&e(o.ref,o.name)&&!s)return!0;if(Cm(a,e))break}else if($t(a)&&Cm(a,e))break}}};function vN(t,e,n){const s=le(t,n);if(s||Vw(n))return{error:s,name:n};const r=n.split(".");for(;r.length;){const i=r.join("."),o=le(e,i),a=le(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};r.pop()}return{name:n}}var qq=(t,e,n,s)=>{n(t);const{name:r,...i}=t;return gs(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!s||Jr.all))},Wq=(t,e,n)=>!t||!e||t===e||wm(t).some(s=>s&&(n?s===e:s.startsWith(e)||e.startsWith(s))),Kq=(t,e,n,s,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?s.isOnBlur:r.isOnBlur)?!t:(n?s.isOnChange:r.isOnChange)?t:!0,Yq=(t,e)=>!cA(le(t,e)).length&&Yt(t,e),Jq=(t,e,n)=>{const s=wm(le(t,n));return et(s,"root",e[n]),et(t,n,s),t},sx=t=>zi(t);function xN(t,e,n="validate"){if(sx(t)||Array.isArray(t)&&t.every(sx)||js(t)&&!t)return{type:n,message:sx(t)?t:"",ref:e}}var Ed=t=>$t(t)&&!S0(t)?t:{value:t,message:""},wN=async(t,e,n,s,r,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:p,max:g,pattern:y,validate:x,name:v,valueAsNumber:C,mount:w}=t._f,S=le(n,v);if(!w||e.has(v))return{};const _=a?a[0]:o,T=U=>{r&&_.reportValidity&&(_.setCustomValidity(js(U)?"":U||""),_.reportValidity())},A={},P=pA(o),M=jy(o),I=P||M,k=(C||hA(o))&&Ut(o.value)&&Ut(S)||w0(o)&&o.value===""||S===""||Array.isArray(S)&&!S.length,D=oL.bind(null,v,s,A),L=(U,G,O,W=lo.maxLength,$=lo.minLength)=>{const z=U?G:O;A[v]={type:U?W:$,message:z,ref:o,...D(U?W:$,z)}};if(i?!Array.isArray(S)||!S.length:l&&(!I&&(k||Qn(S))||js(S)&&!S||M&&!uL(a).isValid||P&&!fL(a).isValid)){const{value:U,message:G}=sx(l)?{value:!!l,message:l}:Ed(l);if(U&&(A[v]={type:lo.required,message:G,ref:_,...D(lo.required,G)},!s))return T(G),A}if(!k&&(!Qn(p)||!Qn(g))){let U,G;const O=Ed(g),W=Ed(p);if(!Qn(S)&&!isNaN(S)){const $=o.valueAsNumber||S&&+S;Qn(O.value)||(U=$>O.value),Qn(W.value)||(G=$<W.value)}else{const $=o.valueAsDate||new Date(S),z=H=>new Date(new Date().toDateString()+" "+H),B=o.type=="time",V=o.type=="week";zi(O.value)&&S&&(U=B?z(S)>z(O.value):V?S>O.value:$>new Date(O.value)),zi(W.value)&&S&&(G=B?z(S)<z(W.value):V?S<W.value:$<new Date(W.value))}if((U||G)&&(L(!!U,O.message,W.message,lo.max,lo.min),!s))return T(A[v].message),A}if((c||u)&&!k&&(zi(S)||i&&Array.isArray(S))){const U=Ed(c),G=Ed(u),O=!Qn(U.value)&&S.length>+U.value,W=!Qn(G.value)&&S.length<+G.value;if((O||W)&&(L(O,U.message,G.message),!s))return T(A[v].message),A}if(y&&!k&&zi(S)){const{value:U,message:G}=Ed(y);if(S0(U)&&!S.match(U)&&(A[v]={type:lo.pattern,message:G,ref:o,...D(lo.pattern,G)},!s))return T(G),A}if(x){if(Xr(x)){const U=await x(S,n),G=xN(U,_);if(G&&(A[v]={...G,...D(lo.validate,G.message)},!s))return T(G.message),A}else if($t(x)){let U={};for(const G in x){if(!gs(U)&&!s)break;const O=xN(await x[G](S,n),_,G);O&&(U={...O,...D(G,O.message)},T(O.message),s&&(A[v]=U))}if(!gs(U)&&(A[v]={ref:_,...U},!s))return A}}return T(!0),A};const Xq={mode:Jr.onSubmit,reValidateMode:Jr.onChange,shouldFocusError:!0};function Qq(t={}){let e={...Xq,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const s={};let r=$t(e.defaultValues)||$t(e.values)?yn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:yn(r),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...u};const g={array:uN(),state:uN()},y=e.criteriaMode===Jr.all,x=F=>j=>{clearTimeout(c),c=setTimeout(F,j)},v=async F=>{if(!e.disabled&&(u.isValid||p.isValid||F)){const j=e.resolver?gs((await M()).errors):await k(s,!0);j!==n.isValid&&g.state.next({isValid:j})}},C=(F,j)=>{!e.disabled&&(u.isValidating||u.validatingFields||p.isValidating||p.validatingFields)&&((F||Array.from(a.mount)).forEach(q=>{q&&(j?et(n.validatingFields,q,j):Yt(n.validatingFields,q))}),g.state.next({validatingFields:n.validatingFields,isValidating:!gs(n.validatingFields)}))},w=(F,j=[],q,oe,ie=!0,ne=!0)=>{if(oe&&q&&!e.disabled){if(o.action=!0,ne&&Array.isArray(le(s,F))){const de=q(le(s,F),oe.argA,oe.argB);ie&&et(s,F,de)}if(ne&&Array.isArray(le(n.errors,F))){const de=q(le(n.errors,F),oe.argA,oe.argB);ie&&et(n.errors,F,de),Yq(n.errors,F)}if((u.touchedFields||p.touchedFields)&&ne&&Array.isArray(le(n.touchedFields,F))){const de=q(le(n.touchedFields,F),oe.argA,oe.argB);ie&&et(n.touchedFields,F,de)}(u.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Rp(r,i)),g.state.next({name:F,isDirty:L(F,j),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else et(i,F,j)},S=(F,j)=>{et(n.errors,F,j),g.state.next({errors:n.errors})},_=F=>{n.errors=F,g.state.next({errors:n.errors,isValid:!1})},T=(F,j,q,oe)=>{const ie=le(s,F);if(ie){const ne=le(i,F,Ut(q)?le(r,F):q);Ut(ne)||oe&&oe.defaultChecked||j?et(i,F,j?ne:pN(ie._f)):O(F,ne),o.mount&&v()}},A=(F,j,q,oe,ie)=>{let ne=!1,de=!1;const ze={name:F};if(!e.disabled){if(!q||oe){(u.isDirty||p.isDirty)&&(de=n.isDirty,n.isDirty=ze.isDirty=L(),ne=de!==ze.isDirty);const at=$a(le(r,F),j);de=!!le(n.dirtyFields,F),at?Yt(n.dirtyFields,F):et(n.dirtyFields,F,!0),ze.dirtyFields=n.dirtyFields,ne=ne||(u.dirtyFields||p.dirtyFields)&&de!==!at}if(q){const at=le(n.touchedFields,F);at||(et(n.touchedFields,F,q),ze.touchedFields=n.touchedFields,ne=ne||(u.touchedFields||p.touchedFields)&&at!==q)}ne&&ie&&g.state.next(ze)}return ne?ze:{}},P=(F,j,q,oe)=>{const ie=le(n.errors,F),ne=(u.isValid||p.isValid)&&js(j)&&n.isValid!==j;if(e.delayError&&q?(l=x(()=>S(F,q)),l(e.delayError)):(clearTimeout(c),l=null,q?et(n.errors,F,q):Yt(n.errors,F)),(q?!$a(ie,q):ie)||!gs(oe)||ne){const de={...oe,...ne&&js(j)?{isValid:j}:{},errors:n.errors,name:F};n={...n,...de},g.state.next(de)}},M=async F=>{C(F,!0);const j=await e.resolver(i,e.context,zq(F||a.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return C(F),j},I=async F=>{const{errors:j}=await M(F);if(F)for(const q of F){const oe=le(j,q);oe?et(n.errors,q,oe):Yt(n.errors,q)}else n.errors=j;return j},k=async(F,j,q={valid:!0})=>{for(const oe in F){const ie=F[oe];if(ie){const{_f:ne,...de}=ie;if(ne){const ze=a.array.has(ne.name),at=ie._f&&Hq(ie._f);at&&u.validatingFields&&C([oe],!0);const ls=await wN(ie,a.disabled,i,y,e.shouldUseNativeValidation&&!j,ze);if(at&&u.validatingFields&&C([oe]),ls[ne.name]&&(q.valid=!1,j))break;!j&&(le(ls,ne.name)?ze?Jq(n.errors,ls,ne.name):et(n.errors,ne.name,ls[ne.name]):Yt(n.errors,ne.name))}!gs(de)&&await k(de,j,q)}}return q.valid},D=()=>{for(const F of a.unMount){const j=le(s,F);j&&(j._f.refs?j._f.refs.every(q=>!eS(q)):!eS(j._f.ref))&&Y(F)}a.unMount=new Set},L=(F,j)=>!e.disabled&&(F&&j&&et(i,F,j),!$a(H(),r)),U=(F,j,q)=>iL(F,a,{...o.mount?i:Ut(j)?r:zi(F)?{[F]:j}:j},q,j),G=F=>cA(le(o.mount?i:r,F,e.shouldUnregister?le(r,F,[]):[])),O=(F,j,q={})=>{const oe=le(s,F);let ie=j;if(oe){const ne=oe._f;ne&&(!ne.disabled&&et(i,F,dL(j,ne)),ie=w0(ne.ref)&&Qn(j)?"":j,aL(ne.ref)?[...ne.ref.options].forEach(de=>de.selected=ie.includes(de.value)):ne.refs?jy(ne.ref)?ne.refs.forEach(de=>{(!de.defaultChecked||!de.disabled)&&(Array.isArray(ie)?de.checked=!!ie.find(ze=>ze===de.value):de.checked=ie===de.value||!!ie)}):ne.refs.forEach(de=>de.checked=de.value===ie):hA(ne.ref)?ne.ref.value="":(ne.ref.value=ie,ne.ref.type||g.state.next({name:F,values:yn(i)})))}(q.shouldDirty||q.shouldTouch)&&A(F,ie,q.shouldTouch,q.shouldDirty,!0),q.shouldValidate&&V(F)},W=(F,j,q)=>{for(const oe in j){if(!j.hasOwnProperty(oe))return;const ie=j[oe],ne=F+"."+oe,de=le(s,ne);(a.array.has(F)||$t(ie)||de&&!de._f)&&!bc(ie)?W(ne,ie,q):O(ne,ie,q)}},$=(F,j,q={})=>{const oe=le(s,F),ie=a.array.has(F),ne=yn(j);et(i,F,ne),ie?(g.array.next({name:F,values:yn(i)}),(u.isDirty||u.dirtyFields||p.isDirty||p.dirtyFields)&&q.shouldDirty&&g.state.next({name:F,dirtyFields:Rp(r,i),isDirty:L(F,ne)})):oe&&!oe._f&&!Qn(ne)?W(F,ne,q):O(F,ne,q),yN(F,a)&&g.state.next({...n}),g.state.next({name:o.mount?F:void 0,values:yn(i)})},z=async F=>{o.mount=!0;const j=F.target;let q=j.name,oe=!0;const ie=le(s,q),ne=at=>{oe=Number.isNaN(at)||bc(at)&&isNaN(at.getTime())||$a(at,le(i,q,at))},de=mN(e.mode),ze=mN(e.reValidateMode);if(ie){let at,ls;const io=j.type?pN(ie._f):nL(F),fi=F.type===x0.BLUR||F.type===x0.FOCUS_OUT,ev=!Gq(ie._f)&&!e.resolver&&!le(n.errors,q)&&!ie._f.deps||Kq(fi,le(n.touchedFields,q),n.isSubmitted,ze,de),dc=yN(q,a,fi);et(i,q,io),fi?(ie._f.onBlur&&ie._f.onBlur(F),l&&l(0)):ie._f.onChange&&ie._f.onChange(F);const hi=A(q,io,fi),tv=!gs(hi)||dc;if(!fi&&g.state.next({name:q,type:F.type,values:yn(i)}),ev)return(u.isValid||p.isValid)&&(e.mode==="onBlur"?fi&&v():fi||v()),tv&&g.state.next({name:q,...dc?{}:hi});if(!fi&&dc&&g.state.next({...n}),e.resolver){const{errors:oo}=await M([q]);if(ne(io),oe){const pC=vN(n.errors,s,q),nv=vN(oo,s,pC.name||q);at=nv.error,q=nv.name,ls=gs(oo)}}else C([q],!0),at=(await wN(ie,a.disabled,i,y,e.shouldUseNativeValidation))[q],C([q]),ne(io),oe&&(at?ls=!1:(u.isValid||p.isValid)&&(ls=await k(s,!0)));oe&&(ie._f.deps&&V(ie._f.deps),P(q,ls,at,hi))}},B=(F,j)=>{if(le(n.errors,j)&&F.focus)return F.focus(),1},V=async(F,j={})=>{let q,oe;const ie=wm(F);if(e.resolver){const ne=await I(Ut(F)?F:ie);q=gs(ne),oe=F?!ie.some(de=>le(ne,de)):q}else F?(oe=(await Promise.all(ie.map(async ne=>{const de=le(s,ne);return await k(de&&de._f?{[ne]:de}:de)}))).every(Boolean),!(!oe&&!n.isValid)&&v()):oe=q=await k(s);return g.state.next({...!zi(F)||(u.isValid||p.isValid)&&q!==n.isValid?{}:{name:F},...e.resolver||!F?{isValid:q}:{},errors:n.errors}),j.shouldFocus&&!oe&&Cm(s,B,F?ie:a.mount),oe},H=F=>{const j={...o.mount?i:r};return Ut(F)?j:zi(F)?le(j,F):F.map(q=>le(j,q))},Q=(F,j)=>({invalid:!!le((j||n).errors,F),isDirty:!!le((j||n).dirtyFields,F),error:le((j||n).errors,F),isValidating:!!le(n.validatingFields,F),isTouched:!!le((j||n).touchedFields,F)}),J=F=>{F&&wm(F).forEach(j=>Yt(n.errors,j)),g.state.next({errors:F?n.errors:{}})},se=(F,j,q)=>{const oe=(le(s,F,{_f:{}})._f||{}).ref,ie=le(n.errors,F)||{},{ref:ne,message:de,type:ze,...at}=ie;et(n.errors,F,{...at,...j,ref:oe}),g.state.next({name:F,errors:n.errors,isValid:!1}),q&&q.shouldFocus&&oe&&oe.focus&&oe.focus()},ye=(F,j)=>Xr(F)?g.state.subscribe({next:q=>F(U(void 0,j),q)}):U(F,j,!0),Me=F=>g.state.subscribe({next:j=>{Wq(F.name,j.name,F.exact)&&qq(j,F.formState||u,so,F.reRenderRoot)&&F.callback({values:{...i},...n,...j})}}).unsubscribe,De=F=>(o.mount=!0,p={...p,...F.formState},Me({...F,formState:p})),Y=(F,j={})=>{for(const q of F?wm(F):a.mount)a.mount.delete(q),a.array.delete(q),j.keepValue||(Yt(s,q),Yt(i,q)),!j.keepError&&Yt(n.errors,q),!j.keepDirty&&Yt(n.dirtyFields,q),!j.keepTouched&&Yt(n.touchedFields,q),!j.keepIsValidating&&Yt(n.validatingFields,q),!e.shouldUnregister&&!j.keepDefaultValue&&Yt(r,q);g.state.next({values:yn(i)}),g.state.next({...n,...j.keepDirty?{isDirty:L()}:{}}),!j.keepIsValid&&v()},_e=({disabled:F,name:j})=>{(js(F)&&o.mount||F||a.disabled.has(j))&&(F?a.disabled.add(j):a.disabled.delete(j))},re=(F,j={})=>{let q=le(s,F);const oe=js(j.disabled)||js(e.disabled);return et(s,F,{...q||{},_f:{...q&&q._f?q._f:{ref:{name:F}},name:F,mount:!0,...j}}),a.mount.add(F),q?_e({disabled:js(j.disabled)?j.disabled:e.disabled,name:F}):T(F,!0,j.value),{...oe?{disabled:j.disabled||e.disabled}:{},...e.progressive?{required:!!j.required,min:Np(j.min),max:Np(j.max),minLength:Np(j.minLength),maxLength:Np(j.maxLength),pattern:Np(j.pattern)}:{},name:F,onChange:z,onBlur:z,ref:ie=>{if(ie){re(F,j),q=le(s,F);const ne=Ut(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,de=$q(ne),ze=q._f.refs||[];if(de?ze.find(at=>at===ne):ne===q._f.ref)return;et(s,F,{_f:{...q._f,...de?{refs:[...ze.filter(eS),ne,...Array.isArray(le(r,F))?[{}]:[]],ref:{type:ne.type,name:F}}:{ref:ne}}}),T(F,!1,void 0,ne)}else q=le(s,F,{}),q._f&&(q._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(sL(a.array,F)&&o.action)&&a.unMount.add(F)}}},we=()=>e.shouldFocusError&&Cm(s,B,a.mount),Te=F=>{js(F)&&(g.state.next({disabled:F}),Cm(s,(j,q)=>{const oe=le(s,q);oe&&(j.disabled=oe._f.disabled||F,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(ie=>{ie.disabled=oe._f.disabled||F}))},0,!1))},Re=(F,j)=>async q=>{let oe;q&&(q.preventDefault&&q.preventDefault(),q.persist&&q.persist());let ie=yn(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:de}=await M();n.errors=ne,ie=de}else await k(s);if(a.disabled.size)for(const ne of a.disabled)et(ie,ne,void 0);if(Yt(n.errors,"root"),gs(n.errors)){g.state.next({errors:{}});try{await F(ie,q)}catch(ne){oe=ne}}else j&&await j({...n.errors},q),we(),setTimeout(we);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gs(n.errors)&&!oe,submitCount:n.submitCount+1,errors:n.errors}),oe)throw oe},At=(F,j={})=>{le(s,F)&&(Ut(j.defaultValue)?$(F,yn(le(r,F))):($(F,j.defaultValue),et(r,F,yn(j.defaultValue))),j.keepTouched||Yt(n.touchedFields,F),j.keepDirty||(Yt(n.dirtyFields,F),n.isDirty=j.defaultValue?L(F,yn(le(r,F))):L()),j.keepError||(Yt(n.errors,F),u.isValid&&v()),g.state.next({...n}))},gn=(F,j={})=>{const q=F?yn(F):r,oe=yn(q),ie=gs(F),ne=ie?r:oe;if(j.keepDefaultValues||(r=q),!j.keepValues){if(j.keepDirtyValues){const de=new Set([...a.mount,...Object.keys(Rp(r,i))]);for(const ze of Array.from(de))le(n.dirtyFields,ze)?et(ne,ze,le(i,ze)):$(ze,le(ne,ze))}else{if(lA&&Ut(F))for(const de of a.mount){const ze=le(s,de);if(ze&&ze._f){const at=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(w0(at)){const ls=at.closest("form");if(ls){ls.reset();break}}}}for(const de of a.mount)$(de,le(ne,de))}i=yn(ne),g.array.next({values:{...ne}}),g.state.next({values:{...ne}})}a={mount:j.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!j.keepIsValid||!!j.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:j.keepSubmitCount?n.submitCount:0,isDirty:ie?!1:j.keepDirty?n.isDirty:!!(j.keepDefaultValues&&!$a(F,r)),isSubmitted:j.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ie?{}:j.keepDirtyValues?j.keepDefaultValues&&i?Rp(r,i):n.dirtyFields:j.keepDefaultValues&&F?Rp(r,F):j.keepDirty?n.dirtyFields:{},touchedFields:j.keepTouched?n.touchedFields:{},errors:j.keepErrors?n.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ui=(F,j)=>gn(Xr(F)?F(i):F,j),di=(F,j={})=>{const q=le(s,F),oe=q&&q._f;if(oe){const ie=oe.refs?oe.refs[0]:oe.ref;ie.focus&&(ie.focus(),j.shouldSelect&&Xr(ie.select)&&ie.select())}},so=F=>{n={...n,...F}},ro={control:{register:re,unregister:Y,getFieldState:Q,handleSubmit:Re,setError:se,_subscribe:Me,_runSchema:M,_focusError:we,_getWatch:U,_getDirty:L,_setValid:v,_setFieldArray:w,_setDisabledField:_e,_setErrors:_,_getFieldArray:G,_reset:gn,_resetDefaultValues:()=>Xr(e.defaultValues)&&e.defaultValues().then(F=>{ui(F,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Te,_subjects:g,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(F){o=F},get _defaultValues(){return r},get _names(){return a},set _names(F){a=F},get _formState(){return n},get _options(){return e},set _options(F){e={...e,...F}}},subscribe:De,trigger:V,register:re,handleSubmit:Re,watch:ye,setValue:$,getValues:H,reset:ui,resetField:At,clearErrors:J,unregister:Y,setError:se,setFocus:di,getFieldState:Q};return{...ro,formControl:ro}}function hL(t={}){const e=K.useRef(void 0),n=K.useRef(void 0),[s,r]=K.useState({isDirty:!1,isValidating:!1,isLoading:Xr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Xr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!Xr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Qq(t);e.current={...a,formState:s}}const i=e.current.control;return i._options=t,fA(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>r({...i._formState}),reRenderRoot:!0});return r(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),K.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),K.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),K.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),K.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),K.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),K.useEffect(()=>{t.values&&!$a(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,r(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),K.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=rL(s,i),e.current}const CN=(t,e,n)=>{if(t&&"reportValidity"in t){const s=le(n,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},pL=(t,e)=>{for(const n in e.fields){const s=e.fields[n];s&&s.ref&&"reportValidity"in s.ref?CN(s.ref,n,t):s.refs&&s.refs.forEach(r=>CN(r,n,t))}},Zq=(t,e)=>{e.shouldUseNativeValidation&&pL(t,e);const n={};for(const s in t){const r=le(e.fields,s),i=Object.assign(t[s]||{},{ref:r&&r.ref});if(eW(e.names||Object.keys(t),s)){const o=Object.assign({},le(n,s));et(o,"root",i),et(n,s,o)}else et(n,s,i)}return n},eW=(t,e)=>t.some(n=>n.startsWith(e+"."));var tW=function(t,e){for(var n={};t.length;){var s=t[0],r=s.code,i=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var a=s.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(p){return t.push(p)})}),e){var l=n[o].types,c=l&&l[s.code];n[o]=oL(o,e,n,r,c?[].concat(c,s.message):s.message)}t.shift()}return n},mL=function(t,e,n){return n===void 0&&(n={}),function(s,r,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(c){return i.shouldUseNativeValidation&&pL({},i),{errors:{},values:n.raw?s:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:Zq(tW(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Qe;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const i={};for(const o of r)i[o]=o;return i},t.getValidEnumValues=r=>{const i=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of i)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(i){return r[i]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.push(o);return i},t.find=(r,i)=>{for(const o of r)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,i=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(Qe||(Qe={}));var SN;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(SN||(SN={}));const ge=Qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oa=t=>{switch(typeof t){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return Number.isNaN(t)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(t)?ge.array:t===null?ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ge.promise:typeof Map<"u"&&t instanceof Map?ge.map:typeof Set<"u"&&t instanceof Set?ge.set:typeof Date<"u"&&t instanceof Date?ge.date:ge.object;default:return ge.unknown}},ee=Qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let a=s,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),s}static assert(e){if(!(e instanceof xa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}xa.create=t=>new xa(t);const Vb=(t,e)=>{let n;switch(t.code){case ee.invalid_type:t.received===ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Qe.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${Qe.joinValues(t.keys,", ")}`;break;case ee.invalid_union:n="Invalid input";break;case ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Qe.joinValues(t.options)}`;break;case ee.invalid_enum_value:n=`Invalid enum value. Expected ${Qe.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:n="Invalid function arguments";break;case ee.invalid_return_type:n="Invalid function return type";break;case ee.invalid_date:n="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Qe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ee.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ee.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ee.custom:n="Invalid input";break;case ee.invalid_intersection_types:n="Intersection results could not be merged";break;case ee.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:n="Number must be finite";break;default:n=e.defaultError,Qe.assertNever(t)}return{message:n}};let nW=Vb;function sW(){return nW}const rW=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,i=[...n,...r.path||[]],o={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let a="";const l=s.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:i,message:a}};function ce(t,e){const n=sW(),s=rW({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Vb?void 0:Vb].filter(r=>!!r)});t.common.issues.push(s)}class ss{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Pe;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const i=await r.key,o=await r.value;s.push({key:i,value:o})}return ss.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:i,value:o}=r;if(i.status==="aborted"||o.status==="aborted")return Pe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}}const Pe=Object.freeze({status:"aborted"}),$p=t=>({status:"dirty",value:t}),br=t=>({status:"valid",value:t}),bN=t=>t.status==="aborted",_N=t=>t.status==="dirty",Gh=t=>t.status==="valid",b0=t=>typeof Promise<"u"&&t instanceof Promise;var ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));class Zi{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const EN=(t,e)=>{if(Gh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xa(t.common.issues);return this._error=n,this._error}}};function $e(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??s??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class We{get description(){return this._def.description}_getType(e){return Oa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ss,ctx:{common:e.parent.common,data:e.data,parsedType:Oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(b0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)},r=this._parseSync({data:e,path:s.path,parent:s});return EN(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Gh(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(r=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Gh(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)},r=this._parse({data:e,path:s.path,parent:s}),i=await(b0(r)?r:Promise.resolve(r));return EN(s,i)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,i)=>{const o=e(r),a=()=>i.addIssue({code:ee.custom,...s(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new Kh({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Wl.create(this,this._def)}nullable(){return Yh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ji.create(this)}promise(){return R0.create(this,this._def)}or(e){return E0.create([this,e],this._def)}and(e){return T0.create(this,e,this._def)}transform(e){return new Kh({...$e(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new zb({...$e(this._def),innerType:this,defaultValue:n,typeName:Ne.ZodDefault})}brand(){return new AW({typeName:Ne.ZodBranded,type:this,...$e(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Hb({...$e(this._def),innerType:this,catchValue:n,typeName:Ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return mA.create(this,e)}readonly(){return Gb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const iW=/^c[^\s-]{8,}$/i,oW=/^[0-9a-z]+$/,aW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cW=/^[a-z0-9_-]{21}$/i,uW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,dW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let tS;const pW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wW=new RegExp(`^${gL}$`);function yL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function CW(t){return new RegExp(`^${yL(t)}$`)}function SW(t){let e=`${gL}T${yL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function bW(t,e){return!!((e==="v4"||!e)&&pW.test(t)||(e==="v6"||!e)&&gW.test(t))}function _W(t,e){if(!uW.test(t))return!1;try{const[n]=t.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function EW(t,e){return!!((e==="v4"||!e)&&mW.test(t)||(e==="v6"||!e)&&yW.test(t))}class Hi extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.string,received:i.parsedType}),Pe}const s=new ss;let r;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ce(r,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ce(r,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")fW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"email",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")tS||(tS=new RegExp(hW,"u")),tS.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"emoji",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")lW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"uuid",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")cW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"nanoid",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")iW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cuid",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")oW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cuid2",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")aW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"ulid",code:ee.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ce(r,{validation:"url",code:ee.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"regex",code:ee.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?SW(i).test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?wW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?CW(i).test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?dW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"duration",code:ee.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?bW(e.data,i.version)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"ip",code:ee.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?_W(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"jwt",code:ee.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?EW(e.data,i.version)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cidr",code:ee.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?vW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"base64",code:ee.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?xW.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"base64url",code:ee.invalid_string,message:i.message}),s.dirty()):Qe.assertNever(i);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:ee.invalid_string,...ve.errToObj(s)})}_addCheck(e){return new Hi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ve.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ve.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ve.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ve.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ve.errToObj(n)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hi.create=t=>new Hi({checks:[],typeName:Ne.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...$e(t)});function TW(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,i=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return i%o/10**r}class rd extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.number,received:i.parsedType}),Pe}let s;const r=new ss;for(const i of this._def.checks)i.kind==="int"?Qe.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?TW(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.not_finite,message:i.message}),r.dirty()):Qe.assertNever(i);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ve.toString(n))}setLimit(e,n,s,r){return new rd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ve.toString(r)}]})}_addCheck(e){return new rd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}rd.create=t=>new rd({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class id extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ge.bigint)return this._getInvalidInput(e);let s;const r=new ss;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):Qe.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ce(n,{code:ee.invalid_type,expected:ge.bigint,received:n.parsedType}),Pe}gte(e,n){return this.setLimit("min",e,!0,ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ve.toString(n))}setLimit(e,n,s,r){return new id({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ve.toString(r)}]})}_addCheck(e){return new id({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}id.create=t=>new id({checks:[],typeName:Ne.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...$e(t)});class _0 extends We{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.boolean,received:s.parsedType}),Pe}return br(e.data)}}_0.create=t=>new _0({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$e(t)});class qh extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.date,received:i.parsedType}),Pe}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_date}),Pe}const s=new ss;let r;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Qe.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}qh.create=t=>new qh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...$e(t)});class TN extends We{_parse(e){if(this._getType(e)!==ge.symbol){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.symbol,received:s.parsedType}),Pe}return br(e.data)}}TN.create=t=>new TN({typeName:Ne.ZodSymbol,...$e(t)});class AN extends We{_parse(e){if(this._getType(e)!==ge.undefined){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.undefined,received:s.parsedType}),Pe}return br(e.data)}}AN.create=t=>new AN({typeName:Ne.ZodUndefined,...$e(t)});class RN extends We{_parse(e){if(this._getType(e)!==ge.null){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.null,received:s.parsedType}),Pe}return br(e.data)}}RN.create=t=>new RN({typeName:Ne.ZodNull,...$e(t)});class NN extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return br(e.data)}}NN.create=t=>new NN({typeName:Ne.ZodAny,...$e(t)});class $b extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return br(e.data)}}$b.create=t=>new $b({typeName:Ne.ZodUnknown,...$e(t)});class ec extends We{_parse(e){const n=this._getOrReturnCtx(e);return ce(n,{code:ee.invalid_type,expected:ge.never,received:n.parsedType}),Pe}}ec.create=t=>new ec({typeName:Ne.ZodNever,...$e(t)});class PN extends We{_parse(e){if(this._getType(e)!==ge.undefined){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.void,received:s.parsedType}),Pe}return br(e.data)}}PN.create=t=>new PN({typeName:Ne.ZodVoid,...$e(t)});class Ji extends We{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==ge.array)return ce(n,{code:ee.invalid_type,expected:ge.array,received:n.parsedType}),Pe;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ce(n,{code:o?ee.too_big:ee.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ce(n,{code:ee.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ce(n,{code:ee.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Zi(n,o,n.path,a)))).then(o=>ss.mergeArray(s,o));const i=[...n.data].map((o,a)=>r.type._parseSync(new Zi(n,o,n.path,a)));return ss.mergeArray(s,i)}get element(){return this._def.type}min(e,n){return new Ji({...this._def,minLength:{value:e,message:ve.toString(n)}})}max(e,n){return new Ji({...this._def,maxLength:{value:e,message:ve.toString(n)}})}length(e,n){return new Ji({...this._def,exactLength:{value:e,message:ve.toString(n)}})}nonempty(e){return this.min(1,e)}}Ji.create=(t,e)=>new Ji({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...$e(e)});function kd(t){if(t instanceof Ht){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=Wl.create(kd(s))}return new Ht({...t._def,shape:()=>e})}else return t instanceof Ji?new Ji({...t._def,type:kd(t.element)}):t instanceof Wl?Wl.create(kd(t.unwrap())):t instanceof Yh?Yh.create(kd(t.unwrap())):t instanceof od?od.create(t.items.map(e=>kd(e))):t}class Ht extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Qe.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ge.object){const c=this._getOrReturnCtx(e);return ce(c,{code:ee.invalid_type,expected:ge.object,received:c.parsedType}),Pe}const{status:s,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ec&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],p=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Zi(r,p,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof ec){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(ce(r,{code:ee.unrecognized_keys,keys:a}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const p=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Zi(r,p,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const p=await u.key,g=await u.value;c.push({key:p,value:g,alwaysSet:u.alwaysSet})}return c}).then(c=>ss.mergeObjectSync(s,c)):ss.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new Ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var i,o;const r=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:ve.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Ht({...this._def,unknownKeys:"strip"})}passthrough(){return new Ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ht({...this._def,catchall:e})}pick(e){const n={};for(const s of Qe.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new Ht({...this._def,shape:()=>n})}omit(e){const n={};for(const s of Qe.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new Ht({...this._def,shape:()=>n})}deepPartial(){return kd(this)}partial(e){const n={};for(const s of Qe.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new Ht({...this._def,shape:()=>n})}required(e){const n={};for(const s of Qe.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Wl;)i=i._def.innerType;n[s]=i}return new Ht({...this._def,shape:()=>n})}keyof(){return vL(Qe.objectKeys(this.shape))}}Ht.create=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strip",catchall:ec.create(),typeName:Ne.ZodObject,...$e(e)});Ht.strictCreate=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strict",catchall:ec.create(),typeName:Ne.ZodObject,...$e(e)});Ht.lazycreate=(t,e)=>new Ht({shape:t,unknownKeys:"strip",catchall:ec.create(),typeName:Ne.ZodObject,...$e(e)});class E0 extends We{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xa(a.ctx.common.issues));return ce(n,{code:ee.invalid_union,unionErrors:o}),Pe}if(n.common.async)return Promise.all(s.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let i;const o=[];for(const l of s){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new xa(l));return ce(n,{code:ee.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}E0.create=(t,e)=>new E0({options:t,typeName:Ne.ZodUnion,...$e(e)});function Bb(t,e){const n=Oa(t),s=Oa(e);if(t===e)return{valid:!0,data:t};if(n===ge.object&&s===ge.object){const r=Qe.objectKeys(e),i=Qe.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=Bb(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ge.array&&s===ge.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=Bb(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===ge.date&&s===ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class T0 extends We{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(i,o)=>{if(bN(i)||bN(o))return Pe;const a=Bb(i.value,o.value);return a.valid?((_N(i)||_N(o))&&n.dirty(),{status:n.value,value:a.data}):(ce(s,{code:ee.invalid_intersection_types}),Pe)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>r(i,o)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}T0.create=(t,e,n)=>new T0({left:t,right:e,typeName:Ne.ZodIntersection,...$e(n)});class od extends We{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ge.array)return ce(s,{code:ee.invalid_type,expected:ge.array,received:s.parsedType}),Pe;if(s.data.length<this._def.items.length)return ce(s,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&s.data.length>this._def.items.length&&(ce(s,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...s.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Zi(s,o,s.path,a)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>ss.mergeArray(n,o)):ss.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new od({...this._def,rest:e})}}od.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new od({items:t,typeName:Ne.ZodTuple,rest:null,...$e(e)})};class A0 extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ge.object)return ce(s,{code:ee.invalid_type,expected:ge.object,received:s.parsedType}),Pe;const r=[],i=this._def.keyType,o=this._def.valueType;for(const a in s.data)r.push({key:i._parse(new Zi(s,a,s.path,a)),value:o._parse(new Zi(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?ss.mergeObjectAsync(n,r):ss.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof We?new A0({keyType:e,valueType:n,typeName:Ne.ZodRecord,...$e(s)}):new A0({keyType:Hi.create(),valueType:e,typeName:Ne.ZodRecord,...$e(n)})}}class MN extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ge.map)return ce(s,{code:ee.invalid_type,expected:ge.map,received:s.parsedType}),Pe;const r=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([a,l],c)=>({key:r._parse(new Zi(s,a,s.path,[c,"key"])),value:i._parse(new Zi(s,l,s.path,[c,"value"]))}));if(s.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}MN.create=(t,e,n)=>new MN({valueType:e,keyType:t,typeName:Ne.ZodMap,...$e(n)});class Gm extends We{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ge.set)return ce(s,{code:ee.invalid_type,expected:ge.set,received:s.parsedType}),Pe;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ce(s,{code:ee.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ce(s,{code:ee.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Pe;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...s.data.values()].map((l,c)=>i._parse(new Zi(s,l,s.path,c)));return s.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Gm({...this._def,minSize:{value:e,message:ve.toString(n)}})}max(e,n){return new Gm({...this._def,maxSize:{value:e,message:ve.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Gm.create=(t,e)=>new Gm({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...$e(e)});class jb extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jb.create=(t,e)=>new jb({getter:t,typeName:Ne.ZodLazy,...$e(e)});class kN extends We{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ce(n,{received:n.data,code:ee.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}kN.create=(t,e)=>new kN({value:t,typeName:Ne.ZodLiteral,...$e(e)});function vL(t,e){return new Wh({values:t,typeName:Ne.ZodEnum,...$e(e)})}class Wh extends We{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return ce(n,{expected:Qe.joinValues(s),received:n.parsedType,code:ee.invalid_type}),Pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return ce(n,{received:n.data,code:ee.invalid_enum_value,options:s}),Pe}return br(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Wh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Wh.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}Wh.create=vL;class IN extends We{_parse(e){const n=Qe.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ge.string&&s.parsedType!==ge.number){const r=Qe.objectValues(n);return ce(s,{expected:Qe.joinValues(r),received:s.parsedType,code:ee.invalid_type}),Pe}if(this._cache||(this._cache=new Set(Qe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Qe.objectValues(n);return ce(s,{received:s.data,code:ee.invalid_enum_value,options:r}),Pe}return br(e.data)}get enum(){return this._def.values}}IN.create=(t,e)=>new IN({values:t,typeName:Ne.ZodNativeEnum,...$e(e)});class R0 extends We{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.promise&&n.common.async===!1)return ce(n,{code:ee.invalid_type,expected:ge.promise,received:n.parsedType}),Pe;const s=n.parsedType===ge.promise?n.data:Promise.resolve(n.data);return br(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}R0.create=(t,e)=>new R0({type:t,typeName:Ne.ZodPromise,...$e(e)});class Kh extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:o=>{ce(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const o=r.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Pe;const l=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return l.status==="aborted"?Pe:l.status==="dirty"||n.value==="dirty"?$p(l.value):l});{if(n.value==="aborted")return Pe;const a=this._def.schema._parseSync({data:o,path:s.path,parent:s});return a.status==="aborted"?Pe:a.status==="dirty"||n.value==="dirty"?$p(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Gh(o))return Pe;const a=r.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Gh(o)?Promise.resolve(r.transform(o.value,i)).then(a=>({status:n.value,value:a})):Pe);Qe.assertNever(r)}}Kh.create=(t,e,n)=>new Kh({schema:t,typeName:Ne.ZodEffects,effect:e,...$e(n)});Kh.createWithPreprocess=(t,e,n)=>new Kh({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...$e(n)});class Wl extends We{_parse(e){return this._getType(e)===ge.undefined?br(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wl.create=(t,e)=>new Wl({innerType:t,typeName:Ne.ZodOptional,...$e(e)});class Yh extends We{_parse(e){return this._getType(e)===ge.null?br(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yh.create=(t,e)=>new Yh({innerType:t,typeName:Ne.ZodNullable,...$e(e)});class zb extends We{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===ge.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}zb.create=(t,e)=>new zb({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$e(e)});class Hb extends We{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return b0(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xa(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new xa(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Hb.create=(t,e)=>new Hb({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$e(e)});class DN extends We{_parse(e){if(this._getType(e)!==ge.nan){const s=this._getOrReturnCtx(e);return ce(s,{code:ee.invalid_type,expected:ge.nan,received:s.parsedType}),Pe}return{status:"valid",value:e.data}}}DN.create=t=>new DN({typeName:Ne.ZodNaN,...$e(t)});class AW extends We{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class mA extends We{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Pe:i.status==="dirty"?(n.dirty(),$p(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Pe:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new mA({in:e,out:n,typeName:Ne.ZodPipeline})}}class Gb extends We{_parse(e){const n=this._def.innerType._parse(e),s=r=>(Gh(r)&&(r.value=Object.freeze(r.value)),r);return b0(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}Gb.create=(t,e)=>new Gb({innerType:t,typeName:Ne.ZodReadonly,...$e(e)});var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const zs=Hi.create,LN=rd.create;id.create;const RW=_0.create;qh.create;const FN=$b.create;ec.create;const Bp=Ji.create,gA=Ht.create,NW=E0.create;T0.create;od.create;const PW=A0.create,MW=jb.create,kW=Wh.create;R0.create;Wl.create;Yh.create;const Td={string:t=>Hi.create({...t,coerce:!0}),number:t=>rd.create({...t,coerce:!0}),boolean:t=>_0.create({...t,coerce:!0}),bigint:t=>id.create({...t,coerce:!0}),date:t=>qh.create({...t,coerce:!0})},pr=b.forwardRef(({className:t,type:e,...n},s)=>m.jsx("input",{type:e,className:Ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n}));pr.displayName="Input";var nS="focusScope.autoFocusOnMount",sS="focusScope.autoFocusOnUnmount",ON={bubbles:!1,cancelable:!0},IW="FocusScope",Bw=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),c=_s(r),u=_s(i),p=b.useRef(null),g=Oe(e,v=>l(v)),y=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let v=function(_){if(y.paused||!a)return;const T=_.target;a.contains(T)?p.current=T:Ia(p.current,{select:!0})},C=function(_){if(y.paused||!a)return;const T=_.relatedTarget;T!==null&&(a.contains(T)||Ia(p.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&Ia(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",C);const S=new MutationObserver(w);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",C),S.disconnect()}}},[s,a,y.paused]),b.useEffect(()=>{if(a){VN.add(y);const v=document.activeElement;if(!a.contains(v)){const w=new CustomEvent(nS,ON);a.addEventListener(nS,c),a.dispatchEvent(w),w.defaultPrevented||(DW(VW(xL(a)),{select:!0}),document.activeElement===v&&Ia(a))}return()=>{a.removeEventListener(nS,c),setTimeout(()=>{const w=new CustomEvent(sS,ON);a.addEventListener(sS,u),a.dispatchEvent(w),w.defaultPrevented||Ia(v??document.body,{select:!0}),a.removeEventListener(sS,u),VN.remove(y)},0)}}},[a,c,u,y]);const x=b.useCallback(v=>{if(!n&&!s||y.paused)return;const C=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(C&&w){const S=v.currentTarget,[_,T]=LW(S);_&&T?!v.shiftKey&&w===T?(v.preventDefault(),n&&Ia(_,{select:!0})):v.shiftKey&&w===_&&(v.preventDefault(),n&&Ia(T,{select:!0})):w===S&&v.preventDefault()}},[n,s,y.paused]);return m.jsx(xe.div,{tabIndex:-1,...o,ref:g,onKeyDown:x})});Bw.displayName=IW;function DW(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(Ia(s,{select:e}),document.activeElement!==n)return}function LW(t){const e=xL(t),n=UN(e,t),s=UN(e.reverse(),t);return[n,s]}function xL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function UN(t,e){for(const n of t)if(!FW(n,{upTo:e}))return n}function FW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OW(t){return t instanceof HTMLInputElement&&"select"in t}function Ia(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&OW(t)&&e&&t.select()}}var VN=UW();function UW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=$N(t,e),t.unshift(e)},remove(e){var n;t=$N(t,e),(n=t[0])==null||n.resume()}}}function $N(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function VW(t){return t.filter(e=>e.tagName!=="A")}var rS=0;function yA(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BN()),document.body.insertAdjacentElement("beforeend",t[1]??BN()),rS++,()=>{rS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),rS--}},[])}function BN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $i=function(){return $i=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$i.apply(this,arguments)};function wL(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function $W(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var rx="right-scroll-bar-position",ix="width-before-scroll-bar",BW="with-scroll-bars-hidden",jW="--removed-body-scroll-bar-size";function iS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function zW(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var HW=typeof window<"u"?b.useLayoutEffect:b.useEffect,jN=new WeakMap;function GW(t,e){var n=zW(null,function(s){return t.forEach(function(r){return iS(r,s)})});return HW(function(){var s=jN.get(n);if(s){var r=new Set(s),i=new Set(t),o=n.current;r.forEach(function(a){i.has(a)||iS(a,null)}),i.forEach(function(a){r.has(a)||iS(a,o)})}jN.set(n,t)},[t]),n}function qW(t){return t}function WW(t,e){e===void 0&&(e=qW);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,s);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function KW(t){t===void 0&&(t={});var e=WW(null);return e.options=$i({async:!0,ssr:!1},t),e}var CL=function(t){var e=t.sideCar,n=wL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,$i({},n))};CL.isSideCarExport=!0;function YW(t,e){return t.useMedium(e),CL}var SL=KW(),oS=function(){},jw=b.forwardRef(function(t,e){var n=b.useRef(null),s=b.useState({onScrollCapture:oS,onWheelCapture:oS,onTouchMoveCapture:oS}),r=s[0],i=s[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,p=t.shards,g=t.sideCar,y=t.noRelative,x=t.noIsolation,v=t.inert,C=t.allowPinchZoom,w=t.as,S=w===void 0?"div":w,_=t.gapMode,T=wL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,P=GW([n,e]),M=$i($i({},T),r);return b.createElement(b.Fragment,null,u&&b.createElement(A,{sideCar:SL,removeScrollBar:c,shards:p,noRelative:y,noIsolation:x,inert:v,setCallbacks:i,allowPinchZoom:!!C,lockRef:n,gapMode:_}),o?b.cloneElement(b.Children.only(a),$i($i({},M),{ref:P})):b.createElement(S,$i({},M,{className:l,ref:P}),a))});jw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jw.classNames={fullWidth:ix,zeroRight:rx};var JW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JW();return e&&t.setAttribute("nonce",e),t}function QW(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ZW(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var e8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=XW())&&(QW(e,n),ZW(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},t8=function(){var t=e8();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},bL=function(){var t=t8(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},n8={left:0,top:0,right:0,gap:0},aS=function(t){return parseInt(t||"",10)||0},s8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[aS(n),aS(s),aS(r)]},r8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return n8;var e=s8(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},i8=bL(),ff="data-scroll-locked",o8=function(t,e,n,s){var r=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(BW,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(ff,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rx,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(ix,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(rx," .").concat(rx,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(ix," .").concat(ix,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ff,`] {
    `).concat(jW,": ").concat(a,`px;
  }
`)},zN=function(){var t=parseInt(document.body.getAttribute(ff)||"0",10);return isFinite(t)?t:0},a8=function(){b.useEffect(function(){return document.body.setAttribute(ff,(zN()+1).toString()),function(){var t=zN()-1;t<=0?document.body.removeAttribute(ff):document.body.setAttribute(ff,t.toString())}},[])},l8=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;a8();var i=b.useMemo(function(){return r8(r)},[r]);return b.createElement(i8,{styles:o8(i,!e,r,n?"":"!important")})},qb=!1;if(typeof window<"u")try{var Tv=Object.defineProperty({},"passive",{get:function(){return qb=!0,!0}});window.addEventListener("test",Tv,Tv),window.removeEventListener("test",Tv,Tv)}catch{qb=!1}var Ad=qb?{passive:!1}:!1,c8=function(t){return t.tagName==="TEXTAREA"},_L=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!c8(t)&&n[e]==="visible")},u8=function(t){return _L(t,"overflowY")},d8=function(t){return _L(t,"overflowX")},HN=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=EL(t,s);if(r){var i=TL(t,s),o=i[1],a=i[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},f8=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},h8=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},EL=function(t,e){return t==="v"?u8(e):d8(e)},TL=function(t,e){return t==="v"?f8(e):h8(e)},p8=function(t,e){return t==="h"&&e==="rtl"?-1:1},m8=function(t,e,n,s,r){var i=p8(t,window.getComputedStyle(e).direction),o=i*s,a=n.target,l=e.contains(a),c=!1,u=o>0,p=0,g=0;do{if(!a)break;var y=TL(t,a),x=y[0],v=y[1],C=y[2],w=v-C-i*x;(x||w)&&EL(t,a)&&(p+=w,g+=x);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(p)<1||!u&&Math.abs(g)<1)&&(c=!0),c},Av=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},GN=function(t){return[t.deltaX,t.deltaY]},qN=function(t){return t&&"current"in t?t.current:t},g8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},y8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},v8=0,Rd=[];function x8(t){var e=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),r=b.useState(v8++)[0],i=b.useState(bL)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var v=$W([t.lockRef.current],(t.shards||[]).map(qN),!0).filter(Boolean);return v.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(v,C){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=Av(v),S=n.current,_="deltaX"in v?v.deltaX:S[0]-w[0],T="deltaY"in v?v.deltaY:S[1]-w[1],A,P=v.target,M=Math.abs(_)>Math.abs(T)?"h":"v";if("touches"in v&&M==="h"&&P.type==="range")return!1;var I=HN(M,P);if(!I)return!0;if(I?A=M:(A=M==="v"?"h":"v",I=HN(M,P)),!I)return!1;if(!s.current&&"changedTouches"in v&&(_||T)&&(s.current=A),!A)return!0;var k=s.current||A;return m8(k,C,v,k==="h"?_:T)},[]),l=b.useCallback(function(v){var C=v;if(!(!Rd.length||Rd[Rd.length-1]!==i)){var w="deltaY"in C?GN(C):Av(C),S=e.current.filter(function(A){return A.name===C.type&&(A.target===C.target||C.target===A.shadowParent)&&g8(A.delta,w)})[0];if(S&&S.should){C.cancelable&&C.preventDefault();return}if(!S){var _=(o.current.shards||[]).map(qN).filter(Boolean).filter(function(A){return A.contains(C.target)}),T=_.length>0?a(C,_[0]):!o.current.noIsolation;T&&C.cancelable&&C.preventDefault()}}},[]),c=b.useCallback(function(v,C,w,S){var _={name:v,delta:C,target:w,should:S,shadowParent:w8(w)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(T){return T!==_})},1)},[]),u=b.useCallback(function(v){n.current=Av(v),s.current=void 0},[]),p=b.useCallback(function(v){c(v.type,GN(v),v.target,a(v,t.lockRef.current))},[]),g=b.useCallback(function(v){c(v.type,Av(v),v.target,a(v,t.lockRef.current))},[]);b.useEffect(function(){return Rd.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",l,Ad),document.addEventListener("touchmove",l,Ad),document.addEventListener("touchstart",u,Ad),function(){Rd=Rd.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Ad),document.removeEventListener("touchmove",l,Ad),document.removeEventListener("touchstart",u,Ad)}},[]);var y=t.removeScrollBar,x=t.inert;return b.createElement(b.Fragment,null,x?b.createElement(i,{styles:y8(r)}):null,y?b.createElement(l8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function w8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const C8=YW(SL,x8);var zw=b.forwardRef(function(t,e){return b.createElement(jw,$i({},t,{ref:e,sideCar:C8}))});zw.classNames=jw.classNames;var S8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Nd=new WeakMap,Rv=new WeakMap,Nv={},lS=0,AL=function(t){return t&&(t.host||AL(t.parentNode))},b8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=AL(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},_8=function(t,e,n,s){var r=b8(e,Array.isArray(t)?t:[t]);Nv[n]||(Nv[n]=new WeakMap);var i=Nv[n],o=[],a=new Set,l=new Set(r),c=function(p){!p||a.has(p)||(a.add(p),c(p.parentNode))};r.forEach(c);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(g){if(a.has(g))u(g);else try{var y=g.getAttribute(s),x=y!==null&&y!=="false",v=(Nd.get(g)||0)+1,C=(i.get(g)||0)+1;Nd.set(g,v),i.set(g,C),o.push(g),v===1&&x&&Rv.set(g,!0),C===1&&g.setAttribute(n,"true"),x||g.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return u(e),a.clear(),lS++,function(){o.forEach(function(p){var g=Nd.get(p)-1,y=i.get(p)-1;Nd.set(p,g),i.set(p,y),g||(Rv.has(p)||p.removeAttribute(s),Rv.delete(p)),y||p.removeAttribute(n)}),lS--,lS||(Nd=new WeakMap,Nd=new WeakMap,Rv=new WeakMap,Nv={})}},vA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=S8(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),_8(s,r,n,"aria-hidden")):function(){return null}},Hw="Dialog",[RL,_oe]=os(Hw),[E8,ci]=RL(Hw),NL=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,u]=Xi({prop:s,defaultProp:r??!1,onChange:i,caller:Hw});return m.jsx(E8,{scope:e,triggerRef:a,contentRef:l,contentId:Ki(),titleId:Ki(),descriptionId:Ki(),open:c,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(p=>!p),[u]),modal:o,children:n})};NL.displayName=Hw;var PL="DialogTrigger",ML=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ci(PL,n),i=Oe(e,r.triggerRef);return m.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":CA(r.open),...s,ref:i,onClick:te(t.onClick,r.onOpenToggle)})});ML.displayName=PL;var xA="DialogPortal",[T8,kL]=RL(xA,{forceMount:void 0}),IL=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:r}=t,i=ci(xA,e);return m.jsx(T8,{scope:e,forceMount:n,children:b.Children.map(s,o=>m.jsx(er,{present:n||i.open,children:m.jsx(Fy,{asChild:!0,container:r,children:o})}))})};IL.displayName=xA;var N0="DialogOverlay",DL=b.forwardRef((t,e)=>{const n=kL(N0,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=ci(N0,t.__scopeDialog);return i.modal?m.jsx(er,{present:s||i.open,children:m.jsx(R8,{...r,ref:e})}):null});DL.displayName=N0;var A8=ed("DialogOverlay.RemoveScroll"),R8=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ci(N0,n);return m.jsx(zw,{as:A8,allowPinchZoom:!0,shards:[r.contentRef],children:m.jsx(xe.div,{"data-state":CA(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),ad="DialogContent",LL=b.forwardRef((t,e)=>{const n=kL(ad,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=ci(ad,t.__scopeDialog);return m.jsx(er,{present:s||i.open,children:i.modal?m.jsx(N8,{...r,ref:e}):m.jsx(P8,{...r,ref:e})})});LL.displayName=ad;var N8=b.forwardRef((t,e)=>{const n=ci(ad,t.__scopeDialog),s=b.useRef(null),r=Oe(e,n.contentRef,s);return b.useEffect(()=>{const i=s.current;if(i)return vA(i)},[]),m.jsx(FL,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:te(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:te(t.onFocusOutside,i=>i.preventDefault())})}),P8=b.forwardRef((t,e)=>{const n=ci(ad,t.__scopeDialog),s=b.useRef(!1),r=b.useRef(!1);return m.jsx(FL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(s.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),FL=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=t,a=ci(ad,n),l=b.useRef(null),c=Oe(e,l);return yA(),m.jsxs(m.Fragment,{children:[m.jsx(Bw,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:m.jsx(ep,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":CA(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(M8,{titleId:a.titleId}),m.jsx(I8,{contentRef:l,descriptionId:a.descriptionId})]})]})}),wA="DialogTitle",OL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ci(wA,n);return m.jsx(xe.h2,{id:r.titleId,...s,ref:e})});OL.displayName=wA;var UL="DialogDescription",VL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ci(UL,n);return m.jsx(xe.p,{id:r.descriptionId,...s,ref:e})});VL.displayName=UL;var $L="DialogClose",BL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=ci($L,n);return m.jsx(xe.button,{type:"button",...s,ref:e,onClick:te(t.onClick,()=>r.onOpenChange(!1))})});BL.displayName=$L;function CA(t){return t?"open":"closed"}var jL="DialogTitleWarning",[Eoe,zL]=pj(jL,{contentName:ad,titleName:wA,docsSlug:"dialog"}),M8=({titleId:t})=>{const e=zL(jL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},k8="DialogDescriptionWarning",I8=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zL(k8).contentName}}.`;return b.useEffect(()=>{var i;const r=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},D8=NL,L8=ML,F8=IL,HL=DL,GL=LL,qL=OL,WL=VL,O8=BL;const Kl=D8,Jh=L8,U8=F8,KL=b.forwardRef(({className:t,...e},n)=>m.jsx(HL,{ref:n,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));KL.displayName=HL.displayName;const oa=b.forwardRef(({className:t,children:e,...n},s)=>m.jsxs(U8,{children:[m.jsx(KL,{}),m.jsxs(GL,{ref:s,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),"aria-describedby":n["aria-describedby"],...n,children:[e,m.jsxs(O8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(Uy,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));oa.displayName=GL.displayName;const aa=({className:t,...e})=>m.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});aa.displayName="DialogHeader";const hf=({className:t,...e})=>m.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});hf.displayName="DialogFooter";const la=b.forwardRef(({className:t,...e},n)=>m.jsx(qL,{ref:n,className:Ee("text-lg font-semibold leading-none tracking-tight",t),...e}));la.displayName=qL.displayName;const Gw=b.forwardRef(({className:t,...e},n)=>m.jsx(WL,{ref:n,className:Ee("text-sm text-muted-foreground",t),...e}));Gw.displayName=WL.displayName;var V8="Label",YL=b.forwardRef((t,e)=>m.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=t.onMouseDown)==null||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YL.displayName=V8;var JL=YL;const $8=IT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ke=b.forwardRef(({className:t,...e},n)=>m.jsx(JL,{ref:n,className:Ee($8(),t),...e}));Ke.displayName=JL.displayName;const XL=Lq,QL=b.createContext({}),Qd=({...t})=>m.jsx(QL.Provider,{value:{name:t.name},children:m.jsx(Vq,{...t})}),qw=()=>{const t=b.useContext(QL),e=b.useContext(ZL),{getFieldState:n,formState:s}=$w(),r=n(t.name,s);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...r}},ZL=b.createContext({}),_c=b.forwardRef(({className:t,...e},n)=>{const s=b.useId();return m.jsx(ZL.Provider,{value:{id:s},children:m.jsx("div",{ref:n,className:Ee("space-y-2",t),...e})})});_c.displayName="FormItem";const Ec=b.forwardRef(({className:t,...e},n)=>{const{error:s,formItemId:r}=qw();return m.jsx(Ke,{ref:n,className:Ee(s&&"text-destructive",t),htmlFor:r,...e})});Ec.displayName="FormLabel";const Tc=b.forwardRef(({...t},e)=>{const{error:n,formItemId:s,formDescriptionId:r,formMessageId:i}=qw();return m.jsx(lD,{ref:e,id:s,"aria-describedby":n?`${r} ${i}`:`${r}`,"aria-invalid":!!n,...t})});Tc.displayName="FormControl";const B8=b.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:s}=qw();return m.jsx("p",{ref:n,id:s,className:Ee("text-sm text-muted-foreground",t),...e})});B8.displayName="FormDescription";const Ac=b.forwardRef(({className:t,children:e,...n},s)=>{const{error:r,formMessageId:i}=qw(),o=r?String(r==null?void 0:r.message):e;return o?m.jsx("p",{ref:s,id:i,className:Ee("text-sm font-medium text-destructive",t),...n,children:o}):null});Ac.displayName="FormMessage";const j8=gA({email:zs().email("Please enter a valid email address"),password:zs().min(6,"Password must be at least 6 characters")});function z8({children:t}){const[e,n]=b.useState(!1),{login:s,isLoading:r,signInWithGoogle:i}=li(),{toast:o}=Cr(),a=yd(),l=hL({resolver:mL(j8),defaultValues:{email:"",password:""}}),c=async u=>{await s(u.email,u.password)?(o({title:"Login successful!",description:"Welcome back to Qzzly"}),n(!1),a("/sessions")):o({title:"Login failed",description:"Please check your email and password",variant:"destructive"})};return m.jsxs(Kl,{open:e,onOpenChange:n,children:[m.jsx(Jh,{asChild:!0,children:t||m.jsx(he,{variant:"outline",children:"Log in"})}),m.jsxs(oa,{className:"sm:max-w-[425px]",children:[m.jsxs(aa,{children:[m.jsx(la,{className:"text-xl font-bold",children:"Log in to Qzzly"}),m.jsx(Gw,{children:"Enter your email and password to access your account."})]}),m.jsx(XL,{...l,children:m.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[m.jsx(Qd,{control:l.control,name:"email",render:({field:u})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Email"}),m.jsx(Tc,{children:m.jsx(pr,{placeholder:"you@example.com",...u})}),m.jsx(Ac,{})]})}),m.jsx(Qd,{control:l.control,name:"password",render:({field:u})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Password"}),m.jsx(Tc,{children:m.jsx(pr,{type:"password",placeholder:"******",...u})}),m.jsx(Ac,{})]})}),m.jsx("div",{className:"flex justify-end pt-2",children:m.jsx(he,{type:"submit",className:"gradient-bg",disabled:r,children:r?"Logging in...":"Log in"})}),m.jsx(he,{type:"button",variant:"outline",className:"w-full mt-2",onClick:i,children:"Continue with Google"})]})})]})]})}const H8=gA({name:zs().min(2,"Name must be at least 2 characters").optional(),email:zs().email("Please enter a valid email address"),password:zs().min(6,"Password must be at least 6 characters"),confirmPassword:zs().min(6,"Please confirm your password")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function SA({children:t,redirectPath:e="/sessions"}){const[n,s]=b.useState(!1),{signup:r,isLoading:i,signInWithGoogle:o}=li(),{toast:a}=Cr(),l=yd(),c=hL({resolver:mL(H8),defaultValues:{name:"",email:"",password:"",confirmPassword:""}}),u=async p=>{await r(p.email,p.password,p.name)?(a({title:"Account created!",description:"Welcome to Qzzly"}),s(!1),l(e)):a({title:"Signup failed",description:"Please check your information and try again",variant:"destructive"})};return m.jsxs(Kl,{open:n,onOpenChange:s,children:[m.jsx(Jh,{asChild:!0,children:t||m.jsx(he,{children:"Sign up"})}),m.jsxs(oa,{className:"sm:max-w-[425px]",children:[m.jsxs(aa,{children:[m.jsx(la,{className:"text-xl font-bold",children:"Create your account"}),m.jsx(Gw,{children:"Join Qzzly to start creating and studying with flashcards."})]}),m.jsx(XL,{...c,children:m.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[m.jsx(Qd,{control:c.control,name:"name",render:({field:p})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Name (optional)"}),m.jsx(Tc,{children:m.jsx(pr,{placeholder:"Your name",...p})}),m.jsx(Ac,{})]})}),m.jsx(Qd,{control:c.control,name:"email",render:({field:p})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Email"}),m.jsx(Tc,{children:m.jsx(pr,{placeholder:"you@example.com",...p})}),m.jsx(Ac,{})]})}),m.jsx(Qd,{control:c.control,name:"password",render:({field:p})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Password"}),m.jsx(Tc,{children:m.jsx(pr,{type:"password",placeholder:"******",...p})}),m.jsx(Ac,{})]})}),m.jsx(Qd,{control:c.control,name:"confirmPassword",render:({field:p})=>m.jsxs(_c,{children:[m.jsx(Ec,{children:"Confirm Password"}),m.jsx(Tc,{children:m.jsx(pr,{type:"password",placeholder:"******",...p})}),m.jsx(Ac,{})]})}),m.jsx("div",{className:"flex justify-end pt-2",children:m.jsx(he,{type:"submit",className:"gradient-bg",disabled:i,children:i?"Creating account...":"Sign up"})}),m.jsx(he,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,children:"Continue with Google"})]})})]})]})}var G8=b.createContext(void 0);function cp(t){const e=b.useContext(G8);return t||e||"ltr"}var cS="rovingFocusGroup.onEntryFocus",q8={bubbles:!1,cancelable:!0},zy="RovingFocusGroup",[Wb,eF,W8]=Ly(zy),[K8,up]=os(zy,[W8]),[Y8,J8]=K8(zy),tF=b.forwardRef((t,e)=>m.jsx(Wb.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Wb.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(X8,{...t,ref:e})})}));tF.displayName=zy;var X8=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...p}=t,g=b.useRef(null),y=Oe(e,g),x=cp(i),[v,C]=Xi({prop:o,defaultProp:a??null,onChange:l,caller:zy}),[w,S]=b.useState(!1),_=_s(c),T=eF(n),A=b.useRef(!1),[P,M]=b.useState(0);return b.useEffect(()=>{const I=g.current;if(I)return I.addEventListener(cS,_),()=>I.removeEventListener(cS,_)},[_]),m.jsx(Y8,{scope:n,orientation:s,dir:x,loop:r,currentTabStopId:v,onItemFocus:b.useCallback(I=>C(I),[C]),onItemShiftTab:b.useCallback(()=>S(!0),[]),onFocusableItemAdd:b.useCallback(()=>M(I=>I+1),[]),onFocusableItemRemove:b.useCallback(()=>M(I=>I-1),[]),children:m.jsx(xe.div,{tabIndex:w||P===0?-1:0,"data-orientation":s,...p,ref:y,style:{outline:"none",...t.style},onMouseDown:te(t.onMouseDown,()=>{A.current=!0}),onFocus:te(t.onFocus,I=>{const k=!A.current;if(I.target===I.currentTarget&&k&&!w){const D=new CustomEvent(cS,q8);if(I.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=T().filter($=>$.focusable),U=L.find($=>$.active),G=L.find($=>$.id===v),W=[U,G,...L].filter(Boolean).map($=>$.ref.current);rF(W,u)}}A.current=!1}),onBlur:te(t.onBlur,()=>S(!1))})})}),nF="RovingFocusGroupItem",sF=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...a}=t,l=Ki(),c=i||l,u=J8(nF,n),p=u.currentTabStopId===c,g=eF(n),{onFocusableItemAdd:y,onFocusableItemRemove:x,currentTabStopId:v}=u;return b.useEffect(()=>{if(s)return y(),()=>x()},[s,y,x]),m.jsx(Wb.ItemSlot,{scope:n,id:c,focusable:s,active:r,children:m.jsx(xe.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:te(t.onMouseDown,C=>{s?u.onItemFocus(c):C.preventDefault()}),onFocus:te(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:te(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){u.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const w=e9(C,u.orientation,u.dir);if(w!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let _=g().filter(T=>T.focusable).map(T=>T.ref.current);if(w==="last")_.reverse();else if(w==="prev"||w==="next"){w==="prev"&&_.reverse();const T=_.indexOf(C.currentTarget);_=u.loop?t9(_,T+1):_.slice(T+1)}setTimeout(()=>rF(_))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:v!=null}):o})})});sF.displayName=nF;var Q8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function e9(t,e,n){const s=Z8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Q8[s]}function rF(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function t9(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var bA=tF,_A=sF,Kb=["Enter"," "],n9=["ArrowDown","PageUp","Home"],iF=["ArrowUp","PageDown","End"],s9=[...n9,...iF],r9={ltr:[...Kb,"ArrowRight"],rtl:[...Kb,"ArrowLeft"]},i9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hy="Menu",[qm,o9,a9]=Ly(Hy),[vd,oF]=os(Hy,[a9,rp,up]),Ww=rp(),aF=up(),[l9,xd]=vd(Hy),[c9,Gy]=vd(Hy),lF=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=t,a=Ww(e),[l,c]=b.useState(null),u=b.useRef(!1),p=_s(i),g=cp(r);return b.useEffect(()=>{const y=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),m.jsx(y2,{...a,children:m.jsx(l9,{scope:e,open:n,onOpenChange:p,content:l,onContentChange:c,children:m.jsx(c9,{scope:e,onClose:b.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:u,dir:g,modal:o,children:s})})})};lF.displayName=Hy;var u9="MenuAnchor",EA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Ww(n);return m.jsx(GT,{...r,...s,ref:e})});EA.displayName=u9;var TA="MenuPortal",[d9,cF]=vd(TA,{forceMount:void 0}),uF=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:r}=t,i=xd(TA,e);return m.jsx(d9,{scope:e,forceMount:n,children:m.jsx(er,{present:n||i.open,children:m.jsx(Fy,{asChild:!0,container:r,children:s})})})};uF.displayName=TA;var gr="MenuContent",[f9,AA]=vd(gr),dF=b.forwardRef((t,e)=>{const n=cF(gr,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=xd(gr,t.__scopeMenu),o=Gy(gr,t.__scopeMenu);return m.jsx(qm.Provider,{scope:t.__scopeMenu,children:m.jsx(er,{present:s||i.open,children:m.jsx(qm.Slot,{scope:t.__scopeMenu,children:o.modal?m.jsx(h9,{...r,ref:e}):m.jsx(p9,{...r,ref:e})})})})}),h9=b.forwardRef((t,e)=>{const n=xd(gr,t.__scopeMenu),s=b.useRef(null),r=Oe(e,s);return b.useEffect(()=>{const i=s.current;if(i)return vA(i)},[]),m.jsx(RA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:te(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),p9=b.forwardRef((t,e)=>{const n=xd(gr,t.__scopeMenu);return m.jsx(RA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),m9=ed("MenuContent.ScrollLock"),RA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:g,onDismiss:y,disableOutsideScroll:x,...v}=t,C=xd(gr,n),w=Gy(gr,n),S=Ww(n),_=aF(n),T=o9(n),[A,P]=b.useState(null),M=b.useRef(null),I=Oe(e,M,C.onContentChange),k=b.useRef(0),D=b.useRef(""),L=b.useRef(0),U=b.useRef(null),G=b.useRef("right"),O=b.useRef(0),W=x?zw:b.Fragment,$=x?{as:m9,allowPinchZoom:!0}:void 0,z=V=>{var Y,_e;const H=D.current+V,Q=T().filter(re=>!re.disabled),J=document.activeElement,se=(Y=Q.find(re=>re.ref.current===J))==null?void 0:Y.textValue,ye=Q.map(re=>re.textValue),Me=A9(ye,H,se),De=(_e=Q.find(re=>re.textValue===Me))==null?void 0:_e.ref.current;(function re(we){D.current=we,window.clearTimeout(k.current),we!==""&&(k.current=window.setTimeout(()=>re(""),1e3))})(H),De&&setTimeout(()=>De.focus())};b.useEffect(()=>()=>window.clearTimeout(k.current),[]),yA();const B=b.useCallback(V=>{var Q,J;return G.current===((Q=U.current)==null?void 0:Q.side)&&N9(V,(J=U.current)==null?void 0:J.area)},[]);return m.jsx(f9,{scope:n,searchRef:D,onItemEnter:b.useCallback(V=>{B(V)&&V.preventDefault()},[B]),onItemLeave:b.useCallback(V=>{var H;B(V)||((H=M.current)==null||H.focus(),P(null))},[B]),onTriggerLeave:b.useCallback(V=>{B(V)&&V.preventDefault()},[B]),pointerGraceTimerRef:L,onPointerGraceIntentChange:b.useCallback(V=>{U.current=V},[]),children:m.jsx(W,{...$,children:m.jsx(Bw,{asChild:!0,trapped:r,onMountAutoFocus:te(i,V=>{var H;V.preventDefault(),(H=M.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:m.jsx(ep,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:g,onDismiss:y,children:m.jsx(bA,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:A,onCurrentTabStopIdChange:P,onEntryFocus:te(l,V=>{w.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(qT,{role:"menu","aria-orientation":"vertical","data-state":AF(C.open),"data-radix-menu-content":"",dir:w.dir,...S,...v,ref:I,style:{outline:"none",...v.style},onKeyDown:te(v.onKeyDown,V=>{const Q=V.target.closest("[data-radix-menu-content]")===V.currentTarget,J=V.ctrlKey||V.altKey||V.metaKey,se=V.key.length===1;Q&&(V.key==="Tab"&&V.preventDefault(),!J&&se&&z(V.key));const ye=M.current;if(V.target!==ye||!s9.includes(V.key))return;V.preventDefault();const De=T().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);iF.includes(V.key)&&De.reverse(),E9(De)}),onBlur:te(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(k.current),D.current="")}),onPointerMove:te(t.onPointerMove,Wm(V=>{const H=V.target,Q=O.current!==V.clientX;if(V.currentTarget.contains(H)&&Q){const J=V.clientX>O.current?"right":"left";G.current=J,O.current=V.clientX}}))})})})})})})});dF.displayName=gr;var g9="MenuGroup",NA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return m.jsx(xe.div,{role:"group",...s,ref:e})});NA.displayName=g9;var y9="MenuLabel",fF=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return m.jsx(xe.div,{...s,ref:e})});fF.displayName=y9;var P0="MenuItem",WN="menu.itemSelect",Kw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...r}=t,i=b.useRef(null),o=Gy(P0,t.__scopeMenu),a=AA(P0,t.__scopeMenu),l=Oe(e,i),c=b.useRef(!1),u=()=>{const p=i.current;if(!n&&p){const g=new CustomEvent(WN,{bubbles:!0,cancelable:!0});p.addEventListener(WN,y=>s==null?void 0:s(y),{once:!0}),NT(p,g),g.defaultPrevented?c.current=!1:o.onClose()}};return m.jsx(hF,{...r,ref:l,disabled:n,onClick:te(t.onClick,u),onPointerDown:p=>{var g;(g=t.onPointerDown)==null||g.call(t,p),c.current=!0},onPointerUp:te(t.onPointerUp,p=>{var g;c.current||(g=p.currentTarget)==null||g.click()}),onKeyDown:te(t.onKeyDown,p=>{const g=a.searchRef.current!=="";n||g&&p.key===" "||Kb.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Kw.displayName=P0;var hF=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=t,o=AA(P0,n),a=aF(n),l=b.useRef(null),c=Oe(e,l),[u,p]=b.useState(!1),[g,y]=b.useState("");return b.useEffect(()=>{const x=l.current;x&&y((x.textContent??"").trim())},[i.children]),m.jsx(qm.ItemSlot,{scope:n,disabled:s,textValue:r??g,children:m.jsx(_A,{asChild:!0,...a,focusable:!s,children:m.jsx(xe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:c,onPointerMove:te(t.onPointerMove,Wm(x=>{s?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(t.onPointerLeave,Wm(x=>o.onItemLeave(x))),onFocus:te(t.onFocus,()=>p(!0)),onBlur:te(t.onBlur,()=>p(!1))})})})}),v9="MenuCheckboxItem",pF=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...r}=t;return m.jsx(xF,{scope:t.__scopeMenu,checked:n,children:m.jsx(Kw,{role:"menuitemcheckbox","aria-checked":M0(n)?"mixed":n,...r,ref:e,"data-state":MA(n),onSelect:te(r.onSelect,()=>s==null?void 0:s(M0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pF.displayName=v9;var mF="MenuRadioGroup",[x9,w9]=vd(mF,{value:void 0,onValueChange:()=>{}}),gF=b.forwardRef((t,e)=>{const{value:n,onValueChange:s,...r}=t,i=_s(s);return m.jsx(x9,{scope:t.__scopeMenu,value:n,onValueChange:i,children:m.jsx(NA,{...r,ref:e})})});gF.displayName=mF;var yF="MenuRadioItem",vF=b.forwardRef((t,e)=>{const{value:n,...s}=t,r=w9(yF,t.__scopeMenu),i=n===r.value;return m.jsx(xF,{scope:t.__scopeMenu,checked:i,children:m.jsx(Kw,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":MA(i),onSelect:te(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});vF.displayName=yF;var PA="MenuItemIndicator",[xF,C9]=vd(PA,{checked:!1}),wF=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...r}=t,i=C9(PA,n);return m.jsx(er,{present:s||M0(i.checked)||i.checked===!0,children:m.jsx(xe.span,{...r,ref:e,"data-state":MA(i.checked)})})});wF.displayName=PA;var S9="MenuSeparator",CF=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return m.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});CF.displayName=S9;var b9="MenuArrow",SF=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Ww(n);return m.jsx(WT,{...r,...s,ref:e})});SF.displayName=b9;var _9="MenuSub",[Toe,bF]=vd(_9),jp="MenuSubTrigger",_F=b.forwardRef((t,e)=>{const n=xd(jp,t.__scopeMenu),s=Gy(jp,t.__scopeMenu),r=bF(jp,t.__scopeMenu),i=AA(jp,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const p=a.current;return()=>{window.clearTimeout(p),l(null)}},[a,l]),m.jsx(EA,{asChild:!0,...c,children:m.jsx(hF,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":AF(n.open),...t,ref:Rw(e,r.onTriggerChange),onClick:p=>{var g;(g=t.onClick)==null||g.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:te(t.onPointerMove,Wm(p=>{i.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:te(t.onPointerLeave,Wm(p=>{var y,x;u();const g=(y=n.content)==null?void 0:y.getBoundingClientRect();if(g){const v=(x=n.content)==null?void 0:x.dataset.side,C=v==="right",w=C?-5:5,S=g[C?"left":"right"],_=g[C?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:S,y:g.top},{x:_,y:g.top},{x:_,y:g.bottom},{x:S,y:g.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:te(t.onKeyDown,p=>{var y;const g=i.searchRef.current!=="";t.disabled||g&&p.key===" "||r9[s.dir].includes(p.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),p.preventDefault())})})})});_F.displayName=jp;var EF="MenuSubContent",TF=b.forwardRef((t,e)=>{const n=cF(gr,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=xd(gr,t.__scopeMenu),o=Gy(gr,t.__scopeMenu),a=bF(EF,t.__scopeMenu),l=b.useRef(null),c=Oe(e,l);return m.jsx(qm.Provider,{scope:t.__scopeMenu,children:m.jsx(er,{present:s||i.open,children:m.jsx(qm.Slot,{scope:t.__scopeMenu,children:m.jsx(RA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var p;o.isUsingKeyboardRef.current&&((p=l.current)==null||p.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:te(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:te(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:te(t.onKeyDown,u=>{var y;const p=u.currentTarget.contains(u.target),g=i9[o.dir].includes(u.key);p&&g&&(i.onOpenChange(!1),(y=a.trigger)==null||y.focus(),u.preventDefault())})})})})})});TF.displayName=EF;function AF(t){return t?"open":"closed"}function M0(t){return t==="indeterminate"}function MA(t){return M0(t)?"indeterminate":t?"checked":"unchecked"}function E9(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function T9(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function A9(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=T9(t,Math.max(i,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function R9(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,p=l.x,g=l.y;u>s!=g>s&&n<(p-c)*(s-u)/(g-u)+c&&(r=!r)}return r}function N9(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return R9(n,e)}function Wm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var P9=lF,M9=EA,k9=uF,I9=dF,D9=NA,L9=fF,F9=Kw,O9=pF,U9=gF,V9=vF,$9=wF,B9=CF,j9=SF,z9=_F,H9=TF,Yw="DropdownMenu",[G9,Aoe]=os(Yw,[oF]),as=oF(),[q9,RF]=G9(Yw),NF=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=as(e),c=b.useRef(null),[u,p]=Xi({prop:r,defaultProp:i??!1,onChange:o,caller:Yw});return m.jsx(q9,{scope:e,triggerId:Ki(),triggerRef:c,contentId:Ki(),open:u,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(g=>!g),[p]),modal:a,children:m.jsx(P9,{...l,open:u,onOpenChange:p,dir:s,modal:a,children:n})})};NF.displayName=Yw;var PF="DropdownMenuTrigger",MF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=t,i=RF(PF,n),o=as(n);return m.jsx(M9,{asChild:!0,...o,children:m.jsx(xe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Rw(e,i.triggerRef),onPointerDown:te(t.onPointerDown,a=>{!s&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:te(t.onKeyDown,a=>{s||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});MF.displayName=PF;var W9="DropdownMenuPortal",kF=t=>{const{__scopeDropdownMenu:e,...n}=t,s=as(e);return m.jsx(k9,{...s,...n})};kF.displayName=W9;var IF="DropdownMenuContent",DF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=RF(IF,n),i=as(n),o=b.useRef(!1);return m.jsx(I9,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:e,onCloseAutoFocus:te(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:te(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DF.displayName=IF;var K9="DropdownMenuGroup",Y9=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(D9,{...r,...s,ref:e})});Y9.displayName=K9;var J9="DropdownMenuLabel",LF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(L9,{...r,...s,ref:e})});LF.displayName=J9;var X9="DropdownMenuItem",FF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(F9,{...r,...s,ref:e})});FF.displayName=X9;var Q9="DropdownMenuCheckboxItem",OF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(O9,{...r,...s,ref:e})});OF.displayName=Q9;var Z9="DropdownMenuRadioGroup",e7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(U9,{...r,...s,ref:e})});e7.displayName=Z9;var t7="DropdownMenuRadioItem",UF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(V9,{...r,...s,ref:e})});UF.displayName=t7;var n7="DropdownMenuItemIndicator",VF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx($9,{...r,...s,ref:e})});VF.displayName=n7;var s7="DropdownMenuSeparator",$F=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(B9,{...r,...s,ref:e})});$F.displayName=s7;var r7="DropdownMenuArrow",i7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(j9,{...r,...s,ref:e})});i7.displayName=r7;var o7="DropdownMenuSubTrigger",BF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(z9,{...r,...s,ref:e})});BF.displayName=o7;var a7="DropdownMenuSubContent",jF=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=as(n);return m.jsx(H9,{...r,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jF.displayName=a7;var l7=NF,c7=MF,u7=kF,zF=DF,HF=LF,GF=FF,qF=OF,WF=UF,KF=VF,YF=$F,JF=BF,XF=jF;const d7=l7,f7=c7,h7=b.forwardRef(({className:t,inset:e,children:n,...s},r)=>m.jsxs(JF,{ref:r,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...s,children:[n,m.jsx(u5,{className:"ml-auto h-4 w-4"})]}));h7.displayName=JF.displayName;const p7=b.forwardRef(({className:t,...e},n)=>m.jsx(XF,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));p7.displayName=XF.displayName;const QF=b.forwardRef(({className:t,sideOffset:e=4,...n},s)=>m.jsx(u7,{children:m.jsx(zF,{ref:s,sideOffset:e,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));QF.displayName=zF.displayName;const Yb=b.forwardRef(({className:t,inset:e,...n},s)=>m.jsx(GF,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Yb.displayName=GF.displayName;const m7=b.forwardRef(({className:t,children:e,checked:n,...s},r)=>m.jsxs(qF,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(KF,{children:m.jsx(hn,{className:"h-4 w-4"})})}),e]}));m7.displayName=qF.displayName;const g7=b.forwardRef(({className:t,children:e,...n},s)=>m.jsxs(WF,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(KF,{children:m.jsx(h5,{className:"h-2 w-2 fill-current"})})}),e]}));g7.displayName=WF.displayName;const ZF=b.forwardRef(({className:t,inset:e,...n},s)=>m.jsx(HF,{ref:s,className:Ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));ZF.displayName=HF.displayName;const Jb=b.forwardRef(({className:t,...e},n)=>m.jsx(YF,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",t),...e}));Jb.displayName=YF.displayName;function y7(){const{user:t,logout:e}=li();return m.jsxs(d7,{children:[m.jsx(f7,{asChild:!0,children:m.jsxs(he,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:[m.jsx("span",{className:"hidden md:block mr-2",children:(t==null?void 0:t.name)||(t==null?void 0:t.email.split("@")[0])}),m.jsx("div",{className:"size-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-600",children:m.jsx(S5,{className:"size-4"})})]})}),m.jsxs(QF,{align:"end",className:"w-56",children:[m.jsxs(ZF,{children:[m.jsx("div",{className:"font-medium",children:(t==null?void 0:t.name)||"My Account"}),m.jsx("div",{className:"text-xs text-muted-foreground truncate",children:t==null?void 0:t.email})]}),m.jsx(Jb,{}),m.jsx(Yb,{asChild:!0,children:m.jsx(Hh,{to:"/sessions",className:"cursor-pointer",children:"My Study Sessions"})}),m.jsx(Jb,{}),m.jsxs(Yb,{className:"text-red-600 focus:text-red-600 cursor-pointer",onClick:e,children:[m.jsx(v5,{className:"mr-2 size-4"}),"Logout"]})]})]})}function ba(){const t=b.useRef(null);return b.useEffect(()=>{const e=t.current;if(!e)return;e.classList.add("opacity-0");const n=new IntersectionObserver(([s])=>{s.isIntersecting&&(e.classList.remove("opacity-0"),e.classList.add("animate-fade-in"),n.unobserve(e))},{threshold:.1});return n.observe(e),()=>n.disconnect()},[]),t}const pf=()=>{const{isAuthenticated:t}=li(),e=ba();return m.jsx("header",{ref:e,className:"bg-white py-5 border-b border-gray-100 sticky top-0 z-50 shadow-sm backdrop-blur-lg bg-white/90",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center",children:m.jsxs(Hh,{to:"/",className:"text-2xl font-bold flex items-center",children:[m.jsx("div",{className:"w-9 h-9 mr-2 gradient-bg rounded-md flex items-center justify-center",children:m.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),m.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),m.jsx("span",{className:"font-extrabold tracking-tighter",children:"Qzzly"})]})}),m.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[m.jsx("a",{href:"/#features",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Features"}),m.jsx("a",{href:"/#how-it-works",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"How it Works"}),m.jsx("a",{href:"/#pricing",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Pricing"}),m.jsx(Hh,{to:"/sessions",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"My Sessions"})]}),m.jsx("div",{className:"flex items-center space-x-4",children:t?m.jsx(y7,{}):m.jsxs(m.Fragment,{children:[m.jsx(z8,{children:m.jsx(he,{variant:"outline",className:"hidden md:flex border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:"Log in"})}),m.jsx(SA,{children:m.jsx(he,{className:"gradient-bg font-medium shadow-md shadow-purple-200",children:"Sign up"})})]})})]})})})};async function qy(){const t=localStorage.getItem("quiz_io_sessions");return t?JSON.parse(t).map(n=>({id:n.id,title:n.title||n.name||"Untitled Session",description:n.description||"",createdat:n.createdat||n.createdAt||new Date().toISOString(),updatedat:n.updatedat||n.updatedAt||n.createdat||n.createdAt||new Date().toISOString(),files:n.files||[],flashcards:n.flashcards||[],quizzes:n.quizzes||[],studyMaterials:n.studyMaterials||[]})):[]}async function eO(t,e=""){const n=new Date().toISOString(),s={id:`session_${Date.now()}`,title:t||"Untitled Session",description:e,createdat:n,updatedat:n,files:[],flashcards:[],quizzes:[],studyMaterials:[]},r=await qy();return r.push(s),localStorage.setItem("quiz_io_sessions",JSON.stringify(r)),s}async function v7(t){const n=(await qy()).filter(s=>s.id!==t);localStorage.setItem("quiz_io_sessions",JSON.stringify(n))}async function tO(t){const e=localStorage.getItem(`quiz_io_chat_${t}`);return e?JSON.parse(e):[]}async function Pd(t,e){const n=await tO(t);n.push(e),localStorage.setItem(`quiz_io_chat_${t}`,JSON.stringify(n))}async function x7(t,e){const n=localStorage.getItem(`quiz_io_files_${t}`),s=n?JSON.parse(n):[];s.push(e),localStorage.setItem(`quiz_io_files_${t}`,JSON.stringify(s))}async function KN(t,e){const n=localStorage.getItem(`quiz_io_flashcards_${t}`),s=n?JSON.parse(n):[];s.push(...e),localStorage.setItem(`quiz_io_flashcards_${t}`,JSON.stringify(s))}async function YN(t,e){const n=await qy(),s=n.findIndex(r=>r.id===t);s!==-1&&(n[s]={...n[s],...e},localStorage.setItem("quiz_io_sessions",JSON.stringify(n)))}async function w7(t,e){const n=localStorage.getItem(`quiz_io_flashcards_${t}`),s=n?JSON.parse(n):[],r=s.findIndex(i=>i.id===e);r!==-1&&(s[r].mastered=!s[r].mastered,localStorage.setItem(`quiz_io_flashcards_${t}`,JSON.stringify(s)))}async function C7(t,e){const n=localStorage.getItem(`quiz_io_quizzes_${t}`),s=n?JSON.parse(n):[];s.push(e),localStorage.setItem(`quiz_io_quizzes_${t}`,JSON.stringify(s))}async function nO(t){return(await qy()).find(n=>n.id===t)||null}const S7=()=>{const[t,e]=b.useState(!1),[n,s]=b.useState(!1),r=b.useRef(null),i=yd(),{toast:o}=Cr(),{isAuthenticated:a}=li(),l=async g=>{if(!a){o({title:"Authentication required",description:"Please sign up or log in to upload files"});return}if(!(!g||g.length===0)){s(!0);try{const y=g[0];if(y.type!=="application/pdf"){o({title:"Unsupported file format",description:"Please upload PDF files only",variant:"destructive"});return}const x=y.name.replace(/\.pdf$/,""),v=await eO(x);o({title:"Files uploaded successfully",description:`Created new study session: ${x}`}),i(`/session/${v.id}`)}catch{o({title:"Upload failed",description:"There was an error uploading your files",variant:"destructive"})}finally{s(!1)}}},c=g=>{g.preventDefault(),e(!1),g.dataTransfer.files&&g.dataTransfer.files.length>0&&l(g.dataTransfer.files)},u=()=>{var g;(g=r.current)==null||g.click()},p=()=>{a?i("/sessions"):o({title:"Authentication required",description:"Please sign up to get started"})};return m.jsx("section",{className:"py-20 md:py-28 container mx-auto px-4 md:px-6",children:m.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[m.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-8 leading-tight animate-fade-in",children:["Transform Your ",m.jsx("span",{className:"gradient-text",children:"Study Material"})," Into Interactive Quizzes"]}),m.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed animate-fade-in max-w-lg",style:{animationDelay:"0.2s"},children:"Upload your PDFs and explore our demo features to see how AI-powered study tools can accelerate your learning journey."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 animate-fade-in",style:{animationDelay:"0.4s"},children:[a?m.jsx(he,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",onClick:p,children:"Go to Study Sessions"}):m.jsx(SA,{children:m.jsx(he,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",children:"Get Started Free"})}),m.jsxs(he,{variant:"outline",className:"bg-white border border-gray-300 px-8 py-7 rounded-lg text-lg font-medium hover:bg-gray-50 transition-colors",children:[m.jsx(VD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]}),m.jsx("div",{className:"md:w-1/2 animate-fade-in animate-float",style:{animationDelay:"0.6s"},children:m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[m.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Try it now"}),m.jsxs("div",{id:"upload-container",className:`upload-area rounded-xl p-10 text-center cursor-pointer mb-6 border-2 border-dashed border-gray-300 ${t?"border-purple-500 bg-purple-50":""}`,onDragOver:g=>{g.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:c,onClick:u,children:[n?m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-purple-500 mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Creating study session..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-500 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),m.jsx("p",{className:"text-gray-600 mb-3 text-lg",children:"Drag & drop your PDF files here"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"or"}),m.jsx(he,{variant:"outline",className:"px-6 py-3 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50 font-medium",onClick:u,children:"Browse files"})]}),m.jsx("input",{type:"file",ref:r,className:"hidden",accept:".pdf",multiple:!0,onChange:g=>{g.target.files&&g.target.files.length>0&&l(g.target.files)}})]}),m.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Supported formats: PDF (Max size: 25MB per file)"})]})})]})})},b7=()=>{const t=ba();return m.jsx("section",{ref:t,id:"features",className:"py-20 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Features"}),m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Supercharge Your Learning"}),m.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Our AI analyzes your study materials and creates personalized learning resources to help you master any subject."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[m.jsx("div",{className:"feature-icon",children:m.jsx(m5,{className:"w-6 h-6"})}),m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Smart Quizzes"}),m.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI-generated quizzes that adapt to your knowledge gaps and learning style for maximum retention."})]}),m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[m.jsx("div",{className:"feature-icon",children:m.jsx(u0,{className:"w-6 h-6"})}),m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Interactive Flashcards"}),m.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Turn complex concepts into easy-to-review flashcards with spaced repetition for better memorization."})]}),m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[m.jsx("div",{className:"feature-icon",children:m.jsx(f5,{className:"w-6 h-6"})}),m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Mock Tests"}),m.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Simulate real exam conditions with comprehensive mock tests that prepare you for the real thing."})]})]})]})})},_7=()=>{const t=ba();return m.jsx("section",{ref:t,id:"how-it-works",className:"py-24 bg-gray-50",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"text-center mb-20",children:[m.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Process"}),m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"How Qzzly Works"}),m.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Three simple steps to transform your study materials into effective learning tools."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl mx-auto relative",children:[m.jsx("div",{className:"hidden md:block absolute top-24 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-600"}),m.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.2s"},children:[m.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"1"}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Upload Your PDFs"}),m.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Simply drag and drop your study materials, lecture notes, or textbook PDFs."})]}),m.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.4s"},children:[m.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"2"}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI Analysis"}),m.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Our advanced AI reads and understands your content, identifying key concepts and knowledge points."})]}),m.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.6s"},children:[m.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"3"}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Study Smarter"}),m.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Access your personalized quizzes, flashcards, and mock tests anytime, anywhere."})]})]})]})})},E7=()=>{const t=ba();return m.jsx("section",{ref:t,className:"py-24 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Testimonials"}),m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"What Our Users Say"}),m.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Join thousands of students who have transformed their study habits with Qzzly."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[m.jsxs("div",{className:"testimonial-card",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:m.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"JD"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-lg",children:"Jamie Davis"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Medical Student"})]})]}),m.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"Qzzly helped me prepare for my anatomy exams in half the time. The AI-generated questions were spot-on and covered exactly what I needed to know."'}),m.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>m.jsx(qC,{className:"w-5 h-5 fill-current"},e))})]}),m.jsxs("div",{className:"testimonial-card",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:m.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"MK"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-lg",children:"Michael Kim"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Law Student"})]})]}),m.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The flashcards generated from my case law notes were incredibly helpful. I could study on the go and the spaced repetition system helped me memorize key precedents."'}),m.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>m.jsx(qC,{className:"w-5 h-5 fill-current"},e))})]}),m.jsxs("div",{className:"testimonial-card",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mr-4",children:m.jsx("span",{className:"text-green-600 font-bold text-lg",children:"SP"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-lg",children:"Sarah Patel"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Computer Science Major"})]})]}),m.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The mock tests generated from my programming textbooks were challenging and comprehensive. I aced my final exams thanks to Qzzly!"'}),m.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>m.jsx(qC,{className:"w-5 h-5 fill-current"},e))})]})]})]})})},T7=()=>{const t=ba(),{user:e,updateSubscription:n}=li(),[s,r]=b.useState(!1),[i,o]=b.useState(""),[a,l]=b.useState(!1),{toast:c}=Cr(),u=async(p=!1)=>{if(!e){c({title:"Authentication Required",description:"Please log in to upgrade your subscription.",variant:"destructive"});return}l(!0);try{await n("pro",p?i:void 0)?(c({title:"Upgrade Successful!",description:p?"Your pro subscription has been activated with the promo code!":"Your pro subscription has been activated!"}),r(!1),o("")):c({title:"Upgrade Failed",description:"Please try again or contact support.",variant:"destructive"})}catch{c({title:"Error",description:"An error occurred while upgrading. Please try again.",variant:"destructive"})}finally{l(!1)}};return m.jsx("section",{ref:t,id:"pricing",className:"py-24 bg-gray-50",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Pricing"}),m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Simple, Transparent Pricing"}),m.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Choose the plan that works best for your study needs."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[m.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-md relative transition-all duration-300 hover:shadow-xl",children:[m.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Free"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"Perfect for getting started"}),m.jsxs("div",{className:"text-4xl font-bold mb-6",children:["$0",m.jsx("span",{className:"text-lg text-gray-500 font-normal",children:"/month"})]}),m.jsxs("ul",{className:"mb-10 space-y-4",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"3 study sessions"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"PDF uploads"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Basic AI features"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Flashcards & quizzes"})]})]}),m.jsx(he,{variant:"outline",className:"w-full py-6 border-2 border-purple-600 text-purple-600 hover:bg-purple-50 font-medium text-lg",onClick:()=>window.location.href="/sessions",children:e?"Current Plan":"Get Started"})]}),m.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-xl transform md:scale-105 border-2 border-purple-500 relative",children:[m.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-1.5 rounded-full text-sm font-bold",children:"Most Popular"}),m.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pro"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"For serious learners"}),m.jsxs("div",{className:"text-4xl font-bold mb-6",children:["$9.99",m.jsx("span",{className:"text-lg text-gray-500 font-normal",children:"/month"})]}),m.jsxs("ul",{className:"mb-10 space-y-4",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Unlimited study sessions"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Advanced AI features"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Priority support"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Export capabilities"})]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx(hn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),m.jsx("span",{className:"text-gray-600",children:"Custom study plans"})]})]}),m.jsx(he,{className:"w-full py-6 gradient-bg text-white text-lg font-medium shadow-lg shadow-purple-200",onClick:()=>r(!0),disabled:(e==null?void 0:e.subscription.plan)==="pro",children:(e==null?void 0:e.subscription.plan)==="pro"?"Current Plan":"Upgrade to Pro"})]})]}),m.jsx(Kl,{open:s,onOpenChange:r,children:m.jsxs(oa,{className:"sm:max-w-md",children:[m.jsx(aa,{children:m.jsx(la,{children:"Upgrade to Pro"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ke,{htmlFor:"promo-code",children:"Promo Code"}),m.jsx(pr,{id:"promo-code",placeholder:"Enter promo code",value:i,onChange:p=>o(p.target.value)})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(he,{onClick:()=>u(!1),disabled:a,className:"flex-1",children:a?"Processing...":"Pay $9.99/month"}),i&&m.jsx(he,{onClick:()=>u(!0),disabled:a,variant:"outline",className:"flex-1",children:a?"Processing...":"Use Promo Code"})]}),m.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By upgrading, you agree to our terms of service and privacy policy."})]})]})})]})})},A7=()=>{const{isAuthenticated:t}=li(),e=ba();return m.jsx("section",{ref:e,className:"py-24 bg-white",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-10 md:p-16 shadow-2xl overflow-hidden relative",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -mr-20 -mt-20"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-purple-500/10 rounded-full -ml-20 -mb-20"}),m.jsxs("div",{className:"max-w-3xl mx-auto text-center relative",children:[m.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-8 leading-tight",children:"Ready to Transform Your Study Habits?"}),m.jsx("p",{className:"text-xl text-purple-100 mb-10 leading-relaxed",children:"Join thousands of students who are studying smarter, not harder. Try Qzzly today and see the difference."}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5",children:[t?m.jsx(he,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",asChild:!0,children:m.jsx(Hh,{to:"/sessions",children:"Go to Study Sessions"})}):m.jsx(SA,{redirectPath:"/sessions",children:m.jsx(he,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",children:"Get Started Free"})}),m.jsxs(he,{size:"lg",variant:"outline",className:"bg-transparent text-white border-2 border-white px-10 py-7 hover:bg-white/10 text-lg font-bold rounded-xl",children:[m.jsx(VD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]})]})})})},sO=()=>{const t=ba();return m.jsx("footer",{ref:t,className:"bg-gray-900 text-white pt-20 pb-10",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx("div",{className:"w-10 h-10 gradient-bg rounded-lg flex items-center justify-center mr-3",children:m.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"white"}),m.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"white",fillOpacity:"0.8"})]})}),m.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Qzzly"})]}),m.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"AI-powered study tools to help you learn faster and remember more."}),m.jsxs("div",{className:"flex space-x-5",children:[m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold mb-5",children:"Product"}),m.jsxs("ul",{className:"space-y-3",children:[m.jsx("li",{children:m.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Features"})}),m.jsx("li",{children:m.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Pricing"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Testimonials"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"FAQ"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold mb-5",children:"Resources"}),m.jsxs("ul",{className:"space-y-3",children:[m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Blog"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Help Center"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Tutorials"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Contact"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold mb-5",children:"Company"}),m.jsxs("ul",{className:"space-y-3",children:[m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"About Us"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Careers"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})})]})]})]}),m.jsx("div",{className:"border-t border-gray-800 mt-16 pt-8 text-center text-gray-400",children:m.jsxs("p",{children:[" ",new Date().getFullYear()," Qzzly. All rights reserved."]})})]})})},R7=()=>m.jsxs("div",{className:"flex flex-col min-h-screen",children:[m.jsx(pf,{}),m.jsxs("main",{className:"flex-grow",children:[m.jsx(S7,{}),m.jsx(b7,{}),m.jsx(_7,{}),m.jsx(E7,{}),m.jsx(T7,{}),m.jsx(A7,{})]}),m.jsx(sO,{})]}),N7=()=>{const t=Sa();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),m.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",children:[m.jsx(pf,{}),m.jsx("main",{className:"flex flex-1 flex-col items-center justify-center py-16",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mb-6 animate-float",children:[m.jsx("ellipse",{cx:"60",cy:"60",rx:"55",ry:"55",fill:"#ede9fe"}),m.jsx("ellipse",{cx:"60",cy:"60",rx:"40",ry:"40",fill:"#a5b4fc"}),m.jsx("path",{d:"M60 80c-10 0-18-8-18-18s8-18 18-18 18 8 18 18-8 18-18 18zm0-8a10 10 0 100-20 10 10 0 000 20z",fill:"#7c3aed"}),m.jsx("circle",{cx:"50",cy:"55",r:"3",fill:"#fff"}),m.jsx("circle",{cx:"70",cy:"55",r:"3",fill:"#fff"}),m.jsx("ellipse",{cx:"60",cy:"70",rx:"6",ry:"3",fill:"#fff"})]}),m.jsx("h1",{className:"text-5xl font-extrabold text-purple-700 mb-2",children:"404"}),m.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Sorry, we couldn't find that page."}),m.jsx(he,{className:"gradient-bg px-8 py-3 text-lg font-semibold shadow-md",asChild:!0,children:m.jsx("a",{href:"/sessions",children:"Go to My Sessions"})}),m.jsx(he,{variant:"ghost",className:"mt-2 text-purple-600 hover:underline",asChild:!0,children:m.jsx("a",{href:"/",children:"Back to Home"})})]})}),m.jsx(sO,{})]})},Bi=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Bi.displayName="Card";const Jo=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:Ee("flex flex-col space-y-1.5 p-6",t),...e}));Jo.displayName="CardHeader";const Ba=b.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:Ee("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ba.displayName="CardTitle";const P7=b.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:Ee("text-sm text-muted-foreground",t),...e}));P7.displayName="CardDescription";const Xo=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:Ee("p-6 pt-0",t),...e}));Xo.displayName="CardContent";const k0=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:Ee("flex items-center p-6 pt-0",t),...e}));k0.displayName="CardFooter";const Rc=b.forwardRef(({className:t,...e},n)=>m.jsx("textarea",{className:Ee("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Rc.displayName="Textarea";const rO=({isOpen:t,onClose:e,action:n,currentUsage:s,limit:r})=>{const{updateSubscription:i}=li();if(!t)return null;const o=()=>{switch(n){case"session":return"create a new study session";case"file":return"upload another file";case"chat":return"use chat mode";default:return"perform this action"}},a=()=>{switch(n){case"session":return"1 session per month";case"file":return"1 file per session";case"chat":return"chat mode not available";default:return"limited"}},l=async()=>{try{await i("pro")&&e()}catch(c){console.error("Upgrade failed:",c)}};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Free Plan Limit Reached"}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["You've reached your free plan limit and cannot ",o(),"."]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Current Usage:"}),m.jsxs("span",{className:"text-sm font-medium",children:[s," / ",r]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${Math.min(s/r*100,100)}%`}})}),m.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Free plan: ",a()]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro"}),m.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[m.jsx("li",{children:" Unlimited study sessions"}),m.jsx("li",{children:" Unlimited file uploads"}),m.jsx("li",{children:" Full chat mode access"}),m.jsx("li",{children:" File deletion and management"}),m.jsx("li",{children:" Priority support"})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:"$9.99/month"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Cancel anytime"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:l,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Upgrade Now"}),m.jsx("button",{onClick:e,className:"w-full text-gray-600 py-2 px-6 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Maybe Later"})]})]})]})})})};function M7(){var I;const{user:t,checkUsageLimit:e,incrementUsage:n}=li(),s=ZT(),{data:r=[],isLoading:i}=V2({queryKey:["sessions"],queryFn:qy}),[o,a]=b.useState(""),[l,c]=b.useState(""),[u,p]=b.useState(!1),[g,y]=b.useState(!1),[x,v]=b.useState("session"),C=yd(),{toast:w}=Cr(),S=nN({mutationFn:k=>eO(k.title,k.description),onSuccess:async k=>{(t==null?void 0:t.subscription.plan)==="free"&&await n("session"),s.invalidateQueries({queryKey:["sessions"]}),s.setQueryData(["sessions"],(D=[])=>[...D,k]),a(""),c(""),p(!1),w({title:"Success",description:`"${k.title}" has been created successfully.`}),setTimeout(()=>{C(`/session/${k.id}`)},100)},onError:()=>{w({title:"Error",description:"Failed to create session",variant:"destructive"})}}),_=()=>{if(!o.trim()){w({title:"Error",description:"Session title is required",variant:"destructive"});return}if(!e("session")){v("session"),y(!0);return}S.mutate({title:o,description:l})},T=nN({mutationFn:k=>v7(k),onSuccess:(k,D)=>{s.setQueryData(["sessions"],(L=[])=>L.filter(U=>U.id!==D)),w({title:"Success",description:"Session has been deleted successfully."})},onError:()=>{w({title:"Error",description:"Failed to delete session",variant:"destructive"})}}),A=(k,D)=>{D.stopPropagation(),T.mutate(k)},P=k=>{if(!k)return"Unknown";const D=new Date(k);return isNaN(D.getTime())?"Unknown":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(D)},M=ba();return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(pf,{}),m.jsxs("main",{ref:M,className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Your Study Sessions"}),m.jsxs(Kl,{open:u,onOpenChange:p,children:[m.jsx(Jh,{asChild:!0,children:m.jsx(he,{className:"gradient-bg",children:"Create New Session"})}),m.jsxs(oa,{children:[m.jsxs(aa,{children:[m.jsx(la,{children:"Create New Study Session"}),m.jsx(Gw,{children:"Create a new study session to organize your learning materials."})]}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"title",children:"Session Title"}),m.jsx(pr,{id:"title",placeholder:"Enter a title for your study session",value:o,onChange:k=>a(k.target.value)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"description",children:"Description (Optional)"}),m.jsx(Rc,{id:"description",placeholder:"Describe what you'll be studying",value:l,onChange:k=>c(k.target.value)})]})]}),m.jsxs(hf,{children:[m.jsx(he,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),m.jsx(he,{className:"gradient-bg",onClick:_,children:"Create Session"})]})]})]})]}),i?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(k=>m.jsxs(Bi,{className:"border shadow-sm animate-pulse",children:[m.jsx(Jo,{className:"bg-gray-100 h-16"}),m.jsxs(Xo,{className:"pt-4",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),m.jsx(k0,{className:"h-10 bg-gray-50"})]},k))}):r.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(k=>{var D,L,U;return m.jsxs(Bi,{className:"border shadow-md hover:shadow-lg transition-shadow cursor-pointer card-hover",onClick:()=>C(`/session/${k.id}`),children:[m.jsx(Jo,{className:"pb-2",children:m.jsxs(Ba,{className:"flex justify-between items-start",children:[m.jsx("span",{className:"text-xl",children:k.title}),m.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-500 hover:bg-red-50",onClick:G=>A(k.id,G),children:m.jsx(C5,{className:"h-4 w-4"})})]})}),m.jsxs(Xo,{className:"pb-2",children:[m.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:k.description||"No description"}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(c5,{className:"h-3.5 w-3.5"}),m.jsxs("span",{children:["Created: ",P(k.createdat)]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(p5,{className:"h-3.5 w-3.5"}),m.jsxs("span",{children:["Updated: ",P(k.updatedat)]})]})]})]}),m.jsx(k0,{className:"pt-3 border-t flex justify-between",children:m.jsxs("div",{className:"flex gap-2 text-sm",children:[m.jsxs("span",{className:"text-purple-600",children:[((D=k.files)==null?void 0:D.length)||0," Files"]}),m.jsxs("span",{className:"text-purple-600",children:[((L=k.flashcards)==null?void 0:L.length)||0," Flashcards"]}),m.jsxs("span",{className:"text-purple-600",children:[((U=k.quizzes)==null?void 0:U.length)||0," Quizzes"]})]})})]},k.id)})}):m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"w-16 h-16 gradient-bg rounded-full mx-auto mb-4 flex items-center justify-center",children:m.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),m.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),m.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Study Sessions Yet"}),m.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first study session to upload PDFs and start generating flashcards, quizzes, and more."}),m.jsx(he,{className:"gradient-bg",onClick:()=>p(!0),children:"Create Your First Session"})]})]}),m.jsx(rO,{isOpen:g,onClose:()=>y(!1),action:x,currentUsage:((I=t==null?void 0:t.usage)==null?void 0:I.monthlySessions)||0,limit:1})]})}var Jw="Tabs",[k7,Roe]=os(Jw,[up]),iO=up(),[I7,kA]=k7(Jw),oO=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=cp(a),[p,g]=Xi({prop:s,onChange:r,defaultProp:i??"",caller:Jw});return m.jsx(I7,{scope:n,baseId:Ki(),value:p,onValueChange:g,orientation:o,dir:u,activationMode:l,children:m.jsx(xe.div,{dir:u,"data-orientation":o,...c,ref:e})})});oO.displayName=Jw;var aO="TabsList",lO=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,i=kA(aO,n),o=iO(n);return m.jsx(bA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:m.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});lO.displayName=aO;var cO="TabsTrigger",uO=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=t,o=kA(cO,n),a=iO(n),l=hO(o.baseId,s),c=pO(o.baseId,s),u=s===o.value;return m.jsx(_A,{asChild:!0,...a,focusable:!r,active:u,children:m.jsx(xe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:e,onMouseDown:te(t.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?o.onValueChange(s):p.preventDefault()}),onKeyDown:te(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(s)}),onFocus:te(t.onFocus,()=>{const p=o.activationMode!=="manual";!u&&!r&&p&&o.onValueChange(s)})})})});uO.displayName=cO;var dO="TabsContent",fO=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...o}=t,a=kA(dO,n),l=hO(a.baseId,s),c=pO(a.baseId,s),u=s===a.value,p=b.useRef(u);return b.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),m.jsx(er,{present:r||u,children:({present:g})=>m.jsx(xe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!g,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});fO.displayName=dO;function hO(t,e){return`${t}-trigger-${e}`}function pO(t,e){return`${t}-content-${e}`}var D7=oO,mO=lO,gO=uO,yO=fO;const vO=D7,IA=b.forwardRef(({className:t,...e},n)=>m.jsx(mO,{ref:n,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));IA.displayName=mO.displayName;const Qo=b.forwardRef(({className:t,...e},n)=>m.jsx(gO,{ref:n,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Qo.displayName=gO.displayName;const Zo=b.forwardRef(({className:t,...e},n)=>m.jsx(yO,{ref:n,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Zo.displayName=yO.displayName;async function L7(t,e=5,n="medium",s,r){return await new Promise(o=>setTimeout(o,1500)),[{front:"What is the main topic of this study material?",back:"The document covers educational concepts and learning strategies for effective study.",mastered:!1},{front:"What are the three key study techniques mentioned?",back:"Regular review, active practice, and concept application are the three main techniques.",mastered:!1},{front:"How should you approach difficult concepts?",back:"Break them down into smaller, manageable parts and practice regularly.",mastered:!1},{front:"What is the best way to retain information?",back:"Spaced repetition and active recall are the most effective retention methods.",mastered:!1},{front:"Why is understanding better than memorization?",back:"Understanding allows you to apply knowledge to new situations and solve problems creatively.",mastered:!1}].slice(0,e)}async function F7(t,e=5,n="medium",s="",r=!0,i=["multiple-choice"],o,a){await new Promise(c=>setTimeout(c,2e3));const l=[{text:"What is the primary focus of effective studying?",options:["Memorizing facts quickly","Understanding and applying concepts","Reading as fast as possible","Avoiding difficult topics"],correctAnswer:1,explanation:"Understanding and applying concepts is more effective than rote memorization because it helps you retain information longer and use it in new situations."},{text:"Which study technique is most effective for long-term retention?",options:["Cramming the night before","Spaced repetition","Reading once","Highlighting everything"],correctAnswer:1,explanation:"Spaced repetition involves reviewing material at increasing intervals, which is scientifically proven to improve long-term retention."},{text:"What should you do when you encounter a difficult concept?",options:["Skip it entirely","Break it down into smaller parts","Memorize it without understanding","Ask someone else to explain it"],correctAnswer:1,explanation:"Breaking difficult concepts into smaller, manageable parts makes them easier to understand and remember."},{text:"How often should you review your study materials?",options:["Only before exams","Once a week","Regularly, with increasing intervals","Never, just read once"],correctAnswer:2,explanation:"Regular review with increasing intervals (spaced repetition) is the most effective way to retain information."},{text:"What is the best way to test your understanding?",options:["Rereading the material","Taking practice quizzes","Highlighting key points","Summarizing in your own words"],correctAnswer:3,explanation:"Summarizing in your own words forces you to process and understand the material, making it more likely to stick."}];return{title:`Sample Quiz on ${s||"Study Materials"}`,questions:l.slice(0,e)}}async function Xb(t,e="medium",n,s){return await new Promise(r=>setTimeout(r,2e3)),`Here's a comprehensive answer to your question about study techniques and learning strategies:

Understanding Effective Study Methods

The most effective study techniques are those that engage your brain actively rather than passively. Research shows that active learning methods lead to better retention and understanding compared to passive reading or memorization.

Key Active Learning Strategies:

1. Spaced Repetition
   This technique involves reviewing information at increasing intervals over time. Instead of cramming all at once, you review material after 1 day, then 3 days, then 1 week, and so on. This approach takes advantage of the brain's natural forgetting curve and helps move information from short-term to long-term memory.

2. Active Recall
   Rather than simply re-reading material, actively test yourself on what you've learned. This could involve creating flashcards, taking practice quizzes, or explaining concepts to others. The act of retrieving information from memory strengthens neural pathways and improves retention.

3. Interleaving
   Instead of studying one topic completely before moving to the next, mix different subjects or types of problems. This approach helps you learn to distinguish between different concepts and apply the right strategy to each situation.

4. Elaboration
   Connect new information to what you already know. Create analogies, examples, or explanations that help you understand the material more deeply. The more connections you make, the easier it is to remember and apply the information.

Practical Implementation:

Start by identifying your learning goals and the specific material you need to master. Break down complex topics into smaller, manageable chunks. Create a study schedule that incorporates regular review sessions using spaced repetition.

Use active recall techniques during your study sessions. Instead of just reading, ask yourself questions about the material, create summaries in your own words, or teach the concepts to someone else.

Remember that effective studying is not about the amount of time spent, but about the quality of your engagement with the material. Focus on understanding rather than memorization, and practice applying your knowledge to new situations.`}function I0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Xw(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var xO=["PageUp","PageDown"],wO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],CO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},dp="Slider",[Qb,O7,U7]=Ly(dp),[SO,Noe]=os(dp,[U7]),[V7,Qw]=SO(dp),bO=b.forwardRef((t,e)=>{const{name:n,min:s=0,max:r=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:p=()=>{},onValueCommit:g=()=>{},inverted:y=!1,form:x,...v}=t,C=b.useRef(new Set),w=b.useRef(0),_=o==="horizontal"?$7:B7,[T=[],A]=Xi({prop:u,defaultProp:c,onChange:L=>{var G;(G=[...C.current][w.current])==null||G.focus(),p(L)}}),P=b.useRef(T);function M(L){const U=q7(T,L);D(L,U)}function I(L){D(L,w.current)}function k(){const L=P.current[w.current];T[w.current]!==L&&g(T)}function D(L,U,{commit:G}={commit:!1}){const O=J7(i),W=X7(Math.round((L-s)/i)*i+s,O),$=I0(W,[s,r]);A((z=[])=>{const B=H7(z,$,U);if(Y7(B,l*i)){w.current=B.indexOf($);const V=String(B)!==String(z);return V&&G&&g(B),V?B:z}else return z})}return m.jsx(V7,{scope:t.__scopeSlider,name:n,disabled:a,min:s,max:r,valueIndexToChangeRef:w,thumbs:C.current,values:T,orientation:o,form:x,children:m.jsx(Qb.Provider,{scope:t.__scopeSlider,children:m.jsx(Qb.Slot,{scope:t.__scopeSlider,children:m.jsx(_,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:te(v.onPointerDown,()=>{a||(P.current=T)}),min:s,max:r,inverted:y,onSlideStart:a?void 0:M,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:k,onHomeKeyDown:()=>!a&&D(s,0,{commit:!0}),onEndKeyDown:()=>!a&&D(r,T.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:U})=>{if(!a){const W=xO.includes(L.key)||L.shiftKey&&wO.includes(L.key)?10:1,$=w.current,z=T[$],B=i*W*U;D(z+B,$,{commit:!0})}}})})})})});bO.displayName=dp;var[_O,EO]=SO(dp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$7=b.forwardRef((t,e)=>{const{min:n,max:s,dir:r,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[p,g]=b.useState(null),y=Oe(e,_=>g(_)),x=b.useRef(void 0),v=cp(r),C=v==="ltr",w=C&&!i||!C&&i;function S(_){const T=x.current||p.getBoundingClientRect(),A=[0,T.width],M=DA(A,w?[n,s]:[s,n]);return x.current=T,M(_-T.left)}return m.jsx(_O,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:m.jsx(TO,{dir:v,"data-orientation":"horizontal",...u,ref:y,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const T=S(_.clientX);o==null||o(T)},onSlideMove:_=>{const T=S(_.clientX);a==null||a(T)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:_=>{const A=CO[w?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:A?-1:1})}})})}),B7=b.forwardRef((t,e)=>{const{min:n,max:s,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),p=Oe(e,u),g=b.useRef(void 0),y=!r;function x(v){const C=g.current||u.current.getBoundingClientRect(),w=[0,C.height],_=DA(w,y?[s,n]:[n,s]);return g.current=C,_(v-C.top)}return m.jsx(_O,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:m.jsx(TO,{"data-orientation":"vertical",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const C=x(v.clientY);i==null||i(C)},onSlideMove:v=>{const C=x(v.clientY);o==null||o(C)},onSlideEnd:()=>{g.current=void 0,a==null||a()},onStepKeyDown:v=>{const w=CO[y?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:w?-1:1})}})})}),TO=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Qw(dp,n);return m.jsx(xe.span,{...c,ref:e,onKeyDown:te(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(a(p),p.preventDefault()):xO.concat(wO).includes(p.key)&&(l(p),p.preventDefault())}),onPointerDown:te(t.onPointerDown,p=>{const g=p.target;g.setPointerCapture(p.pointerId),p.preventDefault(),u.thumbs.has(g)?g.focus():s(p)}),onPointerMove:te(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&r(p)}),onPointerUp:te(t.onPointerUp,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&(g.releasePointerCapture(p.pointerId),i(p))})})}),AO="SliderTrack",RO=b.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,r=Qw(AO,n);return m.jsx(xe.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});RO.displayName=AO;var Zb="SliderRange",NO=b.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,r=Qw(Zb,n),i=EO(Zb,n),o=b.useRef(null),a=Oe(e,o),l=r.values.length,c=r.values.map(g=>kO(g,r.min,r.max)),u=l>1?Math.min(...c):0,p=100-Math.max(...c);return m.jsx(xe.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:a,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:p+"%"}})});NO.displayName=Zb;var e_="SliderThumb",PO=b.forwardRef((t,e)=>{const n=O7(t.__scopeSlider),[s,r]=b.useState(null),i=Oe(e,a=>r(a)),o=b.useMemo(()=>s?n().findIndex(a=>a.ref.current===s):-1,[n,s]);return m.jsx(j7,{...t,ref:i,index:o})}),j7=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:s,name:r,...i}=t,o=Qw(e_,n),a=EO(e_,n),[l,c]=b.useState(null),u=Oe(e,S=>c(S)),p=l?o.form||!!l.closest("form"):!0,g=Dw(l),y=o.values[s],x=y===void 0?0:kO(y,o.min,o.max),v=G7(s,o.values.length),C=g==null?void 0:g[a.size],w=C?W7(C,x,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${x}% + ${w}px)`},children:[m.jsx(Qb.ItemSlot,{scope:t.__scopeSlider,children:m.jsx(xe.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:y===void 0?{display:"none"}:t.style,onFocus:te(t.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),p&&m.jsx(MO,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},s)]})});PO.displayName=e_;var z7="RadioBubbleInput",MO=b.forwardRef(({__scopeSlider:t,value:e,...n},s)=>{const r=b.useRef(null),i=Oe(r,s),o=Xw(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),m.jsx(xe.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});MO.displayName=z7;function H7(t=[],e,n){const s=[...t];return s[n]=e,s.sort((r,i)=>r-i)}function kO(t,e,n){const i=100/(n-e)*(t-e);return I0(i,[0,100])}function G7(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function q7(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),s=Math.min(...n);return n.indexOf(s)}function W7(t,e,n){const s=t/2,i=DA([0,50],[0,s]);return(s-i(e)*n)*n}function K7(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Y7(t,e){if(e>0){const n=K7(t);return Math.min(...n)>=e}return!0}function DA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function J7(t){return(String(t).split(".")[1]||"").length}function X7(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var IO=bO,Q7=RO,Z7=NO,eK=PO;const LA=b.forwardRef(({className:t,...e},n)=>m.jsxs(IO,{ref:n,className:Ee("relative flex w-full touch-none select-none items-center",t),...e,children:[m.jsx(Q7,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:m.jsx(Z7,{className:"absolute h-full bg-primary"})}),m.jsx(eK,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));LA.displayName=IO.displayName;var tK=[" ","Enter","ArrowUp","ArrowDown"],nK=[" ","Enter"],ld="Select",[Zw,eC,sK]=Ly(ld),[fp,Poe]=os(ld,[sK,rp]),tC=rp(),[rK,cc]=fp(ld),[iK,oK]=fp(ld),DO=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:r,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:p,disabled:g,required:y,form:x}=t,v=tC(e),[C,w]=b.useState(null),[S,_]=b.useState(null),[T,A]=b.useState(!1),P=cp(c),[M,I]=Xi({prop:s,defaultProp:r??!1,onChange:i,caller:ld}),[k,D]=Xi({prop:o,defaultProp:a,onChange:l,caller:ld}),L=b.useRef(null),U=C?x||!!C.closest("form"):!0,[G,O]=b.useState(new Set),W=Array.from(G).map($=>$.props.value).join(";");return m.jsx(y2,{...v,children:m.jsxs(rK,{required:y,scope:e,trigger:C,onTriggerChange:w,valueNode:S,onValueNodeChange:_,valueNodeHasChildren:T,onValueNodeHasChildrenChange:A,contentId:Ki(),value:k,onValueChange:D,open:M,onOpenChange:I,dir:P,triggerPointerDownPosRef:L,disabled:g,children:[m.jsx(Zw.Provider,{scope:e,children:m.jsx(iK,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback($=>{O(z=>new Set(z).add($))},[]),onNativeOptionRemove:b.useCallback($=>{O(z=>{const B=new Set(z);return B.delete($),B})},[]),children:n})}),U?m.jsxs(rU,{"aria-hidden":!0,required:y,tabIndex:-1,name:u,autoComplete:p,value:k,onChange:$=>D($.target.value),disabled:g,form:x,children:[k===void 0?m.jsx("option",{value:""}):null,Array.from(G)]},W):null]})})};DO.displayName=ld;var LO="SelectTrigger",FO=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...r}=t,i=tC(n),o=cc(LO,n),a=o.disabled||s,l=Oe(e,o.onTriggerChange),c=eC(n),u=b.useRef("touch"),[p,g,y]=oU(v=>{const C=c().filter(_=>!_.disabled),w=C.find(_=>_.value===o.value),S=aU(C,v,w);S!==void 0&&o.onValueChange(S.value)}),x=v=>{a||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return m.jsx(GT,{asChild:!0,...i,children:m.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iU(o.value)?"":void 0,...r,ref:l,onClick:te(r.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&x(v)}),onPointerDown:te(r.onPointerDown,v=>{u.current=v.pointerType;const C=v.target;C.hasPointerCapture(v.pointerId)&&C.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:te(r.onKeyDown,v=>{const C=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&g(v.key),!(C&&v.key===" ")&&tK.includes(v.key)&&(x(),v.preventDefault())})})})});FO.displayName=LO;var OO="SelectValue",UO=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,children:i,placeholder:o="",...a}=t,l=cc(OO,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,p=Oe(e,l.onValueNodeChange);return Nn(()=>{c(u)},[c,u]),m.jsx(xe.span,{...a,ref:p,style:{pointerEvents:"none"},children:iU(l.value)?m.jsx(m.Fragment,{children:o}):i})});UO.displayName=OO;var aK="SelectIcon",VO=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...r}=t;return m.jsx(xe.span,{"aria-hidden":!0,...r,ref:e,children:s||""})});VO.displayName=aK;var lK="SelectPortal",$O=t=>m.jsx(Fy,{asChild:!0,...t});$O.displayName=lK;var cd="SelectContent",BO=b.forwardRef((t,e)=>{const n=cc(cd,t.__scopeSelect),[s,r]=b.useState();if(Nn(()=>{r(new DocumentFragment)},[]),!n.open){const i=s;return i?gd.createPortal(m.jsx(jO,{scope:t.__scopeSelect,children:m.jsx(Zw.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),i):null}return m.jsx(zO,{...t,ref:e})});BO.displayName=cd;var Nr=10,[jO,uc]=fp(cd),cK="SelectContentImpl",uK=ed("SelectContent.RemoveScroll"),zO=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:x,hideWhenDetached:v,avoidCollisions:C,...w}=t,S=cc(cd,n),[_,T]=b.useState(null),[A,P]=b.useState(null),M=Oe(e,Y=>T(Y)),[I,k]=b.useState(null),[D,L]=b.useState(null),U=eC(n),[G,O]=b.useState(!1),W=b.useRef(!1);b.useEffect(()=>{if(_)return vA(_)},[_]),yA();const $=b.useCallback(Y=>{const[_e,...re]=U().map(Re=>Re.ref.current),[we]=re.slice(-1),Te=document.activeElement;for(const Re of Y)if(Re===Te||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===_e&&A&&(A.scrollTop=0),Re===we&&A&&(A.scrollTop=A.scrollHeight),Re==null||Re.focus(),document.activeElement!==Te))return},[U,A]),z=b.useCallback(()=>$([I,_]),[$,I,_]);b.useEffect(()=>{G&&z()},[G,z]);const{onOpenChange:B,triggerPointerDownPosRef:V}=S;b.useEffect(()=>{if(_){let Y={x:0,y:0};const _e=we=>{var Te,Re;Y={x:Math.abs(Math.round(we.pageX)-(((Te=V.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(we.pageY)-(((Re=V.current)==null?void 0:Re.y)??0))}},re=we=>{Y.x<=10&&Y.y<=10?we.preventDefault():_.contains(we.target)||B(!1),document.removeEventListener("pointermove",_e),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",re,{capture:!0})}}},[_,B,V]),b.useEffect(()=>{const Y=()=>B(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[B]);const[H,Q]=oU(Y=>{const _e=U().filter(Te=>!Te.disabled),re=_e.find(Te=>Te.ref.current===document.activeElement),we=aU(_e,Y,re);we&&setTimeout(()=>we.ref.current.focus())}),J=b.useCallback((Y,_e,re)=>{const we=!W.current&&!re;(S.value!==void 0&&S.value===_e||we)&&(k(Y),we&&(W.current=!0))},[S.value]),se=b.useCallback(()=>_==null?void 0:_.focus(),[_]),ye=b.useCallback((Y,_e,re)=>{const we=!W.current&&!re;(S.value!==void 0&&S.value===_e||we)&&L(Y)},[S.value]),Me=s==="popper"?t_:HO,De=Me===t_?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:x,hideWhenDetached:v,avoidCollisions:C}:{};return m.jsx(jO,{scope:n,content:_,viewport:A,onViewportChange:P,itemRefCallback:J,selectedItem:I,onItemLeave:se,itemTextRefCallback:ye,focusSelectedItem:z,selectedItemText:D,position:s,isPositioned:G,searchRef:H,children:m.jsx(zw,{as:uK,allowPinchZoom:!0,children:m.jsx(Bw,{asChild:!0,trapped:S.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:te(r,Y=>{var _e;(_e=S.trigger)==null||_e.focus({preventScroll:!0}),Y.preventDefault()}),children:m.jsx(ep,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:m.jsx(Me,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Y=>Y.preventDefault(),...w,...De,onPlaced:()=>O(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:te(w.onKeyDown,Y=>{const _e=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!_e&&Y.key.length===1&&Q(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let we=U().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const Te=Y.target,Re=we.indexOf(Te);we=we.slice(Re+1)}setTimeout(()=>$(we)),Y.preventDefault()}})})})})})})});zO.displayName=cK;var dK="SelectItemAlignedPosition",HO=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...r}=t,i=cc(cd,n),o=uc(cd,n),[a,l]=b.useState(null),[c,u]=b.useState(null),p=Oe(e,M=>u(M)),g=eC(n),y=b.useRef(!1),x=b.useRef(!0),{viewport:v,selectedItem:C,selectedItemText:w,focusSelectedItem:S}=o,_=b.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&C&&w){const M=i.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),D=w.getBoundingClientRect();if(i.dir!=="rtl"){const Te=D.left-I.left,Re=k.left-Te,At=M.left-Re,gn=M.width+At,ui=Math.max(gn,I.width),di=window.innerWidth-Nr,so=I0(Re,[Nr,Math.max(Nr,di-ui)]);a.style.minWidth=gn+"px",a.style.left=so+"px"}else{const Te=I.right-D.right,Re=window.innerWidth-k.right-Te,At=window.innerWidth-M.right-Re,gn=M.width+At,ui=Math.max(gn,I.width),di=window.innerWidth-Nr,so=I0(Re,[Nr,Math.max(Nr,di-ui)]);a.style.minWidth=gn+"px",a.style.right=so+"px"}const L=g(),U=window.innerHeight-Nr*2,G=v.scrollHeight,O=window.getComputedStyle(c),W=parseInt(O.borderTopWidth,10),$=parseInt(O.paddingTop,10),z=parseInt(O.borderBottomWidth,10),B=parseInt(O.paddingBottom,10),V=W+$+G+B+z,H=Math.min(C.offsetHeight*5,V),Q=window.getComputedStyle(v),J=parseInt(Q.paddingTop,10),se=parseInt(Q.paddingBottom,10),ye=M.top+M.height/2-Nr,Me=U-ye,De=C.offsetHeight/2,Y=C.offsetTop+De,_e=W+$+Y,re=V-_e;if(_e<=ye){const Te=L.length>0&&C===L[L.length-1].ref.current;a.style.bottom="0px";const Re=c.clientHeight-v.offsetTop-v.offsetHeight,At=Math.max(Me,De+(Te?se:0)+Re+z),gn=_e+At;a.style.height=gn+"px"}else{const Te=L.length>0&&C===L[0].ref.current;a.style.top="0px";const At=Math.max(ye,W+v.offsetTop+(Te?J:0)+De)+re;a.style.height=At+"px",v.scrollTop=_e-ye+v.offsetTop}a.style.margin=`${Nr}px 0`,a.style.minHeight=H+"px",a.style.maxHeight=U+"px",s==null||s(),requestAnimationFrame(()=>y.current=!0)}},[g,i.trigger,i.valueNode,a,c,v,C,w,i.dir,s]);Nn(()=>_(),[_]);const[T,A]=b.useState();Nn(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const P=b.useCallback(M=>{M&&x.current===!0&&(_(),S==null||S(),x.current=!1)},[_,S]);return m.jsx(hK,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:P,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:m.jsx(xe.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});HO.displayName=dK;var fK="SelectPopperPosition",t_=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=Nr,...i}=t,o=tC(n);return m.jsx(qT,{...o,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});t_.displayName=fK;var[hK,FA]=fp(cd,{}),n_="SelectViewport",GO=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...r}=t,i=uc(n_,n),o=FA(n_,n),a=Oe(e,i.onViewportChange),l=b.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),m.jsx(Zw.Slot,{scope:n,children:m.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:te(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&p){const y=Math.abs(l.current-u.scrollTop);if(y>0){const x=window.innerHeight-Nr*2,v=parseFloat(p.style.minHeight),C=parseFloat(p.style.height),w=Math.max(v,C);if(w<x){const S=w+y,_=Math.min(x,S),T=S-_;p.style.height=_+"px",p.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,p.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});GO.displayName=n_;var qO="SelectGroup",[pK,mK]=fp(qO),gK=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=Ki();return m.jsx(pK,{scope:n,id:r,children:m.jsx(xe.div,{role:"group","aria-labelledby":r,...s,ref:e})})});gK.displayName=qO;var WO="SelectLabel",KO=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=mK(WO,n);return m.jsx(xe.div,{id:r.id,...s,ref:e})});KO.displayName=WO;var D0="SelectItem",[yK,YO]=fp(D0),JO=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:i,...o}=t,a=cc(D0,n),l=uc(D0,n),c=a.value===s,[u,p]=b.useState(i??""),[g,y]=b.useState(!1),x=Oe(e,S=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,S,s,r)}),v=Ki(),C=b.useRef("touch"),w=()=>{r||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(yK,{scope:n,value:s,disabled:r,textId:v,isSelected:c,onItemTextChange:b.useCallback(S=>{p(_=>_||((S==null?void 0:S.textContent)??"").trim())},[]),children:m.jsx(Zw.ItemSlot,{scope:n,value:s,disabled:r,textValue:u,children:m.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":g?"":void 0,"aria-selected":c&&g,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:x,onFocus:te(o.onFocus,()=>y(!0)),onBlur:te(o.onBlur,()=>y(!1)),onClick:te(o.onClick,()=>{C.current!=="mouse"&&w()}),onPointerUp:te(o.onPointerUp,()=>{C.current==="mouse"&&w()}),onPointerDown:te(o.onPointerDown,S=>{C.current=S.pointerType}),onPointerMove:te(o.onPointerMove,S=>{var _;C.current=S.pointerType,r?(_=l.onItemLeave)==null||_.call(l):C.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:te(o.onPointerLeave,S=>{var _;S.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:te(o.onKeyDown,S=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&S.key===" "||(nK.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});JO.displayName=D0;var zp="SelectItemText",XO=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:r,...i}=t,o=cc(zp,n),a=uc(zp,n),l=YO(zp,n),c=oK(zp,n),[u,p]=b.useState(null),g=Oe(e,w=>p(w),l.onItemTextChange,w=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,w,l.value,l.disabled)}),y=u==null?void 0:u.textContent,x=b.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:C}=c;return Nn(()=>(v(x),()=>C(x)),[v,C,x]),m.jsxs(m.Fragment,{children:[m.jsx(xe.span,{id:l.textId,...i,ref:g}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?gd.createPortal(i.children,o.valueNode):null]})});XO.displayName=zp;var QO="SelectItemIndicator",ZO=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return YO(QO,n).isSelected?m.jsx(xe.span,{"aria-hidden":!0,...s,ref:e}):null});ZO.displayName=QO;var s_="SelectScrollUpButton",eU=b.forwardRef((t,e)=>{const n=uc(s_,t.__scopeSelect),s=FA(s_,t.__scopeSelect),[r,i]=b.useState(!1),o=Oe(e,s.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(nU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});eU.displayName=s_;var r_="SelectScrollDownButton",tU=b.forwardRef((t,e)=>{const n=uc(r_,t.__scopeSelect),s=FA(r_,t.__scopeSelect),[r,i]=b.useState(!1),o=Oe(e,s.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(nU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});tU.displayName=r_;var nU=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=t,i=uc("SelectScrollButton",n),o=b.useRef(null),a=eC(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Nn(()=>{var u;const c=a().find(p=>p.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),m.jsx(xe.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:te(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:te(r.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:te(r.onPointerLeave,()=>{l()})})}),vK="SelectSeparator",sU=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return m.jsx(xe.div,{"aria-hidden":!0,...s,ref:e})});sU.displayName=vK;var i_="SelectArrow",xK=b.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,r=tC(n),i=cc(i_,n),o=uc(i_,n);return i.open&&o.position==="popper"?m.jsx(WT,{...r,...s,ref:e}):null});xK.displayName=i_;var wK="SelectBubbleInput",rU=b.forwardRef(({__scopeSelect:t,value:e,...n},s)=>{const r=b.useRef(null),i=Oe(s,r),o=Xw(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),m.jsx(xe.select,{...n,style:{...hD,...n.style},ref:i,defaultValue:e})});rU.displayName=wK;function iU(t){return t===""||t===void 0}function oU(t){const e=_s(t),n=b.useRef(""),s=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,i]}function aU(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=CK(t,Math.max(i,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function CK(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var SK=DO,lU=FO,bK=UO,_K=VO,EK=$O,cU=BO,TK=GO,uU=KO,dU=JO,AK=XO,RK=ZO,fU=eU,hU=tU,pU=sU;const mU=SK,gU=bK,OA=b.forwardRef(({className:t,children:e,...n},s)=>m.jsxs(lU,{ref:s,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,m.jsx(_K,{asChild:!0,children:m.jsx(UD,{className:"h-4 w-4 opacity-50"})})]}));OA.displayName=lU.displayName;const yU=b.forwardRef(({className:t,...e},n)=>m.jsx(fU,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(d5,{className:"h-4 w-4"})}));yU.displayName=fU.displayName;const vU=b.forwardRef(({className:t,...e},n)=>m.jsx(hU,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(UD,{className:"h-4 w-4"})}));vU.displayName=hU.displayName;const UA=b.forwardRef(({className:t,children:e,position:n="popper",...s},r)=>m.jsx(EK,{children:m.jsxs(cU,{ref:r,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...s,children:[m.jsx(yU,{}),m.jsx(TK,{className:Ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m.jsx(vU,{})]})}));UA.displayName=cU.displayName;const NK=b.forwardRef(({className:t,...e},n)=>m.jsx(uU,{ref:n,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));NK.displayName=uU.displayName;const Ku=b.forwardRef(({className:t,children:e,...n},s)=>m.jsxs(dU,{ref:s,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(RK,{children:m.jsx(hn,{className:"h-4 w-4"})})}),m.jsx(AK,{children:e})]}));Ku.displayName=dU.displayName;const PK=b.forwardRef(({className:t,...e},n)=>m.jsx(pU,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",t),...e}));PK.displayName=pU.displayName;function MK({sessionId:t,flashcards:e,files:n=[],onFlashcardAdded:s,onFlashcardsAdded:r,onMasteryToggled:i}){var B,V;const[o,a]=b.useState(""),[l,c]=b.useState(""),[u,p]=b.useState(0),[g,y]=b.useState(!1),[x,v]=b.useState(!1),[C,w]=b.useState(!1),[S,_]=b.useState(!1),[T,A]=b.useState(null),[P,M]=b.useState(!1),{toast:I}=Cr(),[k,D]=b.useState({count:5,complexity:"medium"}),L=async()=>{if(!o.trim()||!l.trim()){I({title:"Error",description:"Both sides of the flashcard must be filled in",variant:"destructive"});return}try{const H=await KN(t,[{front:o,back:l,mastered:!1}]),Q=H[H.length-1];s(Q),a(""),c(""),v(!1),I({title:"Success",description:"New flashcard added"})}catch{I({title:"Error",description:"Failed to add flashcard",variant:"destructive"})}},U=async()=>{if(!T||!T.front.trim()||!T.back.trim()){I({title:"Error",description:"Both sides of the flashcard must be filled in",variant:"destructive"});return}try{await YN(t,{flashcards:e.map(H=>H.id===T.id?T:H)}),_(!1),A(null),I({title:"Success",description:"Flashcard updated"})}catch{I({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},G=async H=>{var J;const Q=e.map(se=>se.id===H?{...se,mastered:!se.mastered}:se);try{await YN(t,{flashcards:Q}),i(H,!((J=e.find(se=>se.id===H))!=null&&J.mastered)),u<e.length-1&&O()}catch{I({title:"Error",description:"Failed to update flashcard status",variant:"destructive"})}},O=()=>{y(!1),p((u+1)%e.length)},W=()=>{y(!1),p((u-1+e.length)%e.length)},$=()=>{e.length>0&&(A({...e[u]}),_(!0))},z=async()=>{w(!0);try{let H="";const Q=k.count,J=k.complexity;let se=n;if(n.length>0&&n[0].textChunks&&n[0].textChunks.length>0&&(se=n),se.length>0){const _e=se.map(re=>re.name.replace(".pdf","")).join(", ");H=`Generate ${Q} educational flashcards about ${_e}`}else if(e.length>0){const _e=e.map(re=>re.front).join(", ");H=`Generate ${Q} educational flashcards about topics similar to these: ${_e.substring(0,300)}`}else H=`Generate ${Q} educational flashcards about general study skills and learning strategies`;const ye=n.length>0?n.map(_e=>_e.content).join(`
`):H,De=(await L7(ye,k.count,k.complexity,n,t)).map(_e=>({front:_e.front,back:_e.back,mastered:!1})),Y=await KN(t,De);r&&Y.length>0?r(Y):Y.forEach(_e=>{s(_e)}),I({title:"Success",description:`${Y.length} flashcards generated`})}catch(H){console.error("Error generating flashcards:",H),I({title:"Error",description:H instanceof Error?H.message:"Failed to generate flashcards",variant:"destructive"})}finally{w(!1)}};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcards"}),m.jsx("p",{className:"text-gray-600",children:"Review and memorize key concepts with flashcards"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs(Kl,{open:P,onOpenChange:M,children:[m.jsx(Jh,{asChild:!0,children:m.jsxs(he,{variant:"outline",className:"flex items-center gap-2",children:[m.jsx(gb,{className:"h-4 w-4"}),"Options"]})}),m.jsxs(oa,{children:[m.jsx(aa,{children:m.jsx(la,{children:"Generation Settings"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Number of flashcards to generate"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(LA,{value:[k.count],min:1,max:20,step:1,onValueChange:H=>D({...k,count:H[0]}),className:"flex-grow"}),m.jsx("span",{className:"w-8 text-center font-medium",children:k.count})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Complexity level"}),m.jsxs(mU,{value:k.complexity,onValueChange:H=>D({...k,complexity:H}),children:[m.jsx(OA,{children:m.jsx(gU,{placeholder:"Select complexity"})}),m.jsxs(UA,{children:[m.jsx(Ku,{value:"simple",children:"Simple"}),m.jsx(Ku,{value:"medium",children:"Medium"}),m.jsx(Ku,{value:"advanced",children:"Advanced"})]})]})]})]}),m.jsx(hf,{children:m.jsx(he,{onClick:()=>M(!1),children:"Save Settings"})})]})]}),m.jsxs(he,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:z,disabled:C,children:[C?m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):m.jsx(d0,{className:"h-4 w-4"}),"Generate with AI"]}),m.jsxs(Kl,{open:x,onOpenChange:v,children:[m.jsx(Jh,{asChild:!0,children:m.jsxs(he,{className:"gradient-bg",children:[m.jsx(IR,{className:"mr-2 h-4 w-4"}),"Add Flashcard"]})}),m.jsxs(oa,{children:[m.jsx(aa,{children:m.jsx(la,{children:"Create New Flashcard"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"front",children:"Front"}),m.jsx(Rc,{id:"front",placeholder:"Question or term",rows:3,value:o,onChange:H=>a(H.target.value)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"back",children:"Back"}),m.jsx(Rc,{id:"back",placeholder:"Answer or definition",rows:5,value:l,onChange:H=>c(H.target.value)})]})]}),m.jsxs(hf,{children:[m.jsx(he,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),m.jsx(he,{className:"gradient-bg",onClick:L,children:"Create Flashcard"})]})]})]})]})]}),e.length>0?m.jsxs("div",{children:[m.jsxs("div",{className:"bg-gray-100 py-4 px-6 rounded-lg mb-6 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm text-gray-600",children:[m.jsx("span",{className:"font-medium",children:u+1})," of ",e.length," flashcards"]}),m.jsxs("div",{className:"text-sm",children:[m.jsx("span",{className:"text-green-600 font-medium",children:e.filter(H=>H.mastered).length})," mastered"]})]}),m.jsx("div",{className:"flex justify-center mb-8",children:m.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>y(!g),children:m.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${g?"rotate-y-180":""}`,children:[m.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:m.jsx("span",{className:"text-purple-600 font-semibold",children:u+1})}),m.jsx("p",{className:"text-center text-xl font-medium",children:(B=e[u])==null?void 0:B.front}),m.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),m.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[m.jsx("p",{className:"text-center text-lg",children:(V=e[u])==null?void 0:V.back}),m.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx(he,{variant:"outline",onClick:W,disabled:e.length<=1,children:"Previous"}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(he,{variant:"outline",className:"border-blue-300 text-blue-600 hover:bg-blue-50",onClick:$,children:[m.jsx(w5,{className:"mr-2 h-4 w-4"}),"Edit"]}),m.jsxs(he,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>G(e[u].id),disabled:e[u].mastered,children:[m.jsx(Uy,{className:"mr-2 h-4 w-4"}),"Still Learning"]}),m.jsxs(he,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50",onClick:()=>G(e[u].id),disabled:e[u].mastered,children:[m.jsx(hn,{className:"mr-2 h-4 w-4"}),"Mastered"]})]}),m.jsx(he,{variant:"outline",onClick:O,disabled:e.length<=1,children:"Next"})]})]}):m.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[m.jsx(OD,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards yet"}),m.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create your first flashcard or let AI generate some for you"}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsxs(he,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50",onClick:z,disabled:C,children:[C?m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500 mr-2"}):m.jsx(d0,{className:"mr-2 h-4 w-4"}),"Generate with AI"]}),m.jsxs(he,{className:"gradient-bg",onClick:()=>v(!0),children:[m.jsx(IR,{className:"mr-2 h-4 w-4"}),"Add Manually"]})]})]}),m.jsx(Kl,{open:S,onOpenChange:_,children:m.jsxs(oa,{children:[m.jsx(aa,{children:m.jsx(la,{children:"Edit Flashcard"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"edit-front",children:"Front"}),m.jsx(Rc,{id:"edit-front",placeholder:"Question or term",rows:3,value:(T==null?void 0:T.front)||"",onChange:H=>A(Q=>Q?{...Q,front:H.target.value}:null)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{htmlFor:"edit-back",children:"Back"}),m.jsx(Rc,{id:"edit-back",placeholder:"Answer or definition",rows:5,value:(T==null?void 0:T.back)||"",onChange:H=>A(Q=>Q?{...Q,back:H.target.value}:null)})]})]}),m.jsxs(hf,{children:[m.jsx(he,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),m.jsx(he,{className:"gradient-bg",onClick:U,children:"Update Flashcard"})]})]})}),m.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}var nC="Checkbox",[kK,Moe]=os(nC),[IK,VA]=kK(nC);function DK(t){const{__scopeCheckbox:e,checked:n,children:s,defaultChecked:r,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:p}=t,[g,y]=Xi({prop:n,defaultProp:r??!1,onChange:l,caller:nC}),[x,v]=b.useState(null),[C,w]=b.useState(null),S=b.useRef(!1),_=x?!!o||!!x.closest("form"):!0,T={checked:g,disabled:i,setChecked:y,control:x,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:Yl(r)?!1:r,isFormControl:_,bubbleInput:C,setBubbleInput:w};return m.jsx(IK,{scope:e,...T,children:LK(p)?p(T):s})}var xU="CheckboxTrigger",wU=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...s},r)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:x}=VA(xU,t),v=Oe(r,u),C=b.useRef(l);return b.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const S=()=>p(C.current);return w.addEventListener("reset",S),()=>w.removeEventListener("reset",S)}},[i,p]),m.jsx(xe.button,{type:"button",role:"checkbox","aria-checked":Yl(l)?"mixed":l,"aria-required":c,"data-state":EU(l),"data-disabled":a?"":void 0,disabled:a,value:o,...s,ref:v,onKeyDown:te(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:te(n,w=>{p(S=>Yl(S)?!0:!S),x&&y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})})});wU.displayName=xU;var $A=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:s,checked:r,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...p}=t;return m.jsx(DK,{__scopeCheckbox:n,checked:r,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:s,form:u,value:l,internal_do_not_use_render:({isFormControl:g})=>m.jsxs(m.Fragment,{children:[m.jsx(wU,{...p,ref:e,__scopeCheckbox:n}),g&&m.jsx(_U,{__scopeCheckbox:n})]})})});$A.displayName=nC;var CU="CheckboxIndicator",SU=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:s,...r}=t,i=VA(CU,n);return m.jsx(er,{present:s||Yl(i.checked)||i.checked===!0,children:m.jsx(xe.span,{"data-state":EU(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...t.style}})})});SU.displayName=CU;var bU="CheckboxBubbleInput",_U=b.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:p,bubbleInput:g,setBubbleInput:y}=VA(bU,t),x=Oe(n,y),v=Xw(i),C=Dw(s);b.useEffect(()=>{const S=g;if(!S)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"checked").set,P=!r.current;if(v!==i&&A){const M=new Event("click",{bubbles:P});S.indeterminate=Yl(i),A.call(S,Yl(i)?!1:i),S.dispatchEvent(M)}},[g,v,i,r]);const w=b.useRef(Yl(i)?!1:i);return m.jsx(xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:u,form:p,...e,tabIndex:-1,ref:x,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});_U.displayName=bU;function LK(t){return typeof t=="function"}function Yl(t){return t==="indeterminate"}function EU(t){return Yl(t)?"indeterminate":t?"checked":"unchecked"}const Hp=b.forwardRef(({className:t,...e},n)=>m.jsx($A,{ref:n,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:m.jsx(SU,{className:Ee("flex items-center justify-center text-current"),children:m.jsx(hn,{className:"h-4 w-4"})})}));Hp.displayName=$A.displayName;function FK(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var OK=["color"],UK=b.forwardRef(function(t,e){var n=t.color,s=n===void 0?"currentColor":n,r=FK(t,OK);return b.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),b.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),BA="Radio",[VK,TU]=os(BA),[$K,BK]=VK(BA),AU=b.forwardRef((t,e)=>{const{__scopeRadio:n,name:s,checked:r=!1,required:i,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[p,g]=b.useState(null),y=Oe(e,C=>g(C)),x=b.useRef(!1),v=p?c||!!p.closest("form"):!0;return m.jsxs($K,{scope:n,checked:r,disabled:o,children:[m.jsx(xe.button,{type:"button",role:"radio","aria-checked":r,"data-state":MU(r),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:y,onClick:te(t.onClick,C=>{r||l==null||l(),v&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),v&&m.jsx(PU,{control:p,bubbles:!x.current,name:s,value:a,checked:r,required:i,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});AU.displayName=BA;var RU="RadioIndicator",NU=b.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:s,...r}=t,i=BK(RU,n);return m.jsx(er,{present:s||i.checked,children:m.jsx(xe.span,{"data-state":MU(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})})});NU.displayName=RU;var jK="RadioBubbleInput",PU=b.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:s=!0,...r},i)=>{const o=b.useRef(null),a=Oe(o,i),l=Xw(n),c=Dw(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==n&&y){const x=new Event("click",{bubbles:s});y.call(u,n),u.dispatchEvent(x)}},[l,n,s]),m.jsx(xe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PU.displayName=jK;function MU(t){return t?"checked":"unchecked"}var zK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sC="RadioGroup",[HK,koe]=os(sC,[up,TU]),kU=up(),IU=TU(),[GK,qK]=HK(sC),DU=b.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:s,defaultValue:r,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:p,...g}=t,y=kU(n),x=cp(c),[v,C]=Xi({prop:i,defaultProp:r??null,onChange:p,caller:sC});return m.jsx(GK,{scope:n,name:s,required:o,disabled:a,value:v,onValueChange:C,children:m.jsx(bA,{asChild:!0,...y,orientation:l,dir:x,loop:u,children:m.jsx(xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:x,...g,ref:e})})})});DU.displayName=sC;var LU="RadioGroupItem",FU=b.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:s,...r}=t,i=qK(LU,n),o=i.disabled||s,a=kU(n),l=IU(n),c=b.useRef(null),u=Oe(e,c),p=i.value===r.value,g=b.useRef(!1);return b.useEffect(()=>{const y=v=>{zK.includes(v.key)&&(g.current=!0)},x=()=>g.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",x)}},[]),m.jsx(_A,{asChild:!0,...a,focusable:!o,active:p,children:m.jsx(AU,{disabled:o,required:i.required,checked:p,...l,...r,name:i.name,ref:u,onCheck:()=>i.onValueChange(r.value),onKeyDown:te(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:te(r.onFocus,()=>{var y;g.current&&((y=c.current)==null||y.click())})})})});FU.displayName=LU;var WK="RadioGroupIndicator",OU=b.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...s}=t,r=IU(n);return m.jsx(NU,{...r,...s,ref:e})});OU.displayName=WK;var UU=DU,VU=FU,KK=OU;const Sm=b.forwardRef(({className:t,...e},n)=>m.jsx(UU,{className:Ee("grid gap-2",t),...e,ref:n}));Sm.displayName=UU.displayName;const Pr=b.forwardRef(({className:t,...e},n)=>m.jsx(VU,{ref:n,className:Ee("aspect-square h-5 w-5 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:m.jsx(KK,{className:"flex items-center justify-center",children:m.jsx(UK,{className:"h-3.5 w-3.5 fill-primary"})})}));Pr.displayName=VU.displayName;function YK({sessionId:t,quizzes:e,onQuizAdded:n}){const[s,r]=b.useState(null),[i,o]=b.useState(0),[a,l]=b.useState(null),[c,u]=b.useState(!1),[p,g]=b.useState(0),[y,x]=b.useState(!1),[v,C]=b.useState(!1),[w,S]=b.useState(!1),[_,T]=b.useState(!1),[A,P]=b.useState({questionCount:5,difficulty:"medium",topic:"",showExplanations:!0,questionTypes:["multiple-choice"]}),{toast:M}=Cr(),I=O=>{r(O),o(0),l(null),u(!1),g(0),x(!1)},k=O=>{c||l(O)},D=()=>{a===null||!s||(u(!0),a===s.questions[i].correctAnswer&&g(p+1))},L=()=>{s&&(i<s.questions.length-1?(o(i+1),l(null),u(!1)):x(!0))},U=()=>{!s||i===0||(o(i-1),l(null),u(!1))},G=async()=>{S(!0);try{const O=await nO(t);if(!O||!O.files||O.files.length===0){M({title:"No study materials",description:"Please upload PDF files first to generate quiz questions from your content",variant:"destructive"}),S(!1);return}const W=O.files.map(Q=>Q.name.replace(".pdf","")).join(", "),$=A.topic.trim()?A.topic:W;let z=`Generate a quiz about ${$} with ${A.questionCount} questions`;switch(A.difficulty){case"easy":z+=" at a beginner level";break;case"medium":z+=" at an intermediate level";break;case"hard":z+=" at an advanced level with challenging questions";break}A.showExplanations&&(z+=" with detailed explanations for each correct answer");const B=await F7(z,A.questionCount,A.difficulty,$,A.showExplanations,A.questionTypes,O.files,t),V=B.questions.slice(0,A.questionCount),H={id:`quiz_${Date.now()}`,title:B.title,questions:V.map((Q,J)=>({id:`q_${Date.now()}_${J}`,...Q}))};await C7(t,H),n(H),M({title:"Success",description:"New quiz generated successfully"})}catch(O){console.error("Error generating quiz:",O),M({title:"Error",description:"Failed to generate quiz",variant:"destructive"})}finally{S(!1)}};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Quizzes"}),m.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs(Kl,{open:_,onOpenChange:T,children:[m.jsx(Jh,{asChild:!0,children:m.jsxs(he,{variant:"outline",className:"flex items-center gap-2",children:[m.jsx(gb,{className:"h-4 w-4"}),"Quiz Options"]})}),m.jsxs(oa,{children:[m.jsx(aa,{children:m.jsx(la,{children:"Quiz Generation Settings"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Number of questions"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(LA,{value:[A.questionCount],min:3,max:15,step:1,onValueChange:O=>P({...A,questionCount:O[0]}),className:"flex-grow"}),m.jsx("span",{className:"w-8 text-center font-medium",children:A.questionCount})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Difficulty level"}),m.jsxs(mU,{value:A.difficulty,onValueChange:O=>P({...A,difficulty:O}),children:[m.jsx(OA,{children:m.jsx(gU,{placeholder:"Select difficulty"})}),m.jsxs(UA,{children:[m.jsx(Ku,{value:"easy",children:"Easy"}),m.jsx(Ku,{value:"medium",children:"Medium"}),m.jsx(Ku,{value:"hard",children:"Hard"})]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Specific Topic (optional)"}),m.jsx(pr,{id:"topic",placeholder:"Leave blank to generate from uploaded files",value:A.topic,onChange:O=>P({...A,topic:O.target.value})}),m.jsx("p",{className:"text-xs text-gray-500",children:"If left blank, quiz will be generated based on your study materials"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ke,{children:"Question Types"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Hp,{id:"multiple-choice",checked:A.questionTypes.includes("multiple-choice"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"multiple-choice"]:A.questionTypes.filter($=>$!=="multiple-choice");P({...A,questionTypes:W.length>0?W:["multiple-choice"]})}}),m.jsx(Ke,{htmlFor:"multiple-choice",children:"Multiple Choice"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Hp,{id:"true-false",checked:A.questionTypes.includes("true-false"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"true-false"]:A.questionTypes.filter($=>$!=="true-false");P({...A,questionTypes:W})}}),m.jsx(Ke,{htmlFor:"true-false",children:"True/False"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Hp,{id:"short-answer",checked:A.questionTypes.includes("short-answer"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"short-answer"]:A.questionTypes.filter($=>$!=="short-answer");P({...A,questionTypes:W})}}),m.jsx(Ke,{htmlFor:"short-answer",children:"Short Answer"})]})]}),m.jsx("p",{className:"text-xs text-gray-500",children:"Select the types of questions you want in your quiz"})]}),m.jsxs("div",{className:"flex items-start space-x-2",children:[m.jsx(Hp,{id:"explanations",checked:A.showExplanations,onCheckedChange:O=>P({...A,showExplanations:O===!0})}),m.jsxs("div",{className:"grid gap-1.5 leading-none",children:[m.jsx(Ke,{htmlFor:"explanations",children:"Include answer explanations"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Show detailed explanations after answering each question"})]})]})]}),m.jsx(hf,{children:m.jsx(he,{onClick:()=>T(!1),children:"Save Settings"})})]})]}),m.jsxs(he,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:G,disabled:w,children:[w?m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):m.jsx(d0,{className:"h-4 w-4"}),"Generate with AI"]})]})]}),s?y?m.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full gradient-bg mx-auto flex items-center justify-center mb-4",children:m.jsx(hn,{className:"h-8 w-8 text-white"})}),m.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Completed!"}),m.jsxs("p",{className:"text-gray-600 mb-2",children:["Your score: ",p," out of ",s.questions.length]}),m.jsxs("p",{className:"text-gray-600 mb-6",children:[Math.round(p/s.questions.length*100),"% correct"]}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx(he,{variant:"outline",onClick:()=>I(s),children:"Retry Quiz"}),m.jsx(he,{className:"gradient-bg",onClick:()=>r(null),children:"Back to Quizzes"})]})]}):m.jsxs("div",{className:"bg-white rounded-lg border",children:[m.jsxs("div",{className:"border-b p-6",children:[m.jsx("h3",{className:"text-xl font-semibold",children:s.title}),m.jsxs("div",{className:"flex justify-between items-center mt-2",children:[m.jsxs("span",{className:"text-gray-600",children:["Question ",i+1," of ",s.questions.length]}),m.jsx(he,{variant:"ghost",onClick:()=>r(null),children:"Exit Quiz"})]})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h4",{className:"text-lg font-medium mb-4",children:s.questions[i].text}),m.jsx(Sm,{value:a==null?void 0:a.toString(),onValueChange:O=>k(parseInt(O)),className:"space-y-3",disabled:c,children:s.questions[i].options.map((O,W)=>{const $=W===s.questions[i].correctAnswer,z=a===W,B=c&&z&&!$,V=c&&$;let H="flex items-center space-x-3 p-4 rounded-md border ";return c?V?H+="border-green-500 bg-green-50":B?H+="border-red-500 bg-red-50":H+="border-gray-200":z?H+="border-purple-500 bg-purple-50":H+="border-gray-200 hover:border-gray-300",m.jsxs("div",{className:H,children:[m.jsx(Pr,{value:W.toString(),id:`option-${W}`}),m.jsx(Ke,{htmlFor:`option-${W}`,className:"flex-grow cursor-pointer",children:O}),c&&$&&m.jsx(hn,{className:"h-5 w-5 text-green-600"}),c&&B&&m.jsx(Uy,{className:"h-5 w-5 text-red-600"})]},W)})})]}),c&&m.jsxs("div",{className:`p-4 rounded-md ${a===s.questions[i].correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} mb-6`,children:[m.jsx("p",{className:`font-medium mb-1 ${a===s.questions[i].correctAnswer?"text-green-600":"text-red-600"}`,children:a===s.questions[i].correctAnswer?"Correct!":"Incorrect"}),m.jsx("p",{className:"text-gray-700",children:s.questions[i].explanation||"No explanation available."})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx(he,{variant:"outline",disabled:i===0||!c,onClick:U,children:"Previous"}),c?m.jsx(he,{className:"gradient-bg",onClick:L,children:i<s.questions.length-1?"Next Question":"Finish Quiz"}):m.jsx(he,{className:"gradient-bg",onClick:D,disabled:a===null,children:"Check Answer"})]})]})]}):m.jsx("div",{children:e.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(O=>m.jsxs(Bi,{className:"card-hover",children:[m.jsx(Jo,{children:m.jsx(Ba,{children:O.title})}),m.jsx(Xo,{children:m.jsxs("p",{className:"text-sm text-gray-500",children:[O.questions.length," questions"]})}),m.jsx(k0,{children:m.jsx(he,{className:"gradient-bg w-full",onClick:()=>I(O),children:"Start Quiz"})})]},O.id))}):m.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[m.jsx("svg",{className:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes yet"}),m.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate a quiz with AI based on your study materials"}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m.jsxs(he,{variant:"outline",onClick:()=>T(!0),children:[m.jsx(gb,{className:"mr-2 h-4 w-4"}),"Quiz Options"]}),m.jsxs(he,{className:"gradient-bg",onClick:G,disabled:w,children:[w?m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white mr-2"}):m.jsx(d0,{className:"mr-2 h-4 w-4"}),"Generate Quiz with AI"]})]})]})})]})}function JK({sessionId:t,files:e,onFileUploaded:n}){const[s,r]=b.useState([]),[i,o]=b.useState(""),[a,l]=b.useState(!1),[c,u]=b.useState(!1),p=b.useRef(null),g=b.useRef(null),{toast:y}=Cr(),{user:x,checkUsageLimit:v}=li(),[C,w]=b.useState(!1);b.useEffect(()=>{(async()=>{l(!0);try{const M=await tO(t);r(M)}catch{y({title:"Error",description:"Failed to load chat messages",variant:"destructive"})}finally{l(!1)}})()},[t,y]),b.useEffect(()=>{S()},[s]);const S=()=>{var P;(P=p.current)==null||P.scrollIntoView({behavior:"smooth"})},_=async()=>{if(!i.trim())return;if(!v("chat")){w(!0);return}const P=i;o("");try{const M=await Pd(t,{role:"user",content:P});r(I=>[...I,M]),u(!0);try{const I=await Xb(P,"medium",e,t),k=await Pd(t,{role:"assistant",content:I});r(D=>[...D,k])}catch(I){console.error("Error generating response:",I);const k=await Pd(t,{role:"assistant",content:"I'm sorry, I encountered an error processing your request. Please try again."});r(D=>[...D,k]),y({title:"Error",description:"Failed to generate a response",variant:"destructive"})}}catch{y({title:"Error",description:"Failed to send message",variant:"destructive"})}finally{u(!1)}},T=async P=>{if(!v("chat")){w(!0);return}if(!P.target.files||P.target.files.length===0)return;const M=Array.from(P.target.files),I=[];try{for(const k of M){if(k.type!=="application/pdf"){y({title:"Error",description:"Only PDF files are supported",variant:"destructive"});continue}const D=await k.arrayBuffer(),L=btoa(new Uint8Array(D).reduce((O,W)=>O+String.fromCharCode(W),"")),U={name:k.name,url:URL.createObjectURL(k),type:k.type,uploadedAt:new Date().toISOString(),content:L},G=await x7(t,U);n(G),I.push(k.name)}if(I.length>0){const k=I.length===1?`I've uploaded a file: ${I[0]}`:`I've uploaded ${I.length} files: ${I.join(", ")}`,D=await Pd(t,{role:"user",content:k});r(L=>[...L,D]),u(!0);try{const L=await Xb(`I've uploaded ${I.length>1?"some files":"a file"} to this session.`,"medium",e,t),U=await Pd(t,{role:"assistant",content:L});r(G=>[...G,U])}catch(L){console.error("Error generating response about files:",L);const U=await Pd(t,{role:"assistant",content:"I've received your files and am processing them in the background. You can ask me questions about them shortly."});r(G=>[...G,U])}y({title:"Files uploaded",description:`${I.length} file(s) have been uploaded and are being processed`})}}catch{y({title:"Error",description:"Failed to upload file(s)",variant:"destructive"})}finally{u(!1),g.current&&(g.current.value="")}},A=P=>new Date(P).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Chat Assistant"}),e.length>0&&m.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsxs("span",{children:[e.length," file",e.length>1?"s":""," available"]})]})]}),m.jsxs(he,{variant:"outline",onClick:()=>{var P;return(P=g.current)==null?void 0:P.click()},className:"flex items-center gap-2",children:[m.jsx($D,{className:"h-4 w-4"}),"Upload PDF"]})]}),m.jsx("input",{type:"file",ref:g,className:"hidden",accept:".pdf",multiple:!0,onChange:T}),m.jsx(Bi,{className:"border mb-4",children:m.jsxs("div",{className:"h-[500px] flex flex-col",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a?m.jsx("div",{className:"flex justify-center items-center h-full",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-purple-500"})}):s.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[m.jsx(DT,{className:"h-12 w-12 text-purple-300 mb-2"}),m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Your AI Study Assistant"}),m.jsx("p",{className:"text-gray-500 mt-2 max-w-sm",children:"Ask questions about your study materials or upload PDFs to get help with your studies."})]}):s.map(P=>m.jsx("div",{className:`flex ${P.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${P.role==="user"?"bg-purple-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:[m.jsx("p",{className:"whitespace-pre-wrap",children:P.content}),m.jsx("p",{className:`text-xs mt-1 ${P.role==="user"?"text-purple-200":"text-gray-500"}`,children:A(P.timestamp)})]})},P.id)),c&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-[80%]",children:m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse"}),m.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"0.2s"}}),m.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"0.4s"}})]})})}),m.jsx("div",{ref:p})]}),m.jsx("div",{className:"border-t p-4",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx(pr,{placeholder:"Ask a question about your study materials...",value:i,onChange:P=>o(P.target.value),onKeyPress:P=>{P.key==="Enter"&&!P.shiftKey&&!c&&(P.preventDefault(),_())},disabled:c}),m.jsx(he,{className:"gradient-bg",onClick:_,disabled:!i.trim()||c,children:m.jsx(x5,{className:"h-4 w-4"})})]})})]})}),m.jsx("div",{className:"text-sm text-gray-500 text-center",children:m.jsx("p",{children:"The AI can help you understand concepts, generate study materials, and answer questions about your uploaded PDFs."})}),m.jsx(rO,{isOpen:C,onClose:()=>w(!1),action:"chat",currentUsage:0,limit:0})]})}const Kn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),o_=[.001,0,0,.001,0,0],uS=1.35,$s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ja={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},$U="pdfjs_internal_editor_",ke={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},qe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},XK={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},kn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ox={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},zt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Id={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rC={ERRORS:0,WARNINGS:1,INFOS:5},L0={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Pv={moveTo:0,lineTo:1,curveTo:2,closePath:3},QK={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let iC=rC.WARNINGS;function ZK(t){Number.isInteger(t)&&(iC=t)}function eY(){return iC}function oC(t){iC>=rC.INFOS&&console.log(`Info: ${t}`)}function Ie(t){iC>=rC.WARNINGS&&console.log(`Warning: ${t}`)}function dt(t){throw new Error(t)}function Wt(t,e){t||dt(e)}function tY(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BU(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const r=t.match(/\./g);(r==null?void 0:r.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=oY(t)}catch{}}const s=e?URL.parse(t,e):URL.parse(t);return tY(s)?s:null}function jU(t,e,n=!1){const s=URL.parse(t);return s?(s.hash=e,s.href):n&&BU(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function He(t,e,n,s=!1){return Object.defineProperty(t,e,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const wd=function(){function e(n,s){this.message=n,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class JN extends wd{constructor(e,n){super(e,"PasswordException"),this.code=n}}class dS extends wd{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class a_ extends wd{constructor(e){super(e,"InvalidPDFException")}}class F0 extends wd{constructor(e,n,s){super(e,"ResponseException"),this.status=n,this.missing=s}}class nY extends wd{constructor(e){super(e,"FormatError")}}class tc extends wd{constructor(e){super(e,"AbortException")}}function zU(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&dt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const s=[];for(let r=0;r<e;r+=n){const i=Math.min(r+n,e),o=t.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Wy(t){typeof t!="string"&&dt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let s=0;s<e;++s)n[s]=t.charCodeAt(s)&255;return n}function sY(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function rY(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function iY(){try{return new Function(""),!0}catch{return!1}}class An{static get isLittleEndian(){return He(this,"isLittleEndian",rY())}static get isEvalSupported(){return He(this,"isEvalSupported",iY())}static get isOffscreenCanvasSupported(){return He(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return He(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return He(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return He(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const fS=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var ua,ax,l_;class be{static makeHexColor(e,n,s){return`#${fS[e]}${fS[n]}${fS[s]}`}static scaleMinMax(e,n){let s;e[0]?(e[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=e[3],n[3]*=e[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,e[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static applyTransform(e,n,s=0){const r=e[s],i=e[s+1];e[s]=r*n[0]+i*n[2]+n[4],e[s+1]=r*n[1]+i*n[3]+n[5]}static applyTransformToBezier(e,n,s=0){const r=n[0],i=n[1],o=n[2],a=n[3],l=n[4],c=n[5];for(let u=0;u<6;u+=2){const p=e[s+u],g=e[s+u+1];e[s+u]=p*r+g*o+l,e[s+u+1]=p*i+g*a+c}}static applyInverseTransform(e,n){const s=e[0],r=e[1],i=n[0]*n[3]-n[1]*n[2];e[0]=(s*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/i,e[1]=(-s*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/i}static axialAlignedBoundingBox(e,n,s){const r=n[0],i=n[1],o=n[2],a=n[3],l=n[4],c=n[5],u=e[0],p=e[1],g=e[2],y=e[3];let x=r*u+l,v=x,C=r*g+l,w=C,S=a*p+c,_=S,T=a*y+c,A=T;if(i!==0||o!==0){const P=i*u,M=i*g,I=o*p,k=o*y;x+=I,w+=I,C+=k,v+=k,S+=P,A+=P,T+=M,_+=M}s[0]=Math.min(s[0],x,C,v,w),s[1]=Math.min(s[1],S,T,_,A),s[2]=Math.max(s[2],x,C,v,w),s[3]=Math.max(s[3],S,T,_,A)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,l=s*i+r*o,c=i**2+o**2,u=(a+c)/2,p=Math.sqrt(u**2-(a*c-l**2));n[0]=Math.sqrt(u+p||1),n[1]=Math.sqrt(u-p||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const s=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,n,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],n)}static rectBoundingBox(e,n,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],n,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],n,r)}static bezierBoundingBox(e,n,s,r,i,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],n,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],n,l),N(this,ua,l_).call(this,e,s,i,a,n,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),c),N(this,ua,l_).call(this,e,s,i,a,n,r,o,l,3*(-n+3*(r-o)+l),6*(n-2*r+o),3*(r-n),c)}}ua=new WeakSet,ax=function(e,n,s,r,i,o,a,l,c,u){if(c<=0||c>=1)return;const p=1-c,g=c*c,y=g*c,x=p*(p*(p*e+3*c*n)+3*g*s)+y*r,v=p*(p*(p*i+3*c*o)+3*g*a)+y*l;u[0]=Math.min(u[0],x),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],x),u[3]=Math.max(u[3],v)},l_=function(e,n,s,r,i,o,a,l,c,u,p,g){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&N(this,ua,ax).call(this,e,n,s,r,i,o,a,l,-p/u,g);return}const y=u**2-4*p*c;if(y<0)return;const x=Math.sqrt(y),v=2*c;N(this,ua,ax).call(this,e,n,s,r,i,o,a,l,(-u+x)/v,g),N(this,ua,ax).call(this,e,n,s,r,i,o,a,l,(-u-x)/v,g)},R(be,ua);function oY(t){return decodeURIComponent(escape(t))}let hS=null,XN=null;function aY(t){return hS||(hS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,XN=new Map([["","t"]])),t.replaceAll(hS,(e,n,s)=>n?n.normalize("NFKC"):XN.get(s))}function HU(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),zU(t)}const jA="pdfjs_internal_id_";function lY(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,r,...i]=n;if(!t(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Yn(t,e,n){return Math.min(Math.max(t,e),n)}function GU(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(zU(t))}function cY(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):Wy(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});const uo="http://www.w3.org/2000/svg",vc=class vc{};Z(vc,"CSS",96),Z(vc,"PDF",72),Z(vc,"PDF_TO_CSS_UNITS",vc.CSS/vc.PDF);let nc=vc;async function Ky(t,e="text"){if(Gp(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Yy{constructor({viewBox:e,userUnit:n,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=n,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,p,g,y;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,p=0,g=0,y=1;break;case 90:u=0,p=1,g=1,y=0;break;case 270:u=0,p=-1,g=-1,y=0;break;case 0:u=1,p=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,y=-y);let x,v,C,w;u===0?(x=Math.abs(c-e[1])*s+i,v=Math.abs(l-e[0])*s+o,C=(e[3]-e[1])*s,w=(e[2]-e[0])*s):(x=Math.abs(l-e[0])*s+i,v=Math.abs(c-e[1])*s+o,C=(e[2]-e[0])*s,w=(e[3]-e[1])*s),this.transform=[u*s,p*s,g*s,y*s,x-u*s*l-g*s*c,v-p*s*l-y*s*c],this.width=C,this.height=w}get rawDims(){const e=this.viewBox;return He(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new Yy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,n){const s=[e,n];return be.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const n=[e[0],e[1]];be.applyTransform(n,this.transform);const s=[e[2],e[3]];return be.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(e,n){const s=[e,n];return be.applyInverseTransform(s,this.transform),s}}class zA extends wd{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function aC(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function HA(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function uY(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function dY(t,e="document.pdf"){if(typeof t!="string")return e;if(aC(t))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(t);if(!s)return e;const r=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(i.test(c))return r(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(i.test(c))return r(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return r(l[0])}return e}class QN{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(n)} ${i-r}ms
`);return e.join("")}}function Gp(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function ii(t){t.preventDefault()}function Gt(t){t.preventDefault(),t.stopPropagation()}function fY(t){console.log("Deprecated API usage: "+t)}var ng;class GA{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,ng)||E(this,ng,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=d(this,ng).exec(e);if(!n)return null;const s=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(n[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(n[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const c=n[7]||"Z";let u=parseInt(n[8],10);u=u>=0&&u<=23?u:0;let p=parseInt(n[9],10)||0;return p=p>=0&&p<=59?p:0,c==="-"?(o+=u,a+=p):c==="+"&&(o-=u,a-=p),new Date(Date.UTC(s,r,i,o,a,l))}}ng=new WeakMap,R(GA,ng);function hY(t,{scale:e=1,rotation:n=0}){const{width:s,height:r}=t.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new Yy({viewBox:i,userUnit:1,scale:e,rotation:n})}function qA(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${t}"`),[0,0,0])}function pY(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const s=window.getComputedStyle(e).color;t.set(n,qA(s))}e.remove()}function Nt(t){const{a:e,b:n,c:s,d:r,e:i,f:o}=t.getTransform();return[e,n,s,r,i,o]}function mi(t){const{a:e,b:n,c:s,d:r,e:i,f:o}=t.getTransform().invertSelf();return[e,n,s,r,i,o]}function ud(t,e,n=!1,s=!0){if(e instanceof Yy){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=t,a=An.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${i}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,p=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!n||e.rotation%180===0?(o.width=u,o.height=p):(o.width=p,o.height=u)}s&&t.setAttribute("data-main-rotation",e.rotation)}class eo{constructor(){const{pixelRatio:e}=eo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,s,r,i=-1){let o=1/0,a=1/0,l=1/0;s=eo.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*n))),r!==-1&&(a=r/e,l=r/n);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,s):s}return e}}const c_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Za,Uc,sr,el,sg,Pf,rg,W0,qU,Zn,WU,KU,qp,lx;const mo=class mo{constructor(e){R(this,Zn);R(this,Za,null);R(this,Uc,null);R(this,sr);R(this,el,null);R(this,sg,null);R(this,Pf,null);E(this,sr,e),d(mo,rg)||E(mo,rg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,Za,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=d(this,sr)._uiManager._signal;e.addEventListener("contextmenu",ii,{signal:n}),e.addEventListener("pointerdown",N(mo,W0,qU),{signal:n});const s=E(this,el,document.createElement("div"));s.className="buttons",e.append(s);const r=d(this,sr).toolbarPosition;if(r){const{style:i}=e,o=d(this,sr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,Za)}hide(){var e;d(this,Za).classList.add("hidden"),(e=d(this,Uc))==null||e.hideDropdown()}show(){var e;d(this,Za).classList.remove("hidden"),(e=d(this,sg))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=d(this,sr),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",d(mo,rg)[e]),N(this,Zn,qp).call(this,s),s.addEventListener("click",r=>{n.delete()},{signal:n._signal}),d(this,el).append(s)}async addAltText(e){const n=await e.render();N(this,Zn,qp).call(this,n),d(this,el).append(n,d(this,Zn,lx)),E(this,sg,e)}addColorPicker(e){E(this,Uc,e);const n=e.renderButton();N(this,Zn,qp).call(this,n),d(this,el).append(n,d(this,Zn,lx))}async addEditSignatureButton(e){const n=E(this,Pf,await e.renderEditButton(d(this,sr)));N(this,Zn,qp).call(this,n),d(this,el).append(n,d(this,Zn,lx))}async addButton(e,n){switch(e){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){d(this,Pf)&&(d(this,Pf).title=e)}remove(){var e;d(this,Za).remove(),(e=d(this,Uc))==null||e.destroy(),E(this,Uc,null)}};Za=new WeakMap,Uc=new WeakMap,sr=new WeakMap,el=new WeakMap,sg=new WeakMap,Pf=new WeakMap,rg=new WeakMap,W0=new WeakSet,qU=function(e){e.stopPropagation()},Zn=new WeakSet,WU=function(e){d(this,sr)._focusEventsAllowed=!1,Gt(e)},KU=function(e){d(this,sr)._focusEventsAllowed=!0,Gt(e)},qp=function(e){const n=d(this,sr)._uiManager._signal;e.addEventListener("focusin",N(this,Zn,WU).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",N(this,Zn,KU).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",ii,{signal:n})},lx=function(){const e=document.createElement("div");return e.className="divider",e},R(mo,W0),R(mo,rg,null);let u_=mo;var ig,Vc,$c,sc,YU,JU,XU;class mY{constructor(e){R(this,sc);R(this,ig,null);R(this,Vc,null);R(this,$c);E(this,$c,e)}show(e,n,s){const[r,i]=N(this,sc,JU).call(this,n,s),{style:o}=d(this,Vc)||E(this,Vc,N(this,sc,YU).call(this));e.append(d(this,Vc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Vc).remove()}}ig=new WeakMap,Vc=new WeakMap,$c=new WeakMap,sc=new WeakSet,YU=function(){const e=E(this,Vc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ii,{signal:d(this,$c)._signal});const n=E(this,ig,document.createElement("div"));return n.className="buttons",e.append(n),N(this,sc,XU).call(this),e},JU=function(e,n){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(n?i.width:0);if(o>s){r=a,s=o;continue}n?a>r&&(r=a):a<r&&(r=a)}return[n?1-r:r,s]},XU=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=d(this,$c)._signal;e.addEventListener("contextmenu",ii,{signal:s}),e.addEventListener("click",()=>{d(this,$c).highlightSelection("floating_button")},{signal:s}),d(this,ig).append(e)};function QU(t,e,n){for(const s of n)e.addEventListener(s,t[s].bind(t))}var K0;class gY{constructor(){R(this,K0,0)}get id(){return`${$U}${rn(this,K0)._++}`}}K0=new WeakMap;var Mf,og,Ln,kf,cx;const l1=class l1{constructor(){R(this,kf);R(this,Mf,HU());R(this,og,0);R(this,Ln,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return He(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:n,name:s,size:r,type:i}=e;return N(this,kf,cx).call(this,`${n}_${s}_${r}_${i}`,e)}async getFromUrl(e){return N(this,kf,cx).call(this,e,e)}async getFromBlob(e,n){const s=await n;return N(this,kf,cx).call(this,e,s)}async getFromId(e){d(this,Ln)||E(this,Ln,new Map);const n=d(this,Ln).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(e,n){d(this,Ln)||E(this,Ln,new Map);let s=d(this,Ln).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${d(this,Mf)}_${rn(this,og)._++}`,refCounter:1,isSvg:!1},d(this,Ln).set(e,s),d(this,Ln).set(s.id,s),s}getSvgUrl(e){const n=d(this,Ln).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var r;d(this,Ln)||E(this,Ln,new Map);const n=d(this,Ln).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),n.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,Mf)}_`)}};Mf=new WeakMap,og=new WeakMap,Ln=new WeakMap,kf=new WeakSet,cx=async function(e,n){d(this,Ln)||E(this,Ln,new Map);let s=d(this,Ln).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${d(this,Mf)}_${rn(this,og)._++}`,refCounter:0,isSvg:!1});let r;if(typeof n=="string"?(s.url=n,r=await Ky(n,"blob")):n instanceof File?r=s.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const i=l1._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const p=s.svgUrl=o.result;a.src=await i?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=o.onerror=u});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){Ie(r),s=null}return d(this,Ln).set(e,s),s&&d(this,Ln).set(s.id,s),s};let d_=l1;var Ft,tl,ag,Rt;class yY{constructor(e=128){R(this,Ft,[]);R(this,tl,!1);R(this,ag);R(this,Rt,-1);E(this,ag,e)}add({cmd:e,undo:n,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),d(this,tl))return;const l={cmd:e,undo:n,post:s,type:i};if(d(this,Rt)===-1){d(this,Ft).length>0&&(d(this,Ft).length=0),E(this,Rt,0),d(this,Ft).push(l);return}if(o&&d(this,Ft)[d(this,Rt)].type===i){a&&(l.undo=d(this,Ft)[d(this,Rt)].undo),d(this,Ft)[d(this,Rt)]=l;return}const c=d(this,Rt)+1;c===d(this,ag)?d(this,Ft).splice(0,1):(E(this,Rt,c),c<d(this,Ft).length&&d(this,Ft).splice(c)),d(this,Ft).push(l)}undo(){if(d(this,Rt)===-1)return;E(this,tl,!0);const{undo:e,post:n}=d(this,Ft)[d(this,Rt)];e(),n==null||n(),E(this,tl,!1),E(this,Rt,d(this,Rt)-1)}redo(){if(d(this,Rt)<d(this,Ft).length-1){E(this,Rt,d(this,Rt)+1),E(this,tl,!0);const{cmd:e,post:n}=d(this,Ft)[d(this,Rt)];e(),n==null||n(),E(this,tl,!1)}}hasSomethingToUndo(){return d(this,Rt)!==-1}hasSomethingToRedo(){return d(this,Rt)<d(this,Ft).length-1}cleanType(e){if(d(this,Rt)!==-1){for(let n=d(this,Rt);n>=0;n--)if(d(this,Ft)[n].type!==e){d(this,Ft).splice(n+1,d(this,Rt)-n),E(this,Rt,n);return}d(this,Ft).length=0,E(this,Rt,-1)}}destroy(){E(this,Ft,null)}}Ft=new WeakMap,tl=new WeakMap,ag=new WeakMap,Rt=new WeakMap;var Y0,ZU;class Jy{constructor(e){R(this,Y0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=An.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");n&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!n&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(N(this,Y0,ZU).call(this,n));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,n)||(r.bind(e,...o,n)(),i||Gt(n))}}Y0=new WeakSet,ZU=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const J0=class J0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return pY(e),He(this,"_colors",e)}convert(e){const n=qA(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,r]of this._colors)if(r.every((i,o)=>i===n[o]))return J0._colorsMapping.get(s);return n}getHexCode(e){const n=this._colors.get(e);return n?be.makeHexColor(...n):e}};Z(J0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let f_=J0;var If,Ts,Qt,vn,Df,wo,Lf,rr,nl,sl,Ff,Bc,Si,Lr,jc,lg,cg,Of,ug,bi,rl,Uf,il,_i,X0,ol,dg,al,zc,Hc,ll,fg,on,rt,Co,cl,Gc,hg,pg,ul,Ei,So,mg,gg,ir,ae,ux,h_,eV,tV,dx,nV,sV,rV,p_,iV,m_,g_,oV,Bn,fo,aV,lV,y_,cV,Wp,v_;const tf=class tf{constructor(e,n,s,r,i,o,a,l,c,u,p,g,y,x,v){R(this,ae);R(this,If,new AbortController);R(this,Ts,null);R(this,Qt,new Map);R(this,vn,new Map);R(this,Df,null);R(this,wo,null);R(this,Lf,null);R(this,rr,new yY);R(this,nl,null);R(this,sl,null);R(this,Ff,0);R(this,Bc,new Set);R(this,Si,null);R(this,Lr,null);R(this,jc,new Set);Z(this,"_editorUndoBar",null);R(this,lg,!1);R(this,cg,!1);R(this,Of,!1);R(this,ug,null);R(this,bi,null);R(this,rl,null);R(this,Uf,null);R(this,il,!1);R(this,_i,null);R(this,X0,new gY);R(this,ol,!1);R(this,dg,!1);R(this,al,null);R(this,zc,null);R(this,Hc,null);R(this,ll,null);R(this,fg,null);R(this,on,ke.NONE);R(this,rt,new Set);R(this,Co,null);R(this,cl,null);R(this,Gc,null);R(this,hg,null);R(this,pg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});R(this,ul,[0,0]);R(this,Ei,null);R(this,So,null);R(this,mg,null);R(this,gg,null);R(this,ir,null);const C=this._signal=d(this,If).signal;E(this,So,e),E(this,mg,n),E(this,gg,s),E(this,Df,r),E(this,cl,i),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:C}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),o._on("setpreference",this.onSetPreference.bind(this),{signal:C}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:C}),N(this,ae,nV).call(this),N(this,ae,oV).call(this),N(this,ae,p_).call(this),E(this,wo,a.annotationStorage),E(this,ug,a.filterFactory),E(this,Gc,l),E(this,Uf,c||null),E(this,lg,u),E(this,cg,p),E(this,Of,g),E(this,fg,y||null),this.viewParameters={realScale:nc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=tf.prototype,n=o=>d(o,So).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return He(this,"_keyboardManager",new Jy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,So).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,So).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}]]))}destroy(){var e,n,s,r,i,o,a,l;(e=d(this,ir))==null||e.resolve(),E(this,ir,null),(n=d(this,If))==null||n.abort(),E(this,If,null),this._signal=null;for(const c of d(this,vn).values())c.destroy();d(this,vn).clear(),d(this,Qt).clear(),d(this,jc).clear(),(s=d(this,ll))==null||s.clear(),E(this,Ts,null),d(this,rt).clear(),d(this,rr).destroy(),(r=d(this,Df))==null||r.destroy(),(i=d(this,cl))==null||i.destroy(),(o=d(this,_i))==null||o.hide(),E(this,_i,null),(a=d(this,Hc))==null||a.destroy(),E(this,Hc,null),d(this,bi)&&(clearTimeout(d(this,bi)),E(this,bi,null)),d(this,Ei)&&(clearTimeout(d(this,Ei)),E(this,Ei,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,fg)}get useNewAltTextFlow(){return d(this,cg)}get useNewAltTextWhenAddingImage(){return d(this,Of)}get hcmFilter(){return He(this,"hcmFilter",d(this,Gc)?d(this,ug).addHCMFilter(d(this,Gc).foreground,d(this,Gc).background):"none")}get direction(){return He(this,"direction",getComputedStyle(d(this,So)).direction)}get highlightColors(){return He(this,"highlightColors",d(this,Uf)?new Map(d(this,Uf).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return He(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,sl,e)}setMainHighlightColorPicker(e){E(this,Hc,e)}editAltText(e,n=!1){var s;(s=d(this,Df))==null||s.editAltText(this,e,n)}getSignature(e){var n;(n=d(this,cl))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,cl)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,Of,n);break}}onPageChanging({pageNumber:e}){E(this,Ff,e-1)}focusMainContainer(){d(this,So).focus()}findParent(e,n){for(const s of d(this,vn).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&n>=i&&n<=i+a)return s}return null}disableUserSelect(e=!1){d(this,mg).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,jc).add(e)}removeShouldRescale(e){d(this,jc).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*nc.PDF_TO_CSS_UNITS;for(const s of d(this,jc))s.onScaleChanging();(n=d(this,sl))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o}=n,a=n.toString(),c=N(this,ae,ux).call(this,n).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;n.empty();const p=N(this,ae,h_).call(this,c),g=d(this,on)===ke.NONE,y=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o,text:a}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(ke.HIGHLIGHT,y);return}y()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,wo)&&!d(this,wo).has(e.id)&&d(this,wo).setValue(e.id,e)}a11yAlert(e,n=null){const s=d(this,gg);s&&(s.setAttribute("data-l10n-id",e),n?s.setAttribute("data-l10n-args",JSON.stringify(n)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,il)&&(E(this,il,!1),N(this,ae,dx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of d(this,rt))if(n.div.contains(e)){E(this,zc,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!d(this,zc))return;const[e,n]=d(this,zc);E(this,zc,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){N(this,ae,p_).call(this),N(this,ae,m_).call(this)}removeEditListeners(){N(this,ae,iV).call(this),N(this,ae,g_).call(this)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const s of d(this,Lr))if(s.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const s of d(this,Lr))if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=d(this,Ts))==null||s.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of d(this,rt)){const i=r.serialize(!0);i&&n.push(i)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const i of n.items)for(const o of d(this,Lr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){Ie(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const c=await r.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)N(this,ae,y_).call(this,l);N(this,ae,v_).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){Ie(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,on)!==ke.NONE&&!this.isEditorHandlingKeyboard&&tf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,il)&&(E(this,il,!1),N(this,ae,dx).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(N(this,ae,sV).call(this),N(this,ae,m_).call(this),N(this,ae,Bn).call(this,{isEditing:d(this,on)!==ke.NONE,isEmpty:N(this,ae,Wp).call(this),hasSomethingToUndo:d(this,rr).hasSomethingToUndo(),hasSomethingToRedo:d(this,rr).hasSomethingToRedo(),hasSelectedEditor:!1})):(N(this,ae,rV).call(this),N(this,ae,g_).call(this),N(this,ae,Bn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Lr)){E(this,Lr,e);for(const n of d(this,Lr))N(this,ae,fo).call(this,n.defaultPropertiesToUpdate)}}getId(){return d(this,X0).id}get currentLayer(){return d(this,vn).get(d(this,Ff))}getLayer(e){return d(this,vn).get(e)}get currentPageIndex(){return d(this,Ff)}addLayer(e){d(this,vn).set(e.pageIndex,e),d(this,ol)?e.enable():e.disable()}removeLayer(e){d(this,vn).delete(e.pageIndex)}async updateMode(e,n=null,s=!1,r=!1){var i,o,a;if(d(this,on)!==e&&!(d(this,ir)&&(await d(this,ir).promise,!d(this,ir)))){if(E(this,ir,Promise.withResolvers()),(i=d(this,sl))==null||i.commitOrRemove(),E(this,on,e),e===ke.NONE){this.setEditingState(!1),N(this,ae,lV).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,ir).resolve();return}e===ke.SIGNATURE&&await((a=d(this,cl))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await N(this,ae,aV).call(this),this.unselectAll();for(const l of d(this,vn).values())l.updateMode(e);if(!n){s&&this.addNewEditorFromKeyboard(),d(this,ir).resolve();return}for(const l of d(this,Qt).values())l.annotationElementId===n||l.id===n?(this.setSelected(l),r&&l.enterInEditMode()):l.unselect();d(this,ir).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,on)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){var s;if(d(this,Lr)){switch(e){case qe.CREATE:this.currentLayer.addNewEditor(n);return;case qe.HIGHLIGHT_DEFAULT_COLOR:(s=d(this,Hc))==null||s.updateColor(n);break;case qe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,hg)||E(this,hg,new Map)).set(e,n),this.showAllEditors("highlight",n);break}for(const r of d(this,rt))r.updateParams(e,n);for(const r of d(this,Lr))r.updateDefaultParams(e,n)}}showAllEditors(e,n,s=!1){var i;for(const o of d(this,Qt).values())o.editorType===e&&o.show(n);(((i=d(this,hg))==null?void 0:i.get(qe.HIGHLIGHT_SHOW_ALL))??!0)!==n&&N(this,ae,fo).call(this,[[qe.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(d(this,dg)!==e){E(this,dg,e);for(const n of d(this,vn).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}getEditors(e){const n=[];for(const s of d(this,Qt).values())s.pageIndex===e&&n.push(s);return n}getEditor(e){return d(this,Qt).get(e)}addEditor(e){d(this,Qt).set(e.id,e)}removeEditor(e){var n,s;e.div.contains(document.activeElement)&&(d(this,bi)&&clearTimeout(d(this,bi)),E(this,bi,setTimeout(()=>{this.focusMainContainer(),E(this,bi,null)},0))),d(this,Qt).delete(e.id),e.annotationElementId&&((n=d(this,ll))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,Bc).has(e.annotationElementId))&&((s=d(this,wo))==null||s.remove(e.id))}addDeletedAnnotationElement(e){d(this,Bc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,Bc).has(e)}removeDeletedAnnotationElement(e){d(this,Bc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,Ts)!==e&&(E(this,Ts,e),e&&N(this,ae,fo).call(this,e.propertiesToUpdate))}updateUI(e){d(this,ae,cV)===e&&N(this,ae,fo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){N(this,ae,fo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,rt).has(e)){d(this,rt).delete(e),e.unselect(),N(this,ae,Bn).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,rt).add(e),e.select(),N(this,ae,fo).call(this,e.propertiesToUpdate),N(this,ae,Bn).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.id}),(n=d(this,sl))==null||n.commitOrRemove();for(const s of d(this,rt))s!==e&&s.unselect();d(this,rt).clear(),d(this,rt).add(e),e.select(),N(this,ae,fo).call(this,e.propertiesToUpdate),N(this,ae,Bn).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,rt).has(e)}get firstSelectedEditor(){return d(this,rt).values().next().value}unselect(e){e.unselect(),d(this,rt).delete(e),N(this,ae,Bn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,rt).size!==0}get isEnterHandled(){return d(this,rt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,rr).undo(),N(this,ae,Bn).call(this,{hasSomethingToUndo:d(this,rr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:N(this,ae,Wp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,rr).redo(),N(this,ae,Bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,rr).hasSomethingToRedo(),isEmpty:N(this,ae,Wp).call(this)})}addCommands(e){d(this,rr).add(e),N(this,ae,Bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:N(this,ae,Wp).call(this)})}cleanUndoStack(e){d(this,rr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...d(this,rt)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,n.length===1?n[0].editorType:n.length);for(const a of n)a.remove()},r=()=>{for(const o of n)N(this,ae,y_).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=d(this,Ts))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,Ts)||this.hasSelection}selectAll(){for(const e of d(this,rt))e.commit();N(this,ae,v_).call(this,d(this,Qt).values())}unselectAll(){var e;if(!(d(this,Ts)&&(d(this,Ts).commitOrRemove(),d(this,on)!==ke.NONE))&&!((e=d(this,sl))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of d(this,rt))n.unselect();d(this,rt).clear(),N(this,ae,Bn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;d(this,ul)[0]+=e,d(this,ul)[1]+=n;const[r,i]=d(this,ul),o=[...d(this,rt)],a=1e3;d(this,Ei)&&clearTimeout(d(this,Ei)),E(this,Ei,setTimeout(()=>{E(this,Ei,null),d(this,ul)[0]=d(this,ul)[1]=0,this.addCommands({cmd:()=>{for(const l of o)d(this,Qt).has(l.id)&&(l.translateInPage(r,i),l.translationDone())},undo:()=>{for(const l of o)d(this,Qt).has(l.id)&&(l.translateInPage(-r,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,n),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Si,new Map);for(const e of d(this,rt))d(this,Si).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Si))return!1;this.disableUserSelect(!1);const e=d(this,Si);E(this,Si,null);let n=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,n||(n=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!n)return!1;const s=(r,i,o,a)=>{if(d(this,Qt).has(r.id)){const l=d(this,vn).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(d(this,Si))for(const s of d(this,Si).keys())s.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,rt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,Ts)===e}getActive(){return d(this,Ts)}getMode(){return d(this,on)}get imageManager(){return He(this,"imageManager",new d_)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let c=0,u=n.rangeCount;c<u;c++)if(!e.contains(n.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,p,g)=>({x:(u-r)/o,y:1-(c+p-s)/i,width:g/o,height:p/i});break;case"180":a=(c,u,p,g)=>({x:1-(c+p-s)/i,y:1-(u+g-r)/o,width:p/i,height:g/o});break;case"270":a=(c,u,p,g)=>({x:1-(u+g-r)/o,y:(c-s)/i,width:g/o,height:p/i});break;default:a=(c,u,p,g)=>({x:(c-s)/i,y:(u-r)/o,width:p/i,height:g/o});break}const l=[];for(let c=0,u=n.rangeCount;c<u;c++){const p=n.getRangeAt(c);if(!p.collapsed)for(const{x:g,y,width:x,height:v}of p.getClientRects())x===0||v===0||l.push(a(g,y,x,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(d(this,Lf)||E(this,Lf,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=d(this,Lf))==null||n.delete(e)}renderAnnotationElement(e){var r;const n=(r=d(this,Lf))==null?void 0:r.get(e.data.id);if(!n)return;const s=d(this,wo).getRawValue(n);s&&(d(this,on)===ke.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,n,s){var i;const r=(i=d(this,ll))==null?void 0:i.get(e);r&&(r.setCanvas(n,s),d(this,ll).delete(e))}addMissingCanvas(e,n){(d(this,ll)||E(this,ll,new Map)).set(e,n)}};If=new WeakMap,Ts=new WeakMap,Qt=new WeakMap,vn=new WeakMap,Df=new WeakMap,wo=new WeakMap,Lf=new WeakMap,rr=new WeakMap,nl=new WeakMap,sl=new WeakMap,Ff=new WeakMap,Bc=new WeakMap,Si=new WeakMap,Lr=new WeakMap,jc=new WeakMap,lg=new WeakMap,cg=new WeakMap,Of=new WeakMap,ug=new WeakMap,bi=new WeakMap,rl=new WeakMap,Uf=new WeakMap,il=new WeakMap,_i=new WeakMap,X0=new WeakMap,ol=new WeakMap,dg=new WeakMap,al=new WeakMap,zc=new WeakMap,Hc=new WeakMap,ll=new WeakMap,fg=new WeakMap,on=new WeakMap,rt=new WeakMap,Co=new WeakMap,cl=new WeakMap,Gc=new WeakMap,hg=new WeakMap,pg=new WeakMap,ul=new WeakMap,Ei=new WeakMap,So=new WeakMap,mg=new WeakMap,gg=new WeakMap,ir=new WeakMap,ae=new WeakSet,ux=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},h_=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const s of d(this,vn).values())if(s.hasTextLayer(e))return s;return null},eV=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=N(this,ae,ux).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(d(this,_i)||E(this,_i,new mY(this)),d(this,_i).show(s,r,this.direction==="ltr"))},tV=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Co)&&((i=d(this,_i))==null||i.hide(),E(this,Co,null),N(this,ae,Bn).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===d(this,Co))return;const r=N(this,ae,ux).call(this,e).closest(".textLayer");if(!r){d(this,Co)&&((o=d(this,_i))==null||o.hide(),E(this,Co,null),N(this,ae,Bn).call(this,{hasSelectedText:!1}));return}if((a=d(this,_i))==null||a.hide(),E(this,Co,n),N(this,ae,Bn).call(this,{hasSelectedText:!0}),!(d(this,on)!==ke.HIGHLIGHT&&d(this,on)!==ke.NONE)&&(d(this,on)===ke.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,il,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,on)===ke.HIGHLIGHT?N(this,ae,h_).call(this,r):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),p=g=>{g.type==="pointerup"&&g.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),g.type==="pointerup"&&N(this,ae,dx).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})}},dx=function(e=""){d(this,on)===ke.HIGHLIGHT?this.highlightSelection(e):d(this,lg)&&N(this,ae,eV).call(this)},nV=function(){document.addEventListener("selectionchange",N(this,ae,tV).bind(this),{signal:this._signal})},sV=function(){if(d(this,rl))return;E(this,rl,new AbortController);const e=this.combinedSignal(d(this,rl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rV=function(){var e;(e=d(this,rl))==null||e.abort(),E(this,rl,null)},p_=function(){if(d(this,al))return;E(this,al,new AbortController);const e=this.combinedSignal(d(this,al));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},iV=function(){var e;(e=d(this,al))==null||e.abort(),E(this,al,null)},m_=function(){if(d(this,nl))return;E(this,nl,new AbortController);const e=this.combinedSignal(d(this,nl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},g_=function(){var e;(e=d(this,nl))==null||e.abort(),E(this,nl,null)},oV=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Bn=function(e){Object.entries(e).some(([s,r])=>d(this,pg)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,pg),e)}),d(this,on)===ke.HIGHLIGHT&&e.hasSelectedEditor===!1&&N(this,ae,fo).call(this,[[qe.HIGHLIGHT_FREE,!0]]))},fo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},aV=async function(){if(!d(this,ol)){E(this,ol,!0);const e=[];for(const n of d(this,vn).values())e.push(n.enable());await Promise.all(e);for(const n of d(this,Qt).values())n.enable()}},lV=function(){if(this.unselectAll(),d(this,ol)){E(this,ol,!1);for(const e of d(this,vn).values())e.disable();for(const e of d(this,Qt).values())e.disable()}},y_=function(e){const n=d(this,vn).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},cV=function(){let e=null;for(e of d(this,rt));return e},Wp=function(){if(d(this,Qt).size===0)return!0;if(d(this,Qt).size===1)for(const e of d(this,Qt).values())return e.isEmpty();return!1},v_=function(e){for(const n of d(this,rt))n.unselect();d(this,rt).clear();for(const n of e)n.isEmpty()||(d(this,rt).add(n),n.select());N(this,ae,Bn).call(this,{hasSelectedEditor:this.hasSelection})},Z(tf,"TRANSLATE_SMALL",1),Z(tf,"TRANSLATE_BIG",10);let dd=tf;var an,Ti,Fr,Vf,Ai,As,$f,Ri,hs,bo,qc,Ni,dl,Qr,Kp,fx;const jn=class jn{constructor(e){R(this,Qr);R(this,an,null);R(this,Ti,!1);R(this,Fr,null);R(this,Vf,null);R(this,Ai,null);R(this,As,null);R(this,$f,!1);R(this,Ri,null);R(this,hs,null);R(this,bo,null);R(this,qc,null);R(this,Ni,!1);E(this,hs,e),E(this,Ni,e._uiManager.useNewAltTextFlow),d(jn,dl)||E(jn,dl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){jn._l10n??(jn._l10n=e)}async render(){const e=E(this,Fr,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=E(this,Vf,document.createElement("span"));e.append(n),d(this,Ni)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(jn,dl).missing),n.setAttribute("data-l10n-id",d(jn,dl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=d(this,hs)._uiManager._signal;e.addEventListener("contextmenu",ii,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),d(this,hs)._uiManager.editAltText(d(this,hs)),d(this,Ni)&&d(this,hs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Qr,Kp)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(E(this,$f,!0),r(i))},{signal:s}),await N(this,Qr,fx).call(this),e}finish(){d(this,Fr)&&(d(this,Fr).focus({focusVisible:d(this,$f)}),E(this,$f,!1))}isEmpty(){return d(this,Ni)?d(this,an)===null:!d(this,an)&&!d(this,Ti)}hasData(){return d(this,Ni)?d(this,an)!==null||!!d(this,bo):this.isEmpty()}get guessedText(){return d(this,bo)}async setGuessedText(e){d(this,an)===null&&(E(this,bo,e),E(this,qc,await jn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),N(this,Qr,fx).call(this))}toggleAltTextBadge(e=!1){var n;if(!d(this,Ni)||d(this,an)){(n=d(this,Ri))==null||n.remove(),E(this,Ri,null);return}if(!d(this,Ri)){const s=E(this,Ri,document.createElement("div"));s.className="noAltTextBadge",d(this,hs).div.append(s)}d(this,Ri).classList.toggle("hidden",!e)}serialize(e){let n=d(this,an);return!e&&d(this,bo)===n&&(n=d(this,qc)),{altText:n,decorative:d(this,Ti),guessedText:d(this,bo),textWithDisclaimer:d(this,qc)}}get data(){return{altText:d(this,an),decorative:d(this,Ti)}}set data({altText:e,decorative:n,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(E(this,bo,s),E(this,qc,r)),!(d(this,an)===e&&d(this,Ti)===n)&&(i||(E(this,an,e),E(this,Ti,n)),N(this,Qr,fx).call(this))}toggle(e=!1){d(this,Fr)&&(!e&&d(this,As)&&(clearTimeout(d(this,As)),E(this,As,null)),d(this,Fr).disabled=!e)}shown(){d(this,hs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Qr,Kp)}})}destroy(){var e,n;(e=d(this,Fr))==null||e.remove(),E(this,Fr,null),E(this,Vf,null),E(this,Ai,null),(n=d(this,Ri))==null||n.remove(),E(this,Ri,null)}};an=new WeakMap,Ti=new WeakMap,Fr=new WeakMap,Vf=new WeakMap,Ai=new WeakMap,As=new WeakMap,$f=new WeakMap,Ri=new WeakMap,hs=new WeakMap,bo=new WeakMap,qc=new WeakMap,Ni=new WeakMap,dl=new WeakMap,Qr=new WeakSet,Kp=function(){return d(this,an)&&"added"||d(this,an)===null&&this.guessedText&&"review"||"missing"},fx=async function(){var r,i,o;const e=d(this,Fr);if(!e)return;if(d(this,Ni)){if(e.classList.toggle("done",!!d(this,an)),e.setAttribute("data-l10n-id",d(jn,dl)[d(this,Qr,Kp)]),(r=d(this,Vf))==null||r.setAttribute("data-l10n-id",d(jn,dl)[`${d(this,Qr,Kp)}-label`]),!d(this,an)){(i=d(this,Ai))==null||i.remove();return}}else{if(!d(this,an)&&!d(this,Ti)){e.classList.remove("done"),(o=d(this,Ai))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=d(this,Ai);if(!n){E(this,Ai,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${d(this,hs).id}`;const a=100,l=d(this,hs)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,As)),E(this,As,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,As,setTimeout(()=>{E(this,As,null),d(this,Ai).classList.add("show"),d(this,hs)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,As)&&(clearTimeout(d(this,As)),E(this,As,null)),(c=d(this,Ai))==null||c.classList.remove("show")},{signal:l})}d(this,Ti)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=d(this,an)),n.parentNode||e.append(n);const s=d(this,hs).getElementForAltText();s==null||s.setAttribute("aria-describedby",n.id)},R(jn,dl,null),Z(jn,"_l10n",null);let O0=jn;var Bf,Wc,yg,vg,xg,wg,Cg,_o,Kc,Eo,Yc,To,rc,uV,dV,fV;const c1=class c1{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){R(this,rc);R(this,Bf);R(this,Wc,!1);R(this,yg,null);R(this,vg);R(this,xg);R(this,wg);R(this,Cg);R(this,_o,null);R(this,Kc);R(this,Eo,null);R(this,Yc);R(this,To,null);E(this,Bf,e),E(this,yg,s),E(this,vg,n),E(this,xg,r),E(this,wg,i),E(this,Cg,o),E(this,Yc,new AbortController),E(this,Kc,AbortSignal.any([a,d(this,Yc).signal])),e.addEventListener("touchstart",N(this,rc,uV).bind(this),{passive:!1,signal:d(this,Kc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/eo.pixelRatio}destroy(){var e,n;(e=d(this,Yc))==null||e.abort(),E(this,Yc,null),(n=d(this,_o))==null||n.abort(),E(this,_o,null)}};Bf=new WeakMap,Wc=new WeakMap,yg=new WeakMap,vg=new WeakMap,xg=new WeakMap,wg=new WeakMap,Cg=new WeakMap,_o=new WeakMap,Kc=new WeakMap,Eo=new WeakMap,Yc=new WeakMap,To=new WeakMap,rc=new WeakSet,uV=function(e){var r,i,o;if((r=d(this,vg))!=null&&r.call(this))return;if(e.touches.length===1){if(d(this,_o))return;const a=E(this,_o,new AbortController),l=AbortSignal.any([d(this,Kc),a.signal]),c=d(this,Bf),u={capture:!0,signal:l,passive:!1},p=g=>{var y;g.pointerType==="touch"&&((y=d(this,_o))==null||y.abort(),E(this,_o,null))};c.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(Gt(g),p(g))},u),c.addEventListener("pointerup",p,u),c.addEventListener("pointercancel",p,u);return}if(!d(this,To)){E(this,To,new AbortController);const a=AbortSignal.any([d(this,Kc),d(this,To).signal]),l=d(this,Bf),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",N(this,rc,dV).bind(this),c);const u=N(this,rc,fV).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Gt,c),l.addEventListener("pointermove",Gt,c),l.addEventListener("pointercancel",Gt,c),l.addEventListener("pointerup",Gt,c),(i=d(this,xg))==null||i.call(this)}if(Gt(e),e.touches.length!==2||(o=d(this,yg))!=null&&o.call(this)){E(this,Eo,null);return}let[n,s]=e.touches;n.identifier>s.identifier&&([n,s]=[s,n]),E(this,Eo,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY})},dV=function(e){var T;if(!d(this,Eo)||e.touches.length!==2)return;Gt(e);let[n,s]=e.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:r,screenY:i}=n,{screenX:o,screenY:a}=s,l=d(this,Eo),{touch0X:c,touch0Y:u,touch1X:p,touch1Y:g}=l,y=p-c,x=g-u,v=o-r,C=a-i,w=Math.hypot(v,C)||1,S=Math.hypot(y,x)||1;if(!d(this,Wc)&&Math.abs(S-w)<=c1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!d(this,Wc)){E(this,Wc,!0);return}const _=[(r+o)/2,(i+a)/2];(T=d(this,wg))==null||T.call(this,_,S,w)},fV=function(e){var n;e.touches.length>=2||(d(this,To)&&(d(this,To).abort(),E(this,To,null),(n=d(this,Cg))==null||n.call(this)),d(this,Eo)&&(Gt(e),E(this,Eo,null),E(this,Wc,!1)))};let U0=c1;var Jc,Or,St,jf,fl,Sg,Xc,xn,Qc,Ao,hl,bg,Zc,Rs,_g,eu,Ro,Pi,zf,Hf,or,tu,Eg,Q0,Ae,x_,Tg,w_,hx,hV,pV,C_,px,S_,mV,gV,yV,b_,vV,__,xV,wV,CV,E_,Yp;const Ve=class Ve{constructor(e){R(this,Ae);R(this,Jc,null);R(this,Or,null);R(this,St,null);R(this,jf,!1);R(this,fl,null);R(this,Sg,"");R(this,Xc,!1);R(this,xn,null);R(this,Qc,null);R(this,Ao,null);R(this,hl,null);R(this,bg,"");R(this,Zc,!1);R(this,Rs,null);R(this,_g,!1);R(this,eu,!1);R(this,Ro,!1);R(this,Pi,null);R(this,zf,0);R(this,Hf,0);R(this,or,null);R(this,tu,null);Z(this,"isSelected",!1);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);R(this,Eg,!1);R(this,Q0,Ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ve.prototype._resizeWithKeyboard,n=dd.TRANSLATE_SMALL,s=dd.TRANSLATE_BIG;return He(this,"_resizerKeyboardManager",new Jy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ve.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return He(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new vY({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Ve._l10n??(Ve._l10n=e),Ve._l10nResizer||(Ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ve._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ve._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){dt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,Eg)}set _isDraggable(e){var n;E(this,Eg,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Q0)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):N(this,Ae,Yp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Zc)?E(this,Zc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(n+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[s,r]=this.parentDimensions;this.setAt(e*s,n*r,this.width*s,this.height*r),this._onTranslated()}translate(e,n){N(this,Ae,x_).call(this,this.parentDimensions,e,n)}translateInPage(e,n){d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]),N(this,Ae,x_).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=n/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!d(this,Rs)&&(d(this,Rs)[0]!==this.x||d(this,Rs)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Rs)&&(d(this,Rs)[2]!==this.width||d(this,Rs)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:s}=Ve,r=s/e,i=s/n;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=s,l*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=Yn(i,0,s-a),o=Yn(o,0,r-l);break;case 90:i=Yn(i,0,s-l),o=Yn(o,a,r);break;case 180:i=Yn(i,a,s),o=Yn(o,l,r);break;case 270:i=Yn(i,l,s),o=Yn(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[c,u]=this.getBaseTranslation();i+=c,o+=u,n.left=`${(100*i).toFixed(2)}%`,n.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var s;return N(s=Ve,Tg,w_).call(s,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var s;return N(s=Ve,Tg,w_).call(s,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,s]}=this;return[n*e,s*e]}setDims(e,n){const[s,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/s).toFixed(2)}%`,d(this,Xc)||(i.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:n,width:s}=e,r=s.endsWith("%"),i=!d(this,Xc)&&n.endsWith("%");if(r&&i)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!d(this,Xc)&&!i&&(e.height=`${(100*parseFloat(n)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,St))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,eu))return this._editToolbar;this._editToolbar=new u_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,s]of e)await this._editToolbar.addButton(n,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,St))==null||e.destroy())}addContainer(e){var s;const n=(s=this._editToolbar)==null?void 0:s.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,St)||(O0.initialize(Ve._l10n),E(this,St,new O0(this)),d(this,Jc)&&(d(this,St).data=d(this,Jc),E(this,Jc,null))),d(this,St)}get altTextData(){var e;return(e=d(this,St))==null?void 0:e.data}set altTextData(e){d(this,St)&&(d(this,St).data=e)}get guessedAltText(){var e;return(e=d(this,St))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=d(this,St))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=d(this,St))==null?void 0:n.serialize(e)}hasAltText(){return!!d(this,St)&&!d(this,St).isEmpty()}hasAltTextData(){var e;return((e=d(this,St))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,jf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),N(this,Ae,__).call(this);const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),QU(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,tu)||E(this,tu,new U0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:N(this,Ae,mV).bind(this),onPinching:N(this,Ae,gV).bind(this),onPinchEnd:N(this,Ae,yV).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:n}=An.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(E(this,Zc,!0),this._isDraggable){N(this,Ae,vV).call(this,e);return}N(this,Ae,b_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Pi)&&clearTimeout(d(this,Pi)),E(this,Pi,setTimeout(()=>{var e;E(this,Pi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,s){e.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,u=n/r,p=this.x*i,g=this.y*o,y=this.width*i,x=this.height*o;switch(s){case 0:return[p+c+a,o-g-u-x+l,p+c+y+a,o-g-u+l];case 90:return[p+u+a,o-g+c+l,p+u+x+a,o-g+c+y+l];case 180:return[p-c-y+a,o-g+u+l,p-c+a,o-g+u+x+l];case 270:return[p-u-x+a,o-g-c-y+l,p-u+a,o-g-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,n-o,a,l];case 90:return[s,n-r,l,a];case 180:return[i,n-r,a,l];case 270:return[i,n-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,eu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,eu,!1),!0):!1}isInEditMode(){return d(this,eu)}shouldGetKeyboardEvents(){return d(this,Ro)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return n<o&&r>0&&e<i&&s>0}rebuild(){N(this,Ae,__).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){dt("An editor must be serializable")}static async deserialize(e,n,s){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});r.rotation=e.rotation,E(r,Jc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,l,c,u]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=c/i,r.height=u/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n;if((e=d(this,hl))==null||e.abort(),E(this,hl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,Pi)&&(clearTimeout(d(this,Pi)),E(this,Pi,null)),N(this,Ae,Yp).call(this),this.removeEditToolbar(),d(this,or)){for(const s of d(this,or).values())clearTimeout(s);E(this,or,null)}this.parent=null,(n=d(this,tu))==null||n.destroy(),E(this,tu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(N(this,Ae,hV).call(this),d(this,xn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Ao,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=d(this,xn).children;if(!d(this,Or)){E(this,Or,Array.from(n));const o=N(this,Ae,xV).bind(this),a=N(this,Ae,wV).bind(this),l=this._uiManager._signal;for(const c of d(this,Or)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",N(this,Ae,CV).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Ve._l10nResizer[u])}}const s=d(this,Or)[0];let r=0;for(const o of n){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(d(this,Or).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)d(this,xn).append(d(this,xn).firstChild);else if(i>r)for(let a=0;a<i-r;a++)d(this,xn).firstChild.before(d(this,xn).lastChild);let o=0;for(const a of n){const c=d(this,Or)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ve._l10nResizer[c])}}N(this,Ae,E_).call(this,0),E(this,Ro,!0),d(this,xn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){d(this,Ro)&&N(this,Ae,S_).call(this,d(this,bg),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){N(this,Ae,Yp).call(this),this.div.focus()}select(){var e,n,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(n=this._editToolbar)==null||n.show(),(s=d(this,St))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,n,s,r,i;this.isSelected&&(this.isSelected=!1,(e=d(this,xn))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=d(this,St))==null||i.toggleAltTextBadge(!0))}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,_g)}set isEditing(e){E(this,_g,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,n){E(this,Xc,!0);const s=e/n,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){d(this,or)||E(this,or,new Map);const{action:s}=e;let r=d(this,or).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),d(this,or).delete(s),d(this,or).size===0&&E(this,or,null)},Ve._telemetryTimeout),d(this,or).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,jf,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,jf,!0)}renderAnnotationElement(e){let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};Jc=new WeakMap,Or=new WeakMap,St=new WeakMap,jf=new WeakMap,fl=new WeakMap,Sg=new WeakMap,Xc=new WeakMap,xn=new WeakMap,Qc=new WeakMap,Ao=new WeakMap,hl=new WeakMap,bg=new WeakMap,Zc=new WeakMap,Rs=new WeakMap,_g=new WeakMap,eu=new WeakMap,Ro=new WeakMap,Pi=new WeakMap,zf=new WeakMap,Hf=new WeakMap,or=new WeakMap,tu=new WeakMap,Eg=new WeakMap,Q0=new WeakMap,Ae=new WeakSet,x_=function([e,n],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Tg=new WeakSet,w_=function(e,n,s){switch(s){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},hx=function(e){switch(e){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}},hV=function(){if(d(this,xn))return;E(this,xn,document.createElement("div")),d(this,xn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of e){const r=document.createElement("div");d(this,xn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",N(this,Ae,pV).bind(this,s),{signal:n}),r.addEventListener("contextmenu",ii,{signal:n}),r.tabIndex=-1}this.div.prepend(d(this,xn))},pV=function(e,n){var u;n.preventDefault();const{isMac:s}=An.platform;if(n.button!==0||n.ctrlKey&&s)return;(u=d(this,St))==null||u.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,E(this,Qc,[n.screenX,n.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",N(this,Ae,S_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Gt,{passive:!1,signal:o}),window.addEventListener("contextmenu",ii,{signal:o}),E(this,Ao,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const c=()=>{var p;i.abort(),this.parent.togglePointerEvents(!0),(p=d(this,St))==null||p.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,N(this,Ae,px).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},C_=function(e,n,s,r){this.width=s,this.height=r,this.x=e,this.y=n;const[i,o]=this.parentDimensions;this.setDims(i*s,o*r),this.fixAndSetPosition(),this._onResized()},px=function(){if(!d(this,Ao))return;const{savedX:e,savedY:n,savedWidth:s,savedHeight:r}=d(this,Ao);E(this,Ao,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===n&&a===s&&l===r||this.addCommands({cmd:N(this,Ae,C_).bind(this,i,o,a,l),undo:N(this,Ae,C_).bind(this,e,n,s,r),mustExec:!0})},S_=function(e,n){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=Ve.MIN_SIZE/s,u=Ve.MIN_SIZE/r,p=N(this,Ae,hx).call(this,this.rotation),g=($,z)=>[p[0]*$+p[2]*z,p[1]*$+p[3]*z],y=N(this,Ae,hx).call(this,360-this.rotation),x=($,z)=>[y[0]*$+y[2]*z,y[1]*$+y[3]*z];let v,C,w=!1,S=!1;switch(e){case"topLeft":w=!0,v=($,z)=>[0,0],C=($,z)=>[$,z];break;case"topMiddle":v=($,z)=>[$/2,0],C=($,z)=>[$/2,z];break;case"topRight":w=!0,v=($,z)=>[$,0],C=($,z)=>[0,z];break;case"middleRight":S=!0,v=($,z)=>[$,z/2],C=($,z)=>[0,z/2];break;case"bottomRight":w=!0,v=($,z)=>[$,z],C=($,z)=>[0,0];break;case"bottomMiddle":v=($,z)=>[$/2,z],C=($,z)=>[$/2,0];break;case"bottomLeft":w=!0,v=($,z)=>[0,z],C=($,z)=>[$,0];break;case"middleLeft":S=!0,v=($,z)=>[0,z/2],C=($,z)=>[$,z/2];break}const _=v(a,l),T=C(a,l);let A=g(...T);const P=Ve._round(i+A[0]),M=Ve._round(o+A[1]);let I=1,k=1,D,L;if(n.fromKeyboard)({deltaX:D,deltaY:L}=n);else{const{screenX:$,screenY:z}=n,[B,V]=d(this,Qc);[D,L]=this.screenToPageTranslation($-B,z-V),d(this,Qc)[0]=$,d(this,Qc)[1]=z}if([D,L]=x(D/s,L/r),w){const $=Math.hypot(a,l);I=k=Math.max(Math.min(Math.hypot(T[0]-_[0]-D,T[1]-_[1]-L)/$,1/a,1/l),c/a,u/l)}else S?I=Yn(Math.abs(T[0]-_[0]-D),c,1)/a:k=Yn(Math.abs(T[1]-_[1]-L),u,1)/l;const U=Ve._round(a*I),G=Ve._round(l*k);A=g(...C(U,G));const O=P-A[0],W=M-A[1];d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]),this.width=U,this.height=G,this.x=O,this.y=W,this.setDims(s*U,r*G),this.fixAndSetPosition(),this._onResizing()},mV=function(){var e;E(this,Ao,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,St))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},gV=function(e,n,s){let i=.7*(s/n)+1-.7;if(i===1)return;const o=N(this,Ae,hx).call(this,this.rotation),a=(P,M)=>[o[0]*P+o[2]*M,o[1]*P+o[3]*M],[l,c]=this.parentDimensions,u=this.x,p=this.y,g=this.width,y=this.height,x=Ve.MIN_SIZE/l,v=Ve.MIN_SIZE/c;i=Math.max(Math.min(i,1/g,1/y),x/g,v/y);const C=Ve._round(g*i),w=Ve._round(y*i);if(C===g&&w===y)return;d(this,Rs)||E(this,Rs,[u,p,g,y]);const S=a(g/2,y/2),_=Ve._round(u+S[0]),T=Ve._round(p+S[1]),A=a(C/2,w/2);this.x=_-A[0],this.y=T-A[1],this.width=C,this.height=w,this.setDims(l*C,c*w),this.fixAndSetPosition(),this._onResizing()},yV=function(){var e;(e=d(this,St))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),N(this,Ae,px).call(this)},b_=function(e){const{isMac:n}=An.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},vV=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=c=>{r.abort(),E(this,fl,null),E(this,Zc,!1),this._uiManager.endDragSession()||N(this,Ae,b_).call(this,c),s&&this._onStopDragging()};n&&(E(this,zf,e.clientX),E(this,Hf,e.clientY),E(this,fl,e.pointerId),E(this,Sg,e.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:p,pointerId:g}=c;if(g!==d(this,fl)){Gt(c);return}const[y,x]=this.screenToPageTranslation(u-d(this,zf),p-d(this,Hf));E(this,zf,u),E(this,Hf,p),this._uiManager.dragSelectedEditors(y,x)},o),window.addEventListener("touchmove",Gt,o),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,Sg)&&(d(this,tu)||c.isPrimary)&&a(c),Gt(c)},o));const l=c=>{if(!d(this,fl)||d(this,fl)===c.pointerId){a(c);return}Gt(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},__=function(){if(d(this,hl)||!this.div)return;E(this,hl,new AbortController);const e=this._uiManager.combinedSignal(d(this,hl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},xV=function(e){Ve._resizerKeyboardManager.exec(this,e)},wV=function(e){var n;d(this,Ro)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==d(this,xn)&&N(this,Ae,Yp).call(this)},CV=function(e){E(this,bg,d(this,Ro)?e:"")},E_=function(e){if(d(this,Or))for(const n of d(this,Or))n.tabIndex=e},Yp=function(){E(this,Ro,!1),N(this,Ae,E_).call(this,-1),N(this,Ae,px).call(this)},R(Ve,Tg),Z(Ve,"_l10n",null),Z(Ve,"_l10nResizer",null),Z(Ve,"_borderLineWidth",-1),Z(Ve,"_colorManager",new f_),Z(Ve,"_zIndex",1),Z(Ve,"_telemetryTimeout",1e3);let mt=Ve;class vY extends mt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZN=3285377520,tr=4294901760,gi=65535;class SV{constructor(e){this.h1=e?e&4294967295:ZN,this.h2=e?e&4294967295:ZN}update(e){let n,s;if(typeof e=="string"){n=new Uint8Array(e.length*2),s=0;for(let v=0,C=e.length;v<C;v++){const w=e.charCodeAt(v);w<=255?n[s++]=w:(n[s++]=w>>>8,n[s++]=w&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(n.buffer,0,r);let a=0,l=0,c=this.h1,u=this.h2;const p=3432918353,g=461845907,y=p&gi,x=g&gi;for(let v=0;v<r;v++)v&1?(a=o[v],a=a*p&tr|a*y&gi,a=a<<15|a>>>17,a=a*g&tr|a*x&gi,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*p&tr|l*y&gi,l=l<<15|l>>>17,l=l*g&tr|l*x&gi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=n[r*4+2]<<16;case 2:a^=n[r*4+1]<<8;case 1:a^=n[r*4],a=a*p&tr|a*y&gi,a=a<<15|a>>>17,a=a*g&tr|a*x&gi,r&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&tr|e*36045&gi,n=n*4283543511&tr|((n<<16|e>>>16)*2950163797&tr)>>>16,e^=n>>>1,e=e*444984403&tr|e*60499&gi,n=n*3301882366&tr|((n<<16|e>>>16)*3120437893&tr)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const T_=Object.freeze({map:null,hash:"",transfer:void 0});var nu,su,wn,Z0,bV;class WA{constructor(){R(this,Z0);R(this,nu,!1);R(this,su,null);R(this,wn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const s=d(this,wn).get(e);return s===void 0?n:Object.assign(n,s)}getRawValue(e){return d(this,wn).get(e)}remove(e){if(d(this,wn).delete(e),d(this,wn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of d(this,wn).values())if(n instanceof mt)return;this.onAnnotationEditor(null)}}setValue(e,n){const s=d(this,wn).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(n))s[i]!==o&&(r=!0,s[i]=o);else r=!0,d(this,wn).set(e,n);r&&N(this,Z0,bV).call(this),n instanceof mt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(e){return d(this,wn).has(e)}get size(){return d(this,wn).size}resetModified(){d(this,nu)&&(E(this,nu,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _V(this)}get serializable(){if(d(this,wn).size===0)return T_;const e=new Map,n=new SV,s=[],r=Object.create(null);let i=!1;for(const[o,a]of d(this,wn)){const l=a instanceof mt?a.serialize(!1,r):a;l&&(e.set(o,l),n.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:s}:T_}get editorStats(){let e=null;const n=new Map;for(const s of d(this,wn).values()){if(!(s instanceof mt))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:i}=r;n.has(i)||n.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(r)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[s,r]of n)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){E(this,su,null)}get modifiedIds(){if(d(this,su))return d(this,su);const e=[];for(const n of d(this,wn).values())!(n instanceof mt)||!n.annotationElementId||!n.serialize()||e.push(n.annotationElementId);return E(this,su,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,wn).entries()}}nu=new WeakMap,su=new WeakMap,wn=new WeakMap,Z0=new WeakSet,bV=function(){d(this,nu)||(E(this,nu,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ag;class _V extends WA{constructor(n){super();R(this,Ag);const{map:s,hash:r,transfer:i}=n.serializable,o=structuredClone(s,i?{transfer:i}:null);E(this,Ag,{map:o,hash:r,transfer:i})}get print(){dt("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Ag)}get modifiedIds(){return He(this,"modifiedIds",{ids:new Set,hash:""})}}Ag=new WeakMap;var Gf;class xY{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){R(this,Gf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Gf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:s}){if(!(!e||d(this,Gf).has(e.loadedName))){if(Wt(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),d(this,Gf).add(r),s==null||s(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}dt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw Ie(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return He(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return He(this,"isSyncFontLoadingSupported",Kn||An.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Wt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:n,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return He(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function s(T,A){return T.charCodeAt(A)<<24|T.charCodeAt(A+1)<<16|T.charCodeAt(A+2)<<8|T.charCodeAt(A+3)&255}function r(T,A,P,M){const I=T.substring(0,A),k=T.substring(A+P);return I+M+k}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(T,A){if(++c>30){Ie("Load test font never loaded."),A();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(u.bind(null,T,A))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,p.length,p);const x=16,v=1482184792;let C=s(g,x);for(i=0,o=p.length-3;i<o;i+=4)C=C-v+s(p,i)|0;i<p.length&&(C=C-v+s(p+"XXX",i)|0),g=r(g,x,4,sY(C));const w=`url(data:font/opentype;base64,${btoa(g)});`,S=`@font-face {font-family:"${p}";src:${w}}`;this.insertRule(S);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const T of[e.loadedName,p]){const A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=T,_.append(A)}this._document.body.append(_),u(p,()=>{_.remove(),n.complete()})}}Gf=new WeakMap;class wY{constructor(e,n=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=n}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${GU(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let r;try{r=e.get(s)}catch(o){Ie(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[n]=i}}function CY(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(Kn)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function SY(t){if(Kn&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return Wy(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Mv(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const A_=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,bY=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",_Y=lY.bind(null,A_,bY);var No,ew;class EY{constructor(){R(this,No,new Map);R(this,ew,Promise.resolve())}postMessage(e,n){const s={data:structuredClone(e,n?{transfer:n}:null)};d(this,ew).then(()=>{for(const[r]of d(this,No))r.call(this,s)})}addEventListener(e,n,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,n);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}d(this,No).set(n,r)}removeEventListener(e,n){const s=d(this,No).get(n);s==null||s(),d(this,No).delete(n)}terminate(){for(const[,e]of d(this,No))e==null||e();d(this,No).clear()}}No=new WeakMap,ew=new WeakMap;const kv={DATA:1,ERROR:2},jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function eP(){}function cs(t){if(t instanceof tc||t instanceof a_||t instanceof JN||t instanceof F0||t instanceof dS)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||dt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new tc(t.message);case"InvalidPDFException":return new a_(t.message);case"PasswordException":return new JN(t.message,t.code);case"ResponseException":return new F0(t.message,t.status,t.missing);case"UnknownErrorException":return new dS(t.message,t.details)}return new dS(t.message,t.toString())}var qf,vr,EV,TV,AV,mx;class Jp{constructor(e,n,s){R(this,vr);R(this,qf,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",N(this,vr,EV).bind(this),{signal:d(this,qf).signal})}on(e,n){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=n}send(e,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},s)}sendWithPromise(e,n,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,n,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:n,desiredSize:c.desiredSize},r),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:jt.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Wt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:jt.CANCEL,streamId:i,reason:cs(c)}),u.promise}},s)}destroy(){var e;(e=d(this,qf))==null||e.abort(),E(this,qf,null)}}qf=new WeakMap,vr=new WeakSet,EV=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){N(this,vr,AV).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===kv.DATA)r.resolve(e.data);else if(e.callback===kv.ERROR)r.reject(cs(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(n,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:kv.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:kv.ERROR,callbackId:e.callbackId,reason:cs(o)})});return}if(e.streamId){N(this,vr,TV).call(this,e);return}n(e.data)},TV=function(e){const n=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,p){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=u,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:jt.ENQUEUE,streamId:n,chunk:c},p)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:jt.CLOSE,streamId:n}),delete o.streamSinks[n])},error(c){Wt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:jt.ERROR,streamId:n,reason:cs(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:jt.START_COMPLETE,streamId:n,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:jt.START_COMPLETE,streamId:n,reason:cs(c)})})},AV=function(e){const n=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[n],a=this.streamSinks[n];switch(e.stream){case jt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(cs(e.reason));break;case jt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(cs(e.reason));break;case jt.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:jt.PULL_COMPLETE,streamId:n,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||eP).then(function(){i.postMessage({sourceName:s,targetName:r,stream:jt.PULL_COMPLETE,streamId:n,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:jt.PULL_COMPLETE,streamId:n,reason:cs(c)})});break;case jt.ENQUEUE:if(Wt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case jt.CLOSE:if(Wt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),N(this,vr,mx).call(this,o,n);break;case jt.ERROR:Wt(o,"error should have stream controller"),o.controller.error(cs(e.reason)),N(this,vr,mx).call(this,o,n);break;case jt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(cs(e.reason)),N(this,vr,mx).call(this,o,n);break;case jt.CANCEL:if(!a)break;const l=cs(e.reason);Promise.try(a.onCancel||eP,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:n,reason:cs(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},mx=async function(e,n){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[n]};var Rg;class RV{constructor({enableHWA:e=!1}){R(this,Rg,!1);E(this,Rg,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!d(this,Rg)})}}reset(e,n,s){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){dt("Abstract method `_createCanvas` called.")}}Rg=new WeakMap;class TY extends RV{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const s=this._document.createElement("canvas");return s.width=e,s.height=n,s}}class NV{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class tP extends NV{async _fetch(e){const n=await Ky(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Wy(n)}}class PV{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,s,r,i){return"none"}destroy(e=!1){}}var ru,Wf,Po,Mo,Fn,iu,ou,ue,In,Xp,Dd,gx,Ld,MV,R_,Fd,Qp,Zp,N_,em;class AY extends PV{constructor({docId:n,ownerDocument:s=globalThis.document}){super();R(this,ue);R(this,ru);R(this,Wf);R(this,Po);R(this,Mo);R(this,Fn);R(this,iu);R(this,ou,0);E(this,Mo,n),E(this,Fn,s)}addFilter(n){if(!n)return"none";let s=d(this,ue,In).get(n);if(s)return s;const[r,i,o]=N(this,ue,gx).call(this,n),a=n.length===1?r:`${r}${i}${o}`;if(s=d(this,ue,In).get(a),s)return d(this,ue,In).set(n,s),s;const l=`g_${d(this,Mo)}_transfer_map_${rn(this,ou)._++}`,c=N(this,ue,Ld).call(this,l);d(this,ue,In).set(n,c),d(this,ue,In).set(a,c);const u=N(this,ue,Fd).call(this,l);return N(this,ue,Zp).call(this,r,i,o,u),c}addHCMFilter(n,s){var x;const r=`${n}-${s}`,i="base";let o=d(this,ue,Xp).get(i);if((o==null?void 0:o.key)===r||(o?((x=o.filter)==null||x.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},d(this,ue,Xp).set(i,o)),!n||!s))return o.url;const a=N(this,ue,em).call(this,n);n=be.makeHexColor(...a);const l=N(this,ue,em).call(this,s);if(s=be.makeHexColor(...l),d(this,ue,Dd).style.color="",n==="#000000"&&s==="#ffffff"||n===s)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const C=v/255;c[v]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const u=c.join(","),p=`g_${d(this,Mo)}_hcm_filter`,g=o.filter=N(this,ue,Fd).call(this,p);N(this,ue,Zp).call(this,u,u,u,g),N(this,ue,R_).call(this,g);const y=(v,C)=>{const w=a[v]/255,S=l[v]/255,_=new Array(C+1);for(let T=0;T<=C;T++)_[T]=w+T/C*(S-w);return _.join(",")};return N(this,ue,Zp).call(this,y(0,5),y(1,5),y(2,5),g),o.url=N(this,ue,Ld).call(this,p),o.url}addAlphaFilter(n){let s=d(this,ue,In).get(n);if(s)return s;const[r]=N(this,ue,gx).call(this,[n]),i=`alpha_${r}`;if(s=d(this,ue,In).get(i),s)return d(this,ue,In).set(n,s),s;const o=`g_${d(this,Mo)}_alpha_map_${rn(this,ou)._++}`,a=N(this,ue,Ld).call(this,o);d(this,ue,In).set(n,a),d(this,ue,In).set(i,a);const l=N(this,ue,Fd).call(this,o);return N(this,ue,N_).call(this,r,l),a}addLuminosityFilter(n){let s=d(this,ue,In).get(n||"luminosity");if(s)return s;let r,i;if(n?([r]=N(this,ue,gx).call(this,[n]),i=`luminosity_${r}`):i="luminosity",s=d(this,ue,In).get(i),s)return d(this,ue,In).set(n,s),s;const o=`g_${d(this,Mo)}_luminosity_map_${rn(this,ou)._++}`,a=N(this,ue,Ld).call(this,o);d(this,ue,In).set(n,a),d(this,ue,In).set(i,a);const l=N(this,ue,Fd).call(this,o);return N(this,ue,MV).call(this,l),n&&N(this,ue,N_).call(this,r,l),a}addHighlightHCMFilter(n,s,r,i,o){var S;const a=`${s}-${r}-${i}-${o}`;let l=d(this,ue,Xp).get(n);if((l==null?void 0:l.key)===a||(l?((S=l.filter)==null||S.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,ue,Xp).set(n,l)),!s||!r))return l.url;const[c,u]=[s,r].map(N(this,ue,em).bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),g=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[y,x]=[i,o].map(N(this,ue,em).bind(this));g<p&&([p,g,y,x]=[g,p,x,y]),d(this,ue,Dd).style.color="";const v=(_,T,A)=>{const P=new Array(256),M=(g-p)/A,I=_/255,k=(T-_)/(255*A);let D=0;for(let L=0;L<=A;L++){const U=Math.round(p+L*M),G=I+L*k;for(let O=D;O<=U;O++)P[O]=G;D=U+1}for(let L=D;L<256;L++)P[L]=P[D-1];return P.join(",")},C=`g_${d(this,Mo)}_hcm_${n}_filter`,w=l.filter=N(this,ue,Fd).call(this,C);return N(this,ue,R_).call(this,w),N(this,ue,Zp).call(this,v(y[0],x[0],5),v(y[1],x[1],5),v(y[2],x[2],5),w),l.url=N(this,ue,Ld).call(this,C),l.url}destroy(n=!1){var s,r,i,o;n&&((s=d(this,iu))!=null&&s.size)||((r=d(this,Po))==null||r.parentNode.parentNode.remove(),E(this,Po,null),(i=d(this,Wf))==null||i.clear(),E(this,Wf,null),(o=d(this,iu))==null||o.clear(),E(this,iu,null),E(this,ou,0))}}ru=new WeakMap,Wf=new WeakMap,Po=new WeakMap,Mo=new WeakMap,Fn=new WeakMap,iu=new WeakMap,ou=new WeakMap,ue=new WeakSet,In=function(){return d(this,Wf)||E(this,Wf,new Map)},Xp=function(){return d(this,iu)||E(this,iu,new Map)},Dd=function(){if(!d(this,Po)){const n=d(this,Fn).createElement("div"),{style:s}=n;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=d(this,Fn).createElementNS(uo,"svg");r.setAttribute("width",0),r.setAttribute("height",0),E(this,Po,d(this,Fn).createElementNS(uo,"defs")),n.append(r),r.append(d(this,Po)),d(this,Fn).body.append(n)}return d(this,Po)},gx=function(n){if(n.length===1){const c=n[0],u=new Array(256);for(let g=0;g<256;g++)u[g]=c[g]/255;const p=u.join(",");return[p,p,p]}const[s,r,i]=n,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=s[c]/255,a[c]=r[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},Ld=function(n){if(d(this,ru)===void 0){E(this,ru,"");const s=d(this,Fn).URL;s!==d(this,Fn).baseURI&&(aC(s)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,ru,jU(s,"")))}return`url(${d(this,ru)}#${n})`},MV=function(n){const s=d(this,Fn).createElementNS(uo,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(s)},R_=function(n){const s=d(this,Fn).createElementNS(uo,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(s)},Fd=function(n){const s=d(this,Fn).createElementNS(uo,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",n),d(this,ue,Dd).append(s),s},Qp=function(n,s,r){const i=d(this,Fn).createElementNS(uo,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),n.append(i)},Zp=function(n,s,r,i){const o=d(this,Fn).createElementNS(uo,"feComponentTransfer");i.append(o),N(this,ue,Qp).call(this,o,"feFuncR",n),N(this,ue,Qp).call(this,o,"feFuncG",s),N(this,ue,Qp).call(this,o,"feFuncB",r)},N_=function(n,s){const r=d(this,Fn).createElementNS(uo,"feComponentTransfer");s.append(r),N(this,ue,Qp).call(this,r,"feFuncA",n)},em=function(n){return d(this,ue,Dd).style.color=n,qA(getComputedStyle(d(this,ue,Dd)).getPropertyValue("color"))};class kV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class nP extends kV{async _fetch(e){const n=await Ky(e,"arraybuffer");return new Uint8Array(n)}}class IV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class sP extends IV{async _fetch(e){const n=await Ky(e,"arraybuffer");return new Uint8Array(n)}}Kn&&Ie("Please use the `legacy` build in Node.js environments.");async function KA(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class RY extends PV{}class NY extends RV{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class PY extends NV{async _fetch(e){return KA(e)}}class MY extends kV{async _fetch(e){return KA(e)}}class kY extends IV{async _fetch(e){return KA(e)}}const _n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function P_(t,e){if(!e)return;const n=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,s),t.clip(r)}class YA{isModifyingCurrentTransform(){return!1}getPattern(){dt("Abstract method `getPattern` called.")}}class IY extends YA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(e,n,s,r){let i;if(r===_n.STROKE||r===_n.FILL){const o=n.current.getClippedPathBoundingBox(r,Nt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=n.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=be.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...n.baseTransform),this.matrix&&u.transform(...this.matrix),P_(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const p=new DOMMatrix(s);i.setTransform(p)}else P_(e,this._bbox),i=this._createGradient(e);return i}}function pS(t,e,n,s,r,i,o,a){const l=e.coords,c=e.colors,u=t.data,p=t.width*4;let g;l[n+1]>l[s+1]&&(g=n,n=s,s=g,g=i,i=o,o=g),l[s+1]>l[r+1]&&(g=s,s=r,r=g,g=o,o=a,a=g),l[n+1]>l[s+1]&&(g=n,n=s,s=g,g=i,i=o,o=g);const y=(l[n]+e.offsetX)*e.scaleX,x=(l[n+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,C=(l[s+1]+e.offsetY)*e.scaleY,w=(l[r]+e.offsetX)*e.scaleX,S=(l[r+1]+e.offsetY)*e.scaleY;if(x>=S)return;const _=c[i],T=c[i+1],A=c[i+2],P=c[o],M=c[o+1],I=c[o+2],k=c[a],D=c[a+1],L=c[a+2],U=Math.round(x),G=Math.round(S);let O,W,$,z,B,V,H,Q;for(let J=U;J<=G;J++){if(J<C){const Y=J<x?0:(x-J)/(x-C);O=y-(y-v)*Y,W=_-(_-P)*Y,$=T-(T-M)*Y,z=A-(A-I)*Y}else{let Y;J>S?Y=1:C===S?Y=0:Y=(C-J)/(C-S),O=v-(v-w)*Y,W=P-(P-k)*Y,$=M-(M-D)*Y,z=I-(I-L)*Y}let se;J<x?se=0:J>S?se=1:se=(x-J)/(x-S),B=y-(y-w)*se,V=_-(_-k)*se,H=T-(T-D)*se,Q=A-(A-L)*se;const ye=Math.round(Math.min(O,B)),Me=Math.round(Math.max(O,B));let De=p*J+ye*4;for(let Y=ye;Y<=Me;Y++)se=(O-Y)/(O-B),se<0?se=0:se>1&&(se=1),u[De++]=W-(W-V)*se|0,u[De++]=$-($-H)*se|0,u[De++]=z-(z-Q)*se|0,u[De++]=255}}function DY(t,e,n){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let p=0;p<c;p++,u++)pS(t,n,s[u],s[u+1],s[u+a],r[u],r[u+1],r[u+a]),pS(t,n,s[u+a+1],s[u+1],s[u+a],r[u+a+1],r[u+1],r[u+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)pS(t,n,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class LY extends YA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),y=c/p,x=u/g,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/y,scaleY:1/x},C=p+2*2,w=g+2*2,S=s.getCanvas("mesh",C,w),_=S.context,T=_.createImageData(p,g);if(n){const P=T.data;for(let M=0,I=P.length;M<I;M+=4)P[M]=n[0],P[M+1]=n[1],P[M+2]=n[2],P[M+3]=255}for(const P of this._figures)DY(T,P,v);return _.putImageData(T,2,2),{canvas:S.canvas,offsetX:a-2*y,offsetY:l-2*x,scaleX:y,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,n,s,r){P_(e,this._bbox);const i=new Float32Array(2);if(r===_n.SHADING)be.singularValueDecompose2dScale(Nt(e),i);else if(this.matrix){be.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;be.singularValueDecompose2dScale(n.baseTransform,i),i[0]*=a,i[1]*=l}else be.singularValueDecompose2dScale(n.baseTransform,i);const o=this._createMeshCanvas(i,r===_n.SHADING?null:this._background,n.cachedCanvases);return r!==_n.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class FY extends YA{getPattern(){return"hotpink"}}function OY(t){switch(t[0]){case"RadialAxial":return new IY(t);case"Mesh":return new LY(t);case"Dummy":return new FY}throw new Error(`Unknown IR type: ${t[0]}`)}const rP={COLORED:1,UNCOLORED:2},tw=class tw{constructor(e,n,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:n,operatorList:s,paintType:r,tilingType:i,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),oC("TilingType: "+i);const u=n[0],p=n[1],g=n[2],y=n[3],x=g-u,v=y-p,C=new Float32Array(2);be.singularValueDecompose2dScale(this.matrix,C);const[w,S]=C;be.singularValueDecompose2dScale(this.baseTransform,C);const _=w*C[0],T=S*C[1];let A=x,P=v,M=!1,I=!1;const k=Math.ceil(l*_),D=Math.ceil(c*T),L=Math.ceil(x*_),U=Math.ceil(v*T);k>=L?A=l:M=!0,D>=U?P=c:I=!0;const G=this.getSizeAndScale(A,this.ctx.canvas.width,_),O=this.getSizeAndScale(P,this.ctx.canvas.height,T),W=e.cachedCanvases.getCanvas("pattern",G.size,O.size),$=W.context,z=a.createCanvasGraphics($);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,r,o),$.translate(-G.scale*u,-O.scale*p),z.transform(G.scale,0,0,O.scale,0,0),$.save(),this.clipBbox(z,u,p,g,y),z.baseTransform=Nt(z.ctx),z.executeOperatorList(s),z.endDrawing(),$.restore(),M||I){const B=W.canvas;M&&(A=l),I&&(P=c);const V=this.getSizeAndScale(A,this.ctx.canvas.width,_),H=this.getSizeAndScale(P,this.ctx.canvas.height,T),Q=V.size,J=H.size,se=e.cachedCanvases.getCanvas("pattern-workaround",Q,J),ye=se.context,Me=M?Math.floor(x/l):0,De=I?Math.floor(v/c):0;for(let Y=0;Y<=Me;Y++)for(let _e=0;_e<=De;_e++)ye.drawImage(B,Q*Y,J*_e,Q,J,0,0,Q,J);return{canvas:se.canvas,scaleX:V.scale,scaleY:H.scale,offsetX:u,offsetY:p}}return{canvas:W.canvas,scaleX:G.scale,scaleY:O.scale,offsetX:u,offsetY:p}}getSizeAndScale(e,n,s){const r=Math.max(tw.MAX_PATTERN_SIZE,n);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,n,s,r,i){const o=r-n,a=i-s;e.ctx.rect(n,s,o,a),be.axialAlignedBoundingBox([n,s,r,i],Nt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,s){const r=e.ctx,i=e.current;switch(n){case rP.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case rP.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new nY(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,s,r){let i=s;r!==_n.SHADING&&(i=be.transform(i,n.baseTransform),this.matrix&&(i=be.transform(i,this.matrix)));const o=this.createPatternCanvas(n);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};Z(tw,"MAX_PATTERN_SIZE",3e3);let M_=tw;function UY({src:t,srcPos:e=0,dest:n,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=An.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=s>>3,p=s&7,g=t.length;n=new Uint32Array(n.buffer);let y=0;for(let x=0;x<r;x++){for(const C=e+u;e<C;e++){const w=e<g?t[e]:255;n[y++]=w&128?c:l,n[y++]=w&64?c:l,n[y++]=w&32?c:l,n[y++]=w&16?c:l,n[y++]=w&8?c:l,n[y++]=w&4?c:l,n[y++]=w&2?c:l,n[y++]=w&1?c:l}if(p===0)continue;const v=e<g?t[e++]:255;for(let C=0;C<p;C++)n[y++]=v&1<<7-C?c:l}return{srcPos:e,destPos:y}}const iP=16,oP=100,VY=15,aP=10,vs=16,mS=new DOMMatrix,Hs=new Float32Array(2),Zd=new Float32Array([1/0,1/0,-1/0,-1/0]);function $Y(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},t.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},t.transform=function(n,s,r,i,o,a){e.transform(n,s,r,i,o,a),this.__originalTransform(n,s,r,i,o,a)},t.setTransform=function(n,s,r,i,o,a){e.setTransform(n,s,r,i,o,a),this.__originalSetTransform(n,s,r,i,o,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,s){e.moveTo(n,s),this.__originalMoveTo(n,s)},t.lineTo=function(n,s){e.lineTo(n,s),this.__originalLineTo(n,s)},t.bezierCurveTo=function(n,s,r,i,o,a){e.bezierCurveTo(n,s,r,i,o,a),this.__originalBezierCurveTo(n,s,r,i,o,a)},t.rect=function(n,s,r,i){e.rect(n,s,r,i),this.__originalRect(n,s,r,i)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class BY{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,n,s)):(r=this.canvasFactory.create(n,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function Iv(t,e,n,s,r,i,o,a,l,c){const[u,p,g,y,x,v]=Nt(t);if(p===0&&g===0){const S=o*u+x,_=Math.round(S),T=a*y+v,A=Math.round(T),P=(o+l)*u+x,M=Math.abs(Math.round(P)-_)||1,I=(a+c)*y+v,k=Math.abs(Math.round(I)-A)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(y),_,A),t.drawImage(e,n,s,r,i,0,0,M,k),t.setTransform(u,p,g,y,x,v),[M,k]}if(u===0&&y===0){const S=a*g+x,_=Math.round(S),T=o*p+v,A=Math.round(T),P=(a+c)*g+x,M=Math.abs(Math.round(P)-_)||1,I=(o+l)*p+v,k=Math.abs(Math.round(I)-A)||1;return t.setTransform(0,Math.sign(p),Math.sign(g),0,_,A),t.drawImage(e,n,s,r,i,0,0,k,M),t.setTransform(u,p,g,y,x,v),[k,M]}t.drawImage(e,n,s,r,i,o,a,l,c);const C=Math.hypot(u,p),w=Math.hypot(g,y);return[C*l,w*c]}class lP{constructor(e,n){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",o_);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",kn.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Zd.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=_n.FILL,n=null){const s=this.minMax.slice();if(e===_n.STROKE){n||dt("Stroke bounding box must include transform."),be.singularValueDecompose2dScale(n,Hs);const r=Hs[0]*this.lineWidth/2,i=Hs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=be.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Zd,0)}getClippedPathBoundingBox(e=_n.FILL,n=null){return be.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function cP(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,s=e.width,r=n%vs,i=(n-r)/vs,o=r===0?i:i+1,a=t.createImageData(s,vs);let l=0,c;const u=e.data,p=a.data;let g,y,x,v;if(e.kind===ox.GRAYSCALE_1BPP){const C=u.byteLength,w=new Uint32Array(p.buffer,0,p.byteLength>>2),S=w.length,_=s+7>>3,T=4294967295,A=An.isLittleEndian?4278190080:255;for(g=0;g<o;g++){for(x=g<i?vs:r,c=0,y=0;y<x;y++){const P=C-l;let M=0;const I=P>_?s:P*8-7,k=I&-8;let D=0,L=0;for(;M<k;M+=8)L=u[l++],w[c++]=L&128?T:A,w[c++]=L&64?T:A,w[c++]=L&32?T:A,w[c++]=L&16?T:A,w[c++]=L&8?T:A,w[c++]=L&4?T:A,w[c++]=L&2?T:A,w[c++]=L&1?T:A;for(;M<I;M++)D===0&&(L=u[l++],D=128),w[c++]=L&D?T:A,D>>=1}for(;c<S;)w[c++]=0;t.putImageData(a,0,g*vs)}}else if(e.kind===ox.RGBA_32BPP){for(y=0,v=s*vs*4,g=0;g<i;g++)p.set(u.subarray(l,l+v)),l+=v,t.putImageData(a,0,y),y+=vs;g<o&&(v=s*r*4,p.set(u.subarray(l,l+v)),t.putImageData(a,0,y))}else if(e.kind===ox.RGB_24BPP)for(x=vs,v=s*x,g=0;g<o;g++){for(g>=i&&(x=r,v=s*x),c=0,y=v;y--;)p[c++]=u[l++],p[c++]=u[l++],p[c++]=u[l++],p[c++]=255;t.putImageData(a,0,g*vs)}else throw new Error(`bad image kind: ${e.kind}`)}function uP(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,s=e.width,r=n%vs,i=(n-r)/vs,o=r===0?i:i+1,a=t.createImageData(s,vs);let l=0;const c=e.data,u=a.data;for(let p=0;p<o;p++){const g=p<i?vs:r;({srcPos:l}=UY({src:c,srcPos:l,dest:u,width:s,height:g,nonBlackColor:0})),t.putImageData(a,0,p*vs)}}function Pp(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)t[s]!==void 0&&(e[s]=t[s]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Dv(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function dP(t,e){if(e)return!0;be.singularValueDecompose2dScale(t,Hs);const n=Math.fround(eo.pixelRatio*nc.PDF_TO_CSS_UNITS);return Hs[0]<=n&&Hs[1]<=n}const jY=["butt","round","square"],zY=["miter","round","bevel"],HY={},fP={};var oi,k_,I_,D_;const u1=class u1{constructor(e,n,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){R(this,oi);this.ctx=e,this.current=new lP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new BY(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Nt(this.compositeCtx))}this.ctx.save(),Dv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Nt(this.ctx)}executeOperatorList(e,n,s,r){const i=e.argsArray,o=e.fnArray;let a=n||0;const l=i.length;if(l===a)return a;const c=l-a>aP&&typeof s=="function",u=c?Date.now()+VY:0;let p=0;const g=this.commonObjs,y=this.objs;let x;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,s),a;if(x=o[a],x!==L0.dependency)this[x].apply(this,i[a]);else for(const v of i[a]){const C=v.startsWith("g_")?g:y;if(!C.has(v))return C.get(v,s),a}if(a++,a===l)return a;if(c&&++p>aP){if(Date.now()>u)return s(),a;p=0}}}endDrawing(){N(this,oi,k_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),N(this,oi,I_).call(this)}_scaleImage(e,n){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(n[0],n[1]),1),o=Math.max(Math.hypot(n[2],n[3]),1),a=s,l=r,c="prescale1",u,p;for(;i>2&&a>1||o>2&&l>1;){let g=a,y=l;i>2&&a>1&&(g=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/g),o>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/y),u=this.cachedCanvases.getCanvas(c,g,y),p=u.context,p.clearRect(0,0,g,y),p.drawImage(e,0,0,a,l,0,0,g,y),e=u.canvas,a=g,l=y,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const n=this.ctx,{width:s,height:r}=e,i=this.current.fillColor,o=this.current.patternFill,a=Nt(n);let l,c,u,p;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const D=l.get(c);if(D&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),U=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:D,offsetX:L,offsetY:U}}u=D}u||(p=this.cachedCanvases.getCanvas("maskCanvas",s,r),uP(p.context,e));let g=be.transform(a,[1/s,0,0,-1/r,0,0]);g=be.transform(g,[1,0,0,1,0,-r]);const y=Zd.slice();be.axialAlignedBoundingBox([0,0,s,r],g,y);const[x,v,C,w]=y,S=Math.round(C-x)||1,_=Math.round(w-v)||1,T=this.cachedCanvases.getCanvas("fillCanvas",S,_),A=T.context,P=x,M=v;A.translate(-P,-M),A.transform(...g),u||(u=this._scaleImage(p.canvas,mi(A)),u=u.img,l&&o&&l.set(c,u)),A.imageSmoothingEnabled=dP(Nt(A),e.interpolate),Iv(A,u,0,0,u.width,u.height,0,0,s,r),A.globalCompositeOperation="source-in";const I=be.transform(mi(A),[1,0,0,1,-P,-M]);return A.fillStyle=o?i.getPattern(n,this,I,_n.FILL):i,A.fillRect(0,0,s,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(M)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=jY[e]}setLineJoin(e){this.ctx.lineJoin=zY[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,s]of e)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const i=this.ctx=r.context;i.setTransform(this.suspendedCtx.getTransform()),Pp(this.suspendedCtx,i),$Y(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Pp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(n.context,s,a,l,n.subtype,n.backdrop,n.transferMap,i,o,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,n,s,r,i,o,a,l,c,u,p){let g=e.canvas,y=l-u,x=c-p;if(o)if(y<0||x<0||y+s>g.width||x+r>g.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,r),w=C.context;w.drawImage(g,-y,-x),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",g=C.canvas,y=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(y,x,s,r),e.clip(C),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(y,x,s,r),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?n.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,s,r),n.clip(v),n.globalCompositeOperation="destination-in",n.drawImage(g,y,x,s,r,l,c,s,r),n.restore()}save(){this.inSMaskMode&&Pp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Pp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,s,r,i,o){this.ctx.transform(e,n,s,r,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const i=n[0]=new Path2D;for(let o=0,a=r.length;o<a;)switch(r[o++]){case Pv.moveTo:i.moveTo(r[o++],r[o++]);break;case Pv.lineTo:i.lineTo(r[o++],r[o++]);break;case Pv.curveTo:i.bezierCurveTo(r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);break;case Pv.closePath:i.closePath();break;default:Ie(`Unrecognized drawing path operator: ${r[o-1]}`);break}r=i}be.axialAlignedBoundingBox(s,Nt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,n=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const i=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,mi(s),_n.STROKE),i){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);n&&this.consumePath(e,this.current.getClippedPathBoundingBox(_n.STROKE,Nt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,n=!0){const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,mi(s),_n.FILL),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),n&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=HY}eoClip(){this.pendingClip=fP}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(e===void 0)return;const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:i,x:o,y:a,fontSize:l,path:c}of e)s.addPath(c,new DOMMatrix(i).preMultiplySelf(r).translate(o,a).scale(l,-l));n.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){var u;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||o_,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const i=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${i}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let c=n;n<iP?c=iP:n>oP&&(c=oP),this.current.fontSizeScale=n/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e){const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,s,r,i){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,p=c&kn.FILL_STROKE_MASK,g=!!(c&kn.ADD_TO_PATH_FLAG),y=a.patternFill&&!l.missingFile,x=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||g||y||x)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||y||x){o.save(),o.translate(n,s),o.scale(u,-u);let C;if((p===kn.FILL||p===kn.FILL_STROKE)&&(r?(C=o.getTransform(),o.setTransform(...r),o.fill(N(this,oi,D_).call(this,v,C,r))):o.fill(v)),p===kn.STROKE||p===kn.FILL_STROKE)if(i){C||(C=o.getTransform()),o.setTransform(...i);const{a:w,b:S,c:_,d:T}=C,A=be.inverseTransform(i),P=be.transform([w,S,_,T,0,0],A);be.singularValueDecompose2dScale(P,Hs),o.lineWidth*=Math.max(Hs[0],Hs[1])/u,o.stroke(N(this,oi,D_).call(this,v,C,i))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(p===kn.FILL||p===kn.FILL_STROKE)&&o.fillText(e,n,s),(p===kn.STROKE||p===kn.FILL_STROKE)&&o.strokeText(e,n,s);g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Nt(o),x:n,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){s=!0;break}return He(this,"isFontSubpixelAAEnabled",s)}showText(e){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(e);const r=n.fontSize;if(r===0)return;const i=this.ctx,o=n.fontSizeScale,a=n.charSpacing,l=n.wordSpacing,c=n.fontDirection,u=n.textHScale*c,p=e.length,g=s.vertical,y=g?1:-1,x=s.defaultVMetrics,v=r*n.fontMatrix[0],C=n.textRenderingMode===kn.FILL&&!s.disableFontFace&&!n.patternFill;i.save(),n.textMatrix&&i.transform(...n.textMatrix),i.translate(n.x,n.y+n.textRise),c>0?i.scale(u,-1):i.scale(u,1);let w,S;if(n.patternFill){i.save();const M=n.fillColor.getPattern(i,this,mi(i),_n.FILL);w=Nt(i),i.restore(),i.fillStyle=M}if(n.patternStroke){i.save();const M=n.strokeColor.getPattern(i,this,mi(i),_n.STROKE);S=Nt(i),i.restore(),i.strokeStyle=M}let _=n.lineWidth;const T=n.textMatrixScale;if(T===0||_===0){const M=n.textRenderingMode&kn.FILL_STROKE_MASK;(M===kn.STROKE||M===kn.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=T;if(o!==1&&(i.scale(o,o),_/=o),i.lineWidth=_,s.isInvalidPDFjsFont){const M=[];let I=0;for(const k of e)M.push(k.unicode),I+=k.width;i.fillText(M.join(""),0,0),n.x+=I*v*u,i.restore(),this.compose();return}let A=0,P;for(P=0;P<p;++P){const M=e[P];if(typeof M=="number"){A+=y*M*r/1e3;continue}let I=!1;const k=(M.isSpace?l:0)+a,D=M.fontChar,L=M.accent;let U,G,O=M.width;if(g){const $=M.vmetric||x,z=-(M.vmetric?$[1]:O*.5)*v,B=$[2]*v;O=$?-$[0]:O,U=z/o,G=(A+B)/o}else U=A/o,G=0;if(s.remeasure&&O>0){const $=i.measureText(D).width*1e3/r*o;if(O<$&&this.isFontSubpixelAAEnabled){const z=O/$;I=!0,i.save(),i.scale(z,1),U/=z}else O!==$&&(U+=(O-$)/2e3*r/o)}if(this.contentVisible&&(M.isInFont||s.missingFile)){if(C&&!L)i.fillText(D,U,G);else if(this.paintChar(D,U,G,w,S),L){const $=U+r*L.offset.x/o,z=G-r*L.offset.y/o;this.paintChar(L.fontChar,$,z,w,S)}}const W=g?O*v-k*c:O*v+k*c;A+=W,I&&i.restore()}g?n.y-=A:n.x+=A*u,i.restore(),this.compose()}showType3Text(e){const n=this.ctx,s=this.current,r=s.font,i=s.fontSize,o=s.fontDirection,a=r.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,u=s.textHScale*o,p=s.fontMatrix||o_,g=e.length,y=s.textRenderingMode===kn.INVISIBLE;let x,v,C,w;if(!(y||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(u,o),x=0;x<g;++x){if(v=e[x],typeof v=="number"){w=a*v*i/1e3,this.ctx.translate(w,0),s.x+=w*u;continue}const S=(v.isSpace?c:0)+l,_=r.charProcOperatorList[v.operatorListId];_?this.contentVisible&&(this.save(),n.scale(i,i),n.transform(...p),this.executeOperatorList(_),this.restore()):Ie(`Type3 character "${v.operatorListId}" is not available.`);const T=[v.width,0];be.applyTransform(T,p),C=T[0]*i+S,n.translate(C,0),s.x+=C*u}n.restore()}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,s,r,i,o){const a=new Path2D;a.rect(s,r,i-s,o-r),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||Nt(this.ctx),r={createCanvasGraphics:i=>new u1(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new M_(e,this.ctx,r,s)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=OY(this.getObject(e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(e);n.fillStyle=s.getPattern(n,this,mi(n),_n.SHADING);const r=mi(n);if(r){const{width:i,height:o}=n.canvas,a=Zd.slice();be.axialAlignedBoundingBox([0,0,i,o],r,a);const[l,c,u,p]=a;this.ctx.fillRect(l,c,u-l,p-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){dt("Should not call beginInlineImage")}beginImageData(){dt("Should not call beginImageData")}paintFormXObjectBegin(e,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Nt(this.ctx),n)){be.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,r,i,o]=n,a=new Path2D;a.rect(s,r,i-s,o-r),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||oC("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const s=Nt(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Zd.slice();be.axialAlignedBoundingBox(e.bbox,Nt(n),r);const i=[0,0,n.canvas.width,n.canvas.height];r=be.intersect(r,i)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),c=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(u,l,c),g=p.context;g.translate(-o,-a),g.transform(...s);let y=new Path2D;const[x,v,C,w]=e.bbox;if(y.rect(x,v,C-x,w-v),e.matrix){const S=new Path2D;S.addPath(y,new DOMMatrix(e.matrix)),y=S}g.clip(y),e.smask?this.smaskStack.push({canvas:p.canvas,context:g,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(o,a),n.save()),Pp(n,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Nt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=Zd.slice();be.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,i),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,n,s,r,i){if(N(this,oi,k_).call(this),Dv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],a=n[3]-n[1];if(i&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=a,be.singularValueDecompose2dScale(Nt(this.ctx),Hs);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(Hs[0],0,0,-Hs[1],0,a*Hs[1]),Dv(this.ctx)}else{Dv(this.ctx),this.endPath();const l=new Path2D;l.rect(n[0],n[1],o,a),this.ctx.clip(l)}}this.current=new lP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),N(this,oi,I_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(e.data,e),e.count=n;const s=this.ctx,r=this._createMaskCanvas(e),i=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(i,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,s=0,r=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Nt(a);a.transform(n,s,r,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,p=o.length;u<p;u+=2){const g=be.transform(l,[n,s,r,i,o[u],o[u+1]]);a.drawImage(c.canvas,g[4],g[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),p=u.context;p.save();const g=this.getObject(o,i);uP(p,g),p.globalCompositeOperation="source-in",p.fillStyle=r?s.getPattern(p,this,mi(n),_n.FILL):s,p.fillRect(0,0,a,l),p.restore(),n.save(),n.transform(...c),n.scale(1,-1),Iv(n,u.canvas,0,0,a,l,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(e,n,s,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Ie("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[n,0,0,s,r[c],r[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(n,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,s=e.height,r=this.ctx;this.save();const{filter:i}=r;i!=="none"&&i!==""&&(r.filter="none"),r.scale(1/n,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",n,s).context;cP(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,mi(r));r.imageSmoothingEnabled=dP(Nt(r),e.interpolate),Iv(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;cP(l,e),r=this.applyTransferMapsToCanvas(l)}for(const i of n)s.save(),s.transform(...i.transform),s.scale(1,-1),Iv(s,r,i.x,i.y,i.w,i.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===fP?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Nt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(n),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,p=c*e;o=u<1?1/u:1,a=p<1?1/p:1}}else{const l=Math.abs(n*i-s*r),c=Math.hypot(n,s),u=Math.hypot(r,i);if(e===0)o=u/l,a=c/l;else{const p=e*l;o=u>p?u/p:1,a=c>p?c/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();n&&s.save(),s.scale(i,o),mS.a=1/i,mS.d=1/o;const l=new Path2D;if(l.addPath(e,mS),a.length>0){const c=Math.max(i,o);s.setLineDash(a.map(u=>u/c)),s.lineDashOffset/=c}s.lineWidth=r||1,s.stroke(l),n&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};oi=new WeakSet,k_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},I_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},D_=function(e,n,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(n)),r};let mf=u1;for(const t in L0)mf.prototype[t]!==void 0&&(mf.prototype[L0[t]]=mf.prototype[t]);var Ng,Pg;class ea{static get workerPort(){return d(this,Ng)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,Ng,e)}static get workerSrc(){return d(this,Pg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,Pg,e)}}Ng=new WeakMap,Pg=new WeakMap,R(ea,Ng,null),R(ea,Pg,"");var Kf,Mg;class GY{constructor({parsedData:e,rawData:n}){R(this,Kf);R(this,Mg);E(this,Kf,e),E(this,Mg,n)}getRaw(){return d(this,Mg)}get(e){return d(this,Kf).get(e)??null}[Symbol.iterator](){return d(this,Kf).entries()}}Kf=new WeakMap,Mg=new WeakMap;const Od=Symbol("INTERNAL");var kg,Ig,Dg,Yf;class qY{constructor(e,{name:n,intent:s,usage:r,rbGroups:i}){R(this,kg,!1);R(this,Ig,!1);R(this,Dg,!1);R(this,Yf,!0);E(this,kg,!!(e&$s.DISPLAY)),E(this,Ig,!!(e&$s.PRINT)),this.name=n,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(d(this,Dg))return d(this,Yf);if(!d(this,Yf))return!1;const{print:e,view:n}=this.usage;return d(this,kg)?(n==null?void 0:n.viewState)!=="OFF":d(this,Ig)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,s=!1){e!==Od&&dt("Internal method `_setVisible` called."),E(this,Dg,s),E(this,Yf,n)}}kg=new WeakMap,Ig=new WeakMap,Dg=new WeakMap,Yf=new WeakMap;var pl,ct,Jf,Xf,Lg,L_;class WY{constructor(e,n=$s.DISPLAY){R(this,Lg);R(this,pl,null);R(this,ct,new Map);R(this,Jf,null);R(this,Xf,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,Xf,e.order);for(const s of e.groups)d(this,ct).set(s.id,new qY(n,s));if(e.baseState==="OFF")for(const s of d(this,ct).values())s._setVisible(Od,!1);for(const s of e.on)d(this,ct).get(s)._setVisible(Od,!0);for(const s of e.off)d(this,ct).get(s)._setVisible(Od,!1);E(this,Jf,this.getHash())}}isVisible(e){if(d(this,ct).size===0)return!0;if(!e)return oC("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,ct).has(e.id)?d(this,ct).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return N(this,Lg,L_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!d(this,ct).has(n))return Ie(`Optional content group not found: ${n}`),!0;if(d(this,ct).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!d(this,ct).has(n))return Ie(`Optional content group not found: ${n}`),!0;if(!d(this,ct).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!d(this,ct).has(n))return Ie(`Optional content group not found: ${n}`),!0;if(!d(this,ct).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!d(this,ct).has(n))return Ie(`Optional content group not found: ${n}`),!0;if(d(this,ct).get(n).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,s=!0){var i;const r=d(this,ct).get(e);if(!r){Ie(`Optional content group not found: ${e}`);return}if(s&&n&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=d(this,ct).get(a))==null||i._setVisible(Od,!1,!0));r._setVisible(Od,!!n,!0),E(this,pl,null)}setOCGState({state:e,preserveRB:n}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=d(this,ct).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!i.visible,n);break}}E(this,pl,null)}get hasInitialVisibility(){return d(this,Jf)===null||this.getHash()===d(this,Jf)}getOrder(){return d(this,ct).size?d(this,Xf)?d(this,Xf).slice():[...d(this,ct).keys()]:null}getGroup(e){return d(this,ct).get(e)||null}getHash(){if(d(this,pl)!==null)return d(this,pl);const e=new SV;for(const[n,s]of d(this,ct))e.update(`${n}:${s.visible}`);return E(this,pl,e.hexdigest())}[Symbol.iterator](){return d(this,ct).entries()}}pl=new WeakMap,ct=new WeakMap,Jf=new WeakMap,Xf=new WeakMap,Lg=new WeakSet,L_=function(e){const n=e.length;if(n<2)return!0;const s=e[0];for(let r=1;r<n;r++){const i=e[r];let o;if(Array.isArray(i))o=N(this,Lg,L_).call(this,i);else if(d(this,ct).has(i))o=d(this,ct).get(i).visible;else return Ie(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class KY{constructor(e,{disableRange:n=!1,disableStream:s=!1}){Wt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Wt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,s,r,i;e.total===void 0?(s=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||s.call(n,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new YY(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=new JY(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(s),s}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class YY{constructor(e,n,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=HA(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class JY{constructor(e,n,s){this._stream=e,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XY(t){let e=!0,n=s("filename\\*","i").exec(t);if(n){n=n[1];let u=a(n);return u=unescape(u),u=l(u),u=c(u),i(u)}if(n=o(t),n){const u=c(n);return i(u)}if(n=s("filename","i").exec(t),n){n=n[1];let u=a(n);return u=c(u),i(u)}function s(u,p){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(u,p){if(u){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const g=new TextDecoder(u,{fatal:!0}),y=Wy(p);p=g.decode(y),e=!1}catch{}}return p}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),e&&(u=r("iso-8859-1",u))),u}function o(u){const p=[];let g;const y=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(u))!==null;){let[,v,C,w]=g;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[C,w]}const x=[];for(let v=0;v<p.length&&v in p;++v){let[C,w]=p[v];w=a(w),C&&(w=unescape(w),v===0&&(w=l(w))),x.push(w)}return x.join("")}function a(u){if(u.startsWith('"')){const p=u.slice(1).split('\\"');for(let g=0;g<p.length;++g){const y=p[g].indexOf('"');y!==-1&&(p[g]=p[g].slice(0,y),p.length=g+1),p[g]=p[g].replaceAll(/\\(.)/g,"$1")}u=p.join('"')}return u}function l(u){const p=u.indexOf("'");if(p===-1)return u;const g=u.slice(0,p),x=u.slice(p+1).replace(/^[^']*'/,"");return r(g,x)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,g,y,x){if(y==="q"||y==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,C){return String.fromCharCode(parseInt(C,16))}),r(g,x);try{x=atob(x)}catch{}return r(g,x)})}return""}function DV(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const s in e){const r=e[s];r!==void 0&&n.append(s,r)}return n}function lC(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function LV({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(t.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*n)||s||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function FV(t){const e=t.get("Content-Disposition");if(e){let n=XY(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(HA(n))return n}return null}function Xy(t,e){return new F0(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function OV(t){return t===200||t===206}function UV(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function VV(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Ie(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class QY{constructor(e){Z(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=DV(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ZY(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=new eJ(this,e,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class ZY{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(e.headers),r=n.url;fetch(r,UV(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=lC(i.url),!OV(i.status))throw Xy(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=LV({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=FV(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new tc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:VV(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class eJ{constructor(e,n,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${n}-${s-1}`);const o=r.url;fetch(o,UV(i,this._withCredentials,this._abortController)).then(a=>{const l=lC(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!OV(a.status))throw Xy(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:VV(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const gS=200,yS=206;function tJ(t){const e=t.response;return typeof e!="string"?e:Wy(e).buffer}class nJ{constructor({url:e,httpHeaders:n,withCredentials:s}){Z(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=DV(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[i,o]of this.headers)n.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=yS):r.expectedStatus=gS,n.responseType="arraybuffer",Wt(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,n.send(null),s}onProgress(e,n){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,n))}onStateChange(e,n){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||gS;if(!(i===gS&&s.expectedStatus===yS)&&i!==s.expectedStatus){s.onError(r.status);return}const a=tJ(r);if(i===yS){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(Ie('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class sJ{constructor(e){this._source=e,this._manager=new nJ(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rJ(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const s=new iJ(this._manager,e,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class rJ{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=lC(n.responseURL);const s=n.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=LV({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=FV(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Xy(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iJ{constructor(e,n,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=lC((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Xy(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const oJ=/^[a-z][a-z0-9\-+.]+:/i;function aJ(t){if(oJ.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class lJ{constructor(e){this.source=e,this.url=aJ(e.url),Wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new cJ(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=new uJ(this,e,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class cJ{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Xy(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new tc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class uJ{constructor(e,n,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Mp=Symbol("INITIAL_DATA");var Ns,Fg,F_;class $V{constructor(){R(this,Fg);R(this,Ns,Object.create(null))}get(e,n=null){if(n){const r=N(this,Fg,F_).call(this,e);return r.promise.then(()=>n(r.data)),null}const s=d(this,Ns)[e];if(!s||s.data===Mp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const n=d(this,Ns)[e];return!!n&&n.data!==Mp}delete(e){const n=d(this,Ns)[e];return!n||n.data===Mp?!1:(delete d(this,Ns)[e],!0)}resolve(e,n=null){const s=N(this,Fg,F_).call(this,e);s.data=n,s.resolve()}clear(){var e;for(const n in d(this,Ns)){const{data:s}=d(this,Ns)[n];(e=s==null?void 0:s.bitmap)==null||e.close()}E(this,Ns,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,Ns)){const{data:n}=d(this,Ns)[e];n!==Mp&&(yield[e,n])}}}Ns=new WeakMap,Fg=new WeakSet,F_=function(e){var n;return(n=d(this,Ns))[e]||(n[e]={...Promise.withResolvers(),data:Mp})};const dJ=1e5,hP=30;var qM,ml,ps,Og,Ug,au,ko,Vg,$g,lu,Qf,Zf,gl,eh,Bg,th,cu,jg,zg,nh,uu,Hg,yl,sh,wa,BV,jV,O_,Js,yx,U_,zV,HV;const Jt=class Jt{constructor({textContentSource:e,container:n,viewport:s}){R(this,wa);R(this,ml,Promise.withResolvers());R(this,ps,null);R(this,Og,!1);R(this,Ug,!!((qM=globalThis.FontInspector)!=null&&qM.enabled));R(this,au,null);R(this,ko,null);R(this,Vg,0);R(this,$g,0);R(this,lu,null);R(this,Qf,null);R(this,Zf,0);R(this,gl,0);R(this,eh,Object.create(null));R(this,Bg,[]);R(this,th,null);R(this,cu,[]);R(this,jg,new WeakMap);R(this,zg,null);var l;if(e instanceof ReadableStream)E(this,th,e);else if(typeof e=="object")E(this,th,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,ps,E(this,Qf,n)),E(this,gl,s.scale*eo.pixelRatio),E(this,Zf,s.rotation),E(this,ko,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;E(this,zg,[1,0,0,-1,-o,a+i]),E(this,$g,r),E(this,Vg,i),N(l=Jt,Js,zV).call(l),ud(n,s),d(this,ml).promise.finally(()=>{d(Jt,sh).delete(this),E(this,ko,null),E(this,eh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=An.platform;return He(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,lu).read().then(({value:n,done:s})=>{if(s){d(this,ml).resolve();return}d(this,au)??E(this,au,n.lang),Object.assign(d(this,eh),n.styles),N(this,wa,BV).call(this,n.items),e()},d(this,ml).reject)};return E(this,lu,d(this,th).getReader()),d(Jt,sh).add(this),e(),d(this,ml).promise}update({viewport:e,onBefore:n=null}){var i;const s=e.scale*eo.pixelRatio,r=e.rotation;if(r!==d(this,Zf)&&(n==null||n(),E(this,Zf,r),ud(d(this,Qf),{rotation:r})),s!==d(this,gl)){n==null||n(),E(this,gl,s);const o={div:null,properties:null,ctx:N(i=Jt,Js,yx).call(i,d(this,au))};for(const a of d(this,cu))o.properties=d(this,jg).get(a),o.div=a,N(this,wa,O_).call(this,o)}}cancel(){var n;const e=new tc("TextLayer task cancelled.");(n=d(this,lu))==null||n.cancel(e).catch(()=>{}),E(this,lu,null),d(this,ml).reject(e)}get textDivs(){return d(this,cu)}get textContentItemsStr(){return d(this,Bg)}static cleanup(){if(!(d(this,sh).size>0)){d(this,nh).clear();for(const{canvas:e}of d(this,uu).values())e.remove();d(this,uu).clear()}}};ml=new WeakMap,ps=new WeakMap,Og=new WeakMap,Ug=new WeakMap,au=new WeakMap,ko=new WeakMap,Vg=new WeakMap,$g=new WeakMap,lu=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,gl=new WeakMap,eh=new WeakMap,Bg=new WeakMap,th=new WeakMap,cu=new WeakMap,jg=new WeakMap,zg=new WeakMap,nh=new WeakMap,uu=new WeakMap,Hg=new WeakMap,yl=new WeakMap,sh=new WeakMap,wa=new WeakSet,BV=function(e){var r,i;if(d(this,Og))return;(i=d(this,ko)).ctx??(i.ctx=N(r=Jt,Js,yx).call(r,d(this,au)));const n=d(this,cu),s=d(this,Bg);for(const o of e){if(n.length>dJ){Ie("Ignoring additional textDivs for performance reasons."),E(this,Og,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,ps);E(this,ps,document.createElement("span")),d(this,ps).classList.add("markedContent"),o.id!==null&&d(this,ps).setAttribute("id",`${o.id}`),a.append(d(this,ps))}else o.type==="endMarkedContent"&&E(this,ps,d(this,ps).parentNode);continue}s.push(o.str),N(this,wa,jV).call(this,o)}},jV=function(e){var v;const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,cu).push(n);const r=be.transform(d(this,zg),e.transform);let i=Math.atan2(r[1],r[0]);const o=d(this,eh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=d(this,Ug)&&o.fontSubstitution||o.fontFamily;a=Jt.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),c=l*N(v=Jt,Js,HV).call(v,a,o,d(this,au));let u,p;i===0?(u=r[4],p=r[5]-c):(u=r[4]+c*Math.sin(i),p=r[5]-c*Math.cos(i));const g="calc(var(--total-scale-factor) *",y=n.style;d(this,ps)===d(this,Qf)?(y.left=`${(100*u/d(this,$g)).toFixed(2)}%`,y.top=`${(100*p/d(this,Vg)).toFixed(2)}%`):(y.left=`${g}${u.toFixed(2)}px)`,y.top=`${g}${p.toFixed(2)}px)`),y.fontSize=`${g}${(d(Jt,yl)*l).toFixed(2)}px)`,y.fontFamily=a,s.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,d(this,Ug)&&(n.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);C!==w&&Math.max(C,w)/Math.min(C,w)>1.5&&(x=!0)}if(x&&(s.canvasWidth=o.vertical?e.height:e.width),d(this,jg).set(n,s),d(this,ko).div=n,d(this,ko).properties=s,N(this,wa,O_).call(this,d(this,ko)),s.hasText&&d(this,ps).append(n),s.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),d(this,ps).append(C)}},O_=function(e){var a;const{div:n,properties:s,ctx:r}=e,{style:i}=n;let o="";if(d(Jt,yl)>1&&(o=`scale(${1/d(Jt,yl)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:u}=s;N(a=Jt,Js,U_).call(a,r,u*d(this,gl),l);const{width:p}=r.measureText(n.textContent);p>0&&(o=`scaleX(${c*d(this,gl)/p}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Js=new WeakSet,yx=function(e=null){let n=d(this,uu).get(e||(e=""));if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,uu).set(e,n),d(this,Hg).set(n,{size:0,family:""})}return n},U_=function(e,n,s){const r=d(this,Hg).get(e);n===r.size&&s===r.family||(e.font=`${n}px ${s}`,r.size=n,r.family=s)},zV=function(){if(d(this,yl)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,yl,e.getBoundingClientRect().height),e.remove()},HV=function(e,n,s){const r=d(this,nh).get(e);if(r)return r;const i=N(this,Js,yx).call(this,s);i.canvas.width=i.canvas.height=hP,N(this,Js,U_).call(this,i,hP,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return a?c=a/(a+l):(An.platform.isFirefox&&Ie("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?c=n.ascent:n.descent&&(c=1+n.descent)),d(this,nh).set(e,c),c},R(Jt,Js),R(Jt,nh,new Map),R(Jt,uu,new Map),R(Jt,Hg,new WeakMap),R(Jt,yl,null),R(Jt,sh,new Set);let Km=Jt;class Ym{static textContent(e){const n=[],s={items:n,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(Ym.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&n.push({str:o}),!!i.children)for(const c of i.children)r(c)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const fJ=100;function GV(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new V_,{docId:n}=e,s=t.url?CY(t.url):null,r=t.data?SY(t.data):null,i=t.httpHeaders||null,o=t.withCredentials===!0,a=t.password??null,l=t.range instanceof qV?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let u=t.worker instanceof Jm?t.worker:null;const p=t.verbosity,g=typeof t.docBaseUrl=="string"&&!aC(t.docBaseUrl)?t.docBaseUrl:null,y=Mv(t.cMapUrl),x=t.cMapPacked!==!1,v=t.CMapReaderFactory||(Kn?PY:tP),C=Mv(t.iccUrl),w=Mv(t.standardFontDataUrl),S=t.StandardFontDataFactory||(Kn?MY:nP),_=Mv(t.wasmUrl),T=t.WasmFactory||(Kn?kY:sP),A=t.stopAtErrors!==!0,P=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,M=t.isEvalSupported!==!1,I=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!Kn,k=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!Kn&&(An.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,L=typeof t.disableFontFace=="boolean"?t.disableFontFace:Kn,U=t.fontExtraProperties===!0,G=t.enableXfa===!0,O=t.ownerDocument||globalThis.document,W=t.disableRange===!0,$=t.disableStream===!0,z=t.disableAutoFetch===!0,B=t.pdfBug===!0,V=t.CanvasFactory||(Kn?NY:TY),H=t.FilterFactory||(Kn?RY:AY),Q=t.enableHWA===!0,J=t.useWasm!==!1,se=l?l.length:t.length??NaN,ye=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!Kn&&!L,Me=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(v===tP&&S===nP&&T===sP&&y&&w&&_&&Gp(y,document.baseURI)&&Gp(w,document.baseURI)&&Gp(_,document.baseURI)),De=null;ZK(p);const Y={canvasFactory:new V({ownerDocument:O,enableHWA:Q}),filterFactory:new H({docId:n,ownerDocument:O}),cMapReaderFactory:Me?null:new v({baseUrl:y,isCompressed:x}),standardFontDataFactory:Me?null:new S({baseUrl:w}),wasmFactory:Me?null:new T({baseUrl:_})};u||(u=Jm.create({verbosity:p,port:ea.workerPort}),e._worker=u);const _e={docId:n,apiVersion:"5.3.93",data:r,password:a,disableAutoFetch:z,rangeChunkSize:c,length:se,docBaseUrl:g,enableXfa:G,evaluatorOptions:{maxImageSize:P,disableFontFace:L,ignoreErrors:A,isEvalSupported:M,isOffscreenCanvasSupported:I,isImageDecoderSupported:k,canvasMaxAreaInBytes:D,fontExtraProperties:U,useSystemFonts:ye,useWasm:J,useWorkerFetch:Me,cMapUrl:y,iccUrl:C,standardFontDataUrl:w,wasmUrl:_}},re={ownerDocument:O,pdfBug:B,styleElement:De,loadingParams:{disableAutoFetch:z,enableXfa:G}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const we=u.messageHandler.sendWithPromise("GetDocRequest",_e,r?[r.buffer]:null);let Te;if(l)Te=new KY(l,{disableRange:W,disableStream:$});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Re=Gp(s)?QY:Kn?lJ:sJ;Te=new Re({url:s,length:se,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:W,disableStream:$})}return we.then(Re=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const At=new Jp(n,Re,u.port),gn=new mJ(At,e,Te,re,Y);e._transport=gn,At.send("Ready",null)})}).catch(e._capability.reject),e}var nw;const sw=class sw{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${rn(sw,nw)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};nw=new WeakMap,R(sw,nw,0);let V_=sw;var du,Gg,qg,Wg,Kg;class qV{constructor(e,n,s=!1,r=null){R(this,du,Promise.withResolvers());R(this,Gg,[]);R(this,qg,[]);R(this,Wg,[]);R(this,Kg,[]);this.length=e,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){d(this,Kg).push(e)}addProgressListener(e){d(this,Wg).push(e)}addProgressiveReadListener(e){d(this,qg).push(e)}addProgressiveDoneListener(e){d(this,Gg).push(e)}onDataRange(e,n){for(const s of d(this,Kg))s(e,n)}onDataProgress(e,n){d(this,du).promise.then(()=>{for(const s of d(this,Wg))s(e,n)})}onDataProgressiveRead(e){d(this,du).promise.then(()=>{for(const n of d(this,qg))n(e)})}onDataProgressiveDone(){d(this,du).promise.then(()=>{for(const e of d(this,Gg))e()})}transportReady(){d(this,du).resolve()}requestDataRange(e,n){dt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}du=new WeakMap,Gg=new WeakMap,qg=new WeakMap,Wg=new WeakMap,Kg=new WeakMap;class hJ{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return He(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Io,fu,tm;class pJ{constructor(e,n,s,r=!1){R(this,fu);R(this,Io,!1);this._pageIndex=e,this._pageInfo=n,this._transport=s,this._stats=r?new QN:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new $V,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new Yy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return He(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:n,intent:s="display",annotationMode:r=ja.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:p=!1}){var T,A;(T=this._stats)==null||T.time("Overall");const g=this._transport.getRenderingIntent(s,r,u,p),{renderingIntent:y,cacheKey:x}=g;E(this,Io,!1),a||(a=this._transport.getOptionalContentConfig(y));let v=this._intentStates.get(x);v||(v=Object.create(null),this._intentStates.set(x,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const C=!!(y&$s.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(g));const w=P=>{var M;v.renderTasks.delete(S),C&&E(this,Io,!0),N(this,fu,tm).call(this),P?(S.capability.reject(P),this._abortOperatorList({intentState:v,reason:P instanceof Error?P:new Error(P)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new $_({callback:w,params:{canvasContext:e,viewport:n,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(S);const _=S.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([P,M])=>{var I;if(this.destroyed){w();return}if((I=this._stats)==null||I.time("Rendering"),!(M.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:P,optionalContentConfig:M}),S.operatorListChanged()}).catch(w),_}getOperatorList({intent:e="display",annotationMode:n=ja.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var c;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,n,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Ym.textContent(s));const n=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=n.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),E(this,Io,!1),Promise.all(e)}cleanup(e=!1){E(this,Io,!0);const n=N(this,fu,tm).call(this);return e&&n&&this._stats&&(this._stats=new QN),n}_startRenderPage(e,n){var r,i;const s=this._intentStates.get(n);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,n){for(let s=0,r=e.length;s<r;s++)n.operatorList.fnArray.push(e.fnArray[s]),n.operatorList.argsArray.push(e.argsArray[s]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();e.lastChunk&&N(this,fu,tm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:i,modifiedIds:r},o).getReader(),c=this._intentStates.get(n);c.streamReader=l;const u=()=>{l.read().then(({value:p,done:g})=>{if(g){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,c),u())},p=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const g of c.renderTasks)g.operatorListChanged();N(this,fu,tm).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(p);else if(c.opListReadCapability)c.opListReadCapability.reject(p);else throw p}})};u()}_abortOperatorList({intentState:e,reason:n,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(n instanceof zA){let r=fJ;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},r);return}}if(e.streamReader.cancel(new tc(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Io=new WeakMap,fu=new WeakSet,tm=function(){if(!d(this,Io)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Io,!1),!0};var vl,Ur,Do,hu,rw,pu,mu,es,vx,WV,KV,nm,rh,xx;const Ct=class Ct{constructor({name:e=null,port:n=null,verbosity:s=eY()}={}){R(this,es);R(this,vl,Promise.withResolvers());R(this,Ur,null);R(this,Do,null);R(this,hu,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,n){if(d(Ct,mu).has(n))throw new Error("Cannot use more than one PDFWorker per port.");d(Ct,mu).set(n,this),N(this,es,WV).call(this,n)}else N(this,es,KV).call(this)}get promise(){return d(this,vl).promise}get port(){return d(this,Do)}get messageHandler(){return d(this,Ur)}destroy(){var e,n;this.destroyed=!0,(e=d(this,hu))==null||e.terminate(),E(this,hu,null),d(Ct,mu).delete(d(this,Do)),E(this,Do,null),(n=d(this,Ur))==null||n.destroy(),E(this,Ur,null)}static create(e){const n=d(this,mu).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Ct(e)}static get workerSrc(){if(ea.workerSrc)return ea.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return He(this,"_setupFakeWorkerGlobal",(async()=>d(this,rh,xx)?d(this,rh,xx):(await import(this.workerSrc)).WorkerMessageHandler)())}};vl=new WeakMap,Ur=new WeakMap,Do=new WeakMap,hu=new WeakMap,rw=new WeakMap,pu=new WeakMap,mu=new WeakMap,es=new WeakSet,vx=function(){d(this,vl).resolve(),d(this,Ur).send("configure",{verbosity:this.verbosity})},WV=function(e){E(this,Do,e),E(this,Ur,new Jp("main","worker",e)),d(this,Ur).on("ready",()=>{}),N(this,es,vx).call(this)},KV=function(){if(d(Ct,pu)||d(Ct,rh,xx)){N(this,es,nm).call(this);return}let{workerSrc:e}=Ct;try{Ct._isSameOrigin(window.location,e)||(e=Ct._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),s=new Jp("main","worker",n),r=()=>{i.abort(),s.destroy(),n.terminate(),this.destroyed?d(this,vl).reject(new Error("Worker was destroyed")):N(this,es,nm).call(this)},i=new AbortController;n.addEventListener("error",()=>{d(this,hu)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}E(this,Ur,s),E(this,Do,n),E(this,hu,n),N(this,es,vx).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{N(this,es,nm).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{oC("The worker has been disabled.")}N(this,es,nm).call(this)},nm=function(){d(Ct,pu)||(Ie("Setting up fake worker."),E(Ct,pu,!0)),Ct._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,vl).reject(new Error("Worker was destroyed"));return}const n=new EY;E(this,Do,n);const s=`fake${rn(Ct,rw)._++}`,r=new Jp(s+"_worker",s,n);e.setup(r,n),E(this,Ur,new Jp(s,s+"_worker",n)),N(this,es,vx).call(this)}).catch(e=>{d(this,vl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},rh=new WeakSet,xx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},R(Ct,rh),R(Ct,rw,0),R(Ct,pu,!1),R(Ct,mu,new WeakMap),Kn&&(E(Ct,pu,!0),ea.workerSrc||(ea.workerSrc="./pdf.worker.mjs")),Ct._isSameOrigin=(e,n)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(n,s);return s.origin===r.origin},Ct._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Ct.fromPort=e=>{if(fY("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ct.create(e)};let Jm=Ct;var Lo,Mi,ih,oh,Fo,gu,sm;class mJ{constructor(e,n,s,r,i){R(this,gu);R(this,Lo,new Map);R(this,Mi,new Map);R(this,ih,new Map);R(this,oh,new Map);R(this,Fo,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new $V,this.fontLoader=new xY({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return He(this,"annotationStorage",new WA)}getRenderingIntent(e,n=ja.ENABLE,s=null,r=!1,i=!1){let o=$s.DISPLAY,a=T_;switch(e){case"any":o=$s.ANY;break;case"display":break;case"print":o=$s.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const l=o&$s.PRINT&&s instanceof _V?s:this.annotationStorage;switch(n){case ja.DISABLE:o+=$s.ANNOTATIONS_DISABLE;break;case ja.ENABLE:break;case ja.ENABLE_FORMS:o+=$s.ANNOTATIONS_FORMS;break;case ja.ENABLE_STORAGE:o+=$s.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(o+=$s.IS_EDITING),i&&(o+=$s.OPLIST);const{ids:c,hash:u}=l.modifiedIds,p=[o,a.hash,u];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=d(this,Fo))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of d(this,Mi).values())e.push(r._destroy());d(this,Mi).clear(),d(this,ih).clear(),d(this,oh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Lo).clear(),this.filterFactory.destroy(),Km.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new tc("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(s,r)=>{Wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Wt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=n.onProgress)==null||a.call(n,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=n.onProgress)==null||c.call(n,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Wt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new hJ(s,this))}),e.on("DocException",s=>{n._capability.reject(cs(s))}),e.on("PasswordRequest",s=>{E(this,Fo,Promise.withResolvers());try{if(!n.onPassword)throw cs(s);const r=i=>{i instanceof Error?d(this,Fo).reject(i):d(this,Fo).resolve({password:i})};n.onPassword(r,s.code)}catch(r){d(this,Fo).reject(r)}return d(this,Fo).promise}),e.on("DataLoaded",s=>{var r;(r=n.onProgress)==null||r.call(n,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;d(this,Mi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const u=i.error;Ie(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,p)=>globalThis.FontInspector.fontAdded(u,p):null,l=new wY(i,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=i;Wt(c,"The imageRef must be defined.");for(const u of d(this,Mi).values())for(const[,p]of u.objs)if((p==null?void 0:p.ref)===c)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=d(this,Mi).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=n.onProgress)==null||r.call(n,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,s=d(this,ih).get(n);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&d(this,oh).set(i.refStr,e);const o=new pJ(n,i,this,this._params.pdfBug);return d(this,Mi).set(n,o),o});return d(this,ih).set(n,r),r}getPageIndex(e){return A_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return N(this,gu,sm).call(this,"GetFieldObjects")}hasJSActions(){return N(this,gu,sm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return N(this,gu,sm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return N(this,gu,sm).call(this,"GetOptionalContentConfig").then(n=>new WY(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=d(this,Lo).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new GY(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,Lo).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of d(this,Mi).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Lo).clear(),this.filterFactory.destroy(!0),Km.cleanup()}}cachedPageNumber(e){if(!A_(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,oh).get(n)??null}}Lo=new WeakMap,Mi=new WeakMap,ih=new WeakMap,oh=new WeakMap,Fo=new WeakMap,gu=new WeakSet,sm=function(e,n=null){const s=d(this,Lo).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,n);return d(this,Lo).set(e,r),r};var xl;class gJ{constructor(e){R(this,xl,null);Z(this,"onContinue",null);Z(this,"onError",null);E(this,xl,e)}get promise(){return d(this,xl).capability.promise}cancel(e=0){d(this,xl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,xl).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=d(this,xl);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}xl=new WeakMap;var wl,yu;const xc=class xc{constructor({callback:e,params:n,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:p=!1,pageColors:g=null}){R(this,wl,null);this.callback=e,this.params=n,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=p,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gJ(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(xc,yu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(xc,yu).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:i,background:o}=this.params;this.gfx=new mf(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,n=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),d(this,wl)&&(window.cancelAnimationFrame(d(this,wl)),E(this,wl,null)),d(xc,yu).delete(this._canvas),e||(e=new zA(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,wl,window.requestAnimationFrame(()=>{E(this,wl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(xc,yu).delete(this._canvas),this.callback())))}};wl=new WeakMap,yu=new WeakMap,R(xc,yu,new WeakSet);let $_=xc;const yJ="5.3.93",vJ="cbeef3233";function pP(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function kp(t){return Math.max(0,Math.min(255,255*t))}class mP{static CMYK_G([e,n,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*n+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=kp(e),[e,e,e]}static G_HTML([e]){const n=pP(e);return`#${n}${n}${n}`}static RGB_G([e,n,s]){return["G",.3*e+.59*n+.11*s]}static RGB_rgb(e){return e.map(kp)}static RGB_HTML(e){return`#${e.map(pP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,n+r)]}static CMYK_rgb([e,n,s,r]){return[kp(1-Math.min(1,e+r)),kp(1-Math.min(1,s+r)),kp(1-Math.min(1,n+r))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,s]){const r=1-e,i=1-n,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class xJ{create(e,n,s=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${n}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){dt("Abstract method `_createSVG` called.")}}class V0 extends xJ{_createSVG(e){return document.createElementNS(uo,e)}}class YV{static setupStorage(e,n,s,r,i){const o=r.getValue(n,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(n,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(n,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(n,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(n,{value:c})});break}}static setAttributes({html:e,element:n,storage:s=null,intent:r,linkService:i}){const{attributes:o}=n,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,n,s)}static render(e){var p,g;const n=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=y}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);o.append(y),a&&Ym.shouldBuildText(r.name)&&c.push(y)}return{textDivs:c}}const u=[[r,-1,o]];for(;u.length>0;){const[y,x,v]=u.at(-1);if(x+1===y.children.length){u.pop();continue}const C=y.children[++u.at(-1)[1]];if(C===null)continue;const{name:w}=C;if(w==="#text"){const _=document.createTextNode(C.value);c.push(_),v.append(_);continue}const S=(p=C==null?void 0:C.attributes)!=null&&p.xmlns?document.createElementNS(C.attributes.xmlns,w):document.createElement(w);if(v.append(S),C.attributes&&this.setAttributes({html:S,element:C,storage:n,intent:i,linkService:s}),((g=C.children)==null?void 0:g.length)>0)u.push([C,-1,S]);else if(C.value){const _=document.createTextNode(C.value);a&&Ym.shouldBuildText(w)&&c.push(_),S.append(_)}}for(const y of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const wJ=9,fd=new WeakSet;class gP{static create(e){switch(e.data.annotationType){case zt.LINK:return new JV(e);case zt.TEXT:return new CJ(e);case zt.WIDGET:switch(e.data.fieldType){case"Tx":return new SJ(e);case"Btn":return e.data.radioButton?new ZV(e):e.data.checkBox?new _J(e):new EJ(e);case"Ch":return new TJ(e);case"Sig":return new bJ(e)}return new Cd(e);case zt.POPUP:return new j_(e);case zt.FREETEXT:return new r4(e);case zt.LINE:return new RJ(e);case zt.SQUARE:return new NJ(e);case zt.CIRCLE:return new PJ(e);case zt.POLYLINE:return new i4(e);case zt.CARET:return new kJ(e);case zt.INK:return new JA(e);case zt.POLYGON:return new MJ(e);case zt.HIGHLIGHT:return new o4(e);case zt.UNDERLINE:return new IJ(e);case zt.SQUIGGLY:return new DJ(e);case zt.STRIKEOUT:return new LJ(e);case zt.STAMP:return new a4(e);case zt.FILEATTACHMENT:return new FJ(e);default:return new Bt(e)}}}var vu,ah,lh,Yg,B_;const d1=class d1{constructor(e,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){R(this,Yg);R(this,vu,null);R(this,ah,!1);R(this,lh,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return d1._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;d(this,vu)||E(this,vu,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&N(this,Yg,B_).call(this,n),(s=d(this,lh))==null||s.popup.updateEdited(e)}resetEdited(){var e;d(this,vu)&&(N(this,Yg,B_).call(this,d(this,vu).rect),(e=d(this,lh))==null||e.popup.resetEdited(),E(this,vu,null))}_createContainer(e){const{data:n,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",n.id),this instanceof Cd||(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,n.alternativeText&&(i.title=n.alternativeText),n.noRotate&&i.classList.add("norotate"),!n.rect||this instanceof j_){const{rotation:v}=n;return!n.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:a,height:l}=this;if(!e&&n.borderStyle.width>0){o.borderWidth=`${n.borderStyle.width}px`;const v=n.borderStyle.horizontalCornerRadius,C=n.borderStyle.verticalCornerRadius;if(v>0||C>0){const S=`calc(${v}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;o.borderRadius=S}else if(this instanceof ZV){const S=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=S}switch(n.borderStyle.style){case Id.SOLID:o.borderStyle="solid";break;case Id.DASHED:o.borderStyle="dashed";break;case Id.BEVELED:Ie("Unimplemented border style: beveled");break;case Id.INSET:Ie("Unimplemented border style: inset");break;case Id.UNDERLINE:o.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(E(this,ah,!0),o.borderColor=be.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const c=be.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:p,pageX:g,pageY:y}=r.rawDims;o.left=`${100*(c[0]-g)/u}%`,o.top=`${100*(c[1]-y)/p}%`;const{rotation:x}=n;return n.hasOwnCanvas||x===0?(o.width=`${100*a/u}%`,o.height=`${100*l/p}%`):this.setRotation(x,i),i}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),n.style.width=`${100*i/s}%`,n.style.height=`${100*o/r}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,s,r)=>{const i=r.detail[n],o=i[0],a=i.slice(1);r.target.style[s]=mP[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:mP[`${o}_rgb`](a)})};return He(this,"_commonActions",{display:n=>{const{display:s}=n.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,n){const s=this._commonActions;for(const r of Object.keys(n.detail)){const i=e[r]||s[r];i==null||i(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[r,i]of Object.entries(n)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,s,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,C,w,S]=e.subarray(2,6);if(r===v&&i===C&&n===w&&s===S)return}const{style:o}=this.container;let a;if(d(this,ah)){const{borderColor:v,borderWidth:C}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const l=r-n,c=i-s,{svgFactory:u}=this,p=u.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const g=u.createElement("defs");p.append(g);const y=u.createElement("clipPath"),x=`clippath_${this.data.id}`;y.setAttribute("id",x),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let v=2,C=e.length;v<C;v+=8){const w=e[v],S=e[v+1],_=e[v+2],T=e[v+3],A=u.createElement("rect"),P=(_-n)/l,M=(i-S)/c,I=(w-_)/l,k=(S-T)/c;A.setAttribute("x",P),A.setAttribute("y",M),A.setAttribute("width",I),A.setAttribute("height",k),y.append(A),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${M}" width="${I}" height="${k}"/>`)}d(this,ah)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,n=E(this,lh,new j_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){dt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===n)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!fd.has(c)){Ie(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==n&&fd.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};vu=new WeakMap,ah=new WeakMap,lh=new WeakMap,Yg=new WeakSet,B_=function(e){const{container:{style:n},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),n.left=`${100*(e[0]-a)/i}%`,n.top=`${100*(o-e[3]+l)/o}%`,r===0?(n.width=`${100*(e[2]-e[0])/i}%`,n.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Bt=d1;var qs,mc,XV,QV;class JV extends Bt{constructor(n,s=null){super(n,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});R(this,qs);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",n.id);let i=!1;return n.url?(s.addLinkAttributes(r,n.url,n.newWindow),i=!0):n.action?(this._bindNamedAction(r,n.action),i=!0):n.attachment?(N(this,qs,XV).call(this,r,n.attachment,n.attachmentDest),i=!0):n.setOCGState?(N(this,qs,QV).call(this,r,n.setOCGState),i=!0):n.dest?(this._bindLink(r,n.dest),i=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,n),i=!0),n.resetForm?(this._bindResetFormAction(r,n.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(n,s){n.href=this.linkService.getDestinationHash(s),n.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&N(this,qs,mc).call(this)}_bindNamedAction(n,s){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(s),!1),N(this,qs,mc).call(this)}_bindJSAction(n,s){n.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(n[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}n.onclick||(n.onclick=()=>!1),N(this,qs,mc).call(this)}_bindResetFormAction(n,s){const r=n.onclick;if(r||(n.href=this.linkService.getAnchorUrl("")),N(this,qs,mc).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(n.onclick=()=>!1);return}n.onclick=()=>{var p;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const g=new Set(o);for(const y of i){const x=this._fieldObjects[y]||[];for(const{id:v}of x)g.add(v)}for(const y of Object.values(this._fieldObjects))for(const x of y)g.has(x.id)===a&&l.push(x)}else for(const g of Object.values(this._fieldObjects))l.push(...g);const c=this.annotationStorage,u=[];for(const g of l){const{id:y}=g;switch(u.push(y),g.type){case"text":{const v=g.defaultValue||"";c.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=g.defaultValue===g.exportValues;c.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=g.defaultValue||"";c.setValue(y,{value:v});break}default:continue}const x=document.querySelector(`[data-element-id="${y}"]`);if(x){if(!fd.has(x)){Ie(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}qs=new WeakSet,mc=function(){this.container.setAttribute("data-internal-link","")},XV=function(n,s,r=null){n.href=this.linkService.getAnchorUrl(""),s.description&&(n.title=s.description),n.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(s.content,s.filename,r),!1},N(this,qs,mc).call(this)},QV=function(n,s){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(s),!1),N(this,qs,mc).call(this)};class CJ extends Bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Cd extends Bt{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return An.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!n.focused||!o.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,n,s,r){var i,o,a;for(const[l,c]of s)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,c,r),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,n,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":be.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||wJ,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(uS*r))||1,p=c/u;o=Math.min(r,l(p/uS))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(c/uS))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=be.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class SJ extends Cd{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[n]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(n,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),fd.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const p=this.data.dateFormat||this.data.timeFormat;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",y=>{e.setValue(n,{value:y.target.value}),this.setPropertyOnSiblings(s,"value",y.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",y=>{const x=this.data.defaultFieldValue??"";s.value=u.userValue=x,u.formattedValue=null});let g=y=>{const{formattedValue:x}=u;x!=null&&(y.target.value=x),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",x=>{var C;if(u.focused)return;const{target:v}=x;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const v={value(C){u.userValue=C.detail.value??"",e.setValue(n,{value:u.userValue.toString()}),C.target.value=u.userValue},formattedValue(C){const{formattedValue:w}=C.detail;u.formattedValue=w,w!=null&&C.target!==document.activeElement&&(C.target.value=w),e.setValue(n,{formattedValue:w})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var T;const{charLimit:w}=C.detail,{target:S}=C;if(w===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",w);let _=u.userValue;!_||_.length<=w||(_=_.slice(0,w),S.value=u.userValue=_,e.setValue(n,{value:_}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(v,x)}),s.addEventListener("keydown",x=>{var w;u.commitKey=1;let v=-1;if(x.key==="Escape"?v=0:x.key==="Enter"&&!this.data.multiLine?v=2:x.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:C}=x.target;u.lastCommittedValue!==C&&(u.lastCommittedValue=C,u.userValue=C,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,willCommit:!0,commitKey:v,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const y=g;g=null,s.addEventListener("blur",x=>{var C,w;if(!u.focused||!x.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(u.focused=!1);const{value:v}=x.target;u.userValue=v,u.lastCommittedValue!==v&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}})),y(x)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",x=>{var P;u.lastCommittedValue=null;const{data:v,target:C}=x,{value:w,selectionStart:S,selectionEnd:_}=C;let T=S,A=_;switch(x.inputType){case"deleteWordBackward":{const M=w.substring(0,S).match(/\w*[^\w]*$/);M&&(T-=M[0].length);break}case"deleteWordForward":{const M=w.substring(S).match(/^[^\w]*\w*/);M&&(A+=M[0].length);break}case"deleteContentBackward":S===_&&(T-=1);break;case"deleteContentForward":S===_&&(A+=1);break}x.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,change:v||"",willCommit:!1,selStart:T,selEnd:A}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class bJ extends Cd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class _J extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,s=n.id;let r=e.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return fd.add(i),i.setAttribute("data-element-id",s),i.disabled=n.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=n.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",n.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const u=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=n.defaultFieldValue||"Off";o.target.checked=a===n.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ZV extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,s=n.id;let r=e.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(n.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(fd.add(i),i.setAttribute("data-element-id",s),i.disabled=n.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=n.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=n.defaultFieldValue;o.target.checked=a!=null&&a===n.buttonValue}),this.enableScripting&&this.hasJSActions){const o=n.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const p of this._getElementsByName(c.target.name)){const g=u&&p.id===s;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class EJ extends JV{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class TJ extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,s=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");fd.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const p=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===p});for(const u of this.data.options){const p=document.createElement("option");p.textContent=u.displayValue,p.value=u.exportValue,s.value.includes(u.exportValue)&&(p.setAttribute("selected",!0),i=!1),r.append(p)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),o=()=>{u.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=u=>{const p=u?"value":"textContent",{options:g,multiple:y}=r;return y?Array.prototype.filter.call(g,x=>x.selected).map(x=>x[p]):g.selectedIndex===-1?null:g[g.selectedIndex][p]};let l=a(!1);const c=u=>{const p=u.target.options;return Array.prototype.map.call(p,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{const p={value(g){o==null||o();const y=g.detail.value,x=new Set(Array.isArray(y)?y:[y]);for(const v of r.options)v.selected=x.has(v.value);e.setValue(n,{value:a(!0)}),l=a(!1)},multipleSelection(g){r.multiple=!0},remove(g){const y=r.options,x=g.detail.remove;y[x].selected=!1,r.remove(x),y.length>0&&Array.prototype.findIndex.call(y,C=>C.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:a(!0),items:c(g)}),l=a(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(n,{value:null,items:[]}),l=a(!1)},insert(g){const{index:y,displayValue:x,exportValue:v}=g.detail.insert,C=r.children[y],w=document.createElement("option");w.textContent=x,w.value=v,C?C.before(w):r.append(w),e.setValue(n,{value:a(!0),items:c(g)}),l=a(!1)},items(g){const{items:y}=g.detail;for(;r.length!==0;)r.remove(0);for(const x of y){const{displayValue:v,exportValue:C}=x,w=document.createElement("option");w.textContent=v,w.value=C,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:a(!0),items:c(g)}),l=a(!1)},indices(g){const y=new Set(g.detail.indices);for(const x of g.target.options)x.selected=y.has(x.index);e.setValue(n,{value:a(!0)}),l=a(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(p,u)}),r.addEventListener("input",u=>{var y;const p=a(!0),g=a(!1);e.setValue(n,{value:p}),u.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:g,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){e.setValue(n,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class j_ extends Bt{constructor(e){const{data:n,elements:s}=e;super(e,{isRenderable:Bt._hasPopupData(n)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=new AJ({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${jA}${r}`).join(",")),this.container}}var ch,iw,ow,uh,dh,Dt,Oo,xu,Jg,Xg,fh,Uo,Vr,Vo,Qg,$o,Zg,wu,Cu,ft,wx,z_,e4,t4,n4,s4,Cx,Sx,H_;class AJ{constructor({container:e,color:n,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:p}){R(this,ft);R(this,ch,N(this,ft,n4).bind(this));R(this,iw,N(this,ft,H_).bind(this));R(this,ow,N(this,ft,Sx).bind(this));R(this,uh,N(this,ft,Cx).bind(this));R(this,dh,null);R(this,Dt,null);R(this,Oo,null);R(this,xu,null);R(this,Jg,null);R(this,Xg,null);R(this,fh,null);R(this,Uo,!1);R(this,Vr,null);R(this,Vo,null);R(this,Qg,null);R(this,$o,null);R(this,Zg,null);R(this,wu,null);R(this,Cu,!1);var g;E(this,Dt,e),E(this,Zg,r),E(this,Oo,o),E(this,$o,a),E(this,Xg,l),E(this,dh,n),E(this,Qg,c),E(this,fh,u),E(this,Jg,s),E(this,xu,GA.toDateObject(i)),this.trigger=s.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",d(this,uh)),y.addEventListener("mouseenter",d(this,ow)),y.addEventListener("mouseleave",d(this,iw)),y.classList.add("popupTriggerArea");for(const y of s)(g=y.container)==null||g.addEventListener("keydown",d(this,ch));d(this,Dt).hidden=!0,p&&N(this,ft,Cx).call(this)}render(){if(d(this,Vr))return;const e=E(this,Vr,document.createElement("div"));if(e.className="popup",d(this,dh)){const i=e.style.outlineColor=be.makeHexColor(...d(this,dh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),{dir:s.dir,str:s.textContent}=d(this,Zg),e.append(n),d(this,xu)){const i=document.createElement("time");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,xu).valueOf()})),i.dateTime=d(this,xu).toISOString(),n.append(i)}const r=d(this,ft,wx);if(r)YV.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(d(this,Oo));e.append(i)}d(this,Dt).append(e)}_formatContents({str:e,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,o=r.length;i<o;++i){const a=r[i];s.append(document.createTextNode(a)),i<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:n}){var s;d(this,wu)||E(this,wu,{contentsObj:d(this,Oo),richText:d(this,$o)}),e&&E(this,Vo,null),n&&(E(this,$o,N(this,ft,t4).call(this,n)),E(this,Oo,null)),(s=d(this,Vr))==null||s.remove(),E(this,Vr,null)}resetEdited(){var e;d(this,wu)&&({contentsObj:rn(this,Oo)._,richText:rn(this,$o)._}=d(this,wu),E(this,wu,null),(e=d(this,Vr))==null||e.remove(),E(this,Vr,null),E(this,Vo,null))}forceHide(){E(this,Cu,this.isVisible),d(this,Cu)&&(d(this,Dt).hidden=!0)}maybeShow(){d(this,Cu)&&(d(this,Vr)||N(this,ft,Sx).call(this),E(this,Cu,!1),d(this,Dt).hidden=!1)}get isVisible(){return d(this,Dt).hidden===!1}}ch=new WeakMap,iw=new WeakMap,ow=new WeakMap,uh=new WeakMap,dh=new WeakMap,Dt=new WeakMap,Oo=new WeakMap,xu=new WeakMap,Jg=new WeakMap,Xg=new WeakMap,fh=new WeakMap,Uo=new WeakMap,Vr=new WeakMap,Vo=new WeakMap,Qg=new WeakMap,$o=new WeakMap,Zg=new WeakMap,wu=new WeakMap,Cu=new WeakMap,ft=new WeakSet,wx=function(){const e=d(this,$o),n=d(this,Oo);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&d(this,$o).html||null},z_=function(){var e,n,s;return((s=(n=(e=d(this,ft,wx))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:s.fontSize)||0},e4=function(){var e,n,s;return((s=(n=(e=d(this,ft,wx))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:s.color)||null},t4=function(e){const n=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:d(this,ft,e4),fontSize:d(this,ft,z_)?`calc(${d(this,ft,z_)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))n.push({name:"span",value:i,attributes:r});return s},n4=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,Uo))&&N(this,ft,Cx).call(this)},s4=function(){if(d(this,Vo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:i}}}=d(this,Xg);let o=!!d(this,fh),a=o?d(this,fh):d(this,Qg);for(const x of d(this,Jg))if(!a||be.intersect(x.data.rect,a)!==null){a=x.data.rect,o=!0;break}const l=be.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,p=l[0]+u,g=l[1];E(this,Vo,[100*(p-r)/n,100*(g-i)/s]);const{style:y}=d(this,Dt);y.left=`${d(this,Vo)[0]}%`,y.top=`${d(this,Vo)[1]}%`},Cx=function(){E(this,Uo,!d(this,Uo)),d(this,Uo)?(N(this,ft,Sx).call(this),d(this,Dt).addEventListener("click",d(this,uh)),d(this,Dt).addEventListener("keydown",d(this,ch))):(N(this,ft,H_).call(this),d(this,Dt).removeEventListener("click",d(this,uh)),d(this,Dt).removeEventListener("keydown",d(this,ch)))},Sx=function(){d(this,Vr)||this.render(),this.isVisible?d(this,Uo)&&d(this,Dt).classList.add("focused"):(N(this,ft,s4).call(this),d(this,Dt).hidden=!1,d(this,Dt).style.zIndex=parseInt(d(this,Dt).style.zIndex)+1e3)},H_=function(){d(this,Dt).classList.remove("focused"),!(d(this,Uo)||!this.isVisible)&&(d(this,Dt).hidden=!0,d(this,Dt).style.zIndex=parseInt(d(this,Dt).style.zIndex)-1e3)};class r4 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ke.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ey;class RJ extends Bt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,ey,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=E(this,ey,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),o.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),o.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),o.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),o.setAttribute("stroke-width",n.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ey)}addHighlightArea(){this.container.classList.add("highlightArea")}}ey=new WeakMap;var ty;class NJ extends Bt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,ty,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=n.borderStyle.width,a=E(this,ty,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ty)}addHighlightArea(){this.container.classList.add("highlightArea")}}ty=new WeakMap;var ny;class PJ extends Bt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,ny,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=n.borderStyle.width,a=E(this,ny,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ny)}addHighlightArea(){this.container.classList.add("highlightArea")}}ny=new WeakMap;var sy;class i4 extends Bt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,sy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let p=0,g=s.length;p<g;p+=2){const y=s[p]-n[0],x=n[3]-s[p+1];c.push(`${y},${x}`)}c=c.join(" ");const u=E(this,sy,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,sy)}addHighlightArea(){this.container.classList.add("highlightArea")}}sy=new WeakMap;class MJ extends i4{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kJ extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ry,Su,iy,G_;class JA extends Bt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});R(this,iy);R(this,ry,null);R(this,Su,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ke.HIGHLIGHT:ke.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:c}=N(this,iy,G_).call(this,s,n),u=this.svgFactory.create(l,c,!0),p=E(this,ry,this.svgFactory.createElement("svg:g"));u.append(p),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let g=0,y=r.length;g<y;g++){const x=this.svgFactory.createElement(this.svgElementName);d(this,Su).push(x),x.setAttribute("points",r[g].join(",")),p.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:s,points:r,rect:i}=n,o=d(this,ry);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,l=d(this,Su).length;a<l;a++)d(this,Su)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:c}=N(this,iy,G_).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Su)}addHighlightArea(){this.container.classList.add("highlightArea")}}ry=new WeakMap,Su=new WeakMap,iy=new WeakSet,G_=function(n,s){switch(n){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class o4 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ke.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class IJ extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class DJ extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class LJ extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class a4 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ke.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var oy,ay,q_;class FJ extends Bt{constructor(n){var r;super(n,{isRenderable:!0});R(this,ay);R(this,oy,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",N(this,ay,q_).bind(this)),E(this,oy,r);const{isMac:i}=An.platform;return n.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&N(this,ay,q_).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),n.append(r),n}getElementsToTriggerPopup(){return d(this,oy)}addHighlightArea(){this.container.classList.add("highlightArea")}}oy=new WeakMap,ay=new WeakSet,q_=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var ly,bu,Cl,cy,ic,K_,Y_;const f1=class f1{constructor({div:e,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a}){R(this,ic);R(this,ly,null);R(this,bu,null);R(this,Cl,new Map);R(this,cy,null);this.div=e,E(this,ly,n),E(this,bu,s),E(this,cy,a||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return d(this,Cl).size>0}async render(e){var o;const{annotations:n}=e,s=this.div;ud(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new V0,annotationStorage:e.annotationStorage||new WA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of n){if(a.noHTML)continue;const l=a.annotationType===zt.POPUP;if(l){const p=r.get(a.id);if(!p)continue;i.elements=p}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const c=gP.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const p=r.get(a.popupRef);p?p.push(c):r.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await N(this,ic,K_).call(this,u,a.id,i.elements),c._isEditable&&(d(this,Cl).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}N(this,ic,Y_).call(this)}async addLinkAnnotations(e,n){const s={data:null,layer:this.div,linkService:n,svgFactory:new V0,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=f1._defaultBorderStyle),s.data=r;const i=gP.create(s);if(!i.isRenderable)continue;const o=i.render();await N(this,ic,K_).call(this,o,r.id,null)}}update({viewport:e}){const n=this.div;this.viewport=e,ud(n,{rotation:e.rotation}),N(this,ic,Y_).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Cl).values())}getEditableAnnotation(e){return d(this,Cl).get(e)}static get _defaultBorderStyle(){return He(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Id.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ly=new WeakMap,bu=new WeakMap,Cl=new WeakMap,cy=new WeakMap,ic=new WeakSet,K_=async function(e,n,s){var a,l;const r=e.firstChild||e,i=r.id=`${jA}${n}`,o=await((a=d(this,cy))==null?void 0:a.getAriaAttributes(i));if(o)for(const[c,u]of o)r.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),(l=d(this,ly))==null||l.moveElementInDOM(this.div,e,r,!1))},Y_=function(){var n;if(!d(this,bu))return;const e=this.div;for(const[s,r]of d(this,bu)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=d(this,Cl).get(s);a&&(a._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}d(this,bu).clear()};let W_=f1;const Lv=/\r\n?|\n/g;var $r,Ps,uy,_u,Ms,Kt,l4,c4,u4,bx,da,_x,Ex,d4,X_,f4;const ht=class ht extends mt{constructor(n){super({...n,name:"freeTextEditor"});R(this,Kt);R(this,$r);R(this,Ps,"");R(this,uy,`${this.id}-editor`);R(this,_u,null);R(this,Ms);E(this,$r,n.color||ht._defaultColor||mt._defaultLineColor),E(this,Ms,n.fontSize||ht._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const n=ht.prototype,s=o=>o.isEmpty(),r=dd.TRANSLATE_SMALL,i=dd.TRANSLATE_BIG;return He(this,"_keyboardManager",new Jy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(n,s){mt.initialize(n,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,s){switch(n){case qe.FREETEXT_SIZE:ht._defaultFontSize=s;break;case qe.FREETEXT_COLOR:ht._defaultColor=s;break}}updateParams(n,s){switch(n){case qe.FREETEXT_SIZE:N(this,Kt,l4).call(this,s);break;case qe.FREETEXT_COLOR:N(this,Kt,c4).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[qe.FREETEXT_SIZE,ht._defaultFontSize],[qe.FREETEXT_COLOR,ht._defaultColor||mt._defaultLineColor]]}get propertiesToUpdate(){return[[qe.FREETEXT_SIZE,d(this,Ms)],[qe.FREETEXT_COLOR,d(this,$r)]]}_translateEmpty(n,s){this._uiManager.translateSelectedEditors(n,s,!0)}getInitialTranslation(){const n=this.parentScale;return[-ht._internalPadding*n,-(ht._internalPadding+d(this,Ms))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,_u,new AbortController);const n=this._uiManager.combinedSignal(d(this,_u));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,uy)),this._isDraggable=!0,(n=d(this,_u))==null||n.abort(),E(this,_u,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var s;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=d(this,Ps),s=E(this,Ps,N(this,Kt,u4).call(this).trimEnd());if(n===s)return;const r=i=>{if(E(this,Ps,i),!i){this.remove();return}N(this,Kt,Ex).call(this),this._uiManager.rebuild(this),N(this,Kt,bx).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(n)},mustExec:!1}),N(this,Kt,bx).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){ht._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,s;(this._isCopy||this.annotationElementId)&&(n=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,uy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${d(this,Ms)}px * var(--total-scale-factor))`,r.color=d(this,$r),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,p]=this.pageDimensions,[g,y]=this.pageTranslation;let x,v;switch(this.rotation){case 0:x=n+(a[0]-g)/u,v=s+this.height-(a[1]-y)/p;break;case 90:x=n+(a[0]-g)/u,v=s-(a[1]-y)/p,[l,c]=[c,-l];break;case 180:x=n-this.width+(a[0]-g)/u,v=s-(a[1]-y)/p,[l,c]=[-l,-c];break;case 270:x=n+(a[0]-g-this.height*p)/u,v=s+(a[1]-y-this.width*u)/p,[l,c]=[-c,l];break}this.setAt(x*i,v*o,l,c)}else this._moveAfterPaste(n,s);N(this,Kt,Ex).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var x,v,C;const s=n.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;n.preventDefault();const i=N(x=ht,da,X_).call(x,s.getData("text")||"").replaceAll(Lv,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],p=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(p.push(l.nodeValue.slice(c).replaceAll(Lv,"")),w!==this.editorDiv){let S=u;for(const _ of this.editorDiv.childNodes){if(_===w){S=p;continue}S.push(N(v=ht,da,_x).call(v,_))}}u.push(l.nodeValue.slice(0,c).replaceAll(Lv,""))}else if(l===this.editorDiv){let w=u,S=0;for(const _ of this.editorDiv.childNodes)S++===c&&(w=p),w.push(N(C=ht,da,_x).call(C,_))}E(this,Ps,`${u.join(`
`)}${i}${p.join(`
`)}`),N(this,Kt,Ex).call(this);const g=new Range;let y=Math.sumPrecise(u.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const S=w.nodeValue.length;if(y<=S){g.setStart(w,y),g.setEnd(w,y);break}y-=S}o.removeAllRanges(),o.addRange(g)}get contentDiv(){return this.editorDiv}static async deserialize(n,s,r){var a;let i=null;if(n instanceof r4){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:p,id:g,popupRef:y},textContent:x,textPosition:v,parent:{page:{pageNumber:C}}}=n;if(!x||x.length===0)return null;i=n={annotationType:ke.FREETEXT,color:Array.from(c),fontSize:l,value:x.join(`
`),position:v,pageIndex:C-1,rect:u.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:y}}const o=await super.deserialize(n,s,r);return E(o,Ms,n.fontSize),E(o,$r,be.makeHexColor(...n.color)),E(o,Ps,N(a=ht,da,X_).call(a,n.value)),o._initialData=i,o}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ht._internalPadding*this.parentScale,r=this.getRect(s,s),i=mt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,$r)),o={annotationType:ke.FREETEXT,color:i,fontSize:d(this,Ms),value:N(this,Kt,d4).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(o.isCopy=!0,o):this.annotationElementId&&!N(this,Kt,f4).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(n){const s=super.renderAnnotationElement(n);if(this.deleted)return s;const{style:r}=s;r.fontSize=`calc(${d(this,Ms)}px * var(--total-scale-factor))`,r.color=d(this,$r),s.replaceChildren();for(const o of d(this,Ps).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const i=ht._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(i,i),popupContent:d(this,Ps)}),s}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};$r=new WeakMap,Ps=new WeakMap,uy=new WeakMap,_u=new WeakMap,Ms=new WeakMap,Kt=new WeakSet,l4=function(n){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-d(this,Ms))*this.parentScale),E(this,Ms,i),N(this,Kt,bx).call(this)},r=d(this,Ms);this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},c4=function(n){const s=i=>{E(this,$r,this.editorDiv.style.color=i)},r=d(this,$r);this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u4=function(){var r;const n=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(n.push(N(r=ht,da,_x).call(r,i)),s=i);return n.join(`
`)},bx=function(){const[n,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/n,this.height=r.height/s):(this.width=r.height/n,this.height=r.width/s),this.fixAndSetPosition()},da=new WeakSet,_x=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(Lv,"")},Ex=function(){if(this.editorDiv.replaceChildren(),!!d(this,Ps))for(const n of d(this,Ps).split(`
`)){const s=document.createElement("div");s.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(s)}},d4=function(){return d(this,Ps).replaceAll(""," ")},X_=function(n){return n.replaceAll(" ","")},f4=function(n){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||n.value!==s||n.fontSize!==r||n.color.some((a,l)=>a!==i[l])||n.pageIndex!==o},R(ht,da),Z(ht,"_freeTextDefaultContent",""),Z(ht,"_internalPadding",0),Z(ht,"_defaultColor",null),Z(ht,"_defaultFontSize",10),Z(ht,"_type","freetext"),Z(ht,"_editorType",ke.FREETEXT);let J_=ht;class fe{toSVGPath(){dt("Abstract method `toSVGPath` must be implemented.")}get box(){dt("Abstract getter `box` must be implemented.")}serialize(e,n){dt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,n,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,n,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=n+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,s,r,i){switch(i){case 90:return[1-n/s,e/r];case 180:return[1-e/s,1-n/r];case 270:return[n/s,1-e/r];default:return[e/s,n/r]}}static _normalizePagePoint(e,n,s){switch(s){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,s,r,i,o){return[(e+5*s)/6,(n+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}Z(fe,"PRECISION",1e-4);var ks,Br,hh,ph,ki,Be,Eu,Tu,dy,fy,mh,gh,Sl,hy,aw,lw,sn,rm,h4,p4,m4,g4,y4,v4;const go=class go{constructor({x:e,y:n},s,r,i,o,a=0){R(this,sn);R(this,ks);R(this,Br,[]);R(this,hh);R(this,ph);R(this,ki,[]);R(this,Be,new Float32Array(18));R(this,Eu);R(this,Tu);R(this,dy);R(this,fy);R(this,mh);R(this,gh);R(this,Sl,[]);E(this,ks,s),E(this,gh,i*r),E(this,ph,o),d(this,Be).set([NaN,NaN,NaN,NaN,e,n],6),E(this,hh,a),E(this,fy,d(go,hy)*r),E(this,dy,d(go,lw)*r),E(this,mh,r),d(this,Sl).push(e,n)}isEmpty(){return isNaN(d(this,Be)[8])}add({x:e,y:n}){var k;E(this,Eu,e),E(this,Tu,n);const[s,r,i,o]=d(this,ks);let[a,l,c,u]=d(this,Be).subarray(8,12);const p=e-c,g=n-u,y=Math.hypot(p,g);if(y<d(this,dy))return!1;const x=y-d(this,fy),v=x/y,C=v*p,w=v*g;let S=a,_=l;a=c,l=u,c+=C,u+=w,(k=d(this,Sl))==null||k.push(e,n);const T=-w/x,A=C/x,P=T*d(this,gh),M=A*d(this,gh);return d(this,Be).set(d(this,Be).subarray(2,8),0),d(this,Be).set([c+P,u+M],4),d(this,Be).set(d(this,Be).subarray(14,18),12),d(this,Be).set([c-P,u-M],16),isNaN(d(this,Be)[6])?(d(this,ki).length===0&&(d(this,Be).set([a+P,l+M],2),d(this,ki).push(NaN,NaN,NaN,NaN,(a+P-s)/i,(l+M-r)/o),d(this,Be).set([a-P,l-M],14),d(this,Br).push(NaN,NaN,NaN,NaN,(a-P-s)/i,(l-M-r)/o)),d(this,Be).set([S,_,a,l,c,u],6),!this.isEmpty()):(d(this,Be).set([S,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,S-a)-Math.atan2(w,C))<Math.PI/2?([a,l,c,u]=d(this,Be).subarray(2,6),d(this,ki).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/i,((l+u)/2-r)/o),[a,l,S,_]=d(this,Be).subarray(14,18),d(this,Br).push(NaN,NaN,NaN,NaN,((S+a)/2-s)/i,((_+l)/2-r)/o),!0):([S,_,a,l,c,u]=d(this,Be).subarray(0,6),d(this,ki).push(((S+5*a)/6-s)/i,((_+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+u)/6-r)/o,((a+c)/2-s)/i,((l+u)/2-r)/o),[c,u,a,l,S,_]=d(this,Be).subarray(12,18),d(this,Br).push(((S+5*a)/6-s)/i,((_+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+u)/6-r)/o,((a+c)/2-s)/i,((l+u)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,ki),n=d(this,Br);if(isNaN(d(this,Be)[6])&&!this.isEmpty())return N(this,sn,h4).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);N(this,sn,m4).call(this,s);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?s.push(`L${n[r+4]} ${n[r+5]}`):s.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return N(this,sn,p4).call(this,s),s.join(" ")}newFreeDrawOutline(e,n,s,r,i,o){return new x4(e,n,s,r,i,o)}getOutlines(){var p;const e=d(this,ki),n=d(this,Br),s=d(this,Be),[r,i,o,a]=d(this,ks),l=new Float32Array((((p=d(this,Sl))==null?void 0:p.length)??0)+2);for(let g=0,y=l.length-2;g<y;g+=2)l[g]=(d(this,Sl)[g]-r)/o,l[g+1]=(d(this,Sl)[g+1]-i)/a;if(l[l.length-2]=(d(this,Eu)-r)/o,l[l.length-1]=(d(this,Tu)-i)/a,isNaN(s[6])&&!this.isEmpty())return N(this,sn,g4).call(this,l);const c=new Float32Array(d(this,ki).length+24+d(this,Br).length);let u=e.length;for(let g=0;g<u;g+=2){if(isNaN(e[g])){c[g]=c[g+1]=NaN;continue}c[g]=e[g],c[g+1]=e[g+1]}u=N(this,sn,v4).call(this,c,u);for(let g=n.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(n[g+y])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[g+y],c[u+1]=n[g+y+1],u+=2}return N(this,sn,y4).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,ks),d(this,mh),d(this,hh),d(this,ph))}};ks=new WeakMap,Br=new WeakMap,hh=new WeakMap,ph=new WeakMap,ki=new WeakMap,Be=new WeakMap,Eu=new WeakMap,Tu=new WeakMap,dy=new WeakMap,fy=new WeakMap,mh=new WeakMap,gh=new WeakMap,Sl=new WeakMap,hy=new WeakMap,aw=new WeakMap,lw=new WeakMap,sn=new WeakSet,rm=function(){const e=d(this,Be).subarray(4,6),n=d(this,Be).subarray(16,18),[s,r,i,o]=d(this,ks);return[(d(this,Eu)+(e[0]-n[0])/2-s)/i,(d(this,Tu)+(e[1]-n[1])/2-r)/o,(d(this,Eu)+(n[0]-e[0])/2-s)/i,(d(this,Tu)+(n[1]-e[1])/2-r)/o]},h4=function(){const[e,n,s,r]=d(this,ks),[i,o,a,l]=N(this,sn,rm).call(this);return`M${(d(this,Be)[2]-e)/s} ${(d(this,Be)[3]-n)/r} L${(d(this,Be)[4]-e)/s} ${(d(this,Be)[5]-n)/r} L${i} ${o} L${a} ${l} L${(d(this,Be)[16]-e)/s} ${(d(this,Be)[17]-n)/r} L${(d(this,Be)[14]-e)/s} ${(d(this,Be)[15]-n)/r} Z`},p4=function(e){const n=d(this,Br);e.push(`L${n[4]} ${n[5]} Z`)},m4=function(e){const[n,s,r,i]=d(this,ks),o=d(this,Be).subarray(4,6),a=d(this,Be).subarray(16,18),[l,c,u,p]=N(this,sn,rm).call(this);e.push(`L${(o[0]-n)/r} ${(o[1]-s)/i} L${l} ${c} L${u} ${p} L${(a[0]-n)/r} ${(a[1]-s)/i}`)},g4=function(e){const n=d(this,Be),[s,r,i,o]=d(this,ks),[a,l,c,u]=N(this,sn,rm).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(n[2]-s)/i,(n[3]-r)/o,NaN,NaN,NaN,NaN,(n[4]-s)/i,(n[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[16]-s)/i,(n[17]-r)/o,NaN,NaN,NaN,NaN,(n[14]-s)/i,(n[15]-r)/o],0),this.newFreeDrawOutline(p,e,d(this,ks),d(this,mh),d(this,hh),d(this,ph))},y4=function(e,n){const s=d(this,Br);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6},v4=function(e,n){const s=d(this,Be).subarray(4,6),r=d(this,Be).subarray(16,18),[i,o,a,l]=d(this,ks),[c,u,p,g]=N(this,sn,rm).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],n),n+=24},R(go,hy,8),R(go,aw,2),R(go,lw,d(go,hy)+d(go,aw));let $0=go;var yh,Au,Bo,py,Is,my,Ot,cw,w4;class x4 extends fe{constructor(n,s,r,i,o,a){super();R(this,cw);R(this,yh);R(this,Au,new Float32Array(4));R(this,Bo);R(this,py);R(this,Is);R(this,my);R(this,Ot);E(this,Ot,n),E(this,Is,s),E(this,yh,r),E(this,my,i),E(this,Bo,o),E(this,py,a),this.lastPoint=[NaN,NaN],N(this,cw,w4).call(this,a);const[l,c,u,p]=d(this,Au);for(let g=0,y=n.length;g<y;g+=2)n[g]=(n[g]-l)/u,n[g+1]=(n[g+1]-c)/p;for(let g=0,y=s.length;g<y;g+=2)s[g]=(s[g]-l)/u,s[g+1]=(s[g+1]-c)/p}toSVGPath(){const n=[`M${d(this,Ot)[4]} ${d(this,Ot)[5]}`];for(let s=6,r=d(this,Ot).length;s<r;s+=6){if(isNaN(d(this,Ot)[s])){n.push(`L${d(this,Ot)[s+4]} ${d(this,Ot)[s+5]}`);continue}n.push(`C${d(this,Ot)[s]} ${d(this,Ot)[s+1]} ${d(this,Ot)[s+2]} ${d(this,Ot)[s+3]} ${d(this,Ot)[s+4]} ${d(this,Ot)[s+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,s,r,i],o){const a=r-n,l=i-s;let c,u;switch(o){case 0:c=fe._rescale(d(this,Ot),n,i,a,-l),u=fe._rescale(d(this,Is),n,i,a,-l);break;case 90:c=fe._rescaleAndSwap(d(this,Ot),n,s,a,l),u=fe._rescaleAndSwap(d(this,Is),n,s,a,l);break;case 180:c=fe._rescale(d(this,Ot),r,s,-a,l),u=fe._rescale(d(this,Is),r,s,-a,l);break;case 270:c=fe._rescaleAndSwap(d(this,Ot),r,i,-a,-l),u=fe._rescaleAndSwap(d(this,Is),r,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,Au)}newOutliner(n,s,r,i,o,a=0){return new $0(n,s,r,i,o,a)}getNewOutline(n,s){const[r,i,o,a]=d(this,Au),[l,c,u,p]=d(this,yh),g=o*u,y=a*p,x=r*u+l,v=i*p+c,C=this.newOutliner({x:d(this,Is)[0]*g+x,y:d(this,Is)[1]*y+v},d(this,yh),d(this,my),n,d(this,py),s??d(this,Bo));for(let w=2;w<d(this,Is).length;w+=2)C.add({x:d(this,Is)[w]*g+x,y:d(this,Is)[w+1]*y+v});return C.getOutlines()}}yh=new WeakMap,Au=new WeakMap,Bo=new WeakMap,py=new WeakMap,Is=new WeakMap,my=new WeakMap,Ot=new WeakMap,cw=new WeakSet,w4=function(n){const s=d(this,Ot);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,l=i;const c=n?Math.max:Math.min;for(let p=6,g=s.length;p<g;p+=6){const y=s[p+4],x=s[p+5];if(isNaN(s[p]))be.pointBoundingBox(y,x,o),l<x?(a=y,l=x):l===x&&(a=c(a,y));else{const v=[1/0,1/0,-1/0,-1/0];be.bezierBoundingBox(r,i,...s.slice(p,p+6),v),be.rectBoundingBox(...v,o),l<v[3]?(a=v[2],l=v[3]):l===v[3]&&(a=c(a,v[2]))}r=y,i=x}const u=d(this,Au);u[0]=o[0]-d(this,Bo),u[1]=o[1]-d(this,Bo),u[2]=o[2]-o[0]+2*d(this,Bo),u[3]=o[3]-o[1]+2*d(this,Bo),this.lastPoint=[a,l]};var gy,yy,bl,jr,ns,C4,Tx,S4,b4,Z_;class Q_{constructor(e,n=0,s=0,r=!0){R(this,ns);R(this,gy);R(this,yy);R(this,bl,[]);R(this,jr,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:x,width:v,height:C}of e){const w=Math.floor((y-n)/o)*o,S=Math.ceil((y+v+n)/o)*o,_=Math.floor((x-n)/o)*o,T=Math.ceil((x+C+n)/o)*o,A=[w,_,T,!0],P=[S,_,T,!1];d(this,bl).push(A,P),be.rectBoundingBox(w,_,S,T,i)}const a=i[2]-i[0]+2*s,l=i[3]-i[1]+2*s,c=i[0]-s,u=i[1]-s,p=d(this,bl).at(r?-1:-2),g=[p[0],p[2]];for(const y of d(this,bl)){const[x,v,C]=y;y[0]=(x-c)/a,y[1]=(v-u)/l,y[2]=(C-u)/l}E(this,gy,new Float32Array([c,u,a,l])),E(this,yy,g)}getOutlines(){d(this,bl).sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const e=[];for(const n of d(this,bl))n[3]?(e.push(...N(this,ns,Z_).call(this,n)),N(this,ns,S4).call(this,n)):(N(this,ns,b4).call(this,n),e.push(...N(this,ns,Z_).call(this,n)));return N(this,ns,C4).call(this,e)}}gy=new WeakMap,yy=new WeakMap,bl=new WeakMap,jr=new WeakMap,ns=new WeakSet,C4=function(e){const n=[],s=new Set;for(const o of e){const[a,l,c]=o;n.push([a,l,o],[a,c,o])}n.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=n.length;o<a;o+=2){const l=n[o][2],c=n[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,u,p]=o;s.delete(o);let g=a,y=l;for(i=[a,c],r.push(i);;){let x;if(s.has(u))x=u;else if(s.has(p))x=p;else break;s.delete(x),[a,l,c,u,p]=x,g!==a&&(i.push(g,y,a,y===l?l:c),g=a),y=y===l?c:l}i.push(g,y)}return new OJ(r,d(this,gy),d(this,yy))},Tx=function(e){const n=d(this,jr);let s=0,r=n.length-1;for(;s<=r;){const i=s+r>>1,o=n[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},S4=function([,e,n]){const s=N(this,ns,Tx).call(this,e);d(this,jr).splice(s,0,[e,n])},b4=function([,e,n]){const s=N(this,ns,Tx).call(this,e);for(let r=s;r<d(this,jr).length;r++){const[i,o]=d(this,jr)[r];if(i!==e)break;if(i===e&&o===n){d(this,jr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=d(this,jr)[r];if(i!==e)break;if(i===e&&o===n){d(this,jr).splice(r,1);return}}},Z_=function(e){const[n,s,r]=e,i=[[n,s,r]],o=N(this,ns,Tx).call(this,r);for(let a=0;a<o;a++){const[l,c]=d(this,jr)[a];for(let u=0,p=i.length;u<p;u++){const[,g,y]=i[u];if(!(c<=g||y<=l)){if(g>=l){if(y>c)i[u][1]=c;else{if(p===1)return[];i.splice(u,1),u--,p--}continue}i[u][2]=l,y>c&&i.push([n,c,y])}}}return i};var vy,vh;class OJ extends fe{constructor(n,s,r){super();R(this,vy);R(this,vh);E(this,vh,n),E(this,vy,s),this.lastPoint=r}toSVGPath(){const n=[];for(const s of d(this,vh)){let[r,i]=s;n.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(n.push(`V${l}`),i=l):l===i&&(n.push(`H${a}`),r=a)}n.push("Z")}return n.join(" ")}serialize([n,s,r,i],o){const a=[],l=r-n,c=i-s;for(const u of d(this,vh)){const p=new Array(u.length);for(let g=0;g<u.length;g+=2)p[g]=n+u[g]*l,p[g+1]=i-u[g+1]*c;a.push(p)}return a}get box(){return d(this,vy)}get classNamesForOutlining(){return["highlightOutline"]}}vy=new WeakMap,vh=new WeakMap;class eE extends $0{newFreeDrawOutline(e,n,s,r,i,o){return new UJ(e,n,s,r,i,o)}}class UJ extends x4{newOutliner(e,n,s,r,i,o=0){return new eE(e,n,s,r,i,o)}}var Ds,Ru,xh,Zt,xy,wh,jo,wy,_l,zr,Ch,Cy,ut,tE,nE,sE,gc,_4,Da;const us=class us{constructor({editor:e=null,uiManager:n=null}){R(this,ut);R(this,Ds,null);R(this,Ru,null);R(this,xh);R(this,Zt,null);R(this,xy,!1);R(this,wh,!1);R(this,jo,null);R(this,wy);R(this,_l,null);R(this,zr,null);R(this,Ch);var s,r;e?(E(this,wh,!1),E(this,Ch,qe.HIGHLIGHT_COLOR),E(this,jo,e)):(E(this,wh,!0),E(this,Ch,qe.HIGHLIGHT_DEFAULT_COLOR)),E(this,zr,(e==null?void 0:e._uiManager)||n),E(this,wy,d(this,zr)._eventBus),E(this,xh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=d(this,zr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),d(us,Cy)||E(us,Cy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return He(this,"_keyboardManager",new Jy([[["Escape","mac+Escape"],us.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],us.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],us.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],us.prototype._moveToPrevious],[["Home","mac+Home"],us.prototype._moveToBeginning],[["End","mac+End"],us.prototype._moveToEnd]]))}renderButton(){const e=E(this,Ds,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,jo)&&(e.ariaControls=`${d(this,jo).id}_colorpicker_dropdown`);const n=d(this,zr)._signal;e.addEventListener("click",N(this,ut,gc).bind(this),{signal:n}),e.addEventListener("keydown",N(this,ut,sE).bind(this),{signal:n});const s=E(this,Ru,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=d(this,xh),e.append(s),e}renderMainDropdown(){const e=E(this,Zt,N(this,ut,tE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,Ds)){N(this,ut,gc).call(this,e);return}const n=e.target.getAttribute("data-color");n&&N(this,ut,nE).call(this,n,e)}_moveToNext(e){var n,s;if(!d(this,ut,Da)){N(this,ut,gc).call(this,e);return}if(e.target===d(this,Ds)){(n=d(this,Zt).firstChild)==null||n.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var n,s;if(e.target===((n=d(this,Zt))==null?void 0:n.firstChild)||e.target===d(this,Ds)){d(this,ut,Da)&&this._hideDropdownFromKeyboard();return}d(this,ut,Da)||N(this,ut,gc).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var n;if(!d(this,ut,Da)){N(this,ut,gc).call(this,e);return}(n=d(this,Zt).firstChild)==null||n.focus()}_moveToEnd(e){var n;if(!d(this,ut,Da)){N(this,ut,gc).call(this,e);return}(n=d(this,Zt).lastChild)==null||n.focus()}hideDropdown(){var e,n;(e=d(this,Zt))==null||e.classList.add("hidden"),d(this,Ds).ariaExpanded="false",(n=d(this,_l))==null||n.abort(),E(this,_l,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,wh)){if(!d(this,ut,Da)){(e=d(this,jo))==null||e.unselect();return}this.hideDropdown(),d(this,Ds).focus({preventScroll:!0,focusVisible:d(this,xy)})}}updateColor(e){if(d(this,Ru)&&(d(this,Ru).style.backgroundColor=e),!d(this,Zt))return;const n=d(this,zr).highlightColors.values();for(const s of d(this,Zt).children)s.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=d(this,Ds))==null||e.remove(),E(this,Ds,null),E(this,Ru,null),(n=d(this,Zt))==null||n.remove(),E(this,Zt,null)}};Ds=new WeakMap,Ru=new WeakMap,xh=new WeakMap,Zt=new WeakMap,xy=new WeakMap,wh=new WeakMap,jo=new WeakMap,wy=new WeakMap,_l=new WeakMap,zr=new WeakMap,Ch=new WeakMap,Cy=new WeakMap,ut=new WeakSet,tE=function(){const e=document.createElement("div"),n=d(this,zr)._signal;e.addEventListener("contextmenu",ii,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,jo)&&(e.id=`${d(this,jo).id}_colorpicker_dropdown`);for(const[s,r]of d(this,zr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",d(us,Cy)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===d(this,xh),i.addEventListener("click",N(this,ut,nE).bind(this,r),{signal:n}),e.append(i)}return e.addEventListener("keydown",N(this,ut,sE).bind(this),{signal:n}),e},nE=function(e,n){n.stopPropagation(),d(this,wy).dispatch("switchannotationeditorparams",{source:this,type:d(this,Ch),value:e})},sE=function(e){us._keyboardManager.exec(this,e)},gc=function(e){if(d(this,ut,Da)){this.hideDropdown();return}if(E(this,xy,e.detail===0),d(this,_l)||(E(this,_l,new AbortController),window.addEventListener("pointerdown",N(this,ut,_4).bind(this),{signal:d(this,zr).combinedSignal(d(this,_l))})),d(this,Ds).ariaExpanded="true",d(this,Zt)){d(this,Zt).classList.remove("hidden");return}const n=E(this,Zt,N(this,ut,tE).call(this));d(this,Ds).append(n)},_4=function(e){var n;(n=d(this,Zt))!=null&&n.contains(e.target)||this.hideDropdown()},Da=function(){return d(this,Zt)&&!d(this,Zt).classList.contains("hidden")},R(us,Cy,null);let B0=us;var Sh,Sy,zo,Nu,by,ms,_y,Ey,Pu,ar,Ls,Cn,bh,Ho,On,_h,lr,Ty,Fe,rE,Ax,E4,T4,A4,iE,yc,fr,Ud,R4,Rx,im,N4,P4,M4,k4,I4;const Ze=class Ze extends mt{constructor(n){super({...n,name:"highlightEditor"});R(this,Fe);R(this,Sh,null);R(this,Sy,0);R(this,zo);R(this,Nu,null);R(this,by,null);R(this,ms,null);R(this,_y,null);R(this,Ey,0);R(this,Pu,null);R(this,ar,null);R(this,Ls,null);R(this,Cn,!1);R(this,bh,null);R(this,Ho);R(this,On,null);R(this,_h,"");R(this,lr);R(this,Ty,"");this.color=n.color||Ze._defaultColor,E(this,lr,n.thickness||Ze._defaultThickness),E(this,Ho,n.opacity||Ze._defaultOpacity),E(this,zo,n.boxes||null),E(this,Ty,n.methodOfCreation||""),E(this,_h,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(E(this,Cn,!0),N(this,Fe,Ax).call(this,n),N(this,Fe,yc).call(this)):d(this,zo)&&(E(this,Sh,n.anchorNode),E(this,Sy,n.anchorOffset),E(this,_y,n.focusNode),E(this,Ey,n.focusOffset),N(this,Fe,rE).call(this),N(this,Fe,yc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Ze.prototype;return He(this,"_keyboardManager",new Jy([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Cn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,lr),methodOfCreation:d(this,Ty)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,s){var r;mt.initialize(n,s),Ze._defaultColor||(Ze._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(n,s){switch(n){case qe.HIGHLIGHT_DEFAULT_COLOR:Ze._defaultColor=s;break;case qe.HIGHLIGHT_THICKNESS:Ze._defaultThickness=s;break}}translateInPage(n,s){}get toolbarPosition(){return d(this,bh)}updateParams(n,s){switch(n){case qe.HIGHLIGHT_COLOR:N(this,Fe,E4).call(this,s);break;case qe.HIGHLIGHT_THICKNESS:N(this,Fe,T4).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[qe.HIGHLIGHT_DEFAULT_COLOR,Ze._defaultColor],[qe.HIGHLIGHT_THICKNESS,Ze._defaultThickness]]}get propertiesToUpdate(){return[[qe.HIGHLIGHT_COLOR,this.color||Ze._defaultColor],[qe.HIGHLIGHT_THICKNESS,d(this,lr)||Ze._defaultThickness],[qe.HIGHLIGHT_FREE,d(this,Cn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,by,new B0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(N(this,Fe,im).call(this))}getBaseTranslation(){return[0,0]}getRect(n,s){return super.getRect(n,s,N(this,Fe,im).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){N(this,Fe,iE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,Fe,yc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var r;let s=!1;this.parent&&!n?N(this,Fe,iE).call(this):n&&(N(this,Fe,yc).call(this,n),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),s&&this.select()}rotate(n){var i,o,a;const{drawLayer:s}=this.parent;let r;d(this,Cn)?(n=(n-this.rotation+360)%360,r=N(i=Ze,fr,Ud).call(i,d(this,ar).box,n)):r=N(o=Ze,fr,Ud).call(o,[this.x,this.y,this.width,this.height],n),s.updateProperties(d(this,Ls),{bbox:r,root:{"data-main-rotation":n}}),s.updateProperties(d(this,On),{bbox:N(a=Ze,fr,Ud).call(a,d(this,ms).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();d(this,_h)&&(n.setAttribute("aria-label",d(this,_h)),n.setAttribute("role","mark")),d(this,Cn)?n.classList.add("free"):this.div.addEventListener("keydown",N(this,Fe,R4).bind(this),{signal:this._uiManager._signal});const s=E(this,Pu,document.createElement("div"));n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=d(this,Nu);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),QU(this,d(this,Pu),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,On),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,On),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:N(this,Fe,Rx).call(this,!0);break;case 1:case 3:N(this,Fe,Rx).call(this,!1);break}}select(){var n;super.select(),d(this,On)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,On),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),d(this,On)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,On),{rootClass:{selected:!1}}),d(this,Cn)||N(this,Fe,Rx).call(this,!1))}get _mustFixPosition(){return!d(this,Cn)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Ls),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(d(this,On),{rootClass:{hidden:!n}}))}static startHighlighting(n,s,{target:r,x:i,y:o}){const{x:a,y:l,width:c,height:u}=r.getBoundingClientRect(),p=new AbortController,g=n.combinedSignal(p),y=x=>{p.abort(),N(this,fr,k4).call(this,n,x)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",Gt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ii,{signal:g}),r.addEventListener("pointermove",N(this,fr,M4).bind(this,n),{signal:g}),this._freeHighlight=new eE({x:i,y:o},[a,l,c,u],n.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,s,r){var v,C,w,S;let i=null;if(n instanceof o4){const{data:{quadPoints:_,rect:T,rotation:A,id:P,color:M,opacity:I,popupRef:k},parent:{page:{pageNumber:D}}}=n;i=n={annotationType:ke.HIGHLIGHT,color:Array.from(M),opacity:I,quadPoints:_,boxes:null,pageIndex:D-1,rect:T.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:k}}else if(n instanceof JA){const{data:{inkLists:_,rect:T,rotation:A,id:P,color:M,borderStyle:{rawWidth:I},popupRef:k},parent:{page:{pageNumber:D}}}=n;i=n={annotationType:ke.HIGHLIGHT,color:Array.from(M),thickness:I,inkLists:_,boxes:null,pageIndex:D-1,rect:T.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:k}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=n,u=await super.deserialize(n,s,r);u.color=be.makeHexColor(...o),E(u,Ho,c||1),l&&E(u,lr,n.thickness),u._initialData=i;const[p,g]=u.pageDimensions,[y,x]=u.pageTranslation;if(a){const _=E(u,zo,[]);for(let T=0;T<a.length;T+=8)_.push({x:(a[T]-y)/p,y:1-(a[T+1]-x)/g,width:(a[T+2]-a[T])/p,height:(a[T+1]-a[T+5])/g});N(v=u,Fe,rE).call(v),N(C=u,Fe,yc).call(C),u.rotate(u.rotation)}else if(l){E(u,Cn,!0);const _=l[0],T={x:_[0]-y,y:g-(_[1]-x)},A=new eE(T,[0,0,p,g],1,d(u,lr)/2,!0,.001);for(let I=0,k=_.length;I<k;I+=2)T.x=_[I]-y,T.y=g-(_[I+1]-x),A.add(T);const{id:P,clipPathId:M}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);N(w=u,Fe,Ax).call(w,{highlightOutlines:A.getOutlines(),highlightId:P,clipPathId:M}),N(S=u,Fe,yc).call(S),u.rotate(u.parentRotation)}return u}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=mt._colorManager.convert(this.color),i={annotationType:ke.HIGHLIGHT,color:r,opacity:d(this,Ho),thickness:d(this,lr),quadPoints:N(this,Fe,N4).call(this),outlines:N(this,Fe,P4).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:N(this,Fe,im).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!N(this,Fe,I4).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Sh=new WeakMap,Sy=new WeakMap,zo=new WeakMap,Nu=new WeakMap,by=new WeakMap,ms=new WeakMap,_y=new WeakMap,Ey=new WeakMap,Pu=new WeakMap,ar=new WeakMap,Ls=new WeakMap,Cn=new WeakMap,bh=new WeakMap,Ho=new WeakMap,On=new WeakMap,_h=new WeakMap,lr=new WeakMap,Ty=new WeakMap,Fe=new WeakSet,rE=function(){const n=new Q_(d(this,zo),.001);E(this,ar,n.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,ar).box;const s=new Q_(d(this,zo),.0025,.001,this._uiManager.direction==="ltr");E(this,ms,s.getOutlines());const{lastPoint:r}=d(this,ms);E(this,bh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Ax=function({highlightOutlines:n,highlightId:s,clipPathId:r}){var p,g;if(E(this,ar,n),E(this,ms,n.getNewOutline(d(this,lr)/2+1.5,.0025)),s>=0)E(this,Ls,s),E(this,Nu,r),this.parent.drawLayer.finalizeDraw(s,{bbox:n.box,path:{d:n.toSVGPath()}}),E(this,On,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,ms).box,path:{d:d(this,ms).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Ls),{bbox:N(p=Ze,fr,Ud).call(p,d(this,ar).box,(y-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,On),{bbox:N(g=Ze,fr,Ud).call(g,d(this,ms).box,y),path:{d:d(this,ms).toSVGPath()}})}const[o,a,l,c]=n.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[y,x]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*x/y,this.height=c*y/x;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[y,x]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*x/y,this.height=c*y/x;break}}const{lastPoint:u}=d(this,ms);E(this,bh,[(u[0]-o)/l,(u[1]-a)/c])},E4=function(n){const s=(o,a)=>{var l,c;this.color=o,E(this,Ho,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Ls),{root:{fill:o,"fill-opacity":a}}),(c=d(this,by))==null||c.updateColor(o)},r=this.color,i=d(this,Ho);this.addCommands({cmd:s.bind(this,n,Ze._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)},T4=function(n){const s=d(this,lr),r=i=>{E(this,lr,i),N(this,Fe,A4).call(this,i)};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},A4=function(n){if(!d(this,Cn))return;N(this,Fe,Ax).call(this,{highlightOutlines:d(this,ar).getNewOutline(n/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},iE=function(){d(this,Ls)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Ls)),E(this,Ls,null),this.parent.drawLayer.remove(d(this,On)),E(this,On,null))},yc=function(n=this.parent){d(this,Ls)===null&&({id:rn(this,Ls)._,clipPathId:rn(this,Nu)._}=n.drawLayer.draw({bbox:d(this,ar).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Ho)},rootClass:{highlight:!0,free:d(this,Cn)},path:{d:d(this,ar).toSVGPath()}},!1,!0),E(this,On,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Cn)},bbox:d(this,ms).box,path:{d:d(this,ms).toSVGPath()}},d(this,Cn))),d(this,Pu)&&(d(this,Pu).style.clipPath=d(this,Nu)))},fr=new WeakSet,Ud=function([n,s,r,i],o){switch(o){case 90:return[1-s-i,n,i,r];case 180:return[1-n-r,1-s-i,r,i];case 270:return[s,1-n-r,i,r]}return[n,s,r,i]},R4=function(n){Ze._keyboardManager.exec(this,n)},Rx=function(n){if(!d(this,Sh))return;const s=window.getSelection();n?s.setPosition(d(this,Sh),d(this,Sy)):s.setPosition(d(this,_y),d(this,Ey))},im=function(){return d(this,Cn)?this.rotation:0},N4=function(){if(d(this,Cn))return null;const[n,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=d(this,zo),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:p,height:g}of o){const y=c*n+r,x=(1-u)*s+i;a[l]=a[l+4]=y,a[l+1]=a[l+3]=x,a[l+2]=a[l+6]=y+p*n,a[l+5]=a[l+7]=x-g*s,l+=8}return a},P4=function(n){return d(this,ar).serialize(n,N(this,Fe,im).call(this))},M4=function(n,s){this._freeHighlight.add(s)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},k4=function(n,s){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},I4=function(n){const{color:s}=this._initialData;return n.color.some((r,i)=>r!==s[i])},R(Ze,fr),Z(Ze,"_defaultColor",null),Z(Ze,"_defaultOpacity",1),Z(Ze,"_defaultThickness",12),Z(Ze,"_type","highlight"),Z(Ze,"_editorType",ke.HIGHLIGHT),Z(Ze,"_freeHighlightId",-1),Z(Ze,"_freeHighlight",null),Z(Ze,"_freeHighlightClipId","");let j0=Ze;var Mu;class D4{constructor(){R(this,Mu,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,s]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(e,n){d(this,Mu)[e]=n}toSVGProperties(){const e=d(this,Mu);return E(this,Mu,Object.create(null)),{root:e}}reset(){E(this,Mu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){dt("Not implemented")}}Mu=new WeakMap;var Fs,Eh,ln,ku,Iu,El,Tl,Al,Du,Je,oE,aE,lE,om,L4,Nx,am,Vd;const me=class me extends mt{constructor(n){super(n);R(this,Je);R(this,Fs,null);R(this,Eh);Z(this,"_drawId",null);E(this,Eh,n.mustBeCommitted||!1),this._addOutlines(n)}_addOutlines(n){n.drawOutlines&&(N(this,Je,oE).call(this,n),N(this,Je,om).call(this))}static _mergeSVGProperties(n,s){const r=new Set(Object.keys(n));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(n[i],o):n[i]=o;return n}static getDefaultDrawingOptions(n){dt("Not implemented")}static get typesMap(){dt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,s){const r=this.typesMap.get(n);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(d(me,ln).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,s){const r=this.constructor.typesMap.get(n);r&&this._updateProperty(n,r,s)}static get defaultPropertiesToUpdate(){const n=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)n.push([r,s[i]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)n.push([r,s[i]]);return n}_updateProperty(n,s,r){const i=this._drawingOptions,o=i[s],a=l=>{var u;i.updateProperty(s,l);const c=d(this,Fs).updateProperty(s,l);c&&N(this,Je,am).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Fs).getPathResizingSVGProperties(N(this,Je,Nx).call(this)),{bbox:N(this,Je,Vd).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Fs).getPathResizedSVGProperties(N(this,Je,Nx).call(this)),{bbox:N(this,Je,Vd).call(this)}))}_onTranslating(n,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:N(this,Je,Vd).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Fs).getPathTranslatedSVGProperties(N(this,Je,Nx).call(this),this.parentDimensions),{bbox:N(this,Je,Vd).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Eh)&&(E(this,Eh,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){N(this,Je,lE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,Je,om).call(this),N(this,Je,am).call(this,d(this,Fs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var r;let s=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),N(this,Je,lE).call(this)):n&&(this._uiManager.addShouldRescale(this),N(this,Je,om).call(this,n),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(n),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties({bbox:N(this,Je,Vd).call(this)},d(this,Fs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&N(this,Je,am).call(this,d(this,Fs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,s;this._isCopy&&(n=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,s),r}static createDrawerInstance(n,s,r,i,o){dt("Not implemented")}static startDrawing(n,s,r,i){var C;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=i;if(d(me,Tl)&&d(me,Tl)!==u)return;const{viewport:{rotation:p}}=n,{width:g,height:y}=o.getBoundingClientRect(),x=E(me,ku,new AbortController),v=n.combinedSignal(x);if(d(me,El)||E(me,El,c),d(me,Tl)??E(me,Tl,u),window.addEventListener("pointerup",w=>{var S;d(me,El)===w.pointerId?this._endDraw(w):(S=d(me,Al))==null||S.delete(w.pointerId)},{signal:v}),window.addEventListener("pointercancel",w=>{var S;d(me,El)===w.pointerId?this._currentParent.endDrawingSession():(S=d(me,Al))==null||S.delete(w.pointerId)},{signal:v}),window.addEventListener("pointerdown",w=>{d(me,Tl)===w.pointerType&&((d(me,Al)||E(me,Al,new Set)).add(w.pointerId),d(me,ln).isCancellable()&&(d(me,ln).removeLastElement(),d(me,ln).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ii,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",w=>{w.timeStamp===d(me,Du)&&Gt(w)},{signal:v}),n.toggleDrawing(),(C=s._editorUndoBar)==null||C.hide(),d(me,ln)){n.drawLayer.updateProperties(this._currentDrawId,d(me,ln).startNew(a,l,g,y,p));return}s.updateUIForDefaultProperties(this),E(me,ln,this.createDrawerInstance(a,l,g,y,p)),E(me,Iu,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(d(me,Iu).toSVGProperties(),d(me,ln).defaultSVGProperties),!0,!1)}static _drawMove(n){var o;if(E(me,Du,-1),!d(me,ln))return;const{offsetX:s,offsetY:r,pointerId:i}=n;if(d(me,El)===i){if(((o=d(me,Al))==null?void 0:o.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(me,ln).add(s,r)),E(me,Du,n.timeStamp),Gt(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,E(me,ln,null),E(me,Iu,null),E(me,Tl,null),E(me,Du,NaN)),d(me,ku)&&(d(me,ku).abort(),E(me,ku,null),E(me,El,NaN),E(me,Al,null))}static _endDraw(n){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,d(me,ln).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const r=d(me,ln),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:qe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(qe.DRAW_STEP),!d(me,ln).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(me,ln).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:d(me,Iu),mustBeCommitted:!n});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,s,r,i,o,a){dt("Not implemented")}static async deserialize(n,s,r){var p,g;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=s.viewport,c=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,n),u=await super.deserialize(n,s,r);return u.createDrawingOptions(n),N(p=u,Je,oE).call(p,{drawOutlines:c}),N(g=u,Je,om).call(g),u.onScaleChanging(),u.rotate(),u}serializeDraw(n){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return d(this,Fs).serialize([s,r,i,o],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fs=new WeakMap,Eh=new WeakMap,ln=new WeakMap,ku=new WeakMap,Iu=new WeakMap,El=new WeakMap,Tl=new WeakMap,Al=new WeakMap,Du=new WeakMap,Je=new WeakSet,oE=function({drawOutlines:n,drawId:s,drawingOptions:r}){E(this,Fs,n),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,n.defaultProperties)):this._drawId=N(this,Je,aE).call(this,n,this.parent),N(this,Je,am).call(this,n.box)},aE=function(n,s){const{id:r}=s.drawLayer.draw(me._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return r},lE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},om=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=N(this,Je,aE).call(this,d(this,Fs),n)}},L4=function([n,s,r,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-n,r*(a/o),i*(o/a)];case 180:return[1-n,1-s,r,i];case 270:return[1-s,n,r*(a/o),i*(o/a)];default:return[n,s,r,i]}},Nx=function(){const{x:n,y:s,width:r,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,n,r*(o/a),i*(a/o)];case 180:return[1-n,1-s,r,i];case 270:return[s,1-n,r*(o/a),i*(a/o)];default:return[n,s,r,i]}},am=function(n){if([this.x,this.y,this.width,this.height]=N(this,Je,L4).call(this,n),this.div){this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)}this._onResized()},Vd=function(){const{x:n,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-s-i,n,i,r];case 2:return[1-n-r,1-s-i,r,i];case 3:return[s,1-n-r,i,r];case 4:return[n,s-r*(l/c),i*(c/l),r*(l/c)];case 5:return[1-s,n,r*(l/c),i*(c/l)];case 6:return[1-n-i*(c/l),1-s,i*(c/l),r*(l/c)];case 7:return[s-r*(l/c),1-n-i*(c/l),r*(l/c),i*(c/l)];case 8:return[n-r,s-i,r,i];case 9:return[1-s,n-r,i,r];case 10:return[1-n,1-s,r,i];case 11:return[s-i,1-n,i,r];case 12:return[n-i*(c/l),s,i*(c/l),r*(l/c)];case 13:return[1-s-r*(l/c),n-i*(c/l),r*(l/c),i*(c/l)];case 14:return[1-n,1-s-r*(l/c),i*(c/l),r*(l/c)];case 15:return[s,1-n,r*(l/c),i*(c/l)];default:return[n,s,r,i]}},Z(me,"_currentDrawId",-1),Z(me,"_currentParent",null),R(me,ln,null),R(me,ku,null),R(me,Iu,null),R(me,El,NaN),R(me,Tl,null),R(me,Al,null),R(me,Du,NaN),Z(me,"_INNER_MARGIN",3);let z0=me;var Ii,cn,un,Lu,Th,Gn,Sn,cr,Fu,Ou,Uu,Ah,Px;class VJ{constructor(e,n,s,r,i,o){R(this,Ah);R(this,Ii,new Float64Array(6));R(this,cn);R(this,un);R(this,Lu);R(this,Th);R(this,Gn);R(this,Sn,"");R(this,cr,0);R(this,Fu,new Qy);R(this,Ou);R(this,Uu);E(this,Ou,s),E(this,Uu,r),E(this,Lu,i),E(this,Th,o),[e,n]=N(this,Ah,Px).call(this,e,n);const a=E(this,cn,[NaN,NaN,NaN,NaN,e,n]);E(this,Gn,[e,n]),E(this,un,[{line:a,points:d(this,Gn)}]),d(this,Ii).set(a,0)}updateProperty(e,n){e==="stroke-width"&&E(this,Th,n)}isEmpty(){return!d(this,un)||d(this,un).length===0}isCancellable(){return d(this,Gn).length<=10}add(e,n){[e,n]=N(this,Ah,Px).call(this,e,n);const[s,r,i,o]=d(this,Ii).subarray(2,6),a=e-i,l=n-o;return Math.hypot(d(this,Ou)*a,d(this,Uu)*l)<=2?null:(d(this,Gn).push(e,n),isNaN(s)?(d(this,Ii).set([i,o,e,n],2),d(this,cn).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(d(this,Ii)[0])&&d(this,cn).splice(6,6),d(this,Ii).set([s,r,i,o,e,n],0),d(this,cn).push(...fe.createBezierPoints(s,r,i,o,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const s=this.add(e,n);return s||(d(this,Gn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,s,r,i){E(this,Ou,s),E(this,Uu,r),E(this,Lu,i),[e,n]=N(this,Ah,Px).call(this,e,n);const o=E(this,cn,[NaN,NaN,NaN,NaN,e,n]);E(this,Gn,[e,n]);const a=d(this,un).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,un).push({line:o,points:d(this,Gn)}),d(this,Ii).set(o,0),E(this,cr,0),this.toSVGPath(),null}getLastElement(){return d(this,un).at(-1)}setLastElement(e){return d(this,un)?(d(this,un).push(e),E(this,cn,e.line),E(this,Gn,e.points),E(this,cr,0),{path:{d:this.toSVGPath()}}):d(this,Fu).setLastElement(e)}removeLastElement(){if(!d(this,un))return d(this,Fu).removeLastElement();d(this,un).pop(),E(this,Sn,"");for(let e=0,n=d(this,un).length;e<n;e++){const{line:s,points:r}=d(this,un)[e];E(this,cn,s),E(this,Gn,r),E(this,cr,0),this.toSVGPath()}return{path:{d:d(this,Sn)}}}toSVGPath(){const e=fe.svgRound(d(this,cn)[4]),n=fe.svgRound(d(this,cn)[5]);if(d(this,Gn).length===2)return E(this,Sn,`${d(this,Sn)} M ${e} ${n} Z`),d(this,Sn);if(d(this,Gn).length<=6){const r=d(this,Sn).lastIndexOf("M");E(this,Sn,`${d(this,Sn).slice(0,r)} M ${e} ${n}`),E(this,cr,6)}if(d(this,Gn).length===4){const r=fe.svgRound(d(this,cn)[10]),i=fe.svgRound(d(this,cn)[11]);return E(this,Sn,`${d(this,Sn)} L ${r} ${i}`),E(this,cr,12),d(this,Sn)}const s=[];d(this,cr)===0&&(s.push(`M ${e} ${n}`),E(this,cr,6));for(let r=d(this,cr),i=d(this,cn).length;r<i;r+=6){const[o,a,l,c,u,p]=d(this,cn).slice(r,r+6).map(fe.svgRound);s.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}return E(this,Sn,d(this,Sn)+s.join(" ")),E(this,cr,d(this,cn).length),d(this,Sn)}getOutlines(e,n,s,r){const i=d(this,un).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),d(this,Fu).build(d(this,un),e,n,s,d(this,Lu),d(this,Th),r),E(this,Ii,null),E(this,cn,null),E(this,un,null),E(this,Sn,null),d(this,Fu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ii=new WeakMap,cn=new WeakMap,un=new WeakMap,Lu=new WeakMap,Th=new WeakMap,Gn=new WeakMap,Sn=new WeakMap,cr=new WeakMap,Fu=new WeakMap,Ou=new WeakMap,Uu=new WeakMap,Ah=new WeakSet,Px=function(e,n){return fe._normalizePoint(e,n,d(this,Ou),d(this,Uu),d(this,Lu))};var qn,Ay,Ry,Os,Di,Li,Rh,Nh,Vu,En,ho,F4,O4,U4;class Qy extends fe{constructor(){super(...arguments);R(this,En);R(this,qn);R(this,Ay,0);R(this,Ry);R(this,Os);R(this,Di);R(this,Li);R(this,Rh);R(this,Nh);R(this,Vu)}build(n,s,r,i,o,a,l){E(this,Di,s),E(this,Li,r),E(this,Rh,i),E(this,Nh,o),E(this,Vu,a),E(this,Ry,l??0),E(this,Os,n),N(this,En,O4).call(this)}get thickness(){return d(this,Vu)}setLastElement(n){return d(this,Os).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Os).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:s}of d(this,Os)){if(n.push(`M${fe.svgRound(s[4])} ${fe.svgRound(s[5])}`),s.length===6){n.push("Z");continue}if(s.length===12&&isNaN(s[6])){n.push(`L${fe.svgRound(s[10])} ${fe.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,l,c,u,p]=s.subarray(r,r+6).map(fe.svgRound);n.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}}return n.join("")}serialize([n,s,r,i],o){const a=[],l=[],[c,u,p,g]=N(this,En,F4).call(this);let y,x,v,C,w,S,_,T,A;switch(d(this,Nh)){case 0:A=fe._rescale,y=n,x=s+i,v=r,C=-i,w=n+c*r,S=s+(1-u-g)*i,_=n+(c+p)*r,T=s+(1-u)*i;break;case 90:A=fe._rescaleAndSwap,y=n,x=s,v=r,C=i,w=n+u*r,S=s+c*i,_=n+(u+g)*r,T=s+(c+p)*i;break;case 180:A=fe._rescale,y=n+r,x=s,v=-r,C=i,w=n+(1-c-p)*r,S=s+u*i,_=n+(1-c)*r,T=s+(u+g)*i;break;case 270:A=fe._rescaleAndSwap,y=n+r,x=s+i,v=-r,C=-i,w=n+(1-u-g)*r,S=s+(1-c-p)*i,_=n+(1-u)*r,T=s+(1-c)*i;break}for(const{line:P,points:M}of d(this,Os))a.push(A(P,y,x,v,C,o?new Array(P.length):null)),l.push(A(M,y,x,v,C,o?new Array(M.length):null));return{lines:a,points:l,rect:[w,S,_,T]}}static deserialize(n,s,r,i,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const p=[];let g,y,x,v,C;switch(c){case 0:C=fe._rescale,g=-n/r,y=s/i+1,x=1/r,v=-1/i;break;case 90:C=fe._rescaleAndSwap,g=-s/i,y=-n/r,x=1/i,v=1/r;break;case 180:C=fe._rescale,g=n/r+1,y=-s/i,x=-1/r,v=1/i;break;case 270:C=fe._rescaleAndSwap,g=s/i+1,y=n/r+1,x=-1/i,v=-1/r;break}if(!a){a=[];for(const S of l){const _=S.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(_-2));a.push(T);let[A,P,M,I]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,A,P],0);for(let k=4;k<_;k+=2){const D=S[k],L=S[k+1];T.set(fe.createBezierPoints(A,P,M,I,D,L),(k-2)*3),[A,P,M,I]=[M,I,D,L]}}}for(let S=0,_=a.length;S<_;S++)p.push({line:C(a[S].map(T=>T??NaN),g,y,x,v),points:C(l[S].map(T=>T??NaN),g,y,x,v)});const w=new this.prototype.constructor;return w.build(p,r,i,1,c,u,o),w}get box(){return d(this,qn)}updateProperty(n,s){return n==="stroke-width"?N(this,En,U4).call(this,s):null}updateParentDimensions([n,s],r){const[i,o]=N(this,En,ho).call(this);E(this,Di,n),E(this,Li,s),E(this,Rh,r);const[a,l]=N(this,En,ho).call(this),c=a-i,u=l-o,p=d(this,qn);return p[0]-=c,p[1]-=u,p[2]+=2*c,p[3]+=2*u,p}updateRotation(n){return E(this,Ay,n),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,qn).map(fe.svgRound).join(" ")}get defaultProperties(){const[n,s]=d(this,qn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(n)} ${fe.svgRound(s)}`}}}get rotationTransform(){const[,,n,s]=d(this,qn);let r=0,i=0,o=0,a=0,l=0,c=0;switch(d(this,Ay)){case 90:i=s/n,o=-n/s,l=n;break;case 180:r=-1,a=-1,l=n,c=s;break;case 270:i=-s/n,o=n/s,c=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${fe.svgRound(l)} ${fe.svgRound(c)})`}getPathResizingSVGProperties([n,s,r,i]){const[o,a]=N(this,En,ho).call(this),[l,c,u,p]=d(this,qn);if(Math.abs(u-o)<=fe.PRECISION||Math.abs(p-a)<=fe.PRECISION){const C=n+r/2-(l+u/2),w=s+i/2-(c+p/2);return{path:{"transform-origin":`${fe.svgRound(n)} ${fe.svgRound(s)}`,transform:`${this.rotationTransform} translate(${C} ${w})`}}}const g=(r-2*o)/(u-2*o),y=(i-2*a)/(p-2*a),x=u/r,v=p/i;return{path:{"transform-origin":`${fe.svgRound(l)} ${fe.svgRound(c)}`,transform:`${this.rotationTransform} scale(${x} ${v}) translate(${fe.svgRound(o)} ${fe.svgRound(a)}) scale(${g} ${y}) translate(${fe.svgRound(-o)} ${fe.svgRound(-a)})`}}}getPathResizedSVGProperties([n,s,r,i]){const[o,a]=N(this,En,ho).call(this),l=d(this,qn),[c,u,p,g]=l;if(l[0]=n,l[1]=s,l[2]=r,l[3]=i,Math.abs(p-o)<=fe.PRECISION||Math.abs(g-a)<=fe.PRECISION){const w=n+r/2-(c+p/2),S=s+i/2-(u+g/2);for(const{line:_,points:T}of d(this,Os))fe._translate(_,w,S,_),fe._translate(T,w,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(n)} ${fe.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(r-2*o)/(p-2*o),x=(i-2*a)/(g-2*a),v=-y*(c+o)+n+o,C=-x*(u+a)+s+a;if(y!==1||x!==1||v!==0||C!==0)for(const{line:w,points:S}of d(this,Os))fe._rescale(w,v,C,y,x,w),fe._rescale(S,v,C,y,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(n)} ${fe.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,s],r){const[i,o]=r,a=d(this,qn),l=n-a[0],c=s-a[1];if(d(this,Di)===i&&d(this,Li)===o)for(const{line:u,points:p}of d(this,Os))fe._translate(u,l,c,u),fe._translate(p,l,c,p);else{const u=d(this,Di)/i,p=d(this,Li)/o;E(this,Di,i),E(this,Li,o);for(const{line:g,points:y}of d(this,Os))fe._rescale(g,l,c,u,p,g),fe._rescale(y,l,c,u,p,y);a[2]*=u,a[3]*=p}return a[0]=n,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(n)} ${fe.svgRound(s)}`}}}get defaultSVGProperties(){const n=d(this,qn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(n[0])} ${fe.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}qn=new WeakMap,Ay=new WeakMap,Ry=new WeakMap,Os=new WeakMap,Di=new WeakMap,Li=new WeakMap,Rh=new WeakMap,Nh=new WeakMap,Vu=new WeakMap,En=new WeakSet,ho=function(n=d(this,Vu)){const s=d(this,Ry)+n/2*d(this,Rh);return d(this,Nh)%180===0?[s/d(this,Di),s/d(this,Li)]:[s/d(this,Li),s/d(this,Di)]},F4=function(){const[n,s,r,i]=d(this,qn),[o,a]=N(this,En,ho).call(this,0);return[n+o,s+a,r-2*o,i-2*a]},O4=function(){const n=E(this,qn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of d(this,Os)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)be.pointBoundingBox(i[l],i[l+1],n);continue}let o=i[4],a=i[5];for(let l=6,c=i.length;l<c;l+=6){const[u,p,g,y,x,v]=i.subarray(l,l+6);be.bezierBoundingBox(o,a,u,p,g,y,x,v,n),o=x,a=v}}const[s,r]=N(this,En,ho).call(this);n[0]=Yn(n[0]-s,0,1),n[1]=Yn(n[1]-r,0,1),n[2]=Yn(n[2]+s,0,1),n[3]=Yn(n[3]+r,0,1),n[2]-=n[0],n[3]-=n[1]},U4=function(n){const[s,r]=N(this,En,ho).call(this);E(this,Vu,n);const[i,o]=N(this,En,ho).call(this),[a,l]=[i-s,o-r],c=d(this,qn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class cC extends D4{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:mt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new cC(this._viewParameters);return e.updateAll(this),e}}var uw,V4;const nf=class nf extends z0{constructor(n){super({...n,name:"inkEditor"});R(this,uw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,s){mt.initialize(n,s),this._defaultDrawingOptions=new cC(s.viewParameters)}static getDefaultDrawingOptions(n){const s=this._defaultDrawingOptions.clone();return s.updateProperties(n),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return He(this,"typesMap",new Map([[qe.INK_THICKNESS,"stroke-width"],[qe.INK_COLOR,"stroke"],[qe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,s,r,i,o){return new VJ(n,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,s,r,i,o,a){return Qy.deserialize(n,s,r,i,o,a)}static async deserialize(n,s,r){let i=null;if(n instanceof JA){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:p,opacity:g,borderStyle:{rawWidth:y},popupRef:x},parent:{page:{pageNumber:v}}}=n;i=n={annotationType:ke.INK,color:Array.from(p),thickness:y,opacity:g,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:x}}const o=await super.deserialize(n,s,r);return o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(n,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:s,opacity:r}){this._drawingOptions=nf.getDefaultDrawingOptions({stroke:be.makeHexColor(...n),"stroke-width":s,"stroke-opacity":r})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r,rect:i}=this.serializeDraw(n),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:ke.INK,color:mt._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:s,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(c.isCopy=!0,c):this.annotationElementId&&!N(this,uw,V4).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(n){const{points:s,rect:r}=this.serializeDraw(!1);return n.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s}),null}};uw=new WeakSet,V4=function(n){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((a,l)=>a!==s[l])||n.thickness!==r||n.opacity!==i||n.pageIndex!==o},Z(nf,"_type","ink"),Z(nf,"_editorType",ke.INK),Z(nf,"_defaultDrawingOptions",null);let cE=nf;class uE extends Qy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Fv=8,Ip=3;var $u,nt,dE,Hr,$4,B4,fE,Mx,j4,z4,H4,hE,pE,G4;class ta{static extractContoursFromText(e,{fontFamily:n,fontStyle:s,fontWeight:r},i,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const p=200,g=u.font=`${s} ${r} ${p}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:x,actualBoundingBoxAscent:v,actualBoundingBoxDescent:C,fontBoundingBoxAscent:w,fontBoundingBoxDescent:S,width:_}=u.measureText(e),T=1.5,A=Math.ceil(Math.max(Math.abs(y)+Math.abs(x)||0,_)*T),P=Math.ceil(Math.max(Math.abs(v)+Math.abs(C)||p,Math.abs(w)+Math.abs(S)||p)*T);c=new OffscreenCanvas(A,P),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=g,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,A,P),u.fillStyle="black",u.fillText(e,A*(T-1)/2,P*(3-T)/2);const M=N(this,nt,hE).call(this,u.getImageData(0,0,A,P).data),I=N(this,nt,H4).call(this,M),k=N(this,nt,pE).call(this,I),D=N(this,nt,fE).call(this,M,A,P,k);return this.processDrawnLines({lines:{curves:D,width:A,height:P},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,n,s,r,i){const[o,a,l]=N(this,nt,G4).call(this,e),[c,u]=N(this,nt,z4).call(this,o,a,l,Math.hypot(a,l)*d(this,$u).sigmaSFactor,d(this,$u).sigmaR,d(this,$u).kernelSize),p=N(this,nt,pE).call(this,u),g=N(this,nt,fE).call(this,c,a,l,p);return this.processDrawnLines({lines:{curves:g,width:a,height:l},pageWidth:n,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([n,s]=[s,n]);const{curves:l,width:c,height:u}=e,p=e.thickness??0,g=[],y=Math.min(n/c,s/u),x=y/n,v=y/s,C=[];for(const{points:S}of l){const _=o?N(this,nt,j4).call(this,S):S;if(!_)continue;C.push(_);const T=_.length,A=new Float32Array(T),P=new Float32Array(3*(T===2?2:T-2));if(g.push({line:P,points:A}),T===2){A[0]=_[0]*x,A[1]=_[1]*v,P.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[M,I,k,D]=_;M*=x,I*=v,k*=x,D*=v,A.set([M,I,k,D],0),P.set([NaN,NaN,NaN,NaN,M,I],0);for(let L=4;L<T;L+=2){const U=A[L]=_[L]*x,G=A[L+1]=_[L+1]*v;P.set(fe.createBezierPoints(M,I,k,D,U,G),(L-2)*3),[M,I,k,D]=[k,D,U,G]}}if(g.length===0)return null;const w=a?new uE:new Qy;return w.build(g,n,s,1,r,a?0:p,i),{outline:w,newCurves:C,areContours:a,thickness:p,width:c,height:u}}static async compressSignature({outlines:e,areContours:n,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,l=0;for(const _ of e){l+=_.length;for(let T=2,A=_.length;T<A;T++){const P=_[T]-_[T-2];o=Math.min(o,P),a=Math.max(a,P)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,p=Fv+Ip*u,g=new Uint32Array(p);let y=0;g[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=r,g[y++]=i,g[y++]=n?0:1,g[y++]=Math.max(0,Math.floor(s??0)),g[y++]=u,g[y++]=c.BYTES_PER_ELEMENT;for(const _ of e)g[y++]=_.length-2,g[y++]=_[0],g[y++]=_[1];const x=new CompressionStream("deflate-raw"),v=x.writable.getWriter();await v.ready,v.write(g);const C=c.prototype.constructor;for(const _ of e){const T=new C(_.length-2);for(let A=2,P=_.length;A<P;A++)T[A-2]=_[A]-_[A-2];v.write(T)}v.close();const w=await new Response(x.readable).arrayBuffer(),S=new Uint8Array(w);return GU(S)}static async decompressSignature(e){try{const n=cY(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(n).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const _ of s)o||(o=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),o.set(_,a),a+=_.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],p=l[3],g=l[4]===0,y=l[5],x=l[6],v=l[7],C=[],w=(Fv+Ip*x)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(v){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(o.buffer,w);break}a=0;for(let _=0;_<x;_++){const T=l[Ip*_+Fv],A=new Float32Array(T+2);C.push(A);for(let P=0;P<Ip-1;P++)A[P]=l[Ip*_+Fv+P+1];for(let P=0;P<T;P++)A[P+2]=A[P]+S[a++]}return{areContours:g,thickness:y,outlines:C,width:u,height:p}}catch(n){return Ie(`decompressSignature: ${n}`),null}}}$u=new WeakMap,nt=new WeakSet,dE=function(e,n,s,r){return s-=e,r-=n,s===0?r>0?0:4:s===1?r+6:2-r},Hr=new WeakMap,$4=function(e,n,s,r,i,o,a){const l=N(this,nt,dE).call(this,s,r,i,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,p=d(this,Hr)[2*u],g=d(this,Hr)[2*u+1];if(e[(s+p)*n+(r+g)]!==0)return u}return-1},B4=function(e,n,s,r,i,o,a){const l=N(this,nt,dE).call(this,s,r,i,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,p=d(this,Hr)[2*u],g=d(this,Hr)[2*u+1];if(e[(s+p)*n+(r+g)]!==0)return u}return-1},fE=function(e,n,s,r){const i=e.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=e[u]<=r?1:0;for(let u=1;u<s-1;u++)o[u*n]=o[u*n+n-1]=0;for(let u=0;u<n;u++)o[u]=o[n*s-1-u]=0;let a=1,l;const c=[];for(let u=1;u<s-1;u++){l=1;for(let p=1;p<n-1;p++){const g=u*n+p,y=o[g];if(y===0)continue;let x=u,v=p;if(y===1&&o[g-1]===0)a+=1,v-=1;else if(y>=1&&o[g+1]===0)a+=1,v+=1,y>1&&(l=y);else{y!==1&&(l=Math.abs(y));continue}const C=[p,u],w=v===p+1,S={isHole:w,points:C,id:a,parent:0};c.push(S);let _;for(const L of c)if(L.id===l){_=L;break}_?_.isHole?S.parent=w?_.parent:l:S.parent=w?l:_.parent:S.parent=w?l:0;const T=N(this,nt,$4).call(this,o,n,u,p,x,v,0);if(T===-1){o[g]=-a,o[g]!==1&&(l=Math.abs(o[g]));continue}let A=d(this,Hr)[2*T],P=d(this,Hr)[2*T+1];const M=u+A,I=p+P;x=M,v=I;let k=u,D=p;for(;;){const L=N(this,nt,B4).call(this,o,n,k,D,x,v,1);A=d(this,Hr)[2*L],P=d(this,Hr)[2*L+1];const U=k+A,G=D+P;C.push(G,U);const O=k*n+D;if(o[O+1]===0?o[O]=-a:o[O]===1&&(o[O]=a),U===u&&G===p&&k===M&&D===I){o[g]!==1&&(l=Math.abs(o[g]));break}else x=k,v=D,k=U,D=G}}}return c},Mx=function(e,n,s,r){if(s-n<=4){for(let M=n;M<s-2;M+=2)r.push(e[M],e[M+1]);return}const i=e[n],o=e[n+1],a=e[s-4]-i,l=e[s-3]-o,c=Math.hypot(a,l),u=a/c,p=l/c,g=u*o-p*i,y=l/a,x=1/c,v=Math.atan(y),C=Math.cos(v),w=Math.sin(v),S=x*(Math.abs(C)+Math.abs(w)),_=x*(1-S+S**2),T=Math.max(Math.atan(Math.abs(w+C)*_),Math.atan(Math.abs(w-C)*_));let A=0,P=n;for(let M=n+2;M<s-2;M+=2){const I=Math.abs(g-u*e[M+1]+p*e[M]);I>A&&(P=M,A=I)}A>(c*T)**2?(N(this,nt,Mx).call(this,e,n,P+2,r),N(this,nt,Mx).call(this,e,P,s,r)):r.push(i,o)},j4=function(e){const n=[],s=e.length;return N(this,nt,Mx).call(this,e,0,s,n),n.push(e[s-2],e[s-1]),n.length<=4?null:n},z4=function(e,n,s,r,i,o){const a=new Float32Array(o**2),l=-2*r**2,c=o>>1;for(let v=0;v<o;v++){const C=(v-c)**2;for(let w=0;w<o;w++)a[v*o+w]=Math.exp((C+(w-c)**2)/l)}const u=new Float32Array(256),p=-2*i**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/p);const g=e.length,y=new Uint8Array(g),x=new Uint32Array(256);for(let v=0;v<s;v++)for(let C=0;C<n;C++){const w=v*n+C,S=e[w];let _=0,T=0;for(let P=0;P<o;P++){const M=v+P-c;if(!(M<0||M>=s))for(let I=0;I<o;I++){const k=C+I-c;if(k<0||k>=n)continue;const D=e[M*n+k],L=a[P*o+I]*u[Math.abs(D-S)];_+=D*L,T+=L}}const A=y[w]=Math.round(_/T);x[A]++}return[y,x]},H4=function(e){const n=new Uint32Array(256);for(const s of e)n[s]++;return n},hE=function(e){const n=e.length,s=new Uint8ClampedArray(n>>2);let r=-1/0,i=1/0;for(let a=0,l=s.length;a<l;a++){if(e[(a<<2)+3]===0){r=s[a]=255;continue}const u=s[a]=e[a<<2];u>r&&(r=u),u<i&&(i=u)}const o=255/(r-i);for(let a=0;a<n;a++)s[a]=(s[a]-i)*o;return s},pE=function(e){let n,s=-1/0,r=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(n=i;n<256;n++){const l=e[n];l>s&&(n-o>r&&(r=n-o,a=n-1),s=l,o=n)}for(n=a-1;n>=0&&!(e[n]>e[n+1]);n--);return n},G4=function(e){const n=e,{width:s,height:r}=e,{maxDim:i}=d(this,$u);let o=s,a=r;if(s>i||r>i){let g=s,y=r,x=Math.log2(Math.max(s,r)/i);const v=Math.floor(x);x=x===v?v-1:v;for(let w=0;w<x;w++){o=Math.ceil(g/2),a=Math.ceil(y/2);const S=new OffscreenCanvas(o,a);S.getContext("2d").drawImage(e,0,0,g,y,0,0,o,a),g=o,y=a,e!==n&&e.close(),e=S.transferToImageBitmap()}const C=Math.min(i/o,i/a);o=Math.round(o*C),a=Math.round(a*C)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[N(this,nt,hE).call(this,u),o,a]},R(ta,nt),R(ta,$u,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),R(ta,Hr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class XA extends D4{constructor(){super(),super.updateProperties({fill:mt._defaultLineColor,"stroke-width":0})}clone(){const e=new XA;return e.updateAll(this),e}}class QA extends cC{constructor(e){super(e),super.updateProperties({stroke:mt._defaultLineColor,"stroke-width":1})}clone(){const e=new QA(this._viewParameters);return e.updateAll(this),e}}var Rl,Fi,Nl,Bu;const Es=class Es extends z0{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});R(this,Rl,!1);R(this,Fi,null);R(this,Nl,null);R(this,Bu,null);this._willKeepAspectRatio=!0,E(this,Nl,n.signatureData||null),E(this,Fi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,s){mt.initialize(n,s),this._defaultDrawingOptions=new XA,this._defaultDrawnSignatureOptions=new QA(s.viewParameters)}static getDefaultDrawingOptions(n){const s=this._defaultDrawingOptions.clone();return s.updateProperties(n),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return He(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Fi)}}static computeTelemetryFinalData(n){const s=n.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,n=this.x,s=this.y),super.render(),this._drawId===null)if(d(this,Nl)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=d(this,Nl),{rawDims:{pageWidth:p,pageHeight:g},rotation:y}=this.parent.viewport,x=ta.processDrawnLines({lines:i,pageWidth:p,pageHeight:g,rotation:y,innerMargin:Es._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(x,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(n,s)),this.div}setUuid(n){E(this,Bu,n),this.addEditToolbar()}getUuid(){return d(this,Bu)}get description(){return d(this,Fi)}set description(n){E(this,Fi,n),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(n)})}getSignaturePreview(){const{newCurves:n,areContours:s,thickness:r,width:i,height:o}=d(this,Nl),a=Math.max(i,o),l=ta.processDrawnLines({lines:{curves:n.map(c=>({points:c})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,s,r,i){const{x:o,y:a}=this,{outline:l}=E(this,Nl,n);E(this,Rl,l instanceof uE),this.description=r,this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let c;d(this,Rl)?c=Es.getDefaultDrawingOptions():(c=Es._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,p]=this.parentDimensions,[,g]=this.pageDimensions;let y=s/g;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(u*this.width,p*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return ta.process(n,s,r,i,Es._INNER_MARGIN)}getFromText(n,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return ta.extractContoursFromText(n,s,r,i,o,Es._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return ta.processDrawnLines({lines:n,pageWidth:s,pageHeight:r,rotation:i,innerMargin:Es._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:s}){n?this._drawingOptions=Es.getDefaultDrawingOptions():(this._drawingOptions=Es._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:s,points:r,rect:i}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:ke.SIGNATURE,isSignature:!0,areContours:d(this,Rl),color:[0,0,0],thickness:d(this,Rl)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(a.paths={lines:s,points:r},a.uuid=d(this,Bu),a.isCopy=!0):a.lines=s,d(this,Fi)&&(a.accessibilityData={type:"Figure",alt:d(this,Fi)}),a}static deserializeDraw(n,s,r,i,o,a){return a.areContours?uE.deserialize(n,s,r,i,o,a):Qy.deserialize(n,s,r,i,o,a)}static async deserialize(n,s,r){var o;const i=await super.deserialize(n,s,r);return E(i,Rl,n.areContours),E(i,Fi,((o=n.accessibilityData)==null?void 0:o.alt)||""),E(i,Bu,n.uuid),i}};Rl=new WeakMap,Fi=new WeakMap,Nl=new WeakMap,Bu=new WeakMap,Z(Es,"_type","signature"),Z(Es,"_editorType",ke.SIGNATURE),Z(Es,"_defaultDrawingOptions",null);let mE=Es;var bt,dn,Pl,Go,Ml,Ph,qo,ju,Oi,Us,Mh,Xe,lm,cm,kx,Ix,Dx,yE,Lx,q4;class gE extends mt{constructor(n){super({...n,name:"stampEditor"});R(this,Xe);R(this,bt,null);R(this,dn,null);R(this,Pl,null);R(this,Go,null);R(this,Ml,null);R(this,Ph,"");R(this,qo,null);R(this,ju,!1);R(this,Oi,null);R(this,Us,!1);R(this,Mh,!1);E(this,Go,n.bitmapUrl),E(this,Ml,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,s){mt.initialize(n,s)}static isHandlingMimeForPasting(n){return c_.includes(n)}static paste(n,s){s.pasteEditor({mode:ke.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const s=n.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(n=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=n||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var n;d(this,dn)&&(E(this,bt,null),this._uiManager.imageManager.deleteId(d(this,dn)),(n=d(this,qo))==null||n.remove(),E(this,qo,null),d(this,Oi)&&(clearTimeout(d(this,Oi)),E(this,Oi,null))),super.remove()}rebuild(){if(!this.parent){d(this,dn)&&N(this,Xe,kx).call(this);return}super.rebuild(),this.div!==null&&(d(this,dn)&&d(this,qo)===null&&N(this,Xe,kx).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(d(this,Pl)||d(this,bt)||d(this,Go)||d(this,Ml)||d(this,dn)||d(this,ju))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,s;return this._isCopy&&(n=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,ju)||(d(this,bt)?N(this,Xe,Ix).call(this):N(this,Xe,kx).call(this)),this._isCopy&&this._moveAfterPaste(n,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(n,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(E(this,dn,r),i&&E(this,bt,i),E(this,ju,!1),N(this,Xe,Ix).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Oi)!==null&&clearTimeout(d(this,Oi)),E(this,Oi,setTimeout(()=>{E(this,Oi,null),N(this,Xe,yE).call(this)},200))}copyCanvas(n,s,r=!1){var y;n||(n=224);const{width:i,height:o}=d(this,bt),a=new eo;let l=d(this,bt),c=i,u=o,p=null;if(s){if(i>s||o>s){const I=Math.min(s/i,s/o);c=Math.floor(i*I),u=Math.floor(o*I)}p=document.createElement("canvas");const x=p.width=Math.ceil(c*a.sx),v=p.height=Math.ceil(u*a.sy);d(this,Us)||(l=N(this,Xe,Dx).call(this,x,v));const C=p.getContext("2d");C.filter=this._uiManager.hcmFilter;let w="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(y=window.matchMedia)!=null&&y.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",S="#42414d");const _=15,T=_*a.sx,A=_*a.sy,P=new OffscreenCanvas(T*2,A*2),M=P.getContext("2d");M.fillStyle=w,M.fillRect(0,0,T*2,A*2),M.fillStyle=S,M.fillRect(0,0,T,A),M.fillRect(T,A,T,A),C.fillStyle=C.createPattern(P,"repeat"),C.fillRect(0,0,x,v),C.drawImage(l,0,0,l.width,l.height,0,0,x,v)}let g=null;if(r){let x,v;if(a.symmetric&&l.width<n&&l.height<n)x=l.width,v=l.height;else if(l=d(this,bt),i>n||o>n){const S=Math.min(n/i,n/o);x=Math.floor(i*S),v=Math.floor(o*S),d(this,Us)||(l=N(this,Xe,Dx).call(this,x,v))}const w=new OffscreenCanvas(x,v).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,x,v),g={width:x,height:v,data:w.getImageData(0,0,x,v).data}}return{canvas:p,width:c,height:u,imageData:g}}static async deserialize(n,s,r){var C;let i=null,o=!1;if(n instanceof a4){const{data:{rect:w,rotation:S,id:_,structParent:T,popupRef:A},container:P,parent:{page:{pageNumber:M}},canvas:I}=n;let k,D;I?(delete n.canvas,{id:k,bitmap:D}=r.imageManager.getFromCanvas(P.id,I),I.remove()):(o=!0,n._hasNoCanvas=!0);const L=((C=await s._structTree.getAriaAttributes(`${jA}${_}`))==null?void 0:C.get("aria-label"))||"";i=n={annotationType:ke.STAMP,bitmapId:k,bitmap:D,pageIndex:M-1,rect:w.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:T,popupRef:A}}const a=await super.deserialize(n,s,r),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:p,isSvg:g,accessibilityData:y}=n;o?(r.addMissingCanvas(n.id,a),E(a,ju,!0)):p&&r.imageManager.isValidId(p)?(E(a,dn,p),c&&E(a,bt,c)):E(a,Go,u),E(a,Us,g);const[x,v]=a.pageDimensions;return a.width=(l[2]-l[0])/x,a.height=(l[3]-l[1])/v,y&&(a.altTextData=y),a._initialData=i,E(a,Mh,!!i),a}serialize(n=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ke.STAMP,bitmapId:d(this,dn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Us),structTreeParentId:this._structTreeParentId};if(n)return r.bitmapUrl=N(this,Xe,Lx).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=N(this,Xe,q4).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const a=d(this,Us)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(d(this,dn)))s.stamps.set(d(this,dn),{area:a,serialized:r}),r.bitmap=N(this,Xe,Lx).call(this,!1);else if(d(this,Us)){const l=s.stamps.get(d(this,dn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=N(this,Xe,Lx).call(this,!1))}return r}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}}bt=new WeakMap,dn=new WeakMap,Pl=new WeakMap,Go=new WeakMap,Ml=new WeakMap,Ph=new WeakMap,qo=new WeakMap,ju=new WeakMap,Oi=new WeakMap,Us=new WeakMap,Mh=new WeakMap,Xe=new WeakSet,lm=function(n,s=!1){if(!n){this.remove();return}E(this,bt,n.bitmap),s||(E(this,dn,n.id),E(this,Us,n.isSvg)),n.file&&E(this,Ph,n.file.name),N(this,Xe,Ix).call(this)},cm=function(){if(E(this,Pl,null),this._uiManager.enableWaiting(!1),!!d(this,qo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,bt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,bt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},kx=function(){if(d(this,dn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,dn)).then(r=>N(this,Xe,lm).call(this,r,!0)).finally(()=>N(this,Xe,cm).call(this));return}if(d(this,Go)){const r=d(this,Go);E(this,Go,null),this._uiManager.enableWaiting(!0),E(this,Pl,this._uiManager.imageManager.getFromUrl(r).then(i=>N(this,Xe,lm).call(this,i)).finally(()=>N(this,Xe,cm).call(this)));return}if(d(this,Ml)){const r=d(this,Ml);E(this,Ml,null),this._uiManager.enableWaiting(!0),E(this,Pl,this._uiManager.imageManager.getFromFile(r).then(i=>N(this,Xe,lm).call(this,i)).finally(()=>N(this,Xe,cm).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=c_.join(",");const s=this._uiManager._signal;E(this,Pl,new Promise(r=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),N(this,Xe,lm).call(this,i)}r()},{signal:s}),n.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>N(this,Xe,cm).call(this))),n.click()},Ix=function(){var p;const{div:n}=this;let{width:s,height:r}=d(this,bt);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const g=Math.min(a*i/s,a*o/r);s*=g,r*=g}const[l,c]=this.parentDimensions;this.setDims(s*l/i,r*c/o),this._uiManager.enableWaiting(!1);const u=E(this,qo,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/i,this.height=r/o,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),N(this,Xe,yE).call(this),d(this,Mh)||(this.parent.addUndoableEditor(this),E(this,Mh,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Ph)&&this.div.setAttribute("aria-description",d(this,Ph)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Dx=function(n,s){const{width:r,height:i}=d(this,bt);let o=r,a=i,l=d(this,bt);for(;o>2*n||a>2*s;){const c=o,u=a;o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(o,a);p.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=p.transferToImageBitmap()}return l},yE=function(){const[n,s]=this.parentDimensions,{width:r,height:i}=this,o=new eo,a=Math.ceil(r*n*o.sx),l=Math.ceil(i*s*o.sy),c=d(this,qo);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=d(this,Us)?d(this,bt):N(this,Xe,Dx).call(this,a,l),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(u,0,0,u.width,u.height,0,0,a,l)},Lx=function(n){if(n){if(d(this,Us)){const i=this._uiManager.imageManager.getSvgUrl(d(this,dn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=d(this,bt),s.getContext("2d").drawImage(d(this,bt),0,0),s.toDataURL()}if(d(this,Us)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*nc.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*nc.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(d(this,bt),0,0,d(this,bt).width,d(this,bt).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(d(this,bt))},q4=function(n){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=n.pageIndex===s,o=(((a=n.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},Z(gE,"_type","stamp"),Z(gE,"_editorType",ke.STAMP);var zu,kh,Ui,kl,Wo,Vs,Il,Ih,Hu,Gr,Ko,fn,Yo,Dl,Dh,Ce,Ll,_t,W4,yi,xE,wE,Fx;const Mr=class Mr{constructor({uiManager:e,pageIndex:n,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){R(this,_t);R(this,zu);R(this,kh,!1);R(this,Ui,null);R(this,kl,null);R(this,Wo,null);R(this,Vs,new Map);R(this,Il,!1);R(this,Ih,!1);R(this,Hu,!1);R(this,Gr,null);R(this,Ko,null);R(this,fn,null);R(this,Yo,null);R(this,Dl,null);R(this,Dh,-1);R(this,Ce);const p=[...d(Mr,Ll).values()];if(!Mr._initialized){Mr._initialized=!0;for(const g of p)g.initialize(u,e)}e.registerEditorTypes(p),E(this,Ce,e),this.pageIndex=n,this.div=s,E(this,zu,i),E(this,Ui,o),this.viewport=c,E(this,fn,l),this.drawLayer=a,this._structTree=r,d(this,Ce).addLayer(this)}get isEmpty(){return d(this,Vs).size===0}get isInvisible(){return this.isEmpty&&d(this,Ce).getMode()===ke.NONE}updateToolbar(e){d(this,Ce).updateToolbar(e)}updateMode(e=d(this,Ce).getMode()){switch(N(this,_t,Fx).call(this),e){case ke.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ke.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ke.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const s of d(Mr,Ll).values())n.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=d(this,fn))==null?void 0:n.div)}setEditingState(e){d(this,Ce).setEditingState(e)}addCommands(e){d(this,Ce).addCommands(e)}cleanUndoStack(e){d(this,Ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=d(this,Ui))==null||n.div.classList.toggle("disabled",!e)}async enable(){var s;E(this,Hu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=d(this,Dl))==null||s.abort(),E(this,Dl,null);const e=new Set;for(const r of d(this,Vs).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(d(this,Ce).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!d(this,Ui)){E(this,Hu,!1);return}const n=d(this,Ui).getEditableAnnotations();for(const r of n){if(r.hide(),d(this,Ce).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}E(this,Hu,!1)}disable(){var r;if(E(this,Ih,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,fn)&&!d(this,Dl)){E(this,Dl,new AbortController);const i=d(this,Ce).combinedSignal(d(this,Dl));d(this,fn).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,p=d(this,Dh);if(u-p>500){E(this,Dh,u);return}E(this,Dh,-1);const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,c);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let x;const v=new RegExp(`^${$U}[0-9]+$`);for(const w of y)if(v.test(w.id)){x=w.id;break}if(!x)return;const C=d(this,Vs).get(x);(C==null?void 0:C.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),C.dblclick())},{signal:i,capture:!0})}const e=new Map,n=new Map;for(const i of d(this,Vs).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else n.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(d(this,Ui)){const i=d(this,Ui).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(d(this,Ce).isDeletedAnnotationElement(a))continue;let l=n.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(d(this,Ce).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}N(this,_t,Fx).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of d(Mr,Ll).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,Ih,!1)}getEditableAnnotation(e){var n;return((n=d(this,Ui))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,Ce).getActive()!==e&&d(this,Ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,fn))!=null&&e.div&&!d(this,Yo)){E(this,Yo,new AbortController);const n=d(this,Ce).combinedSignal(d(this,Yo));d(this,fn).div.addEventListener("pointerdown",N(this,_t,W4).bind(this),{signal:n}),d(this,fn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,fn))!=null&&e.div&&d(this,Yo)&&(d(this,Yo).abort(),E(this,Yo,null),d(this,fn).div.classList.remove("highlighting"))}enableClick(){if(d(this,kl))return;E(this,kl,new AbortController);const e=d(this,Ce).combinedSignal(d(this,kl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=d(this,kl))==null||e.abort(),E(this,kl,null)}attach(e){d(this,Vs).set(e.id,e);const{annotationElementId:n}=e;n&&d(this,Ce).isDeletedAnnotationElement(n)&&d(this,Ce).removeDeletedAnnotationElement(e)}detach(e){var n;d(this,Vs).delete(e.id),(n=d(this,zu))==null||n.removePointerInTextLayer(e.contentDiv),!d(this,Ih)&&e.annotationElementId&&d(this,Ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,Ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,Ce).addDeletedAnnotationElement(e.annotationElementId),mt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,Ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,Hu)),d(this,Ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!d(this,Wo)&&(e._focusEventsAllowed=!1,E(this,Wo,setTimeout(()=>{E(this,Wo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,Ce)._signal}),n.focus())},0))),e._structTreeParentId=(s=d(this,zu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getNextId(){return d(this,Ce).getId()}combinedSignal(e){return d(this,Ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,_t,yi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await d(this,Ce).updateMode(e.mode);const{offsetX:s,offsetY:r}=N(this,_t,wE).call(this),i=this.getNextId(),o=N(this,_t,xE).call(this,{parent:this,id:i,x:s,y:r,uiManager:d(this,Ce),isCentered:!0,...n});o&&this.add(o)}async deserialize(e){var n;return await((n=d(Mr,Ll).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,d(this,Ce)))||null}createAndAddNewEditor(e,n,s={}){const r=this.getNextId(),i=N(this,_t,xE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:d(this,Ce),isCentered:n,...s});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(N(this,_t,wE).call(this),!0,e)}setSelected(e){d(this,Ce).setSelected(e)}toggleSelected(e){d(this,Ce).toggleSelected(e)}unselect(e){d(this,Ce).unselect(e)}pointerup(e){var r;const{isMac:n}=An.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!d(this,Il)||(E(this,Il,!1),(r=d(this,_t,yi))!=null&&r.isDrawer&&d(this,_t,yi).supportMultipleDrawings))return;if(!d(this,kh)){E(this,kh,!0);return}const s=d(this,Ce).getMode();if(s===ke.STAMP||s===ke.SIGNATURE){d(this,Ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(d(this,Ce).getMode()===ke.HIGHLIGHT&&this.enableTextSelection(),d(this,Il)){E(this,Il,!1);return}const{isMac:n}=An.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(E(this,Il,!0),(r=d(this,_t,yi))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=d(this,Ce).getActive();E(this,kh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,Gr)){d(this,_t,yi).startDrawing(this,d(this,Ce),!1,e);return}d(this,Ce).setCurrentDrawingSession(this),E(this,Gr,new AbortController);const n=d(this,Ce).combinedSignal(d(this,Gr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(E(this,Ko,null),this.commitOrRemove())},{signal:n}),d(this,_t,yi).startDrawing(this,d(this,Ce),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&E(this,Ko,n);return}d(this,Ko)&&setTimeout(()=>{var n;(n=d(this,Ko))==null||n.focus(),E(this,Ko,null)},0)}endDrawingSession(e=!1){return d(this,Gr)?(d(this,Ce).setCurrentDrawingSession(null),d(this,Gr).abort(),E(this,Gr,null),E(this,Ko,null),d(this,_t,yi).endDrawing(e)):null}findNewParent(e,n,s){const r=d(this,Ce).findParent(n,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return d(this,Gr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Gr)&&d(this,_t,yi).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=d(this,Ce).getActive())==null?void 0:e.parent)===this&&(d(this,Ce).commitOrRemove(),d(this,Ce).setActiveEditor(null)),d(this,Wo)&&(clearTimeout(d(this,Wo)),E(this,Wo,null));for(const s of d(this,Vs).values())(n=d(this,zu))==null||n.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,d(this,Vs).clear(),d(this,Ce).removeLayer(this)}render({viewport:e}){this.viewport=e,ud(this.div,e);for(const n of d(this,Ce).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){d(this,Ce).commitOrRemove(),N(this,_t,Fx).call(this);const n=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ud(this.div,{rotation:s}),n!==s)for(const r of d(this,Vs).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return d(this,Ce).viewParameters.realScale}};zu=new WeakMap,kh=new WeakMap,Ui=new WeakMap,kl=new WeakMap,Wo=new WeakMap,Vs=new WeakMap,Il=new WeakMap,Ih=new WeakMap,Hu=new WeakMap,Gr=new WeakMap,Ko=new WeakMap,fn=new WeakMap,Yo=new WeakMap,Dl=new WeakMap,Dh=new WeakMap,Ce=new WeakMap,Ll=new WeakMap,_t=new WeakSet,W4=function(e){d(this,Ce).unselectAll();const{target:n}=e;if(n===d(this,fn).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&d(this,fn).div.contains(n)){const{isMac:s}=An.platform;if(e.button!==0||e.ctrlKey&&s)return;d(this,Ce).showAllEditors("highlight",!0,!0),d(this,fn).div.classList.add("free"),this.toggleDrawing(),j0.startHighlighting(this,d(this,Ce).direction==="ltr",{target:d(this,fn).div,x:e.x,y:e.y}),d(this,fn).div.addEventListener("pointerup",()=>{d(this,fn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,Ce)._signal}),e.preventDefault()}},yi=function(){return d(Mr,Ll).get(d(this,Ce).getMode())},xE=function(e){const n=d(this,_t,yi);return n?new n.prototype.constructor(e):null},wE=function(){const{x:e,y:n,width:s,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,n),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,n+r),c=(i+a)/2-e,u=(o+l)/2-n,[p,g]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:p,offsetY:g}},Fx=function(){for(const e of d(this,Vs).values())e.isEmpty()&&e.remove()},Z(Mr,"_initialized",!1),R(Mr,Ll,new Map([J_,cE,gE,j0,mE].map(e=>[e._editorType,e])));let vE=Mr;var qr,Wn,Gu,Ny,dw,K4,to,SE,Y4,bE;const Xt=class Xt{constructor({pageIndex:e}){R(this,to);R(this,qr,null);R(this,Wn,new Map);R(this,Gu,new Map);this.pageIndex=e}setParent(e){if(!d(this,qr)){E(this,qr,e);return}if(d(this,qr)!==e){if(d(this,Wn).size>0)for(const n of d(this,Wn).values())n.remove(),e.append(n);E(this,qr,e)}}static get _svgFactory(){return He(this,"_svgFactory",new V0)}draw(e,n=!1,s=!1){const r=rn(Xt,Ny)._++,i=N(this,to,SE).call(this),o=Xt._svgFactory.createElement("defs");i.append(o);const a=Xt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),n&&d(this,Gu).set(r,a);const c=s?N(this,to,Y4).call(this,o,l):null,u=Xt._svgFactory.createElement("use");return i.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(i,e),d(this,Wn).set(r,i),{id:r,clipPathId:`url(#${c})`}}drawOutline(e,n){const s=rn(Xt,Ny)._++,r=N(this,to,SE).call(this),i=Xt._svgFactory.createElement("defs");r.append(i);const o=Xt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const p=Xt._svgFactory.createElement("mask");i.append(p),l=`mask_p${this.pageIndex}_${s}`,p.setAttribute("id",l),p.setAttribute("maskUnits","objectBoundingBox");const g=Xt._svgFactory.createElement("rect");p.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=Xt._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${a}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const c=Xt._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,e),d(this,Wn).set(s,r),s}finalizeDraw(e,n){d(this,Gu).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:s,bbox:r,rootClass:i,path:o}=n,a=typeof e=="number"?d(this,Wn).get(e):e;if(a){if(s&&N(this,to,bE).call(this,a,s),r&&N(l=Xt,dw,K4).call(l,a,r),i){const{classList:c}=a;for(const[u,p]of Object.entries(i))c.toggle(u,p)}if(o){const u=a.firstChild.firstChild;N(this,to,bE).call(this,u,o)}}}updateParent(e,n){if(n===this)return;const s=d(this,Wn).get(e);s&&(d(n,qr).append(s),d(this,Wn).delete(e),d(n,Wn).set(e,s))}remove(e){d(this,Gu).delete(e),d(this,qr)!==null&&(d(this,Wn).get(e).remove(),d(this,Wn).delete(e))}destroy(){E(this,qr,null);for(const e of d(this,Wn).values())e.remove();d(this,Wn).clear(),d(this,Gu).clear()}};qr=new WeakMap,Wn=new WeakMap,Gu=new WeakMap,Ny=new WeakMap,dw=new WeakSet,K4=function(e,[n,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*n}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},to=new WeakSet,SE=function(){const e=Xt._svgFactory.create(1,1,!0);return d(this,qr).append(e),e.setAttribute("aria-hidden",!0),e},Y4=function(e,n){const s=Xt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${n}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Xt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${n}`),i.classList.add("clip"),r},bE=function(e,n){for(const[s,r]of Object.entries(n))r===null?e.removeAttribute(s):e.setAttribute(s,r)},R(Xt,dw),R(Xt,Ny,0);let CE=Xt;globalThis._pdfjsTestingUtils={HighlightOutliner:Q_};globalThis.pdfjsLib={AbortException:tc,AnnotationEditorLayer:vE,AnnotationEditorParamsType:qe,AnnotationEditorType:ke,AnnotationEditorUIManager:dd,AnnotationLayer:W_,AnnotationMode:ja,AnnotationType:zt,build:vJ,ColorPicker:B0,createValidAbsoluteUrl:BU,DOMSVGFactory:V0,DrawLayer:CE,FeatureTest:An,fetchData:Ky,getDocument:GV,getFilenameFromUrl:uY,getPdfFilenameFromUrl:dY,getUuid:HU,getXfaPageViewport:hY,GlobalWorkerOptions:ea,ImageKind:ox,InvalidPDFException:a_,isDataScheme:aC,isPdfFile:HA,isValidExplicitDest:_Y,MathClamp:Yn,noContextMenu:ii,normalizeUnicode:aY,OPS:L0,OutputScale:eo,PasswordResponses:QK,PDFDataRangeTransport:qV,PDFDateString:GA,PDFWorker:Jm,PermissionFlag:XK,PixelsPerInch:nc,RenderingCancelledException:zA,ResponseException:F0,setLayerDimensions:ud,shadow:He,SignatureExtractor:ta,stopEvent:Gt,SupportedImageMimeTypes:c_,TextLayer:Km,TouchManager:U0,updateUrlHash:jU,Util:be,VerbosityLevel:rC,version:yJ,XfaLayer:YV};const $J=t=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const r=s.result.split(",")[1];e(r)},s.onerror=r=>n(r),s.readAsDataURL(t)}),BJ=t=>new Promise((e,n)=>{const s=new FileReader;s.onload=async r=>{var i;if((i=r.target)!=null&&i.result)try{const o=new Uint8Array(r.target.result),a=await GV(o).promise;let l="";for(let c=1;c<=a.numPages;c++){const p=await(await a.getPage(c)).getTextContent();l+=p.items.map(g=>"str"in g?g.str:"").join(" ")+`
`}e(l)}catch(o){n(o)}},s.onerror=()=>n(new Error(`Failed to read ${t.name}.`)),s.readAsArrayBuffer(t)}),jJ=async t=>{const e=["application/pdf","image/png","image/jpeg"],n=Array.from(t).filter(s=>e.includes(s.type)).map(async s=>{let r;return s.type==="application/pdf"?r=await BJ(s):r=await $J(s),{id:crypto.randomUUID(),name:s.name,type:s.type,content:r,url:URL.createObjectURL(s),uploadedAt:new Date().toISOString()}});return Promise.all(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zJ,HJ;function GJ(){return{geminiUrl:zJ,vertexUrl:HJ}}function qJ(t,e,n){var s,r,i;if(!(!((s=t.httpOptions)===null||s===void 0)&&s.baseUrl)){const o=GJ();return t.vertexai?(r=o.vertexUrl)!==null&&r!==void 0?r:e:(i=o.geminiUrl)!==null&&i!==void 0?i:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sd{}function Se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];h(u,e.slice(i+1),n[c])}else for(const c of l)h(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];h(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function f(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const i=t[r];return Array.isArray(i)?i.map(o=>f(o,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yP;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(yP||(yP={}));var vP;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(vP||(vP={}));var Gi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gi||(Gi={}));var xP;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(xP||(xP={}));var wP;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(wP||(wP={}));var CP;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(CP||(CP={}));var SP;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(SP||(SP={}));var bP;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(bP||(bP={}));var _P;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(_P||(_P={}));var EP;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(EP||(EP={}));var TP;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(TP||(TP={}));var AP;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(AP||(AP={}));var RP;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(RP||(RP={}));var NP;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(NP||(NP={}));var PP;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(PP||(PP={}));var MP;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(MP||(MP={}));var H0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(H0||(H0={}));var kP;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kP||(kP={}));var _E;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_E||(_E={}));var IP;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(IP||(IP={}));var DP;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(DP||(DP={}));var LP;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(LP||(LP={}));var FP;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(FP||(FP={}));var OP;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(OP||(OP={}));var UP;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(UP||(UP={}));var VP;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(VP||(VP={}));var $P;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})($P||($P={}));var BP;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(BP||(BP={}));var jP;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jP||(jP={}));var zP;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zP||(zP={}));var HP;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(HP||(HP={}));var GP;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(GP||(GP={}));var qP;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qP||(qP={}));var WP;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(WP||(WP={}));var KP;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(KP||(KP={}));var YP;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(YP||(YP={}));var JP;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JP||(JP={}));var XP;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(XP||(XP={}));var QP;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(QP||(QP={}));var ZP;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ZP||(ZP={}));var eM;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(eM||(eM={}));var ef;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ef||(ef={}));class EE{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dp{get text(){var e,n,s,r,i,o,a,l;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const p=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,x]of Object.entries(g))y!=="text"&&y!=="thought"&&(x!==null||x!==void 0)&&p.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;u=!0,c+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,s,r,i,o,a,l;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const p of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(p))g!=="inlineData"&&(y!==null||y!==void 0)&&u.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,s,r,i,o,a,l;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,s,r,i,o,a,l,c;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,s,r,i,o,a,l,c;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class tM{}class nM{}class WJ{}class KJ{}class sM{}class rM{}class iM{}class YJ{}class oM{}class aM{}class lM{}class JJ{}class XJ{}class QJ{}class cM{}class ZJ{get text(){var e,n,s;let r="",i=!1;const o=[];for(const a of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,s;let r="";const i=[];for(const o of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class eX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ot(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function J4(t,e){const n=ot(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function X4(t){return Array.isArray(t)?t.map(e=>G0(e)):[G0(t)]}function G0(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Q4(t){const e=G0(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Z4(t){const e=G0(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uM(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function e$(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>uM(e)):[uM(t)]}function TE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function dM(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fM(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Vn(t){if(t==null)throw new Error("ContentUnion is required");return TE(t)?t:{role:"user",parts:e$(t)}}function t$(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=Vn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=Vn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Vn(n)):[Vn(e)]}function yr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(dM(t)||fM(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Vn(t)]}const e=[],n=[],s=TE(t[0]);for(const r of t){const i=TE(r);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(dM(r)||fM(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:e$(n)}),e}const tX=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),hM=kW(["string","number","integer","object","array","boolean","null"]),nX=NW([hM,Bp(hM)]);function sX(t=!0){const e=MW(()=>{const n=gA({type:nX.optional(),format:zs().optional(),title:zs().optional(),description:zs().optional(),default:FN().optional(),items:e.optional(),minItems:Td.string().optional(),maxItems:Td.string().optional(),enum:Bp(FN()).optional(),properties:PW(zs(),e).optional(),required:Bp(zs()).optional(),minProperties:Td.string().optional(),maxProperties:Td.string().optional(),propertyOrdering:Bp(zs()).optional(),minimum:LN().optional(),maximum:LN().optional(),minLength:Td.string().optional(),maxLength:Td.string().optional(),pattern:zs().optional(),anyOf:Bp(e).optional(),additionalProperties:RW().optional()});return t?n.strict():n});return e}function rX(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Gi).includes(n[0].toUpperCase())?n[0].toUpperCase():Gi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Gi).includes(s.toUpperCase())?s.toUpperCase():Gi.TYPE_UNSPECIFIED})}}function gf(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&rX(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Gi).includes(a.toUpperCase())?a.toUpperCase():Gi.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=gf(a);else if(s.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(gf(c))}e[o]=l}else if(r.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=gf(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Xm(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=sX().parse(t);return gf(e)}else return gf(t)}function ZA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function e1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function hp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Xm(e.parameters)),e.response&&(e.response=Xm(e.response));return t}function pp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iX(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function _a(t,e){if(typeof e!="string")throw new Error("name must be a string");return iX(t,e,"cachedContents")}function n$(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ea(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function oX(t){return t!=null&&typeof t=="object"&&"name"in t}function aX(t){return t!=null&&typeof t=="object"&&"video"in t}function lX(t){return t!=null&&typeof t=="object"&&"uri"in t}function s$(t){var e;let n;if(oX(t)&&(n=t.name),!(lX(t)&&(n=t.uri,n===void 0))&&!(aX(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function r$(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function i$(t){for(const e of["models","tunedModels","publisherModels"])if(cX(t,e))return t[e];return[]}function cX(t,e){return t!==null&&typeof t=="object"&&e in t}function uX(t,e={}){const n=t,s={name:n.name,description:n.description,parameters:gf(uC(n.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function dX(t,e={}){const n=[],s=new Set;for(const r of t){const i=r.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=uX(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function fX(t){const e=[];for(const n of t)e.push(uC(n));return e}function hX(t){const e={};for(const[n,s]of Object.entries(t)){const r=s;e[n]=uC(r)}return e}function uC(t){const e=new Set(["items"]),n=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[i,o]of Object.entries(t))if(e.has(i))r[i]=uC(o);else if(n.has(i))r[i]=fX(o);else if(s.has(i))r[i]=hX(o);else if(i==="type"){const a=o.toUpperCase();r[i]=Object.values(Gi).includes(a)?a:Gi.TYPE_UNSPECIFIED}else tX.has(i)&&(r[i]=o);return r}function o$(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function pX(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mp(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function a$(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mX(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function gX(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function yX(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vX(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],mX(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],gX(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],yX(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function l$(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vX(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function xX(t){const e={},n=f(t,["anyOf"]);n!=null&&h(e,["anyOf"],n);const s=f(t,["default"]);s!=null&&h(e,["default"],s);const r=f(t,["description"]);r!=null&&h(e,["description"],r);const i=f(t,["enum"]);i!=null&&h(e,["enum"],i);const o=f(t,["example"]);o!=null&&h(e,["example"],o);const a=f(t,["format"]);a!=null&&h(e,["format"],a);const l=f(t,["items"]);l!=null&&h(e,["items"],l);const c=f(t,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(t,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(t,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const g=f(t,["maximum"]);g!=null&&h(e,["maximum"],g);const y=f(t,["minItems"]);y!=null&&h(e,["minItems"],y);const x=f(t,["minLength"]);x!=null&&h(e,["minLength"],x);const v=f(t,["minProperties"]);v!=null&&h(e,["minProperties"],v);const C=f(t,["minimum"]);C!=null&&h(e,["minimum"],C);const w=f(t,["nullable"]);w!=null&&h(e,["nullable"],w);const S=f(t,["pattern"]);S!=null&&h(e,["pattern"],S);const _=f(t,["properties"]);_!=null&&h(e,["properties"],_);const T=f(t,["propertyOrdering"]);T!=null&&h(e,["propertyOrdering"],T);const A=f(t,["required"]);A!=null&&h(e,["required"],A);const P=f(t,["title"]);P!=null&&h(e,["title"],P);const M=f(t,["type"]);return M!=null&&h(e,["type"],M),e}function wX(t){const e={};if(f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=f(t,["category"]);n!=null&&h(e,["category"],n);const s=f(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function CX(t){const e={},n=f(t,["behavior"]);n!=null&&h(e,["behavior"],n);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const r=f(t,["name"]);r!=null&&h(e,["name"],r);const i=f(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&h(e,["response"],a);const l=f(t,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function SX(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function bX(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],SX(n)),e}function _X(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function EX(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],_X(n)),e}function TX(){return{}}function AX(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>CX(c))),h(e,["functionDeclarations"],l)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["googleSearch"]);s!=null&&h(e,["googleSearch"],bX(s));const r=f(t,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],EX(r)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&h(e,["urlContext"],TX());const o=f(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(t,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function RX(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["allowedFunctionNames"]);return s!=null&&h(e,["allowedFunctionNames"],s),e}function NX(t){const e={},n=f(t,["latitude"]);n!=null&&h(e,["latitude"],n);const s=f(t,["longitude"]);return s!=null&&h(e,["longitude"],s),e}function PX(t){const e={},n=f(t,["latLng"]);n!=null&&h(e,["latLng"],NX(n));const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function MX(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],RX(n));const s=f(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],PX(s)),e}function kX(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function c$(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],kX(n)),e}function IX(t){const e={},n=f(t,["speaker"]);n!=null&&h(e,["speaker"],n);const s=f(t,["voiceConfig"]);return s!=null&&h(e,["voiceConfig"],c$(s)),e}function DX(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>IX(r))),h(e,["speakerVoiceConfigs"],s)}return e}function LX(t){const e={},n=f(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],c$(n));const s=f(t,["multiSpeakerVoiceConfig"]);s!=null&&h(e,["multiSpeakerVoiceConfig"],DX(s));const r=f(t,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function FX(t){const e={},n=f(t,["includeThoughts"]);n!=null&&h(e,["includeThoughts"],n);const s=f(t,["thinkingBudget"]);return s!=null&&h(e,["thinkingBudget"],s),e}function OX(t,e,n){const s={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],l$(Vn(r)));const i=f(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=f(e,["topP"]);o!=null&&h(s,["topP"],o);const a=f(e,["topK"]);a!=null&&h(s,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(s,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(s,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(s,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=f(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const y=f(e,["presencePenalty"]);y!=null&&h(s,["presencePenalty"],y);const x=f(e,["frequencyPenalty"]);x!=null&&h(s,["frequencyPenalty"],x);const v=f(e,["seed"]);v!=null&&h(s,["seed"],v);const C=f(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const w=f(e,["responseSchema"]);w!=null&&h(s,["responseSchema"],xX(Xm(w)));const S=f(e,["responseJsonSchema"]);if(S!=null&&h(s,["responseJsonSchema"],S),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let L=_;Array.isArray(L)&&(L=L.map(U=>wX(U))),h(n,["safetySettings"],L)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let L=pp(T);Array.isArray(L)&&(L=L.map(U=>AX(hp(U)))),h(n,["tools"],L)}const A=f(e,["toolConfig"]);if(n!==void 0&&A!=null&&h(n,["toolConfig"],MX(A)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(e,["cachedContent"]);n!==void 0&&P!=null&&h(n,["cachedContent"],_a(t,P));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const I=f(e,["mediaResolution"]);I!=null&&h(s,["mediaResolution"],I);const k=f(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],LX(ZA(k))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);return D!=null&&h(s,["thinkingConfig"],FX(D)),s}function UX(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["request","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>l$(a))),h(n,["request","contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["request","generationConfig"],OX(t,i,n)),n}function VX(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(n,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>UX(t,o))),h(n,["requests","requests"],i)}return n}function $X(t,e){const n={},s=f(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function BX(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["src"]);r!=null&&h(n,["batch","inputConfig"],VX(t,o$(t,r)));const i=f(e,["config"]);return i!=null&&h(n,["config"],$X(i,n)),n}function jX(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function zX(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function HX(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function GX(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],HX(n,e)),e}function qX(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function WX(t){const e={},n=f(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const s=f(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function KX(t){const e={},n=f(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const s=f(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function YX(t,e){const n={},s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],KX(pX(r))),n}function JX(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["model"],ot(t,s));const r=f(e,["src"]);r!=null&&h(n,["inputConfig"],WX(o$(t,r)));const i=f(e,["config"]);return i!=null&&h(n,["config"],YX(i,n)),n}function XX(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function QX(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function ZX(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const i=f(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function eQ(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],ZX(n,e)),e}function tQ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],mp(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function u$(){return{}}function nQ(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function sQ(t){const e={},n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function rQ(t){const e={},n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function iQ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],nQ(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],sQ(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],rQ(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function oQ(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iQ(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function aQ(t){const e={},n=f(t,["citationSources"]);return n!=null&&h(e,["citations"],n),e}function lQ(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&h(e,["retrievedUrl"],n);const s=f(t,["urlRetrievalStatus"]);return s!=null&&h(e,["urlRetrievalStatus"],s),e}function cQ(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>lQ(r))),h(e,["urlMetadata"],s)}return e}function uQ(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],oQ(n));const s=f(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],aQ(s));const r=f(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const i=f(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=f(t,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],cQ(o));const a=f(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(t,["index"]);c!=null&&h(e,["index"],c);const u=f(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(t,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function dQ(t){const e={},n=f(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>uQ(a))),h(e,["candidates"],o)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const r=f(t,["promptFeedback"]);r!=null&&h(e,["promptFeedback"],r);const i=f(t,["usageMetadata"]);return i!=null&&h(e,["usageMetadata"],i),e}function fQ(t){const e={},n=f(t,["response"]);return n!=null&&h(e,["response"],dQ(n)),f(t,["error"])!=null&&h(e,["error"],u$()),e}function hQ(t){const e={},n=f(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const s=f(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>fQ(i))),h(e,["inlinedResponses"],r)}return e}function AE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["metadata","state"]);r!=null&&h(e,["state"],a$(r));const i=f(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const o=f(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=f(t,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(t,["metadata","model"]);l!=null&&h(e,["model"],l);const c=f(t,["metadata","output"]);return c!=null&&h(e,["dest"],hQ(c)),e}function pQ(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>AE(i))),h(e,["batchJobs"],r)}return e}function mQ(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["done"]);return s!=null&&h(e,["done"],s),f(t,["error"])!=null&&h(e,["error"],u$()),e}function d$(t){const e={},n=f(t,["details"]);n!=null&&h(e,["details"],n);const s=f(t,["code"]);s!=null&&h(e,["code"],s);const r=f(t,["message"]);return r!=null&&h(e,["message"],r),e}function gQ(t){const e={},n=f(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const s=f(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function yQ(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const s=f(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function RE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["state"]);r!=null&&h(e,["state"],a$(r));const i=f(t,["error"]);i!=null&&h(e,["error"],d$(i));const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(t,["startTime"]);a!=null&&h(e,["startTime"],a);const l=f(t,["endTime"]);l!=null&&h(e,["endTime"],l);const c=f(t,["updateTime"]);c!=null&&h(e,["updateTime"],c);const u=f(t,["model"]);u!=null&&h(e,["model"],u);const p=f(t,["inputConfig"]);p!=null&&h(e,["src"],gQ(p));const g=f(t,["outputConfig"]);return g!=null&&h(e,["dest"],yQ(g)),e}function vQ(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>RE(i))),h(e,["batchJobs"],r)}return e}function xQ(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const r=f(t,["error"]);return r!=null&&h(e,["error"],d$(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hd;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(hd||(hd={}));class Zy{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};s?typeof s=="object"?o=Object.assign({},s):o=s:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wQ extends Sd{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Zy(hd.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n)}async createInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=JX(this.apiClient,e);return a=Se("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>RE(u))}else{const c=BX(this.apiClient,e);return a=Se("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>AE(u))}}async get(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=XX(this.apiClient,e);return a=Se("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>RE(u))}else{const c=jX(this.apiClient,e);return a=Se("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>AE(u))}}async cancel(e){var n,s,r,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=QX(this.apiClient,e);o=Se("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const l=zX(this.apiClient,e);o=Se("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=eQ(e);return a=Se("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=vQ(u),g=new cM;return Object.assign(g,p),g})}else{const c=GX(e);return a=Se("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=pQ(u),g=new cM;return Object.assign(g,p),g})}}async delete(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=tQ(this.apiClient,e);return a=Se("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>xQ(u))}else{const c=qX(this.apiClient,e);return a=Se("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>mQ(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CQ(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function SQ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function bQ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _Q(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],CQ(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],SQ(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],bQ(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function pM(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_Q(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function EQ(t){const e={},n=f(t,["behavior"]);n!=null&&h(e,["behavior"],n);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const r=f(t,["name"]);r!=null&&h(e,["name"],r);const i=f(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&h(e,["response"],a);const l=f(t,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function TQ(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function AQ(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],TQ(n)),e}function RQ(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function NQ(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],RQ(n)),e}function PQ(){return{}}function MQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>EQ(c))),h(e,["functionDeclarations"],l)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["googleSearch"]);s!=null&&h(e,["googleSearch"],AQ(s));const r=f(t,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],NQ(r)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&h(e,["urlContext"],PQ());const o=f(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(t,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function kQ(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["allowedFunctionNames"]);return s!=null&&h(e,["allowedFunctionNames"],s),e}function IQ(t){const e={},n=f(t,["latitude"]);n!=null&&h(e,["latitude"],n);const s=f(t,["longitude"]);return s!=null&&h(e,["longitude"],s),e}function DQ(t){const e={},n=f(t,["latLng"]);n!=null&&h(e,["latLng"],IQ(n));const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function LQ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],kQ(n));const s=f(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],DQ(s)),e}function FQ(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const i=f(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=f(t,["contents"]);if(e!==void 0&&o!=null){let u=yr(o);Array.isArray(u)&&(u=u.map(p=>pM(p))),h(e,["contents"],u)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],pM(Vn(a)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(p=>MQ(p))),h(e,["tools"],u)}const c=f(t,["toolConfig"]);if(e!==void 0&&c!=null&&h(e,["toolConfig"],LQ(c)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function OQ(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["model"],J4(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],FQ(r,n)),n}function UQ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function VQ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function $Q(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function BQ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],$Q(r,n)),n}function jQ(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function zQ(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],jQ(n,e)),e}function HQ(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function GQ(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["data"]);s!=null&&h(e,["data"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function qQ(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["fileUri"]);s!=null&&h(e,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function WQ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],HQ(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],GQ(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],qQ(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function mM(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>WQ(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function KQ(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&h(e,["description"],n);const s=f(t,["name"]);s!=null&&h(e,["name"],s);const r=f(t,["parameters"]);r!=null&&h(e,["parameters"],r);const i=f(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=f(t,["response"]);o!=null&&h(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function YQ(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function JQ(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],YQ(n)),e}function XQ(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function QQ(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],XQ(n)),e}function ZQ(){return{}}function eZ(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&h(e,["apiKeyString"],n),e}function tZ(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&h(e,["apiKeyConfig"],eZ(n));const s=f(t,["authType"]);s!=null&&h(e,["authType"],s);const r=f(t,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const i=f(t,["httpBasicAuthConfig"]);i!=null&&h(e,["httpBasicAuthConfig"],i);const o=f(t,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(t,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function nZ(t){const e={},n=f(t,["authConfig"]);return n!=null&&h(e,["authConfig"],tZ(n)),e}function sZ(){return{}}function rZ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>KQ(g))),h(e,["functionDeclarations"],p)}const s=f(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(t,["googleSearch"]);r!=null&&h(e,["googleSearch"],JQ(r));const i=f(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],QQ(i)),f(t,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],ZQ());const a=f(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],nZ(a)),f(t,["urlContext"])!=null&&h(e,["urlContext"],sZ());const c=f(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(t,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function iZ(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["allowedFunctionNames"]);return s!=null&&h(e,["allowedFunctionNames"],s),e}function oZ(t){const e={},n=f(t,["latitude"]);n!=null&&h(e,["latitude"],n);const s=f(t,["longitude"]);return s!=null&&h(e,["longitude"],s),e}function aZ(t){const e={},n=f(t,["latLng"]);n!=null&&h(e,["latLng"],oZ(n));const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function lZ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],iZ(n));const s=f(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],aZ(s)),e}function cZ(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const i=f(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=f(t,["contents"]);if(e!==void 0&&o!=null){let p=yr(o);Array.isArray(p)&&(p=p.map(g=>mM(g))),h(e,["contents"],p)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],mM(Vn(a)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>rZ(g))),h(e,["tools"],p)}const c=f(t,["toolConfig"]);e!==void 0&&c!=null&&h(e,["toolConfig"],lZ(c));const u=f(t,["kmsKeyName"]);return e!==void 0&&u!=null&&h(e,["encryption_spec","kmsKeyName"],u),n}function uZ(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["model"],J4(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],cZ(r,n)),n}function dZ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function fZ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function hZ(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function pZ(t,e){const n={},s=f(e,["name"]);s!=null&&h(n,["_url","name"],_a(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],hZ(r,n)),n}function mZ(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function gZ(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],mZ(n,e)),e}function Ox(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["model"]);r!=null&&h(e,["model"],r);const i=f(t,["createTime"]);i!=null&&h(e,["createTime"],i);const o=f(t,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=f(t,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=f(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function yZ(){return{}}function vZ(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Ox(i))),h(e,["cachedContents"],r)}return e}function Ux(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["model"]);r!=null&&h(e,["model"],r);const i=f(t,["createTime"]);i!=null&&h(e,["createTime"],i);const o=f(t,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=f(t,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=f(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function xZ(){return{}}function wZ(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Ux(i))),h(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CZ extends Sd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zy(hd.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=uZ(this.apiClient,e);return a=Se("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Ux(u))}else{const c=OQ(this.apiClient,e);return a=Se("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ox(u))}}async get(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dZ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Ux(u))}else{const c=UQ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ox(u))}}async delete(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fZ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=xZ(),p=new aM;return Object.assign(p,u),p})}else{const c=VQ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=yZ(),p=new aM;return Object.assign(p,u),p})}}async update(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pZ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Ux(u))}else{const c=BQ(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ox(u))}}async listInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=gZ(e);return a=Se("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=wZ(u),g=new lM;return Object.assign(g,p),g})}else{const c=zQ(e);return a=Se("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=vZ(u),g=new lM;return Object.assign(g,p),g})}}}function gM(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(t){return this instanceof vt?(this.v=t,this):new vt(t)}function yf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(y){return function(x){return Promise.resolve(x).then(y,p)}}function a(y,x){s[y]&&(r[y]=function(v){return new Promise(function(C,w){i.push([y,v,C,w])>1||l(y,v)})},x&&(r[y]=x(r[y])))}function l(y,x){try{c(s[y](x))}catch(v){g(i[0][3],v)}}function c(y){y.value instanceof vt?Promise.resolve(y.value.v).then(u,p):g(i[0][2],y)}function u(y){l("next",y)}function p(y){l("throw",y)}function g(y,x){y(x),i.shift(),i.length&&l(i[0][0],i[0][1])}}function bm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gM=="function"?gM(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),r(a,l,o.done,o.value)})}}function r(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SZ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:f$(n)}function f$(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function bZ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yM(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let i=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),i&&!f$(t[s])&&(i=!1),s++;i?e.push(...r):e.pop()}return e}class _Z{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new EZ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class EZ{constructor(e,n,s,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),bZ(i)}async sendMessage(e){var n;await this.sendPromise;const s=Vn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await r,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];u!=null&&(g=(a=u.slice(p))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(s,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=Vn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,s)}getHistory(e=!1){const n=e?yM(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return yf(this,arguments,function*(){var o,a,l,c;const u=[];try{for(var p=!0,g=bm(e),y;y=yield vt(g.next()),o=y.done,!o;p=!0){c=y.value,p=!1;const x=c;if(SZ(x)){const v=(r=(s=x.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;v!==void 0&&u.push(v)}yield yield vt(x)}}catch(x){a={error:x}}finally{try{!p&&!o&&(l=g.return)&&(yield vt(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,u)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...yM(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dC extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dC.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TZ(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function AZ(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],TZ(n,e)),e}function RZ(t){const e={},n=f(t,["details"]);n!=null&&h(e,["details"],n);const s=f(t,["message"]);s!=null&&h(e,["message"],s);const r=f(t,["code"]);return r!=null&&h(e,["code"],r),e}function NZ(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["mimeType"]);r!=null&&h(e,["mimeType"],r);const i=f(t,["sizeBytes"]);i!=null&&h(e,["sizeBytes"],i);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(t,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=f(t,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=f(t,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const u=f(t,["uri"]);u!=null&&h(e,["uri"],u);const p=f(t,["downloadUri"]);p!=null&&h(e,["downloadUri"],p);const g=f(t,["state"]);g!=null&&h(e,["state"],g);const y=f(t,["source"]);y!=null&&h(e,["source"],y);const x=f(t,["videoMetadata"]);x!=null&&h(e,["videoMetadata"],x);const v=f(t,["error"]);return v!=null&&h(e,["error"],RZ(v)),e}function PZ(t){const e={},n=f(t,["file"]);n!=null&&h(e,["file"],NZ(n));const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function MZ(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","file"],s$(n));const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function kZ(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","file"],s$(n));const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function IZ(t){const e={},n=f(t,["details"]);n!=null&&h(e,["details"],n);const s=f(t,["message"]);s!=null&&h(e,["message"],s);const r=f(t,["code"]);return r!=null&&h(e,["code"],r),e}function NE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["mimeType"]);r!=null&&h(e,["mimeType"],r);const i=f(t,["sizeBytes"]);i!=null&&h(e,["sizeBytes"],i);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(t,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=f(t,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=f(t,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const u=f(t,["uri"]);u!=null&&h(e,["uri"],u);const p=f(t,["downloadUri"]);p!=null&&h(e,["downloadUri"],p);const g=f(t,["state"]);g!=null&&h(e,["state"],g);const y=f(t,["source"]);y!=null&&h(e,["source"],y);const x=f(t,["videoMetadata"]);x!=null&&h(e,["videoMetadata"],x);const v=f(t,["error"]);return v!=null&&h(e,["error"],IZ(v)),e}function DZ(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>NE(i))),h(e,["files"],r)}return e}function LZ(){return{}}function FZ(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OZ extends Sd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zy(hd.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>NE(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AZ(e);return i=Se("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=DZ(l),u=new JJ;return Object.assign(u,c),u})}}async createInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=PZ(e);return i=Se("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(()=>{const l=LZ(),c=new XJ;return Object.assign(c,l),c})}}async get(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=MZ(e);return i=Se("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>NE(l))}}async delete(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kZ(e);return i=Se("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(()=>{const l=FZ(),c=new QJ;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UZ(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function VZ(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function h$(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],UZ(n)),e}function $Z(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],VZ(n)),e}function BZ(t){const e={},n=f(t,["speaker"]);n!=null&&h(e,["speaker"],n);const s=f(t,["voiceConfig"]);return s!=null&&h(e,["voiceConfig"],h$(s)),e}function jZ(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>BZ(r))),h(e,["speakerVoiceConfigs"],s)}return e}function zZ(t){const e={},n=f(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],h$(n));const s=f(t,["multiSpeakerVoiceConfig"]);s!=null&&h(e,["multiSpeakerVoiceConfig"],jZ(s));const r=f(t,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function HZ(t){const e={},n=f(t,["voiceConfig"]);if(n!=null&&h(e,["voiceConfig"],$Z(n)),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function GZ(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function qZ(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function WZ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function KZ(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["data"]);s!=null&&h(e,["data"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function YZ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function JZ(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["fileUri"]);s!=null&&h(e,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function XZ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],GZ(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],WZ(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],YZ(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function QZ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],qZ(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],KZ(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],JZ(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function ZZ(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>XZ(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function eee(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>QZ(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function tee(t){const e={},n=f(t,["behavior"]);n!=null&&h(e,["behavior"],n);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const r=f(t,["name"]);r!=null&&h(e,["name"],r);const i=f(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&h(e,["response"],a);const l=f(t,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function nee(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&h(e,["description"],n);const s=f(t,["name"]);s!=null&&h(e,["name"],s);const r=f(t,["parameters"]);r!=null&&h(e,["parameters"],r);const i=f(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=f(t,["response"]);o!=null&&h(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function see(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function ree(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function iee(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],see(n)),e}function oee(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],ree(n)),e}function aee(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function lee(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function cee(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],aee(n)),e}function uee(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],lee(n)),e}function dee(){return{}}function fee(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&h(e,["apiKeyString"],n),e}function hee(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&h(e,["apiKeyConfig"],fee(n));const s=f(t,["authType"]);s!=null&&h(e,["authType"],s);const r=f(t,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const i=f(t,["httpBasicAuthConfig"]);i!=null&&h(e,["httpBasicAuthConfig"],i);const o=f(t,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(t,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function pee(t){const e={},n=f(t,["authConfig"]);return n!=null&&h(e,["authConfig"],hee(n)),e}function mee(){return{}}function gee(){return{}}function yee(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>tee(c))),h(e,["functionDeclarations"],l)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["googleSearch"]);s!=null&&h(e,["googleSearch"],iee(s));const r=f(t,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],cee(r)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&h(e,["urlContext"],mee());const o=f(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(t,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function vee(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>nee(g))),h(e,["functionDeclarations"],p)}const s=f(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(t,["googleSearch"]);r!=null&&h(e,["googleSearch"],oee(r));const i=f(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],uee(i)),f(t,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],dee());const a=f(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],pee(a)),f(t,["urlContext"])!=null&&h(e,["urlContext"],gee());const c=f(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(t,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function xee(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wee(t){const e={},n=f(t,["handle"]);n!=null&&h(e,["handle"],n);const s=f(t,["transparent"]);return s!=null&&h(e,["transparent"],s),e}function vM(){return{}}function xM(){return{}}function Cee(t){const e={},n=f(t,["disabled"]);n!=null&&h(e,["disabled"],n);const s=f(t,["startOfSpeechSensitivity"]);s!=null&&h(e,["startOfSpeechSensitivity"],s);const r=f(t,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const i=f(t,["prefixPaddingMs"]);i!=null&&h(e,["prefixPaddingMs"],i);const o=f(t,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function See(t){const e={},n=f(t,["disabled"]);n!=null&&h(e,["disabled"],n);const s=f(t,["startOfSpeechSensitivity"]);s!=null&&h(e,["startOfSpeechSensitivity"],s);const r=f(t,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const i=f(t,["prefixPaddingMs"]);i!=null&&h(e,["prefixPaddingMs"],i);const o=f(t,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function bee(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&h(e,["automaticActivityDetection"],Cee(n));const s=f(t,["activityHandling"]);s!=null&&h(e,["activityHandling"],s);const r=f(t,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function _ee(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&h(e,["automaticActivityDetection"],See(n));const s=f(t,["activityHandling"]);s!=null&&h(e,["activityHandling"],s);const r=f(t,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function Eee(t){const e={},n=f(t,["targetTokens"]);return n!=null&&h(e,["targetTokens"],n),e}function Tee(t){const e={},n=f(t,["targetTokens"]);return n!=null&&h(e,["targetTokens"],n),e}function Aee(t){const e={},n=f(t,["triggerTokens"]);n!=null&&h(e,["triggerTokens"],n);const s=f(t,["slidingWindow"]);return s!=null&&h(e,["slidingWindow"],Eee(s)),e}function Ree(t){const e={},n=f(t,["triggerTokens"]);n!=null&&h(e,["triggerTokens"],n);const s=f(t,["slidingWindow"]);return s!=null&&h(e,["slidingWindow"],Tee(s)),e}function Nee(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&h(e,["proactiveAudio"],n),e}function Pee(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&h(e,["proactiveAudio"],n),e}function Mee(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const i=f(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=f(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(t,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],zZ(e1(p)));const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],ZZ(Vn(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let A=pp(x);Array.isArray(A)&&(A=A.map(P=>yee(hp(P)))),h(e,["setup","tools"],A)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],xee(v));const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],vM());const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","outputAudioTranscription"],vM());const S=f(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],bee(S));const _=f(t,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],Aee(_));const T=f(t,["proactivity"]);return e!==void 0&&T!=null&&h(e,["setup","proactivity"],Nee(T)),n}function kee(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const i=f(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=f(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(t,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],HZ(e1(p)));const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],eee(Vn(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let A=pp(x);Array.isArray(A)&&(A=A.map(P=>vee(hp(P)))),h(e,["setup","tools"],A)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],wee(v));const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],xM());const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","outputAudioTranscription"],xM());const S=f(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],_ee(S));const _=f(t,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],Ree(_));const T=f(t,["proactivity"]);return e!==void 0&&T!=null&&h(e,["setup","proactivity"],Pee(T)),n}function Iee(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["setup","model"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],Mee(r,n)),n}function Dee(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["setup","model"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],kee(r,n)),n}function Lee(){return{}}function Fee(){return{}}function Oee(){return{}}function Uee(){return{}}function Vee(t){const e={},n=f(t,["media"]);n!=null&&h(e,["mediaChunks"],X4(n));const s=f(t,["audio"]);s!=null&&h(e,["audio"],Z4(s));const r=f(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const i=f(t,["video"]);i!=null&&h(e,["video"],Q4(i));const o=f(t,["text"]);return o!=null&&h(e,["text"],o),f(t,["activityStart"])!=null&&h(e,["activityStart"],Lee()),f(t,["activityEnd"])!=null&&h(e,["activityEnd"],Oee()),e}function $ee(t){const e={},n=f(t,["media"]);n!=null&&h(e,["mediaChunks"],X4(n));const s=f(t,["audio"]);s!=null&&h(e,["audio"],Z4(s));const r=f(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const i=f(t,["video"]);i!=null&&h(e,["video"],Q4(i));const o=f(t,["text"]);return o!=null&&h(e,["text"],o),f(t,["activityStart"])!=null&&h(e,["activityStart"],Fee()),f(t,["activityEnd"])!=null&&h(e,["activityEnd"],Uee()),e}function p$(t){const e={},n=f(t,["text"]);n!=null&&h(e,["text"],n);const s=f(t,["weight"]);return s!=null&&h(e,["weight"],s),e}function Bee(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>p$(r))),h(e,["weightedPrompts"],s)}return e}function m$(t){const e={},n=f(t,["temperature"]);n!=null&&h(e,["temperature"],n);const s=f(t,["topK"]);s!=null&&h(e,["topK"],s);const r=f(t,["seed"]);r!=null&&h(e,["seed"],r);const i=f(t,["guidance"]);i!=null&&h(e,["guidance"],i);const o=f(t,["bpm"]);o!=null&&h(e,["bpm"],o);const a=f(t,["density"]);a!=null&&h(e,["density"],a);const l=f(t,["brightness"]);l!=null&&h(e,["brightness"],l);const c=f(t,["scale"]);c!=null&&h(e,["scale"],c);const u=f(t,["muteBass"]);u!=null&&h(e,["muteBass"],u);const p=f(t,["muteDrums"]);p!=null&&h(e,["muteDrums"],p);const g=f(t,["onlyBassAndDrums"]);return g!=null&&h(e,["onlyBassAndDrums"],g),e}function jee(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],m$(n)),e}function g$(t){const e={},n=f(t,["model"]);return n!=null&&h(e,["model"],n),e}function y$(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>p$(r))),h(e,["weightedPrompts"],s)}return e}function PE(t){const e={},n=f(t,["setup"]);n!=null&&h(e,["setup"],g$(n));const s=f(t,["clientContent"]);s!=null&&h(e,["clientContent"],y$(s));const r=f(t,["musicGenerationConfig"]);r!=null&&h(e,["musicGenerationConfig"],m$(r));const i=f(t,["playbackControl"]);return i!=null&&h(e,["playbackControl"],i),e}function zee(){return{}}function Hee(t){const e={},n=f(t,["sessionId"]);return n!=null&&h(e,["sessionId"],n),e}function Gee(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function qee(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function Wee(t){const e={},n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Kee(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["data"]);s!=null&&h(e,["data"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Yee(t){const e={},n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Jee(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["fileUri"]);s!=null&&h(e,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Xee(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],Gee(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],Wee(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],Yee(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function Qee(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],qee(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],Kee(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],Jee(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function Zee(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xee(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function ete(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Qee(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function wM(t){const e={},n=f(t,["text"]);n!=null&&h(e,["text"],n);const s=f(t,["finished"]);return s!=null&&h(e,["finished"],s),e}function CM(t){const e={},n=f(t,["text"]);n!=null&&h(e,["text"],n);const s=f(t,["finished"]);return s!=null&&h(e,["finished"],s),e}function tte(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&h(e,["retrievedUrl"],n);const s=f(t,["urlRetrievalStatus"]);return s!=null&&h(e,["urlRetrievalStatus"],s),e}function nte(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>tte(r))),h(e,["urlMetadata"],s)}return e}function ste(t){const e={},n=f(t,["modelTurn"]);n!=null&&h(e,["modelTurn"],Zee(n));const s=f(t,["turnComplete"]);s!=null&&h(e,["turnComplete"],s);const r=f(t,["interrupted"]);r!=null&&h(e,["interrupted"],r);const i=f(t,["groundingMetadata"]);i!=null&&h(e,["groundingMetadata"],i);const o=f(t,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=f(t,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],wM(a));const l=f(t,["outputTranscription"]);l!=null&&h(e,["outputTranscription"],wM(l));const c=f(t,["urlContextMetadata"]);return c!=null&&h(e,["urlContextMetadata"],nte(c)),e}function rte(t){const e={},n=f(t,["modelTurn"]);n!=null&&h(e,["modelTurn"],ete(n));const s=f(t,["turnComplete"]);s!=null&&h(e,["turnComplete"],s);const r=f(t,["interrupted"]);r!=null&&h(e,["interrupted"],r);const i=f(t,["groundingMetadata"]);i!=null&&h(e,["groundingMetadata"],i);const o=f(t,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=f(t,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],CM(a));const l=f(t,["outputTranscription"]);return l!=null&&h(e,["outputTranscription"],CM(l)),e}function ite(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const s=f(t,["args"]);s!=null&&h(e,["args"],s);const r=f(t,["name"]);return r!=null&&h(e,["name"],r),e}function ote(t){const e={},n=f(t,["args"]);n!=null&&h(e,["args"],n);const s=f(t,["name"]);return s!=null&&h(e,["name"],s),e}function ate(t){const e={},n=f(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ite(r))),h(e,["functionCalls"],s)}return e}function lte(t){const e={},n=f(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ote(r))),h(e,["functionCalls"],s)}return e}function cte(t){const e={},n=f(t,["ids"]);return n!=null&&h(e,["ids"],n),e}function ute(t){const e={},n=f(t,["ids"]);return n!=null&&h(e,["ids"],n),e}function Ov(t){const e={},n=f(t,["modality"]);n!=null&&h(e,["modality"],n);const s=f(t,["tokenCount"]);return s!=null&&h(e,["tokenCount"],s),e}function Uv(t){const e={},n=f(t,["modality"]);n!=null&&h(e,["modality"],n);const s=f(t,["tokenCount"]);return s!=null&&h(e,["tokenCount"],s),e}function dte(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=f(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(t,["responseTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const i=f(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=f(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=f(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=f(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>Ov(y))),h(e,["promptTokensDetails"],g)}const c=f(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>Ov(y))),h(e,["cacheTokensDetails"],g)}const u=f(t,["responseTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>Ov(y))),h(e,["responseTokensDetails"],g)}const p=f(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>Ov(y))),h(e,["toolUsePromptTokensDetails"],g)}return e}function fte(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=f(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const i=f(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=f(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=f(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=f(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(x=>Uv(x))),h(e,["promptTokensDetails"],y)}const c=f(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(x=>Uv(x))),h(e,["cacheTokensDetails"],y)}const u=f(t,["candidatesTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(x=>Uv(x))),h(e,["responseTokensDetails"],y)}const p=f(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>Uv(x))),h(e,["toolUsePromptTokensDetails"],y)}const g=f(t,["trafficType"]);return g!=null&&h(e,["trafficType"],g),e}function hte(t){const e={},n=f(t,["timeLeft"]);return n!=null&&h(e,["timeLeft"],n),e}function pte(t){const e={},n=f(t,["timeLeft"]);return n!=null&&h(e,["timeLeft"],n),e}function mte(t){const e={},n=f(t,["newHandle"]);n!=null&&h(e,["newHandle"],n);const s=f(t,["resumable"]);s!=null&&h(e,["resumable"],s);const r=f(t,["lastConsumedClientMessageIndex"]);return r!=null&&h(e,["lastConsumedClientMessageIndex"],r),e}function gte(t){const e={},n=f(t,["newHandle"]);n!=null&&h(e,["newHandle"],n);const s=f(t,["resumable"]);s!=null&&h(e,["resumable"],s);const r=f(t,["lastConsumedClientMessageIndex"]);return r!=null&&h(e,["lastConsumedClientMessageIndex"],r),e}function yte(t){const e={};f(t,["setupComplete"])!=null&&h(e,["setupComplete"],zee());const s=f(t,["serverContent"]);s!=null&&h(e,["serverContent"],ste(s));const r=f(t,["toolCall"]);r!=null&&h(e,["toolCall"],ate(r));const i=f(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],cte(i));const o=f(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],dte(o));const a=f(t,["goAway"]);a!=null&&h(e,["goAway"],hte(a));const l=f(t,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],mte(l)),e}function vte(t){const e={},n=f(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],Hee(n));const s=f(t,["serverContent"]);s!=null&&h(e,["serverContent"],rte(s));const r=f(t,["toolCall"]);r!=null&&h(e,["toolCall"],lte(r));const i=f(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],ute(i));const o=f(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],fte(o));const a=f(t,["goAway"]);a!=null&&h(e,["goAway"],pte(a));const l=f(t,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],gte(l)),e}function xte(){return{}}function wte(t){const e={},n=f(t,["text"]);n!=null&&h(e,["text"],n);const s=f(t,["weight"]);return s!=null&&h(e,["weight"],s),e}function Cte(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>wte(r))),h(e,["weightedPrompts"],s)}return e}function Ste(t){const e={},n=f(t,["temperature"]);n!=null&&h(e,["temperature"],n);const s=f(t,["topK"]);s!=null&&h(e,["topK"],s);const r=f(t,["seed"]);r!=null&&h(e,["seed"],r);const i=f(t,["guidance"]);i!=null&&h(e,["guidance"],i);const o=f(t,["bpm"]);o!=null&&h(e,["bpm"],o);const a=f(t,["density"]);a!=null&&h(e,["density"],a);const l=f(t,["brightness"]);l!=null&&h(e,["brightness"],l);const c=f(t,["scale"]);c!=null&&h(e,["scale"],c);const u=f(t,["muteBass"]);u!=null&&h(e,["muteBass"],u);const p=f(t,["muteDrums"]);p!=null&&h(e,["muteDrums"],p);const g=f(t,["onlyBassAndDrums"]);return g!=null&&h(e,["onlyBassAndDrums"],g),e}function bte(t){const e={},n=f(t,["clientContent"]);n!=null&&h(e,["clientContent"],Cte(n));const s=f(t,["musicGenerationConfig"]);return s!=null&&h(e,["musicGenerationConfig"],Ste(s)),e}function _te(t){const e={},n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);s!=null&&h(e,["mimeType"],s);const r=f(t,["sourceMetadata"]);return r!=null&&h(e,["sourceMetadata"],bte(r)),e}function Ete(t){const e={},n=f(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>_te(r))),h(e,["audioChunks"],s)}return e}function Tte(t){const e={},n=f(t,["text"]);n!=null&&h(e,["text"],n);const s=f(t,["filteredReason"]);return s!=null&&h(e,["filteredReason"],s),e}function Ate(t){const e={};f(t,["setupComplete"])!=null&&h(e,["setupComplete"],xte());const s=f(t,["serverContent"]);s!=null&&h(e,["serverContent"],Ete(s));const r=f(t,["filteredPrompt"]);return r!=null&&h(e,["filteredPrompt"],Tte(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rte(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function Nte(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Pte(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Mte(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],Rte(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],Nte(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],Pte(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function fC(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Mte(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function kte(t){const e={},n=f(t,["anyOf"]);n!=null&&h(e,["anyOf"],n);const s=f(t,["default"]);s!=null&&h(e,["default"],s);const r=f(t,["description"]);r!=null&&h(e,["description"],r);const i=f(t,["enum"]);i!=null&&h(e,["enum"],i);const o=f(t,["example"]);o!=null&&h(e,["example"],o);const a=f(t,["format"]);a!=null&&h(e,["format"],a);const l=f(t,["items"]);l!=null&&h(e,["items"],l);const c=f(t,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(t,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(t,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const g=f(t,["maximum"]);g!=null&&h(e,["maximum"],g);const y=f(t,["minItems"]);y!=null&&h(e,["minItems"],y);const x=f(t,["minLength"]);x!=null&&h(e,["minLength"],x);const v=f(t,["minProperties"]);v!=null&&h(e,["minProperties"],v);const C=f(t,["minimum"]);C!=null&&h(e,["minimum"],C);const w=f(t,["nullable"]);w!=null&&h(e,["nullable"],w);const S=f(t,["pattern"]);S!=null&&h(e,["pattern"],S);const _=f(t,["properties"]);_!=null&&h(e,["properties"],_);const T=f(t,["propertyOrdering"]);T!=null&&h(e,["propertyOrdering"],T);const A=f(t,["required"]);A!=null&&h(e,["required"],A);const P=f(t,["title"]);P!=null&&h(e,["title"],P);const M=f(t,["type"]);return M!=null&&h(e,["type"],M),e}function Ite(t){const e={};if(f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=f(t,["category"]);n!=null&&h(e,["category"],n);const s=f(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Dte(t){const e={},n=f(t,["behavior"]);n!=null&&h(e,["behavior"],n);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const r=f(t,["name"]);r!=null&&h(e,["name"],r);const i=f(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&h(e,["response"],a);const l=f(t,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function Lte(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function Fte(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],Lte(n)),e}function Ote(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function Ute(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],Ote(n)),e}function Vte(){return{}}function $te(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Dte(c))),h(e,["functionDeclarations"],l)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["googleSearch"]);s!=null&&h(e,["googleSearch"],Fte(s));const r=f(t,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],Ute(r)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&h(e,["urlContext"],Vte());const o=f(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(t,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function Bte(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["allowedFunctionNames"]);return s!=null&&h(e,["allowedFunctionNames"],s),e}function jte(t){const e={},n=f(t,["latitude"]);n!=null&&h(e,["latitude"],n);const s=f(t,["longitude"]);return s!=null&&h(e,["longitude"],s),e}function zte(t){const e={},n=f(t,["latLng"]);n!=null&&h(e,["latLng"],jte(n));const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function Hte(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],Bte(n));const s=f(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],zte(s)),e}function Gte(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function v$(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],Gte(n)),e}function qte(t){const e={},n=f(t,["speaker"]);n!=null&&h(e,["speaker"],n);const s=f(t,["voiceConfig"]);return s!=null&&h(e,["voiceConfig"],v$(s)),e}function Wte(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>qte(r))),h(e,["speakerVoiceConfigs"],s)}return e}function Kte(t){const e={},n=f(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],v$(n));const s=f(t,["multiSpeakerVoiceConfig"]);s!=null&&h(e,["multiSpeakerVoiceConfig"],Wte(s));const r=f(t,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function Yte(t){const e={},n=f(t,["includeThoughts"]);n!=null&&h(e,["includeThoughts"],n);const s=f(t,["thinkingBudget"]);return s!=null&&h(e,["thinkingBudget"],s),e}function Jte(t,e,n){const s={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],fC(Vn(r)));const i=f(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=f(e,["topP"]);o!=null&&h(s,["topP"],o);const a=f(e,["topK"]);a!=null&&h(s,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(s,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(s,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(s,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=f(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const y=f(e,["presencePenalty"]);y!=null&&h(s,["presencePenalty"],y);const x=f(e,["frequencyPenalty"]);x!=null&&h(s,["frequencyPenalty"],x);const v=f(e,["seed"]);v!=null&&h(s,["seed"],v);const C=f(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const w=f(e,["responseSchema"]);w!=null&&h(s,["responseSchema"],kte(Xm(w)));const S=f(e,["responseJsonSchema"]);if(S!=null&&h(s,["responseJsonSchema"],S),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let L=_;Array.isArray(L)&&(L=L.map(U=>Ite(U))),h(n,["safetySettings"],L)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let L=pp(T);Array.isArray(L)&&(L=L.map(U=>$te(hp(U)))),h(n,["tools"],L)}const A=f(e,["toolConfig"]);if(n!==void 0&&A!=null&&h(n,["toolConfig"],Hte(A)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(e,["cachedContent"]);n!==void 0&&P!=null&&h(n,["cachedContent"],_a(t,P));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const I=f(e,["mediaResolution"]);I!=null&&h(s,["mediaResolution"],I);const k=f(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],Kte(ZA(k))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);return D!=null&&h(s,["thinkingConfig"],Yte(D)),s}function SM(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>fC(a))),h(n,["contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["generationConfig"],Jte(t,i,n)),n}function Xte(t,e){const n={},s=f(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const i=f(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Qte(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);r!=null&&h(n,["requests[]","content"],t$(t,r));const i=f(e,["config"]);i!=null&&h(n,["config"],Xte(i,n));const o=f(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],ot(t,o)),n}function Zte(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const i=f(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=f(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const u=f(t,["language"]);e!==void 0&&u!=null&&h(e,["parameters","language"],u);const p=f(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const g=f(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ene(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const i=f(e,["config"]);return i!=null&&h(n,["config"],Zte(i,n)),n}function tne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","name"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function nne(t,e,n){const s={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const i=f(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=f(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],r$(t,a)),s}function sne(t,e){const n={},s=f(e,["config"]);return s!=null&&h(n,["config"],nne(t,s,n)),n}function rne(t,e){const n={},s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const i=f(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function ine(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","name"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],rne(r,n)),n}function one(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","name"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function ane(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>fC(a))),h(n,["contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["config"],ane(i)),n}function cne(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],Ea(n));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function une(t,e){const n={},s=f(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=f(t,["aspectRatio"]);if(e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i),f(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=f(t,["personGeneration"]);if(e!==void 0&&o!=null&&h(e,["parameters","personGeneration"],o),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=f(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const l=f(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&h(e,["parameters","enhancePrompt"],l),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(f(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function dne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const i=f(e,["image"]);if(i!=null&&h(n,["instances[0]","image"],cne(i)),f(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=f(e,["config"]);return o!=null&&h(n,["config"],une(o,n)),n}function fne(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function hne(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["data"]);s!=null&&h(e,["data"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function pne(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["fileUri"]);s!=null&&h(e,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function mne(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],fne(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],hne(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],pne(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function gp(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mne(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function gne(t){const e={},n=f(t,["anyOf"]);n!=null&&h(e,["anyOf"],n);const s=f(t,["default"]);s!=null&&h(e,["default"],s);const r=f(t,["description"]);r!=null&&h(e,["description"],r);const i=f(t,["enum"]);i!=null&&h(e,["enum"],i);const o=f(t,["example"]);o!=null&&h(e,["example"],o);const a=f(t,["format"]);a!=null&&h(e,["format"],a);const l=f(t,["items"]);l!=null&&h(e,["items"],l);const c=f(t,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(t,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(t,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const g=f(t,["maximum"]);g!=null&&h(e,["maximum"],g);const y=f(t,["minItems"]);y!=null&&h(e,["minItems"],y);const x=f(t,["minLength"]);x!=null&&h(e,["minLength"],x);const v=f(t,["minProperties"]);v!=null&&h(e,["minProperties"],v);const C=f(t,["minimum"]);C!=null&&h(e,["minimum"],C);const w=f(t,["nullable"]);w!=null&&h(e,["nullable"],w);const S=f(t,["pattern"]);S!=null&&h(e,["pattern"],S);const _=f(t,["properties"]);_!=null&&h(e,["properties"],_);const T=f(t,["propertyOrdering"]);T!=null&&h(e,["propertyOrdering"],T);const A=f(t,["required"]);A!=null&&h(e,["required"],A);const P=f(t,["title"]);P!=null&&h(e,["title"],P);const M=f(t,["type"]);return M!=null&&h(e,["type"],M),e}function yne(t){const e={},n=f(t,["featureSelectionPreference"]);return n!=null&&h(e,["featureSelectionPreference"],n),e}function vne(t){const e={},n=f(t,["method"]);n!=null&&h(e,["method"],n);const s=f(t,["category"]);s!=null&&h(e,["category"],s);const r=f(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function xne(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&h(e,["description"],n);const s=f(t,["name"]);s!=null&&h(e,["name"],s);const r=f(t,["parameters"]);r!=null&&h(e,["parameters"],r);const i=f(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=f(t,["response"]);o!=null&&h(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function wne(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function Cne(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],wne(n)),e}function Sne(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function bne(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],Sne(n)),e}function _ne(){return{}}function Ene(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&h(e,["apiKeyString"],n),e}function Tne(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&h(e,["apiKeyConfig"],Ene(n));const s=f(t,["authType"]);s!=null&&h(e,["authType"],s);const r=f(t,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const i=f(t,["httpBasicAuthConfig"]);i!=null&&h(e,["httpBasicAuthConfig"],i);const o=f(t,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(t,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function Ane(t){const e={},n=f(t,["authConfig"]);return n!=null&&h(e,["authConfig"],Tne(n)),e}function Rne(){return{}}function x$(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>xne(g))),h(e,["functionDeclarations"],p)}const s=f(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(t,["googleSearch"]);r!=null&&h(e,["googleSearch"],Cne(r));const i=f(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],bne(i)),f(t,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],_ne());const a=f(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],Ane(a)),f(t,["urlContext"])!=null&&h(e,["urlContext"],Rne());const c=f(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(t,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function Nne(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["allowedFunctionNames"]);return s!=null&&h(e,["allowedFunctionNames"],s),e}function Pne(t){const e={},n=f(t,["latitude"]);n!=null&&h(e,["latitude"],n);const s=f(t,["longitude"]);return s!=null&&h(e,["longitude"],s),e}function Mne(t){const e={},n=f(t,["latLng"]);n!=null&&h(e,["latLng"],Pne(n));const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function kne(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],Nne(n));const s=f(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],Mne(s)),e}function Ine(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function Dne(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],Ine(n)),e}function Lne(t){const e={},n=f(t,["voiceConfig"]);if(n!=null&&h(e,["voiceConfig"],Dne(n)),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(t,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function Fne(t){const e={},n=f(t,["includeThoughts"]);n!=null&&h(e,["includeThoughts"],n);const s=f(t,["thinkingBudget"]);return s!=null&&h(e,["thinkingBudget"],s),e}function One(t,e,n){const s={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],gp(Vn(r)));const i=f(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=f(e,["topP"]);o!=null&&h(s,["topP"],o);const a=f(e,["topK"]);a!=null&&h(s,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(s,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(s,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(s,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=f(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const y=f(e,["presencePenalty"]);y!=null&&h(s,["presencePenalty"],y);const x=f(e,["frequencyPenalty"]);x!=null&&h(s,["frequencyPenalty"],x);const v=f(e,["seed"]);v!=null&&h(s,["seed"],v);const C=f(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const w=f(e,["responseSchema"]);w!=null&&h(s,["responseSchema"],gne(Xm(w)));const S=f(e,["responseJsonSchema"]);S!=null&&h(s,["responseJsonSchema"],S);const _=f(e,["routingConfig"]);_!=null&&h(s,["routingConfig"],_);const T=f(e,["modelSelectionConfig"]);T!=null&&h(s,["modelConfig"],yne(T));const A=f(e,["safetySettings"]);if(n!==void 0&&A!=null){let W=A;Array.isArray(W)&&(W=W.map($=>vne($))),h(n,["safetySettings"],W)}const P=f(e,["tools"]);if(n!==void 0&&P!=null){let W=pp(P);Array.isArray(W)&&(W=W.map($=>x$(hp($)))),h(n,["tools"],W)}const M=f(e,["toolConfig"]);n!==void 0&&M!=null&&h(n,["toolConfig"],kne(M));const I=f(e,["labels"]);n!==void 0&&I!=null&&h(n,["labels"],I);const k=f(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],_a(t,k));const D=f(e,["responseModalities"]);D!=null&&h(s,["responseModalities"],D);const L=f(e,["mediaResolution"]);L!=null&&h(s,["mediaResolution"],L);const U=f(e,["speechConfig"]);U!=null&&h(s,["speechConfig"],Lne(ZA(U)));const G=f(e,["audioTimestamp"]);G!=null&&h(s,["audioTimestamp"],G);const O=f(e,["thinkingConfig"]);return O!=null&&h(s,["thinkingConfig"],Fne(O)),s}function bM(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>gp(a))),h(n,["contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["generationConfig"],One(t,i,n)),n}function Une(t,e){const n={},s=f(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(t,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const i=f(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const o=f(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=f(t,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),n}function Vne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);r!=null&&h(n,["instances[]","content"],t$(t,r));const i=f(e,["config"]);return i!=null&&h(n,["config"],Une(i,n)),n}function $ne(t,e){const n={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=f(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const y=f(t,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const x=f(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const v=f(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const C=f(t,["addWatermark"]);e!==void 0&&C!=null&&h(e,["parameters","addWatermark"],C);const w=f(t,["enhancePrompt"]);return e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w),n}function Bne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const i=f(e,["config"]);return i!=null&&h(n,["config"],$ne(i,n)),n}function hC(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=f(t,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ea(s));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function jne(t){const e={},n=f(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const s=f(t,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(t,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function zne(t){const e={},n=f(t,["controlType"]);n!=null&&h(e,["controlType"],n);const s=f(t,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function Hne(t){const e={},n=f(t,["styleDescription"]);return n!=null&&h(e,["styleDescription"],n),e}function Gne(t){const e={},n=f(t,["subjectType"]);n!=null&&h(e,["subjectType"],n);const s=f(t,["subjectDescription"]);return s!=null&&h(e,["subjectDescription"],s),e}function qne(t){const e={},n=f(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],hC(n));const s=f(t,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(t,["referenceType"]);r!=null&&h(e,["referenceType"],r);const i=f(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],jne(i));const o=f(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],zne(o));const a=f(t,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],Hne(a));const l=f(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],Gne(l)),e}function Wne(t,e){const n={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=f(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const y=f(t,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const x=f(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const v=f(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const C=f(t,["editMode"]);e!==void 0&&C!=null&&h(e,["parameters","editMode"],C);const w=f(t,["baseSteps"]);return e!==void 0&&w!=null&&h(e,["parameters","editConfig","baseSteps"],w),n}function Kne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const i=f(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>qne(l))),h(n,["instances[0]","referenceImages"],a)}const o=f(e,["config"]);return o!=null&&h(n,["config"],Wne(o,n)),n}function Yne(t,e){const n={},s=f(t,["includeRaiReason"]);e!==void 0&&s!=null&&h(e,["parameters","includeRaiReason"],s);const r=f(t,["outputMimeType"]);e!==void 0&&r!=null&&h(e,["parameters","outputOptions","mimeType"],r);const i=f(t,["outputCompressionQuality"]);e!==void 0&&i!=null&&h(e,["parameters","outputOptions","compressionQuality"],i);const o=f(t,["enhanceInputImage"]);e!==void 0&&o!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=f(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(t,["mode"]);return e!==void 0&&c!=null&&h(e,["parameters","mode"],c),n}function Jne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["image"]);r!=null&&h(n,["instances[0]","image"],hC(r));const i=f(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=f(e,["config"]);return o!=null&&h(n,["config"],Yne(o,n)),n}function Xne(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","name"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function Qne(t,e,n){const s={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const i=f(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=f(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],r$(t,a)),s}function Zne(t,e){const n={},s=f(e,["config"]);return s!=null&&h(n,["config"],Qne(t,s,n)),n}function ese(t,e){const n={},s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const i=f(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function tse(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],ese(r,n)),n}function nse(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","name"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],r),n}function sse(t,e){const n={},s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],gp(Vn(s)));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>x$(a))),h(e,["tools"],o)}const i=f(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],i),n}function rse(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>gp(a))),h(n,["contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["config"],sse(i,n)),n}function ise(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["contents"]);if(r!=null){let o=yr(r);Array.isArray(o)&&(o=o.map(a=>gp(a))),h(n,["contents"],o)}const i=f(e,["config"]);return i!=null&&h(n,["config"],i),n}function ose(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const s=f(t,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ea(s));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function ase(t,e){const n={},s=f(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=f(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const o=f(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=f(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const y=f(t,["enhancePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","enhancePrompt"],y);const x=f(t,["generateAudio"]);e!==void 0&&x!=null&&h(e,["parameters","generateAudio"],x);const v=f(t,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],hC(v));const C=f(t,["compressionQuality"]);return e!==void 0&&C!=null&&h(e,["parameters","compressionQuality"],C),n}function lse(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["_url","model"],ot(t,s));const r=f(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const i=f(e,["image"]);i!=null&&h(n,["instances[0]","image"],hC(i));const o=f(e,["video"]);o!=null&&h(n,["instances[0]","video"],ose(o));const a=f(e,["config"]);return a!=null&&h(n,["config"],ase(a,n)),n}function cse(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function use(t){const e={},n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function dse(t){const e={},n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function fse(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],cse(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],use(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],dse(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function hse(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fse(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function pse(t){const e={},n=f(t,["citationSources"]);return n!=null&&h(e,["citations"],n),e}function mse(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&h(e,["retrievedUrl"],n);const s=f(t,["urlRetrievalStatus"]);return s!=null&&h(e,["urlRetrievalStatus"],s),e}function gse(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mse(r))),h(e,["urlMetadata"],s)}return e}function yse(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],hse(n));const s=f(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],pse(s));const r=f(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const i=f(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=f(t,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],gse(o));const a=f(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(t,["index"]);c!=null&&h(e,["index"],c);const u=f(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(t,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function _M(t){const e={},n=f(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>yse(a))),h(e,["candidates"],o)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const r=f(t,["promptFeedback"]);r!=null&&h(e,["promptFeedback"],r);const i=f(t,["usageMetadata"]);return i!=null&&h(e,["usageMetadata"],i),e}function vse(t){const e={},n=f(t,["values"]);return n!=null&&h(e,["values"],n),e}function xse(){return{}}function wse(t){const e={},n=f(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vse(i))),h(e,["embeddings"],r)}return f(t,["metadata"])!=null&&h(e,["metadata"],xse()),e}function Cse(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],Ea(n));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w$(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=f(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function Sse(t){const e={},n=f(t,["_self"]);n!=null&&h(e,["image"],Cse(n));const s=f(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(t,["_self"]);return r!=null&&h(e,["safetyAttributes"],w$(r)),e}function bse(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Sse(i))),h(e,["generatedImages"],r)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],w$(s)),e}function _se(t){const e={},n=f(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=f(t,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function ME(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["description"]);r!=null&&h(e,["description"],r);const i=f(t,["version"]);i!=null&&h(e,["version"],i);const o=f(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],_se(o));const a=f(t,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=f(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const c=f(t,["supportedGenerationMethods"]);return c!=null&&h(e,["supportedActions"],c),e}function Ese(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["_self"]);if(s!=null){let r=i$(s);Array.isArray(r)&&(r=r.map(i=>ME(i))),h(e,["models"],r)}return e}function Tse(){return{}}function Ase(t){const e={},n=f(t,["totalTokens"]);n!=null&&h(e,["totalTokens"],n);const s=f(t,["cachedContentTokenCount"]);return s!=null&&h(e,["cachedContentTokenCount"],s),e}function Rse(t){const e={},n=f(t,["video","uri"]);n!=null&&h(e,["uri"],n);const s=f(t,["video","encodedVideo"]);s!=null&&h(e,["videoBytes"],Ea(s));const r=f(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function Nse(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],Rse(n)),e}function Pse(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Nse(o))),h(e,["generatedVideos"],i)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Mse(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const i=f(t,["error"]);i!=null&&h(e,["error"],i);const o=f(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],Pse(o)),e}function kse(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function Ise(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["data"]);s!=null&&h(e,["data"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Dse(t){const e={},n=f(t,["displayName"]);n!=null&&h(e,["displayName"],n);const s=f(t,["fileUri"]);s!=null&&h(e,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Lse(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],kse(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],Ise(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],Dse(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function Fse(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Lse(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function Ose(t){const e={},n=f(t,["citations"]);return n!=null&&h(e,["citations"],n),e}function Use(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&h(e,["retrievedUrl"],n);const s=f(t,["urlRetrievalStatus"]);return s!=null&&h(e,["urlRetrievalStatus"],s),e}function Vse(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Use(r))),h(e,["urlMetadata"],s)}return e}function $se(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],Fse(n));const s=f(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],Ose(s));const r=f(t,["finishMessage"]);r!=null&&h(e,["finishMessage"],r);const i=f(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=f(t,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],Vse(o));const a=f(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(t,["index"]);c!=null&&h(e,["index"],c);const u=f(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(t,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function EM(t){const e={},n=f(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>$se(c))),h(e,["candidates"],l)}const s=f(t,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(t,["responseId"]);r!=null&&h(e,["responseId"],r);const i=f(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=f(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=f(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function Bse(t){const e={},n=f(t,["truncated"]);n!=null&&h(e,["truncated"],n);const s=f(t,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function jse(t){const e={},n=f(t,["values"]);n!=null&&h(e,["values"],n);const s=f(t,["statistics"]);return s!=null&&h(e,["statistics"],Bse(s)),e}function zse(t){const e={},n=f(t,["billableCharacterCount"]);return n!=null&&h(e,["billableCharacterCount"],n),e}function Hse(t){const e={},n=f(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jse(i))),h(e,["embeddings"],r)}const s=f(t,["metadata"]);return s!=null&&h(e,["metadata"],zse(s)),e}function Gse(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=f(t,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],Ea(s));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function C$(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=f(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function t1(t){const e={},n=f(t,["_self"]);n!=null&&h(e,["image"],Gse(n));const s=f(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(t,["_self"]);r!=null&&h(e,["safetyAttributes"],C$(r));const i=f(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function qse(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>t1(i))),h(e,["generatedImages"],r)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],C$(s)),e}function Wse(t){const e={},n=f(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>t1(r))),h(e,["generatedImages"],s)}return e}function Kse(t){const e={},n=f(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>t1(r))),h(e,["generatedImages"],s)}return e}function Yse(t){const e={},n=f(t,["endpoint"]);n!=null&&h(e,["name"],n);const s=f(t,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function Jse(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const s=f(t,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Xse(t){const e={},n=f(t,["checkpointId"]);n!=null&&h(e,["checkpointId"],n);const s=f(t,["epoch"]);s!=null&&h(e,["epoch"],s);const r=f(t,["step"]);return r!=null&&h(e,["step"],r),e}function kE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(t,["description"]);r!=null&&h(e,["description"],r);const i=f(t,["versionId"]);i!=null&&h(e,["version"],i);const o=f(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>Yse(g))),h(e,["endpoints"],p)}const a=f(t,["labels"]);a!=null&&h(e,["labels"],a);const l=f(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],Jse(l));const c=f(t,["defaultCheckpointId"]);c!=null&&h(e,["defaultCheckpointId"],c);const u=f(t,["checkpoints"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>Xse(g))),h(e,["checkpoints"],p)}return e}function Qse(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["_self"]);if(s!=null){let r=i$(s);Array.isArray(r)&&(r=r.map(i=>kE(i))),h(e,["models"],r)}return e}function Zse(){return{}}function ere(t){const e={},n=f(t,["totalTokens"]);return n!=null&&h(e,["totalTokens"],n),e}function tre(t){const e={},n=f(t,["tokensInfo"]);return n!=null&&h(e,["tokensInfo"],n),e}function nre(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=f(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Ea(s));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function sre(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],nre(n)),e}function rre(t){const e={},n=f(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sre(o))),h(e,["generatedVideos"],i)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function ire(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const i=f(t,["error"]);i!=null&&h(e,["error"],i);const o=f(t,["response"]);return o!=null&&h(e,["response"],rre(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ore="Content-Type",are="X-Server-Timeout",lre="User-Agent",IE="x-goog-api-client",cre="1.8.0",ure=`google-genai-sdk/${cre}`,dre="v1beta1",fre="v1beta",TM=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hre{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:dre,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:fre,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?s[r]=Object.assign(Object.assign({},s[r]),i):i!==void 0&&(s[r]=i);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s){if(n&&n.timeout||s){const r=new AbortController,i=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=i}return n&&n.extraBody!==null&&pre(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await AM(r),new EE(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await AM(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return yf(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield vt(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l);try{const p=JSON.parse(c);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),y=g.status,x=g.code,v=`got status: ${y}. ${JSON.stringify(p)}`;if(x>=400&&x<600)throw new dC({message:v,status:x})}}catch(p){if(p.name==="ApiError")throw p}o+=c;let u=o.match(TM);for(;u;){const p=u[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield vt(new EE(g)),o=o.slice(u[0].length),u=o.match(TM)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=ure+" "+this.clientOptions.userAgentExtra;return e[lre]=n,e[IE]=n,e[ore]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(are,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const a=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const l=await this.fetchUploadUrl(r,n);return i.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},o=await this.request({path:Se("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(s=o==null?void 0:o.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function AM(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new dC({message:r,status:n}):new Error(r)}}function pre(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=s(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mre="mcp_used/unknown";function S$(t){for(const e of t)if(n1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function b$(t){var e;const n=(e=t[IE])!==null&&e!==void 0?e:"";t[IE]=(n+` ${mre}`).trimStart()}function gre(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>n1(r)))!==null&&s!==void 0?s:!1}function yre(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!n1(r)))!==null&&s!==void 0?s:!1}function n1(t){return t!==null&&typeof t=="object"&&t instanceof s1}function vre(t,e=100){return yf(this,arguments,function*(){let s,r=0;for(;r<e;){const i=yield vt(t.listTools({cursor:s}));for(const o of i.tools)yield yield vt(o),r++;if(!i.nextCursor)break;s=i.nextCursor}})}class s1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new s1(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,bm(vre(u))),c;c=await l.next(),e=c.done,!e;a=!0){r=c.value,a=!1;const p=r;o.push(p);const g=p.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=u}}catch(p){n={error:p}}finally{try{!a&&!e&&(s=l.return)&&await s.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),dX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await r.callTool({name:s.name,arguments:s.args},void 0,i);n.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xre(t,e,n){const s=new eX;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const i=Ate(r);Object.assign(s,i),e(s)}class wre{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=bre(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(_=>{c=_}),p=e.callbacks,g=function(){c({})},y=this.apiClient,x={onopen:g,onmessage:_=>{xre(y,p.onmessage,_)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(_){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(_){}},v=this.webSocketFactory.create(l,Sre(o),x);v.connect(),await u;const C=ot(this.apiClient,e.model),w=g$({model:C}),S=PE({setup:w});return v.send(JSON.stringify(S)),new Cre(v,this.apiClient)}}class Cre{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Bee(e),s=y$(n);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=jee(e),s=PE(n);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const n=PE({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ef.PLAY)}pause(){this.sendPlaybackControl(ef.PAUSE)}stop(){this.sendPlaybackControl(ef.STOP)}resetContext(){this.sendPlaybackControl(ef.RESET_CONTEXT)}close(){this.conn.close()}}function Sre(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function bre(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _re="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ere(t,e,n){const s=new ZJ;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const o=vte(i);Object.assign(s,o)}else{const o=yte(i);Object.assign(s,o)}e(s)}class Tre{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new wre(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,i,o,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&S$(e.config.tools)&&b$(p);const g=Pre(p);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const k=this.apiClient.getApiKey();let D="BidiGenerateContent",L="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),D="BidiGenerateContentConstrained",L="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${D}?${L}=${k}`}let y=()=>{};const x=new Promise(k=>{y=k}),v=e.callbacks,C=function(){var k;(k=v==null?void 0:v.onopen)===null||k===void 0||k.call(v),y({})},w=this.apiClient,S={onopen:C,onmessage:k=>{Ere(w,v.onmessage,k)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(k){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(k){}},_=this.webSocketFactory.create(u,Nre(g),S);_.connect(),await x;let T=ot(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const k=this.apiClient.getProject(),D=this.apiClient.getLocation();T=`projects/${k}/locations/${D}/`+T}let A={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[H0.AUDIO]}:e.config.responseModalities=[H0.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],M=[];for(const k of P)if(this.isCallableTool(k)){const D=k;M.push(await D.tool())}else M.push(k);M.length>0&&(e.config.tools=M);const I={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=Dee(this.apiClient,I):A=Iee(this.apiClient,I),delete A.config,_.send(JSON.stringify(A)),new Rre(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Are={turnComplete:!0};class Rre{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=yr(n.turns),e.isVertexAI()?s=s.map(r=>gp(r)):s=s.map(r=>fC(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(_re)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},Are),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$ee(e)}:n={realtimeInput:Vee(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Nre(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function Pre(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RM=10;function NM(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Vx(o)){r=!0;break}if(!r)return!0;const i=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Vx(t){return"callTool"in t&&typeof t.callTool=="function"}function PM(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mre extends Sd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,i,o,a;const l=await this.processParamsForMcpUsage(n);if(!gre(n)||NM(n.config))return await this.generateContentInternal(l);if(yre(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const p=yr(l.contents),g=(i=(r=(s=l.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:RM;let y=0;for(;y<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const x=c.candidates[0].content,v=[];for(const C of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Vx(C)){const S=await C.callTool(c.functionCalls);v.push(...S)}y++,u={role:"user",parts:v},l.contents=yr(l.contents),l.contents.push(x),l.contents.push(u),PM(l.config)&&(p.push(x),p.push(u))}return PM(l.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(NM(n.config)){const s=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let i;const o=[];if(s!=null&&s.generatedImages)for(const l of s.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i}:a={generatedImages:o},a}),this.list=async n=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Zy(hd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,s,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>Vx(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&S$(e.config.tools)){const l=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),b$(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,s,r;const i=new Map;for(const o of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Vx(o)){const a=o,l=await a.tool();for(const c of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,s,r;const i=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:RM;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,p){var g,y;return yf(this,arguments,function*(){for(var x,v,C,w;a<i;){o&&(a++,o=!1);const A=yield vt(c.processParamsForMcpUsage(p)),P=yield vt(c.generateContentStreamInternal(A)),M=[],I=[];try{for(var S=!0,_=(v=void 0,bm(P)),T;T=yield vt(_.next()),x=T.done,!x;S=!0){w=T.value,S=!1;const k=w;if(yield yield vt(k),k.candidates&&(!((g=k.candidates[0])===null||g===void 0)&&g.content)){I.push(k.candidates[0].content);for(const D of(y=k.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<i&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(D.functionCall.name)){const L=yield vt(u.get(D.functionCall.name).callTool([D.functionCall]));M.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(k){v={error:k}}finally{try{!S&&!x&&(C=_.return)&&(yield vt(C.call(_)))}finally{if(v)throw v.error}}if(M.length>0){o=!0;const k=new Dp;k.candidates=[{content:{role:"user",parts:M}}],yield yield vt(k);const D=[];D.push(...I),D.push({role:"user",parts:M});const L=yr(p.contents).concat(D);p.contents=L}else break}})}(this,l,e)}async generateContentInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bM(this.apiClient,e);return a=Se("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=EM(u),g=new Dp;return Object.assign(g,p),g})}else{const c=SM(this.apiClient,e);return a=Se("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=_M(u),g=new Dp;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bM(this.apiClient,e);return a=Se("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return yf(this,arguments,function*(){var g,y,x,v;try{for(var C=!0,w=bm(p),S;S=yield vt(w.next()),g=S.done,!g;C=!0){v=S.value,C=!1;const T=EM(yield vt(v.json())),A=new Dp;Object.assign(A,T),yield yield vt(A)}}catch(_){y={error:_}}finally{try{!C&&!g&&(x=w.return)&&(yield vt(x.call(w)))}finally{if(y)throw y.error}}})})}else{const c=SM(this.apiClient,e);return a=Se("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return yf(this,arguments,function*(){var g,y,x,v;try{for(var C=!0,w=bm(p),S;S=yield vt(w.next()),g=S.done,!g;C=!0){v=S.value,C=!1;const T=_M(yield vt(v.json())),A=new Dp;Object.assign(A,T),yield yield vt(A)}}catch(_){y={error:_}}finally{try{!C&&!g&&(x=w.return)&&(yield vt(x.call(w)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Vne(this.apiClient,e);return a=Se("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Hse(u),g=new tM;return Object.assign(g,p),g})}else{const c=Qte(this.apiClient,e);return a=Se("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=wse(u),g=new tM;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Bne(this.apiClient,e);return a=Se("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=qse(u),g=new nM;return Object.assign(g,p),g})}else{const c=ene(this.apiClient,e);return a=Se("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=bse(u),g=new nM;return Object.assign(g,p),g})}}async editImageInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=Kne(this.apiClient,e);return i=Se("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=Wse(l),u=new WJ;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=Jne(this.apiClient,e);return i=Se("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=Kse(l),u=new KJ;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xne(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>kE(u))}else{const c=tne(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>ME(u))}}async listInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Zne(this.apiClient,e);return a=Se("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Qse(u),g=new sM;return Object.assign(g,p),g})}else{const c=sne(this.apiClient,e);return a=Se("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Ese(u),g=new sM;return Object.assign(g,p),g})}}async update(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=tse(this.apiClient,e);return a=Se("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>kE(u))}else{const c=ine(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>ME(u))}}async delete(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nse(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Zse(),p=new rM;return Object.assign(p,u),p})}else{const c=one(this.apiClient,e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Tse(),p=new rM;return Object.assign(p,u),p})}}async countTokens(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=rse(this.apiClient,e);return a=Se("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=ere(u),g=new iM;return Object.assign(g,p),g})}else{const c=lne(this.apiClient,e);return a=Se("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Ase(u),g=new iM;return Object.assign(g,p),g})}}async computeTokens(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=ise(this.apiClient,e);return i=Se("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=tre(l),u=new YJ;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=lse(this.apiClient,e);return a=Se("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>ire(u))}else{const c=dne(this.apiClient,e);return a=Se("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Mse(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kre(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["_url","operationName"],n);const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function Ire(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["_url","operationName"],n);const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function Dre(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["operationName"],n);const s=f(t,["resourceName"]);s!=null&&h(e,["_url","resourceName"],s);const r=f(t,["config"]);return r!=null&&h(e,["config"],r),e}function Lre(t){const e={},n=f(t,["video","uri"]);n!=null&&h(e,["uri"],n);const s=f(t,["video","encodedVideo"]);s!=null&&h(e,["videoBytes"],Ea(s));const r=f(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function Fre(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],Lre(n)),e}function Ore(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fre(o))),h(e,["generatedVideos"],i)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Ure(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const i=f(t,["error"]);i!=null&&h(e,["error"],i);const o=f(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],Ore(o)),e}function Vre(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=f(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Ea(s));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function $re(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],Vre(n)),e}function Bre(t){const e={},n=f(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>$re(o))),h(e,["generatedVideos"],i)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function MM(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const i=f(t,["error"]);i!=null&&h(e,["error"],i);const o=f(t,["response"]);return o!=null&&h(e,["response"],Bre(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jre extends Sd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;return s&&"httpOptions"in s&&(i=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})}async getVideosOperationInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ire(e);return a=Se("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>MM(u))}else{const c=kre(e);return a=Se("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ure(u))}}async fetchPredictVideosOperationInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=Dre(e);return i=Se("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>MM(l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zre(t){const e={},n=f(t,["voiceName"]);return n!=null&&h(e,["voiceName"],n),e}function _$(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&h(e,["prebuiltVoiceConfig"],zre(n)),e}function Hre(t){const e={},n=f(t,["speaker"]);n!=null&&h(e,["speaker"],n);const s=f(t,["voiceConfig"]);return s!=null&&h(e,["voiceConfig"],_$(s)),e}function Gre(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Hre(r))),h(e,["speakerVoiceConfigs"],s)}return e}function qre(t){const e={},n=f(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],_$(n));const s=f(t,["multiSpeakerVoiceConfig"]);s!=null&&h(e,["multiSpeakerVoiceConfig"],Gre(s));const r=f(t,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function Wre(t){const e={},n=f(t,["fps"]);n!=null&&h(e,["fps"],n);const s=f(t,["endOffset"]);s!=null&&h(e,["endOffset"],s);const r=f(t,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function Kre(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&h(e,["data"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Yre(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Jre(t){const e={},n=f(t,["videoMetadata"]);n!=null&&h(e,["videoMetadata"],Wre(n));const s=f(t,["thought"]);s!=null&&h(e,["thought"],s);const r=f(t,["inlineData"]);r!=null&&h(e,["inlineData"],Kre(r));const i=f(t,["fileData"]);i!=null&&h(e,["fileData"],Yre(i));const o=f(t,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(t,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(t,["text"]);return p!=null&&h(e,["text"],p),e}function Xre(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Jre(i))),h(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&h(e,["role"],s),e}function Qre(t){const e={},n=f(t,["behavior"]);n!=null&&h(e,["behavior"],n);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const r=f(t,["name"]);r!=null&&h(e,["name"],r);const i=f(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&h(e,["response"],a);const l=f(t,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function Zre(t){const e={},n=f(t,["startTime"]);n!=null&&h(e,["startTime"],n);const s=f(t,["endTime"]);return s!=null&&h(e,["endTime"],s),e}function eie(t){const e={},n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],Zre(n)),e}function tie(t){const e={},n=f(t,["mode"]);n!=null&&h(e,["mode"],n);const s=f(t,["dynamicThreshold"]);return s!=null&&h(e,["dynamicThreshold"],s),e}function nie(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&h(e,["dynamicRetrievalConfig"],tie(n)),e}function sie(){return{}}function rie(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Qre(c))),h(e,["functionDeclarations"],l)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["googleSearch"]);s!=null&&h(e,["googleSearch"],eie(s));const r=f(t,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],nie(r)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&h(e,["urlContext"],sie());const o=f(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(t,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function iie(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kM(){return{}}function oie(t){const e={},n=f(t,["disabled"]);n!=null&&h(e,["disabled"],n);const s=f(t,["startOfSpeechSensitivity"]);s!=null&&h(e,["startOfSpeechSensitivity"],s);const r=f(t,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const i=f(t,["prefixPaddingMs"]);i!=null&&h(e,["prefixPaddingMs"],i);const o=f(t,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function aie(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&h(e,["automaticActivityDetection"],oie(n));const s=f(t,["activityHandling"]);s!=null&&h(e,["activityHandling"],s);const r=f(t,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function lie(t){const e={},n=f(t,["targetTokens"]);return n!=null&&h(e,["targetTokens"],n),e}function cie(t){const e={},n=f(t,["triggerTokens"]);n!=null&&h(e,["triggerTokens"],n);const s=f(t,["slidingWindow"]);return s!=null&&h(e,["slidingWindow"],lie(s)),e}function uie(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&h(e,["proactiveAudio"],n),e}function die(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const i=f(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=f(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(t,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],qre(e1(p)));const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],Xre(Vn(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let A=pp(x);Array.isArray(A)&&(A=A.map(P=>rie(hp(P)))),h(e,["setup","tools"],A)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],iie(v));const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],kM());const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","outputAudioTranscription"],kM());const S=f(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],aie(S));const _=f(t,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],cie(_));const T=f(t,["proactivity"]);return e!==void 0&&T!=null&&h(e,["setup","proactivity"],uie(T)),n}function fie(t,e){const n={},s=f(e,["model"]);s!=null&&h(n,["setup","model"],ot(t,s));const r=f(e,["config"]);return r!=null&&h(n,["config"],die(r,n)),n}function hie(t,e,n){const s={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const i=f(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const o=f(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const a=f(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&h(n,["bidiGenerateContentSetup"],fie(t,a));const l=f(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),s}function pie(t,e){const n={},s=f(e,["config"]);return s!=null&&h(n,["config"],hie(t,s,n)),n}function mie(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gie(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function yie(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=gie(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class vie extends Sd{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=pie(this.apiClient,e);i=Se("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=yie(a,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>mie(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xie(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function wie(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const i=f(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function Cie(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],wie(n,e)),e}function Sie(t){const e={},n=f(t,["textInput"]);n!=null&&h(e,["textInput"],n);const s=f(t,["output"]);return s!=null&&h(e,["output"],s),e}function bie(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=f(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Sie(r))),h(e,["examples","examples"],s)}return e}function _ie(t,e){const n={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=f(t,["epochCount"]);e!==void 0&&r!=null&&h(e,["tuningTask","hyperparameters","epochCount"],r);const i=f(t,["learningRateMultiplier"]);if(i!=null&&h(n,["tuningTask","hyperparameters","learningRateMultiplier"],i),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=f(t,["batchSize"]);e!==void 0&&o!=null&&h(e,["tuningTask","hyperparameters","batchSize"],o);const a=f(t,["learningRate"]);return e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","learningRate"],a),n}function Eie(t){const e={},n=f(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=f(t,["trainingDataset"]);s!=null&&h(e,["tuningTask","trainingData"],bie(s));const r=f(t,["config"]);return r!=null&&h(e,["config"],_ie(r,e)),e}function Tie(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&h(e,["config"],s),e}function Aie(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const i=f(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function Rie(t){const e={},n=f(t,["config"]);return n!=null&&h(e,["config"],Aie(n,e)),e}function Nie(t,e){const n={},s=f(t,["gcsUri"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=f(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Pie(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&h(n,["validationDatasetUri"],s);const r=f(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function Mie(t,e){const n={},s=f(t,["validationDataset"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec"],Pie(s,n));const r=f(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&h(e,["tunedModelDisplayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const o=f(t,["epochCount"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=f(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=f(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=f(t,["adapterSize"]);if(e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function kie(t){const e={},n=f(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=f(t,["trainingDataset"]);s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],Nie(s,e));const r=f(t,["config"]);return r!=null&&h(e,["config"],Mie(r,e)),e}function Iie(t){const e={},n=f(t,["name"]);n!=null&&h(e,["model"],n);const s=f(t,["name"]);return s!=null&&h(e,["endpoint"],s),e}function E$(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["state"]);s!=null&&h(e,["state"],n$(s));const r=f(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=f(t,["tuningTask","startTime"]);i!=null&&h(e,["startTime"],i);const o=f(t,["tuningTask","completeTime"]);o!=null&&h(e,["endTime"],o);const a=f(t,["updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(t,["description"]);l!=null&&h(e,["description"],l);const c=f(t,["baseModel"]);c!=null&&h(e,["baseModel"],c);const u=f(t,["_self"]);u!=null&&h(e,["tunedModel"],Iie(u));const p=f(t,["distillationSpec"]);p!=null&&h(e,["distillationSpec"],p);const g=f(t,["experiment"]);g!=null&&h(e,["experiment"],g);const y=f(t,["labels"]);y!=null&&h(e,["labels"],y);const x=f(t,["pipelineJob"]);x!=null&&h(e,["pipelineJob"],x);const v=f(t,["satisfiesPzi"]);v!=null&&h(e,["satisfiesPzi"],v);const C=f(t,["satisfiesPzs"]);C!=null&&h(e,["satisfiesPzs"],C);const w=f(t,["serviceAccount"]);w!=null&&h(e,["serviceAccount"],w);const S=f(t,["tunedModelDisplayName"]);return S!=null&&h(e,["tunedModelDisplayName"],S),e}function Die(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>E$(i))),h(e,["tuningJobs"],r)}return e}function Lie(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const i=f(t,["error"]);return i!=null&&h(e,["error"],i),e}function Fie(t){const e={},n=f(t,["checkpointId"]);n!=null&&h(e,["checkpointId"],n);const s=f(t,["epoch"]);s!=null&&h(e,["epoch"],s);const r=f(t,["step"]);r!=null&&h(e,["step"],r);const i=f(t,["endpoint"]);return i!=null&&h(e,["endpoint"],i),e}function Oie(t){const e={},n=f(t,["model"]);n!=null&&h(e,["model"],n);const s=f(t,["endpoint"]);s!=null&&h(e,["endpoint"],s);const r=f(t,["checkpoints"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Fie(o))),h(e,["checkpoints"],i)}return e}function DE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const s=f(t,["state"]);s!=null&&h(e,["state"],n$(s));const r=f(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=f(t,["startTime"]);i!=null&&h(e,["startTime"],i);const o=f(t,["endTime"]);o!=null&&h(e,["endTime"],o);const a=f(t,["updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["description"]);c!=null&&h(e,["description"],c);const u=f(t,["baseModel"]);u!=null&&h(e,["baseModel"],u);const p=f(t,["tunedModel"]);p!=null&&h(e,["tunedModel"],Oie(p));const g=f(t,["supervisedTuningSpec"]);g!=null&&h(e,["supervisedTuningSpec"],g);const y=f(t,["tuningDataStats"]);y!=null&&h(e,["tuningDataStats"],y);const x=f(t,["encryptionSpec"]);x!=null&&h(e,["encryptionSpec"],x);const v=f(t,["partnerModelTuningSpec"]);v!=null&&h(e,["partnerModelTuningSpec"],v);const C=f(t,["distillationSpec"]);C!=null&&h(e,["distillationSpec"],C);const w=f(t,["experiment"]);w!=null&&h(e,["experiment"],w);const S=f(t,["labels"]);S!=null&&h(e,["labels"],S);const _=f(t,["pipelineJob"]);_!=null&&h(e,["pipelineJob"],_);const T=f(t,["satisfiesPzi"]);T!=null&&h(e,["satisfiesPzi"],T);const A=f(t,["satisfiesPzs"]);A!=null&&h(e,["satisfiesPzs"],A);const P=f(t,["serviceAccount"]);P!=null&&h(e,["serviceAccount"],P);const M=f(t,["tunedModelDisplayName"]);return M!=null&&h(e,["tunedModelDisplayName"],M),e}function Uie(t){const e={},n=f(t,["nextPageToken"]);n!=null&&h(e,["nextPageToken"],n);const s=f(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>DE(i))),h(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vie extends Sd{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Zy(hd.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const s=await this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:_E.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Tie(e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>DE(u))}else{const c=xie(e);return a=Se("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>E$(u))}}async listInternal(e){var n,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Rie(e);return a=Se("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Uie(u),g=new oM;return Object.assign(g,p),g})}else{const c=Cie(e);return a=Se("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=Die(u),g=new oM;return Object.assign(g,p),g})}}async tuneInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=kie(e);return i=Se("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>DE(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Eie(e);return i=Se("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>Lie(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $ie{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Bie=1024*1024*8,jie=3,zie=1e3,Hie=2,vS="x-goog-upload-status";async function Gie(t,e,n){var s,r,i;let o=0,a=0,l=new EE(new Response),c="upload";for(o=t.size;a<o;){const p=Math.min(Bie,o-a),g=t.slice(a,a+p);a+p>=o&&(c+=", finalize");let y=0,x=zie;for(;y<jie&&(l=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[vS]));)y++,await Wie(x),x=x*Hie;if(a+=p,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[vS])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[vS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function qie(t){return{size:t.size,type:t.type}}function Wie(t){return new Promise(e=>setTimeout(e,t))}class Kie{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Gie(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qie(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yie{create(e,n,s){return new Jie(e,n,s)}}class Jie{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IM="x-goog-api-key";class Xie{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(IM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(IM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qie="gl-node/";class Zie{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=qJ(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new Xie(this.apiKey);this.apiClient=new hre({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Qie+"web",uploader:new Kie,downloader:new $ie}),this.models=new Mre(this.apiClient),this.live=new Tre(this.apiClient,r,new Yie),this.batches=new wQ(this.apiClient),this.chats=new _Z(this.models,this.apiClient),this.caches=new CZ(this.apiClient),this.files=new OZ(this.apiClient),this.operations=new jre(this.apiClient),this.authTokens=new vie(this.apiClient),this.tunings=new Vie(this.apiClient)}}const eoe=new Zie({apiKey:"demo-key"}),toe="gemini-2.5-flash-preview-04-17",T$=t=>{let e=t.trim();const n=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,s=e.match(n);s&&s[2]&&(e=s[2].trim());try{return JSON.parse(e)}catch(r){return console.error("Failed to parse JSON response:",r),console.error("Original string:",t),null}},noe=t=>{const e=[];let n="";return t.forEach(s=>{s.type==="application/pdf"?n+=`

--- Content from ${s.name} ---
${s.content}`:s.type.startsWith("image/")&&e.push({inlineData:{mimeType:s.type,data:s.content}})}),n&&e.unshift({text:n}),e},r1=async(t,e,n=!1)=>{const s=noe(t);return s.unshift({text:e}),await eoe.models.generateContent({model:toe,contents:{parts:s},config:n?{responseMimeType:"application/json"}:{}})},i1=t=>({id:t.id,name:t.name,type:t.type,content:t.content||""}),soe=async t=>{const e=t.map(i1);return(await r1(e,"Provide a concise, easy-to-understand summary of the following document(s). Focus on the key points, main arguments, and conclusions. If there are images, describe their relevance to the text.")).text},roe=async t=>{const e=t.map(i1),s=await r1(e,'Based on the following document(s), generate 15-20 key terms and their definitions for a set of flashcards. The output must be a valid JSON array of objects, where each object has a "term" and a "definition" key. Do not include any text outside of the JSON array.',!0);return T$(s.text)||[]},ioe=async t=>{const e=t.map(i1),s=await r1(e,'Create a multiple-choice quiz with 10 questions based on the following document(s). For each question, provide 4 distinct options and indicate the correct answer. The output must be a valid JSON array of objects. Each object should have a "question" (string), "options" (array of 4 strings), and "answer" (string, the full text of the correct option). Do not include any text outside of the JSON array.',!0);return T$(s.text)||[]};function ooe({sessionId:t,files:e,onFileAdded:n}){const[s,r]=b.useState(!1),[i,o]=b.useState(!1),[a,l]=b.useState(null),[c,u]=b.useState(""),p=b.useRef(null),{toast:g}=Cr(),y=w=>{w.preventDefault(),r(!1),w.dataTransfer.files&&w.dataTransfer.files.length>0&&x(w.dataTransfer.files)},x=async w=>{if(w.length!==0){o(!0);try{const S=await jJ(w);for(const _ of S){n(_);try{const T=await soe([_]),A=await roe([_]),P=await ioe([_]);l({summary:T,flashcards:A,quiz:P}),g({title:"File processed successfully",description:`Generated summary, ${A.length} flashcards, and ${P.length} quiz questions for ${_.name}`})}catch(T){console.error("Error generating AI content:",T),g({title:"File uploaded",description:`${_.name} was uploaded successfully, but AI processing failed.`,variant:"destructive"})}}}catch(S){console.error("Error uploading files:",S),g({title:"Upload failed",description:"There was an error uploading your files.",variant:"destructive"})}finally{o(!1)}}},v=()=>{var w;(w=p.current)==null||w.click()},C=w=>{w.target.files&&w.target.files.length>0&&x(w.target.files)};return m.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Study Materials"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload PDFs, images, or other documents to generate study materials"})]}),m.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:w=>{w.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:y,children:[m.jsx($D,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),m.jsx("p",{className:"text-lg font-medium mb-2",children:s?"Drop files here":"Drag and drop files here"}),m.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF, PNG, JPG files"}),m.jsx(he,{onClick:v,disabled:i,children:i?"Processing...":"Browse Files"}),m.jsx("input",{ref:p,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:C,className:"hidden"})]}),e.length>0&&m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Files"}),m.jsx("div",{className:"space-y-2",children:e.map(w=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[m.jsx("span",{className:"font-medium",children:w.name}),m.jsx("span",{className:"text-sm text-gray-500",children:w.type})]},w.id))})]}),a&&m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Generated Content"}),m.jsxs("div",{className:"space-y-4",children:[a.summary&&m.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Summary"}),m.jsx("p",{className:"text-sm",children:a.summary})]}),a.flashcards&&a.flashcards.length>0&&m.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[m.jsxs("h4",{className:"font-medium mb-2",children:["Flashcards (",a.flashcards.length,")"]}),m.jsx("div",{className:"space-y-2",children:a.flashcards.slice(0,3).map((w,S)=>m.jsxs("div",{className:"text-sm",children:[m.jsxs("strong",{children:[w.term,":"]})," ",w.definition]},S))})]}),a.quiz&&a.quiz.length>0&&m.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[m.jsxs("h4",{className:"font-medium mb-2",children:["Quiz Questions (",a.quiz.length,")"]}),m.jsx("div",{className:"space-y-2",children:a.quiz.slice(0,2).map((w,S)=>m.jsxs("div",{className:"text-sm",children:[m.jsxs("strong",{children:["Q",S+1,":"]})," ",w.question]},S))})]})]})]})]})}var o1="Progress",a1=100,[aoe,Ioe]=os(o1),[loe,coe]=aoe(o1),A$=b.forwardRef((t,e)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:i=uoe,...o}=t;(r||r===0)&&!DM(r)&&console.error(doe(`${r}`,"Progress"));const a=DM(r)?r:a1;s!==null&&!LM(s,a)&&console.error(foe(`${s}`,"Progress"));const l=LM(s,a)?s:null,c=q0(l)?i(l,a):void 0;return m.jsx(loe,{scope:n,value:l,max:a,children:m.jsx(xe.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":q0(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":P$(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});A$.displayName=o1;var R$="ProgressIndicator",N$=b.forwardRef((t,e)=>{const{__scopeProgress:n,...s}=t,r=coe(R$,n);return m.jsx(xe.div,{"data-state":P$(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});N$.displayName=R$;function uoe(t,e){return`${Math.round(t/e*100)}%`}function P$(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function q0(t){return typeof t=="number"}function DM(t){return q0(t)&&!isNaN(t)&&t>0}function LM(t,e){return q0(t)&&!isNaN(t)&&t<=e&&t>=0}function doe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${a1}\`.`}function foe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${a1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var M$=A$,hoe=N$;const k$=b.forwardRef(({className:t,value:e,...n},s)=>m.jsx(M$,{ref:s,className:Ee("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:m.jsx(hoe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));k$.displayName=M$.displayName;function poe({sessionId:t,flashcards:e,studyMaterials:n=[],files:s=[]}){var Y,_e;const[r,i]=b.useState([]),[o,a]=b.useState(0),[l,c]=b.useState(!1),[u,p]=b.useState(0),[g,y]=b.useState(0),[x,v]=b.useState(0),{toast:C}=Cr(),[w,S]=b.useState(!1),[_,T]=b.useState(""),[A,P]=b.useState("notes"),[M,I]=b.useState("medium"),[k,D]=b.useState(null),[L,U]=b.useState(""),[G,O]=b.useState("medium"),[W,$]=b.useState(!1),[z,B]=b.useState("");b.useEffect(()=>{const re=e.filter(Re=>!Re.mastered);i(V([...re])),a(0),c(!1),y(re.length),v(e.length-re.length);const we=e.length,Te=we>0?Math.round(e.filter(Re=>Re.mastered).length/we*100):0;p(Te)},[e]);const V=re=>{const we=[...re];for(let Te=we.length-1;Te>0;Te--){const Re=Math.floor(Math.random()*(Te+1));[we[Te],we[Re]]=[we[Re],we[Te]]}return we},H=async()=>{if(r.length===0)return;const re=r[o];try{await w7(t,re.id);const we=r.filter(At=>At.id!==re.id);i(we),y(we.length),v(x+1);const Te=e.length,Re=Te>0?Math.round((x+1)/Te*100):0;p(Re),c(!1),a(o>=we.length?0:o),C({title:"Marked as mastered",description:"You've mastered this flashcard!"})}catch{C({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},Q=()=>{if(r.length===0)return;const re=[...r],we=re.splice(o,1)[0];re.push(we),i(re),c(!1),a(o>=re.length-1?0:o)},J=()=>{c(!1),a((o+1)%r.length)},se=()=>{c(!1),a((o-1+r.length)%r.length)},ye=()=>{const re=V([...e]);i(re),a(0),c(!1),y(re.length),v(0),p(0)},Me=async()=>{if(!_){C({title:"Topic required",description:"Please enter a topic for your study material",variant:"destructive"});return}S(!0),D(null);try{const re=await Me(_,A,M,s,t),we={id:`sm-${Date.now()}`,title:_,content:re,format:A,complexity:M,createdat:new Date().toISOString()};D(we),C({title:"Study material generated",description:"Your study material has been created successfully"})}catch(re){C({title:"Error",description:re instanceof Error?re.message:"Failed to generate study material",variant:"destructive"})}finally{S(!1)}},De=async()=>{if(!L){C({title:"Question required",description:"Please enter a question to generate an answer",variant:"destructive"});return}$(!0),B("");try{const re=await Xb(L,G,s,t);B(re),C({title:"Answer generated",description:"Long-form answer has been generated successfully"})}catch(re){C({title:"Error",description:re instanceof Error?re.message:"Failed to generate answer",variant:"destructive"})}finally{$(!1)}};return m.jsxs("div",{children:[m.jsxs(vO,{defaultValue:"longAnswer",className:"w-full",children:[m.jsxs(IA,{className:"w-full mb-6",children:[m.jsxs(Qo,{value:"flashcards",className:"flex-1",children:[m.jsx(u0,{className:"h-4 w-4 mr-2"}),"Flashcards"]}),m.jsxs(Qo,{value:"longAnswer",className:"flex-1",children:[m.jsx(l5,{className:"h-4 w-4 mr-2"}),"Ask Questions"]}),m.jsxs(Qo,{value:"material",className:"flex-1",children:[m.jsx(kR,{className:"h-4 w-4 mr-2"}),"Study Materials"]})]}),m.jsxs(Zo,{value:"flashcards",children:[m.jsx("div",{className:"flex justify-between items-center mb-6",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcard Review"}),m.jsx("p",{className:"text-gray-600",children:"Practice your flashcards until you master them"})]})}),m.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"Mastery Progress"}),m.jsxs("span",{className:"text-sm font-medium",children:[u,"%"]})]}),m.jsx(k$,{value:u,className:"h-2"}),m.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium text-purple-600",children:x})," mastered"]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium text-purple-600",children:g})," remaining"]})]})]}),r.length>0?m.jsxs("div",{children:[m.jsx("div",{className:"flex justify-center mb-8",children:m.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>c(!l),children:m.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${l?"rotate-y-180":""}`,children:[m.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:m.jsx("span",{className:"text-purple-600 font-semibold",children:o+1})}),m.jsx("p",{className:"text-center text-xl font-medium",children:(Y=r[o])==null?void 0:Y.front}),m.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),m.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[m.jsx("p",{className:"text-center text-lg",children:(_e=r[o])==null?void 0:_e.back}),m.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs(he,{variant:"outline",onClick:se,disabled:r.length<=1,className:"flex items-center",children:[m.jsx(FD,{className:"mr-2 h-4 w-4"}),"Previous"]}),m.jsxs(he,{variant:"outline",onClick:J,disabled:r.length<=1,className:"flex items-center",children:["Next",m.jsx(a5,{className:"ml-2 h-4 w-4"})]})]}),m.jsxs("div",{className:"flex gap-4 justify-center",children:[m.jsxs(he,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 flex-1 md:flex-none",onClick:Q,children:[m.jsx(Uy,{className:"mr-2 h-4 w-4"}),"Need More Practice"]}),m.jsxs(he,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 flex-1 md:flex-none",onClick:H,children:[m.jsx(hn,{className:"mr-2 h-4 w-4"}),"Mark as Mastered"]})]})]}):e.length===0?m.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[m.jsx(u0,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards to learn"}),m.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create flashcards first in the Flashcards tab"})]}):m.jsxs("div",{className:"text-center py-16 border rounded-lg bg-purple-50",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:m.jsx(hn,{className:"h-8 w-8 text-purple-600"})}),m.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All cards mastered!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Congratulations! You've mastered all your flashcards."}),m.jsx(he,{className:"gradient-bg",onClick:ye,children:"Restart All Cards"})]})]}),m.jsxs(Zo,{value:"longAnswer",children:[m.jsx("div",{className:"flex justify-between items-center mb-6",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Ask Deep Questions"}),m.jsx("p",{className:"text-gray-600",children:"Get comprehensive answers to complex questions about your study materials"}),s.length>0&&m.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),m.jsxs("span",{className:"text-sm text-green-600 font-medium",children:[s.length," file",s.length>1?"s":""," available for context"]})]})]})}),m.jsxs(Bi,{className:"mb-6",children:[m.jsx(Jo,{children:m.jsx(Ba,{children:"Ask a Question"})}),m.jsx(Xo,{children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ke,{htmlFor:"question",children:"Your Question"}),m.jsx(Rc,{id:"question",placeholder:"Enter a detailed question (e.g., 'Explain how the Holocaust impacted international law and human rights frameworks')",value:L,onChange:re=>U(re.target.value),className:"h-32"})]}),m.jsxs("div",{children:[m.jsx(Ke,{children:"Answer Complexity"}),m.jsxs(Sm,{value:G,onValueChange:O,className:"flex mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Pr,{value:"simple",id:"simple-answer"}),m.jsx(Ke,{htmlFor:"simple-answer",children:"Simple"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"medium",id:"medium-answer"}),m.jsx(Ke,{htmlFor:"medium-answer",children:"Medium"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"advanced",id:"advanced-answer"}),m.jsx(Ke,{htmlFor:"advanced-answer",children:"Advanced"})]})]})]}),m.jsx(he,{onClick:De,disabled:W,className:"w-full",children:W?"Generating...":m.jsxs(m.Fragment,{children:[m.jsx(DT,{className:"mr-2 h-4 w-4"}),"Generate Answer"]})})]})})]}),z&&m.jsxs(Bi,{children:[m.jsx(Jo,{children:m.jsx(Ba,{children:"Detailed Answer"})}),m.jsx(Xo,{children:m.jsx("div",{className:"prose max-w-none",children:m.jsx("div",{dangerouslySetInnerHTML:{__html:z.replace(/\n/g,"<br>")}})})})]})]}),m.jsxs(Zo,{value:"material",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Study Materials"}),s.length>0&&m.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsxs("span",{children:[s.length," file",s.length>1?"s":""," available"]})]})]}),m.jsx("p",{className:"text-gray-600",children:"Generate study materials and practice with flashcards"})]}),n.length>0||k?m.jsxs("div",{className:"mb-6",children:[k&&m.jsxs(Bi,{className:"mb-6",children:[m.jsx(Jo,{children:m.jsx(Ba,{children:k.title})}),m.jsx(Xo,{children:m.jsx("div",{className:"prose max-w-none",children:m.jsx("div",{dangerouslySetInnerHTML:{__html:k.content.replace(/\n/g,"<br>")}})})})]}),n.map(re=>m.jsxs(Bi,{className:"mb-6",children:[m.jsx(Jo,{children:m.jsx(Ba,{children:re.title})}),m.jsx(Xo,{children:m.jsx("div",{className:"prose max-w-none",children:m.jsx("div",{dangerouslySetInnerHTML:{__html:re.content.replace(/\n/g,"<br>")}})})})]},re.id))]}):m.jsxs("div",{className:"text-center py-10 border rounded-lg bg-gray-50 mb-6",children:[m.jsx(kR,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No study materials yet"}),m.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate comprehensive study materials below"})]}),m.jsxs(Bi,{children:[m.jsx(Jo,{children:m.jsx(Ba,{children:"Generate New Study Material"})}),m.jsx(Xo,{children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ke,{htmlFor:"topic",children:"Topic"}),m.jsx(pr,{id:"topic",placeholder:"Enter topic (e.g., 'The Holocaust and World War II')",value:_,onChange:re=>T(re.target.value)})]}),m.jsxs("div",{children:[m.jsx(Ke,{children:"Format"}),m.jsxs(Sm,{value:A,onValueChange:re=>P(re),className:"flex mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Pr,{value:"notes",id:"notes"}),m.jsx(Ke,{htmlFor:"notes",children:"Notes"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"outline",id:"outline"}),m.jsx(Ke,{htmlFor:"outline",children:"Outline"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"summary",id:"summary"}),m.jsx(Ke,{htmlFor:"summary",children:"Summary"})]})]})]}),m.jsxs("div",{children:[m.jsx(Ke,{children:"Complexity"}),m.jsxs(Sm,{value:M,onValueChange:I,className:"flex mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Pr,{value:"simple",id:"simple"}),m.jsx(Ke,{htmlFor:"simple",children:"Simple"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"medium",id:"medium"}),m.jsx(Ke,{htmlFor:"medium",children:"Medium"})]}),m.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[m.jsx(Pr,{value:"advanced",id:"advanced"}),m.jsx(Ke,{htmlFor:"advanced",children:"Advanced"})]})]})]}),m.jsx(he,{onClick:Me,disabled:w,className:"w-full",children:w?"Generating...":m.jsxs(m.Fragment,{children:[m.jsx(y5,{className:"mr-2 h-4 w-4"}),"Generate Study Material"]})})]})})]})]})]}),m.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}function moe(){const{id:t}=PG(),e=yd(),{toast:n}=Cr(),[s,r]=b.useState(null),[i,o]=b.useState("files"),a=ba(),{isLoading:l,error:c,data:u}=V2({queryKey:["session",t],queryFn:()=>nO(t??""),enabled:!!t,retry:1,retryDelay:1e3});return b.useEffect(()=>{u?(console.log("Session query success:",{id:t,data:u}),r(u)):c?(console.error("Session query error:",{id:t,error:c}),n({title:"Error",description:"Failed to load study session",variant:"destructive"}),e("/sessions")):!l&&!u&&(console.log("Session not found for ID:",t),n({title:"Error",description:"Study session not found",variant:"destructive"}),e("/sessions"))},[u,c,l,t,e,n]),l?m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(pf,{}),m.jsx("div",{className:"container mx-auto px-4 py-12",children:m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})]}):s?m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(pf,{}),m.jsxs("div",{ref:a,className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs(he,{variant:"outline",className:"mb-4",onClick:()=>e("/sessions"),children:[m.jsx(FD,{className:"mr-2 h-4 w-4"}),"Back to Sessions"]}),m.jsx("h1",{className:"text-3xl font-bold",children:s.title}),m.jsx("p",{className:"text-gray-600 mt-1",children:s.description})]}),m.jsxs(vO,{value:i,onValueChange:o,children:[m.jsxs(IA,{className:"grid grid-cols-5 mb-8",children:[m.jsxs(Qo,{value:"files",className:"flex items-center",children:[m.jsx(g5,{className:"mr-2 h-4 w-4"}),"Files"]}),m.jsxs(Qo,{value:"flashcards",className:"flex items-center",children:[m.jsx(OD,{className:"mr-2 h-4 w-4"}),"Flashcards"]}),m.jsxs(Qo,{value:"quiz",className:"flex items-center",children:[m.jsx(hn,{className:"mr-2 h-4 w-4"}),"Quiz"]}),m.jsxs(Qo,{value:"learn",className:"flex items-center",children:[m.jsx(u0,{className:"mr-2 h-4 w-4"}),"Learn"]}),m.jsxs(Qo,{value:"chat",className:"flex items-center",children:[m.jsx(DT,{className:"mr-2 h-4 w-4"}),"Chat"]})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[m.jsx(Zo,{value:"files",children:m.jsx(ooe,{sessionId:s.id,files:s.files,onFileAdded:p=>{r({...s,files:[...s.files,p]})}})}),m.jsx(Zo,{value:"flashcards",children:m.jsx(MK,{sessionId:s.id,flashcards:s.flashcards,files:s.files,onFlashcardAdded:p=>{r(g=>({...g,flashcards:[...g.flashcards,p]}))},onFlashcardsAdded:p=>{r(g=>({...g,flashcards:[...g.flashcards,...p]}))},onMasteryToggled:(p,g)=>{r(y=>({...y,flashcards:y.flashcards.map(x=>x.id===p?{...x,mastered:!x.mastered}:x)}))}})}),m.jsx(Zo,{value:"quiz",children:m.jsx(YK,{sessionId:s.id,quizzes:s.quizzes,files:s.files,flashcards:s.flashcards,onQuizAdded:p=>{r({...s,quizzes:[...s.quizzes,{...p,id:`quiz_${Date.now()}`}]})}})}),m.jsx(Zo,{value:"learn",children:m.jsx(poe,{sessionId:s.id,flashcards:s.flashcards,studyMaterials:s.studyMaterials||[],files:s.files})}),m.jsx(Zo,{value:"chat",children:m.jsx(JK,{sessionId:s.id,files:s.files,onFileUploaded:p=>{r({...s,files:[...s.files,p]})}})})]})]})]})]}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(pf,{}),m.jsx("div",{className:"container mx-auto px-4 py-12",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:"Session not found"}),m.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>e("/sessions"),children:"Go back to sessions"})]})})]})}const goe=new TH,yoe=()=>m.jsx(MH,{client:goe,children:m.jsxs(cH,{children:[m.jsx(rz,{}),m.jsx(Fz,{}),m.jsx(Pq,{children:m.jsx(yq,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:m.jsxs(WG,{children:[m.jsx(Md,{path:"/",element:m.jsx(R7,{})}),m.jsxs(Md,{element:m.jsx(Mq,{redirectTo:"/"}),children:[m.jsx(Md,{path:"/sessions",element:m.jsx(M7,{})}),m.jsx(Md,{path:"/session/:id",element:m.jsx(moe,{})})]}),m.jsx(Md,{path:"*",element:m.jsx(N7,{})})]})})})]})});localStorage.removeItem("quiz_io_current_user");xS.createRoot(document.getElementById("root")).render(m.jsx(K.StrictMode,{children:m.jsx(yoe,{})}));
