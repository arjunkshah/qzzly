var G4=Object.defineProperty;var _1=n=>{throw TypeError(n)};var q4=(n,e,t)=>e in n?G4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var q=(n,e,t)=>q4(n,typeof e!="symbol"?e+"":e,t),g_=(n,e,t)=>e.has(n)||_1("Cannot "+t);var d=(n,e,t)=>(g_(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?_1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),E=(n,e,t,s)=>(g_(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),k=(n,e,t)=>(g_(n,e,"access private method"),t);var qt=(n,e,t,s)=>({set _(r){E(n,e,r,t)},get _(){return d(n,e,s)}});function W4(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function K4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var sM={exports:{}},sx={},rM={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy=Symbol.for("react.element"),Y4=Symbol.for("react.portal"),J4=Symbol.for("react.fragment"),X4=Symbol.for("react.strict_mode"),Q4=Symbol.for("react.profiler"),Z4=Symbol.for("react.provider"),eV=Symbol.for("react.context"),tV=Symbol.for("react.forward_ref"),nV=Symbol.for("react.suspense"),sV=Symbol.for("react.memo"),rV=Symbol.for("react.lazy"),C1=Symbol.iterator;function iV(n){return n===null||typeof n!="object"?null:(n=C1&&n[C1]||n["@@iterator"],typeof n=="function"?n:null)}var iM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oM=Object.assign,aM={};function Nf(n,e,t){this.props=n,this.context=e,this.refs=aM,this.updater=t||iM}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Nf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function lM(){}lM.prototype=Nf.prototype;function VE(n,e,t){this.props=n,this.context=e,this.refs=aM,this.updater=t||iM}var jE=VE.prototype=new lM;jE.constructor=VE;oM(jE,Nf.prototype);jE.isPureReactComponent=!0;var S1=Array.isArray,cM=Object.prototype.hasOwnProperty,zE={current:null},uM={key:!0,ref:!0,__self:!0,__source:!0};function dM(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)cM.call(e,s)&&!uM.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:vy,type:n,key:i,ref:o,props:r,_owner:zE.current}}function oV(n,e){return{$$typeof:vy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function HE(n){return typeof n=="object"&&n!==null&&n.$$typeof===vy}function aV(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var b1=/\/+/g;function y_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?aV(""+n.key):e.toString(36)}function Nv(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case vy:case Y4:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+y_(o,0):s,S1(r)?(t="",n!=null&&(t=n.replace(b1,"$&/")+"/"),Nv(r,e,t,"",function(c){return c})):r!=null&&(HE(r)&&(r=oV(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(b1,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",S1(n))for(var a=0;a<n.length;a++){i=n[a];var l=s+y_(i,a);o+=Nv(i,e,t,l,r)}else if(l=iV(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=s+y_(i,a++),o+=Nv(i,e,t,l,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qy(n,e,t){if(n==null)return n;var s=[],r=0;return Nv(n,s,"","",function(i){return e.call(t,i,r++)}),s}function lV(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Gn={current:null},Dv={transition:null},cV={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:Dv,ReactCurrentOwner:zE};function hM(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:qy,forEach:function(n,e,t){qy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return qy(n,function(){e++}),e},toArray:function(n){return qy(n,function(e){return e})||[]},only:function(n){if(!HE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Le.Component=Nf;Le.Fragment=J4;Le.Profiler=Q4;Le.PureComponent=VE;Le.StrictMode=X4;Le.Suspense=nV;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cV;Le.act=hM;Le.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=oM({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)cM.call(e,l)&&!uM.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:vy,type:n.type,key:r,ref:i,props:s,_owner:o}};Le.createContext=function(n){return n={$$typeof:eV,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Z4,_context:n},n.Consumer=n};Le.createElement=dM;Le.createFactory=function(n){var e=dM.bind(null,n);return e.type=n,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(n){return{$$typeof:tV,render:n}};Le.isValidElement=HE;Le.lazy=function(n){return{$$typeof:rV,_payload:{_status:-1,_result:n},_init:lV}};Le.memo=function(n,e){return{$$typeof:sV,type:n,compare:e===void 0?null:e}};Le.startTransition=function(n){var e=Dv.transition;Dv.transition={};try{n()}finally{Dv.transition=e}};Le.unstable_act=hM;Le.useCallback=function(n,e){return Gn.current.useCallback(n,e)};Le.useContext=function(n){return Gn.current.useContext(n)};Le.useDebugValue=function(){};Le.useDeferredValue=function(n){return Gn.current.useDeferredValue(n)};Le.useEffect=function(n,e){return Gn.current.useEffect(n,e)};Le.useId=function(){return Gn.current.useId()};Le.useImperativeHandle=function(n,e,t){return Gn.current.useImperativeHandle(n,e,t)};Le.useInsertionEffect=function(n,e){return Gn.current.useInsertionEffect(n,e)};Le.useLayoutEffect=function(n,e){return Gn.current.useLayoutEffect(n,e)};Le.useMemo=function(n,e){return Gn.current.useMemo(n,e)};Le.useReducer=function(n,e,t){return Gn.current.useReducer(n,e,t)};Le.useRef=function(n){return Gn.current.useRef(n)};Le.useState=function(n){return Gn.current.useState(n)};Le.useSyncExternalStore=function(n,e,t){return Gn.current.useSyncExternalStore(n,e,t)};Le.useTransition=function(){return Gn.current.useTransition()};Le.version="18.3.1";rM.exports=Le;var b=rM.exports;const X=nM(b),fM=W4({__proto__:null,default:X},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uV=b,dV=Symbol.for("react.element"),hV=Symbol.for("react.fragment"),fV=Object.prototype.hasOwnProperty,pV=uV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mV={key:!0,ref:!0,__self:!0,__source:!0};function pM(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)fV.call(e,s)&&!mV.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:dV,type:n,key:i,ref:o,props:r,_owner:pV.current}}sx.Fragment=hV;sx.jsx=pM;sx.jsxs=pM;sM.exports=sx;var y=sM.exports,_C={},mM={exports:{}},Os={},gM={exports:{}},yM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,F){var z=$.length;$.push(F);e:for(;0<z;){var ee=z-1>>>1,Y=$[ee];if(0<r(Y,F))$[ee]=F,$[z]=Y,z=ee;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var F=$[0],z=$.pop();if(z!==F){$[0]=z;e:for(var ee=0,Y=$.length,te=Y>>>1;ee<te;){var he=2*(ee+1)-1,ke=$[he],Pe=he+1,H=$[Pe];if(0>r(ke,z))Pe<Y&&0>r(H,ke)?($[ee]=H,$[Pe]=z,ee=Pe):($[ee]=ke,$[he]=z,ee=he);else if(Pe<Y&&0>r(H,z))$[ee]=H,$[Pe]=z,ee=Pe;else break e}}return F}function r($,F){var z=$.sortIndex-F.sortIndex;return z!==0?z:$.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var F=t(c);F!==null;){if(F.callback===null)s(c);else if(F.startTime<=$)s(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=t(c)}}function T($){if(v=!1,C($),!w)if(t(l)!==null)w=!0,O(R);else{var F=t(c);F!==null&&U(T,F.startTime-$)}}function R($,F){w=!1,v&&(v=!1,x(M),M=-1),g=!0;var z=m;try{for(C(F),f=t(l);f!==null&&(!(f.expirationTime>F)||$&&!D());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,m=f.priorityLevel;var Y=ee(f.expirationTime<=F);F=n.unstable_now(),typeof Y=="function"?f.callback=Y:f===t(l)&&s(l),C(F)}else s(l);f=t(l)}if(f!==null)var te=!0;else{var he=t(c);he!==null&&U(T,he.startTime-F),te=!1}return te}finally{f=null,m=z,g=!1}}var P=!1,I=null,M=-1,N=5,L=-1;function D(){return!(n.unstable_now()-L<N)}function V(){if(I!==null){var $=n.unstable_now();L=$;var F=!0;try{F=I(!0,$)}finally{F?G():(P=!1,I=null)}}else P=!1}var G;if(typeof S=="function")G=function(){S(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,j=B.port2;B.port1.onmessage=V,G=function(){j.postMessage(null)}}else G=function(){_(V,0)};function O($){I=$,P||(P=!0,G())}function U($,F){M=_(function(){$(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){w||g||(w=!0,O(R))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return $()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,F){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=m;m=$;try{return F()}finally{m=z}},n.unstable_scheduleCallback=function($,F,z){var ee=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,$){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,$={id:u++,callback:F,priorityLevel:$,startTime:z,expirationTime:Y,sortIndex:-1},z>ee?($.sortIndex=z,e(c,$),t(l)===null&&$===t(c)&&(v?(x(M),M=-1):v=!0,U(T,z-ee))):($.sortIndex=Y,e(l,$),w||g||(w=!0,O(R))),$},n.unstable_shouldYield=D,n.unstable_wrapCallback=function($){var F=m;return function(){var z=m;m=F;try{return $.apply(this,arguments)}finally{m=z}}}})(yM);gM.exports=yM;var gV=gM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yV=b,Fs=gV;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vM=new Set,um={};function Gu(n,e){vf(n,e),vf(n+"Capture",e)}function vf(n,e){for(um[n]=e,n=0;n<e.length;n++)vM.add(e[n])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CC=Object.prototype.hasOwnProperty,vV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E1={},T1={};function wV(n){return CC.call(T1,n)?!0:CC.call(E1,n)?!1:vV.test(n)?T1[n]=!0:(E1[n]=!0,!1)}function xV(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _V(n,e,t,s){if(e===null||typeof e>"u"||xV(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){mn[n]=new qn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];mn[e]=new qn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){mn[n]=new qn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){mn[n]=new qn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){mn[n]=new qn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){mn[n]=new qn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){mn[n]=new qn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){mn[n]=new qn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){mn[n]=new qn(n,5,!1,n.toLowerCase(),null,!1,!1)});var GE=/[\-:]([a-z])/g;function qE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(GE,qE);mn[e]=new qn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(GE,qE);mn[e]=new qn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(GE,qE);mn[e]=new qn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){mn[n]=new qn(n,1,!1,n.toLowerCase(),null,!1,!1)});mn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){mn[n]=new qn(n,1,!1,n.toLowerCase(),null,!0,!0)});function WE(n,e,t,s){var r=mn.hasOwnProperty(e)?mn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_V(e,t,r,s)&&(t=null),s||r===null?wV(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Wo=yV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wy=Symbol.for("react.element"),Ed=Symbol.for("react.portal"),Td=Symbol.for("react.fragment"),KE=Symbol.for("react.strict_mode"),SC=Symbol.for("react.profiler"),wM=Symbol.for("react.provider"),xM=Symbol.for("react.context"),YE=Symbol.for("react.forward_ref"),bC=Symbol.for("react.suspense"),EC=Symbol.for("react.suspense_list"),JE=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),_M=Symbol.for("react.offscreen"),A1=Symbol.iterator;function sp(n){return n===null||typeof n!="object"?null:(n=A1&&n[A1]||n["@@iterator"],typeof n=="function"?n:null)}var St=Object.assign,v_;function vp(n){if(v_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);v_=e&&e[1]||""}return`
`+v_+n}var w_=!1;function x_(n,e){if(!n||w_)return"";w_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){s=c}n.call(e.prototype)}else{try{throw Error()}catch(c){s=c}n()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{w_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?vp(n):""}function CV(n){switch(n.tag){case 5:return vp(n.type);case 16:return vp("Lazy");case 13:return vp("Suspense");case 19:return vp("SuspenseList");case 0:case 2:case 15:return n=x_(n.type,!1),n;case 11:return n=x_(n.type.render,!1),n;case 1:return n=x_(n.type,!0),n;default:return""}}function TC(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Td:return"Fragment";case Ed:return"Portal";case SC:return"Profiler";case KE:return"StrictMode";case bC:return"Suspense";case EC:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case xM:return(n.displayName||"Context")+".Consumer";case wM:return(n._context.displayName||"Context")+".Provider";case YE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case JE:return e=n.displayName||null,e!==null?e:TC(n.type)||"Memo";case aa:e=n._payload,n=n._init;try{return TC(n(e))}catch{}}return null}function SV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TC(e);case 8:return e===KE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function CM(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bV(n){var e=CM(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ky(n){n._valueTracker||(n._valueTracker=bV(n))}function SM(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=CM(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function N0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function AC(n,e){var t=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function R1(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Cl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bM(n,e){e=e.checked,e!=null&&WE(n,"checked",e,!1)}function RC(n,e){bM(n,e);var t=Cl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?kC(n,e.type,t):e.hasOwnProperty("defaultValue")&&kC(n,e.type,Cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function k1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function kC(n,e,t){(e!=="number"||N0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var wp=Array.isArray;function Vd(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Cl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function PC(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function P1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(wp(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Cl(t)}}function EM(n,e){var t=Cl(e.value),s=Cl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function I1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function TM(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IC(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?TM(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Yy,AM=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Yy=Yy||document.createElement("div"),Yy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function dm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EV=["Webkit","ms","Moz","O"];Object.keys(Yp).forEach(function(n){EV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yp[e]=Yp[n]})});function RM(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yp.hasOwnProperty(n)&&Yp[n]?(""+e).trim():e+"px"}function kM(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=RM(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var TV=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MC(n,e){if(e){if(TV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function NC(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DC=null;function XE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var LC=null,jd=null,zd=null;function M1(n){if(n=_y(n)){if(typeof LC!="function")throw Error(W(280));var e=n.stateNode;e&&(e=lx(e),LC(n.stateNode,n.type,e))}}function PM(n){jd?zd?zd.push(n):zd=[n]:jd=n}function IM(){if(jd){var n=jd,e=zd;if(zd=jd=null,M1(n),e)for(n=0;n<e.length;n++)M1(e[n])}}function MM(n,e){return n(e)}function NM(){}var __=!1;function DM(n,e,t){if(__)return n(e,t);__=!0;try{return MM(n,e,t)}finally{__=!1,(jd!==null||zd!==null)&&(NM(),IM())}}function hm(n,e){var t=n.stateNode;if(t===null)return null;var s=lx(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var FC=!1;if($o)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){FC=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{FC=!1}function AV(n,e,t,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Jp=!1,D0=null,L0=!1,OC=null,RV={onError:function(n){Jp=!0,D0=n}};function kV(n,e,t,s,r,i,o,a,l){Jp=!1,D0=null,AV.apply(RV,arguments)}function PV(n,e,t,s,r,i,o,a,l){if(kV.apply(this,arguments),Jp){if(Jp){var c=D0;Jp=!1,D0=null}else throw Error(W(198));L0||(L0=!0,OC=c)}}function qu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function LM(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function N1(n){if(qu(n)!==n)throw Error(W(188))}function IV(n){var e=n.alternate;if(!e){if(e=qu(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return N1(r),n;if(i===s)return N1(r),e;i=i.sibling}throw Error(W(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function FM(n){return n=IV(n),n!==null?OM(n):null}function OM(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=OM(n);if(e!==null)return e;n=n.sibling}return null}var $M=Fs.unstable_scheduleCallback,D1=Fs.unstable_cancelCallback,MV=Fs.unstable_shouldYield,NV=Fs.unstable_requestPaint,kt=Fs.unstable_now,DV=Fs.unstable_getCurrentPriorityLevel,QE=Fs.unstable_ImmediatePriority,UM=Fs.unstable_UserBlockingPriority,F0=Fs.unstable_NormalPriority,LV=Fs.unstable_LowPriority,BM=Fs.unstable_IdlePriority,rx=null,Ei=null;function FV(n){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(rx,n,void 0,(n.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:UV,OV=Math.log,$V=Math.LN2;function UV(n){return n>>>=0,n===0?32:31-(OV(n)/$V|0)|0}var Jy=64,Xy=4194304;function xp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function O0(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=xp(a):(i&=o,i!==0&&(s=xp(i)))}else o=t&~r,o!==0?s=xp(o):i!==0&&(s=xp(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-$r(e),r=1<<t,s|=n[t],e&=~r;return s}function BV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VV(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-$r(i),a=1<<o,l=r[o];l===-1?(!(a&t)||a&s)&&(r[o]=BV(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function $C(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function VM(){var n=Jy;return Jy<<=1,!(Jy&4194240)&&(Jy=64),n}function C_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function wy(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-$r(e),n[e]=t}function jV(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-$r(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function ZE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-$r(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Ye=0;function jM(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var zM,eT,HM,GM,qM,UC=!1,Qy=[],dl=null,hl=null,fl=null,fm=new Map,pm=new Map,ha=[],zV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L1(n,e){switch(n){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":fm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pm.delete(e.pointerId)}}function ip(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=_y(e),e!==null&&eT(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function HV(n,e,t,s,r){switch(e){case"focusin":return dl=ip(dl,n,e,t,s,r),!0;case"dragenter":return hl=ip(hl,n,e,t,s,r),!0;case"mouseover":return fl=ip(fl,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return fm.set(i,ip(fm.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,pm.set(i,ip(pm.get(i)||null,n,e,t,s,r)),!0}return!1}function WM(n){var e=ec(n.target);if(e!==null){var t=qu(e);if(t!==null){if(e=t.tag,e===13){if(e=LM(t),e!==null){n.blockedOn=e,qM(n.priority,function(){HM(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=BC(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);DC=s,t.target.dispatchEvent(s),DC=null}else return e=_y(t),e!==null&&eT(e),n.blockedOn=t,!1;e.shift()}return!0}function F1(n,e,t){Lv(n)&&t.delete(e)}function GV(){UC=!1,dl!==null&&Lv(dl)&&(dl=null),hl!==null&&Lv(hl)&&(hl=null),fl!==null&&Lv(fl)&&(fl=null),fm.forEach(F1),pm.forEach(F1)}function op(n,e){n.blockedOn===e&&(n.blockedOn=null,UC||(UC=!0,Fs.unstable_scheduleCallback(Fs.unstable_NormalPriority,GV)))}function mm(n){function e(r){return op(r,n)}if(0<Qy.length){op(Qy[0],n);for(var t=1;t<Qy.length;t++){var s=Qy[t];s.blockedOn===n&&(s.blockedOn=null)}}for(dl!==null&&op(dl,n),hl!==null&&op(hl,n),fl!==null&&op(fl,n),fm.forEach(e),pm.forEach(e),t=0;t<ha.length;t++)s=ha[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<ha.length&&(t=ha[0],t.blockedOn===null);)WM(t),t.blockedOn===null&&ha.shift()}var Hd=Wo.ReactCurrentBatchConfig,$0=!0;function qV(n,e,t,s){var r=Ye,i=Hd.transition;Hd.transition=null;try{Ye=1,tT(n,e,t,s)}finally{Ye=r,Hd.transition=i}}function WV(n,e,t,s){var r=Ye,i=Hd.transition;Hd.transition=null;try{Ye=4,tT(n,e,t,s)}finally{Ye=r,Hd.transition=i}}function tT(n,e,t,s){if($0){var r=BC(n,e,t,s);if(r===null)M_(n,e,s,U0,t),L1(n,s);else if(HV(r,n,e,t,s))s.stopPropagation();else if(L1(n,s),e&4&&-1<zV.indexOf(n)){for(;r!==null;){var i=_y(r);if(i!==null&&zM(i),i=BC(n,e,t,s),i===null&&M_(n,e,s,U0,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else M_(n,e,s,null,t)}}var U0=null;function BC(n,e,t,s){if(U0=null,n=XE(s),n=ec(n),n!==null)if(e=qu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=LM(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return U0=n,null}function KM(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DV()){case QE:return 1;case UM:return 4;case F0:case LV:return 16;case BM:return 536870912;default:return 16}default:return 16}}var cl=null,nT=null,Fv=null;function YM(){if(Fv)return Fv;var n,e=nT,t=e.length,s,r="value"in cl?cl.value:cl.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return Fv=r.slice(n,1<s?1-s:void 0)}function Ov(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Zy(){return!0}function O1(){return!1}function $s(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zy:O1,this.isPropagationStopped=O1,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Zy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Zy)},persist:function(){},isPersistent:Zy}),e}var Df={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sT=$s(Df),xy=St({},Df,{view:0,detail:0}),KV=$s(xy),S_,b_,ap,ix=St({},xy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rT,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ap&&(ap&&n.type==="mousemove"?(S_=n.screenX-ap.screenX,b_=n.screenY-ap.screenY):b_=S_=0,ap=n),S_)},movementY:function(n){return"movementY"in n?n.movementY:b_}}),$1=$s(ix),YV=St({},ix,{dataTransfer:0}),JV=$s(YV),XV=St({},xy,{relatedTarget:0}),E_=$s(XV),QV=St({},Df,{animationName:0,elapsedTime:0,pseudoElement:0}),ZV=$s(QV),ej=St({},Df,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tj=$s(ej),nj=St({},Df,{data:0}),U1=$s(nj),sj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ij={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=ij[n])?!!e[n]:!1}function rT(){return oj}var aj=St({},xy,{key:function(n){if(n.key){var e=sj[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ov(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rT,charCode:function(n){return n.type==="keypress"?Ov(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ov(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lj=$s(aj),cj=St({},ix,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B1=$s(cj),uj=St({},xy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rT}),dj=$s(uj),hj=St({},Df,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=$s(hj),pj=St({},ix,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mj=$s(pj),gj=[9,13,27,32],iT=$o&&"CompositionEvent"in window,Xp=null;$o&&"documentMode"in document&&(Xp=document.documentMode);var yj=$o&&"TextEvent"in window&&!Xp,JM=$o&&(!iT||Xp&&8<Xp&&11>=Xp),V1=" ",j1=!1;function XM(n,e){switch(n){case"keyup":return gj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QM(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ad=!1;function vj(n,e){switch(n){case"compositionend":return QM(e);case"keypress":return e.which!==32?null:(j1=!0,V1);case"textInput":return n=e.data,n===V1&&j1?null:n;default:return null}}function wj(n,e){if(Ad)return n==="compositionend"||!iT&&XM(n,e)?(n=YM(),Fv=nT=cl=null,Ad=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JM&&e.locale!=="ko"?null:e.data;default:return null}}var xj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!xj[n.type]:e==="textarea"}function ZM(n,e,t,s){PM(s),e=B0(e,"onChange"),0<e.length&&(t=new sT("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Qp=null,gm=null;function _j(n){uN(n,0)}function ox(n){var e=Pd(n);if(SM(e))return n}function Cj(n,e){if(n==="change")return e}var eN=!1;if($o){var T_;if($o){var A_="oninput"in document;if(!A_){var H1=document.createElement("div");H1.setAttribute("oninput","return;"),A_=typeof H1.oninput=="function"}T_=A_}else T_=!1;eN=T_&&(!document.documentMode||9<document.documentMode)}function G1(){Qp&&(Qp.detachEvent("onpropertychange",tN),gm=Qp=null)}function tN(n){if(n.propertyName==="value"&&ox(gm)){var e=[];ZM(e,gm,n,XE(n)),DM(_j,e)}}function Sj(n,e,t){n==="focusin"?(G1(),Qp=e,gm=t,Qp.attachEvent("onpropertychange",tN)):n==="focusout"&&G1()}function bj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ox(gm)}function Ej(n,e){if(n==="click")return ox(e)}function Tj(n,e){if(n==="input"||n==="change")return ox(e)}function Aj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Br=typeof Object.is=="function"?Object.is:Aj;function ym(n,e){if(Br(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!CC.call(e,r)||!Br(n[r],e[r]))return!1}return!0}function q1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function W1(n,e){var t=q1(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=q1(t)}}function nN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?nN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function sN(){for(var n=window,e=N0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=N0(n.document)}return e}function oT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Rj(n){var e=sN(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&nN(t.ownerDocument.documentElement,t)){if(s!==null&&oT(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=W1(t,i);var o=W1(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kj=$o&&"documentMode"in document&&11>=document.documentMode,Rd=null,VC=null,Zp=null,jC=!1;function K1(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jC||Rd==null||Rd!==N0(s)||(s=Rd,"selectionStart"in s&&oT(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Zp&&ym(Zp,s)||(Zp=s,s=B0(VC,"onSelect"),0<s.length&&(e=new sT("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Rd)))}function ev(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var kd={animationend:ev("Animation","AnimationEnd"),animationiteration:ev("Animation","AnimationIteration"),animationstart:ev("Animation","AnimationStart"),transitionend:ev("Transition","TransitionEnd")},R_={},rN={};$o&&(rN=document.createElement("div").style,"AnimationEvent"in window||(delete kd.animationend.animation,delete kd.animationiteration.animation,delete kd.animationstart.animation),"TransitionEvent"in window||delete kd.transitionend.transition);function ax(n){if(R_[n])return R_[n];if(!kd[n])return n;var e=kd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in rN)return R_[n]=e[t];return n}var iN=ax("animationend"),oN=ax("animationiteration"),aN=ax("animationstart"),lN=ax("transitionend"),cN=new Map,Y1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(n,e){cN.set(n,e),Gu(e,[n])}for(var k_=0;k_<Y1.length;k_++){var P_=Y1[k_],Pj=P_.toLowerCase(),Ij=P_[0].toUpperCase()+P_.slice(1);Nl(Pj,"on"+Ij)}Nl(iN,"onAnimationEnd");Nl(oN,"onAnimationIteration");Nl(aN,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(lN,"onTransitionEnd");vf("onMouseEnter",["mouseout","mouseover"]);vf("onMouseLeave",["mouseout","mouseover"]);vf("onPointerEnter",["pointerout","pointerover"]);vf("onPointerLeave",["pointerout","pointerover"]);Gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mj=new Set("cancel close invalid load scroll toggle".split(" ").concat(_p));function J1(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,PV(s,e,void 0,n),n.currentTarget=null}function uN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;J1(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;J1(r,a,c),i=l}}}if(L0)throw n=OC,L0=!1,OC=null,n}function at(n,e){var t=e[WC];t===void 0&&(t=e[WC]=new Set);var s=n+"__bubble";t.has(s)||(dN(e,n,2,!1),t.add(s))}function I_(n,e,t){var s=0;e&&(s|=4),dN(t,n,s,e)}var tv="_reactListening"+Math.random().toString(36).slice(2);function vm(n){if(!n[tv]){n[tv]=!0,vM.forEach(function(t){t!=="selectionchange"&&(Mj.has(t)||I_(t,!1,n),I_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[tv]||(e[tv]=!0,I_("selectionchange",!1,e))}}function dN(n,e,t,s){switch(KM(e)){case 1:var r=qV;break;case 4:r=WV;break;default:r=tT}t=r.bind(null,e,t,n),r=void 0,!FC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function M_(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}DM(function(){var c=i,u=XE(t),f=[];e:{var m=cN.get(n);if(m!==void 0){var g=sT,w=n;switch(n){case"keypress":if(Ov(t)===0)break e;case"keydown":case"keyup":g=lj;break;case"focusin":w="focus",g=E_;break;case"focusout":w="blur",g=E_;break;case"beforeblur":case"afterblur":g=E_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=JV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dj;break;case iN:case oN:case aN:g=ZV;break;case lN:g=fj;break;case"scroll":g=KV;break;case"wheel":g=mj;break;case"copy":case"cut":case"paste":g=tj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=B1}var v=(e&4)!==0,_=!v&&n==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var S=c,C;S!==null;){C=S;var T=C.stateNode;if(C.tag===5&&T!==null&&(C=T,x!==null&&(T=hm(S,x),T!=null&&v.push(wm(S,T,C)))),_)break;S=S.return}0<v.length&&(m=new g(m,w,null,t,u),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==DC&&(w=t.relatedTarget||t.fromElement)&&(ec(w)||w[Uo]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=t.relatedTarget||t.toElement,g=c,w=w?ec(w):null,w!==null&&(_=qu(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(v=$1,T="onMouseLeave",x="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=B1,T="onPointerLeave",x="onPointerEnter",S="pointer"),_=g==null?m:Pd(g),C=w==null?m:Pd(w),m=new v(T,S+"leave",g,t,u),m.target=_,m.relatedTarget=C,T=null,ec(u)===c&&(v=new v(x,S+"enter",w,t,u),v.target=C,v.relatedTarget=_,T=v),_=T,g&&w)t:{for(v=g,x=w,S=0,C=v;C;C=id(C))S++;for(C=0,T=x;T;T=id(T))C++;for(;0<S-C;)v=id(v),S--;for(;0<C-S;)x=id(x),C--;for(;S--;){if(v===x||x!==null&&v===x.alternate)break t;v=id(v),x=id(x)}v=null}else v=null;g!==null&&X1(f,m,g,v,!1),w!==null&&_!==null&&X1(f,_,w,v,!0)}}e:{if(m=c?Pd(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var R=Cj;else if(z1(m))if(eN)R=Tj;else{R=bj;var P=Sj}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=Ej);if(R&&(R=R(n,c))){ZM(f,R,t,u);break e}P&&P(n,m,c),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&kC(m,"number",m.value)}switch(P=c?Pd(c):window,n){case"focusin":(z1(P)||P.contentEditable==="true")&&(Rd=P,VC=c,Zp=null);break;case"focusout":Zp=VC=Rd=null;break;case"mousedown":jC=!0;break;case"contextmenu":case"mouseup":case"dragend":jC=!1,K1(f,t,u);break;case"selectionchange":if(kj)break;case"keydown":case"keyup":K1(f,t,u)}var I;if(iT)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ad?XM(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(JM&&t.locale!=="ko"&&(Ad||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ad&&(I=YM()):(cl=u,nT="value"in cl?cl.value:cl.textContent,Ad=!0)),P=B0(c,M),0<P.length&&(M=new U1(M,n,null,t,u),f.push({event:M,listeners:P}),I?M.data=I:(I=QM(t),I!==null&&(M.data=I)))),(I=yj?vj(n,t):wj(n,t))&&(c=B0(c,"onBeforeInput"),0<c.length&&(u=new U1("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=I))}uN(f,e)})}function wm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function B0(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=hm(n,t),i!=null&&s.unshift(wm(n,i,r)),i=hm(n,e),i!=null&&s.push(wm(n,i,r))),n=n.return}return s}function id(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function X1(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=hm(t,i),l!=null&&o.unshift(wm(t,l,a))):r||(l=hm(t,i),l!=null&&o.push(wm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Nj=/\r\n?/g,Dj=/\u0000|\uFFFD/g;function Q1(n){return(typeof n=="string"?n:""+n).replace(Nj,`
`).replace(Dj,"")}function nv(n,e,t){if(e=Q1(e),Q1(n)!==e&&t)throw Error(W(425))}function V0(){}var zC=null,HC=null;function GC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qC=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,Z1=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof Z1<"u"?function(n){return Z1.resolve(null).then(n).catch(Oj)}:qC;function Oj(n){setTimeout(function(){throw n})}function N_(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),mm(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);mm(e)}function pl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function eR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Lf=Math.random().toString(36).slice(2),wi="__reactFiber$"+Lf,xm="__reactProps$"+Lf,Uo="__reactContainer$"+Lf,WC="__reactEvents$"+Lf,$j="__reactListeners$"+Lf,Uj="__reactHandles$"+Lf;function ec(n){var e=n[wi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Uo]||t[wi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=eR(n);n!==null;){if(t=n[wi])return t;n=eR(n)}return e}n=t,t=n.parentNode}return null}function _y(n){return n=n[wi]||n[Uo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function lx(n){return n[xm]||null}var KC=[],Id=-1;function Dl(n){return{current:n}}function ct(n){0>Id||(n.current=KC[Id],KC[Id]=null,Id--)}function rt(n,e){Id++,KC[Id]=n.current,n.current=e}var Sl={},Rn=Dl(Sl),ls=Dl(!1),Eu=Sl;function wf(n,e){var t=n.type.contextTypes;if(!t)return Sl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function cs(n){return n=n.childContextTypes,n!=null}function j0(){ct(ls),ct(Rn)}function tR(n,e,t){if(Rn.current!==Sl)throw Error(W(168));rt(Rn,e),rt(ls,t)}function hN(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,SV(n)||"Unknown",r));return St({},t,s)}function z0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sl,Eu=Rn.current,rt(Rn,n),rt(ls,ls.current),!0}function nR(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=hN(n,e,Eu),s.__reactInternalMemoizedMergedChildContext=n,ct(ls),ct(Rn),rt(Rn,n)):ct(ls),rt(ls,t)}var Ki=null,cx=!1,D_=!1;function fN(n){Ki===null?Ki=[n]:Ki.push(n)}function Bj(n){cx=!0,fN(n)}function Ll(){if(!D_&&Ki!==null){D_=!0;var n=0,e=Ye;try{var t=Ki;for(Ye=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ki=null,cx=!1}catch(r){throw Ki!==null&&(Ki=Ki.slice(n+1)),$M(QE,Ll),r}finally{Ye=e,D_=!1}}return null}var Md=[],Nd=0,H0=null,G0=0,Js=[],Xs=0,Tu=null,Io=1,Mo="";function Gl(n,e){Md[Nd++]=G0,Md[Nd++]=H0,H0=n,G0=e}function pN(n,e,t){Js[Xs++]=Io,Js[Xs++]=Mo,Js[Xs++]=Tu,Tu=n;var s=Io;n=Mo;var r=32-$r(s)-1;s&=~(1<<r),t+=1;var i=32-$r(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Io=1<<32-$r(e)+r|t<<r|s,Mo=i+n}else Io=1<<i|t<<r|s,Mo=n}function aT(n){n.return!==null&&(Gl(n,1),pN(n,1,0))}function lT(n){for(;n===H0;)H0=Md[--Nd],Md[Nd]=null,G0=Md[--Nd],Md[Nd]=null;for(;n===Tu;)Tu=Js[--Xs],Js[Xs]=null,Mo=Js[--Xs],Js[Xs]=null,Io=Js[--Xs],Js[Xs]=null}var Ns=null,Ms=null,mt=!1,Lr=null;function mN(n,e){var t=er(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function sR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ns=n,Ms=pl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ns=n,Ms=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Tu!==null?{id:Io,overflow:Mo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=er(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ns=n,Ms=null,!0):!1;default:return!1}}function YC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function JC(n){if(mt){var e=Ms;if(e){var t=e;if(!sR(n,e)){if(YC(n))throw Error(W(418));e=pl(t.nextSibling);var s=Ns;e&&sR(n,e)?mN(s,t):(n.flags=n.flags&-4097|2,mt=!1,Ns=n)}}else{if(YC(n))throw Error(W(418));n.flags=n.flags&-4097|2,mt=!1,Ns=n}}}function rR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ns=n}function sv(n){if(n!==Ns)return!1;if(!mt)return rR(n),mt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!GC(n.type,n.memoizedProps)),e&&(e=Ms)){if(YC(n))throw gN(),Error(W(418));for(;e;)mN(n,e),e=pl(e.nextSibling)}if(rR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ms=pl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ms=null}}else Ms=Ns?pl(n.stateNode.nextSibling):null;return!0}function gN(){for(var n=Ms;n;)n=pl(n.nextSibling)}function xf(){Ms=Ns=null,mt=!1}function cT(n){Lr===null?Lr=[n]:Lr.push(n)}var Vj=Wo.ReactCurrentBatchConfig;function lp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function rv(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iR(n){var e=n._init;return e(n._payload)}function yN(n){function e(x,S){if(n){var C=x.deletions;C===null?(x.deletions=[S],x.flags|=16):C.push(S)}}function t(x,S){if(!n)return null;for(;S!==null;)e(x,S),S=S.sibling;return null}function s(x,S){for(x=new Map;S!==null;)S.key!==null?x.set(S.key,S):x.set(S.index,S),S=S.sibling;return x}function r(x,S){return x=vl(x,S),x.index=0,x.sibling=null,x}function i(x,S,C){return x.index=C,n?(C=x.alternate,C!==null?(C=C.index,C<S?(x.flags|=2,S):C):(x.flags|=2,S)):(x.flags|=1048576,S)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,S,C,T){return S===null||S.tag!==6?(S=V_(C,x.mode,T),S.return=x,S):(S=r(S,C),S.return=x,S)}function l(x,S,C,T){var R=C.type;return R===Td?u(x,S,C.props.children,T,C.key):S!==null&&(S.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===aa&&iR(R)===S.type)?(T=r(S,C.props),T.ref=lp(x,S,C),T.return=x,T):(T=Hv(C.type,C.key,C.props,null,x.mode,T),T.ref=lp(x,S,C),T.return=x,T)}function c(x,S,C,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=j_(C,x.mode,T),S.return=x,S):(S=r(S,C.children||[]),S.return=x,S)}function u(x,S,C,T,R){return S===null||S.tag!==7?(S=_u(C,x.mode,T,R),S.return=x,S):(S=r(S,C),S.return=x,S)}function f(x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=V_(""+S,x.mode,C),S.return=x,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wy:return C=Hv(S.type,S.key,S.props,null,x.mode,C),C.ref=lp(x,null,S),C.return=x,C;case Ed:return S=j_(S,x.mode,C),S.return=x,S;case aa:var T=S._init;return f(x,T(S._payload),C)}if(wp(S)||sp(S))return S=_u(S,x.mode,C,null),S.return=x,S;rv(x,S)}return null}function m(x,S,C,T){var R=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return R!==null?null:a(x,S,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wy:return C.key===R?l(x,S,C,T):null;case Ed:return C.key===R?c(x,S,C,T):null;case aa:return R=C._init,m(x,S,R(C._payload),T)}if(wp(C)||sp(C))return R!==null?null:u(x,S,C,T,null);rv(x,C)}return null}function g(x,S,C,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(C)||null,a(S,x,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wy:return x=x.get(T.key===null?C:T.key)||null,l(S,x,T,R);case Ed:return x=x.get(T.key===null?C:T.key)||null,c(S,x,T,R);case aa:var P=T._init;return g(x,S,C,P(T._payload),R)}if(wp(T)||sp(T))return x=x.get(C)||null,u(S,x,T,R,null);rv(S,T)}return null}function w(x,S,C,T){for(var R=null,P=null,I=S,M=S=0,N=null;I!==null&&M<C.length;M++){I.index>M?(N=I,I=null):N=I.sibling;var L=m(x,I,C[M],T);if(L===null){I===null&&(I=N);break}n&&I&&L.alternate===null&&e(x,I),S=i(L,S,M),P===null?R=L:P.sibling=L,P=L,I=N}if(M===C.length)return t(x,I),mt&&Gl(x,M),R;if(I===null){for(;M<C.length;M++)I=f(x,C[M],T),I!==null&&(S=i(I,S,M),P===null?R=I:P.sibling=I,P=I);return mt&&Gl(x,M),R}for(I=s(x,I);M<C.length;M++)N=g(I,x,M,C[M],T),N!==null&&(n&&N.alternate!==null&&I.delete(N.key===null?M:N.key),S=i(N,S,M),P===null?R=N:P.sibling=N,P=N);return n&&I.forEach(function(D){return e(x,D)}),mt&&Gl(x,M),R}function v(x,S,C,T){var R=sp(C);if(typeof R!="function")throw Error(W(150));if(C=R.call(C),C==null)throw Error(W(151));for(var P=R=null,I=S,M=S=0,N=null,L=C.next();I!==null&&!L.done;M++,L=C.next()){I.index>M?(N=I,I=null):N=I.sibling;var D=m(x,I,L.value,T);if(D===null){I===null&&(I=N);break}n&&I&&D.alternate===null&&e(x,I),S=i(D,S,M),P===null?R=D:P.sibling=D,P=D,I=N}if(L.done)return t(x,I),mt&&Gl(x,M),R;if(I===null){for(;!L.done;M++,L=C.next())L=f(x,L.value,T),L!==null&&(S=i(L,S,M),P===null?R=L:P.sibling=L,P=L);return mt&&Gl(x,M),R}for(I=s(x,I);!L.done;M++,L=C.next())L=g(I,x,M,L.value,T),L!==null&&(n&&L.alternate!==null&&I.delete(L.key===null?M:L.key),S=i(L,S,M),P===null?R=L:P.sibling=L,P=L);return n&&I.forEach(function(V){return e(x,V)}),mt&&Gl(x,M),R}function _(x,S,C,T){if(typeof C=="object"&&C!==null&&C.type===Td&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Wy:e:{for(var R=C.key,P=S;P!==null;){if(P.key===R){if(R=C.type,R===Td){if(P.tag===7){t(x,P.sibling),S=r(P,C.props.children),S.return=x,x=S;break e}}else if(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===aa&&iR(R)===P.type){t(x,P.sibling),S=r(P,C.props),S.ref=lp(x,P,C),S.return=x,x=S;break e}t(x,P);break}else e(x,P);P=P.sibling}C.type===Td?(S=_u(C.props.children,x.mode,T,C.key),S.return=x,x=S):(T=Hv(C.type,C.key,C.props,null,x.mode,T),T.ref=lp(x,S,C),T.return=x,x=T)}return o(x);case Ed:e:{for(P=C.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){t(x,S.sibling),S=r(S,C.children||[]),S.return=x,x=S;break e}else{t(x,S);break}else e(x,S);S=S.sibling}S=j_(C,x.mode,T),S.return=x,x=S}return o(x);case aa:return P=C._init,_(x,S,P(C._payload),T)}if(wp(C))return w(x,S,C,T);if(sp(C))return v(x,S,C,T);rv(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(t(x,S.sibling),S=r(S,C),S.return=x,x=S):(t(x,S),S=V_(C,x.mode,T),S.return=x,x=S),o(x)):t(x,S)}return _}var _f=yN(!0),vN=yN(!1),q0=Dl(null),W0=null,Dd=null,uT=null;function dT(){uT=Dd=W0=null}function hT(n){var e=q0.current;ct(q0),n._currentValue=e}function XC(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Gd(n,e){W0=n,uT=Dd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(as=!0),n.firstContext=null)}function or(n){var e=n._currentValue;if(uT!==n)if(n={context:n,memoizedValue:e,next:null},Dd===null){if(W0===null)throw Error(W(308));Dd=n,W0.dependencies={lanes:0,firstContext:n}}else Dd=Dd.next=n;return e}var tc=null;function fT(n){tc===null?tc=[n]:tc.push(n)}function wN(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,fT(e)):(t.next=r.next,r.next=t),e.interleaved=t,Bo(n,s)}function Bo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var la=!1;function pT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function No(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ml(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Ve&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Bo(n,t)}return r=s.interleaved,r===null?(e.next=e,fT(s)):(e.next=r.next,r.next=e),s.interleaved=e,Bo(n,t)}function $v(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,ZE(n,t)}}function oR(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function K0(n,e,t,s){var r=n.updateQueue;la=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=r.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,v=a;switch(m=e,g=t,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(g,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(g,f,m):w,m==null)break e;f=St({},f,m);break e;case 2:la=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ru|=o,n.lanes=o,n.memoizedState=f}}function aR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var Cy={},Ti=Dl(Cy),_m=Dl(Cy),Cm=Dl(Cy);function nc(n){if(n===Cy)throw Error(W(174));return n}function mT(n,e){switch(rt(Cm,e),rt(_m,n),rt(Ti,Cy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IC(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=IC(e,n)}ct(Ti),rt(Ti,e)}function Cf(){ct(Ti),ct(_m),ct(Cm)}function _N(n){nc(Cm.current);var e=nc(Ti.current),t=IC(e,n.type);e!==t&&(rt(_m,n),rt(Ti,t))}function gT(n){_m.current===n&&(ct(Ti),ct(_m))}var _t=Dl(0);function Y0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L_=[];function yT(){for(var n=0;n<L_.length;n++)L_[n]._workInProgressVersionPrimary=null;L_.length=0}var Uv=Wo.ReactCurrentDispatcher,F_=Wo.ReactCurrentBatchConfig,Au=0,Ct=null,jt=null,tn=null,J0=!1,em=!1,Sm=0,jj=0;function yn(){throw Error(W(321))}function vT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Br(n[t],e[t]))return!1;return!0}function wT(n,e,t,s,r,i){if(Au=i,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uv.current=n===null||n.memoizedState===null?qj:Wj,n=t(s,r),em){i=0;do{if(em=!1,Sm=0,25<=i)throw Error(W(301));i+=1,tn=jt=null,e.updateQueue=null,Uv.current=Kj,n=t(s,r)}while(em)}if(Uv.current=X0,e=jt!==null&&jt.next!==null,Au=0,tn=jt=Ct=null,J0=!1,e)throw Error(W(300));return n}function xT(){var n=Sm!==0;return Sm=0,n}function Qr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ct.memoizedState=tn=n:tn=tn.next=n,tn}function ar(){if(jt===null){var n=Ct.alternate;n=n!==null?n.memoizedState:null}else n=jt.next;var e=tn===null?Ct.memoizedState:tn.next;if(e!==null)tn=e,jt=n;else{if(n===null)throw Error(W(310));jt=n,n={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},tn===null?Ct.memoizedState=tn=n:tn=tn.next=n}return tn}function bm(n,e){return typeof e=="function"?e(n):e}function O_(n){var e=ar(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=jt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Au&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:n(s,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,Ct.lanes|=u,Ru|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Br(s,e.memoizedState)||(as=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,Ct.lanes|=i,Ru|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function $_(n){var e=ar(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);Br(i,e.memoizedState)||(as=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function CN(){}function SN(n,e){var t=Ct,s=ar(),r=e(),i=!Br(s.memoizedState,r);if(i&&(s.memoizedState=r,as=!0),s=s.queue,_T(TN.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||tn!==null&&tn.memoizedState.tag&1){if(t.flags|=2048,Em(9,EN.bind(null,t,s,r,e),void 0,null),nn===null)throw Error(W(349));Au&30||bN(t,e,r)}return r}function bN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function EN(n,e,t,s){e.value=t,e.getSnapshot=s,AN(e)&&RN(n)}function TN(n,e,t){return t(function(){AN(e)&&RN(n)})}function AN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Br(n,t)}catch{return!0}}function RN(n){var e=Bo(n,1);e!==null&&Ur(e,n,1,-1)}function lR(n){var e=Qr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:n},e.queue=n,n=n.dispatch=Gj.bind(null,Ct,n),[e.memoizedState,n]}function Em(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function kN(){return ar().memoizedState}function Bv(n,e,t,s){var r=Qr();Ct.flags|=n,r.memoizedState=Em(1|e,t,void 0,s===void 0?null:s)}function ux(n,e,t,s){var r=ar();s=s===void 0?null:s;var i=void 0;if(jt!==null){var o=jt.memoizedState;if(i=o.destroy,s!==null&&vT(s,o.deps)){r.memoizedState=Em(e,t,i,s);return}}Ct.flags|=n,r.memoizedState=Em(1|e,t,i,s)}function cR(n,e){return Bv(8390656,8,n,e)}function _T(n,e){return ux(2048,8,n,e)}function PN(n,e){return ux(4,2,n,e)}function IN(n,e){return ux(4,4,n,e)}function MN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function NN(n,e,t){return t=t!=null?t.concat([n]):null,ux(4,4,MN.bind(null,e,n),t)}function CT(){}function DN(n,e){var t=ar();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&vT(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function LN(n,e){var t=ar();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&vT(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function FN(n,e,t){return Au&21?(Br(t,e)||(t=VM(),Ct.lanes|=t,Ru|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,as=!0),n.memoizedState=t)}function zj(n,e){var t=Ye;Ye=t!==0&&4>t?t:4,n(!0);var s=F_.transition;F_.transition={};try{n(!1),e()}finally{Ye=t,F_.transition=s}}function ON(){return ar().memoizedState}function Hj(n,e,t){var s=yl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},$N(n))UN(e,t);else if(t=wN(n,e,t,s),t!==null){var r=jn();Ur(t,n,s,r),BN(t,e,s)}}function Gj(n,e,t){var s=yl(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if($N(n))UN(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,Br(a,o)){var l=e.interleaved;l===null?(r.next=r,fT(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=wN(n,e,r,s),t!==null&&(r=jn(),Ur(t,n,s,r),BN(t,e,s))}}function $N(n){var e=n.alternate;return n===Ct||e!==null&&e===Ct}function UN(n,e){em=J0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function BN(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,ZE(n,t)}}var X0={readContext:or,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},qj={readContext:or,useCallback:function(n,e){return Qr().memoizedState=[n,e===void 0?null:e],n},useContext:or,useEffect:cR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Bv(4194308,4,MN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Bv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Bv(4,2,n,e)},useMemo:function(n,e){var t=Qr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Qr();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=Hj.bind(null,Ct,n),[s.memoizedState,n]},useRef:function(n){var e=Qr();return n={current:n},e.memoizedState=n},useState:lR,useDebugValue:CT,useDeferredValue:function(n){return Qr().memoizedState=n},useTransition:function(){var n=lR(!1),e=n[0];return n=zj.bind(null,n[1]),Qr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Ct,r=Qr();if(mt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),nn===null)throw Error(W(349));Au&30||bN(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,cR(TN.bind(null,s,i,n),[n]),s.flags|=2048,Em(9,EN.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Qr(),e=nn.identifierPrefix;if(mt){var t=Mo,s=Io;t=(s&~(1<<32-$r(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Sm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=jj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Wj={readContext:or,useCallback:DN,useContext:or,useEffect:_T,useImperativeHandle:NN,useInsertionEffect:PN,useLayoutEffect:IN,useMemo:LN,useReducer:O_,useRef:kN,useState:function(){return O_(bm)},useDebugValue:CT,useDeferredValue:function(n){var e=ar();return FN(e,jt.memoizedState,n)},useTransition:function(){var n=O_(bm)[0],e=ar().memoizedState;return[n,e]},useMutableSource:CN,useSyncExternalStore:SN,useId:ON,unstable_isNewReconciler:!1},Kj={readContext:or,useCallback:DN,useContext:or,useEffect:_T,useImperativeHandle:NN,useInsertionEffect:PN,useLayoutEffect:IN,useMemo:LN,useReducer:$_,useRef:kN,useState:function(){return $_(bm)},useDebugValue:CT,useDeferredValue:function(n){var e=ar();return jt===null?e.memoizedState=n:FN(e,jt.memoizedState,n)},useTransition:function(){var n=$_(bm)[0],e=ar().memoizedState;return[n,e]},useMutableSource:CN,useSyncExternalStore:SN,useId:ON,unstable_isNewReconciler:!1};function vr(n,e){if(n&&n.defaultProps){e=St({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function QC(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:St({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var dx={isMounted:function(n){return(n=n._reactInternals)?qu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=jn(),r=yl(n),i=No(s,r);i.payload=e,t!=null&&(i.callback=t),e=ml(n,i,r),e!==null&&(Ur(e,n,r,s),$v(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=jn(),r=yl(n),i=No(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=ml(n,i,r),e!==null&&(Ur(e,n,r,s),$v(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=jn(),s=yl(n),r=No(t,s);r.tag=2,e!=null&&(r.callback=e),e=ml(n,r,s),e!==null&&(Ur(e,n,s,t),$v(e,n,s))}};function uR(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ym(t,s)||!ym(r,i):!0}function VN(n,e,t){var s=!1,r=Sl,i=e.contextType;return typeof i=="object"&&i!==null?i=or(i):(r=cs(e)?Eu:Rn.current,s=e.contextTypes,i=(s=s!=null)?wf(n,r):Sl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dx,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function dR(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&dx.enqueueReplaceState(e,e.state,null)}function ZC(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},pT(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=or(i):(i=cs(e)?Eu:Rn.current,r.context=wf(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(QC(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&dx.enqueueReplaceState(r,r.state,null),K0(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Sf(n,e){try{var t="",s=e;do t+=CV(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function U_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function eS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Yj=typeof WeakMap=="function"?WeakMap:Map;function jN(n,e,t){t=No(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Z0||(Z0=!0,uS=s),eS(n,e)},t}function zN(n,e,t){t=No(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){eS(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){eS(n,e),typeof s!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hR(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new Yj;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=c3.bind(null,n,e,t),e.then(n,n))}function fR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function pR(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=No(-1,1),e.tag=2,ml(t,e,1))),t.lanes|=1),n)}var Jj=Wo.ReactCurrentOwner,as=!1;function $n(n,e,t,s){e.child=n===null?vN(e,null,t,s):_f(e,n.child,t,s)}function mR(n,e,t,s,r){t=t.render;var i=e.ref;return Gd(e,r),s=wT(n,e,t,s,i,r),t=xT(),n!==null&&!as?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Vo(n,e,r)):(mt&&t&&aT(e),e.flags|=1,$n(n,e,s,r),e.child)}function gR(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!PT(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,HN(n,e,i,s,r)):(n=Hv(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:ym,t(o,s)&&n.ref===e.ref)return Vo(n,e,r)}return e.flags|=1,n=vl(i,s),n.ref=e.ref,n.return=e,e.child=n}function HN(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(ym(i,s)&&n.ref===e.ref)if(as=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(as=!0);else return e.lanes=n.lanes,Vo(n,e,r)}return tS(n,e,t,s,r)}function GN(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Fd,Rs),Rs|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rt(Fd,Rs),Rs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,rt(Fd,Rs),Rs|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,rt(Fd,Rs),Rs|=s;return $n(n,e,r,t),e.child}function qN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function tS(n,e,t,s,r){var i=cs(t)?Eu:Rn.current;return i=wf(e,i),Gd(e,r),t=wT(n,e,t,s,i,r),s=xT(),n!==null&&!as?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Vo(n,e,r)):(mt&&s&&aT(e),e.flags|=1,$n(n,e,t,r),e.child)}function yR(n,e,t,s,r){if(cs(t)){var i=!0;z0(e)}else i=!1;if(Gd(e,r),e.stateNode===null)Vv(n,e),VN(e,t,s),ZC(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=or(c):(c=cs(t)?Eu:Rn.current,c=wf(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&dR(e,o,s,c),la=!1;var m=e.memoizedState;o.state=m,K0(e,s,o,r),l=e.memoizedState,a!==s||m!==l||ls.current||la?(typeof u=="function"&&(QC(e,t,u,s),l=e.memoizedState),(a=la||uR(e,t,a,s,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,xN(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:vr(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=or(l):(l=cs(t)?Eu:Rn.current,l=wf(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&dR(e,o,s,l),la=!1,m=e.memoizedState,o.state=m,K0(e,s,o,r);var w=e.memoizedState;a!==f||m!==w||ls.current||la?(typeof g=="function"&&(QC(e,t,g,s),w=e.memoizedState),(c=la||uR(e,t,c,s,m,w,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=w),o.props=s,o.state=w,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),s=!1)}return nS(n,e,t,s,i,r)}function nS(n,e,t,s,r,i){qN(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&nR(e,t,!1),Vo(n,e,i);s=e.stateNode,Jj.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=_f(e,n.child,null,i),e.child=_f(e,null,a,i)):$n(n,e,a,i),e.memoizedState=s.state,r&&nR(e,t,!0),e.child}function WN(n){var e=n.stateNode;e.pendingContext?tR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&tR(n,e.context,!1),mT(n,e.containerInfo)}function vR(n,e,t,s,r){return xf(),cT(r),e.flags|=256,$n(n,e,t,s),e.child}var sS={dehydrated:null,treeContext:null,retryLane:0};function rS(n){return{baseLanes:n,cachePool:null,transitions:null}}function KN(n,e,t){var s=e.pendingProps,r=_t.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),rt(_t,r&1),n===null)return JC(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=px(o,s,0,null),n=_u(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=rS(t),e.memoizedState=sS,n):ST(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Xj(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=vl(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=vl(a,i):(i=_u(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?rS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=sS,s}return i=n.child,n=i.sibling,s=vl(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function ST(n,e){return e=px({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function iv(n,e,t,s){return s!==null&&cT(s),_f(e,n.child,null,t),n=ST(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Xj(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=U_(Error(W(422))),iv(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=px({mode:"visible",children:s.children},r,0,null),i=_u(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&_f(e,n.child,null,o),e.child.memoizedState=rS(o),e.memoizedState=sS,i);if(!(e.mode&1))return iv(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=U_(i,s,void 0),iv(n,e,o,s)}if(a=(o&n.childLanes)!==0,as||a){if(s=nn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Bo(n,r),Ur(s,n,r,-1))}return kT(),s=U_(Error(W(421))),iv(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=u3.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,Ms=pl(r.nextSibling),Ns=e,mt=!0,Lr=null,n!==null&&(Js[Xs++]=Io,Js[Xs++]=Mo,Js[Xs++]=Tu,Io=n.id,Mo=n.overflow,Tu=e),e=ST(e,s.children),e.flags|=4096,e)}function wR(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),XC(n.return,e,t)}function B_(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function YN(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if($n(n,e,s.children,t),s=_t.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wR(n,t,e);else if(n.tag===19)wR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(rt(_t,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Y0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),B_(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Y0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}B_(e,!0,t,null,i);break;case"together":B_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Vo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ru|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=vl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=vl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Qj(n,e,t){switch(e.tag){case 3:WN(e),xf();break;case 5:_N(e);break;case 1:cs(e.type)&&z0(e);break;case 4:mT(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;rt(q0,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(rt(_t,_t.current&1),e.flags|=128,null):t&e.child.childLanes?KN(n,e,t):(rt(_t,_t.current&1),n=Vo(n,e,t),n!==null?n.sibling:null);rt(_t,_t.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return YN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rt(_t,_t.current),s)break;return null;case 22:case 23:return e.lanes=0,GN(n,e,t)}return Vo(n,e,t)}var JN,iS,XN,QN;JN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};iS=function(){};XN=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,nc(Ti.current);var i=null;switch(t){case"input":r=AC(n,r),s=AC(n,s),i=[];break;case"select":r=St({},r,{value:void 0}),s=St({},s,{value:void 0}),i=[];break;case"textarea":r=PC(n,r),s=PC(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=V0)}MC(t,s);var o;t=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(um.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(um.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&at("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};QN=function(n,e,t,s){t!==s&&(e.flags|=4)};function cp(n,e){if(!mt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function vn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function Zj(n,e,t){var s=e.pendingProps;switch(lT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return cs(e.type)&&j0(),vn(e),null;case 3:return s=e.stateNode,Cf(),ct(ls),ct(Rn),yT(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(sv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(fS(Lr),Lr=null))),iS(n,e),vn(e),null;case 5:gT(e);var r=nc(Cm.current);if(t=e.type,n!==null&&e.stateNode!=null)XN(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return vn(e),null}if(n=nc(Ti.current),sv(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[wi]=e,s[xm]=i,n=(e.mode&1)!==0,t){case"dialog":at("cancel",s),at("close",s);break;case"iframe":case"object":case"embed":at("load",s);break;case"video":case"audio":for(r=0;r<_p.length;r++)at(_p[r],s);break;case"source":at("error",s);break;case"img":case"image":case"link":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"input":R1(s,i),at("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},at("invalid",s);break;case"textarea":P1(s,i),at("invalid",s)}MC(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&nv(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nv(s.textContent,a,n),r=["children",""+a]):um.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&at("scroll",s)}switch(t){case"input":Ky(s),k1(s,i,!0);break;case"textarea":Ky(s),I1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=V0)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=TM(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[wi]=e,n[xm]=s,JN(n,e,!1,!1),e.stateNode=n;e:{switch(o=NC(t,s),t){case"dialog":at("cancel",n),at("close",n),r=s;break;case"iframe":case"object":case"embed":at("load",n),r=s;break;case"video":case"audio":for(r=0;r<_p.length;r++)at(_p[r],n);r=s;break;case"source":at("error",n),r=s;break;case"img":case"image":case"link":at("error",n),at("load",n),r=s;break;case"details":at("toggle",n),r=s;break;case"input":R1(n,s),r=AC(n,s),at("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=St({},s,{value:void 0}),at("invalid",n);break;case"textarea":P1(n,s),r=PC(n,s),at("invalid",n);break;default:r=s}MC(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?kM(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AM(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&dm(n,l):typeof l=="number"&&dm(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(um.hasOwnProperty(i)?l!=null&&i==="onScroll"&&at("scroll",n):l!=null&&WE(n,i,l,o))}switch(t){case"input":Ky(n),k1(n,s,!1);break;case"textarea":Ky(n),I1(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Cl(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?Vd(n,!!s.multiple,i,!1):s.defaultValue!=null&&Vd(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=V0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(n&&e.stateNode!=null)QN(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=nc(Cm.current),nc(Ti.current),sv(e)){if(s=e.stateNode,t=e.memoizedProps,s[wi]=e,(i=s.nodeValue!==t)&&(n=Ns,n!==null))switch(n.tag){case 3:nv(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nv(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[wi]=e,e.stateNode=s}return vn(e),null;case 13:if(ct(_t),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mt&&Ms!==null&&e.mode&1&&!(e.flags&128))gN(),xf(),e.flags|=98560,i=!1;else if(i=sv(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[wi]=e}else xf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),i=!1}else Lr!==null&&(fS(Lr),Lr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||_t.current&1?Ht===0&&(Ht=3):kT())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return Cf(),iS(n,e),n===null&&vm(e.stateNode.containerInfo),vn(e),null;case 10:return hT(e.type._context),vn(e),null;case 17:return cs(e.type)&&j0(),vn(e),null;case 19:if(ct(_t),i=e.memoizedState,i===null)return vn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)cp(i,!1);else{if(Ht!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Y0(n),o!==null){for(e.flags|=128,cp(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rt(_t,_t.current&1|2),e.child}n=n.sibling}i.tail!==null&&kt()>bf&&(e.flags|=128,s=!0,cp(i,!1),e.lanes=4194304)}else{if(!s)if(n=Y0(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return vn(e),null}else 2*kt()-i.renderingStartTime>bf&&t!==1073741824&&(e.flags|=128,s=!0,cp(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,t=_t.current,rt(_t,s?t&1|2:t&1),e):(vn(e),null);case 22:case 23:return RT(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Rs&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function e3(n,e){switch(lT(e),e.tag){case 1:return cs(e.type)&&j0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Cf(),ct(ls),ct(Rn),yT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return gT(e),null;case 13:if(ct(_t),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));xf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ct(_t),null;case 4:return Cf(),null;case 10:return hT(e.type._context),null;case 22:case 23:return RT(),null;case 24:return null;default:return null}}var ov=!1,Tn=!1,t3=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ld(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Tt(n,e,s)}else t.current=null}function oS(n,e,t){try{t()}catch(s){Tt(n,e,s)}}var xR=!1;function n3(n,e){if(zC=$0,n=sN(),oT(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,m=null;t:for(;;){for(var g;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==i||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===n)break t;if(m===t&&++c===r&&(a=o),m===i&&++u===s&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(HC={focusedElem:n,selectionRange:t},$0=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,x=e.stateNode,S=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:vr(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(T){Tt(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return w=xR,xR=!1,w}function tm(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&oS(e,t,i)}r=r.next}while(r!==s)}}function hx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function aS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function ZN(n){var e=n.alternate;e!==null&&(n.alternate=null,ZN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[wi],delete e[xm],delete e[WC],delete e[$j],delete e[Uj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function eD(n){return n.tag===5||n.tag===3||n.tag===4}function _R(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||eD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=V0));else if(s!==4&&(n=n.child,n!==null))for(lS(n,e,t),n=n.sibling;n!==null;)lS(n,e,t),n=n.sibling}function cS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(cS(n,e,t),n=n.sibling;n!==null;)cS(n,e,t),n=n.sibling}var cn=null,Nr=!1;function na(n,e,t){for(t=t.child;t!==null;)tD(n,e,t),t=t.sibling}function tD(n,e,t){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(rx,t)}catch{}switch(t.tag){case 5:Tn||Ld(t,e);case 6:var s=cn,r=Nr;cn=null,na(n,e,t),cn=s,Nr=r,cn!==null&&(Nr?(n=cn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):cn.removeChild(t.stateNode));break;case 18:cn!==null&&(Nr?(n=cn,t=t.stateNode,n.nodeType===8?N_(n.parentNode,t):n.nodeType===1&&N_(n,t),mm(n)):N_(cn,t.stateNode));break;case 4:s=cn,r=Nr,cn=t.stateNode.containerInfo,Nr=!0,na(n,e,t),cn=s,Nr=r;break;case 0:case 11:case 14:case 15:if(!Tn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&oS(t,e,o),r=r.next}while(r!==s)}na(n,e,t);break;case 1:if(!Tn&&(Ld(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){Tt(t,e,a)}na(n,e,t);break;case 21:na(n,e,t);break;case 22:t.mode&1?(Tn=(s=Tn)||t.memoizedState!==null,na(n,e,t),Tn=s):na(n,e,t);break;default:na(n,e,t)}}function CR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new t3),e.forEach(function(s){var r=d3.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function fr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,Nr=!1;break e;case 3:cn=a.stateNode.containerInfo,Nr=!0;break e;case 4:cn=a.stateNode.containerInfo,Nr=!0;break e}a=a.return}if(cn===null)throw Error(W(160));tD(i,o,r),cn=null,Nr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Tt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nD(e,n),e=e.sibling}function nD(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(fr(e,n),Kr(n),s&4){try{tm(3,n,n.return),hx(3,n)}catch(v){Tt(n,n.return,v)}try{tm(5,n,n.return)}catch(v){Tt(n,n.return,v)}}break;case 1:fr(e,n),Kr(n),s&512&&t!==null&&Ld(t,t.return);break;case 5:if(fr(e,n),Kr(n),s&512&&t!==null&&Ld(t,t.return),n.flags&32){var r=n.stateNode;try{dm(r,"")}catch(v){Tt(n,n.return,v)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bM(r,i),NC(a,o);var c=NC(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?kM(r,f):u==="dangerouslySetInnerHTML"?AM(r,f):u==="children"?dm(r,f):WE(r,u,f,c)}switch(a){case"input":RC(r,i);break;case"textarea":EM(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vd(r,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vd(r,!!i.multiple,i.defaultValue,!0):Vd(r,!!i.multiple,i.multiple?[]:"",!1))}r[xm]=i}catch(v){Tt(n,n.return,v)}}break;case 6:if(fr(e,n),Kr(n),s&4){if(n.stateNode===null)throw Error(W(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(v){Tt(n,n.return,v)}}break;case 3:if(fr(e,n),Kr(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{mm(e.containerInfo)}catch(v){Tt(n,n.return,v)}break;case 4:fr(e,n),Kr(n);break;case 13:fr(e,n),Kr(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(TT=kt())),s&4&&CR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Tn=(c=Tn)||u,fr(e,n),Tn=c):fr(e,n),Kr(n),s&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ie=n,u=n.child;u!==null;){for(f=ie=u;ie!==null;){switch(m=ie,g=m.child,m.tag){case 0:case 11:case 14:case 15:tm(4,m,m.return);break;case 1:Ld(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){s=m,t=m.return;try{e=s,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){Tt(s,t,v)}}break;case 5:Ld(m,m.return);break;case 22:if(m.memoizedState!==null){bR(f);continue}}g!==null?(g.return=m,ie=g):bR(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RM("display",o))}catch(v){Tt(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Tt(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fr(e,n),Kr(n),s&4&&CR(n);break;case 21:break;default:fr(e,n),Kr(n)}}function Kr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(eD(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(dm(r,""),s.flags&=-33);var i=_R(n);cS(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=_R(n);lS(n,a,o);break;default:throw Error(W(161))}}catch(l){Tt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function s3(n,e,t){ie=n,sD(n)}function sD(n,e,t){for(var s=(n.mode&1)!==0;ie!==null;){var r=ie,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||ov;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Tn;a=ov;var c=Tn;if(ov=o,(Tn=l)&&!c)for(ie=r;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?ER(r):l!==null?(l.return=o,ie=l):ER(r);for(;i!==null;)ie=i,sD(i),i=i.sibling;ie=r,ov=a,Tn=c}SR(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ie=i):SR(n)}}function SR(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||hx(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Tn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:vr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&aR(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}aR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&mm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Tn||e.flags&512&&aS(e)}catch(m){Tt(e,e.return,m)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function bR(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function ER(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hx(4,e)}catch(l){Tt(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Tt(e,r,l)}}var i=e.return;try{aS(e)}catch(l){Tt(e,i,l)}break;case 5:var o=e.return;try{aS(e)}catch(l){Tt(e,o,l)}}}catch(l){Tt(e,e.return,l)}if(e===n){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var r3=Math.ceil,Q0=Wo.ReactCurrentDispatcher,bT=Wo.ReactCurrentOwner,tr=Wo.ReactCurrentBatchConfig,Ve=0,nn=null,Lt=null,fn=0,Rs=0,Fd=Dl(0),Ht=0,Tm=null,Ru=0,fx=0,ET=0,nm=null,is=null,TT=0,bf=1/0,Hi=null,Z0=!1,uS=null,gl=null,av=!1,ul=null,ew=0,sm=0,dS=null,jv=-1,zv=0;function jn(){return Ve&6?kt():jv!==-1?jv:jv=kt()}function yl(n){return n.mode&1?Ve&2&&fn!==0?fn&-fn:Vj.transition!==null?(zv===0&&(zv=VM()),zv):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:KM(n.type)),n):1}function Ur(n,e,t,s){if(50<sm)throw sm=0,dS=null,Error(W(185));wy(n,t,s),(!(Ve&2)||n!==nn)&&(n===nn&&(!(Ve&2)&&(fx|=t),Ht===4&&fa(n,fn)),us(n,s),t===1&&Ve===0&&!(e.mode&1)&&(bf=kt()+500,cx&&Ll()))}function us(n,e){var t=n.callbackNode;VV(n,e);var s=O0(n,n===nn?fn:0);if(s===0)t!==null&&D1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&D1(t),e===1)n.tag===0?Bj(TR.bind(null,n)):fN(TR.bind(null,n)),Fj(function(){!(Ve&6)&&Ll()}),t=null;else{switch(jM(s)){case 1:t=QE;break;case 4:t=UM;break;case 16:t=F0;break;case 536870912:t=BM;break;default:t=F0}t=dD(t,rD.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function rD(n,e){if(jv=-1,zv=0,Ve&6)throw Error(W(327));var t=n.callbackNode;if(qd()&&n.callbackNode!==t)return null;var s=O0(n,n===nn?fn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=tw(n,s);else{e=s;var r=Ve;Ve|=2;var i=oD();(nn!==n||fn!==e)&&(Hi=null,bf=kt()+500,xu(n,e));do try{a3();break}catch(a){iD(n,a)}while(!0);dT(),Q0.current=i,Ve=r,Lt!==null?e=0:(nn=null,fn=0,e=Ht)}if(e!==0){if(e===2&&(r=$C(n),r!==0&&(s=r,e=hS(n,r))),e===1)throw t=Tm,xu(n,0),fa(n,s),us(n,kt()),t;if(e===6)fa(n,s);else{if(r=n.current.alternate,!(s&30)&&!i3(r)&&(e=tw(n,s),e===2&&(i=$C(n),i!==0&&(s=i,e=hS(n,i))),e===1))throw t=Tm,xu(n,0),fa(n,s),us(n,kt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:ql(n,is,Hi);break;case 3:if(fa(n,s),(s&130023424)===s&&(e=TT+500-kt(),10<e)){if(O0(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){jn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=qC(ql.bind(null,n,is,Hi),e);break}ql(n,is,Hi);break;case 4:if(fa(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-$r(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=kt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*r3(s/1960))-s,10<s){n.timeoutHandle=qC(ql.bind(null,n,is,Hi),s);break}ql(n,is,Hi);break;case 5:ql(n,is,Hi);break;default:throw Error(W(329))}}}return us(n,kt()),n.callbackNode===t?rD.bind(null,n):null}function hS(n,e){var t=nm;return n.current.memoizedState.isDehydrated&&(xu(n,e).flags|=256),n=tw(n,e),n!==2&&(e=is,is=t,e!==null&&fS(e)),n}function fS(n){is===null?is=n:is.push.apply(is,n)}function i3(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Br(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fa(n,e){for(e&=~ET,e&=~fx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-$r(e),s=1<<t;n[t]=-1,e&=~s}}function TR(n){if(Ve&6)throw Error(W(327));qd();var e=O0(n,0);if(!(e&1))return us(n,kt()),null;var t=tw(n,e);if(n.tag!==0&&t===2){var s=$C(n);s!==0&&(e=s,t=hS(n,s))}if(t===1)throw t=Tm,xu(n,0),fa(n,e),us(n,kt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ql(n,is,Hi),us(n,kt()),null}function AT(n,e){var t=Ve;Ve|=1;try{return n(e)}finally{Ve=t,Ve===0&&(bf=kt()+500,cx&&Ll())}}function ku(n){ul!==null&&ul.tag===0&&!(Ve&6)&&qd();var e=Ve;Ve|=1;var t=tr.transition,s=Ye;try{if(tr.transition=null,Ye=1,n)return n()}finally{Ye=s,tr.transition=t,Ve=e,!(Ve&6)&&Ll()}}function RT(){Rs=Fd.current,ct(Fd)}function xu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Lj(t)),Lt!==null)for(t=Lt.return;t!==null;){var s=t;switch(lT(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&j0();break;case 3:Cf(),ct(ls),ct(Rn),yT();break;case 5:gT(s);break;case 4:Cf();break;case 13:ct(_t);break;case 19:ct(_t);break;case 10:hT(s.type._context);break;case 22:case 23:RT()}t=t.return}if(nn=n,Lt=n=vl(n.current,null),fn=Rs=e,Ht=0,Tm=null,ET=fx=Ru=0,is=nm=null,tc!==null){for(e=0;e<tc.length;e++)if(t=tc[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}tc=null}return n}function iD(n,e){do{var t=Lt;try{if(dT(),Uv.current=X0,J0){for(var s=Ct.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}J0=!1}if(Au=0,tn=jt=Ct=null,em=!1,Sm=0,bT.current=null,t===null||t.return===null){Ht=1,Tm=e,Lt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=fn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=fR(o);if(g!==null){g.flags&=-257,pR(g,o,a,i,e),g.mode&1&&hR(i,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){hR(i,c,e),kT();break e}l=Error(W(426))}}else if(mt&&a.mode&1){var _=fR(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),pR(_,o,a,i,e),cT(Sf(l,a));break e}}i=l=Sf(l,a),Ht!==4&&(Ht=2),nm===null?nm=[i]:nm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=jN(i,l,e);oR(i,x);break e;case 1:a=l;var S=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(gl===null||!gl.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=zN(i,a,e);oR(i,T);break e}}i=i.return}while(i!==null)}lD(t)}catch(R){e=R,Lt===t&&t!==null&&(Lt=t=t.return);continue}break}while(!0)}function oD(){var n=Q0.current;return Q0.current=X0,n===null?X0:n}function kT(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),nn===null||!(Ru&268435455)&&!(fx&268435455)||fa(nn,fn)}function tw(n,e){var t=Ve;Ve|=2;var s=oD();(nn!==n||fn!==e)&&(Hi=null,xu(n,e));do try{o3();break}catch(r){iD(n,r)}while(!0);if(dT(),Ve=t,Q0.current=s,Lt!==null)throw Error(W(261));return nn=null,fn=0,Ht}function o3(){for(;Lt!==null;)aD(Lt)}function a3(){for(;Lt!==null&&!MV();)aD(Lt)}function aD(n){var e=uD(n.alternate,n,Rs);n.memoizedProps=n.pendingProps,e===null?lD(n):Lt=e,bT.current=null}function lD(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=e3(t,e),t!==null){t.flags&=32767,Lt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ht=6,Lt=null;return}}else if(t=Zj(t,e,Rs),t!==null){Lt=t;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=n}while(e!==null);Ht===0&&(Ht=5)}function ql(n,e,t){var s=Ye,r=tr.transition;try{tr.transition=null,Ye=1,l3(n,e,t,s)}finally{tr.transition=r,Ye=s}return null}function l3(n,e,t,s){do qd();while(ul!==null);if(Ve&6)throw Error(W(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(jV(n,i),n===nn&&(Lt=nn=null,fn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||av||(av=!0,dD(F0,function(){return qd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=tr.transition,tr.transition=null;var o=Ye;Ye=1;var a=Ve;Ve|=4,bT.current=null,n3(n,t),nD(t,n),Rj(HC),$0=!!zC,HC=zC=null,n.current=t,s3(t),NV(),Ve=a,Ye=o,tr.transition=i}else n.current=t;if(av&&(av=!1,ul=n,ew=r),i=n.pendingLanes,i===0&&(gl=null),FV(t.stateNode),us(n,kt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(Z0)throw Z0=!1,n=uS,uS=null,n;return ew&1&&n.tag!==0&&qd(),i=n.pendingLanes,i&1?n===dS?sm++:(sm=0,dS=n):sm=0,Ll(),null}function qd(){if(ul!==null){var n=jM(ew),e=tr.transition,t=Ye;try{if(tr.transition=null,Ye=16>n?16:n,ul===null)var s=!1;else{if(n=ul,ul=null,ew=0,Ve&6)throw Error(W(331));var r=Ve;for(Ve|=4,ie=n.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:tm(8,u,i)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var m=u.sibling,g=u.return;if(ZN(u),u===c){ie=null;break}if(m!==null){m.return=g,ie=m;break}ie=g}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tm(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ie=x;break e}ie=i.return}}var S=n.current;for(ie=S;ie!==null;){o=ie;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ie=C;else e:for(o=S;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hx(9,a)}}catch(R){Tt(a,a.return,R)}if(a===o){ie=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,ie=T;break e}ie=a.return}}if(Ve=r,Ll(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(rx,n)}catch{}s=!0}return s}finally{Ye=t,tr.transition=e}}return!1}function AR(n,e,t){e=Sf(t,e),e=jN(n,e,1),n=ml(n,e,1),e=jn(),n!==null&&(wy(n,1,e),us(n,e))}function Tt(n,e,t){if(n.tag===3)AR(n,n,t);else for(;e!==null;){if(e.tag===3){AR(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gl===null||!gl.has(s))){n=Sf(t,n),n=zN(e,n,1),e=ml(e,n,1),n=jn(),e!==null&&(wy(e,1,n),us(e,n));break}}e=e.return}}function c3(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=jn(),n.pingedLanes|=n.suspendedLanes&t,nn===n&&(fn&t)===t&&(Ht===4||Ht===3&&(fn&130023424)===fn&&500>kt()-TT?xu(n,0):ET|=t),us(n,e)}function cD(n,e){e===0&&(n.mode&1?(e=Xy,Xy<<=1,!(Xy&130023424)&&(Xy=4194304)):e=1);var t=jn();n=Bo(n,e),n!==null&&(wy(n,e,t),us(n,t))}function u3(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),cD(n,t)}function d3(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),cD(n,t)}var uD;uD=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ls.current)as=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return as=!1,Qj(n,e,t);as=!!(n.flags&131072)}else as=!1,mt&&e.flags&1048576&&pN(e,G0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Vv(n,e),n=e.pendingProps;var r=wf(e,Rn.current);Gd(e,t),r=wT(null,e,s,n,r,t);var i=xT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cs(s)?(i=!0,z0(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,pT(e),r.updater=dx,e.stateNode=r,r._reactInternals=e,ZC(e,s,n,t),e=nS(null,e,s,!0,i,t)):(e.tag=0,mt&&i&&aT(e),$n(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Vv(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=f3(s),n=vr(s,n),r){case 0:e=tS(null,e,s,n,t);break e;case 1:e=yR(null,e,s,n,t);break e;case 11:e=mR(null,e,s,n,t);break e;case 14:e=gR(null,e,s,vr(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vr(s,r),tS(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vr(s,r),yR(n,e,s,r,t);case 3:e:{if(WN(e),n===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,xN(n,e),K0(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Sf(Error(W(423)),e),e=vR(n,e,s,t,r);break e}else if(s!==r){r=Sf(Error(W(424)),e),e=vR(n,e,s,t,r);break e}else for(Ms=pl(e.stateNode.containerInfo.firstChild),Ns=e,mt=!0,Lr=null,t=vN(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xf(),s===r){e=Vo(n,e,t);break e}$n(n,e,s,t)}e=e.child}return e;case 5:return _N(e),n===null&&JC(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,GC(s,r)?o=null:i!==null&&GC(s,i)&&(e.flags|=32),qN(n,e),$n(n,e,o,t),e.child;case 6:return n===null&&JC(e),null;case 13:return KN(n,e,t);case 4:return mT(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=_f(e,null,s,t):$n(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vr(s,r),mR(n,e,s,r,t);case 7:return $n(n,e,e.pendingProps,t),e.child;case 8:return $n(n,e,e.pendingProps.children,t),e.child;case 12:return $n(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,rt(q0,s._currentValue),s._currentValue=o,i!==null)if(Br(i.value,o)){if(i.children===r.children&&!ls.current){e=Vo(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=No(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),XC(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),XC(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$n(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Gd(e,t),r=or(r),s=s(r),e.flags|=1,$n(n,e,s,t),e.child;case 14:return s=e.type,r=vr(s,e.pendingProps),r=vr(s.type,r),gR(n,e,s,r,t);case 15:return HN(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vr(s,r),Vv(n,e),e.tag=1,cs(s)?(n=!0,z0(e)):n=!1,Gd(e,t),VN(e,s,r),ZC(e,s,r,t),nS(null,e,s,!0,n,t);case 19:return YN(n,e,t);case 22:return GN(n,e,t)}throw Error(W(156,e.tag))};function dD(n,e){return $M(n,e)}function h3(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(n,e,t,s){return new h3(n,e,t,s)}function PT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function f3(n){if(typeof n=="function")return PT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===YE)return 11;if(n===JE)return 14}return 2}function vl(n,e){var t=n.alternate;return t===null?(t=er(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hv(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")PT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Td:return _u(t.children,r,i,e);case KE:o=8,r|=8;break;case SC:return n=er(12,t,e,r|2),n.elementType=SC,n.lanes=i,n;case bC:return n=er(13,t,e,r),n.elementType=bC,n.lanes=i,n;case EC:return n=er(19,t,e,r),n.elementType=EC,n.lanes=i,n;case _M:return px(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case wM:o=10;break e;case xM:o=9;break e;case YE:o=11;break e;case JE:o=14;break e;case aa:o=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=er(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function _u(n,e,t,s){return n=er(7,n,s,e),n.lanes=t,n}function px(n,e,t,s){return n=er(22,n,s,e),n.elementType=_M,n.lanes=t,n.stateNode={isHidden:!1},n}function V_(n,e,t){return n=er(6,n,null,e),n.lanes=t,n}function j_(n,e,t){return e=er(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function p3(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C_(0),this.expirationTimes=C_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C_(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function IT(n,e,t,s,r,i,o,a,l){return n=new p3(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pT(i),n}function m3(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ed,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function hD(n){if(!n)return Sl;n=n._reactInternals;e:{if(qu(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(cs(t))return hN(n,t,e)}return e}function fD(n,e,t,s,r,i,o,a,l){return n=IT(t,s,!0,n,r,i,o,a,l),n.context=hD(null),t=n.current,s=jn(),r=yl(t),i=No(s,r),i.callback=e??null,ml(t,i,r),n.current.lanes=r,wy(n,r,s),us(n,s),n}function mx(n,e,t,s){var r=e.current,i=jn(),o=yl(r);return t=hD(t),e.context===null?e.context=t:e.pendingContext=t,e=No(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=ml(r,e,o),n!==null&&(Ur(n,r,o,i),$v(n,r,o)),o}function nw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function RR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function MT(n,e){RR(n,e),(n=n.alternate)&&RR(n,e)}function g3(){return null}var pD=typeof reportError=="function"?reportError:function(n){console.error(n)};function NT(n){this._internalRoot=n}gx.prototype.render=NT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));mx(n,e,null,null)};gx.prototype.unmount=NT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ku(function(){mx(null,n,null,null)}),e[Uo]=null}};function gx(n){this._internalRoot=n}gx.prototype.unstable_scheduleHydration=function(n){if(n){var e=GM();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ha.length&&e!==0&&e<ha[t].priority;t++);ha.splice(t,0,n),t===0&&WM(n)}};function DT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kR(){}function y3(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=nw(o);i.call(c)}}var o=fD(e,s,n,0,null,!1,!1,"",kR);return n._reactRootContainer=o,n[Uo]=o.current,vm(n.nodeType===8?n.parentNode:n),ku(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=nw(l);a.call(c)}}var l=IT(n,0,!1,null,null,!1,!1,"",kR);return n._reactRootContainer=l,n[Uo]=l.current,vm(n.nodeType===8?n.parentNode:n),ku(function(){mx(e,l,t,s)}),l}function vx(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=nw(o);a.call(l)}}mx(e,o,n,r)}else o=y3(t,e,n,r,s);return nw(o)}zM=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=xp(e.pendingLanes);t!==0&&(ZE(e,t|1),us(e,kt()),!(Ve&6)&&(bf=kt()+500,Ll()))}break;case 13:ku(function(){var s=Bo(n,1);if(s!==null){var r=jn();Ur(s,n,1,r)}}),MT(n,1)}};eT=function(n){if(n.tag===13){var e=Bo(n,134217728);if(e!==null){var t=jn();Ur(e,n,134217728,t)}MT(n,134217728)}};HM=function(n){if(n.tag===13){var e=yl(n),t=Bo(n,e);if(t!==null){var s=jn();Ur(t,n,e,s)}MT(n,e)}};GM=function(){return Ye};qM=function(n,e){var t=Ye;try{return Ye=n,e()}finally{Ye=t}};LC=function(n,e,t){switch(e){case"input":if(RC(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=lx(s);if(!r)throw Error(W(90));SM(s),RC(s,r)}}}break;case"textarea":EM(n,t);break;case"select":e=t.value,e!=null&&Vd(n,!!t.multiple,e,!1)}};MM=AT;NM=ku;var v3={usingClientEntryPoint:!1,Events:[_y,Pd,lx,PM,IM,AT]},up={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w3={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=FM(n),n===null?null:n.stateNode},findFiberByHostInstance:up.findFiberByHostInstance||g3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lv.isDisabled&&lv.supportsFiber)try{rx=lv.inject(w3),Ei=lv}catch{}}Os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v3;Os.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DT(e))throw Error(W(200));return m3(n,e,null,t)};Os.createRoot=function(n,e){if(!DT(n))throw Error(W(299));var t=!1,s="",r=pD;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=IT(n,1,!1,null,null,t,!1,s,r),n[Uo]=e.current,vm(n.nodeType===8?n.parentNode:n),new NT(e)};Os.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=FM(e),n=n===null?null:n.stateNode,n};Os.flushSync=function(n){return ku(n)};Os.hydrate=function(n,e,t){if(!yx(e))throw Error(W(200));return vx(null,n,e,!0,t)};Os.hydrateRoot=function(n,e,t){if(!DT(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=pD;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=fD(e,null,n,1,t??null,r,!1,i,o),n[Uo]=e.current,vm(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new gx(e)};Os.render=function(n,e,t){if(!yx(e))throw Error(W(200));return vx(null,n,e,!1,t)};Os.unmountComponentAtNode=function(n){if(!yx(n))throw Error(W(40));return n._reactRootContainer?(ku(function(){vx(null,null,n,!1,function(){n._reactRootContainer=null,n[Uo]=null})}),!0):!1};Os.unstable_batchedUpdates=AT;Os.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!yx(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return vx(n,e,t,!1,s)};Os.version="18.3.1-next-f1338f8080-20240426";function mD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mD)}catch(n){console.error(n)}}mD(),mM.exports=Os;var Wu=mM.exports;const gD=nM(Wu);var PR=Wu;_C.createRoot=PR.createRoot,_C.hydrateRoot=PR.hydrateRoot;const x3=1,_3=1e6;let z_=0;function C3(){return z_=(z_+1)%Number.MAX_SAFE_INTEGER,z_.toString()}const H_=new Map,IR=n=>{if(H_.has(n))return;const e=setTimeout(()=>{H_.delete(n),rm({type:"REMOVE_TOAST",toastId:n})},_3);H_.set(n,e)},S3=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,x3)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?IR(t):n.toasts.forEach(s=>{IR(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Gv=[];let qv={toasts:[]};function rm(n){qv=S3(qv,n),Gv.forEach(e=>{e(qv)})}function b3({...n}){const e=C3(),t=r=>rm({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>rm({type:"DISMISS_TOAST",toastId:e});return rm({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function Ko(){const[n,e]=b.useState(qv);return b.useEffect(()=>(Gv.push(e),()=>{const t=Gv.indexOf(e);t>-1&&Gv.splice(t,1)}),[n]),{...n,toast:b3,dismiss:t=>rm({type:"DISMISS_TOAST",toastId:t})}}function J(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function MR(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function wx(...n){return e=>{let t=!1;const s=n.map(r=>{const i=MR(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():MR(n[r],null)}}}}function Ee(...n){return b.useCallback(wx(...n),n)}function E3(n,e){const t=b.createContext(e),s=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return y.jsx(t.Provider,{value:l,children:o})};s.displayName=n+"Provider";function r(i){const o=b.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[s,r]}function Wn(n,e=[]){let t=[];function s(i,o){const a=b.createContext(o),l=t.length;t=[...t,o];const c=f=>{var x;const{scope:m,children:g,...w}=f,v=((x=m==null?void 0:m[n])==null?void 0:x[l])||a,_=b.useMemo(()=>w,Object.values(w));return y.jsx(v.Provider,{value:_,children:g})};c.displayName=i+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[n])==null?void 0:v[l])||a,w=b.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const r=()=>{const i=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[s,T3(r,...e)]}function T3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Pu(n){const e=R3(n),t=b.forwardRef((s,r)=>{const{children:i,...o}=s,a=b.Children.toArray(i),l=a.find(P3);if(l){const c=l.props.children,u=a.map(f=>f===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:f);return y.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return y.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var A3=Pu("Slot");function R3(n){const e=b.forwardRef((t,s)=>{const{children:r,...i}=t;if(b.isValidElement(r)){const o=M3(r),a=I3(i,r.props);return r.type!==b.Fragment&&(a.ref=s?wx(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var yD=Symbol("radix.slottable");function k3(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=yD,e}function P3(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yD}function I3(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function M3(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Sy(n){const e=n+"CollectionProvider",[t,s]=Wn(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:x}=v,S=X.useRef(null),C=X.useRef(new Map).current;return y.jsx(r,{scope:_,itemMap:C,collectionRef:S,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=Pu(a),c=X.forwardRef((v,_)=>{const{scope:x,children:S}=v,C=i(a,x),T=Ee(_,C.collectionRef);return y.jsx(l,{ref:T,children:S})});c.displayName=a;const u=n+"CollectionItemSlot",f="data-radix-collection-item",m=Pu(u),g=X.forwardRef((v,_)=>{const{scope:x,children:S,...C}=v,T=X.useRef(null),R=Ee(_,T),P=i(u,x);return X.useEffect(()=>(P.itemMap.set(T,{ref:T,...C}),()=>void P.itemMap.delete(T))),y.jsx(m,{[f]:"",ref:R,children:S})});g.displayName=u;function w(v){const _=i(n+"CollectionConsumer",v);return X.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((P,I)=>C.indexOf(P.ref.current)-C.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,s]}var N3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ce=N3.reduce((n,e)=>{const t=Pu(`Primitive.${e}`),s=b.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function LT(n,e){n&&Wu.flushSync(()=>n.dispatchEvent(e))}function ds(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function D3(n,e=globalThis==null?void 0:globalThis.document){const t=ds(n);b.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var L3="DismissableLayer",pS="dismissableLayer.update",F3="dismissableLayer.pointerDownOutside",O3="dismissableLayer.focusOutside",NR,vD=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ff=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=b.useContext(vD),[u,f]=b.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),w=Ee(e,I=>f(I)),v=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_),S=u?v.indexOf(u):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,T=S>=x,R=U3(I=>{const M=I.target,N=[...c.branches].some(L=>L.contains(M));!T||N||(r==null||r(I),o==null||o(I),I.defaultPrevented||a==null||a())},m),P=B3(I=>{const M=I.target;[...c.branches].some(L=>L.contains(M))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},m);return D3(I=>{S===c.layers.size-1&&(s==null||s(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},m),b.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(NR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),DR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=NR)}},[u,m,t,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),DR())},[u,c]),b.useEffect(()=>{const I=()=>g({});return document.addEventListener(pS,I),()=>document.removeEventListener(pS,I)},[]),y.jsx(ce.div,{...l,ref:w,style:{pointerEvents:C?T?"auto":"none":void 0,...n.style},onFocusCapture:J(n.onFocusCapture,P.onFocusCapture),onBlurCapture:J(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:J(n.onPointerDownCapture,R.onPointerDownCapture)})});Ff.displayName=L3;var $3="DismissableLayerBranch",wD=b.forwardRef((n,e)=>{const t=b.useContext(vD),s=b.useRef(null),r=Ee(e,s);return b.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),y.jsx(ce.div,{...n,ref:r})});wD.displayName=$3;function U3(n,e=globalThis==null?void 0:globalThis.document){const t=ds(n),s=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){xD(F3,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function B3(n,e=globalThis==null?void 0:globalThis.document){const t=ds(n),s=b.useRef(!1);return b.useEffect(()=>{const r=i=>{i.target&&!s.current&&xD(O3,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function DR(){const n=new CustomEvent(pS);document.dispatchEvent(n)}function xD(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?LT(r,i):r.dispatchEvent(i)}var V3=Ff,j3=wD,gn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},z3="Portal",by=b.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[r,i]=b.useState(!1);gn(()=>i(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?gD.createPortal(y.jsx(ce.div,{...s,ref:e}),o):null});by.displayName=z3;function H3(n,e){return b.useReducer((t,s)=>e[t][s]??t,n)}var Us=n=>{const{present:e,children:t}=n,s=G3(e),r=typeof t=="function"?t({present:s.isPresent}):b.Children.only(t),i=Ee(s.ref,q3(r));return typeof t=="function"||s.isPresent?b.cloneElement(r,{ref:i}):null};Us.displayName="Presence";function G3(n){const[e,t]=b.useState(),s=b.useRef(null),r=b.useRef(n),i=b.useRef("none"),o=n?"mounted":"unmounted",[a,l]=H3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=cv(s.current);i.current=a==="mounted"?c:"none"},[a]),gn(()=>{const c=s.current,u=r.current;if(u!==n){const m=i.current,g=cv(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),gn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const v=cv(s.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!r.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=g=>{g.target===e&&(i.current=cv(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{s.current=c?getComputedStyle(c):null,t(c)},[])}}function cv(n){return(n==null?void 0:n.animationName)||"none"}function q3(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var W3=fM[" useInsertionEffect ".trim().toString()]||gn;function Ii({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,o]=K3({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r;{const u=b.useRef(n!==void 0);b.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,s])}const c=b.useCallback(u=>{var f;if(a){const m=Y3(u)?u(n):u;m!==n&&((f=o.current)==null||f.call(o,m))}else i(u)},[a,n,i,o]);return[l,c]}function K3({defaultProp:n,onChange:e}){const[t,s]=b.useState(n),r=b.useRef(t),i=b.useRef(e);return W3(()=>{i.current=e},[e]),b.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,s,i]}function Y3(n){return typeof n=="function"}var _D=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),J3="VisuallyHidden",xx=b.forwardRef((n,e)=>y.jsx(ce.span,{...n,ref:e,style:{..._D,...n.style}}));xx.displayName=J3;var X3=xx,FT="ToastProvider",[OT,Q3,Z3]=Sy("Toast"),[CD,Gae]=Wn("Toast",[Z3]),[e5,_x]=CD(FT),SD=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[a,l]=b.useState(null),[c,u]=b.useState(0),f=b.useRef(!1),m=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${FT}\`. Expected non-empty \`string\`.`),y.jsx(OT.Provider,{scope:e,children:y.jsx(e5,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(g=>g+1),[]),onToastRemove:b.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};SD.displayName=FT;var bD="ToastViewport",t5=["F8"],mS="toast.viewportPause",gS="toast.viewportResume",ED=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=t5,label:r="Notifications ({hotkey})",...i}=n,o=_x(bD,t),a=Q3(t),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),f=b.useRef(null),m=Ee(e,f,o.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;b.useEffect(()=>{const _=x=>{var C;s.length!==0&&s.every(T=>x[T]||x.code===T)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[s]),b.useEffect(()=>{const _=l.current,x=f.current;if(w&&_&&x){const S=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(mS);x.dispatchEvent(P),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(gS);x.dispatchEvent(P),o.isClosePausedRef.current=!1}},T=P=>{!_.contains(P.relatedTarget)&&C()},R=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",S),_.addEventListener("focusout",T),_.addEventListener("pointermove",S),_.addEventListener("pointerleave",R),window.addEventListener("blur",S),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",S),_.removeEventListener("focusout",T),_.removeEventListener("pointermove",S),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",S),window.removeEventListener("focus",C)}}},[w,o.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:_})=>{const S=a().map(C=>{const T=C.ref.current,R=[T,...p5(T)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?S.reverse():S).flat()},[a]);return b.useEffect(()=>{const _=f.current;if(_){const x=S=>{var R,P,I;const C=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!C){const M=document.activeElement,N=S.shiftKey;if(S.target===_&&N){(R=c.current)==null||R.focus();return}const V=v({tabbingDirection:N?"backwards":"forwards"}),G=V.findIndex(B=>B===M);G_(V.slice(G+1))?S.preventDefault():N?(P=c.current)==null||P.focus():(I=u.current)==null||I.focus()}};return _.addEventListener("keydown",x),()=>_.removeEventListener("keydown",x)}},[a,v]),y.jsxs(j3,{ref:l,role:"region","aria-label":r.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&y.jsx(yS,{ref:c,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});G_(_)}}),y.jsx(OT.Slot,{scope:t,children:y.jsx(ce.ol,{tabIndex:-1,...i,ref:m})}),w&&y.jsx(yS,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});G_(_)}})]})});ED.displayName=bD;var TD="ToastFocusProxy",yS=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=_x(TD,t);return y.jsx(xx,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&s()}})});yS.displayName=TD;var Ey="Toast",n5="toast.swipeStart",s5="toast.swipeMove",r5="toast.swipeCancel",i5="toast.swipeEnd",AD=b.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[a,l]=Ii({prop:s,defaultProp:r??!0,onChange:i,caller:Ey});return y.jsx(Us,{present:t||a,children:y.jsx(l5,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ds(n.onPause),onResume:ds(n.onResume),onSwipeStart:J(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:J(n.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:J(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:J(n.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});AD.displayName=Ey;var[o5,a5]=CD(Ey,{onClose(){}}),l5=b.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...w}=n,v=_x(Ey,t),[_,x]=b.useState(null),S=Ee(e,B=>x(B)),C=b.useRef(null),T=b.useRef(null),R=r||v.duration,P=b.useRef(0),I=b.useRef(R),M=b.useRef(0),{onToastAdd:N,onToastRemove:L}=v,D=ds(()=>{var j;(_==null?void 0:_.contains(document.activeElement))&&((j=v.viewport)==null||j.focus()),o()}),V=b.useCallback(B=>{!B||B===1/0||(window.clearTimeout(M.current),P.current=new Date().getTime(),M.current=window.setTimeout(D,B))},[D]);b.useEffect(()=>{const B=v.viewport;if(B){const j=()=>{V(I.current),c==null||c()},O=()=>{const U=new Date().getTime()-P.current;I.current=I.current-U,window.clearTimeout(M.current),l==null||l()};return B.addEventListener(mS,O),B.addEventListener(gS,j),()=>{B.removeEventListener(mS,O),B.removeEventListener(gS,j)}}},[v.viewport,R,l,c,V]),b.useEffect(()=>{i&&!v.isClosePausedRef.current&&V(R)},[i,R,v.isClosePausedRef,V]),b.useEffect(()=>(N(),()=>L()),[N,L]);const G=b.useMemo(()=>_?DD(_):null,[_]);return v.viewport?y.jsxs(y.Fragment,{children:[G&&y.jsx(c5,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),y.jsx(o5,{scope:t,onClose:D,children:Wu.createPortal(y.jsx(OT.ItemSlot,{scope:t,children:y.jsx(V3,{asChild:!0,onEscapeKeyDown:J(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:S,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:J(n.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:J(n.onPointerDown,B=>{B.button===0&&(C.current={x:B.clientX,y:B.clientY})}),onPointerMove:J(n.onPointerMove,B=>{if(!C.current)return;const j=B.clientX-C.current.x,O=B.clientY-C.current.y,U=!!T.current,$=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=$?F(0,j):0,ee=$?0:F(0,O),Y=B.pointerType==="touch"?10:2,te={x:z,y:ee},he={originalEvent:B,delta:te};U?(T.current=te,uv(s5,f,he,{discrete:!1})):LR(te,v.swipeDirection,Y)?(T.current=te,uv(n5,u,he,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(j)>Y||Math.abs(O)>Y)&&(C.current=null)}),onPointerUp:J(n.onPointerUp,B=>{const j=T.current,O=B.target;if(O.hasPointerCapture(B.pointerId)&&O.releasePointerCapture(B.pointerId),T.current=null,C.current=null,j){const U=B.currentTarget,$={originalEvent:B,delta:j};LR(j,v.swipeDirection,v.swipeThreshold)?uv(i5,g,$,{discrete:!0}):uv(r5,m,$,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),c5=n=>{const{__scopeToast:e,children:t,...s}=n,r=_x(Ey,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return h5(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:y.jsx(by,{asChild:!0,children:y.jsx(xx,{...s,children:i&&y.jsxs(y.Fragment,{children:[r.label," ",t]})})})},u5="ToastTitle",RD=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return y.jsx(ce.div,{...s,ref:e})});RD.displayName=u5;var d5="ToastDescription",kD=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return y.jsx(ce.div,{...s,ref:e})});kD.displayName=d5;var PD="ToastAction",ID=b.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?y.jsx(ND,{altText:t,asChild:!0,children:y.jsx($T,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${PD}\`. Expected non-empty \`string\`.`),null)});ID.displayName=PD;var MD="ToastClose",$T=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=a5(MD,t);return y.jsx(ND,{asChild:!0,children:y.jsx(ce.button,{type:"button",...s,ref:e,onClick:J(n.onClick,r.onClose)})})});$T.displayName=MD;var ND=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return y.jsx(ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function DD(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),f5(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...DD(s))}}),e}function uv(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?LT(r,i):r.dispatchEvent(i)}var LR=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function h5(n=()=>{}){const e=ds(n);gn(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function f5(n){return n.nodeType===n.ELEMENT_NODE}function p5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function G_(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var m5=SD,LD=ED,FD=AD,OD=RD,$D=kD,UD=ID,BD=$T;function VD(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=VD(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function g5(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=VD(n))&&(s&&(s+=" "),s+=e);return s}const FR=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,OR=g5,UT=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return OR(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const u=t==null?void 0:t[c],f=i==null?void 0:i[c];if(u===null)return null;const m=FR(u)||FR(f);return r[c][m]}),a=t&&Object.entries(t).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...a}[v]):{...i,...a}[v]===_})?[...c,f,m]:c},[]);return OR(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jD=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...v5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:jD("lucide",r),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(n,e)=>{const t=b.forwardRef(({className:s,...r},i)=>b.createElement(w5,{ref:i,iconNode:e,className:jD(`lucide-${y5(n)}`,s),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ot("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ot("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=ot("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=ot("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=ot("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=ot("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=ot("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=ot("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=ot("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=ot("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=ot("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ot("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ot("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ot("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ye(...n){return n.filter(Boolean).join(" ")}const O5=m5,qD=b.forwardRef(({className:n,...e},t)=>y.jsx(LD,{ref:t,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));qD.displayName=LD.displayName;const $5=UT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WD=b.forwardRef(({className:n,variant:e,...t},s)=>y.jsx(FD,{ref:s,className:ye($5({variant:e}),n),...t}));WD.displayName=FD.displayName;const U5=b.forwardRef(({className:n,...e},t)=>y.jsx(UD,{ref:t,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));U5.displayName=UD.displayName;const KD=b.forwardRef(({className:n,...e},t)=>y.jsx(BD,{ref:t,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(Cx,{className:"h-4 w-4"})}));KD.displayName=BD.displayName;const YD=b.forwardRef(({className:n,...e},t)=>y.jsx(OD,{ref:t,className:ye("text-sm font-semibold",n),...e}));YD.displayName=OD.displayName;const JD=b.forwardRef(({className:n,...e},t)=>y.jsx($D,{ref:t,className:ye("text-sm opacity-90",n),...e}));JD.displayName=$D.displayName;function B5(){const{toasts:n}=Ko();return y.jsxs(O5,{children:[n.map(function({id:e,title:t,description:s,action:r,...i}){return y.jsxs(WD,{...i,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(YD,{children:t}),s&&y.jsx(JD,{children:s})]}),r,y.jsx(KD,{})]},e)}),y.jsx(qD,{})]})}var V5=(n,e,t,s,r,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(g){(Array.isArray(n)?n:[n]).forEach(w=>{let v=w==="class",_=v&&i?r.map(x=>i[x]||x):r;v?(l.classList.remove(..._),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(w,g)}),f(g)}function f(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)u(s);else try{let g=localStorage.getItem(e)||t,w=o&&g==="system"?m():g;u(w)}catch{}},j5=b.createContext(void 0),z5={setTheme:n=>{},themes:[]},H5=()=>{var n;return(n=b.useContext(j5))!=null?n:z5};b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([t,e,i,n,a,o,s,r]).slice(1,-1);return b.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${V5.toString()})(${u})`}})});var G5=n=>{switch(n){case"success":return K5;case"info":return J5;case"warning":return Y5;case"error":return X5;default:return null}},q5=Array(12).fill(0),W5=({visible:n,className:e})=>X.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},X.createElement("div",{className:"sonner-spinner"},q5.map((t,s)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),K5=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Y5=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),J5=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),X5=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Q5=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Z5=()=>{let[n,e]=X.useState(document.hidden);return X.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},vS=1,ez=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...s}=n,r=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:vS++,i=this.toasts.find(a=>a.id===r),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(a=>a.id===r?(this.publish({...a,...n,id:r,title:t}),{...a,...n,id:r,dismissible:o,title:t}):a):this.addToast({title:t,...s,dismissible:o,id:r}),r},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=n instanceof Promise?n:n(),r=t!==void 0,i,o=s.then(async l=>{if(i=["resolve",l],X.isValidElement(l))r=!1,this.create({id:t,type:"default",message:l});else if(nz(l)&&!l.ok){r=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:u})}else if(e.success!==void 0){r=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){r=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:u})}}).finally(()=>{var l;r&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||vS++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ss=new ez,tz=(n,e)=>{let t=(e==null?void 0:e.id)||vS++;return ss.addToast({title:n,...e,id:t}),t},nz=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",sz=tz,rz=()=>ss.toasts,iz=()=>ss.getActiveToasts();Object.assign(sz,{success:ss.success,info:ss.info,warning:ss.warning,error:ss.error,custom:ss.custom,message:ss.message,promise:ss.promise,dismiss:ss.dismiss,loading:ss.loading},{getHistory:rz,getToasts:iz});function oz(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}oz(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function dv(n){return n.label!==void 0}var az=3,lz="32px",cz="16px",VR=4e3,uz=356,dz=14,hz=20,fz=200;function pr(...n){return n.filter(Boolean).join(" ")}function pz(n){let[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var mz=n=>{var e,t,s,r,i,o,a,l,c,u,f;let{invert:m,toast:g,unstyled:w,interacting:v,setHeights:_,visibleToasts:x,heights:S,index:C,toasts:T,expanded:R,removeToast:P,defaultRichColors:I,closeButton:M,style:N,cancelButtonStyle:L,actionButtonStyle:D,className:V="",descriptionClassName:G="",duration:B,position:j,gap:O,loadingIcon:U,expandByDefault:$,classNames:F,icons:z,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:Y}=n,[te,he]=X.useState(null),[ke,Pe]=X.useState(null),[H,Te]=X.useState(!1),[Ne,Ie]=X.useState(!1),[se,pe]=X.useState(!1),[Oe,yt]=X.useState(!1),[Oi,Qo]=X.useState(!1),[Bl,tp]=X.useState(0),[td,m1]=X.useState(0),np=X.useRef(g.duration||B||VR),g1=X.useRef(null),Vl=X.useRef(null),F4=C===0,O4=C+1<=x,Bs=g.type,nd=g.dismissible!==!1,$4=g.className||"",U4=g.descriptionClassName||"",Gy=X.useMemo(()=>S.findIndex(Ce=>Ce.toastId===g.id)||0,[S,g.id]),B4=X.useMemo(()=>{var Ce;return(Ce=g.closeButton)!=null?Ce:M},[g.closeButton,M]),y1=X.useMemo(()=>g.duration||B||VR,[g.duration,B]),p_=X.useRef(0),sd=X.useRef(0),v1=X.useRef(0),rd=X.useRef(null),[V4,j4]=j.split("-"),w1=X.useMemo(()=>S.reduce((Ce,Xe,ut)=>ut>=Gy?Ce:Ce+Xe.height,0),[S,Gy]),x1=Z5(),z4=g.invert||m,m_=Bs==="loading";sd.current=X.useMemo(()=>Gy*O+w1,[Gy,w1]),X.useEffect(()=>{np.current=y1},[y1]),X.useEffect(()=>{Te(!0)},[]),X.useEffect(()=>{let Ce=Vl.current;if(Ce){let Xe=Ce.getBoundingClientRect().height;return m1(Xe),_(ut=>[{toastId:g.id,height:Xe,position:g.position},...ut]),()=>_(ut=>ut.filter(ur=>ur.toastId!==g.id))}},[_,g.id]),X.useLayoutEffect(()=>{if(!H)return;let Ce=Vl.current,Xe=Ce.style.height;Ce.style.height="auto";let ut=Ce.getBoundingClientRect().height;Ce.style.height=Xe,m1(ut),_(ur=>ur.find(dr=>dr.toastId===g.id)?ur.map(dr=>dr.toastId===g.id?{...dr,height:ut}:dr):[{toastId:g.id,height:ut,position:g.position},...ur])},[H,g.title,g.description,_,g.id]);let Zo=X.useCallback(()=>{Ie(!0),tp(sd.current),_(Ce=>Ce.filter(Xe=>Xe.toastId!==g.id)),setTimeout(()=>{P(g)},fz)},[g,P,_,sd]);X.useEffect(()=>{if(g.promise&&Bs==="loading"||g.duration===1/0||g.type==="loading")return;let Ce;return R||v||Y&&x1?(()=>{if(v1.current<p_.current){let Xe=new Date().getTime()-p_.current;np.current=np.current-Xe}v1.current=new Date().getTime()})():np.current!==1/0&&(p_.current=new Date().getTime(),Ce=setTimeout(()=>{var Xe;(Xe=g.onAutoClose)==null||Xe.call(g,g),Zo()},np.current)),()=>clearTimeout(Ce)},[R,v,g,Bs,Y,x1,Zo]),X.useEffect(()=>{g.delete&&Zo()},[Zo,g.delete]);function H4(){var Ce,Xe,ut;return z!=null&&z.loading?X.createElement("div",{className:pr(F==null?void 0:F.loader,(Ce=g==null?void 0:g.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":Bs==="loading"},z.loading):U?X.createElement("div",{className:pr(F==null?void 0:F.loader,(Xe=g==null?void 0:g.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":Bs==="loading"},U):X.createElement(W5,{className:pr(F==null?void 0:F.loader,(ut=g==null?void 0:g.classNames)==null?void 0:ut.loader),visible:Bs==="loading"})}return X.createElement("li",{tabIndex:0,ref:Vl,className:pr(V,$4,F==null?void 0:F.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Bs],(t=g==null?void 0:g.classNames)==null?void 0:t[Bs]),"data-sonner-toast":"","data-rich-colors":(s=g.richColors)!=null?s:I,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":H,"data-promise":!!g.promise,"data-swiped":Oi,"data-removed":Ne,"data-visible":O4,"data-y-position":V4,"data-x-position":j4,"data-index":C,"data-front":F4,"data-swiping":se,"data-dismissible":nd,"data-type":Bs,"data-invert":z4,"data-swipe-out":Oe,"data-swipe-direction":ke,"data-expanded":!!(R||$&&H),style:{"--index":C,"--toasts-before":C,"--z-index":T.length-C,"--offset":`${Ne?Bl:sd.current}px`,"--initial-height":$?"auto":`${td}px`,...N,...g.style},onDragEnd:()=>{pe(!1),he(null),rd.current=null},onPointerDown:Ce=>{m_||!nd||(g1.current=new Date,tp(sd.current),Ce.target.setPointerCapture(Ce.pointerId),Ce.target.tagName!=="BUTTON"&&(pe(!0),rd.current={x:Ce.clientX,y:Ce.clientY}))},onPointerUp:()=>{var Ce,Xe,ut,ur;if(Oe||!nd)return;rd.current=null;let dr=Number(((Ce=Vl.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ea=Number(((Xe=Vl.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jl=new Date().getTime()-((ut=g1.current)==null?void 0:ut.getTime()),hr=te==="x"?dr:ea,ta=Math.abs(hr)/jl;if(Math.abs(hr)>=hz||ta>.11){tp(sd.current),(ur=g.onDismiss)==null||ur.call(g,g),Pe(te==="x"?dr>0?"right":"left":ea>0?"down":"up"),Zo(),yt(!0),Qo(!1);return}pe(!1),he(null)},onPointerMove:Ce=>{var Xe,ut,ur,dr;if(!rd.current||!nd||((Xe=window.getSelection())==null?void 0:Xe.toString().length)>0)return;let ea=Ce.clientY-rd.current.y,jl=Ce.clientX-rd.current.x,hr=(ut=n.swipeDirections)!=null?ut:pz(j);!te&&(Math.abs(jl)>1||Math.abs(ea)>1)&&he(Math.abs(jl)>Math.abs(ea)?"x":"y");let ta={x:0,y:0};te==="y"?(hr.includes("top")||hr.includes("bottom"))&&(hr.includes("top")&&ea<0||hr.includes("bottom")&&ea>0)&&(ta.y=ea):te==="x"&&(hr.includes("left")||hr.includes("right"))&&(hr.includes("left")&&jl<0||hr.includes("right")&&jl>0)&&(ta.x=jl),(Math.abs(ta.x)>0||Math.abs(ta.y)>0)&&Qo(!0),(ur=Vl.current)==null||ur.style.setProperty("--swipe-amount-x",`${ta.x}px`),(dr=Vl.current)==null||dr.style.setProperty("--swipe-amount-y",`${ta.y}px`)}},B4&&!g.jsx?X.createElement("button",{"aria-label":ee,"data-disabled":m_,"data-close-button":!0,onClick:m_||!nd?()=>{}:()=>{var Ce;Zo(),(Ce=g.onDismiss)==null||Ce.call(g,g)},className:pr(F==null?void 0:F.closeButton,(r=g==null?void 0:g.classNames)==null?void 0:r.closeButton)},(i=z==null?void 0:z.close)!=null?i:Q5):null,g.jsx||b.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:X.createElement(X.Fragment,null,Bs||g.icon||g.promise?X.createElement("div",{"data-icon":"",className:pr(F==null?void 0:F.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||H4():null,g.type!=="loading"?g.icon||(z==null?void 0:z[Bs])||G5(Bs):null):null,X.createElement("div",{"data-content":"",className:pr(F==null?void 0:F.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},X.createElement("div",{"data-title":"",className:pr(F==null?void 0:F.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?X.createElement("div",{"data-description":"",className:pr(G,U4,F==null?void 0:F.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),b.isValidElement(g.cancel)?g.cancel:g.cancel&&dv(g.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||L,onClick:Ce=>{var Xe,ut;dv(g.cancel)&&nd&&((ut=(Xe=g.cancel).onClick)==null||ut.call(Xe,Ce),Zo())},className:pr(F==null?void 0:F.cancelButton,(u=g==null?void 0:g.classNames)==null?void 0:u.cancelButton)},g.cancel.label):null,b.isValidElement(g.action)?g.action:g.action&&dv(g.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||D,onClick:Ce=>{var Xe,ut;dv(g.action)&&((ut=(Xe=g.action).onClick)==null||ut.call(Xe,Ce),!Ce.defaultPrevented&&Zo())},className:pr(F==null?void 0:F.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function jR(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function gz(n,e){let t={};return[n,e].forEach((s,r)=>{let i=r===1,o=i?"--mobile-offset":"--offset",a=i?cz:lz;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),t}var yz=b.forwardRef(function(n,e){let{invert:t,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:f,duration:m,style:g,visibleToasts:w=az,toastOptions:v,dir:_=jR(),gap:x=dz,loadingIcon:S,icons:C,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:R}=n,[P,I]=X.useState([]),M=X.useMemo(()=>Array.from(new Set([s].concat(P.filter(Y=>Y.position).map(Y=>Y.position)))),[P,s]),[N,L]=X.useState([]),[D,V]=X.useState(!1),[G,B]=X.useState(!1),[j,O]=X.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=X.useRef(null),$=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=X.useRef(null),z=X.useRef(!1),ee=X.useCallback(Y=>{I(te=>{var he;return(he=te.find(ke=>ke.id===Y.id))!=null&&he.delete||ss.dismiss(Y.id),te.filter(({id:ke})=>ke!==Y.id)})},[]);return X.useEffect(()=>ss.subscribe(Y=>{if(Y.dismiss){I(te=>te.map(he=>he.id===Y.id?{...he,delete:!0}:he));return}setTimeout(()=>{gD.flushSync(()=>{I(te=>{let he=te.findIndex(ke=>ke.id===Y.id);return he!==-1?[...te.slice(0,he),{...te[he],...Y},...te.slice(he+1)]:[Y,...te]})})})}),[]),X.useEffect(()=>{if(u!=="system"){O(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:te})=>{O(te?"dark":"light")})}catch{Y.addListener(({matches:he})=>{try{O(he?"dark":"light")}catch(ke){console.error(ke)}})}},[u]),X.useEffect(()=>{P.length<=1&&V(!1)},[P]),X.useEffect(()=>{let Y=te=>{var he,ke;r.every(Pe=>te[Pe]||te.code===Pe)&&(V(!0),(he=U.current)==null||he.focus()),te.code==="Escape"&&(document.activeElement===U.current||(ke=U.current)!=null&&ke.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[r]),X.useEffect(()=>{if(U.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,z.current=!1)}},[U.current]),X.createElement("section",{ref:e,"aria-label":`${T} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((Y,te)=>{var he;let[ke,Pe]=Y.split("-");return P.length?X.createElement("ol",{key:Y,dir:_==="auto"?jR():_,tabIndex:-1,ref:U,className:a,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":ke,"data-lifted":D&&P.length>1&&!i,"data-x-position":Pe,style:{"--front-toast-height":`${((he=N[0])==null?void 0:he.height)||0}px`,"--width":`${uz}px`,"--gap":`${x}px`,...g,...gz(l,c)},onBlur:H=>{z.current&&!H.currentTarget.contains(H.relatedTarget)&&(z.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||z.current||(z.current=!0,F.current=H.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{G||V(!1)},onDragEnd:()=>V(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},P.filter(H=>!H.position&&te===0||H.position===Y).map((H,Te)=>{var Ne,Ie;return X.createElement(mz,{key:H.id,icons:C,index:Te,toast:H,defaultRichColors:f,duration:(Ne=v==null?void 0:v.duration)!=null?Ne:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:w,closeButton:(Ie=v==null?void 0:v.closeButton)!=null?Ie:o,interacting:G,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ee,toasts:P.filter(se=>se.position==H.position),heights:N.filter(se=>se.position==H.position),setHeights:L,expandByDefault:i,gap:x,loadingIcon:S,expanded:D,pauseWhenPageIsHidden:R,swipeDirections:n.swipeDirections})})):null}))});const vz=({...n})=>{const{theme:e="system"}=H5();return y.jsx(yz,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var wz=fM[" useId ".trim().toString()]||(()=>{}),xz=0;function Ai(n){const[e,t]=b.useState(wz());return gn(()=>{t(s=>s??String(xz++))},[n]),e?`radix-${e}`:""}const _z=["top","right","bottom","left"],El=Math.min,Ps=Math.max,rw=Math.round,hv=Math.floor,Ri=n=>({x:n,y:n}),Cz={left:"right",right:"left",bottom:"top",top:"bottom"},Sz={start:"end",end:"start"};function wS(n,e,t){return Ps(n,El(e,t))}function jo(n,e){return typeof n=="function"?n(e):n}function zo(n){return n.split("-")[0]}function Of(n){return n.split("-")[1]}function BT(n){return n==="x"?"y":"x"}function VT(n){return n==="y"?"height":"width"}function Ci(n){return["top","bottom"].includes(zo(n))?"y":"x"}function jT(n){return BT(Ci(n))}function bz(n,e,t){t===void 0&&(t=!1);const s=Of(n),r=jT(n),i=VT(r);let o=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=iw(o)),[o,iw(o)]}function Ez(n){const e=iw(n);return[xS(n),e,xS(e)]}function xS(n){return n.replace(/start|end/g,e=>Sz[e])}function Tz(n,e,t){const s=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?i:o;default:return[]}}function Az(n,e,t,s){const r=Of(n);let i=Tz(zo(n),t==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(xS)))),i}function iw(n){return n.replace(/left|right|bottom|top/g,e=>Cz[e])}function Rz(n){return{top:0,right:0,bottom:0,left:0,...n}}function XD(n){return typeof n!="number"?Rz(n):{top:n,right:n,bottom:n,left:n}}function ow(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function zR(n,e,t){let{reference:s,floating:r}=n;const i=Ci(e),o=jT(e),a=VT(o),l=zo(e),c=i==="y",u=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[a]/2-r[a]/2;let g;switch(l){case"top":g={x:u,y:s.y-r.height};break;case"bottom":g={x:u,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-r.width,y:f};break;default:g={x:s.x,y:s.y}}switch(Of(e)){case"start":g[o]-=m*(t&&c?-1:1);break;case"end":g[o]+=m*(t&&c?-1:1);break}return g}const kz=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:f}=zR(c,s,l),m=s,g={},w=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:S,y:C,data:T,reset:R}=await x({x:u,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=S??u,f=C??f,g={...g,[_]:{...g[_],...T}},R&&w<=50&&(w++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):R.rects),{x:u,y:f}=zR(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:r,middlewareData:g}};async function Am(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=jo(e,n),w=XD(g),_=a[m?f==="floating"?"reference":"floating":f],x=ow(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(_)))==null||t?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=f==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),T=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},R=ow(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:C,strategy:l}):S);return{top:(x.top-R.top+w.top)/T.y,bottom:(R.bottom-x.bottom+w.bottom)/T.y,left:(x.left-R.left+w.left)/T.x,right:(R.right-x.right+w.right)/T.x}}const Pz=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=jo(n,e)||{};if(c==null)return{};const f=XD(u),m={x:t,y:s},g=jT(r),w=VT(g),v=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",C=_?"clientHeight":"clientWidth",T=i.reference[w]+i.reference[g]-m[g]-i.floating[w],R=m[g]-i.reference[g],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=P?P[C]:0;(!I||!await(o.isElement==null?void 0:o.isElement(P)))&&(I=a.floating[C]||i.floating[w]);const M=T/2-R/2,N=I/2-v[w]/2-1,L=El(f[x],N),D=El(f[S],N),V=L,G=I-v[w]-D,B=I/2-v[w]/2+M,j=wS(V,B,G),O=!l.arrow&&Of(r)!=null&&B!==j&&i.reference[w]/2-(B<V?L:D)-v[w]/2<0,U=O?B<V?B-V:B-G:0;return{[g]:m[g]+U,data:{[g]:j,centerOffset:B-j-U,...O&&{alignmentOffset:U}},reset:O}}}),Iz=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=jo(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const x=zo(r),S=Ci(a),C=zo(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=m||(C||!v?[iw(a)]:Ez(a)),P=w!=="none";!m&&P&&R.push(...Az(a,v,w,T));const I=[a,...R],M=await Am(e,_),N=[];let L=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&N.push(M[x]),f){const B=bz(r,o,T);N.push(M[B[0]],M[B[1]])}if(L=[...L,{placement:r,overflows:N}],!N.every(B=>B<=0)){var D,V;const B=(((D=i.flip)==null?void 0:D.index)||0)+1,j=I[B];if(j&&(!(f==="alignment"?S!==Ci(j):!1)||L.every($=>$.overflows[0]>0&&Ci($.placement)===S)))return{data:{index:B,overflows:L},reset:{placement:j}};let O=(V=L.filter(U=>U.overflows[0]<=0).sort((U,$)=>U.overflows[1]-$.overflows[1])[0])==null?void 0:V.placement;if(!O)switch(g){case"bestFit":{var G;const U=(G=L.filter($=>{if(P){const F=Ci($.placement);return F===S||F==="y"}return!0}).map($=>[$.placement,$.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort(($,F)=>$[1]-F[1])[0])==null?void 0:G[0];U&&(O=U);break}case"initialPlacement":O=a;break}if(r!==O)return{reset:{placement:O}}}return{}}}};function HR(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function GR(n){return _z.some(e=>n[e]>=0)}const Mz=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=jo(n,e);switch(s){case"referenceHidden":{const i=await Am(e,{...r,elementContext:"reference"}),o=HR(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:GR(o)}}}case"escaped":{const i=await Am(e,{...r,altBoundary:!0}),o=HR(i,t.floating);return{data:{escapedOffsets:o,escaped:GR(o)}}}default:return{}}}}};async function Nz(n,e){const{placement:t,platform:s,elements:r}=n,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=zo(t),a=Of(t),l=Ci(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=jo(e,n);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const Dz=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:i,placement:o,middlewareData:a}=e,l=await Nz(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}}},Lz=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...l}=jo(n,e),c={x:t,y:s},u=await Am(e,l),f=Ci(zo(r)),m=BT(f);let g=c[m],w=c[f];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+u[_],C=g-u[x];g=wS(S,g,C)}if(o){const _=f==="y"?"top":"left",x=f==="y"?"bottom":"right",S=w+u[_],C=w-u[x];w=wS(S,w,C)}const v=a.fn({...e,[m]:g,[f]:w});return{...v,data:{x:v.x-t,y:v.y-s,enabled:{[m]:i,[f]:o}}}}}},Fz=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=jo(n,e),u={x:t,y:s},f=Ci(r),m=BT(f);let g=u[m],w=u[f];const v=jo(a,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=m==="y"?"height":"width",T=i.reference[m]-i.floating[C]+_.mainAxis,R=i.reference[m]+i.reference[C]-_.mainAxis;g<T?g=T:g>R&&(g=R)}if(c){var x,S;const C=m==="y"?"width":"height",T=["top","left"].includes(zo(r)),R=i.reference[f]-i.floating[C]+(T&&((x=o.offset)==null?void 0:x[f])||0)+(T?0:_.crossAxis),P=i.reference[f]+i.reference[C]+(T?0:((S=o.offset)==null?void 0:S[f])||0)-(T?_.crossAxis:0);w<R?w=R:w>P&&(w=P)}return{[m]:g,[f]:w}}}},Oz=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:r,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=jo(n,e),u=await Am(e,c),f=zo(r),m=Of(r),g=Ci(r)==="y",{width:w,height:v}=i.floating;let _,x;f==="top"||f==="bottom"?(_=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,_=m==="end"?"top":"bottom");const S=v-u.top-u.bottom,C=w-u.left-u.right,T=El(v-u[_],S),R=El(w-u[x],C),P=!e.middlewareData.shift;let I=T,M=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(M=C),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(I=S),P&&!m){const L=Ps(u.left,0),D=Ps(u.right,0),V=Ps(u.top,0),G=Ps(u.bottom,0);g?M=w-2*(L!==0||D!==0?L+D:Ps(u.left,u.right)):I=v-2*(V!==0||G!==0?V+G:Ps(u.top,u.bottom))}await l({...e,availableWidth:M,availableHeight:I});const N=await o.getDimensions(a.floating);return w!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function Sx(){return typeof window<"u"}function $f(n){return QD(n)?(n.nodeName||"").toLowerCase():"#document"}function Ds(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Fi(n){var e;return(e=(QD(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function QD(n){return Sx()?n instanceof Node||n instanceof Ds(n).Node:!1}function Vr(n){return Sx()?n instanceof Element||n instanceof Ds(n).Element:!1}function Mi(n){return Sx()?n instanceof HTMLElement||n instanceof Ds(n).HTMLElement:!1}function qR(n){return!Sx()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ds(n).ShadowRoot}function Ty(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=jr(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function $z(n){return["table","td","th"].includes($f(n))}function bx(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function zT(n){const e=HT(),t=Vr(n)?jr(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function Uz(n){let e=Tl(n);for(;Mi(e)&&!Ef(e);){if(zT(e))return e;if(bx(e))return null;e=Tl(e)}return null}function HT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ef(n){return["html","body","#document"].includes($f(n))}function jr(n){return Ds(n).getComputedStyle(n)}function Ex(n){return Vr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tl(n){if($f(n)==="html")return n;const e=n.assignedSlot||n.parentNode||qR(n)&&n.host||Fi(n);return qR(e)?e.host:e}function ZD(n){const e=Tl(n);return Ef(e)?n.ownerDocument?n.ownerDocument.body:n.body:Mi(e)&&Ty(e)?e:ZD(e)}function Rm(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=ZD(n),i=r===((s=n.ownerDocument)==null?void 0:s.body),o=Ds(r);if(i){const a=_S(o);return e.concat(o,o.visualViewport||[],Ty(r)?r:[],a&&t?Rm(a):[])}return e.concat(r,Rm(r,[],t))}function _S(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eL(n){const e=jr(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Mi(n),i=r?n.offsetWidth:t,o=r?n.offsetHeight:s,a=rw(t)!==i||rw(s)!==o;return a&&(t=i,s=o),{width:t,height:s,$:a}}function GT(n){return Vr(n)?n:n.contextElement}function Wd(n){const e=GT(n);if(!Mi(e))return Ri(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:i}=eL(e);let o=(i?rw(t.width):t.width)/s,a=(i?rw(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Bz=Ri(0);function tL(n){const e=Ds(n);return!HT()||!e.visualViewport?Bz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vz(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ds(n)?!1:e}function Iu(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=GT(n);let o=Ri(1);e&&(s?Vr(s)&&(o=Wd(s)):o=Wd(n));const a=Vz(i,t,s)?tL(i):Ri(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,f=r.height/o.y;if(i){const m=Ds(i),g=s&&Vr(s)?Ds(s):s;let w=m,v=_S(w);for(;v&&s&&g!==w;){const _=Wd(v),x=v.getBoundingClientRect(),S=jr(v),C=x.left+(v.clientLeft+parseFloat(S.paddingLeft))*_.x,T=x.top+(v.clientTop+parseFloat(S.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,f*=_.y,l+=C,c+=T,w=Ds(v),v=_S(w)}}return ow({width:u,height:f,x:l,y:c})}function qT(n,e){const t=Ex(n).scrollLeft;return e?e.left+t:Iu(Fi(n)).left+t}function nL(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:qT(n,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function jz(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const i=r==="fixed",o=Fi(s),a=e?bx(e.floating):!1;if(s===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=Ri(1);const u=Ri(0),f=Mi(s);if((f||!f&&!i)&&(($f(s)!=="body"||Ty(o))&&(l=Ex(s)),Mi(s))){const g=Iu(s);c=Wd(s),u.x=g.x+s.clientLeft,u.y=g.y+s.clientTop}const m=o&&!f&&!i?nL(o,l,!0):Ri(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:t.y*c.y-l.scrollTop*c.y+u.y+m.y}}function zz(n){return Array.from(n.getClientRects())}function Hz(n){const e=Fi(n),t=Ex(n),s=n.ownerDocument.body,r=Ps(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Ps(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+qT(n);const a=-t.scrollTop;return jr(s).direction==="rtl"&&(o+=Ps(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}function Gz(n,e){const t=Ds(n),s=Fi(n),r=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;const c=HT();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:o,x:a,y:l}}function qz(n,e){const t=Iu(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,i=Mi(n)?Wd(n):Ri(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=r*i.x,c=s*i.y;return{width:o,height:a,x:l,y:c}}function WR(n,e,t){let s;if(e==="viewport")s=Gz(n,t);else if(e==="document")s=Hz(Fi(n));else if(Vr(e))s=qz(e,t);else{const r=tL(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ow(s)}function sL(n,e){const t=Tl(n);return t===e||!Vr(t)||Ef(t)?!1:jr(t).position==="fixed"||sL(t,e)}function Wz(n,e){const t=e.get(n);if(t)return t;let s=Rm(n,[],!1).filter(a=>Vr(a)&&$f(a)!=="body"),r=null;const i=jr(n).position==="fixed";let o=i?Tl(n):n;for(;Vr(o)&&!Ef(o);){const a=jr(o),l=zT(o);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Ty(o)&&!l&&sL(n,o))?s=s.filter(u=>u!==o):r=a,o=Tl(o)}return e.set(n,s),s}function Kz(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const o=[...t==="clippingAncestors"?bx(e)?[]:Wz(e,this._c):[].concat(t),s],a=o[0],l=o.reduce((c,u)=>{const f=WR(e,u,r);return c.top=Ps(f.top,c.top),c.right=El(f.right,c.right),c.bottom=El(f.bottom,c.bottom),c.left=Ps(f.left,c.left),c},WR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Yz(n){const{width:e,height:t}=eL(n);return{width:e,height:t}}function Jz(n,e,t){const s=Mi(e),r=Fi(e),i=t==="fixed",o=Iu(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ri(0);function c(){l.x=qT(r)}if(s||!s&&!i)if(($f(e)!=="body"||Ty(r))&&(a=Ex(e)),s){const g=Iu(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else r&&c();i&&!s&&r&&c();const u=r&&!s&&!i?nL(r,a):Ri(0),f=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function q_(n){return jr(n).position==="static"}function KR(n,e){if(!Mi(n)||jr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Fi(n)===t&&(t=t.ownerDocument.body),t}function rL(n,e){const t=Ds(n);if(bx(n))return t;if(!Mi(n)){let r=Tl(n);for(;r&&!Ef(r);){if(Vr(r)&&!q_(r))return r;r=Tl(r)}return t}let s=KR(n,e);for(;s&&$z(s)&&q_(s);)s=KR(s,e);return s&&Ef(s)&&q_(s)&&!zT(s)?t:s||Uz(n)||t}const Xz=async function(n){const e=this.getOffsetParent||rL,t=this.getDimensions,s=await t(n.floating);return{reference:Jz(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Qz(n){return jr(n).direction==="rtl"}const Zz={convertOffsetParentRelativeRectToViewportRelativeRect:jz,getDocumentElement:Fi,getClippingRect:Kz,getOffsetParent:rL,getElementRects:Xz,getClientRects:zz,getDimensions:Yz,getScale:Wd,isElement:Vr,isRTL:Qz};function iL(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function eH(n,e){let t=null,s;const r=Fi(n);function i(){var a;clearTimeout(s),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=n.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||e(),!m||!g)return;const w=hv(f),v=hv(r.clientWidth-(u+m)),_=hv(r.clientHeight-(f+g)),x=hv(u),C={rootMargin:-w+"px "+-v+"px "+-_+"px "+-x+"px",threshold:Ps(0,El(1,l))||1};let T=!0;function R(P){const I=P[0].intersectionRatio;if(I!==l){if(!T)return o();I?o(!1,I):s=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!iL(c,n.getBoundingClientRect())&&o(),T=!1}try{t=new IntersectionObserver(R,{...C,root:r.ownerDocument})}catch{t=new IntersectionObserver(R,C)}t.observe(n)}return o(!0),i}function tH(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=GT(n),u=r||i?[...c?Rm(c):[],...Rm(e)]:[];u.forEach(x=>{r&&x.addEventListener("scroll",t,{passive:!0}),i&&x.addEventListener("resize",t)});const f=c&&a?eH(c,t):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let w,v=l?Iu(n):null;l&&_();function _(){const x=Iu(n);v&&!iL(v,x)&&t(),v=x,w=requestAnimationFrame(_)}return t(),()=>{var x;u.forEach(S=>{r&&S.removeEventListener("scroll",t),i&&S.removeEventListener("resize",t)}),f==null||f(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(w)}}const nH=Dz,sH=Lz,rH=Iz,iH=Oz,oH=Mz,YR=Pz,aH=Fz,lH=(n,e,t)=>{const s=new Map,r={platform:Zz,...t},i={...r.platform,_c:s};return kz(n,e,{...r,platform:i})};var cH=typeof document<"u",uH=function(){},Wv=cH?b.useLayoutEffect:uH;function aw(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!aw(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const i=r[s];if(!(i==="_owner"&&n.$$typeof)&&!aw(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function oL(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function JR(n,e){const t=oL(n);return Math.round(e*t)/t}function W_(n){const e=b.useRef(n);return Wv(()=>{e.current=n}),e}function dH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=b.useState(s);aw(m,s)||g(s);const[w,v]=b.useState(null),[_,x]=b.useState(null),S=b.useCallback($=>{$!==P.current&&(P.current=$,v($))},[]),C=b.useCallback($=>{$!==I.current&&(I.current=$,x($))},[]),T=i||w,R=o||_,P=b.useRef(null),I=b.useRef(null),M=b.useRef(u),N=l!=null,L=W_(l),D=W_(r),V=W_(c),G=b.useCallback(()=>{if(!P.current||!I.current)return;const $={placement:e,strategy:t,middleware:m};D.current&&($.platform=D.current),lH(P.current,I.current,$).then(F=>{const z={...F,isPositioned:V.current!==!1};B.current&&!aw(M.current,z)&&(M.current=z,Wu.flushSync(()=>{f(z)}))})},[m,e,t,D,V]);Wv(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[c]);const B=b.useRef(!1);Wv(()=>(B.current=!0,()=>{B.current=!1}),[]),Wv(()=>{if(T&&(P.current=T),R&&(I.current=R),T&&R){if(L.current)return L.current(T,R,G);G()}},[T,R,G,L,N]);const j=b.useMemo(()=>({reference:P,floating:I,setReference:S,setFloating:C}),[S,C]),O=b.useMemo(()=>({reference:T,floating:R}),[T,R]),U=b.useMemo(()=>{const $={position:t,left:0,top:0};if(!O.floating)return $;const F=JR(O.floating,u.x),z=JR(O.floating,u.y);return a?{...$,transform:"translate("+F+"px, "+z+"px)",...oL(O.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:F,top:z}},[t,a,O.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:G,refs:j,elements:O,floatingStyles:U}),[u,G,j,O,U])}const hH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?YR({element:s.current,padding:r}).fn(t):{}:s?YR({element:s,padding:r}).fn(t):{}}}},fH=(n,e)=>({...nH(n),options:[n,e]}),pH=(n,e)=>({...sH(n),options:[n,e]}),mH=(n,e)=>({...aH(n),options:[n,e]}),gH=(n,e)=>({...rH(n),options:[n,e]}),yH=(n,e)=>({...iH(n),options:[n,e]}),vH=(n,e)=>({...oH(n),options:[n,e]}),wH=(n,e)=>({...hH(n),options:[n,e]});var xH="Arrow",aL=b.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...i}=n;return y.jsx(ce.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});aL.displayName=xH;var _H=aL;function Tx(n){const[e,t]=b.useState(void 0);return gn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var WT="Popper",[lL,Uf]=Wn(WT),[CH,cL]=lL(WT),uL=n=>{const{__scopePopper:e,children:t}=n,[s,r]=b.useState(null);return y.jsx(CH,{scope:e,anchor:s,onAnchorChange:r,children:t})};uL.displayName=WT;var dL="PopperAnchor",hL=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,i=cL(dL,t),o=b.useRef(null),a=Ee(e,o);return b.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:y.jsx(ce.div,{...r,ref:a})});hL.displayName=dL;var KT="PopperContent",[SH,bH]=lL(KT),fL=b.forwardRef((n,e)=>{var H,Te,Ne,Ie,se,pe;const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=n,_=cL(KT,t),[x,S]=b.useState(null),C=Ee(e,Oe=>S(Oe)),[T,R]=b.useState(null),P=Tx(T),I=(P==null?void 0:P.width)??0,M=(P==null?void 0:P.height)??0,N=s+(i!=="center"?"-"+i:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],V=D.length>0,G={padding:L,boundary:D.filter(TH),altBoundary:V},{refs:B,floatingStyles:j,placement:O,isPositioned:U,middlewareData:$}=dH({strategy:"fixed",placement:N,whileElementsMounted:(...Oe)=>tH(...Oe,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[fH({mainAxis:r+M,alignmentAxis:o}),l&&pH({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?mH():void 0,...G}),l&&gH({...G}),yH({...G,apply:({elements:Oe,rects:yt,availableWidth:Oi,availableHeight:Qo})=>{const{width:Bl,height:tp}=yt.reference,td=Oe.floating.style;td.setProperty("--radix-popper-available-width",`${Oi}px`),td.setProperty("--radix-popper-available-height",`${Qo}px`),td.setProperty("--radix-popper-anchor-width",`${Bl}px`),td.setProperty("--radix-popper-anchor-height",`${tp}px`)}}),T&&wH({element:T,padding:a}),AH({arrowWidth:I,arrowHeight:M}),m&&vH({strategy:"referenceHidden",...G})]}),[F,z]=gL(O),ee=ds(w);gn(()=>{U&&(ee==null||ee())},[U,ee]);const Y=(H=$.arrow)==null?void 0:H.x,te=(Te=$.arrow)==null?void 0:Te.y,he=((Ne=$.arrow)==null?void 0:Ne.centerOffset)!==0,[ke,Pe]=b.useState();return gn(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:U?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(Ie=$.transformOrigin)==null?void 0:Ie.x,(se=$.transformOrigin)==null?void 0:se.y].join(" "),...((pe=$.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(SH,{scope:t,placedSide:F,onArrowChange:R,arrowX:Y,arrowY:te,shouldHideArrow:he,children:y.jsx(ce.div,{"data-side":F,"data-align":z,...v,ref:C,style:{...v.style,animation:U?void 0:"none"}})})})});fL.displayName=KT;var pL="PopperArrow",EH={top:"bottom",right:"left",bottom:"top",left:"right"},mL=b.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,i=bH(pL,s),o=EH[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(_H,{...r,ref:t,style:{...r.style,display:"block"}})})});mL.displayName=pL;function TH(n){return n!==null}var AH=n=>({name:"transformOrigin",options:n,fn(e){var _,x,S;const{placement:t,rects:s,middlewareData:r}=e,o=((_=r.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=gL(t),f={start:"0%",center:"50%",end:"100%"}[u],m=(((x=r.arrow)==null?void 0:x.x)??0)+a/2,g=(((S=r.arrow)==null?void 0:S.y)??0)+l/2;let w="",v="";return c==="bottom"?(w=o?f:`${m}px`,v=`${-l}px`):c==="top"?(w=o?f:`${m}px`,v=`${s.floating.height+l}px`):c==="right"?(w=`${-l}px`,v=o?f:`${g}px`):c==="left"&&(w=`${s.floating.width+l}px`,v=o?f:`${g}px`),{data:{x:w,y:v}}}});function gL(n){const[e,t="center"]=n.split("-");return[e,t]}var yL=uL,YT=hL,JT=fL,XT=mL,[Ax,qae]=Wn("Tooltip",[Uf]),QT=Uf(),vL="TooltipProvider",RH=700,XR="tooltip.open",[kH,wL]=Ax(vL),xL=n=>{const{__scopeTooltip:e,delayDuration:t=RH,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=n,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),y.jsx(kH,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:r,children:i})};xL.displayName=vL;var _L="Tooltip",[Wae,Rx]=Ax(_L),CS="TooltipTrigger",PH=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=Rx(CS,t),i=wL(CS,t),o=QT(t),a=b.useRef(null),l=Ee(e,a,r.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),f=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),y.jsx(YT,{asChild:!0,...o,children:y.jsx(ce.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:l,onPointerMove:J(n.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:J(n.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:J(n.onPointerDown,()=>{r.open&&r.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:J(n.onFocus,()=>{c.current||r.onOpen()}),onBlur:J(n.onBlur,r.onClose),onClick:J(n.onClick,r.onClose)})})});PH.displayName=CS;var IH="TooltipPortal",[Kae,MH]=Ax(IH,{forceMount:void 0}),Tf="TooltipContent",CL=b.forwardRef((n,e)=>{const t=MH(Tf,n.__scopeTooltip),{forceMount:s=t.forceMount,side:r="top",...i}=n,o=Rx(Tf,n.__scopeTooltip);return y.jsx(Us,{present:s||o.open,children:o.disableHoverableContent?y.jsx(SL,{side:r,...i,ref:e}):y.jsx(NH,{side:r,...i,ref:e})})}),NH=b.forwardRef((n,e)=>{const t=Rx(Tf,n.__scopeTooltip),s=wL(Tf,n.__scopeTooltip),r=b.useRef(null),i=Ee(e,r),[o,a]=b.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:f}=s,m=b.useCallback(()=>{a(null),f(!1)},[f]),g=b.useCallback((w,v)=>{const _=w.currentTarget,x={x:w.clientX,y:w.clientY},S=$H(x,_.getBoundingClientRect()),C=UH(x,S),T=BH(v.getBoundingClientRect()),R=jH([...C,...T]);a(R),f(!0)},[f]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(l&&u){const w=_=>g(_,u),v=_=>g(_,l);return l.addEventListener("pointerleave",w),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),b.useEffect(()=>{if(o){const w=v=>{const _=v.target,x={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),C=!VH(x,o);S?m():C&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,u,o,c,m]),y.jsx(SL,{...n,ref:i})}),[DH,LH]=Ax(_L,{isInside:!1}),FH=k3("TooltipContent"),SL=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=Rx(Tf,t),c=QT(t),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener(XR,u),()=>document.removeEventListener(XR,u)),[u]),b.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),y.jsx(Ff,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:y.jsxs(JT,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(FH,{children:s}),y.jsx(DH,{scope:t,isInside:!0,children:y.jsx(X3,{id:l.contentId,role:"tooltip",children:r||s})})]})})});CL.displayName=Tf;var bL="TooltipArrow",OH=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=QT(t);return LH(bL,t).isInside?null:y.jsx(XT,{...r,...s,ref:e})});OH.displayName=bL;function $H(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,s,r,i)){case i:return"left";case r:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function UH(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function BH(n){const{top:e,right:t,bottom:s,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:s},{x:r,y:s}]}function VH(n,e){const{x:t,y:s}=n;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>s!=m>s&&t<(f-c)*(s-u)/(m-u)+c&&(r=!r)}return r}function jH(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),zH(e)}function zH(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const r=n[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const r=n[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var HH=xL,EL=CL;const GH=HH,qH=b.forwardRef(({className:n,sideOffset:e=4,...t},s)=>y.jsx(EL,{ref:s,sideOffset:e,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));qH.displayName=EL.displayName;var Bf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mu=typeof window>"u"||"Deno"in globalThis;function Un(){}function WH(n,e){return typeof n=="function"?n(e):n}function SS(n){return typeof n=="number"&&n>=0&&n!==1/0}function TL(n,e){return Math.max(n+(e||0)-Date.now(),0)}function wl(n,e){return typeof n=="function"?n(e):n}function Fr(n,e){return typeof n=="function"?n(e):n}function QR(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=n;if(o){if(s){if(e.queryHash!==ZT(o,e.options))return!1}else if(!km(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function ZR(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Nu(e.options.mutationKey)!==Nu(i))return!1}else if(!km(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function ZT(n,e){return((e==null?void 0:e.queryKeyHashFn)||Nu)(n)}function Nu(n){return JSON.stringify(n,(e,t)=>bS(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function km(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>km(n[t],e[t])):!1}function AL(n,e){if(n===e)return n;const t=ek(n)&&ek(e);if(t||bS(n)&&bS(e)){const s=t?n:Object.keys(n),r=s.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},l=new Set(s);let c=0;for(let u=0;u<o;u++){const f=t?u:i[u];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(a[f]=void 0,c++):(a[f]=AL(n[f],e[f]),a[f]===n[f]&&n[f]!==void 0&&c++)}return r===o&&c===r?n:a}return e}function lw(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function ek(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function bS(n){if(!tk(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!tk(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function tk(n){return Object.prototype.toString.call(n)==="[object Object]"}function KH(n){return new Promise(e=>{setTimeout(e,n)})}function ES(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?AL(n,e):e}function YH(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function JH(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var eA=Symbol();function RL(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===eA?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function kL(n,e){return typeof n=="function"?n(...e):!!n}var sc,ga,eh,GI,XH=(GI=class extends Bf{constructor(){super();A(this,sc);A(this,ga);A(this,eh);E(this,eh,e=>{if(!Mu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,ga)||this.setEventListener(d(this,eh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,ga))==null||e.call(this),E(this,ga,void 0))}setEventListener(e){var t;E(this,eh,e),(t=d(this,ga))==null||t.call(this),E(this,ga,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){d(this,sc)!==e&&(E(this,sc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,sc)=="boolean"?d(this,sc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},sc=new WeakMap,ga=new WeakMap,eh=new WeakMap,GI),tA=new XH,th,ya,nh,qI,QH=(qI=class extends Bf{constructor(){super();A(this,th,!0);A(this,ya);A(this,nh);E(this,nh,e=>{if(!Mu&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){d(this,ya)||this.setEventListener(d(this,nh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,ya))==null||e.call(this),E(this,ya,void 0))}setEventListener(e){var t;E(this,nh,e),(t=d(this,ya))==null||t.call(this),E(this,ya,e(this.setOnline.bind(this)))}setOnline(e){d(this,th)!==e&&(E(this,th,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return d(this,th)}},th=new WeakMap,ya=new WeakMap,nh=new WeakMap,qI),cw=new QH;function TS(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}function ZH(n){return Math.min(1e3*2**n,3e4)}function PL(n){return(n??"online")==="online"?cw.isOnline():!0}var IL=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function K_(n){return n instanceof IL}function ML(n){let e=!1,t=0,s=!1,r;const i=TS(),o=v=>{var _;s||(m(new IL(v)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>tA.isFocused()&&(n.networkMode==="always"||cw.isOnline())&&n.canRun(),u=()=>PL(n.networkMode)&&n.canRun(),f=v=>{var _;s||(s=!0,(_=n.onSuccess)==null||_.call(n,v),r==null||r(),i.resolve(v))},m=v=>{var _;s||(s=!0,(_=n.onError)==null||_.call(n,v),r==null||r(),i.reject(v))},g=()=>new Promise(v=>{var _;r=x=>{(s||c())&&v(x)},(_=n.onPause)==null||_.call(n)}).then(()=>{var v;r=void 0,s||(v=n.onContinue)==null||v.call(n)}),w=()=>{if(s)return;let v;const _=t===0?n.initialPromise:void 0;try{v=_??n.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var P;if(s)return;const S=n.retry??(Mu?0:3),C=n.retryDelay??ZH,T=typeof C=="function"?C(t,x):C,R=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,x);if(e||!R){m(x);return}t++,(P=n.onFail)==null||P.call(n,t,x),KH(T).then(()=>c()?void 0:g()).then(()=>{e?m(x):w()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?w():g().then(w),i)}}var e6=n=>setTimeout(n,0);function t6(){let n=[],e=0,t=a=>{a()},s=a=>{a()},r=e6;const i=a=>{e?n.push(a):r(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var zt=t6(),rc,WI,NL=(WI=class{constructor(){A(this,rc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),SS(this.gcTime)&&E(this,rc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Mu?1/0:5*60*1e3))}clearGcTimeout(){d(this,rc)&&(clearTimeout(d(this,rc)),E(this,rc,void 0))}},rc=new WeakMap,WI),sh,ic,js,oc,Cn,Bm,ac,wr,$i,KI,n6=(KI=class extends NL{constructor(e){super();A(this,wr);A(this,sh);A(this,ic);A(this,js);A(this,oc);A(this,Cn);A(this,Bm);A(this,ac);E(this,ac,!1),E(this,Bm,e.defaultOptions),this.setOptions(e.options),this.observers=[],E(this,oc,e.client),E(this,js,d(this,oc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,E(this,sh,s6(this.options)),this.state=e.state??d(this,sh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,Cn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Bm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,js).remove(this)}setData(e,t){const s=ES(this.state.data,e,this.options);return k(this,wr,$i).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){k(this,wr,$i).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=d(this,Cn))==null?void 0:s.promise;return(r=d(this,Cn))==null||r.cancel(e),t?t.then(Un).catch(Un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,sh))}isActive(){return this.observers.some(e=>Fr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===eA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!TL(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Cn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Cn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,Cn)&&(d(this,ac)?d(this,Cn).cancel({revert:!0}):d(this,Cn).cancelRetry()),this.scheduleGc()),d(this,js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,wr,$i).call(this,{type:"invalidate"})}fetch(e,t){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,Cn))return d(this,Cn).continueRetry(),d(this,Cn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(E(this,ac,!0),s.signal)})},i=()=>{const m=RL(this.options,t),w=(()=>{const v={client:d(this,oc),queryKey:this.queryKey,meta:this.meta};return r(v),v})();return E(this,ac,!1),this.options.persister?this.options.persister(m,w,this):m(w)},a=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,oc),state:this.state,fetchFn:i};return r(m),m})();(c=this.options.behavior)==null||c.onFetch(a,this),E(this,ic,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&k(this,wr,$i).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=m=>{var g,w,v,_;K_(m)&&m.silent||k(this,wr,$i).call(this,{type:"error",error:m}),K_(m)||((w=(g=d(this,js).config).onError)==null||w.call(g,m,this),(_=(v=d(this,js).config).onSettled)==null||_.call(v,this.state.data,m,this)),this.scheduleGc()};return E(this,Cn,ML({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,w,v,_;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(w=(g=d(this,js).config).onSuccess)==null||w.call(g,m,this),(_=(v=d(this,js).config).onSettled)==null||_.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,g)=>{k(this,wr,$i).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{k(this,wr,$i).call(this,{type:"pause"})},onContinue:()=>{k(this,wr,$i).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,Cn).start()}},sh=new WeakMap,ic=new WeakMap,js=new WeakMap,oc=new WeakMap,Cn=new WeakMap,Bm=new WeakMap,ac=new WeakMap,wr=new WeakSet,$i=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...DL(s.data,this.options),fetchMeta:e.meta??null};case"success":return E(this,ic,void 0),{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return K_(r)&&r.revert&&d(this,ic)?{...d(this,ic),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),zt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),d(this,js).notify({query:this,type:"updated",action:e})})},KI);function DL(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PL(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function s6(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Zr,YI,r6=(YI=class extends Bf{constructor(e={}){super();A(this,Zr);this.config=e,E(this,Zr,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??ZT(r,t);let o=this.get(i);return o||(o=new n6({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){d(this,Zr).has(e.queryHash)||(d(this,Zr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,Zr).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,Zr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,Zr).get(e)}getAll(){return[...d(this,Zr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>QR(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>QR(e,s)):t}notify(e){zt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zr=new WeakMap,YI),ei,In,lc,ti,sa,JI,i6=(JI=class extends NL{constructor(e){super();A(this,ti);A(this,ei);A(this,In);A(this,lc);this.mutationId=e.mutationId,E(this,In,e.mutationCache),E(this,ei,[]),this.state=e.state||LL(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,ei).includes(e)||(d(this,ei).push(e),this.clearGcTimeout(),d(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){E(this,ei,d(this,ei).filter(t=>t!==e)),this.scheduleGc(),d(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,ei).length||(this.state.status==="pending"?this.scheduleGc():d(this,In).remove(this))}continue(){var e;return((e=d(this,lc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,c,u,f,m,g,w,v,_,x,S,C,T,R,P,I,M;const t=()=>{k(this,ti,sa).call(this,{type:"continue"})};E(this,lc,ML({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,L)=>{k(this,ti,sa).call(this,{type:"failed",failureCount:N,error:L})},onPause:()=>{k(this,ti,sa).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,In).canRun(this)}));const s=this.state.status==="pending",r=!d(this,lc).canStart();try{if(s)t();else{k(this,ti,sa).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=d(this,In).config).onMutate)==null?void 0:o.call(i,e,this));const L=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));L!==this.state.context&&k(this,ti,sa).call(this,{type:"pending",context:L,variables:e,isPaused:r})}const N=await d(this,lc).start();return await((u=(c=d(this,In).config).onSuccess)==null?void 0:u.call(c,N,e,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,N,e,this.state.context)),await((w=(g=d(this,In).config).onSettled)==null?void 0:w.call(g,N,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,N,null,e,this.state.context)),k(this,ti,sa).call(this,{type:"success",data:N}),N}catch(N){try{throw await((S=(x=d(this,In).config).onError)==null?void 0:S.call(x,N,e,this.state.context,this)),await((T=(C=this.options).onError)==null?void 0:T.call(C,N,e,this.state.context)),await((P=(R=d(this,In).config).onSettled)==null?void 0:P.call(R,void 0,N,this.state.variables,this.state.context,this)),await((M=(I=this.options).onSettled)==null?void 0:M.call(I,void 0,N,e,this.state.context)),N}finally{k(this,ti,sa).call(this,{type:"error",error:N})}}finally{d(this,In).runNext(this)}}},ei=new WeakMap,In=new WeakMap,lc=new WeakMap,ti=new WeakSet,sa=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),zt.batch(()=>{d(this,ei).forEach(s=>{s.onMutationUpdate(e)}),d(this,In).notify({mutation:this,type:"updated",action:e})})},JI);function LL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yi,xr,Vm,XI,o6=(XI=class extends Bf{constructor(e={}){super();A(this,Yi);A(this,xr);A(this,Vm);this.config=e,E(this,Yi,new Set),E(this,xr,new Map),E(this,Vm,0)}build(e,t,s){const r=new i6({mutationCache:this,mutationId:++qt(this,Vm)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){d(this,Yi).add(e);const t=fv(e);if(typeof t=="string"){const s=d(this,xr).get(t);s?s.push(e):d(this,xr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,Yi).delete(e)){const t=fv(e);if(typeof t=="string"){const s=d(this,xr).get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&d(this,xr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=fv(e);if(typeof t=="string"){const s=d(this,xr).get(t),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const t=fv(e);if(typeof t=="string"){const r=(s=d(this,xr).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){zt.batch(()=>{d(this,Yi).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,Yi).clear(),d(this,xr).clear()})}getAll(){return Array.from(d(this,Yi))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ZR(t,s))}findAll(e={}){return this.getAll().filter(t=>ZR(e,t))}notify(e){zt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return zt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Un))))}},Yi=new WeakMap,xr=new WeakMap,Vm=new WeakMap,XI);function fv(n){var e;return(e=n.options.scope)==null?void 0:e.id}function nk(n){return{onFetch:(e,t)=>{var u,f,m,g,w;const s=e.options,r=(m=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=RL(e.options,e.fetchOptions),S=async(C,T,R)=>{if(v)return Promise.reject();if(T==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:T,direction:R?"backward":"forward",meta:e.options.meta};return _(D),D})(),M=await x(I),{maxPages:N}=e.options,L=R?JH:YH;return{pages:L(C.pages,M,N),pageParams:L(C.pageParams,T,N)}};if(r&&i.length){const C=r==="backward",T=C?a6:sk,R={pages:i,pageParams:o},P=T(s,R);a=await S(R,P,C)}else{const C=n??i.length;do{const T=l===0?o[0]??s.initialPageParam:sk(s,a);if(l>0&&T==null)break;a=await S(a,T),l++}while(l<C)}return a};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function sk(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function a6(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var bt,va,wa,rh,ih,xa,oh,ah,QI,l6=(QI=class{constructor(n={}){A(this,bt);A(this,va);A(this,wa);A(this,rh);A(this,ih);A(this,xa);A(this,oh);A(this,ah);E(this,bt,n.queryCache||new r6),E(this,va,n.mutationCache||new o6),E(this,wa,n.defaultOptions||{}),E(this,rh,new Map),E(this,ih,new Map),E(this,xa,0)}mount(){qt(this,xa)._++,d(this,xa)===1&&(E(this,oh,tA.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,bt).onFocus())})),E(this,ah,cw.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,bt).onOnline())})))}unmount(){var n,e;qt(this,xa)._--,d(this,xa)===0&&((n=d(this,oh))==null||n.call(this),E(this,oh,void 0),(e=d(this,ah))==null||e.call(this),E(this,ah,void 0))}isFetching(n){return d(this,bt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,va).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,bt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,bt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(wl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return d(this,bt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=d(this,bt).get(s.queryHash),i=r==null?void 0:r.state.data,o=WH(e,i);if(o!==void 0)return d(this,bt).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return zt.batch(()=>d(this,bt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,bt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,bt);zt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,bt);return zt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=zt.batch(()=>d(this,bt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(Un).catch(Un)}invalidateQueries(n,e={}){return zt.batch(()=>(d(this,bt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=zt.batch(()=>d(this,bt).findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(Un)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Un)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,bt).build(this,e);return t.isStaleByTime(wl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Un).catch(Un)}fetchInfiniteQuery(n){return n.behavior=nk(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Un).catch(Un)}ensureInfiniteQueryData(n){return n.behavior=nk(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return cw.isOnline()?d(this,va).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,bt)}getMutationCache(){return d(this,va)}getDefaultOptions(){return d(this,wa)}setDefaultOptions(n){E(this,wa,n)}setQueryDefaults(n,e){d(this,rh).set(Nu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,rh).values()],t={};return e.forEach(s=>{km(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){d(this,ih).set(Nu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,ih).values()],t={};return e.forEach(s=>{km(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,wa).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=ZT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===eA&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,wa).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,bt).clear(),d(this,va).clear()}},bt=new WeakMap,va=new WeakMap,wa=new WeakMap,rh=new WeakMap,ih=new WeakMap,xa=new WeakMap,oh=new WeakMap,ah=new WeakMap,QI),Qn,$e,jm,Mn,cc,lh,_a,Ca,zm,ch,uh,uc,dc,Sa,dh,qe,Cp,AS,RS,kS,PS,IS,MS,NS,FL,ZI,c6=(ZI=class extends Bf{constructor(e,t){super();A(this,qe);A(this,Qn);A(this,$e);A(this,jm);A(this,Mn);A(this,cc);A(this,lh);A(this,_a);A(this,Ca);A(this,zm);A(this,ch);A(this,uh);A(this,uc);A(this,dc);A(this,Sa);A(this,dh,new Set);this.options=t,E(this,Qn,e),E(this,Ca,null),E(this,_a,TS()),this.options.experimental_prefetchInRender||d(this,_a).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,$e).addObserver(this),rk(d(this,$e),this.options)?k(this,qe,Cp).call(this):this.updateResult(),k(this,qe,PS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return DS(d(this,$e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return DS(d(this,$e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,k(this,qe,IS).call(this),k(this,qe,MS).call(this),d(this,$e).removeObserver(this)}setOptions(e){const t=this.options,s=d(this,$e);if(this.options=d(this,Qn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,d(this,$e))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");k(this,qe,NS).call(this),d(this,$e).setOptions(this.options),t._defaulted&&!lw(this.options,t)&&d(this,Qn).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,$e),observer:this});const r=this.hasListeners();r&&ik(d(this,$e),s,this.options,t)&&k(this,qe,Cp).call(this),this.updateResult(),r&&(d(this,$e)!==s||Fr(this.options.enabled,d(this,$e))!==Fr(t.enabled,d(this,$e))||wl(this.options.staleTime,d(this,$e))!==wl(t.staleTime,d(this,$e)))&&k(this,qe,AS).call(this);const i=k(this,qe,RS).call(this);r&&(d(this,$e)!==s||Fr(this.options.enabled,d(this,$e))!==Fr(t.enabled,d(this,$e))||i!==d(this,Sa))&&k(this,qe,kS).call(this,i)}getOptimisticResult(e){const t=d(this,Qn).getQueryCache().build(d(this,Qn),e),s=this.createResult(t,e);return d6(this,s)&&(E(this,Mn,s),E(this,lh,this.options),E(this,cc,d(this,$e).state)),s}getCurrentResult(){return d(this,Mn)}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t==null||t(r),Reflect.get(s,r))})}trackProp(e){d(this,dh).add(e)}getCurrentQuery(){return d(this,$e)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=d(this,Qn).defaultQueryOptions(e),s=d(this,Qn).getQueryCache().build(d(this,Qn),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return k(this,qe,Cp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,Mn)))}createResult(e,t){var N;const s=d(this,$e),r=this.options,i=d(this,Mn),o=d(this,cc),a=d(this,lh),c=e!==s?e.state:d(this,jm),{state:u}=e;let f={...u},m=!1,g;if(t._optimisticResults){const L=this.hasListeners(),D=!L&&rk(e,t),V=L&&ik(e,s,t,r);(D||V)&&(f={...f,...DL(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:_}=f;g=f.data;let x=!1;if(t.placeholderData!==void 0&&g===void 0&&_==="pending"){let L;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(L=i.data,x=!0):L=typeof t.placeholderData=="function"?t.placeholderData((N=d(this,uh))==null?void 0:N.state.data,d(this,uh)):t.placeholderData,L!==void 0&&(_="success",g=ES(i==null?void 0:i.data,L,t),m=!0)}if(t.select&&g!==void 0&&!x)if(i&&g===(o==null?void 0:o.data)&&t.select===d(this,zm))g=d(this,ch);else try{E(this,zm,t.select),g=t.select(g),g=ES(i==null?void 0:i.data,g,t),E(this,ch,g),E(this,Ca,null)}catch(L){E(this,Ca,L)}d(this,Ca)&&(w=d(this,Ca),g=d(this,ch),v=Date.now(),_="error");const S=f.fetchStatus==="fetching",C=_==="pending",T=_==="error",R=C&&S,P=g!==void 0,M={status:_,fetchStatus:f.fetchStatus,isPending:C,isSuccess:_==="success",isError:T,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:T&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&P,isStale:nA(e,t),refetch:this.refetch,promise:d(this,_a)};if(this.options.experimental_prefetchInRender){const L=G=>{M.status==="error"?G.reject(M.error):M.data!==void 0&&G.resolve(M.data)},D=()=>{const G=E(this,_a,M.promise=TS());L(G)},V=d(this,_a);switch(V.status){case"pending":e.queryHash===s.queryHash&&L(V);break;case"fulfilled":(M.status==="error"||M.data!==V.value)&&D();break;case"rejected":(M.status!=="error"||M.error!==V.reason)&&D();break}}return M}updateResult(){const e=d(this,Mn),t=this.createResult(d(this,$e),this.options);if(E(this,cc,d(this,$e).state),E(this,lh,this.options),d(this,cc).data!==void 0&&E(this,uh,d(this,$e)),lw(t,e))return;E(this,Mn,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!d(this,dh).size)return!0;const o=new Set(i??d(this,dh));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,Mn)).some(a=>{const l=a;return d(this,Mn)[l]!==e[l]&&o.has(l)})};k(this,qe,FL).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&k(this,qe,PS).call(this)}},Qn=new WeakMap,$e=new WeakMap,jm=new WeakMap,Mn=new WeakMap,cc=new WeakMap,lh=new WeakMap,_a=new WeakMap,Ca=new WeakMap,zm=new WeakMap,ch=new WeakMap,uh=new WeakMap,uc=new WeakMap,dc=new WeakMap,Sa=new WeakMap,dh=new WeakMap,qe=new WeakSet,Cp=function(e){k(this,qe,NS).call(this);let t=d(this,$e).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Un)),t},AS=function(){k(this,qe,IS).call(this);const e=wl(this.options.staleTime,d(this,$e));if(Mu||d(this,Mn).isStale||!SS(e))return;const s=TL(d(this,Mn).dataUpdatedAt,e)+1;E(this,uc,setTimeout(()=>{d(this,Mn).isStale||this.updateResult()},s))},RS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,$e)):this.options.refetchInterval)??!1},kS=function(e){k(this,qe,MS).call(this),E(this,Sa,e),!(Mu||Fr(this.options.enabled,d(this,$e))===!1||!SS(d(this,Sa))||d(this,Sa)===0)&&E(this,dc,setInterval(()=>{(this.options.refetchIntervalInBackground||tA.isFocused())&&k(this,qe,Cp).call(this)},d(this,Sa)))},PS=function(){k(this,qe,AS).call(this),k(this,qe,kS).call(this,k(this,qe,RS).call(this))},IS=function(){d(this,uc)&&(clearTimeout(d(this,uc)),E(this,uc,void 0))},MS=function(){d(this,dc)&&(clearInterval(d(this,dc)),E(this,dc,void 0))},NS=function(){const e=d(this,Qn).getQueryCache().build(d(this,Qn),this.options);if(e===d(this,$e))return;const t=d(this,$e);E(this,$e,e),E(this,jm,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},FL=function(e){zt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(d(this,Mn))}),d(this,Qn).getQueryCache().notify({query:d(this,$e),type:"observerResultsUpdated"})})},ZI);function u6(n,e){return Fr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function rk(n,e){return u6(n,e)||n.state.data!==void 0&&DS(n,e,e.refetchOnMount)}function DS(n,e,t){if(Fr(e.enabled,n)!==!1&&wl(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&nA(n,e)}return!1}function ik(n,e,t,s){return(n!==e||Fr(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&nA(n,t)}function nA(n,e){return Fr(e.enabled,n)!==!1&&n.isStaleByTime(wl(e.staleTime,n))}function d6(n,e){return!lw(n.getCurrentResult(),e)}var ba,Ea,Zn,Ji,Lo,Kv,LS,eM,h6=(eM=class extends Bf{constructor(t,s){super();A(this,Lo);A(this,ba);A(this,Ea);A(this,Zn);A(this,Ji);E(this,ba,t),this.setOptions(s),this.bindMethods(),k(this,Lo,Kv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=d(this,ba).defaultMutationOptions(t),lw(this.options,s)||d(this,ba).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,Zn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Nu(s.mutationKey)!==Nu(this.options.mutationKey)?this.reset():((r=d(this,Zn))==null?void 0:r.state.status)==="pending"&&d(this,Zn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=d(this,Zn))==null||t.removeObserver(this)}onMutationUpdate(t){k(this,Lo,Kv).call(this),k(this,Lo,LS).call(this,t)}getCurrentResult(){return d(this,Ea)}reset(){var t;(t=d(this,Zn))==null||t.removeObserver(this),E(this,Zn,void 0),k(this,Lo,Kv).call(this),k(this,Lo,LS).call(this)}mutate(t,s){var r;return E(this,Ji,s),(r=d(this,Zn))==null||r.removeObserver(this),E(this,Zn,d(this,ba).getMutationCache().build(d(this,ba),this.options)),d(this,Zn).addObserver(this),d(this,Zn).execute(t)}},ba=new WeakMap,Ea=new WeakMap,Zn=new WeakMap,Ji=new WeakMap,Lo=new WeakSet,Kv=function(){var s;const t=((s=d(this,Zn))==null?void 0:s.state)??LL();E(this,Ea,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},LS=function(t){zt.batch(()=>{var s,r,i,o,a,l,c,u;if(d(this,Ji)&&this.hasListeners()){const f=d(this,Ea).variables,m=d(this,Ea).context;(t==null?void 0:t.type)==="success"?((r=(s=d(this,Ji)).onSuccess)==null||r.call(s,t.data,f,m),(o=(i=d(this,Ji)).onSettled)==null||o.call(i,t.data,null,f,m)):(t==null?void 0:t.type)==="error"&&((l=(a=d(this,Ji)).onError)==null||l.call(a,t.error,f,m),(u=(c=d(this,Ji)).onSettled)==null||u.call(c,void 0,t.error,f,m))}this.listeners.forEach(f=>{f(d(this,Ea))})})},eM),OL=b.createContext(void 0),sA=n=>{const e=b.useContext(OL);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},f6=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),y.jsx(OL.Provider,{value:n,children:e})),$L=b.createContext(!1),p6=()=>b.useContext($L);$L.Provider;function m6(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var g6=b.createContext(m6()),y6=()=>b.useContext(g6),v6=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},w6=n=>{b.useEffect(()=>{n.clearReset()},[n])},x6=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:r})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(r&&n.data===void 0||kL(t,[n.error,s])),_6=n=>{if(n.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},C6=(n,e)=>n.isLoading&&n.isFetching&&!e,S6=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,ok=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function b6(n,e,t){var f,m,g,w,v;const s=p6(),r=y6(),i=sA(),o=i.defaultQueryOptions(n);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=s?"isRestoring":"optimistic",_6(o),v6(o,r),w6(r);const a=!i.getQueryCache().get(o.queryHash),[l]=b.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),u=!s&&n.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(_=>{const x=u?l.subscribe(zt.batchCalls(_)):Un;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),b.useEffect(()=>{l.setOptions(o)},[o,l]),S6(o,c))throw ok(o,l,r);if(x6({result:c,errorResetBoundary:r,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||w.call(g,o,c),o.experimental_prefetchInRender&&!Mu&&C6(c,s)){const _=a?ok(o,l,r):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;_==null||_.catch(Un).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function UL(n,e){return b6(n,c6)}function ak(n,e){const t=sA(),[s]=b.useState(()=>new h6(t,n));b.useEffect(()=>{s.setOptions(n)},[s,n]);const r=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(zt.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,a)=>{s.mutate(o,a).catch(Un)},[s]);if(r.error&&kL(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}var rA={};Object.defineProperty(rA,"__esModule",{value:!0});rA.parse=I6;rA.serialize=M6;const E6=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,T6=/^[\u0021-\u003A\u003C-\u007E]*$/,A6=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,R6=/^[\u0020-\u003A\u003D-\u007E]*$/,k6=Object.prototype.toString,P6=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function I6(n,e){const t=new P6,s=n.length;if(s<2)return t;const r=(e==null?void 0:e.decode)||N6;let i=0;do{const o=n.indexOf("=",i);if(o===-1)break;const a=n.indexOf(";",i),l=a===-1?s:a;if(o>l){i=n.lastIndexOf(";",o-1)+1;continue}const c=lk(n,i,o),u=ck(n,o,c),f=n.slice(c,u);if(t[f]===void 0){let m=lk(n,o+1,l),g=ck(n,l,m);const w=r(n.slice(m,g));t[f]=w}i=l+1}while(i<s);return t}function lk(n,e,t){do{const s=n.charCodeAt(e);if(s!==32&&s!==9)return e}while(++e<t);return t}function ck(n,e,t){for(;e>t;){const s=n.charCodeAt(--e);if(s!==32&&s!==9)return e+1}return t}function M6(n,e,t){const s=(t==null?void 0:t.encode)||encodeURIComponent;if(!E6.test(n))throw new TypeError(`argument name is invalid: ${n}`);const r=s(e);if(!T6.test(r))throw new TypeError(`argument val is invalid: ${e}`);let i=n+"="+r;if(!t)return i;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);i+="; Max-Age="+t.maxAge}if(t.domain){if(!A6.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);i+="; Domain="+t.domain}if(t.path){if(!R6.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);i+="; Path="+t.path}if(t.expires){if(!D6(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);i+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(i+="; HttpOnly"),t.secure&&(i+="; Secure"),t.partitioned&&(i+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return i}function N6(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function D6(n){return k6.call(n)==="[object Date]"}var uk="popstate";function L6(n={}){function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return FS("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:Pm(r)}return O6(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F6(){return Math.random().toString(36).substring(2,10)}function dk(n,e){return{usr:n.state,key:n.key,idx:e}}function FS(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vf(e):e,state:t,key:e&&e.key||s||F6()}}function Pm({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function O6(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function f(){a="POP";let _=u(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function m(_,x){a="PUSH";let S=FS(v.location,_,x);c=u()+1;let C=dk(S,c),T=v.createHref(S);try{o.pushState(C,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(T)}i&&l&&l({action:a,location:v.location,delta:1})}function g(_,x){a="REPLACE";let S=FS(v.location,_,x);c=u();let C=dk(S,c),T=v.createHref(S);o.replaceState(C,"",T),i&&l&&l({action:a,location:v.location,delta:0})}function w(_){return $6(_)}let v={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(uk,f),l=_,()=>{r.removeEventListener(uk,f),l=null}},createHref(_){return e(r,_)},createURL:w,encodeLocation(_){let x=w(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(_){return o.go(_)}};return v}function $6(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Pm(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function BL(n,e,t="/"){return U6(n,e,t,!1)}function U6(n,e,t,s){let r=typeof e=="string"?Vf(e):e,i=Ho(r.pathname||"/",t);if(i==null)return null;let o=VL(n);B6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=X6(i);a=Y6(o[l],c,s)}return a}function VL(n,e=[],t=[],s=""){let r=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gt(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length));let c=Do([s,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(gt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),VL(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:W6(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let l of jL(i.path))r(i,o,l)}),e}function jL(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=jL(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function B6(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:K6(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var V6=/^:[\w-]+$/,j6=3,z6=2,H6=1,G6=10,q6=-2,hk=n=>n==="*";function W6(n,e){let t=n.split("/"),s=t.length;return t.some(hk)&&(s+=q6),e&&(s+=z6),t.filter(r=>!hk(r)).reduce((r,i)=>r+(V6.test(i)?j6:i===""?H6:G6),s)}function K6(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function Y6(n,e,t=!1){let{routesMeta:s}=n,r={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=uw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!f&&c&&t&&!s[s.length-1].route.index&&(f=uw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Do([i,f.pathname]),pathnameBase:tG(Do([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Do([i,f.pathnameBase]))}return o}function uw(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=J6(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((c,{paramName:u,isOptional:f},m)=>{if(u==="*"){let w=a[m]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[m];return f&&!g?c[u]=void 0:c[u]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function J6(n,e=!1,t=!0){zr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function X6(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ho(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function Q6(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?Vf(n):n;return{pathname:t?t.startsWith("/")?t:Z6(t,e):e,search:nG(s),hash:sG(r)}}function Z6(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Y_(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eG(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iA(n){let e=eG(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function oA(n,e,t,s=!1){let r;typeof n=="string"?r=Vf(n):(r={...n},gt(!r.pathname||!r.pathname.includes("?"),Y_("?","pathname","search",r)),gt(!r.pathname||!r.pathname.includes("#"),Y_("#","pathname","hash",r)),gt(!r.search||!r.search.includes("#"),Y_("#","search","hash",r)));let i=n===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=Q6(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Do=n=>n.join("/").replace(/\/\/+/g,"/"),tG=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nG=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sG=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function rG(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var zL=["POST","PUT","PATCH","DELETE"];new Set(zL);var iG=["GET",...zL];new Set(iG);var jf=b.createContext(null);jf.displayName="DataRouter";var kx=b.createContext(null);kx.displayName="DataRouterState";var HL=b.createContext({isTransitioning:!1});HL.displayName="ViewTransition";var oG=b.createContext(new Map);oG.displayName="Fetchers";var aG=b.createContext(null);aG.displayName="Await";var qr=b.createContext(null);qr.displayName="Navigation";var Ay=b.createContext(null);Ay.displayName="Location";var lr=b.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var aA=b.createContext(null);aA.displayName="RouteError";function lG(n,{relative:e}={}){gt(zf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=b.useContext(qr),{hash:r,pathname:i,search:o}=Ry(n,{relative:e}),a=i;return t!=="/"&&(a=i==="/"?t:Do([t,i])),s.createHref({pathname:a,search:o,hash:r})}function zf(){return b.useContext(Ay)!=null}function Yo(){return gt(zf(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Ay).location}var GL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qL(n){b.useContext(qr).static||b.useLayoutEffect(n)}function Hf(){let{isDataRoute:n}=b.useContext(lr);return n?bG():cG()}function cG(){gt(zf(),"useNavigate() may be used only in the context of a <Router> component.");let n=b.useContext(jf),{basename:e,navigator:t}=b.useContext(qr),{matches:s}=b.useContext(lr),{pathname:r}=Yo(),i=JSON.stringify(iA(s)),o=b.useRef(!1);return qL(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(zr(o.current,GL),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=oA(l,JSON.parse(i),r,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Do([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,i,r,n])}var uG=b.createContext(null);function dG(n){let e=b.useContext(lr).outlet;return e&&b.createElement(uG.Provider,{value:n},e)}function hG(){let{matches:n}=b.useContext(lr),e=n[n.length-1];return e?e.params:{}}function Ry(n,{relative:e}={}){let{matches:t}=b.useContext(lr),{pathname:s}=Yo(),r=JSON.stringify(iA(t));return b.useMemo(()=>oA(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function fG(n,e){return WL(n,e)}function WL(n,e,t,s){var x;gt(zf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=b.useContext(qr),{matches:i}=b.useContext(lr),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let S=u&&u.path||"";KL(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let f=Yo(),m;if(e){let S=typeof e=="string"?Vf(e):e;gt(c==="/"||((x=S.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),m=S}else m=f;let g=m.pathname||"/",w=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=BL(n,{pathname:w});zr(u||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),zr(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=vG(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Do([c,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Do([c,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,t,s);return e&&_?b.createElement(Ay.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function pG(){let n=SG(),e=rG(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:r},t):null,o)}var mG=b.createElement(pG,null),gG=class extends b.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?b.createElement(lr.Provider,{value:this.props.routeContext},b.createElement(aA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yG({routeContext:n,match:e,children:t}){let s=b.useContext(jf);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(lr.Provider,{value:n},t)}function vG(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,i=t==null?void 0:t.errors;if(i!=null){let l=r.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);gt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<r.length;l++){let c=r[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:f}=t,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?r=r.slice(0,a+1):r=[r[0]];break}}}return r.reduceRight((l,c,u)=>{let f,m=!1,g=null,w=null;t&&(f=i&&c.route.id?i[c.route.id]:void 0,g=c.route.errorElement||mG,o&&(a<0&&u===0?(KL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):a===u&&(m=!0,w=c.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,u+1)),_=()=>{let x;return f?x=g:m?x=w:c.route.Component?x=b.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,b.createElement(yG,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?b.createElement(gG,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}function lA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wG(n){let e=b.useContext(jf);return gt(e,lA(n)),e}function xG(n){let e=b.useContext(kx);return gt(e,lA(n)),e}function _G(n){let e=b.useContext(lr);return gt(e,lA(n)),e}function cA(n){let e=_G(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function CG(){return cA("useRouteId")}function SG(){var s;let n=b.useContext(aA),e=xG("useRouteError"),t=cA("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function bG(){let{router:n}=wG("useNavigate"),e=cA("useNavigate"),t=b.useRef(!1);return qL(()=>{t.current=!0}),b.useCallback(async(r,i={})=>{zr(t.current,GL),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...i}))},[n,e])}var fk={};function KL(n,e,t){!e&&!fk[n]&&(fk[n]=!0,zr(!1,t))}b.memo(EG);function EG({routes:n,future:e,state:t}){return WL(n,void 0,t,e)}function TG({to:n,replace:e,state:t,relative:s}){gt(zf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=b.useContext(qr);zr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(lr),{pathname:o}=Yo(),a=Hf(),l=oA(n,iA(i),o,s==="path"),c=JSON.stringify(l);return b.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:s})},[a,c,s,e,t]),null}function AG(n){return dG(n.context)}function md(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RG({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:i=!1}){gt(!zf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof t=="string"&&(t=Vf(t));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:m="default"}=t,g=b.useMemo(()=>{let w=Ho(l,o);return w==null?null:{location:{pathname:w,search:c,hash:u,state:f,key:m},navigationType:s}},[o,l,c,u,f,m,s]);return zr(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:b.createElement(qr.Provider,{value:a},b.createElement(Ay.Provider,{children:e,value:g}))}function kG({children:n,location:e}){return fG(OS(n),e)}function OS(n,e=[]){let t=[];return b.Children.forEach(n,(s,r)=>{if(!b.isValidElement(s))return;let i=[...e,r];if(s.type===b.Fragment){t.push.apply(t,OS(s.props.children,i));return}gt(s.type===md,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=OS(s.props.children,i)),t.push(o)}),t}var Yv="get",Jv="application/x-www-form-urlencoded";function Px(n){return n!=null&&typeof n.tagName=="string"}function PG(n){return Px(n)&&n.tagName.toLowerCase()==="button"}function IG(n){return Px(n)&&n.tagName.toLowerCase()==="form"}function MG(n){return Px(n)&&n.tagName.toLowerCase()==="input"}function NG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function DG(n,e){return n.button===0&&(!e||e==="_self")&&!NG(n)}var pv=null;function LG(){if(pv===null)try{new FormData(document.createElement("form"),0),pv=!1}catch{pv=!0}return pv}var FG=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function J_(n){return n!=null&&!FG.has(n)?(zr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jv}"`),null):n}function OG(n,e){let t,s,r,i,o;if(IG(n)){let a=n.getAttribute("action");s=a?Ho(a,e):null,t=n.getAttribute("method")||Yv,r=J_(n.getAttribute("enctype"))||Jv,i=new FormData(n)}else if(PG(n)||MG(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(s=l?Ho(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Yv,r=J_(n.getAttribute("formenctype"))||J_(a.getAttribute("enctype"))||Jv,i=new FormData(a,n),!LG()){let{name:c,type:u,value:f}=n;if(u==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,f)}}else{if(Px(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yv,s=null,r=Jv,o=n}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:i,body:o}}function uA(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function $G(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UG(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function BG(n,e,t){let s=await Promise.all(n.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await $G(i,t);return o.links?o.links():[]}return[]}));return HG(s.flat(1).filter(UG).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function pk(n,e,t,s,r,i){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var f;let u=s.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function VG(n,e,{includeHydrateFallback:t}={}){return jG(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function jG(n){return[...new Set(n)]}function zG(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function HG(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let i=JSON.stringify(zG(r));return t.has(i)||(t.add(i),s.push({key:i,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var GG=new Set([100,101,204,205]);function qG(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ho(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function YL(){let n=b.useContext(jf);return uA(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function WG(){let n=b.useContext(kx);return uA(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var dA=b.createContext(void 0);dA.displayName="FrameworkContext";function JL(){let n=b.useContext(dA);return uA(n,"You must render this element inside a <HydratedRouter> element"),n}function KG(n,e){let t=b.useContext(dA),[s,r]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,m=b.useRef(null);b.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=x=>{x.forEach(S=>{o(S.isIntersecting)})},_=new IntersectionObserver(v,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[n]),b.useEffect(()=>{if(s){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[s]);let g=()=>{r(!0)},w=()=>{r(!1),o(!1)};return t?n!=="intent"?[i,m,{}]:[i,m,{onFocus:dp(a,g),onBlur:dp(l,w),onMouseEnter:dp(c,g),onMouseLeave:dp(u,w),onTouchStart:dp(f,g)}]:[!1,m,{}]}function dp(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function YG({page:n,...e}){let{router:t}=YL(),s=b.useMemo(()=>BL(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?b.createElement(XG,{page:n,matches:s,...e}):null}function JG(n){let{manifest:e,routeModules:t}=JL(),[s,r]=b.useState([]);return b.useEffect(()=>{let i=!1;return BG(n,e,t).then(o=>{i||r(o)}),()=>{i=!0}},[n,e,t]),s}function XG({page:n,matches:e,...t}){let s=Yo(),{manifest:r,routeModules:i}=JL(),{basename:o}=YL(),{loaderData:a,matches:l}=WG(),c=b.useMemo(()=>pk(n,e,l,r,s,"data"),[n,e,l,r,s]),u=b.useMemo(()=>pk(n,e,l,r,s,"assets"),[n,e,l,r,s]),f=b.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,v=!1;if(e.forEach(x=>{var C;let S=r.routes[x.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===x.route.id)&&x.route.id in a&&((C=i[x.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?v=!0:w.add(x.route.id))}),w.size===0)return[];let _=qG(n,o);return v&&w.size>0&&_.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[_.pathname+_.search]},[o,a,s,r,c,e,n,i]),m=b.useMemo(()=>VG(u,r),[u,r]),g=JG(u);return b.createElement(b.Fragment,null,f.map(w=>b.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>b.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),g.map(({key:w,link:v})=>b.createElement("link",{key:w,...v})))}function QG(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var XL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XL&&(window.__reactRouterVersion="7.6.3")}catch{}function ZG({basename:n,children:e,window:t}){let s=b.useRef();s.current==null&&(s.current=L6({window:t,v5Compat:!0}));let r=s.current,[i,o]=b.useState({action:r.action,location:r.location}),a=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>r.listen(a),[r,a]),b.createElement(RG,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:r})}var QL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Im=b.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f,...m},g){let{basename:w}=b.useContext(qr),v=typeof c=="string"&&QL.test(c),_,x=!1;if(typeof c=="string"&&v&&(_=c,XL))try{let N=new URL(window.location.href),L=c.startsWith("//")?new URL(N.protocol+c):new URL(c),D=Ho(L.pathname,w);L.origin===N.origin&&D!=null?c=D+L.search+L.hash:x=!0}catch{zr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=lG(c,{relative:r}),[C,T,R]=KG(s,m),P=sq(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:f});function I(N){e&&e(N),N.defaultPrevented||P(N)}let M=b.createElement("a",{...m,...R,href:_||S,onClick:x||i?e:I,ref:QG(g,T),target:l,"data-discover":!v&&t==="render"?"true":void 0});return C&&!v?b.createElement(b.Fragment,null,M,b.createElement(YG,{page:S})):M});Im.displayName="Link";var eq=b.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let f=Ry(o,{relative:c.relative}),m=Yo(),g=b.useContext(kx),{navigator:w,basename:v}=b.useContext(qr),_=g!=null&&lq(f)&&a===!0,x=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,S=m.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&v&&(C=Ho(C,v)||C);const T=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let R=S===x||!r&&S.startsWith(x)&&S.charAt(T)==="/",P=C!=null&&(C===x||!r&&C.startsWith(x)&&C.charAt(x.length)==="/"),I={isActive:R,isPending:P,isTransitioning:_},M=R?e:void 0,N;typeof s=="function"?N=s(I):N=[s,R?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(I):i;return b.createElement(Im,{...c,"aria-current":M,className:N,ref:u,style:L,to:o,viewTransition:a},typeof l=="function"?l(I):l)});eq.displayName="NavLink";var tq=b.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:i,method:o=Yv,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...m},g)=>{let w=oq(),v=aq(a,{relative:c}),_=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&QL.test(a),S=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let T=C.nativeEvent.submitter,R=(T==null?void 0:T.getAttribute("formmethod"))||o;w(T||C.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:r,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return b.createElement("form",{ref:g,method:_,action:v,onSubmit:s?l:S,...m,"data-discover":!x&&n==="render"?"true":void 0})});tq.displayName="Form";function nq(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZL(n){let e=b.useContext(jf);return gt(e,nq(n)),e}function sq(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let a=Hf(),l=Yo(),c=Ry(n,{relative:i});return b.useCallback(u=>{if(DG(u,e)){u.preventDefault();let f=t!==void 0?t:Pm(l)===Pm(c);a(n,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[l,a,c,t,s,e,n,r,i,o])}var rq=0,iq=()=>`__${String(++rq)}__`;function oq(){let{router:n}=ZL("useSubmit"),{basename:e}=b.useContext(qr),t=CG();return b.useCallback(async(s,r={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=OG(s,e);if(r.navigate===!1){let u=r.fetcherKey||iq();await n.fetch(u,t,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await n.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function aq(n,{relative:e}={}){let{basename:t}=b.useContext(qr),s=b.useContext(lr);gt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Ry(n||".",{relative:e})},o=Yo();if(n==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let u=a.toString();i.search=u?`?${u}`:""}}return(!n||n===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Do([t,i.pathname])),Pm(i)}function lq(n,e={}){let t=b.useContext(HL);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ZL("useViewTransitionState"),r=Ry(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Ho(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=Ho(t.nextLocation.pathname,s)||t.nextLocation.pathname;return uw(r.pathname,o)!=null||uw(r.pathname,i)!=null}[...GG];const cq="modulepreload",uq=function(n){return"/"+n},mk={},ky=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=uq(l),l in mk)return;mk[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":cq,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},dq=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ky(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class hA extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class hq extends hA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gk extends hA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yk extends hA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $S;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})($S||($S={}));var fq=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class pq{constructor(e,{headers:t={},customFetch:s,region:r=$S.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=dq(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return fq(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(v=>{throw new hq(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new gk(f);if(!f.ok)throw new yk(f);let g=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield f.json():g==="application/octet-stream"?w=yield f.blob():g==="text/event-stream"?w=f:g==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof yk||r instanceof gk?r.context:void 0}}})}}var os={},fA={},Ix={},Py={},Mx={},Nx={},mq=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Af=mq();const gq=Af.fetch,e2=Af.fetch.bind(Af),t2=Af.Headers,yq=Af.Request,vq=Af.Response,Gf=Object.freeze(Object.defineProperty({__proto__:null,Headers:t2,Request:yq,Response:vq,default:e2,fetch:gq},Symbol.toStringTag,{value:"Module"})),wq=K4(Gf);var Dx={};Object.defineProperty(Dx,"__esModule",{value:!0});let xq=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Dx.default=xq;var n2=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nx,"__esModule",{value:!0});const _q=n2(wq),Cq=n2(Dx);let Sq=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_q.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,f=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,g="OK")}catch{i.status===404&&v===""?(m=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new Cq.default(c)}return{error:c,data:u,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};Nx.default=Sq;var bq=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mx,"__esModule",{value:!0});const Eq=bq(Nx);let Tq=class extends Eq.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mx.default=Tq;var Aq=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Py,"__esModule",{value:!0});const Rq=Aq(Mx);let kq=class extends Rq.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Py.default=kq;var Pq=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ix,"__esModule",{value:!0});const hp=Pq(Py);let Iq=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new hp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new hp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new hp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new hp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new hp.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ix.default=Iq;var Lx={},Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.version=void 0;Fx.version="0.0.0-automated";Object.defineProperty(Lx,"__esModule",{value:!0});Lx.DEFAULT_HEADERS=void 0;const Mq=Fx;Lx.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Mq.version}`};var s2=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fA,"__esModule",{value:!0});const Nq=s2(Ix),Dq=s2(Py),Lq=Lx;let Fq=class r2{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Lq.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Nq.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{a.searchParams.append(u,f)})):(o="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Dq.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};fA.default=Fq;var qf=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(os,"__esModule",{value:!0});os.PostgrestError=os.PostgrestBuilder=os.PostgrestTransformBuilder=os.PostgrestFilterBuilder=os.PostgrestQueryBuilder=os.PostgrestClient=void 0;const i2=qf(fA);os.PostgrestClient=i2.default;const o2=qf(Ix);os.PostgrestQueryBuilder=o2.default;const a2=qf(Py);os.PostgrestFilterBuilder=a2.default;const l2=qf(Mx);os.PostgrestTransformBuilder=l2.default;const c2=qf(Nx);os.PostgrestBuilder=c2.default;const u2=qf(Dx);os.PostgrestError=u2.default;var Oq=os.default={PostgrestClient:i2.default,PostgrestQueryBuilder:o2.default,PostgrestFilterBuilder:a2.default,PostgrestTransformBuilder:l2.default,PostgrestBuilder:c2.default,PostgrestError:u2.default};const{PostgrestClient:$q,PostgrestQueryBuilder:tle,PostgrestFilterBuilder:nle,PostgrestTransformBuilder:sle,PostgrestBuilder:rle,PostgrestError:ile}=Oq;function Uq(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Bq=Uq(),Vq="2.11.15",jq=`realtime-js/${Vq}`,zq="1.0.0",d2=1e4,Hq=1e3;var im;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(im||(im={}));var _n;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(_n||(_n={}));var Dr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Dr||(Dr={}));var US;(function(n){n.websocket="websocket"})(US||(US={}));var Xl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Xl||(Xl={}));class Gq{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const l=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class h2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(nt||(nt={}));const vk=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=qq(o,n,e,r),i),{})},qq=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?f2(i,o):BS(o)},f2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Jq(e,t)}switch(n){case nt.bool:return Wq(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return Kq(e);case nt.json:case nt.jsonb:return Yq(e);case nt.timestamp:return Xq(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return BS(e);default:return BS(e)}},BS=n=>n,Wq=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Kq=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Yq=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Jq=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>f2(e,a))}return n},Xq=n=>typeof n=="string"?n.replace(" ","T"):n,p2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class X_{constructor(e,t,s={},r=d2){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(wk||(wk={}));class om{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=om.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=om.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=om.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const m=u.map(_=>_.presence_ref),g=f.map(_=>_.presence_ref),w=u.filter(_=>g.indexOf(_.presence_ref)<0),v=f.filter(_=>m.indexOf(_.presence_ref)<0);w.length>0&&(a[c]=w),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...m)}s(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xk||(xk={}));var _k;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(_k||(_k={}));var Gi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Gi||(Gi={}));class pA{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=_n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new X_(this,Dr.join,this.params,this.timeout),this.rejoinTimer=new h2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_n.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dr.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new om(this),this.broadcastEndpointURL=p2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==_n.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Gi.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Gi.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(Gi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,w=[];for(let v=0;v<g;v++){const _=m[v],{filter:{event:x,schema:S,table:C,filter:T}}=_,R=u&&u[v];if(R&&R.event===x&&R.schema===S&&R.table===C&&R.filter===T)w.push(Object.assign(Object.assign({},_),{id:R.id}));else{this.unsubscribe(),this.state=_n.errored,e==null||e(Gi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Gi.SUBSCRIBED);return}}).receive("error",u=>{this.state=_n.errored,e==null||e(Gi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_n.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new X_(this,Dr.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new X_(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Dr;if(s&&[a,l,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var w,v,_;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(v=g.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var w,v,_,x,S,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const T=g.id,R=(w=g.filter)===null||w===void 0?void 0:w.event;return T&&((v=t.ids)===null||v===void 0?void 0:v.includes(T))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const T=(S=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:v,table:_,commit_timestamp:x,type:S,errors:C}=w;m=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:x,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(w))}g.callback(m,s)})}_isClosed(){return this.state===_n.closed}_isJoined(){return this.state===_n.joined}_isJoining(){return this.state===_n.joining}_isLeaving(){return this.state===_n.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&pA.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dr.close,{},e)}_onError(e){this._on(Dr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_n.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=vk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=vk(e.columns,e.old_record)),t}}const Ck=()=>{},Qq=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zq{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=d2,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ck,this.ref=0,this.logger=Ck,this.conn=null,this.sendBuffer=[],this.serializer=new Gq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ky(async()=>{const{default:l}=await Promise.resolve().then(()=>Gf);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${US.websocket}`,this.httpEndpoint=p2(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new h2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Bq),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zq}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case im.connecting:return Xl.Connecting;case im.open:return Xl.Open;case im.closing:return Xl.Closing;default:return Xl.Closed}}isConnected(){return this.connectionState()===Xl.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new pA(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:jq};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Dr.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Hq,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:i,ref:o}=t;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Qq],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class mA extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function en(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class eW extends mA{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class VS extends mA{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tW=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const m2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ky(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},nW=()=>tW(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ky(()=>Promise.resolve().then(()=>Gf),void 0)).Response:Response}),jS=n=>{if(Array.isArray(n))return n.map(t=>jS(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=jS(s)}),e};var Ku=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const Q_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sW=(n,e,t)=>Ku(void 0,void 0,void 0,function*(){const s=yield nW();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new eW(Q_(r),n.status||500))}).catch(r=>{e(new VS(Q_(r),r))}):e(new VS(Q_(n),n))}),rW=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),t))};function Iy(n,e,t,s,r,i){return Ku(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,rW(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>sW(l,a,s))})})}function dw(n,e,t,s){return Ku(this,void 0,void 0,function*(){return Iy(n,"GET",e,t,s)})}function ca(n,e,t,s,r){return Ku(this,void 0,void 0,function*(){return Iy(n,"POST",e,s,r,t)})}function iW(n,e,t,s,r){return Ku(this,void 0,void 0,function*(){return Iy(n,"PUT",e,s,r,t)})}function oW(n,e,t,s){return Ku(this,void 0,void 0,function*(){return Iy(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function g2(n,e,t,s,r){return Ku(this,void 0,void 0,function*(){return Iy(n,"DELETE",e,s,r,t)})}var Yn=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const aW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lW{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=m2(r)}uploadOrUpdate(e,t,s,r){return Yn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Sk),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(en(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Yn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Sk.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(en(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Yn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield ca(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new mA("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}update(e,t,s){return Yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Yn(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Yn(this,void 0,void 0,function*(){try{return{data:{path:(yield ca(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Yn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ca(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Yn(this,void 0,void 0,function*(){try{const r=yield ca(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}})}download(e,t){return Yn(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dw(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(en(a))return{data:null,error:a};throw a}})}info(e){return Yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield dw(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:jS(s),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}exists(e){return Yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield oW(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(en(s)&&s instanceof VS){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${c}`)}}}remove(e){return Yn(this,void 0,void 0,function*(){try{return{data:yield g2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}list(e,t,s){return Yn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},aW),t),{prefix:e||""});return{data:yield ca(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cW="2.7.1",uW={"X-Client-Info":`storage-js/${cW}`};var od=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class dW{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},uW),t),this.fetch=m2(s)}listBuckets(){return od(this,void 0,void 0,function*(){try{return{data:yield dw(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}getBucket(e){return od(this,void 0,void 0,function*(){try{return{data:yield dw(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return od(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return od(this,void 0,void 0,function*(){try{return{data:yield iW(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}emptyBucket(e){return od(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}deleteBucket(e){return od(this,void 0,void 0,function*(){try{return{data:yield g2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}}class hW extends dW{constructor(e,t={},s){super(e,t,s)}from(e){return new lW(this.url,this.headers,e,this.fetch)}}const fW="2.50.3";let Sp="";typeof Deno<"u"?Sp="deno":typeof document<"u"?Sp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sp="react-native":Sp="node";const pW={"X-Client-Info":`supabase-js-${Sp}/${fW}`},mW={headers:pW},gW={schema:"public"},yW={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vW={};var wW=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const xW=n=>{let e;return n?e=n:typeof fetch>"u"?e=e2:e=fetch,(...t)=>e(...t)},_W=()=>typeof Headers>"u"?t2:Headers,CW=(n,e,t)=>{const s=xW(t),r=_W();return(i,o)=>wW(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};var SW=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};function bW(n){return n.endsWith("/")?n:n+"/"}function EW(n,e){var t,s;const{db:r,auth:i,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:f}=e,m={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>SW(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const y2="2.70.0",gd=30*1e3,zS=3,Z_=zS*gd,TW="http://localhost:9999",AW="supabase.auth.token",RW={"X-Client-Info":`gotrue-js/${y2}`},HS="X-Supabase-Api-Version",v2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PW=6e5;class gA extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Se(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class IW extends gA{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function MW(n){return Se(n)&&n.name==="AuthApiError"}class w2 extends gA{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fl extends gA{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class ra extends Fl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NW(n){return Se(n)&&n.name==="AuthSessionMissingError"}class mv extends Fl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gv extends Fl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yv extends Fl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DW(n){return Se(n)&&n.name==="AuthImplicitGrantRedirectError"}class bk extends Fl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class GS extends Fl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function eC(n){return Se(n)&&n.name==="AuthRetryableFetchError"}class Ek extends Fl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class am extends Fl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tk=` 	
\r=`.split(""),LW=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Tk.length;e+=1)n[Tk[e].charCodeAt(0)]=-2;for(let e=0;e<hw.length;e+=1)n[hw[e].charCodeAt(0)]=e;return n})();function Ak(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(hw[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(hw[s]),e.queuedBits-=6}}function x2(n,e,t){const s=LW[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Rk(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{$W(o,s,t)};for(let o=0;o<n.length;o+=1)x2(n.charCodeAt(o),r,i);return e.join("")}function FW(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function OW(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}FW(s,e)}}function $W(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function UW(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)x2(n.charCodeAt(r),t,s);return new Uint8Array(e)}function BW(n){const e=[];return OW(n,t=>e.push(t)),new Uint8Array(e)}function VW(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>Ak(r,t,s)),Ak(null,t,s),e.join("")}function jW(n){return Math.round(Date.now()/1e3)+n}function zW(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const mr=()=>typeof window<"u"&&typeof document<"u",zl={tested:!1,writable:!1},lm=()=>{if(!mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zl.tested)return zl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),zl.tested=!0,zl.writable=!0}catch{zl.tested=!0,zl.writable=!1}return zl.writable};function HW(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const _2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ky(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},GW=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",C2=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},vv=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},wv=async(n,e)=>{await n.removeItem(e)};class Ox{constructor(){this.promise=new Ox.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ox.promiseConstructor=Promise;function tC(n){const e=n.split(".");if(e.length!==3)throw new am("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!kW.test(e[s]))throw new am("JWT not in base64url format");return{header:JSON.parse(Rk(e[0])),payload:JSON.parse(Rk(e[1])),signature:UW(e[2]),raw:{header:e[0],payload:e[1]}}}async function qW(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function WW(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function KW(n){return("0"+n.toString(16)).substr(-2)}function YW(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,KW).join("")}async function JW(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function XW(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await JW(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ad(n,e,t=!1){const s=YW();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await C2(n,`${e}-code-verifier`,r);const i=await XW(s);return[i,s===i?"plain":"s256"]}const QW=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZW(n){const e=n.headers.get(HS);if(!e||!e.match(QW))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function e8(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function t8(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ld(n){if(!n8.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var s8=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Wl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),r8=[502,503,504];async function kk(n){var e;if(!GW(n))throw new GS(Wl(n),0);if(r8.includes(n.status))throw new GS(Wl(n),n.status);let t;try{t=await n.json()}catch(i){throw new w2(Wl(i),i)}let s;const r=ZW(n);if(r&&r.getTime()>=v2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Ek(Wl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ra}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ek(Wl(t),n.status,t.weak_password.reasons);throw new IW(Wl(t),n.status||500,s)}const i8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function De(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[HS]||(i[HS]=v2["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await o8(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function o8(n,e,t,s,r,i){const o=i8(e,s,r,i);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new GS(Wl(l),0)}if(a.ok||await kk(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await kk(l)}}function Ui(n){var e;let t=null;u8(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=jW(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Pk(n){const e=Ui(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function pa(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function a8(n){return{data:n,error:null}}function l8(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=s8(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function c8(n){return n}function u8(n){return n.access_token&&n.refresh_token&&n.expires_in}const nC=["global","local","others"];var d8=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class h8{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=_2(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=nC[0]){if(nC.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nC.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:pa})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=d8(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:l8,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pa})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:c8});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Se(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ld(e);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pa})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ld(e);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:pa})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ld(e);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:pa})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ld(e.userId);try{const{data:t,error:s}=await De(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ld(e.userId),ld(e.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}}const f8={getItem:n=>lm()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{lm()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{lm()&&globalThis.localStorage.removeItem(n)}};function Ik(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function p8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cd={debug:!!(globalThis&&lm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class m8 extends S2{}async function g8(n,e,t){cd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),cd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){cd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{cd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw cd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new m8(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(cd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}p8();const y8={url:TW,storageKey:AW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RW,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mk(n,e,t){return await t()}class Mm{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mm.nextInstanceID,Mm.nextInstanceID+=1,this.instanceID>0&&mr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},y8),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new h8({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=_2(r.fetch),this.lock=r.lock||Mk,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:mr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=g8:this.lock=Mk,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:lm()?this.storage=f8:(this.memoryStorage={},this.storage=Ik(this.memoryStorage)):(this.memoryStorage={},this.storage=Ik(this.memoryStorage)),mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${y2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=HW(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),mr()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),DW(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Se(t)?{error:t}:{error:new w2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ui}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Se(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await ad(this.storage,this.storageKey)),i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:w},xform:Ui})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ui})}else throw new gv("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pk})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Pk})}else throw new gv("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new mv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,i,o,a,l,c,u,f,m,g;let w,v;if("message"in e)w=e.message,v=e.signature;else{const{chain:_,wallet:x,statement:S,options:C}=e;let T;if(mr())if(typeof x=="object")T=x;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=x}const R=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),S?{statement:S}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${R.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(r=(s=C==null?void 0:C.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((f=(u=C==null?void 0:C.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...C.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{const{data:_,error:x}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:VW(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ui});if(x)throw x;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new mv}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x})}catch(_){if(Se(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await vv(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:i,error:o}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ui});if(await wv(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new mv}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Se(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ui}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new mv}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ad(this.storage,this.storageKey));const{error:f}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new gv("You must provide either an email or phone number.")}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ui});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(Se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ad(this.storage,this.storageKey)),await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:a8})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ra;const{error:r}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await De(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await De(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new gv("You must provide either an email or phone number and a type")}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await vv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Z_:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pa}):await this._useSession(async t=>{var s,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ra}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:pa})})}catch(t){if(Se(t))return NW(t)&&(await this._removeSession(),await wv(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new ra;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ad(this.storage,this.storageKey));const{data:c,error:u}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:pa});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ra;const t=Date.now()/1e3;let s=t,r=!0,i=null;const{payload:o}=tC(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Se(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ra;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!mr())throw new yv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yv("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bk("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new yv("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let m=u+f;l&&(m=parseInt(l));const g=m-u;g*1e3<=gd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const w=m-f;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,u);const{data:v,error:_}=await this._getUser(i);if(_)throw _;const x={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(Se(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await vv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(MW(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await wv(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=zW(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await ad(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,l,c,u;const{data:f,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return mr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Se(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await WW(async r=>(r>0&&await qW(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ui})),(r,i)=>{const o=200*Math.pow(2,r);return i&&eC(i)&&Date.now()+o-s<gd})}catch(s){if(this._debug(t,"error",s),Se(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),mr()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await vv(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Z_;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${Z_}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),eC(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ox;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ra;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Se(i)){const o={session:null,error:i};return eC(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await C2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await wv(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&mr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/gd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${gd}ms, refresh threshold is ${zS} ticks`),r<=zS&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ad(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await De(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await De(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=tC(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+PW>Date.now()))return s;const{data:r,error:i}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||r.keys.length===0)throw new am("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(o=>o.kid===e),!s)throw new am("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};s=g.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=tC(s);if(e8(i.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:i,header:r,signature:o},error:null}}const c=t8(r.alg),u=await this.fetchJwk(r.kid,t),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,BW(`${a}.${l}`)))throw new am("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}}Mm.nextInstanceID=0;const v8=Mm;class w8 extends v8{constructor(e){super(e)}}var x8=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class _8{constructor(e,t,s){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=bW(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:gW,realtime:vW,auth:Object.assign(Object.assign({},yW),{storageKey:c}),global:mW},f=EW(s??{},u);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=CW(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new $q(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new pq(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hW(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return x8(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,lock:a,debug:l},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new w8({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Zq(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const C8=(n,e,t)=>new _8(n,e,t),S8="https://rlmvnxhichzgxagpkqgc.supabase.co",b8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsbXZueGhpY2h6Z3hhZ3BrcWdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4ODYxNTUsImV4cCI6MjA2NjQ2MjE1NX0.yxFWrAWF_-0Fgr9EYi9HqWMK9tn4pb-91tY-J0n4iL4",un=C8(S8,b8);class ud{static async signUp(e){try{const{data:t,error:s}=await un.auth.signUp({email:e.email,password:e.password});return s?{user:null,error:s.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign up failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signIn(e){try{const{data:t,error:s}=await un.auth.signInWithPassword({email:e.email,password:e.password});return s?{user:null,error:s.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign in failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signInWithGoogle(){try{const e=window.location.origin+"/sessions",{data:t,error:s}=await un.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});return s?{user:null,error:s.message}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signOut(){try{const{error:e}=await un.auth.signOut();return{error:(e==null?void 0:e.message)||null}}catch{return{error:"An unexpected error occurred"}}}static async getCurrentUser(){try{const{data:{user:e},error:t}=await un.auth.getUser();return t?{user:null,error:t.message}:e?{user:{id:e.id,email:e.email,created_at:e.created_at},error:null}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static onAuthStateChange(e){return un.auth.onAuthStateChange(async(t,s)=>{if(t==="SIGNED_IN"&&(s!=null&&s.user)){const r={id:s.user.id,email:s.user.email,created_at:s.user.created_at};e(r)}else t==="SIGNED_OUT"&&e(null)})}}class Qs{static setCurrentUser(e){this._currentUser=e}static async getCurrentUser(){if(this._currentUser)return this._currentUser;const{data:{user:e}}=await un.auth.getUser();return e}static async createSession(e){const t=await this.getCurrentUser();if(!t)return{session:null,error:"User not authenticated"};if(t.id==="guest"){const s={id:`guest-session-${this.guestSessionId++}`,user_id:"guest",title:e.title,description:e.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.guestSessions.unshift(s),{session:s,error:null}}try{const{data:s,error:r}=await un.from("sessions").insert({user_id:t.id,title:e.title,description:e.description}).select().single();return r?{session:null,error:r.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async getSessions(){const e=await this.getCurrentUser();if(!e)return{sessions:null,error:"User not authenticated"};if(e.id==="guest")return{sessions:this.guestSessions,error:null};try{const{data:t,error:s}=await un.from("sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return s?{sessions:null,error:s.message}:{sessions:t,error:null}}catch{return{sessions:null,error:"An unexpected error occurred"}}}static async getSession(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return{session:this.guestSessions.find(r=>r.id===e)||null,error:null};try{const{data:s,error:r}=await un.from("sessions").select("*").eq("id",e).single();return r?{session:null,error:r.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async updateSession(e,t){try{const{data:s,error:r}=await un.from("sessions").update(t).eq("id",e).select().single();return r?{session:null,error:r.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async deleteSession(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return this.guestSessions=this.guestSessions.filter(s=>s.id!==e),{error:null};try{const{error:s}=await un.from("sessions").delete().eq("id",e);return s?{error:s.message}:{error:null}}catch{return{error:"An unexpected error occurred"}}}static async addFile(e,t){const s=await this.getCurrentUser();if(s&&s.id==="guest"){this.guestFiles[e]||(this.guestFiles[e]=[]);const r={...t,id:`guest-file-${this.guestFiles[e].length+1}`,session_id:e,created_at:new Date().toISOString()};return this.guestFiles[e].push(r),{file:r,error:null}}try{const{data:r,error:i}=await un.from("files").insert({session_id:e,name:t.name,type:t.type,content:t.content}).select().single();return i?{file:null,error:i.message}:{file:r,error:null}}catch{return{file:null,error:"An unexpected error occurred"}}}static async getFiles(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return{files:this.guestFiles[e]||[],error:null};try{const{data:s,error:r}=await un.from("files").select("*").eq("session_id",e).order("created_at",{ascending:!0});return r?{files:null,error:r.message}:{files:s,error:null}}catch{return{files:null,error:"An unexpected error occurred"}}}static async saveStudyContent(e,t,s){const r=await this.getCurrentUser();if(r&&r.id==="guest")return this.guestStudyContent[e]||(this.guestStudyContent[e]={}),this.guestStudyContent[e][t]={session_id:e,type:t,content:s},{studyContent:this.guestStudyContent[e][t],error:null};try{const{data:i,error:o}=await un.from("study_content").upsert({session_id:e,type:t,content:s}).select().single();return o?{studyContent:null,error:o.message}:{studyContent:i,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async getStudyContent(e,t){var r;const s=await this.getCurrentUser();if(s&&s.id==="guest")return{studyContent:((r=this.guestStudyContent[e])==null?void 0:r[t])||null,error:null};try{const{data:i,error:o}=await un.from("study_content").select("*").eq("session_id",e).eq("type",t).single();return o?{studyContent:null,error:o.message}:{studyContent:i,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async addFlashcards(e,t){const s=await this.getCurrentUser();if(s&&s.id==="guest"){this.guestFlashcards[e]||(this.guestFlashcards[e]=[]);const o=t.map((a,l)=>({...a,id:`guest-flashcard-${this.guestFlashcards[e].length+l+1}`,session_id:e}));return this.guestFlashcards[e].push(...o),o}const{data:r,error:i}=await un.from("flashcards").insert(t.map(o=>({session_id:e,front:o.front,back:o.back,mastered:o.mastered}))).select();if(i)throw new Error(i.message);return r}}q(Qs,"guestSessions",[]),q(Qs,"guestSessionId",1),q(Qs,"guestFiles",{}),q(Qs,"guestStudyContent",{}),q(Qs,"guestFlashcards",{}),q(Qs,"_currentUser",null);const b2=b.createContext(void 0);function E8({children:n}){const[e,t]=b.useState(null),[s,r]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const{user:m,error:g}=await ud.getCurrentUser();g&&console.error("Auth error:",g),t(m||null)}catch(m){console.error("Error checking user:",m),t(null)}finally{r(!1)}})();const{data:{subscription:f}}=ud.onAuthStateChange(m=>{t(m),r(!1)});return()=>{f==null||f.unsubscribe()}},[]),b.useEffect(()=>{Qs.setCurrentUser(e)},[e]);const c={user:e,isLoading:s,isAuthenticated:!!e,signIn:async(u,f)=>{try{const{user:m,error:g}=await ud.signIn({email:u,password:f});return g?{success:!1,error:g}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signUp:async(u,f)=>{try{const{user:m,error:g}=await ud.signUp({email:u,password:f});return g?{success:!1,error:g}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signInWithGoogle:async()=>{try{const{user:u,error:f}=await ud.signInWithGoogle();return f?{success:!1,error:f}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signOut:async()=>{try{await ud.signOut(),t(null)}catch(u){console.error("Error signing out:",u)}}};return y.jsx(b2.Provider,{value:c,children:n})}function Ol(){const n=b.useContext(b2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function T8({redirectTo:n="/"}){const{isAuthenticated:e,isLoading:t}=Ol();return t?y.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e?y.jsx(AG,{}):y.jsx(TG,{to:n,replace:!0})}const A8=UT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),me=b.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?A3:"button";return y.jsx(o,{className:ye(A8({variant:e,size:t,className:n})),ref:i,...r})});me.displayName="Button";var sC="focusScope.autoFocusOnMount",rC="focusScope.autoFocusOnUnmount",Nk={bubbles:!1,cancelable:!0},R8="FocusScope",$x=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=n,[a,l]=b.useState(null),c=ds(r),u=ds(i),f=b.useRef(null),m=Ee(e,v=>l(v)),g=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let v=function(C){if(g.paused||!a)return;const T=C.target;a.contains(T)?f.current=T:ia(f.current,{select:!0})},_=function(C){if(g.paused||!a)return;const T=C.relatedTarget;T!==null&&(a.contains(T)||ia(f.current,{select:!0}))},x=function(C){if(document.activeElement===document.body)for(const R of C)R.removedNodes.length>0&&ia(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const S=new MutationObserver(x);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),S.disconnect()}}},[s,a,g.paused]),b.useEffect(()=>{if(a){Lk.add(g);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(sC,Nk);a.addEventListener(sC,c),a.dispatchEvent(x),x.defaultPrevented||(k8(D8(E2(a)),{select:!0}),document.activeElement===v&&ia(a))}return()=>{a.removeEventListener(sC,c),setTimeout(()=>{const x=new CustomEvent(rC,Nk);a.addEventListener(rC,u),a.dispatchEvent(x),x.defaultPrevented||ia(v??document.body,{select:!0}),a.removeEventListener(rC,u),Lk.remove(g)},0)}}},[a,c,u,g]);const w=b.useCallback(v=>{if(!t&&!s||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(_&&x){const S=v.currentTarget,[C,T]=P8(S);C&&T?!v.shiftKey&&x===T?(v.preventDefault(),t&&ia(C,{select:!0})):v.shiftKey&&x===C&&(v.preventDefault(),t&&ia(T,{select:!0})):x===S&&v.preventDefault()}},[t,s,g.paused]);return y.jsx(ce.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});$x.displayName=R8;function k8(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(ia(s,{select:e}),document.activeElement!==t)return}function P8(n){const e=E2(n),t=Dk(e,n),s=Dk(e.reverse(),n);return[t,s]}function E2(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Dk(n,e){for(const t of n)if(!I8(t,{upTo:e}))return t}function I8(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function M8(n){return n instanceof HTMLInputElement&&"select"in n}function ia(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&M8(n)&&e&&n.select()}}var Lk=N8();function N8(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Fk(n,e),n.unshift(e)},remove(e){var t;n=Fk(n,e),(t=n[0])==null||t.resume()}}}function Fk(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function D8(n){return n.filter(e=>e.tagName!=="A")}var iC=0;function yA(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Ok()),document.body.insertAdjacentElement("beforeend",n[1]??Ok()),iC++,()=>{iC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),iC--}},[])}function Ok(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var xi=function(){return xi=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xi.apply(this,arguments)};function T2(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function L8(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}var Xv="right-scroll-bar-position",Qv="width-before-scroll-bar",F8="with-scroll-bars-hidden",O8="--removed-body-scroll-bar-size";function oC(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function $8(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var U8=typeof window<"u"?b.useLayoutEffect:b.useEffect,$k=new WeakMap;function B8(n,e){var t=$8(null,function(s){return n.forEach(function(r){return oC(r,s)})});return U8(function(){var s=$k.get(t);if(s){var r=new Set(s),i=new Set(n),o=t.current;r.forEach(function(a){i.has(a)||oC(a,null)}),i.forEach(function(a){r.has(a)||oC(a,o)})}$k.set(t,n)},[n]),t}function V8(n){return n}function j8(n,e){e===void 0&&(e=V8);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,s);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){s=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function z8(n){n===void 0&&(n={});var e=j8(null);return e.options=xi({async:!0,ssr:!1},n),e}var A2=function(n){var e=n.sideCar,t=T2(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,xi({},t))};A2.isSideCarExport=!0;function H8(n,e){return n.useMedium(e),A2}var R2=z8(),aC=function(){},Ux=b.forwardRef(function(n,e){var t=b.useRef(null),s=b.useState({onScrollCapture:aC,onWheelCapture:aC,onTouchMoveCapture:aC}),r=s[0],i=s[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,m=n.sideCar,g=n.noRelative,w=n.noIsolation,v=n.inert,_=n.allowPinchZoom,x=n.as,S=x===void 0?"div":x,C=n.gapMode,T=T2(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,P=B8([t,e]),I=xi(xi({},T),r);return b.createElement(b.Fragment,null,u&&b.createElement(R,{sideCar:R2,removeScrollBar:c,shards:f,noRelative:g,noIsolation:w,inert:v,setCallbacks:i,allowPinchZoom:!!_,lockRef:t,gapMode:C}),o?b.cloneElement(b.Children.only(a),xi(xi({},I),{ref:P})):b.createElement(S,xi({},I,{className:l,ref:P}),a))});Ux.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ux.classNames={fullWidth:Qv,zeroRight:Xv};var G8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q8(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=G8();return e&&n.setAttribute("nonce",e),n}function W8(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function K8(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Y8=function(){var n=0,e=null;return{add:function(t){n==0&&(e=q8())&&(W8(e,t),K8(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},J8=function(){var n=Y8();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},k2=function(){var n=J8(),e=function(t){var s=t.styles,r=t.dynamic;return n(s,r),null};return e},X8={left:0,top:0,right:0,gap:0},lC=function(n){return parseInt(n||"",10)||0},Q8=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[lC(t),lC(s),lC(r)]},Z8=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return X8;var e=Q8(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},e9=k2(),Kd="data-scroll-locked",t9=function(n,e,t,s){var r=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(F8,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(Kd,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xv,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(Qv,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(Xv," .").concat(Xv,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Qv," .").concat(Qv,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Kd,`] {
    `).concat(O8,": ").concat(a,`px;
  }
`)},Uk=function(){var n=parseInt(document.body.getAttribute(Kd)||"0",10);return isFinite(n)?n:0},n9=function(){b.useEffect(function(){return document.body.setAttribute(Kd,(Uk()+1).toString()),function(){var n=Uk()-1;n<=0?document.body.removeAttribute(Kd):document.body.setAttribute(Kd,n.toString())}},[])},s9=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,r=s===void 0?"margin":s;n9();var i=b.useMemo(function(){return Z8(r)},[r]);return b.createElement(e9,{styles:t9(i,!e,r,t?"":"!important")})},qS=!1;if(typeof window<"u")try{var xv=Object.defineProperty({},"passive",{get:function(){return qS=!0,!0}});window.addEventListener("test",xv,xv),window.removeEventListener("test",xv,xv)}catch{qS=!1}var dd=qS?{passive:!1}:!1,r9=function(n){return n.tagName==="TEXTAREA"},P2=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!r9(n)&&t[e]==="visible")},i9=function(n){return P2(n,"overflowY")},o9=function(n){return P2(n,"overflowX")},Bk=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=I2(n,s);if(r){var i=M2(n,s),o=i[1],a=i[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},a9=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},l9=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},I2=function(n,e){return n==="v"?i9(e):o9(e)},M2=function(n,e){return n==="v"?a9(e):l9(e)},c9=function(n,e){return n==="h"&&e==="rtl"?-1:1},u9=function(n,e,t,s,r){var i=c9(n,window.getComputedStyle(e).direction),o=i*s,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,m=0;do{if(!a)break;var g=M2(n,a),w=g[0],v=g[1],_=g[2],x=v-_-i*w;(w||x)&&I2(n,a)&&(f+=x,m+=w);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},_v=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Vk=function(n){return[n.deltaX,n.deltaY]},jk=function(n){return n&&"current"in n?n.current:n},d9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},h9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},f9=0,hd=[];function p9(n){var e=b.useRef([]),t=b.useRef([0,0]),s=b.useRef(),r=b.useState(f9++)[0],i=b.useState(k2)[0],o=b.useRef(n);b.useEffect(function(){o.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var v=L8([n.lockRef.current],(n.shards||[]).map(jk),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var a=b.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=_v(v),S=t.current,C="deltaX"in v?v.deltaX:S[0]-x[0],T="deltaY"in v?v.deltaY:S[1]-x[1],R,P=v.target,I=Math.abs(C)>Math.abs(T)?"h":"v";if("touches"in v&&I==="h"&&P.type==="range")return!1;var M=Bk(I,P);if(!M)return!0;if(M?R=I:(R=I==="v"?"h":"v",M=Bk(I,P)),!M)return!1;if(!s.current&&"changedTouches"in v&&(C||T)&&(s.current=R),!R)return!0;var N=s.current||R;return u9(N,_,v,N==="h"?C:T)},[]),l=b.useCallback(function(v){var _=v;if(!(!hd.length||hd[hd.length-1]!==i)){var x="deltaY"in _?Vk(_):_v(_),S=e.current.filter(function(R){return R.name===_.type&&(R.target===_.target||_.target===R.shadowParent)&&d9(R.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var C=(o.current.shards||[]).map(jk).filter(Boolean).filter(function(R){return R.contains(_.target)}),T=C.length>0?a(_,C[0]):!o.current.noIsolation;T&&_.cancelable&&_.preventDefault()}}},[]),c=b.useCallback(function(v,_,x,S){var C={name:v,delta:_,target:x,should:S,shadowParent:m9(x)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(T){return T!==C})},1)},[]),u=b.useCallback(function(v){t.current=_v(v),s.current=void 0},[]),f=b.useCallback(function(v){c(v.type,Vk(v),v.target,a(v,n.lockRef.current))},[]),m=b.useCallback(function(v){c(v.type,_v(v),v.target,a(v,n.lockRef.current))},[]);b.useEffect(function(){return hd.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,dd),document.addEventListener("touchmove",l,dd),document.addEventListener("touchstart",u,dd),function(){hd=hd.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,dd),document.removeEventListener("touchmove",l,dd),document.removeEventListener("touchstart",u,dd)}},[]);var g=n.removeScrollBar,w=n.inert;return b.createElement(b.Fragment,null,w?b.createElement(i,{styles:h9(r)}):null,g?b.createElement(s9,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function m9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const g9=H8(R2,p9);var Bx=b.forwardRef(function(n,e){return b.createElement(Ux,xi({},n,{ref:e,sideCar:g9}))});Bx.classNames=Ux.classNames;var y9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},fd=new WeakMap,Cv=new WeakMap,Sv={},cC=0,N2=function(n){return n&&(n.host||N2(n.parentNode))},v9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=N2(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},w9=function(n,e,t,s){var r=v9(e,Array.isArray(n)?n:[n]);Sv[t]||(Sv[t]=new WeakMap);var i=Sv[t],o=[],a=new Set,l=new Set(r),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};r.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(s),w=g!==null&&g!=="false",v=(fd.get(m)||0)+1,_=(i.get(m)||0)+1;fd.set(m,v),i.set(m,_),o.push(m),v===1&&w&&Cv.set(m,!0),_===1&&m.setAttribute(t,"true"),w||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return u(e),a.clear(),cC++,function(){o.forEach(function(f){var m=fd.get(f)-1,g=i.get(f)-1;fd.set(f,m),i.set(f,g),m||(Cv.has(f)||f.removeAttribute(s),Cv.delete(f)),g||f.removeAttribute(t)}),cC--,cC||(fd=new WeakMap,fd=new WeakMap,Cv=new WeakMap,Sv={})}},vA=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),r=y9(n);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),w9(s,r,t,"aria-hidden")):function(){return null}},Vx="Dialog",[D2,ole]=Wn(Vx),[x9,Wr]=D2(Vx),L2=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=n,a=b.useRef(null),l=b.useRef(null),[c,u]=Ii({prop:s,defaultProp:r??!1,onChange:i,caller:Vx});return y.jsx(x9,{scope:e,triggerRef:a,contentRef:l,contentId:Ai(),titleId:Ai(),descriptionId:Ai(),open:c,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(f=>!f),[u]),modal:o,children:t})};L2.displayName=Vx;var F2="DialogTrigger",O2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Wr(F2,t),i=Ee(e,r.triggerRef);return y.jsx(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":_A(r.open),...s,ref:i,onClick:J(n.onClick,r.onOpenToggle)})});O2.displayName=F2;var wA="DialogPortal",[_9,$2]=D2(wA,{forceMount:void 0}),U2=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=n,i=Wr(wA,e);return y.jsx(_9,{scope:e,forceMount:t,children:b.Children.map(s,o=>y.jsx(Us,{present:t||i.open,children:y.jsx(by,{asChild:!0,container:r,children:o})}))})};U2.displayName=wA;var fw="DialogOverlay",B2=b.forwardRef((n,e)=>{const t=$2(fw,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Wr(fw,n.__scopeDialog);return i.modal?y.jsx(Us,{present:s||i.open,children:y.jsx(S9,{...r,ref:e})}):null});B2.displayName=fw;var C9=Pu("DialogOverlay.RemoveScroll"),S9=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Wr(fw,t);return y.jsx(Bx,{as:C9,allowPinchZoom:!0,shards:[r.contentRef],children:y.jsx(ce.div,{"data-state":_A(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Du="DialogContent",V2=b.forwardRef((n,e)=>{const t=$2(Du,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Wr(Du,n.__scopeDialog);return y.jsx(Us,{present:s||i.open,children:i.modal?y.jsx(b9,{...r,ref:e}):y.jsx(E9,{...r,ref:e})})});V2.displayName=Du;var b9=b.forwardRef((n,e)=>{const t=Wr(Du,n.__scopeDialog),s=b.useRef(null),r=Ee(e,t.contentRef,s);return b.useEffect(()=>{const i=s.current;if(i)return vA(i)},[]),y.jsx(j2,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:J(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:J(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:J(n.onFocusOutside,i=>i.preventDefault())})}),E9=b.forwardRef((n,e)=>{const t=Wr(Du,n.__scopeDialog),s=b.useRef(!1),r=b.useRef(!1);return y.jsx(j2,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(s.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),j2=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=n,a=Wr(Du,t),l=b.useRef(null),c=Ee(e,l);return yA(),y.jsxs(y.Fragment,{children:[y.jsx($x,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:y.jsx(Ff,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":_A(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(T9,{titleId:a.titleId}),y.jsx(R9,{contentRef:l,descriptionId:a.descriptionId})]})]})}),xA="DialogTitle",z2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Wr(xA,t);return y.jsx(ce.h2,{id:r.titleId,...s,ref:e})});z2.displayName=xA;var H2="DialogDescription",G2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Wr(H2,t);return y.jsx(ce.p,{id:r.descriptionId,...s,ref:e})});G2.displayName=H2;var q2="DialogClose",W2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Wr(q2,t);return y.jsx(ce.button,{type:"button",...s,ref:e,onClick:J(n.onClick,()=>r.onOpenChange(!1))})});W2.displayName=q2;function _A(n){return n?"open":"closed"}var K2="DialogTitleWarning",[ale,Y2]=E3(K2,{contentName:Du,titleName:xA,docsSlug:"dialog"}),T9=({titleId:n})=>{const e=Y2(K2),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},A9="DialogDescriptionWarning",R9=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Y2(A9).contentName}}.`;return b.useEffect(()=>{var i;const r=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},k9=L2,P9=O2,I9=U2,J2=B2,X2=V2,Q2=z2,Z2=G2,M9=W2;const jx=k9,zx=P9,N9=I9,eF=b.forwardRef(({className:n,...e},t)=>y.jsx(J2,{ref:t,className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));eF.displayName=J2.displayName;const My=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(N9,{children:[y.jsx(eF,{}),y.jsxs(X2,{ref:s,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),"aria-describedby":t["aria-describedby"],...t,children:[e,y.jsxs(M9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(Cx,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));My.displayName=X2.displayName;const Ny=({className:n,...e})=>y.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Ny.displayName="DialogHeader";const CA=({className:n,...e})=>y.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});CA.displayName="DialogFooter";const Dy=b.forwardRef(({className:n,...e},t)=>y.jsx(Q2,{ref:t,className:ye("text-lg font-semibold leading-none tracking-tight",n),...e}));Dy.displayName=Q2.displayName;const Hx=b.forwardRef(({className:n,...e},t)=>y.jsx(Z2,{ref:t,className:ye("text-sm text-muted-foreground",n),...e}));Hx.displayName=Z2.displayName;function D9({children:n}){const[e,t]=b.useState(!1),{signInWithGoogle:s,loading:r}=Ol(),{toast:i}=Ko(),o=async()=>{const a=await s();a.success?i({title:"Logging in with Google...",description:"You will be redirected shortly"}):i({title:"Google login failed",description:a.error||"Please try again",variant:"destructive"})};return y.jsxs(jx,{open:e,onOpenChange:t,children:[y.jsx(zx,{asChild:!0,children:n||y.jsx(me,{variant:"outline",children:"Log in"})}),y.jsxs(My,{className:"sm:max-w-[425px]",children:[y.jsxs(Ny,{children:[y.jsx(Dy,{className:"text-xl font-bold",children:"Log in to Qzzly"}),y.jsx(Hx,{children:"Log in with Google to access your account. Email/password login is not supported."})]}),y.jsx(me,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,disabled:r,children:"Continue with Google"})]})]})}function SA({children:n}){const[e,t]=b.useState(!1),{signInWithGoogle:s,loading:r}=Ol(),{toast:i}=Ko(),o=async()=>{const a=await s();a.success?i({title:"Signing up with Google...",description:"You will be redirected shortly"}):i({title:"Google sign-up failed",description:a.error||"Please try again",variant:"destructive"})};return y.jsxs(jx,{open:e,onOpenChange:t,children:[y.jsx(zx,{asChild:!0,children:n||y.jsx(me,{children:"Sign up"})}),y.jsxs(My,{className:"sm:max-w-[425px]",children:[y.jsxs(Ny,{children:[y.jsx(Dy,{className:"text-xl font-bold",children:"Create your account"}),y.jsx(Hx,{children:"Sign up with Google to start using Qzzly. Email/password sign up is not supported."})]}),y.jsx(me,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,disabled:r,children:"Continue with Google"})]})]})}var L9=b.createContext(void 0);function Wf(n){const e=b.useContext(L9);return n||e||"ltr"}var uC="rovingFocusGroup.onEntryFocus",F9={bubbles:!1,cancelable:!0},Ly="RovingFocusGroup",[WS,tF,O9]=Sy(Ly),[$9,Kf]=Wn(Ly,[O9]),[U9,B9]=$9(Ly),nF=b.forwardRef((n,e)=>y.jsx(WS.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(WS.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(V9,{...n,ref:e})})}));nF.displayName=Ly;var V9=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,m=b.useRef(null),g=Ee(e,m),w=Wf(i),[v,_]=Ii({prop:o,defaultProp:a??null,onChange:l,caller:Ly}),[x,S]=b.useState(!1),C=ds(c),T=tF(t),R=b.useRef(!1),[P,I]=b.useState(0);return b.useEffect(()=>{const M=m.current;if(M)return M.addEventListener(uC,C),()=>M.removeEventListener(uC,C)},[C]),y.jsx(U9,{scope:t,orientation:s,dir:w,loop:r,currentTabStopId:v,onItemFocus:b.useCallback(M=>_(M),[_]),onItemShiftTab:b.useCallback(()=>S(!0),[]),onFocusableItemAdd:b.useCallback(()=>I(M=>M+1),[]),onFocusableItemRemove:b.useCallback(()=>I(M=>M-1),[]),children:y.jsx(ce.div,{tabIndex:x||P===0?-1:0,"data-orientation":s,...f,ref:g,style:{outline:"none",...n.style},onMouseDown:J(n.onMouseDown,()=>{R.current=!0}),onFocus:J(n.onFocus,M=>{const N=!R.current;if(M.target===M.currentTarget&&N&&!x){const L=new CustomEvent(uC,F9);if(M.currentTarget.dispatchEvent(L),!L.defaultPrevented){const D=T().filter(O=>O.focusable),V=D.find(O=>O.active),G=D.find(O=>O.id===v),j=[V,G,...D].filter(Boolean).map(O=>O.ref.current);iF(j,u)}}R.current=!1}),onBlur:J(n.onBlur,()=>S(!1))})})}),sF="RovingFocusGroupItem",rF=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...a}=n,l=Ai(),c=i||l,u=B9(sF,t),f=u.currentTabStopId===c,m=tF(t),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:v}=u;return b.useEffect(()=>{if(s)return g(),()=>w()},[s,g,w]),y.jsx(WS.ItemSlot,{scope:t,id:c,focusable:s,active:r,children:y.jsx(ce.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:J(n.onMouseDown,_=>{s?u.onItemFocus(c):_.preventDefault()}),onFocus:J(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:J(n.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=H9(_,u.orientation,u.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let C=m().filter(T=>T.focusable).map(T=>T.ref.current);if(x==="last")C.reverse();else if(x==="prev"||x==="next"){x==="prev"&&C.reverse();const T=C.indexOf(_.currentTarget);C=u.loop?G9(C,T+1):C.slice(T+1)}setTimeout(()=>iF(C))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});rF.displayName=sF;var j9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z9(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function H9(n,e,t){const s=z9(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return j9[s]}function iF(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function G9(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var bA=nF,EA=rF,KS=["Enter"," "],q9=["ArrowDown","PageUp","Home"],oF=["ArrowUp","PageDown","End"],W9=[...q9,...oF],K9={ltr:[...KS,"ArrowRight"],rtl:[...KS,"ArrowLeft"]},Y9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fy="Menu",[Nm,J9,X9]=Sy(Fy),[Yu,aF]=Wn(Fy,[X9,Uf,Kf]),Gx=Uf(),lF=Kf(),[Q9,Ju]=Yu(Fy),[Z9,Oy]=Yu(Fy),cF=n=>{const{__scopeMenu:e,open:t=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=n,a=Gx(e),[l,c]=b.useState(null),u=b.useRef(!1),f=ds(i),m=Wf(r);return b.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),y.jsx(yL,{...a,children:y.jsx(Q9,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:y.jsx(Z9,{scope:e,onClose:b.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:o,children:s})})})};cF.displayName=Fy;var eK="MenuAnchor",TA=b.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,r=Gx(t);return y.jsx(YT,{...r,...s,ref:e})});TA.displayName=eK;var AA="MenuPortal",[tK,uF]=Yu(AA,{forceMount:void 0}),dF=n=>{const{__scopeMenu:e,forceMount:t,children:s,container:r}=n,i=Ju(AA,e);return y.jsx(tK,{scope:e,forceMount:t,children:y.jsx(Us,{present:t||i.open,children:y.jsx(by,{asChild:!0,container:r,children:s})})})};dF.displayName=AA;var nr="MenuContent",[nK,RA]=Yu(nr),hF=b.forwardRef((n,e)=>{const t=uF(nr,n.__scopeMenu),{forceMount:s=t.forceMount,...r}=n,i=Ju(nr,n.__scopeMenu),o=Oy(nr,n.__scopeMenu);return y.jsx(Nm.Provider,{scope:n.__scopeMenu,children:y.jsx(Us,{present:s||i.open,children:y.jsx(Nm.Slot,{scope:n.__scopeMenu,children:o.modal?y.jsx(sK,{...r,ref:e}):y.jsx(rK,{...r,ref:e})})})})}),sK=b.forwardRef((n,e)=>{const t=Ju(nr,n.__scopeMenu),s=b.useRef(null),r=Ee(e,s);return b.useEffect(()=>{const i=s.current;if(i)return vA(i)},[]),y.jsx(kA,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:J(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),rK=b.forwardRef((n,e)=>{const t=Ju(nr,n.__scopeMenu);return y.jsx(kA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),iK=Pu("MenuContent.ScrollLock"),kA=b.forwardRef((n,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...v}=n,_=Ju(nr,t),x=Oy(nr,t),S=Gx(t),C=lF(t),T=J9(t),[R,P]=b.useState(null),I=b.useRef(null),M=Ee(e,I,_.onContentChange),N=b.useRef(0),L=b.useRef(""),D=b.useRef(0),V=b.useRef(null),G=b.useRef("right"),B=b.useRef(0),j=w?Bx:b.Fragment,O=w?{as:iK,allowPinchZoom:!0}:void 0,U=F=>{var H,Te;const z=L.current+F,ee=T().filter(Ne=>!Ne.disabled),Y=document.activeElement,te=(H=ee.find(Ne=>Ne.ref.current===Y))==null?void 0:H.textValue,he=ee.map(Ne=>Ne.textValue),ke=yK(he,z,te),Pe=(Te=ee.find(Ne=>Ne.textValue===ke))==null?void 0:Te.ref.current;(function Ne(Ie){L.current=Ie,window.clearTimeout(N.current),Ie!==""&&(N.current=window.setTimeout(()=>Ne(""),1e3))})(z),Pe&&setTimeout(()=>Pe.focus())};b.useEffect(()=>()=>window.clearTimeout(N.current),[]),yA();const $=b.useCallback(F=>{var ee,Y;return G.current===((ee=V.current)==null?void 0:ee.side)&&wK(F,(Y=V.current)==null?void 0:Y.area)},[]);return y.jsx(nK,{scope:t,searchRef:L,onItemEnter:b.useCallback(F=>{$(F)&&F.preventDefault()},[$]),onItemLeave:b.useCallback(F=>{var z;$(F)||((z=I.current)==null||z.focus(),P(null))},[$]),onTriggerLeave:b.useCallback(F=>{$(F)&&F.preventDefault()},[$]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(F=>{V.current=F},[]),children:y.jsx(j,{...O,children:y.jsx($x,{asChild:!0,trapped:r,onMountAutoFocus:J(i,F=>{var z;F.preventDefault(),(z=I.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(Ff,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:y.jsx(bA,{asChild:!0,...C,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:R,onCurrentTabStopIdChange:P,onEntryFocus:J(l,F=>{x.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(JT,{role:"menu","aria-orientation":"vertical","data-state":RF(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...v,ref:M,style:{outline:"none",...v.style},onKeyDown:J(v.onKeyDown,F=>{const ee=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Y=F.ctrlKey||F.altKey||F.metaKey,te=F.key.length===1;ee&&(F.key==="Tab"&&F.preventDefault(),!Y&&te&&U(F.key));const he=I.current;if(F.target!==he||!W9.includes(F.key))return;F.preventDefault();const Pe=T().filter(H=>!H.disabled).map(H=>H.ref.current);oF.includes(F.key)&&Pe.reverse(),mK(Pe)}),onBlur:J(n.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(N.current),L.current="")}),onPointerMove:J(n.onPointerMove,Dm(F=>{const z=F.target,ee=B.current!==F.clientX;if(F.currentTarget.contains(z)&&ee){const Y=F.clientX>B.current?"right":"left";G.current=Y,B.current=F.clientX}}))})})})})})})});hF.displayName=nr;var oK="MenuGroup",PA=b.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return y.jsx(ce.div,{role:"group",...s,ref:e})});PA.displayName=oK;var aK="MenuLabel",fF=b.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return y.jsx(ce.div,{...s,ref:e})});fF.displayName=aK;var pw="MenuItem",zk="menu.itemSelect",qx=b.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:s,...r}=n,i=b.useRef(null),o=Oy(pw,n.__scopeMenu),a=RA(pw,n.__scopeMenu),l=Ee(e,i),c=b.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const m=new CustomEvent(zk,{bubbles:!0,cancelable:!0});f.addEventListener(zk,g=>s==null?void 0:s(g),{once:!0}),LT(f,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(pF,{...r,ref:l,disabled:t,onClick:J(n.onClick,u),onPointerDown:f=>{var m;(m=n.onPointerDown)==null||m.call(n,f),c.current=!0},onPointerUp:J(n.onPointerUp,f=>{var m;c.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:J(n.onKeyDown,f=>{const m=a.searchRef.current!=="";t||m&&f.key===" "||KS.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});qx.displayName=pw;var pF=b.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:r,...i}=n,o=RA(pw,t),a=lF(t),l=b.useRef(null),c=Ee(e,l),[u,f]=b.useState(!1),[m,g]=b.useState("");return b.useEffect(()=>{const w=l.current;w&&g((w.textContent??"").trim())},[i.children]),y.jsx(Nm.ItemSlot,{scope:t,disabled:s,textValue:r??m,children:y.jsx(EA,{asChild:!0,...a,focusable:!s,children:y.jsx(ce.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:c,onPointerMove:J(n.onPointerMove,Dm(w=>{s?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:J(n.onPointerLeave,Dm(w=>o.onItemLeave(w))),onFocus:J(n.onFocus,()=>f(!0)),onBlur:J(n.onBlur,()=>f(!1))})})})}),lK="MenuCheckboxItem",mF=b.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:s,...r}=n;return y.jsx(xF,{scope:n.__scopeMenu,checked:t,children:y.jsx(qx,{role:"menuitemcheckbox","aria-checked":mw(t)?"mixed":t,...r,ref:e,"data-state":MA(t),onSelect:J(r.onSelect,()=>s==null?void 0:s(mw(t)?!0:!t),{checkForDefaultPrevented:!1})})})});mF.displayName=lK;var gF="MenuRadioGroup",[cK,uK]=Yu(gF,{value:void 0,onValueChange:()=>{}}),yF=b.forwardRef((n,e)=>{const{value:t,onValueChange:s,...r}=n,i=ds(s);return y.jsx(cK,{scope:n.__scopeMenu,value:t,onValueChange:i,children:y.jsx(PA,{...r,ref:e})})});yF.displayName=gF;var vF="MenuRadioItem",wF=b.forwardRef((n,e)=>{const{value:t,...s}=n,r=uK(vF,n.__scopeMenu),i=t===r.value;return y.jsx(xF,{scope:n.__scopeMenu,checked:i,children:y.jsx(qx,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":MA(i),onSelect:J(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,t)},{checkForDefaultPrevented:!1})})})});wF.displayName=vF;var IA="MenuItemIndicator",[xF,dK]=Yu(IA,{checked:!1}),_F=b.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:s,...r}=n,i=dK(IA,t);return y.jsx(Us,{present:s||mw(i.checked)||i.checked===!0,children:y.jsx(ce.span,{...r,ref:e,"data-state":MA(i.checked)})})});_F.displayName=IA;var hK="MenuSeparator",CF=b.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return y.jsx(ce.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});CF.displayName=hK;var fK="MenuArrow",SF=b.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,r=Gx(t);return y.jsx(XT,{...r,...s,ref:e})});SF.displayName=fK;var pK="MenuSub",[lle,bF]=Yu(pK),bp="MenuSubTrigger",EF=b.forwardRef((n,e)=>{const t=Ju(bp,n.__scopeMenu),s=Oy(bp,n.__scopeMenu),r=bF(bp,n.__scopeMenu),i=RA(bp,n.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),y.jsx(TA,{asChild:!0,...c,children:y.jsx(pF,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":r.contentId,"data-state":RF(t.open),...n,ref:wx(e,r.onTriggerChange),onClick:f=>{var m;(m=n.onClick)==null||m.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:J(n.onPointerMove,Dm(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:J(n.onPointerLeave,Dm(f=>{var g,w;u();const m=(g=t.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(w=t.content)==null?void 0:w.dataset.side,_=v==="right",x=_?-5:5,S=m[_?"left":"right"],C=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:S,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:J(n.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";n.disabled||m&&f.key===" "||K9[s.dir].includes(f.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),f.preventDefault())})})})});EF.displayName=bp;var TF="MenuSubContent",AF=b.forwardRef((n,e)=>{const t=uF(nr,n.__scopeMenu),{forceMount:s=t.forceMount,...r}=n,i=Ju(nr,n.__scopeMenu),o=Oy(nr,n.__scopeMenu),a=bF(TF,n.__scopeMenu),l=b.useRef(null),c=Ee(e,l);return y.jsx(Nm.Provider,{scope:n.__scopeMenu,children:y.jsx(Us,{present:s||i.open,children:y.jsx(Nm.Slot,{scope:n.__scopeMenu,children:y.jsx(kA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:J(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:J(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:J(n.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),m=Y9[o.dir].includes(u.key);f&&m&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});AF.displayName=TF;function RF(n){return n?"open":"closed"}function mw(n){return n==="indeterminate"}function MA(n){return mw(n)?"indeterminate":n?"checked":"unchecked"}function mK(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function gK(n,e){return n.map((t,s)=>n[(e+s)%n.length])}function yK(n,e,t){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=gK(n,Math.max(i,0));r.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==t?l:void 0}function vK(n,e){const{x:t,y:s}=n;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>s!=m>s&&t<(f-c)*(s-u)/(m-u)+c&&(r=!r)}return r}function wK(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return vK(t,e)}function Dm(n){return e=>e.pointerType==="mouse"?n(e):void 0}var xK=cF,_K=TA,CK=dF,SK=hF,bK=PA,EK=fF,TK=qx,AK=mF,RK=yF,kK=wF,PK=_F,IK=CF,MK=SF,NK=EF,DK=AF,Wx="DropdownMenu",[LK,cle]=Wn(Wx,[aF]),Kn=aF(),[FK,kF]=LK(Wx),PF=n=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,l=Kn(e),c=b.useRef(null),[u,f]=Ii({prop:r,defaultProp:i??!1,onChange:o,caller:Wx});return y.jsx(FK,{scope:e,triggerId:Ai(),triggerRef:c,contentId:Ai(),open:u,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(m=>!m),[f]),modal:a,children:y.jsx(xK,{...l,open:u,onOpenChange:f,dir:s,modal:a,children:t})})};PF.displayName=Wx;var IF="DropdownMenuTrigger",MF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...r}=n,i=kF(IF,t),o=Kn(t);return y.jsx(_K,{asChild:!0,...o,children:y.jsx(ce.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:wx(e,i.triggerRef),onPointerDown:J(n.onPointerDown,a=>{!s&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:J(n.onKeyDown,a=>{s||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});MF.displayName=IF;var OK="DropdownMenuPortal",NF=n=>{const{__scopeDropdownMenu:e,...t}=n,s=Kn(e);return y.jsx(CK,{...s,...t})};NF.displayName=OK;var DF="DropdownMenuContent",LF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=kF(DF,t),i=Kn(t),o=b.useRef(!1);return y.jsx(SK,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:e,onCloseAutoFocus:J(n.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:J(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LF.displayName=DF;var $K="DropdownMenuGroup",UK=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(bK,{...r,...s,ref:e})});UK.displayName=$K;var BK="DropdownMenuLabel",FF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(EK,{...r,...s,ref:e})});FF.displayName=BK;var VK="DropdownMenuItem",OF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(TK,{...r,...s,ref:e})});OF.displayName=VK;var jK="DropdownMenuCheckboxItem",$F=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(AK,{...r,...s,ref:e})});$F.displayName=jK;var zK="DropdownMenuRadioGroup",HK=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(RK,{...r,...s,ref:e})});HK.displayName=zK;var GK="DropdownMenuRadioItem",UF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(kK,{...r,...s,ref:e})});UF.displayName=GK;var qK="DropdownMenuItemIndicator",BF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(PK,{...r,...s,ref:e})});BF.displayName=qK;var WK="DropdownMenuSeparator",VF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(IK,{...r,...s,ref:e})});VF.displayName=WK;var KK="DropdownMenuArrow",YK=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(MK,{...r,...s,ref:e})});YK.displayName=KK;var JK="DropdownMenuSubTrigger",jF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(NK,{...r,...s,ref:e})});jF.displayName=JK;var XK="DropdownMenuSubContent",zF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,r=Kn(t);return y.jsx(DK,{...r,...s,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zF.displayName=XK;var QK=PF,ZK=MF,e7=NF,HF=LF,GF=FF,qF=OF,WF=$F,KF=UF,YF=BF,JF=VF,XF=jF,QF=zF;const t7=QK,n7=ZK,s7=b.forwardRef(({className:n,inset:e,children:t,...s},r)=>y.jsxs(XF,{ref:r,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...s,children:[t,y.jsx(b5,{className:"ml-auto h-4 w-4"})]}));s7.displayName=XF.displayName;const r7=b.forwardRef(({className:n,...e},t)=>y.jsx(QF,{ref:t,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));r7.displayName=QF.displayName;const ZF=b.forwardRef(({className:n,sideOffset:e=4,...t},s)=>y.jsx(e7,{children:y.jsx(HF,{ref:s,sideOffset:e,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));ZF.displayName=HF.displayName;const YS=b.forwardRef(({className:n,inset:e,...t},s)=>y.jsx(qF,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));YS.displayName=qF.displayName;const i7=b.forwardRef(({className:n,children:e,checked:t,...s},r)=>y.jsxs(WF,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...s,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(YF,{children:y.jsx(bl,{className:"h-4 w-4"})})}),e]}));i7.displayName=WF.displayName;const o7=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(KF,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(YF,{children:y.jsx(A5,{className:"h-2 w-2 fill-current"})})}),e]}));o7.displayName=KF.displayName;const eO=b.forwardRef(({className:n,inset:e,...t},s)=>y.jsx(GF,{ref:s,className:ye("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));eO.displayName=GF.displayName;const JS=b.forwardRef(({className:n,...e},t)=>y.jsx(JF,{ref:t,className:ye("-mx-1 my-1 h-px bg-muted",n),...e}));JS.displayName=JF.displayName;function a7(){const{user:n,signOut:e}=Ol(),t=Hf(),s=async()=>{await e(),t("/")};return y.jsxs(t7,{children:[y.jsx(n7,{asChild:!0,children:y.jsxs(me,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:[y.jsx("span",{className:"hidden md:block mr-2",children:n==null?void 0:n.email.split("@")[0]}),y.jsx("div",{className:"size-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-600",children:y.jsx(F5,{className:"size-4"})})]})}),y.jsxs(ZF,{align:"end",className:"w-56",children:[y.jsxs(eO,{children:[y.jsx("div",{className:"font-medium",children:(n==null?void 0:n.email.split("@")[0])||"My Account"}),y.jsx("div",{className:"text-xs text-muted-foreground truncate",children:n==null?void 0:n.email})]}),y.jsx(JS,{}),y.jsx(YS,{asChild:!0,children:y.jsx(Im,{to:"/sessions",className:"cursor-pointer",children:"My Study Sessions"})}),y.jsx(JS,{}),y.jsxs(YS,{className:"text-red-600 focus:text-red-600 cursor-pointer",onClick:s,children:[y.jsx(M5,{className:"mr-2 size-4"}),"Logout"]})]})]})}function Xu(){const n=b.useRef(null);return b.useEffect(()=>{const e=n.current;if(!e)return;e.classList.add("opacity-0");const t=new IntersectionObserver(([s])=>{s.isIntersecting&&(e.classList.remove("opacity-0"),e.classList.add("animate-fade-in"),t.unobserve(e))},{threshold:.1});return t.observe(e),()=>t.disconnect()},[]),n}const Yd=()=>{const{user:n}=Ol(),e=Xu();return y.jsx("header",{ref:e,className:"bg-white py-5 border-b border-gray-100 sticky top-0 z-50 shadow-sm backdrop-blur-lg bg-white/90",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center",children:y.jsxs(Im,{to:"/",className:"text-2xl font-bold flex items-center",children:[y.jsx("div",{className:"w-9 h-9 mr-2 gradient-bg rounded-md flex items-center justify-center",children:y.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("span",{className:"font-extrabold tracking-tighter",children:"Qzzly"})]})}),y.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[y.jsx("a",{href:"/#features",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Features"}),y.jsx("a",{href:"/#how-it-works",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"How it Works"}),y.jsx(Im,{to:"/sessions",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"My Sessions"})]}),y.jsx("div",{className:"flex items-center space-x-4",children:n?y.jsx(a7,{}):y.jsxs(y.Fragment,{children:[y.jsx(D9,{children:y.jsx(me,{variant:"outline",className:"hidden md:flex border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:"Log in"})}),y.jsx(SA,{children:y.jsx(me,{className:"gradient-bg font-medium shadow-md shadow-purple-200",children:"Sign up"})})]})})]})})})},l7=()=>{const[n,e]=b.useState(!1),[t,s]=b.useState(!1),r=b.useRef(null),i=Hf(),{toast:o}=Ko(),{user:a}=Ol(),l=async m=>{if(!a){o({title:"Authentication required",description:"Please sign up or log in to upload files"});return}if(!(!m||m.length===0)){s(!0);try{const g=m[0];if(g.type!=="application/pdf"){o({title:"Unsupported file format",description:"Please upload PDF files only",variant:"destructive"});return}const w=g.name.replace(/\.pdf$/,""),v=await Qs.createSession({title:w});if(v.error||!v.session){o({title:"Session creation failed",description:v.error||"Unknown error",variant:"destructive"});return}o({title:"Files uploaded successfully",description:`Created new study session: ${w}`}),i(`/session/${v.session.id}`)}catch{o({title:"Upload failed",description:"There was an error uploading your files",variant:"destructive"})}finally{s(!1)}}},c=m=>{m.preventDefault(),e(!1),m.dataTransfer.files&&m.dataTransfer.files.length>0&&l(m.dataTransfer.files)},u=()=>{var m;(m=r.current)==null||m.click()},f=()=>{a?i("/sessions"):o({title:"Authentication required",description:"Please sign up to get started"})};return y.jsx("section",{className:"py-20 md:py-28 container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[y.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0",children:[y.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-8 leading-tight animate-fade-in",children:["Transform Your ",y.jsx("span",{className:"gradient-text",children:"Study Material"})," Into Interactive Quizzes"]}),y.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed animate-fade-in max-w-lg",style:{animationDelay:"0.2s"},children:"Upload your PDFs and explore our demo features to see how AI-powered study tools can accelerate your learning journey."}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 animate-fade-in",style:{animationDelay:"0.4s"},children:[a?y.jsx(me,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",onClick:f,children:"Go to Study Sessions"}):y.jsx(SA,{children:y.jsx(me,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",children:"Get Started Free"})}),y.jsxs(me,{variant:"outline",className:"bg-white border border-gray-300 px-8 py-7 rounded-lg text-lg font-medium hover:bg-gray-50 transition-colors",children:[y.jsx(GD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]}),y.jsx("div",{className:"md:w-1/2 animate-fade-in animate-float",style:{animationDelay:"0.6s"},children:y.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Try it now"}),y.jsxs("div",{id:"upload-container",className:`upload-area rounded-xl p-10 text-center cursor-pointer mb-6 border-2 border-dashed border-gray-300 ${n?"border-purple-500 bg-purple-50":""}`,onDragOver:m=>{m.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:c,onClick:u,children:[t?y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-purple-500 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Creating study session..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-500 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),y.jsx("p",{className:"text-gray-600 mb-3 text-lg",children:"Drag & drop your PDF files here"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"or"}),y.jsx(me,{variant:"outline",className:"px-6 py-3 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50 font-medium",onClick:u,children:"Browse files"})]}),y.jsx("input",{type:"file",ref:r,className:"hidden",accept:".pdf",multiple:!0,onChange:m=>{m.target.files&&m.target.files.length>0&&l(m.target.files)}})]}),y.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Supported formats: PDF (Max size: 25MB per file)"})]})})]})})},c7=()=>{const n=Xu();return y.jsx("section",{ref:n,id:"features",className:"py-20 bg-white",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Features"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Supercharge Your Learning"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Our AI analyzes your study materials and creates personalized learning resources to help you master any subject."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(k5,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Smart Quizzes"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI-generated quizzes that adapt to your knowledge gaps and learning style for maximum retention."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(sw,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Interactive Flashcards"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Turn complex concepts into easy-to-review flashcards with spaced repetition for better memorization."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(T5,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Mock Tests"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Simulate real exam conditions with comprehensive mock tests that prepare you for the real thing."})]})]})]})})},u7=()=>{const n=Xu();return y.jsx("section",{ref:n,id:"how-it-works",className:"py-24 bg-gray-50",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-20",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Process"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"How Qzzly Works"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Three simple steps to transform your study materials into effective learning tools."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl mx-auto relative",children:[y.jsx("div",{className:"hidden md:block absolute top-24 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-600"}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.2s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"1"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Upload Your PDFs"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Simply drag and drop your study materials, lecture notes, or textbook PDFs."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.4s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"2"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI Analysis"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Our advanced AI reads and understands your content, identifying key concepts and knowledge points."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.6s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"3"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Study Smarter"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Access your personalized quizzes, flashcards, and mock tests anytime, anywhere."})]})]})]})})},d7=()=>{const{user:n}=Ol(),e=Xu();return y.jsx("section",{ref:e,className:"py-24 bg-white",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-10 md:p-16 shadow-2xl overflow-hidden relative",children:[y.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -mr-20 -mt-20"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-purple-500/10 rounded-full -ml-20 -mb-20"}),y.jsxs("div",{className:"max-w-3xl mx-auto text-center relative",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-8 leading-tight",children:"Ready to Transform Your Study Habits?"}),y.jsx("p",{className:"text-xl text-purple-100 mb-10 leading-relaxed",children:"Join thousands of students who are studying smarter, not harder. Try Qzzly today and see the difference."}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5",children:[y.jsx(SA,{redirectPath:"/sessions",children:y.jsx(me,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",children:"Get Started Free"})}),y.jsxs(me,{size:"lg",variant:"outline",className:"bg-transparent text-white border-2 border-white px-10 py-7 hover:bg-white/10 text-lg font-bold rounded-xl",children:[y.jsx(GD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]})]})})})},tO=()=>{const n=Xu();return y.jsx("footer",{ref:n,className:"bg-gray-900 text-white pt-20 pb-10",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-10 h-10 gradient-bg rounded-lg flex items-center justify-center mr-3",children:y.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"white"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"white",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Qzzly"})]}),y.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"AI-powered study tools to help you learn faster and remember more."}),y.jsxs("div",{className:"flex space-x-5",children:[y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Product"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Features"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Testimonials"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"FAQ"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Resources"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Blog"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Help Center"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Tutorials"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Contact"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Company"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"About Us"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Careers"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})})]})]})]}),y.jsx("div",{className:"border-t border-gray-800 mt-16 pt-8 text-center text-gray-400",children:y.jsxs("p",{children:[" ",new Date().getFullYear()," Qzzly. All rights reserved."]})})]})})},h7=()=>y.jsxs("div",{className:"flex flex-col min-h-screen",children:[y.jsx(Yd,{}),y.jsxs("main",{className:"flex-grow",children:[y.jsx(l7,{}),y.jsx(c7,{}),y.jsx(u7,{}),y.jsx(d7,{})]}),y.jsx(tO,{})]}),f7=()=>{const n=Yo();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),y.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",children:[y.jsx(Yd,{}),y.jsx("main",{className:"flex flex-1 flex-col items-center justify-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mb-6 animate-float",children:[y.jsx("ellipse",{cx:"60",cy:"60",rx:"55",ry:"55",fill:"#ede9fe"}),y.jsx("ellipse",{cx:"60",cy:"60",rx:"40",ry:"40",fill:"#a5b4fc"}),y.jsx("path",{d:"M60 80c-10 0-18-8-18-18s8-18 18-18 18 8 18 18-8 18-18 18zm0-8a10 10 0 100-20 10 10 0 000 20z",fill:"#7c3aed"}),y.jsx("circle",{cx:"50",cy:"55",r:"3",fill:"#fff"}),y.jsx("circle",{cx:"70",cy:"55",r:"3",fill:"#fff"}),y.jsx("ellipse",{cx:"60",cy:"70",rx:"6",ry:"3",fill:"#fff"})]}),y.jsx("h1",{className:"text-5xl font-extrabold text-purple-700 mb-2",children:"404"}),y.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Sorry, we couldn't find that page."}),y.jsx(me,{className:"gradient-bg px-8 py-3 text-lg font-semibold shadow-md",asChild:!0,children:y.jsx("a",{href:"/sessions",children:"Go to My Sessions"})}),y.jsx(me,{variant:"ghost",className:"mt-2 text-purple-600 hover:underline",asChild:!0,children:y.jsx("a",{href:"/",children:"Back to Home"})})]})}),y.jsx(tO,{})]})},Cu=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Cu.displayName="Card";const Su=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("flex flex-col space-y-1.5 p-6",n),...e}));Su.displayName="CardHeader";const Jd=b.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ye("text-2xl font-semibold leading-none tracking-tight",n),...e}));Jd.displayName="CardTitle";const p7=b.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ye("text-sm text-muted-foreground",n),...e}));p7.displayName="CardDescription";const bu=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("p-6 pt-0",n),...e}));bu.displayName="CardContent";const gw=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("flex items-center p-6 pt-0",n),...e}));gw.displayName="CardFooter";const Lu=b.forwardRef(({className:n,type:e,...t},s)=>y.jsx("input",{type:e,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));Lu.displayName="Input";var m7="Label",nO=b.forwardRef((n,e)=>y.jsx(ce.label,{...n,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=n.onMouseDown)==null||r.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));nO.displayName=m7;var sO=nO;const g7=UT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xt=b.forwardRef(({className:n,...e},t)=>y.jsx(sO,{ref:t,className:ye(g7(),n),...e}));xt.displayName=sO.displayName;const NA=b.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ye("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));NA.displayName="Textarea";function y7(){const{user:n}=Ol(),e=sA(),{data:t,isLoading:s}=UL({queryKey:["sessions"],queryFn:Qs.getSessions}),r=(t==null?void 0:t.sessions)||[],[i,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(!1),f=Hf(),{toast:m}=Ko(),g=ak({mutationFn:C=>Qs.createSession({title:C.title,description:C.description}),onSuccess:async C=>{if(C.error||!C.session){m({title:"Error",description:C.error||"Failed to create session",variant:"destructive"});return}e.invalidateQueries({queryKey:["sessions"]}),o(""),l(""),u(!1),m({title:"Success",description:`"${C.session.title}" has been created successfully.`}),setTimeout(()=>{f(`/session/${C.session.id}`)},100)},onError:()=>{m({title:"Error",description:"Failed to create session",variant:"destructive"})}}),w=()=>{if(!i.trim()){m({title:"Error",description:"Session title is required",variant:"destructive"});return}g.mutate({title:i,description:a})},v=ak({mutationFn:C=>Qs.deleteSession(C),onSuccess:(C,T)=>{if(C.error){m({title:"Error",description:C.error,variant:"destructive"});return}e.setQueryData(["sessions"],(R=[])=>R.filter(P=>P.id!==T)),m({title:"Success",description:"Session has been deleted successfully."})},onError:()=>{m({title:"Error",description:"Failed to delete session",variant:"destructive"})}}),_=(C,T)=>{T.stopPropagation(),v.mutate(C)},x=C=>{if(!C)return"Unknown";const T=new Date(C);return isNaN(T.getTime())?"Unknown":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(T)},S=Xu();return y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Yd,{}),y.jsxs("main",{ref:S,className:"container mx-auto px-4 py-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold",children:"Your Study Sessions"}),y.jsxs(jx,{open:c,onOpenChange:u,children:[y.jsx(zx,{asChild:!0,children:y.jsx(me,{className:"gradient-bg",children:"Create New Session"})}),y.jsxs(My,{children:[y.jsxs(Ny,{children:[y.jsx(Dy,{children:"Create New Study Session"}),y.jsx(Hx,{children:"Create a new study session to organize your learning materials."})]}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{htmlFor:"title",children:"Session Title"}),y.jsx(Lu,{id:"title",placeholder:"Enter a title for your study session",value:i,onChange:C=>o(C.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{htmlFor:"description",children:"Description (Optional)"}),y.jsx(NA,{id:"description",placeholder:"Describe what you'll be studying",value:a,onChange:C=>l(C.target.value)})]})]}),y.jsxs(CA,{children:[y.jsx(me,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),y.jsx(me,{className:"gradient-bg",onClick:w,children:"Create Session"})]})]})]})]}),s?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(C=>y.jsxs(Cu,{className:"border shadow-sm animate-pulse",children:[y.jsx(Su,{className:"bg-gray-100 h-16"}),y.jsxs(bu,{className:"pt-4",children:[y.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),y.jsx(gw,{className:"h-10 bg-gray-50"})]},C))}):r.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(C=>y.jsxs(Cu,{className:"border shadow-md hover:shadow-lg transition-shadow cursor-pointer card-hover",onClick:()=>f(`/session/${C.id}`),children:[y.jsx(Su,{className:"pb-2",children:y.jsxs(Jd,{className:"flex justify-between items-start",children:[y.jsx("span",{className:"text-xl",children:C.title}),y.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-500 hover:bg-red-50",onClick:T=>_(C.id,T),children:y.jsx(D5,{className:"h-4 w-4"})})]})}),y.jsxs(bu,{className:"pb-2",children:[y.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:C.description||"No description"}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(S5,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Created: ",x(C.created_at)]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(R5,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Updated: ",x(C.updated_at)]})]})]})]}),y.jsx(gw,{className:"pt-3 border-t flex justify-between",children:y.jsx("div",{})})]},C.id))}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"w-16 h-16 gradient-bg rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Study Sessions Yet"}),y.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first study session to upload PDFs and start generating flashcards, quizzes, and more."}),y.jsx(me,{className:"gradient-bg",onClick:()=>u(!0),children:"Create Your First Session"})]})]})]})}var Kx="Tabs",[v7,ule]=Wn(Kx,[Kf]),rO=Kf(),[w7,DA]=v7(Kx),iO=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=Wf(a),[f,m]=Ii({prop:s,onChange:r,defaultProp:i??"",caller:Kx});return y.jsx(w7,{scope:t,baseId:Ai(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:l,children:y.jsx(ce.div,{dir:u,"data-orientation":o,...c,ref:e})})});iO.displayName=Kx;var oO="TabsList",aO=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=n,i=DA(oO,t),o=rO(t);return y.jsx(bA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:y.jsx(ce.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});aO.displayName=oO;var lO="TabsTrigger",cO=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...i}=n,o=DA(lO,t),a=rO(t),l=hO(o.baseId,s),c=fO(o.baseId,s),u=s===o.value;return y.jsx(EA,{asChild:!0,...a,focusable:!r,active:u,children:y.jsx(ce.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:e,onMouseDown:J(n.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:J(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:J(n.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!r&&f&&o.onValueChange(s)})})})});cO.displayName=lO;var uO="TabsContent",dO=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:i,...o}=n,a=DA(uO,t),l=hO(a.baseId,s),c=fO(a.baseId,s),u=s===a.value,f=b.useRef(u);return b.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Us,{present:r||u,children:({present:m})=>y.jsx(ce.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});dO.displayName=uO;function hO(n,e){return`${n}-trigger-${e}`}function fO(n,e){return`${n}-content-${e}`}var x7=iO,pO=aO,mO=cO,gO=dO;const yO=x7,LA=b.forwardRef(({className:n,...e},t)=>y.jsx(pO,{ref:t,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));LA.displayName=pO.displayName;const Ro=b.forwardRef(({className:n,...e},t)=>y.jsx(mO,{ref:t,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Ro.displayName=mO.displayName;const ko=b.forwardRef(({className:n,...e},t)=>y.jsx(gO,{ref:t,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ko.displayName=gO.displayName;const Ep=({title:n,isLoading:e,error:t,children:s,generationText:r})=>e?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),y.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:r||"Processing..."})]}):t?y.jsx("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:y.jsxs("div",{className:"text-red-500 text-center",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error"}),y.jsx("p",{className:"text-sm",children:t})]})}):y.jsxs("div",{className:"h-full",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:n}),s]});var He;(function(n){n.assertEqual=r=>{};function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const i={};for(const o of r)i[o]=o;return i},n.getValidEnumValues=r=>{const i=n.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of i)o[a]=r[a];return n.objectValues(o)},n.objectValues=r=>n.objectKeys(r).map(function(i){return r[i]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.push(o);return i},n.find=(r,i)=>{for(const o of r)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,i=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=s,n.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(He||(He={}));var Hk;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Hk||(Hk={}));const ae=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ua=n=>{switch(typeof n){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(n)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(n)?ae.array:n===null?ae.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ae.promise:typeof Map<"u"&&n instanceof Map?ae.map:typeof Set<"u"&&n instanceof Set?ae.set:typeof Date<"u"&&n instanceof Date?ae.date:ae.object;default:return ae.unknown}},K=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Go extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let a=s,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),s}static assert(e){if(!(e instanceof Go))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Go.create=n=>new Go(n);const XS=(n,e)=>{let t;switch(n.code){case K.invalid_type:n.received===ae.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,He.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${He.joinValues(n.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${He.joinValues(n.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${He.joinValues(n.options)}, received '${n.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:He.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case K.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case K.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,He.assertNever(n)}return{message:t}};let _7=XS;function C7(){return _7}const S7=n=>{const{data:e,path:t,errorMaps:s,issueData:r}=n,i=[...t,...r.path||[]],o={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let a="";const l=s.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:i,message:a}};function Z(n,e){const t=C7(),s=S7({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===XS?void 0:XS].filter(r=>!!r)});n.common.issues.push(s)}class Hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if(r.status==="aborted")return we;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const r of t){const i=await r.key,o=await r.value;s.push({key:i,value:o})}return Hn.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:i,value:o}=r;if(i.status==="aborted"||o.status==="aborted")return we;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}}const we=Object.freeze({status:"aborted"}),Tp=n=>({status:"dirty",value:n}),cr=n=>({status:"valid",value:n}),Gk=n=>n.status==="aborted",qk=n=>n.status==="dirty",Rf=n=>n.status==="valid",yw=n=>typeof Promise<"u"&&n instanceof Promise;var le;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));class Ni{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Wk=(n,e)=>{if(Rf(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Go(n.common.issues);return this._error=t,this._error}}};function Re(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:r}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??s??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:r}}class Be{get description(){return this._def.description}_getType(e){return ua(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hn,ctx:{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yw(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Wk(s,r)}"~validate"(e){var s,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Rf(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(r=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Rf(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},r=this._parse({data:e,path:s.path,parent:s}),i=await(yw(r)?r:Promise.resolve(r));return Wk(s,i)}refine(e,t){const s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,i)=>{const o=e(r),a=()=>i.addIssue({code:K.custom,...s(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new If({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return xl.create(this,this._def)}nullable(){return Mf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ki.create(this)}promise(){return Cw.create(this,this._def)}or(e){return ww.create([this,e],this._def)}and(e){return xw.create(this,e,this._def)}transform(e){return new If({...Re(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new tb({...Re(this._def),innerType:this,defaultValue:t,typeName:ve.ZodDefault})}brand(){return new q7({typeName:ve.ZodBranded,type:this,...Re(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new nb({...Re(this._def),innerType:this,catchValue:t,typeName:ve.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return FA.create(this,e)}readonly(){return sb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const b7=/^c[^\s-]{8,}$/i,E7=/^[0-9a-z]+$/,T7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,A7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,R7=/^[a-z0-9_-]{21}$/i,k7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,P7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,I7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,M7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let dC;const N7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,L7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,F7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,O7=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$7=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,vO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",U7=new RegExp(`^${vO}$`);function wO(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function B7(n){return new RegExp(`^${wO(n)}$`)}function V7(n){let e=`${vO}T${wO(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function j7(n,e){return!!((e==="v4"||!e)&&N7.test(n)||(e==="v6"||!e)&&L7.test(n))}function z7(n,e){if(!k7.test(n))return!1;try{const[t]=n.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function H7(n,e){return!!((e==="v4"||!e)&&D7.test(n)||(e==="v6"||!e)&&F7.test(n))}class Si extends Be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return Z(i,{code:K.invalid_type,expected:ae.string,received:i.parsedType}),we}const s=new Hn;let r;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),Z(r,{code:K.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),Z(r,{code:K.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Z(r,{code:K.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Z(r,{code:K.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")I7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"email",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")dC||(dC=new RegExp(M7,"u")),dC.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"emoji",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")A7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"uuid",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")R7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"nanoid",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")b7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"cuid",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")E7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"cuid2",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")T7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"ulid",code:K.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Z(r,{validation:"url",code:K.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"regex",code:K.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?V7(i).test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?U7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?B7(i).test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{code:K.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?P7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"duration",code:K.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?j7(e.data,i.version)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"ip",code:K.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?z7(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"jwt",code:K.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?H7(e.data,i.version)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"cidr",code:K.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?O7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"base64",code:K.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?$7.test(e.data)||(r=this._getOrReturnCtx(e,r),Z(r,{validation:"base64url",code:K.invalid_string,message:i.message}),s.dirty()):He.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:K.invalid_string,...le.errToObj(s)})}_addCheck(e){return new Si({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...le.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...le.errToObj(t)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new Si({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Si({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Si({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Si.create=n=>new Si({checks:[],typeName:ve.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Re(n)});function G7(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,i=Number.parseInt(n.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return i%o/10**r}class Fu extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return Z(i,{code:K.invalid_type,expected:ae.number,received:i.parsedType}),we}let s;const r=new Hn;for(const i of this._def.checks)i.kind==="int"?He.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:K.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?G7(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:K.not_finite,message:i.message}),r.dirty()):He.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Fu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Fu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Fu.create=n=>new Fu({checks:[],typeName:ve.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Re(n)});class Ou extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let s;const r=new Hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:K.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):He.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Z(t,{code:K.invalid_type,expected:ae.bigint,received:t.parsedType}),we}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Ou({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Ou({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ou.create=n=>new Ou({checks:[],typeName:ve.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Re(n)});class vw extends Be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.boolean,received:s.parsedType}),we}return cr(e.data)}}vw.create=n=>new vw({typeName:ve.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Re(n)});class kf extends Be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return Z(i,{code:K.invalid_type,expected:ae.date,received:i.parsedType}),we}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Z(i,{code:K.invalid_date}),we}const s=new Hn;let r;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),Z(r,{code:K.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),Z(r,{code:K.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):He.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kf({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}kf.create=n=>new kf({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ve.ZodDate,...Re(n)});class Kk extends Be{_parse(e){if(this._getType(e)!==ae.symbol){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.symbol,received:s.parsedType}),we}return cr(e.data)}}Kk.create=n=>new Kk({typeName:ve.ZodSymbol,...Re(n)});class Yk extends Be{_parse(e){if(this._getType(e)!==ae.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.undefined,received:s.parsedType}),we}return cr(e.data)}}Yk.create=n=>new Yk({typeName:ve.ZodUndefined,...Re(n)});class Jk extends Be{_parse(e){if(this._getType(e)!==ae.null){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.null,received:s.parsedType}),we}return cr(e.data)}}Jk.create=n=>new Jk({typeName:ve.ZodNull,...Re(n)});class Xk extends Be{constructor(){super(...arguments),this._any=!0}_parse(e){return cr(e.data)}}Xk.create=n=>new Xk({typeName:ve.ZodAny,...Re(n)});class QS extends Be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cr(e.data)}}QS.create=n=>new QS({typeName:ve.ZodUnknown,...Re(n)});class Al extends Be{_parse(e){const t=this._getOrReturnCtx(e);return Z(t,{code:K.invalid_type,expected:ae.never,received:t.parsedType}),we}}Al.create=n=>new Al({typeName:ve.ZodNever,...Re(n)});class Qk extends Be{_parse(e){if(this._getType(e)!==ae.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.void,received:s.parsedType}),we}return cr(e.data)}}Qk.create=n=>new Qk({typeName:ve.ZodVoid,...Re(n)});class ki extends Be{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==ae.array)return Z(t,{code:K.invalid_type,expected:ae.array,received:t.parsedType}),we;if(r.exactLength!==null){const o=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(o||a)&&(Z(t,{code:o?K.too_big:K.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(Z(t,{code:K.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(Z(t,{code:K.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>r.type._parseAsync(new Ni(t,o,t.path,a)))).then(o=>Hn.mergeArray(s,o));const i=[...t.data].map((o,a)=>r.type._parseSync(new Ni(t,o,t.path,a)));return Hn.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new ki({...this._def,minLength:{value:e,message:le.toString(t)}})}max(e,t){return new ki({...this._def,maxLength:{value:e,message:le.toString(t)}})}length(e,t){return new ki({...this._def,exactLength:{value:e,message:le.toString(t)}})}nonempty(e){return this.min(1,e)}}ki.create=(n,e)=>new ki({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Re(e)});function yd(n){if(n instanceof Nt){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=xl.create(yd(s))}return new Nt({...n._def,shape:()=>e})}else return n instanceof ki?new ki({...n._def,type:yd(n.element)}):n instanceof xl?xl.create(yd(n.unwrap())):n instanceof Mf?Mf.create(yd(n.unwrap())):n instanceof $u?$u.create(n.items.map(e=>yd(e))):n}class Nt extends Be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=He.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ae.object){const c=this._getOrReturnCtx(e);return Z(c,{code:K.invalid_type,expected:ae.object,received:c.parsedType}),we}const{status:s,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Al&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],f=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ni(r,f,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof Al){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(Z(r,{code:K.unrecognized_keys,keys:a}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ni(r,f,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>Hn.mergeObjectSync(s,c)):Hn.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new Nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,o;const r=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,s).message)??s.defaultError;return t.code==="unrecognized_keys"?{message:le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Nt({...this._def,unknownKeys:"strip"})}passthrough(){return new Nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Nt({...this._def,catchall:e})}pick(e){const t={};for(const s of He.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new Nt({...this._def,shape:()=>t})}omit(e){const t={};for(const s of He.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new Nt({...this._def,shape:()=>t})}deepPartial(){return yd(this)}partial(e){const t={};for(const s of He.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new Nt({...this._def,shape:()=>t})}required(e){const t={};for(const s of He.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof xl;)i=i._def.innerType;t[s]=i}return new Nt({...this._def,shape:()=>t})}keyof(){return xO(He.objectKeys(this.shape))}}Nt.create=(n,e)=>new Nt({shape:()=>n,unknownKeys:"strip",catchall:Al.create(),typeName:ve.ZodObject,...Re(e)});Nt.strictCreate=(n,e)=>new Nt({shape:()=>n,unknownKeys:"strict",catchall:Al.create(),typeName:ve.ZodObject,...Re(e)});Nt.lazycreate=(n,e)=>new Nt({shape:n,unknownKeys:"strip",catchall:Al.create(),typeName:ve.ZodObject,...Re(e)});class ww extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function r(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Go(a.ctx.common.issues));return Z(t,{code:K.invalid_union,unionErrors:o}),we}if(t.common.async)return Promise.all(s.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(r);{let i;const o=[];for(const l of s){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Go(l));return Z(t,{code:K.invalid_union,unionErrors:a}),we}}get options(){return this._def.options}}ww.create=(n,e)=>new ww({options:n,typeName:ve.ZodUnion,...Re(e)});function ZS(n,e){const t=ua(n),s=ua(e);if(n===e)return{valid:!0,data:n};if(t===ae.object&&s===ae.object){const r=He.objectKeys(e),i=He.objectKeys(n).filter(a=>r.indexOf(a)!==-1),o={...n,...e};for(const a of i){const l=ZS(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===ae.array&&s===ae.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],l=ZS(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return t===ae.date&&s===ae.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class xw extends Be{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(i,o)=>{if(Gk(i)||Gk(o))return we;const a=ZS(i.value,o.value);return a.valid?((qk(i)||qk(o))&&t.dirty(),{status:t.value,value:a.data}):(Z(s,{code:K.invalid_intersection_types}),we)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>r(i,o)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}xw.create=(n,e,t)=>new xw({left:n,right:e,typeName:ve.ZodIntersection,...Re(t)});class $u extends Be{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ae.array)return Z(s,{code:K.invalid_type,expected:ae.array,received:s.parsedType}),we;if(s.data.length<this._def.items.length)return Z(s,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),we;!this._def.rest&&s.data.length>this._def.items.length&&(Z(s,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ni(s,o,s.path,a)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>Hn.mergeArray(t,o)):Hn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new $u({...this._def,rest:e})}}$u.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $u({items:n,typeName:ve.ZodTuple,rest:null,...Re(e)})};class _w extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ae.object)return Z(s,{code:K.invalid_type,expected:ae.object,received:s.parsedType}),we;const r=[],i=this._def.keyType,o=this._def.valueType;for(const a in s.data)r.push({key:i._parse(new Ni(s,a,s.path,a)),value:o._parse(new Ni(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?Hn.mergeObjectAsync(t,r):Hn.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Be?new _w({keyType:e,valueType:t,typeName:ve.ZodRecord,...Re(s)}):new _w({keyType:Si.create(),valueType:e,typeName:ve.ZodRecord,...Re(t)})}}class Zk extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ae.map)return Z(s,{code:K.invalid_type,expected:ae.map,received:s.parsedType}),we;const r=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([a,l],c)=>({key:r._parse(new Ni(s,a,s.path,[c,"key"])),value:i._parse(new Ni(s,l,s.path,[c,"value"]))}));if(s.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return we;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return we;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}Zk.create=(n,e,t)=>new Zk({valueType:e,keyType:n,typeName:ve.ZodMap,...Re(t)});class Lm extends Be{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ae.set)return Z(s,{code:K.invalid_type,expected:ae.set,received:s.parsedType}),we;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(Z(s,{code:K.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(Z(s,{code:K.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return we;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...s.data.values()].map((l,c)=>i._parse(new Ni(s,l,s.path,c)));return s.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Lm({...this._def,minSize:{value:e,message:le.toString(t)}})}max(e,t){return new Lm({...this._def,maxSize:{value:e,message:le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Lm.create=(n,e)=>new Lm({valueType:n,minSize:null,maxSize:null,typeName:ve.ZodSet,...Re(e)});class eb extends Be{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eb.create=(n,e)=>new eb({getter:n,typeName:ve.ZodLazy,...Re(e)});class eP extends Be{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Z(t,{received:t.data,code:K.invalid_literal,expected:this._def.value}),we}return{status:"valid",value:e.data}}get value(){return this._def.value}}eP.create=(n,e)=>new eP({value:n,typeName:ve.ZodLiteral,...Re(e)});function xO(n,e){return new Pf({values:n,typeName:ve.ZodEnum,...Re(e)})}class Pf extends Be{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{expected:He.joinValues(s),received:t.parsedType,code:K.invalid_type}),we}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{received:t.data,code:K.invalid_enum_value,options:s}),we}return cr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Pf.create(e,{...this._def,...t})}exclude(e,t=this._def){return Pf.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Pf.create=xO;class tP extends Be{_parse(e){const t=He.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ae.string&&s.parsedType!==ae.number){const r=He.objectValues(t);return Z(s,{expected:He.joinValues(r),received:s.parsedType,code:K.invalid_type}),we}if(this._cache||(this._cache=new Set(He.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=He.objectValues(t);return Z(s,{received:s.data,code:K.invalid_enum_value,options:r}),we}return cr(e.data)}get enum(){return this._def.values}}tP.create=(n,e)=>new tP({values:n,typeName:ve.ZodNativeEnum,...Re(e)});class Cw extends Be{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.promise&&t.common.async===!1)return Z(t,{code:K.invalid_type,expected:ae.promise,received:t.parsedType}),we;const s=t.parsedType===ae.promise?t.data:Promise.resolve(t.data);return cr(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Cw.create=(n,e)=>new Cw({type:n,typeName:ve.ZodPromise,...Re(e)});class If extends Be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:o=>{Z(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const o=r.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return we;const l=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return l.status==="aborted"?we:l.status==="dirty"||t.value==="dirty"?Tp(l.value):l});{if(t.value==="aborted")return we;const a=this._def.schema._parseSync({data:o,path:s.path,parent:s});return a.status==="aborted"?we:a.status==="dirty"||t.value==="dirty"?Tp(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?we:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?we:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(r.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Rf(o))return we;const a=r.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Rf(o)?Promise.resolve(r.transform(o.value,i)).then(a=>({status:t.value,value:a})):we);He.assertNever(r)}}If.create=(n,e,t)=>new If({schema:n,typeName:ve.ZodEffects,effect:e,...Re(t)});If.createWithPreprocess=(n,e,t)=>new If({schema:e,effect:{type:"preprocess",transform:n},typeName:ve.ZodEffects,...Re(t)});class xl extends Be{_parse(e){return this._getType(e)===ae.undefined?cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xl.create=(n,e)=>new xl({innerType:n,typeName:ve.ZodOptional,...Re(e)});class Mf extends Be{_parse(e){return this._getType(e)===ae.null?cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mf.create=(n,e)=>new Mf({innerType:n,typeName:ve.ZodNullable,...Re(e)});class tb extends Be{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===ae.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tb.create=(n,e)=>new tb({innerType:n,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});class nb extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return yw(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Go(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Go(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}nb.create=(n,e)=>new nb({innerType:n,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});class nP extends Be{_parse(e){if(this._getType(e)!==ae.nan){const s=this._getOrReturnCtx(e);return Z(s,{code:K.invalid_type,expected:ae.nan,received:s.parsedType}),we}return{status:"valid",value:e.data}}}nP.create=n=>new nP({typeName:ve.ZodNaN,...Re(n)});class q7 extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class FA extends Be{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?we:i.status==="dirty"?(t.dirty(),Tp(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?we:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new FA({in:e,out:t,typeName:ve.ZodPipeline})}}class sb extends Be{_parse(e){const t=this._def.innerType._parse(e),s=r=>(Rf(r)&&(r.value=Object.freeze(r.value)),r);return yw(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}}sb.create=(n,e)=>new sb({innerType:n,typeName:ve.ZodReadonly,...Re(e)});var ve;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ve||(ve={}));const Hl=Si.create,sP=Fu.create;Ou.create;const W7=vw.create;kf.create;const rP=QS.create;Al.create;const Ap=ki.create,K7=Nt.create,Y7=ww.create;xw.create;$u.create;const J7=_w.create,X7=eb.create,Q7=Pf.create;Cw.create;xl.create;Mf.create;const pd={string:n=>Si.create({...n,coerce:!0}),number:n=>Fu.create({...n,coerce:!0}),boolean:n=>vw.create({...n,coerce:!0}),bigint:n=>Ou.create({...n,coerce:!0}),date:n=>kf.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Z7,eY;function tY(){return{geminiUrl:Z7,vertexUrl:eY}}function nY(n,e,t){var s,r,i;if(!(!((s=n.httpOptions)===null||s===void 0)&&s.baseUrl)){const o=tY();return n.vertexai?(r=o.vertexUrl)!==null&&r!==void 0?r:e:(i=o.geminiUrl)!==null&&i!==void 0?i:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qu{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const u=l[c];p(u,e.slice(i+1),t[c])}else for(const c of l)p(c,e.slice(i+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];p(l[0],e.slice(i+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else n[s]=t}function h(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const s=e[t];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in n){const i=n[r];return Array.isArray(i)?i.map(o=>h(o,e.slice(t+1))):void 0}else return}else n=n[s]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iP;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iP||(iP={}));var oP;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(oP||(oP={}));var bi;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(bi||(bi={}));var aP;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(aP||(aP={}));var lP;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(lP||(lP={}));var cP;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(cP||(cP={}));var uP;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(uP||(uP={}));var dP;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(dP||(dP={}));var hP;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hP||(hP={}));var fP;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fP||(fP={}));var pP;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(pP||(pP={}));var mP;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mP||(mP={}));var gP;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(gP||(gP={}));var yP;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yP||(yP={}));var vP;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(vP||(vP={}));var wP;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wP||(wP={}));var Sw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sw||(Sw={}));var xP;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(xP||(xP={}));var rb;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rb||(rb={}));var _P;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_P||(_P={}));var CP;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(CP||(CP={}));var SP;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(SP||(SP={}));var bP;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(bP||(bP={}));var EP;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(EP||(EP={}));var TP;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(TP||(TP={}));var AP;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(AP||(AP={}));var RP;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(RP||(RP={}));var kP;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(kP||(kP={}));var PP;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(PP||(PP={}));var IP;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(IP||(IP={}));var MP;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(MP||(MP={}));var NP;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(NP||(NP={}));var DP;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(DP||(DP={}));var LP;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(LP||(LP={}));var FP;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(FP||(FP={}));var OP;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(OP||(OP={}));var $P;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($P||($P={}));var UP;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(UP||(UP={}));var BP;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(BP||(BP={}));var VP;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(VP||(VP={}));var jP;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jP||(jP={}));var Od;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Od||(Od={}));class ib{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class fp{get text(){var e,t,s,r,i,o,a,l;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,w]of Object.entries(m))g!=="text"&&g!=="thought"&&(w!==null||w!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,t,s,r,i,o,a,l;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,s,r,i,o,a,l;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,s,r,i,o,a,l,c;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,s,r,i,o,a,l,c;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class zP{}class HP{}class sY{}class rY{}class GP{}class qP{}class WP{}class iY{}class KP{}class YP{}class JP{}class oY{}class aY{}class lY{}class XP{}class cY{get text(){var e,t,s;let r="",i=!1;const o=[];for(const a of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,t,s;let r="";const i=[];for(const o of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class uY{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _O(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function CO(n){return Array.isArray(n)?n.map(e=>bw(e)):[bw(n)]}function bw(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function SO(n){const e=bw(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bO(n){const e=bw(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QP(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function EO(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>QP(e)):[QP(n)]}function ob(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ZP(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function eI(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function An(n){if(n==null)throw new Error("ContentUnion is required");return ob(n)?n:{role:"user",parts:EO(n)}}function TO(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=An(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=An(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>An(t)):[An(e)]}function sr(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(ZP(n)||eI(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[An(n)]}const e=[],t=[],s=ob(n[0]);for(const r of n){const i=ob(r);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(ZP(r)||eI(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:EO(t)}),e}const dY=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),tI=Q7(["string","number","integer","object","array","boolean","null"]),hY=Y7([tI,Ap(tI)]);function fY(n=!0){const e=X7(()=>{const t=K7({type:hY.optional(),format:Hl().optional(),title:Hl().optional(),description:Hl().optional(),default:rP().optional(),items:e.optional(),minItems:pd.string().optional(),maxItems:pd.string().optional(),enum:Ap(rP()).optional(),properties:J7(Hl(),e).optional(),required:Ap(Hl()).optional(),minProperties:pd.string().optional(),maxProperties:pd.string().optional(),propertyOrdering:Ap(Hl()).optional(),minimum:sP().optional(),maximum:sP().optional(),minLength:pd.string().optional(),maxLength:pd.string().optional(),pattern:Hl().optional(),anyOf:Ap(e).optional(),additionalProperties:W7().optional()});return n?t.strict():t});return e}function pY(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(bi).includes(t[0].toUpperCase())?t[0].toUpperCase():bi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(bi).includes(s.toUpperCase())?s.toUpperCase():bi.TYPE_UNSPECIFIED})}}function Xd(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&pY(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(bi).includes(a.toUpperCase())?a.toUpperCase():bi.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Xd(a);else if(s.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Xd(c))}e[o]=l}else if(r.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=Xd(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Fm(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=fY().parse(n);return Xd(e)}else return Xd(n)}function OA(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function $A(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Yf(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=Fm(e.parameters)),e.response&&(e.response=Fm(e.response));return n}function Jf(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function mY(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Jo(n,e){if(typeof e!="string")throw new Error("name must be a string");return mY(n,e,"cachedContents")}function AO(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Xo(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function gY(n){return n!=null&&typeof n=="object"&&"name"in n}function yY(n){return n!=null&&typeof n=="object"&&"video"in n}function vY(n){return n!=null&&typeof n=="object"&&"uri"in n}function RO(n){var e;let t;if(gY(n)&&(t=n.name),!(vY(n)&&(t=n.uri,t===void 0))&&!(yY(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function kO(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function PO(n){for(const e of["models","tunedModels","publisherModels"])if(wY(n,e))return n[e];return[]}function wY(n,e){return n!==null&&typeof n=="object"&&e in n}function xY(n,e={}){const t=n,s={name:t.name,description:t.description,parameters:Xd(Yx(t.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function _Y(n,e={}){const t=[],s=new Set;for(const r of n){const i=r.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=xY(r,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function CY(n){const e=[];for(const t of n)e.push(Yx(t));return e}function SY(n){const e={};for(const[t,s]of Object.entries(n)){const r=s;e[t]=Yx(r)}return e}function Yx(n){const e=new Set(["items"]),t=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[i,o]of Object.entries(n))if(e.has(i))r[i]=Yx(o);else if(t.has(i))r[i]=CY(o);else if(s.has(i))r[i]=SY(o);else if(i==="type"){const a=o.toUpperCase();r[i]=Object.values(bi).includes(a)?a:bi.TYPE_UNSPECIFIED}else dY.has(i)&&(r[i]=o);return r}function IO(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function bY(n){const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Xf(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function MO(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EY(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function TY(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function AY(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function RY(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],EY(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],TY(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],AY(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function NO(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>RY(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function kY(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&p(e,["default"],s);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&p(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&p(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&p(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&p(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const R=h(n,["required"]);R!=null&&p(e,["required"],R);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const I=h(n,["type"]);return I!=null&&p(e,["type"],I),e}function PY(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&p(e,["category"],t);const s=h(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function IY(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function MY(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function NY(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],MY(t)),e}function DY(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function LY(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],DY(t)),e}function FY(){return{}}function OY(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>IY(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],NY(s));const r=h(n,["googleSearchRetrieval"]);if(r!=null&&p(e,["googleSearchRetrieval"],LY(r)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],FY());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function $Y(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&p(e,["allowedFunctionNames"],s),e}function UY(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&p(e,["longitude"],s),e}function BY(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],UY(t));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function VY(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],$Y(t));const s=h(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],BY(s)),e}function jY(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function DO(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],jY(t)),e}function zY(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&p(e,["voiceConfig"],DO(s)),e}function HY(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>zY(r))),p(e,["speakerVoiceConfigs"],s)}return e}function GY(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],DO(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&p(e,["multiSpeakerVoiceConfig"],HY(s));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function qY(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&p(e,["thinkingBudget"],s),e}function WY(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],NO(An(r)));const i=h(e,["temperature"]);i!=null&&p(s,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(s,["topP"],o);const a=h(e,["topK"]);a!=null&&p(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(s,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(s,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&p(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&p(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],kY(Fm(x)));const S=h(e,["responseJsonSchema"]);if(S!=null&&p(s,["responseJsonSchema"],S),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(t!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(V=>PY(V))),p(t,["safetySettings"],D)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let D=Jf(T);Array.isArray(D)&&(D=D.map(V=>OY(Yf(V)))),p(t,["tools"],D)}const R=h(e,["toolConfig"]);if(t!==void 0&&R!=null&&p(t,["toolConfig"],VY(R)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&p(t,["cachedContent"],Jo(n,P));const I=h(e,["responseModalities"]);I!=null&&p(s,["responseModalities"],I);const M=h(e,["mediaResolution"]);M!=null&&p(s,["mediaResolution"],M);const N=h(e,["speechConfig"]);if(N!=null&&p(s,["speechConfig"],GY(OA(N))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=h(e,["thinkingConfig"]);return L!=null&&p(s,["thinkingConfig"],qY(L)),s}function KY(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["request","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>NO(a))),p(t,["request","contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["request","generationConfig"],WY(n,i,t)),t}function YY(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&p(t,["fileName"],s);const r=h(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>KY(n,o))),p(t,["requests","requests"],i)}return t}function JY(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function XY(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["src"]);r!=null&&p(t,["batch","inputConfig"],YY(n,IO(n,r)));const i=h(e,["config"]);return i!=null&&p(t,["config"],JY(i,t)),t}function QY(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function ZY(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function eJ(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tJ(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],eJ(t,e)),e}function nJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function sJ(n){const e={},t=h(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rJ(n){const e={},t=h(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function iJ(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=h(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],rJ(bY(r))),t}function oJ(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["model"],Je(n,s));const r=h(e,["src"]);r!=null&&p(t,["inputConfig"],sJ(IO(n,r)));const i=h(e,["config"]);return i!=null&&p(t,["config"],iJ(i,t)),t}function aJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function lJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function cJ(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function uJ(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],cJ(t,e)),e}function dJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Xf(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function LO(){return{}}function hJ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function fJ(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function pJ(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function mJ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],hJ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],fJ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],pJ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function gJ(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>mJ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function yJ(n){const e={},t=h(n,["citationSources"]);return t!=null&&p(e,["citations"],t),e}function vJ(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&p(e,["urlRetrievalStatus"],s),e}function wJ(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>vJ(r))),p(e,["urlMetadata"],s)}return e}function xJ(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],gJ(t));const s=h(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],yJ(s));const r=h(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],wJ(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function _J(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>xJ(a))),p(e,["candidates"],o)}const s=h(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const r=h(n,["promptFeedback"]);r!=null&&p(e,["promptFeedback"],r);const i=h(n,["usageMetadata"]);return i!=null&&p(e,["usageMetadata"],i),e}function CJ(n){const e={},t=h(n,["response"]);return t!=null&&p(e,["response"],_J(t)),h(n,["error"])!=null&&p(e,["error"],LO()),e}function SJ(n){const e={},t=h(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>CJ(i))),p(e,["inlinedResponses"],r)}return e}function ab(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["metadata","state"]);r!=null&&p(e,["state"],MO(r));const i=h(n,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["metadata","model"]);l!=null&&p(e,["model"],l);const c=h(n,["metadata","output"]);return c!=null&&p(e,["dest"],SJ(c)),e}function bJ(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>ab(i))),p(e,["batchJobs"],r)}return e}function EJ(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["done"]);return s!=null&&p(e,["done"],s),h(n,["error"])!=null&&p(e,["error"],LO()),e}function FO(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const s=h(n,["code"]);s!=null&&p(e,["code"],s);const r=h(n,["message"]);return r!=null&&p(e,["message"],r),e}function TJ(n){const e={},t=h(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=h(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function AJ(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=h(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function lb(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["state"]);r!=null&&p(e,["state"],MO(r));const i=h(n,["error"]);i!=null&&p(e,["error"],FO(i));const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(n,["endTime"]);l!=null&&p(e,["endTime"],l);const c=h(n,["updateTime"]);c!=null&&p(e,["updateTime"],c);const u=h(n,["model"]);u!=null&&p(e,["model"],u);const f=h(n,["inputConfig"]);f!=null&&p(e,["src"],TJ(f));const m=h(n,["outputConfig"]);return m!=null&&p(e,["dest"],AJ(m)),e}function RJ(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>lb(i))),p(e,["batchJobs"],r)}return e}function kJ(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const r=h(n,["error"]);return r!=null&&p(e,["error"],FO(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Uu;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Uu||(Uu={}));class $y{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};s?typeof s=="object"?o=Object.assign({},s):o=s:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PJ extends Qu{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${r}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new $y(Uu.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}async createInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=oJ(this.apiClient,e);return a=de("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>lb(u))}else{const c=XY(this.apiClient,e);return a=de("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>ab(u))}}async get(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=aJ(this.apiClient,e);return a=de("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>lb(u))}else{const c=QY(this.apiClient,e);return a=de("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>ab(u))}}async cancel(e){var t,s,r,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=lJ(this.apiClient,e);o=de("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const l=ZY(this.apiClient,e);o=de("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=uJ(e);return a=de("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=RJ(u),m=new XP;return Object.assign(m,f),m})}else{const c=tJ(e);return a=de("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=bJ(u),m=new XP;return Object.assign(m,f),m})}}async delete(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dJ(this.apiClient,e);return a=de("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>kJ(u))}else{const c=nJ(this.apiClient,e);return a=de("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>EJ(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IJ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function MJ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function NJ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function DJ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],IJ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],MJ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],NJ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function nI(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>DJ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function LJ(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function FJ(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function OJ(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],FJ(t)),e}function $J(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function UJ(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],$J(t)),e}function BJ(){return{}}function VJ(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>LJ(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],OJ(s));const r=h(n,["googleSearchRetrieval"]);if(r!=null&&p(e,["googleSearchRetrieval"],UJ(r)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],BJ());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function jJ(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&p(e,["allowedFunctionNames"],s),e}function zJ(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&p(e,["longitude"],s),e}function HJ(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],zJ(t));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function GJ(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],jJ(t));const s=h(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],HJ(s)),e}function qJ(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const i=h(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let u=sr(o);Array.isArray(u)&&(u=u.map(f=>nI(f))),p(e,["contents"],u)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],nI(An(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>VJ(f))),p(e,["tools"],u)}const c=h(n,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],GJ(c)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function WJ(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["model"],_O(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],qJ(r,t)),t}function KJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function YJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function JJ(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function XJ(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],JJ(r,t)),t}function QJ(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function ZJ(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],QJ(t,e)),e}function eX(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function tX(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["data"]);s!=null&&p(e,["data"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function nX(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&p(e,["fileUri"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function sX(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],eX(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],tX(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],nX(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function sI(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>sX(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function rX(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const r=h(n,["parameters"]);r!=null&&p(e,["parameters"],r);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function iX(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function oX(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],iX(t)),e}function aX(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function lX(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],aX(t)),e}function cX(){return{}}function uX(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function dX(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],uX(t));const s=h(n,["authType"]);s!=null&&p(e,["authType"],s);const r=h(n,["googleServiceAccountConfig"]);r!=null&&p(e,["googleServiceAccountConfig"],r);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function hX(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],dX(t)),e}function fX(){return{}}function pX(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>rX(m))),p(e,["functionDeclarations"],f)}const s=h(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],oX(r));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],lX(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],cX());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],hX(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],fX());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function mX(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&p(e,["allowedFunctionNames"],s),e}function gX(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&p(e,["longitude"],s),e}function yX(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],gX(t));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function vX(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],mX(t));const s=h(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],yX(s)),e}function wX(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const i=h(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let f=sr(o);Array.isArray(f)&&(f=f.map(m=>sI(m))),p(e,["contents"],f)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],sI(An(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>pX(m))),p(e,["tools"],f)}const c=h(n,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],vX(c));const u=h(n,["kmsKeyName"]);return e!==void 0&&u!=null&&p(e,["encryption_spec","kmsKeyName"],u),t}function xX(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["model"],_O(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],wX(r,t)),t}function _X(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function CX(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function SX(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function bX(n,e){const t={},s=h(e,["name"]);s!=null&&p(t,["_url","name"],Jo(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],SX(r,t)),t}function EX(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function TX(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],EX(t,e)),e}function Zv(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["model"]);r!=null&&p(e,["model"],r);const i=h(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["updateTime"]);o!=null&&p(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&p(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function AX(){return{}}function RX(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>Zv(i))),p(e,["cachedContents"],r)}return e}function e0(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["model"]);r!=null&&p(e,["model"],r);const i=h(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["updateTime"]);o!=null&&p(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&p(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function kX(){return{}}function PX(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>e0(i))),p(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IX extends Qu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $y(Uu.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=xX(this.apiClient,e);return a=de("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>e0(u))}else{const c=WJ(this.apiClient,e);return a=de("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Zv(u))}}async get(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_X(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>e0(u))}else{const c=KJ(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Zv(u))}}async delete(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=CX(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=kX(),f=new YP;return Object.assign(f,u),f})}else{const c=YJ(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=AX(),f=new YP;return Object.assign(f,u),f})}}async update(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bX(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>e0(u))}else{const c=XJ(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Zv(u))}}async listInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=TX(e);return a=de("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=PX(u),m=new JP;return Object.assign(m,f),m})}else{const c=ZJ(e);return a=de("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=RX(u),m=new JP;return Object.assign(m,f),m})}}}function rI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n){return this instanceof lt?(this.v=n,this):new lt(n)}function Qd(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(w){return Promise.resolve(w).then(g,f)}}function a(g,w){s[g]&&(r[g]=function(v){return new Promise(function(_,x){i.push([g,v,_,x])>1||l(g,v)})},w&&(r[g]=w(r[g])))}function l(g,w){try{c(s[g](w))}catch(v){m(i[0][3],v)}}function c(g){g.value instanceof lt?Promise.resolve(g.value.v).then(u,f):m(i[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,w){g(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function cm(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof rI=="function"?rI(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=n[i]&&function(o){return new Promise(function(a,l){o=n[i](o),r(a,l,o.done,o.value)})}}function r(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MX(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:OO(t)}function OO(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function NX(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iI(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let i=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),i&&!OO(n[s])&&(i=!1),s++;i?e.push(...r):e.pop()}return e}class DX{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new LX(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class LX{constructor(e,t,s,r={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),NX(i)}async sendMessage(e){var t;await this.sendPromise;const s=An(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await r,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(s,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=An(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,s)}getHistory(e=!1){const t=e?iI(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return Qd(this,arguments,function*(){var o,a,l,c;const u=[];try{for(var f=!0,m=cm(e),g;g=yield lt(m.next()),o=g.done,!o;f=!0){c=g.value,f=!1;const w=c;if(MX(w)){const v=(r=(s=w.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;v!==void 0&&u.push(v)}yield yield lt(w)}}catch(w){a={error:w}}finally{try{!f&&!o&&(l=m.return)&&(yield lt(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,u)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(i=>i.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...iI(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jx extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jx.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FX(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function OX(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],FX(t,e)),e}function $X(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const s=h(n,["message"]);s!=null&&p(e,["message"],s);const r=h(n,["code"]);return r!=null&&p(e,["code"],r),e}function UX(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["mimeType"]);r!=null&&p(e,["mimeType"],r);const i=h(n,["sizeBytes"]);i!=null&&p(e,["sizeBytes"],i);const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&p(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&p(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&p(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&p(e,["uri"],u);const f=h(n,["downloadUri"]);f!=null&&p(e,["downloadUri"],f);const m=h(n,["state"]);m!=null&&p(e,["state"],m);const g=h(n,["source"]);g!=null&&p(e,["source"],g);const w=h(n,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&p(e,["error"],$X(v)),e}function BX(n){const e={},t=h(n,["file"]);t!=null&&p(e,["file"],UX(t));const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function VX(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","file"],RO(t));const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function jX(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","file"],RO(t));const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function zX(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const s=h(n,["message"]);s!=null&&p(e,["message"],s);const r=h(n,["code"]);return r!=null&&p(e,["code"],r),e}function cb(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["mimeType"]);r!=null&&p(e,["mimeType"],r);const i=h(n,["sizeBytes"]);i!=null&&p(e,["sizeBytes"],i);const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&p(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&p(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&p(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&p(e,["uri"],u);const f=h(n,["downloadUri"]);f!=null&&p(e,["downloadUri"],f);const m=h(n,["state"]);m!=null&&p(e,["state"],m);const g=h(n,["source"]);g!=null&&p(e,["source"],g);const w=h(n,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&p(e,["error"],zX(v)),e}function HX(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>cb(i))),p(e,["files"],r)}return e}function GX(){return{}}function qX(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WX extends Qu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $y(Uu.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>cb(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OX(e);return i=de("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=HX(l),u=new oY;return Object.assign(u,c),u})}}async createInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BX(e);return i=de("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(()=>{const l=GX(),c=new aY;return Object.assign(c,l),c})}}async get(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VX(e);return i=de("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>cb(l))}}async delete(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jX(e);return i=de("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(()=>{const l=qX(),c=new lY;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KX(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function YX(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function $O(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],KX(t)),e}function JX(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],YX(t)),e}function XX(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&p(e,["voiceConfig"],$O(s)),e}function QX(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>XX(r))),p(e,["speakerVoiceConfigs"],s)}return e}function ZX(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],$O(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&p(e,["multiSpeakerVoiceConfig"],QX(s));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function eQ(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&p(e,["voiceConfig"],JX(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function tQ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function nQ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function sQ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function rQ(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["data"]);s!=null&&p(e,["data"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function iQ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function oQ(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&p(e,["fileUri"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function aQ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],tQ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],sQ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],iQ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function lQ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],nQ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],rQ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],oQ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function cQ(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>aQ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function uQ(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>lQ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function dQ(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function hQ(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const r=h(n,["parameters"]);r!=null&&p(e,["parameters"],r);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function fQ(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function pQ(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function mQ(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],fQ(t)),e}function gQ(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],pQ(t)),e}function yQ(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function vQ(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function wQ(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],yQ(t)),e}function xQ(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],vQ(t)),e}function _Q(){return{}}function CQ(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function SQ(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],CQ(t));const s=h(n,["authType"]);s!=null&&p(e,["authType"],s);const r=h(n,["googleServiceAccountConfig"]);r!=null&&p(e,["googleServiceAccountConfig"],r);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function bQ(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],SQ(t)),e}function EQ(){return{}}function TQ(){return{}}function AQ(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>dQ(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],mQ(s));const r=h(n,["googleSearchRetrieval"]);if(r!=null&&p(e,["googleSearchRetrieval"],wQ(r)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],EQ());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function RQ(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>hQ(m))),p(e,["functionDeclarations"],f)}const s=h(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],gQ(r));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],xQ(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],_Q());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],bQ(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],TQ());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function kQ(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PQ(n){const e={},t=h(n,["handle"]);t!=null&&p(e,["handle"],t);const s=h(n,["transparent"]);return s!=null&&p(e,["transparent"],s),e}function oI(){return{}}function aI(){return{}}function IQ(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&p(e,["startOfSpeechSensitivity"],s);const r=h(n,["endOfSpeechSensitivity"]);r!=null&&p(e,["endOfSpeechSensitivity"],r);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function MQ(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&p(e,["startOfSpeechSensitivity"],s);const r=h(n,["endOfSpeechSensitivity"]);r!=null&&p(e,["endOfSpeechSensitivity"],r);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function NQ(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],IQ(t));const s=h(n,["activityHandling"]);s!=null&&p(e,["activityHandling"],s);const r=h(n,["turnCoverage"]);return r!=null&&p(e,["turnCoverage"],r),e}function DQ(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],MQ(t));const s=h(n,["activityHandling"]);s!=null&&p(e,["activityHandling"],s);const r=h(n,["turnCoverage"]);return r!=null&&p(e,["turnCoverage"],r),e}function LQ(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function FQ(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function OQ(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&p(e,["slidingWindow"],LQ(s)),e}function $Q(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&p(e,["slidingWindow"],FQ(s)),e}function UQ(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function BQ(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function VQ(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],ZX($A(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&p(e,["setup","systemInstruction"],cQ(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let R=Jf(w);Array.isArray(R)&&(R=R.map(P=>AQ(Yf(P)))),p(e,["setup","tools"],R)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],kQ(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","inputAudioTranscription"],oI());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],oI());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],NQ(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],OQ(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],UQ(T)),t}function jQ(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],eQ($A(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&p(e,["setup","systemInstruction"],uQ(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let R=Jf(w);Array.isArray(R)&&(R=R.map(P=>RQ(Yf(P)))),p(e,["setup","tools"],R)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],PQ(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","inputAudioTranscription"],aI());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],aI());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],DQ(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],$Q(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],BQ(T)),t}function zQ(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["setup","model"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],VQ(r,t)),t}function HQ(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["setup","model"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],jQ(r,t)),t}function GQ(){return{}}function qQ(){return{}}function WQ(){return{}}function KQ(){return{}}function YQ(n){const e={},t=h(n,["media"]);t!=null&&p(e,["mediaChunks"],CO(t));const s=h(n,["audio"]);s!=null&&p(e,["audio"],bO(s));const r=h(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const i=h(n,["video"]);i!=null&&p(e,["video"],SO(i));const o=h(n,["text"]);return o!=null&&p(e,["text"],o),h(n,["activityStart"])!=null&&p(e,["activityStart"],GQ()),h(n,["activityEnd"])!=null&&p(e,["activityEnd"],WQ()),e}function JQ(n){const e={},t=h(n,["media"]);t!=null&&p(e,["mediaChunks"],CO(t));const s=h(n,["audio"]);s!=null&&p(e,["audio"],bO(s));const r=h(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const i=h(n,["video"]);i!=null&&p(e,["video"],SO(i));const o=h(n,["text"]);return o!=null&&p(e,["text"],o),h(n,["activityStart"])!=null&&p(e,["activityStart"],qQ()),h(n,["activityEnd"])!=null&&p(e,["activityEnd"],KQ()),e}function UO(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const s=h(n,["weight"]);return s!=null&&p(e,["weight"],s),e}function XQ(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>UO(r))),p(e,["weightedPrompts"],s)}return e}function BO(n){const e={},t=h(n,["temperature"]);t!=null&&p(e,["temperature"],t);const s=h(n,["topK"]);s!=null&&p(e,["topK"],s);const r=h(n,["seed"]);r!=null&&p(e,["seed"],r);const i=h(n,["guidance"]);i!=null&&p(e,["guidance"],i);const o=h(n,["bpm"]);o!=null&&p(e,["bpm"],o);const a=h(n,["density"]);a!=null&&p(e,["density"],a);const l=h(n,["brightness"]);l!=null&&p(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&p(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&p(e,["muteBass"],u);const f=h(n,["muteDrums"]);f!=null&&p(e,["muteDrums"],f);const m=h(n,["onlyBassAndDrums"]);return m!=null&&p(e,["onlyBassAndDrums"],m),e}function QQ(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],BO(t)),e}function VO(n){const e={},t=h(n,["model"]);return t!=null&&p(e,["model"],t),e}function jO(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>UO(r))),p(e,["weightedPrompts"],s)}return e}function ub(n){const e={},t=h(n,["setup"]);t!=null&&p(e,["setup"],VO(t));const s=h(n,["clientContent"]);s!=null&&p(e,["clientContent"],jO(s));const r=h(n,["musicGenerationConfig"]);r!=null&&p(e,["musicGenerationConfig"],BO(r));const i=h(n,["playbackControl"]);return i!=null&&p(e,["playbackControl"],i),e}function ZQ(){return{}}function eZ(n){const e={},t=h(n,["sessionId"]);return t!=null&&p(e,["sessionId"],t),e}function tZ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function nZ(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function sZ(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function rZ(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["data"]);s!=null&&p(e,["data"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function iZ(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function oZ(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&p(e,["fileUri"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function aZ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],tZ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],sZ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],iZ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function lZ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],nZ(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],rZ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],oZ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function cZ(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>aZ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function uZ(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>lZ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function lI(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const s=h(n,["finished"]);return s!=null&&p(e,["finished"],s),e}function cI(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const s=h(n,["finished"]);return s!=null&&p(e,["finished"],s),e}function dZ(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&p(e,["urlRetrievalStatus"],s),e}function hZ(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>dZ(r))),p(e,["urlMetadata"],s)}return e}function fZ(n){const e={},t=h(n,["modelTurn"]);t!=null&&p(e,["modelTurn"],cZ(t));const s=h(n,["turnComplete"]);s!=null&&p(e,["turnComplete"],s);const r=h(n,["interrupted"]);r!=null&&p(e,["interrupted"],r);const i=h(n,["groundingMetadata"]);i!=null&&p(e,["groundingMetadata"],i);const o=h(n,["generationComplete"]);o!=null&&p(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&p(e,["inputTranscription"],lI(a));const l=h(n,["outputTranscription"]);l!=null&&p(e,["outputTranscription"],lI(l));const c=h(n,["urlContextMetadata"]);return c!=null&&p(e,["urlContextMetadata"],hZ(c)),e}function pZ(n){const e={},t=h(n,["modelTurn"]);t!=null&&p(e,["modelTurn"],uZ(t));const s=h(n,["turnComplete"]);s!=null&&p(e,["turnComplete"],s);const r=h(n,["interrupted"]);r!=null&&p(e,["interrupted"],r);const i=h(n,["groundingMetadata"]);i!=null&&p(e,["groundingMetadata"],i);const o=h(n,["generationComplete"]);o!=null&&p(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&p(e,["inputTranscription"],cI(a));const l=h(n,["outputTranscription"]);return l!=null&&p(e,["outputTranscription"],cI(l)),e}function mZ(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const s=h(n,["args"]);s!=null&&p(e,["args"],s);const r=h(n,["name"]);return r!=null&&p(e,["name"],r),e}function gZ(n){const e={},t=h(n,["args"]);t!=null&&p(e,["args"],t);const s=h(n,["name"]);return s!=null&&p(e,["name"],s),e}function yZ(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>mZ(r))),p(e,["functionCalls"],s)}return e}function vZ(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>gZ(r))),p(e,["functionCalls"],s)}return e}function wZ(n){const e={},t=h(n,["ids"]);return t!=null&&p(e,["ids"],t),e}function xZ(n){const e={},t=h(n,["ids"]);return t!=null&&p(e,["ids"],t),e}function bv(n){const e={},t=h(n,["modality"]);t!=null&&p(e,["modality"],t);const s=h(n,["tokenCount"]);return s!=null&&p(e,["tokenCount"],s),e}function Ev(n){const e={},t=h(n,["modality"]);t!=null&&p(e,["modality"],t);const s=h(n,["tokenCount"]);return s!=null&&p(e,["tokenCount"],s),e}function _Z(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=h(n,["responseTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const i=h(n,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(n,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>bv(g))),p(e,["promptTokensDetails"],m)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>bv(g))),p(e,["cacheTokensDetails"],m)}const u=h(n,["responseTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>bv(g))),p(e,["responseTokensDetails"],m)}const f=h(n,["toolUsePromptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>bv(g))),p(e,["toolUsePromptTokensDetails"],m)}return e}function CZ(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=h(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const i=h(n,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(n,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(w=>Ev(w))),p(e,["promptTokensDetails"],g)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>Ev(w))),p(e,["cacheTokensDetails"],g)}const u=h(n,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(w=>Ev(w))),p(e,["responseTokensDetails"],g)}const f=h(n,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(w=>Ev(w))),p(e,["toolUsePromptTokensDetails"],g)}const m=h(n,["trafficType"]);return m!=null&&p(e,["trafficType"],m),e}function SZ(n){const e={},t=h(n,["timeLeft"]);return t!=null&&p(e,["timeLeft"],t),e}function bZ(n){const e={},t=h(n,["timeLeft"]);return t!=null&&p(e,["timeLeft"],t),e}function EZ(n){const e={},t=h(n,["newHandle"]);t!=null&&p(e,["newHandle"],t);const s=h(n,["resumable"]);s!=null&&p(e,["resumable"],s);const r=h(n,["lastConsumedClientMessageIndex"]);return r!=null&&p(e,["lastConsumedClientMessageIndex"],r),e}function TZ(n){const e={},t=h(n,["newHandle"]);t!=null&&p(e,["newHandle"],t);const s=h(n,["resumable"]);s!=null&&p(e,["resumable"],s);const r=h(n,["lastConsumedClientMessageIndex"]);return r!=null&&p(e,["lastConsumedClientMessageIndex"],r),e}function AZ(n){const e={};h(n,["setupComplete"])!=null&&p(e,["setupComplete"],ZQ());const s=h(n,["serverContent"]);s!=null&&p(e,["serverContent"],fZ(s));const r=h(n,["toolCall"]);r!=null&&p(e,["toolCall"],yZ(r));const i=h(n,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],wZ(i));const o=h(n,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],_Z(o));const a=h(n,["goAway"]);a!=null&&p(e,["goAway"],SZ(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&p(e,["sessionResumptionUpdate"],EZ(l)),e}function RZ(n){const e={},t=h(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],eZ(t));const s=h(n,["serverContent"]);s!=null&&p(e,["serverContent"],pZ(s));const r=h(n,["toolCall"]);r!=null&&p(e,["toolCall"],vZ(r));const i=h(n,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],xZ(i));const o=h(n,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],CZ(o));const a=h(n,["goAway"]);a!=null&&p(e,["goAway"],bZ(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&p(e,["sessionResumptionUpdate"],TZ(l)),e}function kZ(){return{}}function PZ(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const s=h(n,["weight"]);return s!=null&&p(e,["weight"],s),e}function IZ(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>PZ(r))),p(e,["weightedPrompts"],s)}return e}function MZ(n){const e={},t=h(n,["temperature"]);t!=null&&p(e,["temperature"],t);const s=h(n,["topK"]);s!=null&&p(e,["topK"],s);const r=h(n,["seed"]);r!=null&&p(e,["seed"],r);const i=h(n,["guidance"]);i!=null&&p(e,["guidance"],i);const o=h(n,["bpm"]);o!=null&&p(e,["bpm"],o);const a=h(n,["density"]);a!=null&&p(e,["density"],a);const l=h(n,["brightness"]);l!=null&&p(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&p(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&p(e,["muteBass"],u);const f=h(n,["muteDrums"]);f!=null&&p(e,["muteDrums"],f);const m=h(n,["onlyBassAndDrums"]);return m!=null&&p(e,["onlyBassAndDrums"],m),e}function NZ(n){const e={},t=h(n,["clientContent"]);t!=null&&p(e,["clientContent"],IZ(t));const s=h(n,["musicGenerationConfig"]);return s!=null&&p(e,["musicGenerationConfig"],MZ(s)),e}function DZ(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);s!=null&&p(e,["mimeType"],s);const r=h(n,["sourceMetadata"]);return r!=null&&p(e,["sourceMetadata"],NZ(r)),e}function LZ(n){const e={},t=h(n,["audioChunks"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>DZ(r))),p(e,["audioChunks"],s)}return e}function FZ(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const s=h(n,["filteredReason"]);return s!=null&&p(e,["filteredReason"],s),e}function OZ(n){const e={};h(n,["setupComplete"])!=null&&p(e,["setupComplete"],kZ());const s=h(n,["serverContent"]);s!=null&&p(e,["serverContent"],LZ(s));const r=h(n,["filteredPrompt"]);return r!=null&&p(e,["filteredPrompt"],FZ(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $Z(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function UZ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function BZ(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function VZ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],$Z(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],UZ(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],BZ(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function Xx(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>VZ(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function jZ(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&p(e,["default"],s);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&p(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&p(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&p(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&p(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const R=h(n,["required"]);R!=null&&p(e,["required"],R);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const I=h(n,["type"]);return I!=null&&p(e,["type"],I),e}function zZ(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&p(e,["category"],t);const s=h(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function HZ(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function GZ(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function qZ(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],GZ(t)),e}function WZ(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function KZ(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],WZ(t)),e}function YZ(){return{}}function JZ(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>HZ(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],qZ(s));const r=h(n,["googleSearchRetrieval"]);if(r!=null&&p(e,["googleSearchRetrieval"],KZ(r)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],YZ());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function XZ(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&p(e,["allowedFunctionNames"],s),e}function QZ(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&p(e,["longitude"],s),e}function ZZ(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],QZ(t));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function eee(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],XZ(t));const s=h(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],ZZ(s)),e}function tee(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function zO(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],tee(t)),e}function nee(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&p(e,["voiceConfig"],zO(s)),e}function see(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>nee(r))),p(e,["speakerVoiceConfigs"],s)}return e}function ree(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],zO(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&p(e,["multiSpeakerVoiceConfig"],see(s));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function iee(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&p(e,["thinkingBudget"],s),e}function oee(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Xx(An(r)));const i=h(e,["temperature"]);i!=null&&p(s,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(s,["topP"],o);const a=h(e,["topK"]);a!=null&&p(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(s,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(s,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&p(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&p(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],jZ(Fm(x)));const S=h(e,["responseJsonSchema"]);if(S!=null&&p(s,["responseJsonSchema"],S),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(t!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(V=>zZ(V))),p(t,["safetySettings"],D)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let D=Jf(T);Array.isArray(D)&&(D=D.map(V=>JZ(Yf(V)))),p(t,["tools"],D)}const R=h(e,["toolConfig"]);if(t!==void 0&&R!=null&&p(t,["toolConfig"],eee(R)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&p(t,["cachedContent"],Jo(n,P));const I=h(e,["responseModalities"]);I!=null&&p(s,["responseModalities"],I);const M=h(e,["mediaResolution"]);M!=null&&p(s,["mediaResolution"],M);const N=h(e,["speechConfig"]);if(N!=null&&p(s,["speechConfig"],ree(OA(N))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=h(e,["thinkingConfig"]);return L!=null&&p(s,["thinkingConfig"],iee(L)),s}function uI(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>Xx(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["generationConfig"],oee(n,i,t)),t}function aee(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const i=h(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function lee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);r!=null&&p(t,["requests[]","content"],TO(n,r));const i=h(e,["config"]);i!=null&&p(t,["config"],aee(i,t));const o=h(e,["model"]);return o!==void 0&&p(t,["requests[]","model"],Je(n,o)),t}function cee(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=h(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const i=h(n,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=h(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const u=h(n,["language"]);e!==void 0&&u!=null&&p(e,["parameters","language"],u);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const m=h(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function uee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["config"]);return i!=null&&p(t,["config"],cee(i,t)),t}function dee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","name"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function hee(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);t!==void 0&&o!=null&&p(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],kO(n,a)),s}function fee(n,e){const t={},s=h(e,["config"]);return s!=null&&p(t,["config"],hee(n,s,t)),t}function pee(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const i=h(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),t}function mee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","name"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],pee(r,t)),t}function gee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","name"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function yee(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function vee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>Xx(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],yee(i)),t}function wee(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Xo(t));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function xee(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=h(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(n,["aspectRatio"]);if(e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i),h(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=h(n,["personGeneration"]);if(e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const l=h(n,["enhancePrompt"]);if(e!==void 0&&l!=null&&p(e,["parameters","enhancePrompt"],l),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function _ee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["image"]);if(i!=null&&p(t,["instances[0]","image"],wee(i)),h(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=h(e,["config"]);return o!=null&&p(t,["config"],xee(o,t)),t}function Cee(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function See(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["data"]);s!=null&&p(e,["data"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function bee(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&p(e,["fileUri"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Eee(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Cee(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],See(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],bee(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function Qf(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Eee(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function Tee(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&p(e,["default"],s);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&p(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&p(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&p(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&p(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const R=h(n,["required"]);R!=null&&p(e,["required"],R);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const I=h(n,["type"]);return I!=null&&p(e,["type"],I),e}function Aee(n){const e={},t=h(n,["featureSelectionPreference"]);return t!=null&&p(e,["featureSelectionPreference"],t),e}function Ree(n){const e={},t=h(n,["method"]);t!=null&&p(e,["method"],t);const s=h(n,["category"]);s!=null&&p(e,["category"],s);const r=h(n,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function kee(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const r=h(n,["parameters"]);r!=null&&p(e,["parameters"],r);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function Pee(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function Iee(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],Pee(t)),e}function Mee(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function Nee(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],Mee(t)),e}function Dee(){return{}}function Lee(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function Fee(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],Lee(t));const s=h(n,["authType"]);s!=null&&p(e,["authType"],s);const r=h(n,["googleServiceAccountConfig"]);r!=null&&p(e,["googleServiceAccountConfig"],r);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function Oee(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],Fee(t)),e}function $ee(){return{}}function HO(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>kee(m))),p(e,["functionDeclarations"],f)}const s=h(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],Iee(r));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],Nee(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],Dee());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],Oee(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],$ee());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function Uee(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&p(e,["allowedFunctionNames"],s),e}function Bee(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&p(e,["longitude"],s),e}function Vee(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],Bee(t));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function jee(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Uee(t));const s=h(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],Vee(s)),e}function zee(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function Hee(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],zee(t)),e}function Gee(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&p(e,["voiceConfig"],Hee(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function qee(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&p(e,["thinkingBudget"],s),e}function Wee(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Qf(An(r)));const i=h(e,["temperature"]);i!=null&&p(s,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(s,["topP"],o);const a=h(e,["topK"]);a!=null&&p(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(s,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(s,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&p(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&p(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],Tee(Fm(x)));const S=h(e,["responseJsonSchema"]);S!=null&&p(s,["responseJsonSchema"],S);const C=h(e,["routingConfig"]);C!=null&&p(s,["routingConfig"],C);const T=h(e,["modelSelectionConfig"]);T!=null&&p(s,["modelConfig"],Aee(T));const R=h(e,["safetySettings"]);if(t!==void 0&&R!=null){let j=R;Array.isArray(j)&&(j=j.map(O=>Ree(O))),p(t,["safetySettings"],j)}const P=h(e,["tools"]);if(t!==void 0&&P!=null){let j=Jf(P);Array.isArray(j)&&(j=j.map(O=>HO(Yf(O)))),p(t,["tools"],j)}const I=h(e,["toolConfig"]);t!==void 0&&I!=null&&p(t,["toolConfig"],jee(I));const M=h(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const N=h(e,["cachedContent"]);t!==void 0&&N!=null&&p(t,["cachedContent"],Jo(n,N));const L=h(e,["responseModalities"]);L!=null&&p(s,["responseModalities"],L);const D=h(e,["mediaResolution"]);D!=null&&p(s,["mediaResolution"],D);const V=h(e,["speechConfig"]);V!=null&&p(s,["speechConfig"],Gee(OA(V)));const G=h(e,["audioTimestamp"]);G!=null&&p(s,["audioTimestamp"],G);const B=h(e,["thinkingConfig"]);return B!=null&&p(s,["thinkingConfig"],qee(B)),s}function dI(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>Qf(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["generationConfig"],Wee(n,i,t)),t}function Kee(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const i=h(n,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(n,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(n,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),t}function Yee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);r!=null&&p(t,["instances[]","content"],TO(n,r));const i=h(e,["config"]);return i!=null&&p(t,["config"],Kee(i,t)),t}function Jee(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const g=h(n,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const _=h(n,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const x=h(n,["enhancePrompt"]);return e!==void 0&&x!=null&&p(e,["parameters","enhancePrompt"],x),t}function Xee(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["config"]);return i!=null&&p(t,["config"],Jee(i,t)),t}function Qx(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],Xo(s));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Qee(n){const e={},t=h(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const r=h(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Zee(n){const e={},t=h(n,["controlType"]);t!=null&&p(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function ete(n){const e={},t=h(n,["styleDescription"]);return t!=null&&p(e,["styleDescription"],t),e}function tte(n){const e={},t=h(n,["subjectType"]);t!=null&&p(e,["subjectType"],t);const s=h(n,["subjectDescription"]);return s!=null&&p(e,["subjectDescription"],s),e}function nte(n){const e={},t=h(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Qx(t));const s=h(n,["referenceId"]);s!=null&&p(e,["referenceId"],s);const r=h(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const i=h(n,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],Qee(i));const o=h(n,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],Zee(o));const a=h(n,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],ete(a));const l=h(n,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],tte(l)),e}function ste(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const g=h(n,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const _=h(n,["editMode"]);e!==void 0&&_!=null&&p(e,["parameters","editMode"],_);const x=h(n,["baseSteps"]);return e!==void 0&&x!=null&&p(e,["parameters","editConfig","baseSteps"],x),t}function rte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>nte(l))),p(t,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&p(t,["config"],ste(o,t)),t}function ite(n,e){const t={},s=h(n,["includeRaiReason"]);e!==void 0&&s!=null&&p(e,["parameters","includeRaiReason"],s);const r=h(n,["outputMimeType"]);e!==void 0&&r!=null&&p(e,["parameters","outputOptions","mimeType"],r);const i=h(n,["outputCompressionQuality"]);e!==void 0&&i!=null&&p(e,["parameters","outputOptions","compressionQuality"],i);const o=h(n,["enhanceInputImage"]);e!==void 0&&o!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=h(n,["imagePreservationFactor"]);e!==void 0&&a!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=h(n,["mode"]);return e!==void 0&&c!=null&&p(e,["parameters","mode"],c),t}function ote(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["image"]);r!=null&&p(t,["instances[0]","image"],Qx(r));const i=h(e,["upscaleFactor"]);i!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&p(t,["config"],ite(o,t)),t}function ate(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","name"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function lte(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);t!==void 0&&o!=null&&p(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],kO(n,a)),s}function cte(n,e){const t={},s=h(e,["config"]);return s!=null&&p(t,["config"],lte(n,s,t)),t}function ute(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const i=h(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),t}function dte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],ute(r,t)),t}function hte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","name"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function fte(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Qf(An(s)));const r=h(n,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>HO(a))),p(e,["tools"],o)}const i=h(n,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],i),t}function pte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>Qf(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],fte(i,t)),t}function mte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["contents"]);if(r!=null){let o=sr(r);Array.isArray(o)&&(o=o.map(a=>Qf(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],i),t}function gte(n){const e={},t=h(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],Xo(s));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function yte(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=h(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=h(n,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(n,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(n,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=h(n,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["pubsubTopic"]);e!==void 0&&f!=null&&p(e,["parameters","pubsubTopic"],f);const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const g=h(n,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const w=h(n,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],Qx(v));const _=h(n,["compressionQuality"]);return e!==void 0&&_!=null&&p(e,["parameters","compressionQuality"],_),t}function vte(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["_url","model"],Je(n,s));const r=h(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["image"]);i!=null&&p(t,["instances[0]","image"],Qx(i));const o=h(e,["video"]);o!=null&&p(t,["instances[0]","video"],gte(o));const a=h(e,["config"]);return a!=null&&p(t,["config"],yte(a,t)),t}function wte(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function xte(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function _te(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Cte(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],wte(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],xte(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],_te(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function Ste(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Cte(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function bte(n){const e={},t=h(n,["citationSources"]);return t!=null&&p(e,["citations"],t),e}function Ete(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&p(e,["urlRetrievalStatus"],s),e}function Tte(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Ete(r))),p(e,["urlMetadata"],s)}return e}function Ate(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],Ste(t));const s=h(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],bte(s));const r=h(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],Tte(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function hI(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Ate(a))),p(e,["candidates"],o)}const s=h(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const r=h(n,["promptFeedback"]);r!=null&&p(e,["promptFeedback"],r);const i=h(n,["usageMetadata"]);return i!=null&&p(e,["usageMetadata"],i),e}function Rte(n){const e={},t=h(n,["values"]);return t!=null&&p(e,["values"],t),e}function kte(){return{}}function Pte(n){const e={},t=h(n,["embeddings"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Rte(i))),p(e,["embeddings"],r)}return h(n,["metadata"])!=null&&p(e,["metadata"],kte()),e}function Ite(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Xo(t));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function GO(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function Mte(n){const e={},t=h(n,["_self"]);t!=null&&p(e,["image"],Ite(t));const s=h(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=h(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],GO(r)),e}function Nte(n){const e={},t=h(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Mte(i))),p(e,["generatedImages"],r)}const s=h(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],GO(s)),e}function Dte(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function db(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const i=h(n,["version"]);i!=null&&p(e,["version"],i);const o=h(n,["_self"]);o!=null&&p(e,["tunedModelInfo"],Dte(o));const a=h(n,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=h(n,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=h(n,["supportedGenerationMethods"]);return c!=null&&p(e,["supportedActions"],c),e}function Lte(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["_self"]);if(s!=null){let r=PO(s);Array.isArray(r)&&(r=r.map(i=>db(i))),p(e,["models"],r)}return e}function Fte(){return{}}function Ote(n){const e={},t=h(n,["totalTokens"]);t!=null&&p(e,["totalTokens"],t);const s=h(n,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function $te(n){const e={},t=h(n,["video","uri"]);t!=null&&p(e,["uri"],t);const s=h(n,["video","encodedVideo"]);s!=null&&p(e,["videoBytes"],Xo(s));const r=h(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function Ute(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],$te(t)),e}function Bte(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Ute(o))),p(e,["generatedVideos"],i)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Vte(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Bte(o)),e}function jte(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function zte(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["data"]);s!=null&&p(e,["data"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Hte(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&p(e,["fileUri"],s);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Gte(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],jte(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],zte(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Hte(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function qte(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Gte(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function Wte(n){const e={},t=h(n,["citations"]);return t!=null&&p(e,["citations"],t),e}function Kte(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&p(e,["urlRetrievalStatus"],s),e}function Yte(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Kte(r))),p(e,["urlMetadata"],s)}return e}function Jte(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],qte(t));const s=h(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],Wte(s));const r=h(n,["finishMessage"]);r!=null&&p(e,["finishMessage"],r);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],Yte(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function fI(n){const e={},t=h(n,["candidates"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Jte(c))),p(e,["candidates"],l)}const s=h(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=h(n,["responseId"]);r!=null&&p(e,["responseId"],r);const i=h(n,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(n,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function Xte(n){const e={},t=h(n,["truncated"]);t!=null&&p(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function Qte(n){const e={},t=h(n,["values"]);t!=null&&p(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&p(e,["statistics"],Xte(s)),e}function Zte(n){const e={},t=h(n,["billableCharacterCount"]);return t!=null&&p(e,["billableCharacterCount"],t),e}function ene(n){const e={},t=h(n,["predictions[]","embeddings"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Qte(i))),p(e,["embeddings"],r)}const s=h(n,["metadata"]);return s!=null&&p(e,["metadata"],Zte(s)),e}function tne(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],Xo(s));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qO(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function UA(n){const e={},t=h(n,["_self"]);t!=null&&p(e,["image"],tne(t));const s=h(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=h(n,["_self"]);r!=null&&p(e,["safetyAttributes"],qO(r));const i=h(n,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function nne(n){const e={},t=h(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>UA(i))),p(e,["generatedImages"],r)}const s=h(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],qO(s)),e}function sne(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>UA(r))),p(e,["generatedImages"],s)}return e}function rne(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>UA(r))),p(e,["generatedImages"],s)}return e}function ine(n){const e={},t=h(n,["endpoint"]);t!=null&&p(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function one(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function ane(n){const e={},t=h(n,["checkpointId"]);t!=null&&p(e,["checkpointId"],t);const s=h(n,["epoch"]);s!=null&&p(e,["epoch"],s);const r=h(n,["step"]);return r!=null&&p(e,["step"],r),e}function hb(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const i=h(n,["versionId"]);i!=null&&p(e,["version"],i);const o=h(n,["deployedModels"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>ine(m))),p(e,["endpoints"],f)}const a=h(n,["labels"]);a!=null&&p(e,["labels"],a);const l=h(n,["_self"]);l!=null&&p(e,["tunedModelInfo"],one(l));const c=h(n,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const u=h(n,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>ane(m))),p(e,["checkpoints"],f)}return e}function lne(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["_self"]);if(s!=null){let r=PO(s);Array.isArray(r)&&(r=r.map(i=>hb(i))),p(e,["models"],r)}return e}function cne(){return{}}function une(n){const e={},t=h(n,["totalTokens"]);return t!=null&&p(e,["totalTokens"],t),e}function dne(n){const e={},t=h(n,["tokensInfo"]);return t!=null&&p(e,["tokensInfo"],t),e}function hne(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],Xo(s));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function fne(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],hne(t)),e}function pne(n){const e={},t=h(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>fne(o))),p(e,["generatedVideos"],i)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function mne(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response"]);return o!=null&&p(e,["response"],pne(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gne="Content-Type",yne="X-Server-Timeout",vne="User-Agent",fb="x-goog-api-client",wne="1.8.0",xne=`google-genai-sdk/${wne}`,_ne="v1beta1",Cne="v1beta",pI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Sne{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:_ne,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Cne,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))typeof i=="object"?s[r]=Object.assign(Object.assign({},s[r]),i):i!==void 0&&(s[r]=i);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const r=new AbortController,i=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=i}return t&&t.extraBody!==null&&bne(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await mI(r),new ib(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await mI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Qd(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield lt(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l);try{const f=JSON.parse(c);if("error"in f){const m=JSON.parse(JSON.stringify(f.error)),g=m.status,w=m.code,v=`got status: ${g}. ${JSON.stringify(f)}`;if(w>=400&&w<600)throw new Jx({message:v,status:w})}}catch(f){if(f.name==="ApiError")throw f}o+=c;let u=o.match(pI);for(;u;){const f=u[1];try{const m=new Response(f,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new ib(m)),o=o.slice(u[0].length),u=o.match(pI)}catch(m){throw new Error(`exception parsing stream chunk ${f}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=xne+" "+this.clientOptions.userAgentExtra;return e[vne]=t,e[fb]=t,e[gne]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))t.append(s,r);e.timeout&&e.timeout>0&&t.append(yne,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const a=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const l=await this.fetchUploadUrl(r,t);return i.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},o=await this.request({path:de("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(s=o==null?void 0:o.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function mI(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Jx({message:r,status:t}):new Error(r)}}function bne(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const i=JSON.parse(n.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))t=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=s(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ene="mcp_used/unknown";function WO(n){for(const e of n)if(BA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function KO(n){var e;const t=(e=n[fb])!==null&&e!==void 0?e:"";n[fb]=(t+` ${Ene}`).trimStart()}function Tne(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>BA(r)))!==null&&s!==void 0?s:!1}function Ane(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!BA(r)))!==null&&s!==void 0?s:!1}function BA(n){return n!==null&&typeof n=="object"&&n instanceof VA}function Rne(n,e=100){return Qd(this,arguments,function*(){let s,r=0;for(;r<e;){const i=yield lt(n.listTools({cursor:s}));for(const o of i.tools)yield yield lt(o),r++;if(!i.nextCursor)break;s=i.nextCursor}})}class VA{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new VA(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(t=void 0,cm(Rne(u))),c;c=await l.next(),e=c.done,!e;a=!0){r=c.value,a=!1;const f=r;o.push(f);const m=f.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=u}}catch(f){t={error:f}}finally{try{!a&&!e&&(s=l.return)&&await s.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),_Y(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await r.callTool({name:s.name,arguments:s.args},void 0,i);t.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kne(n,e,t){const s=new uY;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const i=OZ(r);Object.assign(s,i),e(s)}class Pne{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=Nne(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(C=>{c=C}),f=e.callbacks,m=function(){c({})},g=this.apiClient,w={onopen:m,onmessage:C=>{kne(g,f.onmessage,C)},onerror:(t=f==null?void 0:f.onerror)!==null&&t!==void 0?t:function(C){},onclose:(s=f==null?void 0:f.onclose)!==null&&s!==void 0?s:function(C){}},v=this.webSocketFactory.create(l,Mne(o),w);v.connect(),await u;const _=Je(this.apiClient,e.model),x=VO({model:_}),S=ub({setup:x});return v.send(JSON.stringify(S)),new Ine(v,this.apiClient)}}class Ine{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=XQ(e),s=jO(t);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=QQ(e),s=ub(t);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const t=ub({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Od.PLAY)}pause(){this.sendPlaybackControl(Od.PAUSE)}stop(){this.sendPlaybackControl(Od.STOP)}resetContext(){this.sendPlaybackControl(Od.RESET_CONTEXT)}close(){this.conn.close()}}function Mne(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Nne(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dne="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Lne(n,e,t){const s=new cY;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const i=JSON.parse(r);if(n.isVertexAI()){const o=RZ(i);Object.assign(s,o)}else{const o=AZ(i);Object.assign(s,o)}e(s)}class Fne{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new Pne(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,i,o,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&WO(e.config.tools)&&KO(f);const m=Bne(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const N=this.apiClient.getApiKey();let L="BidiGenerateContent",D="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),L="BidiGenerateContentConstrained",D="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${L}?${D}=${N}`}let g=()=>{};const w=new Promise(N=>{g=N}),v=e.callbacks,_=function(){var N;(N=v==null?void 0:v.onopen)===null||N===void 0||N.call(v),g({})},x=this.apiClient,S={onopen:_,onmessage:N=>{Lne(x,v.onmessage,N)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(N){}},C=this.webSocketFactory.create(u,Une(m),S);C.connect(),await w;let T=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const N=this.apiClient.getProject(),L=this.apiClient.getLocation();T=`projects/${N}/locations/${L}/`+T}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sw.AUDIO]}:e.config.responseModalities=[Sw.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],I=[];for(const N of P)if(this.isCallableTool(N)){const L=N;I.push(await L.tool())}else I.push(N);I.length>0&&(e.config.tools=I);const M={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=HQ(this.apiClient,M):R=zQ(this.apiClient,M),delete R.config,C.send(JSON.stringify(R)),new $ne(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const One={turnComplete:!0};class $ne{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=sr(t.turns),e.isVertexAI()?s=s.map(r=>Qf(r)):s=s.map(r=>Xx(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(Dne)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},One),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:JQ(e)}:t={realtimeInput:YQ(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Une(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Bne(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gI=10;function yI(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(t0(o)){r=!0;break}if(!r)return!0;const i=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function t0(n){return"callTool"in n&&typeof n.callTool=="function"}function vI(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vne extends Qu{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,i,o,a;const l=await this.processParamsForMcpUsage(t);if(!Tne(t)||yI(t.config))return await this.generateContentInternal(l);if(Ane(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const f=sr(l.contents),m=(i=(r=(s=l.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:gI;let g=0;for(;g<m&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const w=c.candidates[0].content,v=[];for(const _ of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(t0(_)){const S=await _.callTool(c.functionCalls);v.push(...S)}g++,u={role:"user",parts:v},l.contents=sr(l.contents),l.contents.push(w),l.contents.push(u),vI(l.config)&&(f.push(w),f.push(u))}return vI(l.config)&&(c.automaticFunctionCallingHistory=f),c},this.generateContentStream=async t=>{if(yI(t.config)){const s=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let i;const o=[];if(s!=null&&s.generatedImages)for(const l of s.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i}:a={generatedImages:o},a}),this.list=async t=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new $y(Uu.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var t,s,r;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>t0(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&WO(e.config.tools)){const l=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),KO(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,s,r;const i=new Map;for(const o of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(t0(o)){const a=o,l=await a.tool();for(const c of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var t,s,r;const i=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:gI;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,f){var m,g;return Qd(this,arguments,function*(){for(var w,v,_,x;a<i;){o&&(a++,o=!1);const R=yield lt(c.processParamsForMcpUsage(f)),P=yield lt(c.generateContentStreamInternal(R)),I=[],M=[];try{for(var S=!0,C=(v=void 0,cm(P)),T;T=yield lt(C.next()),w=T.done,!w;S=!0){x=T.value,S=!1;const N=x;if(yield yield lt(N),N.candidates&&(!((m=N.candidates[0])===null||m===void 0)&&m.content)){M.push(N.candidates[0].content);for(const L of(g=N.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<i&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(L.functionCall.name)){const D=yield lt(u.get(L.functionCall.name).callTool([L.functionCall]));I.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(N){v={error:N}}finally{try{!S&&!w&&(_=C.return)&&(yield lt(_.call(C)))}finally{if(v)throw v.error}}if(I.length>0){o=!0;const N=new fp;N.candidates=[{content:{role:"user",parts:I}}],yield yield lt(N);const L=[];L.push(...M),L.push({role:"user",parts:I});const D=sr(f.contents).concat(L);f.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dI(this.apiClient,e);return a=de("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=fI(u),m=new fp;return Object.assign(m,f),m})}else{const c=uI(this.apiClient,e);return a=de("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=hI(u),m=new fp;return Object.assign(m,f),m})}}async generateContentStreamInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dI(this.apiClient,e);return a=de("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(f){return Qd(this,arguments,function*(){var m,g,w,v;try{for(var _=!0,x=cm(f),S;S=yield lt(x.next()),m=S.done,!m;_=!0){v=S.value,_=!1;const T=fI(yield lt(v.json())),R=new fp;Object.assign(R,T),yield yield lt(R)}}catch(C){g={error:C}}finally{try{!_&&!m&&(w=x.return)&&(yield lt(w.call(x)))}finally{if(g)throw g.error}}})})}else{const c=uI(this.apiClient,e);return a=de("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(f){return Qd(this,arguments,function*(){var m,g,w,v;try{for(var _=!0,x=cm(f),S;S=yield lt(x.next()),m=S.done,!m;_=!0){v=S.value,_=!1;const T=hI(yield lt(v.json())),R=new fp;Object.assign(R,T),yield yield lt(R)}}catch(C){g={error:C}}finally{try{!_&&!m&&(w=x.return)&&(yield lt(w.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Yee(this.apiClient,e);return a=de("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=ene(u),m=new zP;return Object.assign(m,f),m})}else{const c=lee(this.apiClient,e);return a=de("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Pte(u),m=new zP;return Object.assign(m,f),m})}}async generateImagesInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xee(this.apiClient,e);return a=de("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=nne(u),m=new HP;return Object.assign(m,f),m})}else{const c=uee(this.apiClient,e);return a=de("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Nte(u),m=new HP;return Object.assign(m,f),m})}}async editImageInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=rte(this.apiClient,e);return i=de("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=sne(l),u=new sY;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=ote(this.apiClient,e);return i=de("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=rne(l),u=new rY;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ate(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>hb(u))}else{const c=dee(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>db(u))}}async listInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cte(this.apiClient,e);return a=de("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=lne(u),m=new GP;return Object.assign(m,f),m})}else{const c=fee(this.apiClient,e);return a=de("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Lte(u),m=new GP;return Object.assign(m,f),m})}}async update(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dte(this.apiClient,e);return a=de("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>hb(u))}else{const c=mee(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>db(u))}}async delete(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hte(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=cne(),f=new qP;return Object.assign(f,u),f})}else{const c=gee(this.apiClient,e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Fte(),f=new qP;return Object.assign(f,u),f})}}async countTokens(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pte(this.apiClient,e);return a=de("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=une(u),m=new WP;return Object.assign(m,f),m})}else{const c=vee(this.apiClient,e);return a=de("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Ote(u),m=new WP;return Object.assign(m,f),m})}}async computeTokens(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=mte(this.apiClient,e);return i=de("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>{const c=dne(l),u=new iY;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vte(this.apiClient,e);return a=de("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>mne(u))}else{const c=_ee(this.apiClient,e);return a=de("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Vte(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jne(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["_url","operationName"],t);const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function zne(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["_url","operationName"],t);const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function Hne(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["operationName"],t);const s=h(n,["resourceName"]);s!=null&&p(e,["_url","resourceName"],s);const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Gne(n){const e={},t=h(n,["video","uri"]);t!=null&&p(e,["uri"],t);const s=h(n,["video","encodedVideo"]);s!=null&&p(e,["videoBytes"],Xo(s));const r=h(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function qne(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],Gne(t)),e}function Wne(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>qne(o))),p(e,["generatedVideos"],i)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Kne(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Wne(o)),e}function Yne(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],Xo(s));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Jne(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],Yne(t)),e}function Xne(n){const e={},t=h(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Jne(o))),p(e,["generatedVideos"],i)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function wI(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response"]);return o!=null&&p(e,["response"],Xne(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qne extends Qu{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let i;return s&&"httpOptions"in s&&(i=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:i}})}else return this.getVideosOperationInternal({operationName:t.name,config:s})}async getVideosOperationInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=zne(e);return a=de("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>wI(u))}else{const c=jne(e);return a=de("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Kne(u))}}async fetchPredictVideosOperationInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=Hne(e);return i=de("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>wI(l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zne(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function YO(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],Zne(t)),e}function ese(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&p(e,["voiceConfig"],YO(s)),e}function tse(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>ese(r))),p(e,["speakerVoiceConfigs"],s)}return e}function nse(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],YO(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&p(e,["multiSpeakerVoiceConfig"],tse(s));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function sse(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&p(e,["endOffset"],s);const r=h(n,["startOffset"]);return r!=null&&p(e,["startOffset"],r),e}function rse(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function ise(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function ose(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],sse(t));const s=h(n,["thought"]);s!=null&&p(e,["thought"],s);const r=h(n,["inlineData"]);r!=null&&p(e,["inlineData"],rse(r));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],ise(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function ase(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>ose(i))),p(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&p(e,["role"],s),e}function lse(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function cse(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&p(e,["endTime"],s),e}function use(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],cse(t)),e}function dse(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&p(e,["dynamicThreshold"],s),e}function hse(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],dse(t)),e}function fse(){return{}}function pse(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>lse(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],use(s));const r=h(n,["googleSearchRetrieval"]);if(r!=null&&p(e,["googleSearchRetrieval"],hse(r)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],fse());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function mse(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xI(){return{}}function gse(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&p(e,["startOfSpeechSensitivity"],s);const r=h(n,["endOfSpeechSensitivity"]);r!=null&&p(e,["endOfSpeechSensitivity"],r);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function yse(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],gse(t));const s=h(n,["activityHandling"]);s!=null&&p(e,["activityHandling"],s);const r=h(n,["turnCoverage"]);return r!=null&&p(e,["turnCoverage"],r),e}function vse(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function wse(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&p(e,["slidingWindow"],vse(s)),e}function xse(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function _se(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],nse($A(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&p(e,["setup","systemInstruction"],ase(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let R=Jf(w);Array.isArray(R)&&(R=R.map(P=>pse(Yf(P)))),p(e,["setup","tools"],R)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],mse(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","inputAudioTranscription"],xI());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],xI());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],yse(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],wse(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],xse(T)),t}function Cse(n,e){const t={},s=h(e,["model"]);s!=null&&p(t,["setup","model"],Je(n,s));const r=h(e,["config"]);return r!=null&&p(t,["config"],_se(r,t)),t}function Sse(n,e,t){const s={},r=h(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const i=h(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&p(t,["newSessionExpireTime"],i);const o=h(e,["uses"]);t!==void 0&&o!=null&&p(t,["uses"],o);const a=h(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&p(t,["bidiGenerateContentSetup"],Cse(n,a));const l=h(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&p(t,["fieldMask"],l),s}function bse(n,e){const t={},s=h(e,["config"]);return s!=null&&p(t,["config"],Sse(n,s,t)),t}function Ese(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tse(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(i=>`${t}.${i}`);e.push(...r)}else e.push(t)}return e.join(",")}function Ase(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const i=Tse(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Rse extends Qu{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=bse(this.apiClient,e);i=de("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Ase(a,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>Ese(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kse(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function Pse(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function Ise(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Pse(t,e)),e}function Mse(n){const e={},t=h(n,["textInput"]);t!=null&&p(e,["textInput"],t);const s=h(n,["output"]);return s!=null&&p(e,["output"],s),e}function Nse(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=h(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Mse(r))),p(e,["examples","examples"],s)}return e}function Dse(n,e){const t={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=h(n,["epochCount"]);e!==void 0&&r!=null&&p(e,["tuningTask","hyperparameters","epochCount"],r);const i=h(n,["learningRateMultiplier"]);if(i!=null&&p(t,["tuningTask","hyperparameters","learningRateMultiplier"],i),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=h(n,["batchSize"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","batchSize"],o);const a=h(n,["learningRate"]);return e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","learningRate"],a),t}function Lse(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=h(n,["trainingDataset"]);s!=null&&p(e,["tuningTask","trainingData"],Nse(s));const r=h(n,["config"]);return r!=null&&p(e,["config"],Dse(r,e)),e}function Fse(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function Ose(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function $se(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Ose(t,e)),e}function Use(n,e){const t={},s=h(n,["gcsUri"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=h(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r),h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Bse(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&p(t,["validationDatasetUri"],s);const r=h(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function Vse(n,e){const t={},s=h(n,["validationDataset"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec"],Bse(s,t));const r=h(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&p(e,["tunedModelDisplayName"],r);const i=h(n,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=h(n,["epochCount"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=h(n,["learningRateMultiplier"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=h(n,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=h(n,["adapterSize"]);if(e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function jse(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=h(n,["trainingDataset"]);s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],Use(s,e));const r=h(n,["config"]);return r!=null&&p(e,["config"],Vse(r,e)),e}function zse(n){const e={},t=h(n,["name"]);t!=null&&p(e,["model"],t);const s=h(n,["name"]);return s!=null&&p(e,["endpoint"],s),e}function JO(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["state"]);s!=null&&p(e,["state"],AO(s));const r=h(n,["createTime"]);r!=null&&p(e,["createTime"],r);const i=h(n,["tuningTask","startTime"]);i!=null&&p(e,["startTime"],i);const o=h(n,["tuningTask","completeTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["description"]);l!=null&&p(e,["description"],l);const c=h(n,["baseModel"]);c!=null&&p(e,["baseModel"],c);const u=h(n,["_self"]);u!=null&&p(e,["tunedModel"],zse(u));const f=h(n,["distillationSpec"]);f!=null&&p(e,["distillationSpec"],f);const m=h(n,["experiment"]);m!=null&&p(e,["experiment"],m);const g=h(n,["labels"]);g!=null&&p(e,["labels"],g);const w=h(n,["pipelineJob"]);w!=null&&p(e,["pipelineJob"],w);const v=h(n,["satisfiesPzi"]);v!=null&&p(e,["satisfiesPzi"],v);const _=h(n,["satisfiesPzs"]);_!=null&&p(e,["satisfiesPzs"],_);const x=h(n,["serviceAccount"]);x!=null&&p(e,["serviceAccount"],x);const S=h(n,["tunedModelDisplayName"]);return S!=null&&p(e,["tunedModelDisplayName"],S),e}function Hse(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>JO(i))),p(e,["tuningJobs"],r)}return e}function Gse(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const i=h(n,["error"]);return i!=null&&p(e,["error"],i),e}function qse(n){const e={},t=h(n,["checkpointId"]);t!=null&&p(e,["checkpointId"],t);const s=h(n,["epoch"]);s!=null&&p(e,["epoch"],s);const r=h(n,["step"]);r!=null&&p(e,["step"],r);const i=h(n,["endpoint"]);return i!=null&&p(e,["endpoint"],i),e}function Wse(n){const e={},t=h(n,["model"]);t!=null&&p(e,["model"],t);const s=h(n,["endpoint"]);s!=null&&p(e,["endpoint"],s);const r=h(n,["checkpoints"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>qse(o))),p(e,["checkpoints"],i)}return e}function pb(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const s=h(n,["state"]);s!=null&&p(e,["state"],AO(s));const r=h(n,["createTime"]);r!=null&&p(e,["createTime"],r);const i=h(n,["startTime"]);i!=null&&p(e,["startTime"],i);const o=h(n,["endTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["error"]);l!=null&&p(e,["error"],l);const c=h(n,["description"]);c!=null&&p(e,["description"],c);const u=h(n,["baseModel"]);u!=null&&p(e,["baseModel"],u);const f=h(n,["tunedModel"]);f!=null&&p(e,["tunedModel"],Wse(f));const m=h(n,["supervisedTuningSpec"]);m!=null&&p(e,["supervisedTuningSpec"],m);const g=h(n,["tuningDataStats"]);g!=null&&p(e,["tuningDataStats"],g);const w=h(n,["encryptionSpec"]);w!=null&&p(e,["encryptionSpec"],w);const v=h(n,["partnerModelTuningSpec"]);v!=null&&p(e,["partnerModelTuningSpec"],v);const _=h(n,["distillationSpec"]);_!=null&&p(e,["distillationSpec"],_);const x=h(n,["experiment"]);x!=null&&p(e,["experiment"],x);const S=h(n,["labels"]);S!=null&&p(e,["labels"],S);const C=h(n,["pipelineJob"]);C!=null&&p(e,["pipelineJob"],C);const T=h(n,["satisfiesPzi"]);T!=null&&p(e,["satisfiesPzi"],T);const R=h(n,["satisfiesPzs"]);R!=null&&p(e,["satisfiesPzs"],R);const P=h(n,["serviceAccount"]);P!=null&&p(e,["serviceAccount"],P);const I=h(n,["tunedModelDisplayName"]);return I!=null&&p(e,["tunedModelDisplayName"],I),e}function Kse(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const s=h(n,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>pb(i))),p(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yse extends Qu{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new $y(Uu.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const s=await this.tuneMldevInternal(t);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:rb.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Fse(e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>pb(u))}else{const c=kse(e);return a=de("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>JO(u))}}async listInternal(e){var t,s,r,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=$se(e);return a=de("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Kse(u),m=new KP;return Object.assign(m,f),m})}else{const c=Ise(e);return a=de("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Hse(u),m=new KP;return Object.assign(m,f),m})}}async tuneInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const a=jse(e);return i=de("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>pb(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Lse(e);return i=de("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),r.then(l=>Gse(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jse{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Xse=1024*1024*8,Qse=3,Zse=1e3,ere=2,hC="x-goog-upload-status";async function tre(n,e,t){var s,r,i;let o=0,a=0,l=new ib(new Response),c="upload";for(o=n.size;a<o;){const f=Math.min(Xse,o-a),m=n.slice(a,a+f);a+f>=o&&(c+=", finalize");let g=0,w=Zse;for(;g<Qse&&(l=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[hC]));)g++,await sre(w),w=w*ere;if(a+=f,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[hC])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[hC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function nre(n){return{size:n.size,type:n.type}}function sre(n){return new Promise(e=>setTimeout(e,n))}class rre{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tre(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nre(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ire{create(e,t,s){return new ore(e,t,s)}}class ore{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _I="x-goog-api-key";class are{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(_I)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_I,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lre="gl-node/";class cre{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=nY(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new are(this.apiKey);this.apiClient=new Sne({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:lre+"web",uploader:new rre,downloader:new Jse}),this.models=new Vne(this.apiClient),this.live=new Fne(this.apiClient,r,new ire),this.batches=new PJ(this.apiClient),this.chats=new DX(this.models,this.apiClient),this.caches=new IX(this.apiClient),this.files=new WX(this.apiClient),this.operations=new Qne(this.apiClient),this.authTokens=new Rse(this.apiClient),this.tunings=new Yse(this.apiClient)}}const ure="AIzaSyCxykzmAuWfh4MMe3K8FliQ8uNcvqoWb2c",XO=new cre({apiKey:ure}),QO="gemini-2.5-flash-preview-04-17",ZO=n=>{let e=n.trim();const t=/^```(json)?\s*\n?(.*?)\n?\s*```$/s,s=e.match(t);s&&s[2]&&(e=s[2].trim()),e=e.replace(/,\s*([}\]])/g,"$1");const r=Math.min(...["[","{"].map(l=>e.indexOf(l)).filter(l=>l!==-1));r>0&&(e=e.slice(r));const i=e.lastIndexOf("]"),o=e.lastIndexOf("}"),a=Math.max(i,o);a!==-1&&(e=e.slice(0,a+1)),e.startsWith("[")&&(e=e.split(`
`).filter(l=>l.trim().startsWith("{")||l.trim().endsWith("}")||l.trim()==="["||l.trim()==="]"||l.trim()===",").join(`
`));try{const l=JSON.parse(e);return Array.isArray(l)?l.filter(c=>c&&(typeof c.term=="string"||typeof c.front=="string")&&(typeof c.definition=="string"||typeof c.back=="string")):l}catch(l){const c=e.match(/\[.*\]/s),u=e.match(/\{.*\}/s);let f=c?c[0]:u?u[0]:null;if(f)try{const m=JSON.parse(f);return Array.isArray(m)?m.filter(g=>g&&(typeof g.term=="string"||typeof g.front=="string")&&(typeof g.definition=="string"||typeof g.back=="string")):m}catch{}return console.error("Failed to parse JSON response:",l),console.error("Original string:",n),null}},dre=n=>{const e=[];let t="";return n.forEach(s=>{s.type==="application/pdf"?t+=`

--- Content from ${s.name} ---
${s.content}`:s.type.startsWith("image/")&&e.push({inlineData:{mimeType:s.type,data:s.content}})}),t&&e.unshift({text:t}),e},jA=async(n,e,t=!1)=>{const s=dre(n);return s.unshift({text:e}),await XO.models.generateContent({model:QO,contents:{parts:s},config:t?{responseMimeType:"application/json"}:{}})},hre=async(n,e=15,t="medium",s="")=>{let r=`Using ONLY the content from the following files, generate ${e} key terms and their definitions for a set of flashcards. Do not use any information that is not present in the files.`;s&&s.trim()&&(r+=` Focus on the topic: ${s}. If the topic is not covered in the files, say so.`),r+=` The flashcards should be at a ${t} difficulty level. The output MUST be a valid JSON array of objects, where each object has a "term" and a "definition" key. Do not include any text, comments, or explanations outside of the JSON array. If you cannot generate valid JSON, return an empty array [].`;const i=await jA(n,r,!0),o=ZO(i.text);if(!o||!Array.isArray(o)||o.length===0)throw new Error("AI output was not valid JSON. Please try again or use a different file.");return(o||[]).map((a,l)=>({id:`fc_${Date.now()}_${l}`,front:a.term||a.front||"",back:a.definition||a.back||"",mastered:!1}))},fre=async(n,e=10,t="medium",s="")=>{let r=`Using ONLY the content from the following files, create a multiple-choice quiz with ${e} questions. Do not use any information that is not present in the files.`;s&&s.trim()&&(r+=` Focus on the topic: ${s}. If the topic is not covered in the files, say so.`),r+=` The quiz should be at a ${t} difficulty level. For each question, provide 4 distinct options and indicate the correct answer. The output MUST be a valid JSON array of objects. Each object should have a "question" (string), "options" (array of 4 strings), and "answer" (string, the full text of the correct option). Do not include any text, comments, or explanations outside of the JSON array. If you cannot generate valid JSON, return an empty array [].`;const i=await jA(n,r,!0),o=ZO(i.text);if(!o||!Array.isArray(o)||o.length===0)throw new Error("AI output was not valid JSON. Please try again or use a different file.");return o||[]},pre=async(n,e,t="medium")=>{const s=`Using ONLY the content from the following files, answer the following question in a detailed, well-explained manner at a ${t} complexity level. Do not use any information that is not present in the files. If the answer is not present in the files, say so.

Question: ${e}`;return(await jA(n,s)).text},mre=n=>{let e=n.map(t=>`--- Content from ${t.name} (${t.type}) ---
${(t.content||"").slice(0,2e3)}`).join(`

`);return e.length>1e4&&(e=e.slice(0,1e4)+`
...`),{async sendMessage(t){try{const s=`Context:
${e}

User: ${t}

Assistant:`;return{text:(await XO.models.generateContent({model:QO,contents:[{text:s}]})).text}}catch(s){throw console.error("Gemini chat error:",s),new Error((s==null?void 0:s.message)||"Gemini chat failed")}}}};function Ew(n,[e,t]){return Math.min(t,Math.max(e,n))}function Zx(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var e$=["PageUp","PageDown"],t$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],n$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Zf="Slider",[mb,gre,yre]=Sy(Zf),[s$,dle]=Wn(Zf,[yre]),[vre,e_]=s$(Zf),r$=b.forwardRef((n,e)=>{const{name:t,min:s=0,max:r=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:w,...v}=n,_=b.useRef(new Set),x=b.useRef(0),C=o==="horizontal"?wre:xre,[T=[],R]=Ii({prop:u,defaultProp:c,onChange:D=>{var G;(G=[..._.current][x.current])==null||G.focus(),f(D)}}),P=b.useRef(T);function I(D){const V=Ere(T,D);L(D,V)}function M(D){L(D,x.current)}function N(){const D=P.current[x.current];T[x.current]!==D&&m(T)}function L(D,V,{commit:G}={commit:!1}){const B=kre(i),j=Pre(Math.round((D-s)/i)*i+s,B),O=Ew(j,[s,r]);R((U=[])=>{const $=Sre(U,O,V);if(Rre($,l*i)){x.current=$.indexOf(O);const F=String($)!==String(U);return F&&G&&m($),F?$:U}else return U})}return y.jsx(vre,{scope:n.__scopeSlider,name:t,disabled:a,min:s,max:r,valueIndexToChangeRef:x,thumbs:_.current,values:T,orientation:o,form:w,children:y.jsx(mb.Provider,{scope:n.__scopeSlider,children:y.jsx(mb.Slot,{scope:n.__scopeSlider,children:y.jsx(C,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:J(v.onPointerDown,()=>{a||(P.current=T)}),min:s,max:r,inverted:g,onSlideStart:a?void 0:I,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:N,onHomeKeyDown:()=>!a&&L(s,0,{commit:!0}),onEndKeyDown:()=>!a&&L(r,T.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:V})=>{if(!a){const j=e$.includes(D.key)||D.shiftKey&&t$.includes(D.key)?10:1,O=x.current,U=T[O],$=i*j*V;L(U+$,O,{commit:!0})}}})})})})});r$.displayName=Zf;var[i$,o$]=s$(Zf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wre=b.forwardRef((n,e)=>{const{min:t,max:s,dir:r,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[f,m]=b.useState(null),g=Ee(e,C=>m(C)),w=b.useRef(void 0),v=Wf(r),_=v==="ltr",x=_&&!i||!_&&i;function S(C){const T=w.current||f.getBoundingClientRect(),R=[0,T.width],I=zA(R,x?[t,s]:[s,t]);return w.current=T,I(C-T.left)}return y.jsx(i$,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(a$,{dir:v,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const T=S(C.clientX);o==null||o(T)},onSlideMove:C=>{const T=S(C.clientX);a==null||a(T)},onSlideEnd:()=>{w.current=void 0,l==null||l()},onStepKeyDown:C=>{const R=n$[x?"from-left":"from-right"].includes(C.key);c==null||c({event:C,direction:R?-1:1})}})})}),xre=b.forwardRef((n,e)=>{const{min:t,max:s,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=b.useRef(null),f=Ee(e,u),m=b.useRef(void 0),g=!r;function w(v){const _=m.current||u.current.getBoundingClientRect(),x=[0,_.height],C=zA(x,g?[s,t]:[t,s]);return m.current=_,C(v-_.top)}return y.jsx(i$,{scope:n.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(a$,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const _=w(v.clientY);i==null||i(_)},onSlideMove:v=>{const _=w(v.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:v=>{const x=n$[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:x?-1:1})}})})}),a$=b.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=e_(Zf,t);return y.jsx(ce.span,{...c,ref:e,onKeyDown:J(n.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):e$.concat(t$).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:J(n.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(m)?m.focus():s(f)}),onPointerMove:J(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&r(f)}),onPointerUp:J(n.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),l$="SliderTrack",c$=b.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,r=e_(l$,t);return y.jsx(ce.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});c$.displayName=l$;var gb="SliderRange",u$=b.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,r=e_(gb,t),i=o$(gb,t),o=b.useRef(null),a=Ee(e,o),l=r.values.length,c=r.values.map(m=>f$(m,r.min,r.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return y.jsx(ce.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:a,style:{...n.style,[i.startEdge]:u+"%",[i.endEdge]:f+"%"}})});u$.displayName=gb;var yb="SliderThumb",d$=b.forwardRef((n,e)=>{const t=gre(n.__scopeSlider),[s,r]=b.useState(null),i=Ee(e,a=>r(a)),o=b.useMemo(()=>s?t().findIndex(a=>a.ref.current===s):-1,[t,s]);return y.jsx(_re,{...n,ref:i,index:o})}),_re=b.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:r,...i}=n,o=e_(yb,t),a=o$(yb,t),[l,c]=b.useState(null),u=Ee(e,S=>c(S)),f=l?o.form||!!l.closest("form"):!0,m=Tx(l),g=o.values[s],w=g===void 0?0:f$(g,o.min,o.max),v=bre(s,o.values.length),_=m==null?void 0:m[a.size],x=_?Tre(_,w,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${w}% + ${x}px)`},children:[y.jsx(mb.ItemSlot,{scope:n.__scopeSlider,children:y.jsx(ce.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:n.style,onFocus:J(n.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),f&&y.jsx(h$,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},s)]})});d$.displayName=yb;var Cre="RadioBubbleInput",h$=b.forwardRef(({__scopeSlider:n,value:e,...t},s)=>{const r=b.useRef(null),i=Ee(r,s),o=Zx(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),y.jsx(ce.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});h$.displayName=Cre;function Sre(n=[],e,t){const s=[...n];return s[t]=e,s.sort((r,i)=>r-i)}function f$(n,e,t){const i=100/(t-e)*(n-e);return Ew(i,[0,100])}function bre(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Ere(n,e){if(n.length===1)return 0;const t=n.map(r=>Math.abs(r-e)),s=Math.min(...t);return t.indexOf(s)}function Tre(n,e,t){const s=n/2,i=zA([0,50],[0,s]);return(s-i(e)*t)*t}function Are(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function Rre(n,e){if(e>0){const t=Are(n);return Math.min(...t)>=e}return!0}function zA(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function kre(n){return(String(n).split(".")[1]||"").length}function Pre(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var p$=r$,Ire=c$,Mre=u$,Nre=d$;const HA=b.forwardRef(({className:n,...e},t)=>y.jsxs(p$,{ref:t,className:ye("relative flex w-full touch-none select-none items-center",n),...e,children:[y.jsx(Ire,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:y.jsx(Mre,{className:"absolute h-full bg-primary"})}),y.jsx(Nre,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));HA.displayName=p$.displayName;var Dre=[" ","Enter","ArrowUp","ArrowDown"],Lre=[" ","Enter"],Bu="Select",[t_,n_,Fre]=Sy(Bu),[ep,hle]=Wn(Bu,[Fre,Uf]),s_=Uf(),[Ore,$l]=ep(Bu),[$re,Ure]=ep(Bu),m$=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:w}=n,v=s_(e),[_,x]=b.useState(null),[S,C]=b.useState(null),[T,R]=b.useState(!1),P=Wf(c),[I,M]=Ii({prop:s,defaultProp:r??!1,onChange:i,caller:Bu}),[N,L]=Ii({prop:o,defaultProp:a,onChange:l,caller:Bu}),D=b.useRef(null),V=_?w||!!_.closest("form"):!0,[G,B]=b.useState(new Set),j=Array.from(G).map(O=>O.props.value).join(";");return y.jsx(yL,{...v,children:y.jsxs(Ore,{required:g,scope:e,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:T,onValueNodeHasChildrenChange:R,contentId:Ai(),value:N,onValueChange:L,open:I,onOpenChange:M,dir:P,triggerPointerDownPosRef:D,disabled:m,children:[y.jsx(t_.Provider,{scope:e,children:y.jsx($re,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(O=>{B(U=>new Set(U).add(O))},[]),onNativeOptionRemove:b.useCallback(O=>{B(U=>{const $=new Set(U);return $.delete(O),$})},[]),children:t})}),V?y.jsxs(U$,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:N,onChange:O=>L(O.target.value),disabled:m,form:w,children:[N===void 0?y.jsx("option",{value:""}):null,Array.from(G)]},j):null]})})};m$.displayName=Bu;var g$="SelectTrigger",y$=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=n,i=s_(t),o=$l(g$,t),a=o.disabled||s,l=Ee(e,o.onTriggerChange),c=n_(t),u=b.useRef("touch"),[f,m,g]=V$(v=>{const _=c().filter(C=>!C.disabled),x=_.find(C=>C.value===o.value),S=j$(_,v,x);S!==void 0&&o.onValueChange(S.value)}),w=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return y.jsx(YT,{asChild:!0,...i,children:y.jsx(ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":B$(o.value)?"":void 0,...r,ref:l,onClick:J(r.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:J(r.onPointerDown,v=>{u.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:J(r.onKeyDown,v=>{const _=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(_&&v.key===" ")&&Dre.includes(v.key)&&(w(),v.preventDefault())})})})});y$.displayName=g$;var v$="SelectValue",w$=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,children:i,placeholder:o="",...a}=n,l=$l(v$,t),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,f=Ee(e,l.onValueNodeChange);return gn(()=>{c(u)},[c,u]),y.jsx(ce.span,{...a,ref:f,style:{pointerEvents:"none"},children:B$(l.value)?y.jsx(y.Fragment,{children:o}):i})});w$.displayName=v$;var Bre="SelectIcon",x$=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...r}=n;return y.jsx(ce.span,{"aria-hidden":!0,...r,ref:e,children:s||""})});x$.displayName=Bre;var Vre="SelectPortal",_$=n=>y.jsx(by,{asChild:!0,...n});_$.displayName=Vre;var Vu="SelectContent",C$=b.forwardRef((n,e)=>{const t=$l(Vu,n.__scopeSelect),[s,r]=b.useState();if(gn(()=>{r(new DocumentFragment)},[]),!t.open){const i=s;return i?Wu.createPortal(y.jsx(S$,{scope:n.__scopeSelect,children:y.jsx(t_.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),i):null}return y.jsx(b$,{...n,ref:e})});C$.displayName=Vu;var gr=10,[S$,Ul]=ep(Vu),jre="SelectContentImpl",zre=Pu("SelectContent.RemoveScroll"),b$=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...x}=n,S=$l(Vu,t),[C,T]=b.useState(null),[R,P]=b.useState(null),I=Ee(e,H=>T(H)),[M,N]=b.useState(null),[L,D]=b.useState(null),V=n_(t),[G,B]=b.useState(!1),j=b.useRef(!1);b.useEffect(()=>{if(C)return vA(C)},[C]),yA();const O=b.useCallback(H=>{const[Te,...Ne]=V().map(pe=>pe.ref.current),[Ie]=Ne.slice(-1),se=document.activeElement;for(const pe of H)if(pe===se||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===Te&&R&&(R.scrollTop=0),pe===Ie&&R&&(R.scrollTop=R.scrollHeight),pe==null||pe.focus(),document.activeElement!==se))return},[V,R]),U=b.useCallback(()=>O([M,C]),[O,M,C]);b.useEffect(()=>{G&&U()},[G,U]);const{onOpenChange:$,triggerPointerDownPosRef:F}=S;b.useEffect(()=>{if(C){let H={x:0,y:0};const Te=Ie=>{var se,pe;H={x:Math.abs(Math.round(Ie.pageX)-(((se=F.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(Ie.pageY)-(((pe=F.current)==null?void 0:pe.y)??0))}},Ne=Ie=>{H.x<=10&&H.y<=10?Ie.preventDefault():C.contains(Ie.target)||$(!1),document.removeEventListener("pointermove",Te),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[C,$,F]),b.useEffect(()=>{const H=()=>$(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[$]);const[z,ee]=V$(H=>{const Te=V().filter(se=>!se.disabled),Ne=Te.find(se=>se.ref.current===document.activeElement),Ie=j$(Te,H,Ne);Ie&&setTimeout(()=>Ie.ref.current.focus())}),Y=b.useCallback((H,Te,Ne)=>{const Ie=!j.current&&!Ne;(S.value!==void 0&&S.value===Te||Ie)&&(N(H),Ie&&(j.current=!0))},[S.value]),te=b.useCallback(()=>C==null?void 0:C.focus(),[C]),he=b.useCallback((H,Te,Ne)=>{const Ie=!j.current&&!Ne;(S.value!==void 0&&S.value===Te||Ie)&&D(H)},[S.value]),ke=s==="popper"?vb:E$,Pe=ke===vb?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return y.jsx(S$,{scope:t,content:C,viewport:R,onViewportChange:P,itemRefCallback:Y,selectedItem:M,onItemLeave:te,itemTextRefCallback:he,focusSelectedItem:U,selectedItemText:L,position:s,isPositioned:G,searchRef:z,children:y.jsx(Bx,{as:zre,allowPinchZoom:!0,children:y.jsx($x,{asChild:!0,trapped:S.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:J(r,H=>{var Te;(Te=S.trigger)==null||Te.focus({preventScroll:!0}),H.preventDefault()}),children:y.jsx(Ff,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(ke,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:H=>H.preventDefault(),...x,...Pe,onPlaced:()=>B(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:J(x.onKeyDown,H=>{const Te=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!Te&&H.key.length===1&&ee(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let Ie=V().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(H.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const se=H.target,pe=Ie.indexOf(se);Ie=Ie.slice(pe+1)}setTimeout(()=>O(Ie)),H.preventDefault()}})})})})})})});b$.displayName=jre;var Hre="SelectItemAlignedPosition",E$=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=n,i=$l(Vu,t),o=Ul(Vu,t),[a,l]=b.useState(null),[c,u]=b.useState(null),f=Ee(e,I=>u(I)),m=n_(t),g=b.useRef(!1),w=b.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,C=b.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&_&&x){const I=i.trigger.getBoundingClientRect(),M=c.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),L=x.getBoundingClientRect();if(i.dir!=="rtl"){const se=L.left-M.left,pe=N.left-se,Oe=I.left-pe,yt=I.width+Oe,Oi=Math.max(yt,M.width),Qo=window.innerWidth-gr,Bl=Ew(pe,[gr,Math.max(gr,Qo-Oi)]);a.style.minWidth=yt+"px",a.style.left=Bl+"px"}else{const se=M.right-L.right,pe=window.innerWidth-N.right-se,Oe=window.innerWidth-I.right-pe,yt=I.width+Oe,Oi=Math.max(yt,M.width),Qo=window.innerWidth-gr,Bl=Ew(pe,[gr,Math.max(gr,Qo-Oi)]);a.style.minWidth=yt+"px",a.style.right=Bl+"px"}const D=m(),V=window.innerHeight-gr*2,G=v.scrollHeight,B=window.getComputedStyle(c),j=parseInt(B.borderTopWidth,10),O=parseInt(B.paddingTop,10),U=parseInt(B.borderBottomWidth,10),$=parseInt(B.paddingBottom,10),F=j+O+G+$+U,z=Math.min(_.offsetHeight*5,F),ee=window.getComputedStyle(v),Y=parseInt(ee.paddingTop,10),te=parseInt(ee.paddingBottom,10),he=I.top+I.height/2-gr,ke=V-he,Pe=_.offsetHeight/2,H=_.offsetTop+Pe,Te=j+O+H,Ne=F-Te;if(Te<=he){const se=D.length>0&&_===D[D.length-1].ref.current;a.style.bottom="0px";const pe=c.clientHeight-v.offsetTop-v.offsetHeight,Oe=Math.max(ke,Pe+(se?te:0)+pe+U),yt=Te+Oe;a.style.height=yt+"px"}else{const se=D.length>0&&_===D[0].ref.current;a.style.top="0px";const Oe=Math.max(he,j+v.offsetTop+(se?Y:0)+Pe)+Ne;a.style.height=Oe+"px",v.scrollTop=Te-he+v.offsetTop}a.style.margin=`${gr}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=V+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,a,c,v,_,x,i.dir,s]);gn(()=>C(),[C]);const[T,R]=b.useState();gn(()=>{c&&R(window.getComputedStyle(c).zIndex)},[c]);const P=b.useCallback(I=>{I&&w.current===!0&&(C(),S==null||S(),w.current=!1)},[C,S]);return y.jsx(qre,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:P,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:y.jsx(ce.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});E$.displayName=Hre;var Gre="SelectPopperPosition",vb=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=gr,...i}=n,o=s_(t);return y.jsx(JT,{...o,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vb.displayName=Gre;var[qre,GA]=ep(Vu,{}),wb="SelectViewport",T$=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...r}=n,i=Ul(wb,t),o=GA(wb,t),a=Ee(e,i.onViewportChange),l=b.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),y.jsx(t_.Slot,{scope:t,children:y.jsx(ce.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:J(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const w=window.innerHeight-gr*2,v=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),x=Math.max(v,_);if(x<w){const S=x+g,C=Math.min(w,S),T=S-C;f.style.height=C+"px",f.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});T$.displayName=wb;var A$="SelectGroup",[Wre,Kre]=ep(A$),Yre=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=Ai();return y.jsx(Wre,{scope:t,id:r,children:y.jsx(ce.div,{role:"group","aria-labelledby":r,...s,ref:e})})});Yre.displayName=A$;var R$="SelectLabel",k$=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=Kre(R$,t);return y.jsx(ce.div,{id:r.id,...s,ref:e})});k$.displayName=R$;var Tw="SelectItem",[Jre,P$]=ep(Tw),I$=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:i,...o}=n,a=$l(Tw,t),l=Ul(Tw,t),c=a.value===s,[u,f]=b.useState(i??""),[m,g]=b.useState(!1),w=Ee(e,S=>{var C;return(C=l.itemRefCallback)==null?void 0:C.call(l,S,s,r)}),v=Ai(),_=b.useRef("touch"),x=()=>{r||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Jre,{scope:t,value:s,disabled:r,textId:v,isSelected:c,onItemTextChange:b.useCallback(S=>{f(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(t_.ItemSlot,{scope:t,value:s,disabled:r,textValue:u,children:y.jsx(ce.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:w,onFocus:J(o.onFocus,()=>g(!0)),onBlur:J(o.onBlur,()=>g(!1)),onClick:J(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:J(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:J(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:J(o.onPointerMove,S=>{var C;_.current=S.pointerType,r?(C=l.onItemLeave)==null||C.call(l):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:J(o.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=l.onItemLeave)==null||C.call(l))}),onKeyDown:J(o.onKeyDown,S=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&S.key===" "||(Lre.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});I$.displayName=Tw;var Rp="SelectItemText",M$=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,...i}=n,o=$l(Rp,t),a=Ul(Rp,t),l=P$(Rp,t),c=Ure(Rp,t),[u,f]=b.useState(null),m=Ee(e,x=>f(x),l.onItemTextChange,x=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,x,l.value,l.disabled)}),g=u==null?void 0:u.textContent,w=b.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=c;return gn(()=>(v(w),()=>_(w)),[v,_,w]),y.jsxs(y.Fragment,{children:[y.jsx(ce.span,{id:l.textId,...i,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Wu.createPortal(i.children,o.valueNode):null]})});M$.displayName=Rp;var N$="SelectItemIndicator",D$=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return P$(N$,t).isSelected?y.jsx(ce.span,{"aria-hidden":!0,...s,ref:e}):null});D$.displayName=N$;var xb="SelectScrollUpButton",L$=b.forwardRef((n,e)=>{const t=Ul(xb,n.__scopeSelect),s=GA(xb,n.__scopeSelect),[r,i]=b.useState(!1),o=Ee(e,s.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?y.jsx(O$,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});L$.displayName=xb;var _b="SelectScrollDownButton",F$=b.forwardRef((n,e)=>{const t=Ul(_b,n.__scopeSelect),s=GA(_b,n.__scopeSelect),[r,i]=b.useState(!1),o=Ee(e,s.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?y.jsx(O$,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});F$.displayName=_b;var O$=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=n,i=Ul("SelectScrollButton",t),o=b.useRef(null),a=n_(t),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),gn(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),y.jsx(ce.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:J(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:J(r.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:J(r.onPointerLeave,()=>{l()})})}),Xre="SelectSeparator",$$=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return y.jsx(ce.div,{"aria-hidden":!0,...s,ref:e})});$$.displayName=Xre;var Cb="SelectArrow",Qre=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=s_(t),i=$l(Cb,t),o=Ul(Cb,t);return i.open&&o.position==="popper"?y.jsx(XT,{...r,...s,ref:e}):null});Qre.displayName=Cb;var Zre="SelectBubbleInput",U$=b.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const r=b.useRef(null),i=Ee(s,r),o=Zx(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),y.jsx(ce.select,{...t,style:{..._D,...t.style},ref:i,defaultValue:e})});U$.displayName=Zre;function B$(n){return n===""||n===void 0}function V$(n){const e=ds(n),t=b.useRef(""),s=b.useRef(0),r=b.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,i]}function j$(n,e,t){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=eie(n,Math.max(i,0));r.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==t?l:void 0}function eie(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var tie=m$,z$=y$,nie=w$,sie=x$,rie=_$,H$=C$,iie=T$,G$=k$,q$=I$,oie=M$,aie=D$,W$=L$,K$=F$,Y$=$$;const qA=tie,WA=nie,r_=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(z$,{ref:s,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,y.jsx(sie,{asChild:!0,children:y.jsx(HD,{className:"h-4 w-4 opacity-50"})})]}));r_.displayName=z$.displayName;const J$=b.forwardRef(({className:n,...e},t)=>y.jsx(W$,{ref:t,className:ye("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(E5,{className:"h-4 w-4"})}));J$.displayName=W$.displayName;const X$=b.forwardRef(({className:n,...e},t)=>y.jsx(K$,{ref:t,className:ye("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(HD,{className:"h-4 w-4"})}));X$.displayName=K$.displayName;const i_=b.forwardRef(({className:n,children:e,position:t="popper",...s},r)=>y.jsx(rie,{children:y.jsxs(H$,{ref:r,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[y.jsx(J$,{}),y.jsx(iie,{className:ye("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(X$,{})]})}));i_.displayName=H$.displayName;const lie=b.forwardRef(({className:n,...e},t)=>y.jsx(G$,{ref:t,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));lie.displayName=G$.displayName;const Pi=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(q$,{ref:s,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(aie,{children:y.jsx(bl,{className:"h-4 w-4"})})}),y.jsx(oie,{children:e})]}));Pi.displayName=q$.displayName;const cie=b.forwardRef(({className:n,...e},t)=>y.jsx(Y$,{ref:t,className:ye("-mx-1 my-1 h-px bg-muted",n),...e}));cie.displayName=Y$.displayName;const uie=({flashcardSets:n,onCreateSet:e,onUpdateSet:t,files:s})=>{const[r,i]=b.useState(null),[o,a]=b.useState(!1),[l,c]=b.useState(""),[u,f]=b.useState({count:15,difficulty:"medium",topic:""}),[m,g]=b.useState(!1),[w,v]=b.useState(null),[_,x]=b.useState(0),[S,C]=b.useState(!1);b.useEffect(()=>{x(0),C(!1)},[r]);const T=async()=>{g(!0),v(null);try{const D=await hre(s,u.count,u.difficulty,u.topic),V={id:`set_${Date.now()}`,name:l||`Set ${n.length+1}`,createdAt:new Date().toISOString(),settings:{...u},flashcards:D};e(V),i(V.id),a(!1),c("")}catch(D){v(D instanceof Error?D.message:"Failed to generate flashcards")}finally{g(!1)}},R=n.find(D=>D.id===r)||null;if(!R)return y.jsx(Ep,{title:"Flashcards",isLoading:m,error:w,children:y.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[y.jsxs("div",{className:"w-full max-w-xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Your Flashcard Sets"}),y.jsx(me,{onClick:()=>a(!0),className:"px-4 py-2",children:"+ New Set"})]}),n.length===0?y.jsx("div",{className:"text-gray-500 text-center py-8",children:"No flashcard sets yet."}):y.jsx("ul",{className:"space-y-3",children:n.map(D=>y.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 cursor-pointer hover:bg-purple-50",onClick:()=>i(D.id),children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold",children:D.name}),y.jsxs("div",{className:"text-xs text-gray-500",children:[D.flashcards.filter(V=>V.mastered).length," / ",D.flashcards.length," mastered"]})]}),y.jsx(me,{size:"sm",variant:"outline",onClick:V=>{V.stopPropagation(),i(D.id)},children:"Study"})]},D.id))})]}),o&&y.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Flashcard Set"}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Set Name"}),y.jsx(Lu,{value:l,onChange:D=>c(D.target.value),placeholder:"e.g. Chapter 1 Vocab"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Number of flashcards"}),y.jsx(HA,{value:[u.count],min:5,max:30,step:1,onValueChange:D=>f({...u,count:D[0]})}),y.jsx("span",{className:"ml-2",children:u.count})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Difficulty"}),y.jsxs(qA,{value:u.difficulty,onValueChange:D=>f({...u,difficulty:D}),children:[y.jsx(r_,{children:y.jsx(WA,{placeholder:"Select difficulty"})}),y.jsxs(i_,{children:[y.jsx(Pi,{value:"easy",children:"Easy"}),y.jsx(Pi,{value:"medium",children:"Medium"}),y.jsx(Pi,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Topic (optional)"}),y.jsx(Lu,{value:u.topic,onChange:D=>f({...u,topic:D.target.value}),placeholder:"e.g. Photosynthesis"})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsx(me,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),y.jsx(me,{onClick:T,disabled:m,children:m?"Generating...":"Create"})]}),w&&y.jsx("div",{className:"text-red-500 mt-2 text-sm",children:w})]})})]})});const P=R.flashcards,I=P[_],M=()=>{_<P.length-1&&(x(_+1),C(!1))},N=()=>{_>0&&(x(_-1),C(!1))},L=()=>{const D=[...P];D[_].mastered=!D[_].mastered;const V={...R,flashcards:D};t(V)};return m?y.jsx(Ep,{title:"Flashcards",isLoading:m,error:w,children:y.jsx("div",{className:"flex justify-center items-center h-32",children:"Generating flashcards..."})}):w?y.jsx(Ep,{title:"Flashcards",isLoading:m,error:w,children:y.jsx("div",{className:"flex justify-center items-center h-32 text-red-500",children:w})}):y.jsx(Ep,{title:R.name,isLoading:m,error:w,children:y.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[y.jsxs("div",{className:"text-base text-gray-500 mb-2",children:["Card ",_+1," of ",P.length," | ",P.filter(D=>D.mastered).length," mastered"]}),y.jsx("div",{className:"w-full flex justify-center",children:y.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 w-full max-w-2xl min-h-[320px] flex flex-col justify-center items-center border border-gray-200 transition-all duration-300",children:[y.jsx("div",{className:"text-3xl font-extrabold mb-6 text-gray-900",children:I.front}),S&&y.jsx("div",{className:"text-2xl text-gray-700 border-t pt-8 mt-8 w-full text-center",children:I.back})]})}),y.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mt-10",children:[y.jsx(me,{onClick:N,disabled:_===0,className:"min-w-[140px] py-3 text-lg",children:"Previous"}),y.jsx(me,{onClick:()=>C(!S),className:"min-w-[180px] py-3 text-lg",children:S?"Hide Answer":"Show Answer"}),y.jsx(me,{onClick:M,disabled:_===P.length-1,className:"min-w-[140px] py-3 text-lg",children:"Next"})]}),y.jsx("div",{className:"flex justify-center mt-6",children:y.jsx(me,{variant:I.mastered?"default":"outline",onClick:L,className:"min-w-[220px] py-3 text-lg",children:I.mastered?"Mastered":"Mark as Mastered"})}),y.jsx("div",{className:"flex justify-center mt-8",children:y.jsx(me,{variant:"outline",onClick:()=>i(null),children:"Back to Sets"})})]})})};var o_="Checkbox",[die,fle]=Wn(o_),[hie,KA]=die(o_);function fie(n){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:r,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:f}=n,[m,g]=Ii({prop:t,defaultProp:r??!1,onChange:l,caller:o_}),[w,v]=b.useState(null),[_,x]=b.useState(null),S=b.useRef(!1),C=w?!!o||!!w.closest("form"):!0,T={checked:m,disabled:i,setChecked:g,control:w,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:_l(r)?!1:r,isFormControl:C,bubbleInput:_,setBubbleInput:x};return y.jsx(hie,{scope:e,...T,children:pie(f)?f(T):s})}var Q$="CheckboxTrigger",Z$=b.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...s},r)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:w}=KA(Q$,n),v=Ee(r,u),_=b.useRef(l);return b.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const S=()=>f(_.current);return x.addEventListener("reset",S),()=>x.removeEventListener("reset",S)}},[i,f]),y.jsx(ce.button,{type:"button",role:"checkbox","aria-checked":_l(l)?"mixed":l,"aria-required":c,"data-state":rU(l),"data-disabled":a?"":void 0,disabled:a,value:o,...s,ref:v,onKeyDown:J(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:J(t,x=>{f(S=>_l(S)?!0:!S),w&&g&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});Z$.displayName=Q$;var YA=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:r,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...f}=n;return y.jsx(fie,{__scopeCheckbox:t,checked:r,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:s,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>y.jsxs(y.Fragment,{children:[y.jsx(Z$,{...f,ref:e,__scopeCheckbox:t}),m&&y.jsx(sU,{__scopeCheckbox:t})]})})});YA.displayName=o_;var eU="CheckboxIndicator",tU=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...r}=n,i=KA(eU,t);return y.jsx(Us,{present:s||_l(i.checked)||i.checked===!0,children:y.jsx(ce.span,{"data-state":rU(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...n.style}})})});tU.displayName=eU;var nU="CheckboxBubbleInput",sU=b.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:f,bubbleInput:m,setBubbleInput:g}=KA(nU,n),w=Ee(t,g),v=Zx(i),_=Tx(s);b.useEffect(()=>{const S=m;if(!S)return;const C=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(C,"checked").set,P=!r.current;if(v!==i&&R){const I=new Event("click",{bubbles:P});S.indeterminate=_l(i),R.call(S,_l(i)?!1:i),S.dispatchEvent(I)}},[m,v,i,r]);const x=b.useRef(_l(i)?!1:i);return y.jsx(ce.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:f,...e,tabIndex:-1,ref:w,style:{...e.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});sU.displayName=nU;function pie(n){return typeof n=="function"}function _l(n){return n==="indeterminate"}function rU(n){return _l(n)?"indeterminate":n?"checked":"unchecked"}const kp=b.forwardRef(({className:n,...e},t)=>y.jsx(YA,{ref:t,className:ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(tU,{className:ye("flex items-center justify-center text-current"),children:y.jsx(bl,{className:"h-4 w-4"})})}));kp.displayName=YA.displayName;function mie(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var gie=["color"],yie=b.forwardRef(function(n,e){var t=n.color,s=t===void 0?"currentColor":t,r=mie(n,gie);return b.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:e}),b.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),JA="Radio",[vie,iU]=Wn(JA),[wie,xie]=vie(JA),oU=b.forwardRef((n,e)=>{const{__scopeRadio:t,name:s,checked:r=!1,required:i,disabled:o,value:a="on",onCheck:l,form:c,...u}=n,[f,m]=b.useState(null),g=Ee(e,_=>m(_)),w=b.useRef(!1),v=f?c||!!f.closest("form"):!0;return y.jsxs(wie,{scope:t,checked:r,disabled:o,children:[y.jsx(ce.button,{type:"button",role:"radio","aria-checked":r,"data-state":uU(r),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:g,onClick:J(n.onClick,_=>{r||l==null||l(),v&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),v&&y.jsx(cU,{control:f,bubbles:!w.current,name:s,value:a,checked:r,required:i,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});oU.displayName=JA;var aU="RadioIndicator",lU=b.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:s,...r}=n,i=xie(aU,t);return y.jsx(Us,{present:s||i.checked,children:y.jsx(ce.span,{"data-state":uU(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})})});lU.displayName=aU;var _ie="RadioBubbleInput",cU=b.forwardRef(({__scopeRadio:n,control:e,checked:t,bubbles:s=!0,...r},i)=>{const o=b.useRef(null),a=Ee(o,i),l=Zx(t),c=Tx(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==t&&g){const w=new Event("click",{bubbles:s});g.call(u,t),u.dispatchEvent(w)}},[l,t,s]),y.jsx(ce.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cU.displayName=_ie;function uU(n){return n?"checked":"unchecked"}var Cie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],a_="RadioGroup",[Sie,ple]=Wn(a_,[Kf,iU]),dU=Kf(),hU=iU(),[bie,Eie]=Sie(a_),fU=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:s,defaultValue:r,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...m}=n,g=dU(t),w=Wf(c),[v,_]=Ii({prop:i,defaultProp:r??null,onChange:f,caller:a_});return y.jsx(bie,{scope:t,name:s,required:o,disabled:a,value:v,onValueChange:_,children:y.jsx(bA,{asChild:!0,...g,orientation:l,dir:w,loop:u,children:y.jsx(ce.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:w,...m,ref:e})})})});fU.displayName=a_;var pU="RadioGroupItem",mU=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:s,...r}=n,i=Eie(pU,t),o=i.disabled||s,a=dU(t),l=hU(t),c=b.useRef(null),u=Ee(e,c),f=i.value===r.value,m=b.useRef(!1);return b.useEffect(()=>{const g=v=>{Cie.includes(v.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",w)}},[]),y.jsx(EA,{asChild:!0,...a,focusable:!o,active:f,children:y.jsx(oU,{disabled:o,required:i.required,checked:f,...l,...r,name:i.name,ref:u,onCheck:()=>i.onValueChange(r.value),onKeyDown:J(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:J(r.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});mU.displayName=pU;var Tie="RadioGroupIndicator",gU=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...s}=n,r=hU(t);return y.jsx(lU,{...r,...s,ref:e})});gU.displayName=Tie;var yU=fU,vU=mU,Aie=gU;const Aw=b.forwardRef(({className:n,...e},t)=>y.jsx(yU,{className:ye("grid gap-2",n),...e,ref:t}));Aw.displayName=yU.displayName;const da=b.forwardRef(({className:n,...e},t)=>y.jsx(vU,{ref:t,className:ye("aspect-square h-5 w-5 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:y.jsx(Aie,{className:"flex items-center justify-center",children:y.jsx(yie,{className:"h-3.5 w-3.5 fill-primary"})})}));da.displayName=vU.displayName;function Rie({sessionId:n,quizzes:e,files:t,onQuizAdded:s}){const[r,i]=b.useState(null),[o,a]=b.useState(0),[l,c]=b.useState(null),[u,f]=b.useState(!1),[m,g]=b.useState(0),[w,v]=b.useState(!1),[_,x]=b.useState(!1),[S,C]=b.useState(!1),[T,R]=b.useState(!1),[P,I]=b.useState({questionCount:5,difficulty:"medium",topic:"",showExplanations:!0,questionTypes:["multiple-choice"]}),{toast:M}=Ko(),N=j=>{i(j),a(0),c(null),f(!1),g(0),v(!1)},L=j=>{u||c(j)},D=()=>{l===null||!r||(f(!0),l===r.questions[o].correctAnswer&&g(m+1))},V=()=>{r&&(o<r.questions.length-1?(a(o+1),c(null),f(!1)):v(!0))},G=()=>{!r||o===0||(a(o-1),c(null),f(!1))},B=async()=>{var j;C(!0);try{if(!t||t.length===0){M({title:"No study materials",description:"Please upload files first to generate quiz questions from your content",variant:"destructive"}),C(!1);return}const U=(await fre(t,P.questionCount,P.difficulty,P.topic)).slice(0,P.questionCount),$={id:`quiz_${Date.now()}`,title:P.topic||((j=t[0])==null?void 0:j.name.replace(".pdf",""))||"Quiz",questions:U.map((F,z)=>({id:`q_${Date.now()}_${z}`,text:F.question,options:F.options,correctAnswer:F.options.findIndex(ee=>ee===F.answer),explanation:""}))};s($),M({title:"Success",description:"New quiz generated successfully"})}catch(O){console.error("Error generating quiz:",O),M({title:"Error",description:"Failed to generate quiz",variant:"destructive"})}finally{C(!1)}};return y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Quizzes"}),y.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes"})]}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsxs(jx,{open:T,onOpenChange:R,children:[y.jsx(zx,{asChild:!0,children:y.jsxs(me,{variant:"outline",className:"flex items-center gap-2",children:[y.jsx(UR,{className:"h-4 w-4"}),"Quiz Options"]})}),y.jsxs(My,{children:[y.jsx(Ny,{children:y.jsx(Dy,{children:"Quiz Generation Settings"})}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{children:"Number of questions"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(HA,{value:[P.questionCount],min:3,max:15,step:1,onValueChange:j=>I({...P,questionCount:j[0]}),className:"flex-grow"}),y.jsx("span",{className:"w-8 text-center font-medium",children:P.questionCount})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{children:"Difficulty level"}),y.jsxs(qA,{value:P.difficulty,onValueChange:j=>I({...P,difficulty:j}),children:[y.jsx(r_,{children:y.jsx(WA,{placeholder:"Select difficulty"})}),y.jsxs(i_,{children:[y.jsx(Pi,{value:"easy",children:"Easy"}),y.jsx(Pi,{value:"medium",children:"Medium"}),y.jsx(Pi,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{children:"Specific Topic (optional)"}),y.jsx(Lu,{id:"topic",placeholder:"Leave blank to generate from uploaded files",value:P.topic,onChange:j=>I({...P,topic:j.target.value})}),y.jsx("p",{className:"text-xs text-gray-500",children:"If left blank, quiz will be generated based on your study materials"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(xt,{children:"Question Types"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(kp,{id:"multiple-choice",checked:P.questionTypes.includes("multiple-choice"),onCheckedChange:j=>{const O=j?[...P.questionTypes,"multiple-choice"]:P.questionTypes.filter(U=>U!=="multiple-choice");I({...P,questionTypes:O.length>0?O:["multiple-choice"]})}}),y.jsx(xt,{htmlFor:"multiple-choice",children:"Multiple Choice"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(kp,{id:"true-false",checked:P.questionTypes.includes("true-false"),onCheckedChange:j=>{const O=j?[...P.questionTypes,"true-false"]:P.questionTypes.filter(U=>U!=="true-false");I({...P,questionTypes:O})}}),y.jsx(xt,{htmlFor:"true-false",children:"True/False"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(kp,{id:"short-answer",checked:P.questionTypes.includes("short-answer"),onCheckedChange:j=>{const O=j?[...P.questionTypes,"short-answer"]:P.questionTypes.filter(U=>U!=="short-answer");I({...P,questionTypes:O})}}),y.jsx(xt,{htmlFor:"short-answer",children:"Short Answer"})]})]}),y.jsx("p",{className:"text-xs text-gray-500",children:"Select the types of questions you want in your quiz"})]}),y.jsxs("div",{className:"flex items-start space-x-2",children:[y.jsx(kp,{id:"explanations",checked:P.showExplanations,onCheckedChange:j=>I({...P,showExplanations:j===!0})}),y.jsxs("div",{className:"grid gap-1.5 leading-none",children:[y.jsx(xt,{htmlFor:"explanations",children:"Include answer explanations"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Show detailed explanations after answering each question"})]})]})]}),y.jsx(CA,{children:y.jsx(me,{onClick:()=>R(!1),children:"Save Settings"})})]})]}),y.jsxs(me,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:B,disabled:S,children:[S?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):y.jsx(BR,{className:"h-4 w-4"}),"Generate with AI"]})]})]}),r?w?y.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full gradient-bg mx-auto flex items-center justify-center mb-4",children:y.jsx(bl,{className:"h-8 w-8 text-white"})}),y.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Completed!"}),y.jsxs("p",{className:"text-gray-600 mb-2",children:["Your score: ",m," out of ",r.questions.length]}),y.jsxs("p",{className:"text-gray-600 mb-6",children:[Math.round(m/r.questions.length*100),"% correct"]}),y.jsxs("div",{className:"flex justify-center gap-4",children:[y.jsx(me,{variant:"outline",onClick:()=>N(r),children:"Retry Quiz"}),y.jsx(me,{className:"gradient-bg",onClick:()=>i(null),children:"Back to Quizzes"})]})]}):y.jsxs("div",{className:"bg-white rounded-lg border",children:[y.jsxs("div",{className:"border-b p-6",children:[y.jsx("h3",{className:"text-xl font-semibold",children:r.title}),y.jsxs("div",{className:"flex justify-between items-center mt-2",children:[y.jsxs("span",{className:"text-gray-600",children:["Question ",o+1," of ",r.questions.length]}),y.jsx(me,{variant:"ghost",onClick:()=>i(null),children:"Exit Quiz"})]})]}),y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h4",{className:"text-lg font-medium mb-4",children:r.questions[o].text}),y.jsx(Aw,{value:l==null?void 0:l.toString(),onValueChange:j=>L(parseInt(j)),className:"space-y-3",disabled:u,children:r.questions[o].options.map((j,O)=>{const U=O===r.questions[o].correctAnswer,$=l===O,F=u&&$&&!U,z=u&&U;let ee="flex items-center space-x-3 p-4 rounded-md border ";return u?z?ee+="border-green-500 bg-green-50":F?ee+="border-red-500 bg-red-50":ee+="border-gray-200":$?ee+="border-purple-500 bg-purple-50":ee+="border-gray-200 hover:border-gray-300",y.jsxs("div",{className:ee,children:[y.jsx(da,{value:O.toString(),id:`option-${O}`}),y.jsx(xt,{htmlFor:`option-${O}`,className:"flex-grow cursor-pointer",children:j}),u&&U&&y.jsx(bl,{className:"h-5 w-5 text-green-600"}),u&&F&&y.jsx(Cx,{className:"h-5 w-5 text-red-600"})]},O)})})]}),u&&y.jsxs("div",{className:`p-4 rounded-md ${l===r.questions[o].correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} mb-6`,children:[y.jsx("p",{className:`font-medium mb-1 ${l===r.questions[o].correctAnswer?"text-green-600":"text-red-600"}`,children:l===r.questions[o].correctAnswer?"Correct!":"Incorrect"}),y.jsx("p",{className:"text-gray-700",children:r.questions[o].explanation||"No explanation available."})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx(me,{variant:"outline",disabled:o===0||!u,onClick:G,children:"Previous"}),u?y.jsx(me,{className:"gradient-bg",onClick:V,children:o<r.questions.length-1?"Next Question":"Finish Quiz"}):y.jsx(me,{className:"gradient-bg",onClick:D,disabled:l===null,children:"Check Answer"})]})]})]}):y.jsx("div",{children:e.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(j=>y.jsxs(Cu,{className:"card-hover",children:[y.jsx(Su,{children:y.jsx(Jd,{children:j.title})}),y.jsx(bu,{children:y.jsxs("p",{className:"text-sm text-gray-500",children:[j.questions.length," questions"]})}),y.jsx(gw,{children:y.jsx(me,{className:"gradient-bg w-full",onClick:()=>N(j),children:"Start Quiz"})})]},j.id))}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx("svg",{className:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate a quiz with AI based on your study materials"}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[y.jsxs(me,{variant:"outline",onClick:()=>R(!0),children:[y.jsx(UR,{className:"mr-2 h-4 w-4"}),"Quiz Options"]}),y.jsxs(me,{className:"gradient-bg",onClick:B,disabled:S,children:[S?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white mr-2"}):y.jsx(BR,{className:"mr-2 h-4 w-4"}),"Generate Quiz with AI"]})]})]})})]})}const kie=n=>{if(!n)return"";let e=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e=e.replace(/\*\*(.*?)\*\*|__(.*?)__/g,"<strong>$1$2</strong>"),e=e.replace(/\*(.*?)\*|_(.*?)_/g,"<em>$1$2</em>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/^\s*\n\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/^\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/<\/ul>\n<ul>/gim,""),e=e.replace(/\n\* (.*)/gim,"<li>$1</li>"),e=e.replace(/\n\n/g,"</p><p>"),e=e.replace(/```(.*?)\n(.*?)```/gs,(t,s,r)=>{const i=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre><code class="language-${s}">${i}</code></pre>`}),e=`<p>${e}</p>`,e=e.replace(/<\/li><li>/g,`</li>
<li>`),e=e.replace(/<p><\/p>/g,""),e=e.replace(/<p><ul>/g,"<ul>"),e=e.replace(/<\/ul><\/p>/g,"</ul>"),e},Pie=({content:n})=>{const e=kie(n);return y.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e}})};var Bi=(n=>(n.SUMMARY="summary",n.NOTES="notes",n.OUTLINE="outline",n.FLASHCARDS="flashcards",n.QUIZ="quiz",n.CHAT="chat",n.STUDY_PLAN="study_plan",n.CONCEPT_MAP="concept_map",n))(Bi||{});const Iie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),y.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Mie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),y.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Nie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),y.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Die=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),y.jsx("polyline",{points:"14 2 14 8 20 8"}),y.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),y.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),y.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),Lie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),y.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),y.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),wU=n=>y.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Fie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),y.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),y.jsx("path",{d:"M12 11h4"}),y.jsx("path",{d:"M12 16h4"}),y.jsx("path",{d:"M8 11h.01"}),y.jsx("path",{d:"M8 16h.01"})]}),Oie=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),y.jsx("circle",{cx:"18",cy:"6",r:"3"}),y.jsx("circle",{cx:"6",cy:"18",r:"3"}),y.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]});Bi.SUMMARY,Bi.NOTES,Bi.OUTLINE,Bi.FLASHCARDS,Bi.QUIZ,Bi.CHAT,Bi.STUDY_PLAN,Bi.CONCEPT_MAP;const $ie=({files:n})=>{const[e,t]=b.useState([]),[s,r]=b.useState(""),[i,o]=b.useState(!1),a=b.useRef(null),[l,c]=b.useState(null),u=()=>{var g;(g=a.current)==null||g.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{c(mre(n))},[n]),b.useEffect(()=>{u()},[e]);const f=async()=>{if(!s.trim()||!l)return;const g={id:Date.now().toString(),role:"user",content:s,timestamp:new Date().toISOString()};t(w=>[...w,g]),r(""),o(!0);try{const w=await l.sendMessage(s),v={id:(Date.now()+1).toString(),role:"assistant",content:w.text,timestamp:new Date().toISOString()};t(_=>[..._,v])}catch(w){const v={id:(Date.now()+1).toString(),role:"assistant",content:(w==null?void 0:w.message)||"Sorry, I encountered an error while processing your request. Please try again.",timestamp:new Date().toISOString()};t(_=>[..._,v])}finally{o(!1)}},m=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),f())};return y.jsx(Ep,{title:"Chat with your Documents",isLoading:!1,error:null,children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 mb-4 px-2",children:[e.length===0&&y.jsxs("div",{className:"text-center text-gray-500 py-8",children:[y.jsx(wU,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsx("p",{children:"Start a conversation about your documents!"})]}),e.map(g=>y.jsx("div",{className:`flex ${g.role==="user"?"justify-end":"justify-start"} w-full`,children:y.jsx("div",{className:`rounded-2xl px-6 py-4 max-w-[70%] ${g.role==="user"?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white self-end":"bg-gray-100 text-gray-900 self-start"} shadow-md`,children:y.jsx("div",{className:"text-base whitespace-pre-line",children:y.jsx(Pie,{content:g.content})})})},g.id)),i&&y.jsx("div",{className:"flex justify-start w-full",children:y.jsx("div",{className:"rounded-2xl px-6 py-4 max-w-[70%] bg-gray-100 text-gray-900 shadow-md",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),y.jsx("div",{ref:a})]}),y.jsxs("div",{className:"flex space-x-2 mt-4 px-2 pb-2",children:[y.jsx(Lu,{value:s,onChange:g=>r(g.target.value),onKeyPress:m,placeholder:"Ask a question about your documents...",disabled:i,className:"flex-1 text-lg py-3"}),y.jsx(me,{onClick:f,disabled:i||!s.trim(),className:"px-6 py-3 text-lg",children:"Send"})]})]})})},Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Sb=[.001,0,0,.001,0,0],fC=1.35,As={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ma={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xU="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Uie={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},n0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Mt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l_={ERRORS:0,WARNINGS:1,INFOS:5},Rw={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Tv={moveTo:0,lineTo:1,curveTo:2,closePath:3},Bie={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c_=l_.WARNINGS;function Vie(n){Number.isInteger(n)&&(c_=n)}function jie(){return c_}function u_(n){c_>=l_.INFOS&&console.log(`Info: ${n}`)}function _e(n){c_>=l_.WARNINGS&&console.log(`Warning: ${n}`)}function et(n){throw new Error(n)}function Ft(n,e){n||et(e)}function zie(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _U(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Kie(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return zie(s)?s:null}function CU(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&_U(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Fe(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Zu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class CI extends Zu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class pC extends Zu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class bb extends Zu{constructor(e){super(e,"InvalidPDFException")}}class kw extends Zu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class Hie extends Zu{constructor(e){super(e,"FormatError")}}class Rl extends Zu{constructor(e){super(e,"AbortException")}}function SU(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&et("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Uy(n){typeof n!="string"&&et("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function Gie(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function qie(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Wie(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return Fe(this,"isLittleEndian",qie())}static get isEvalSupported(){return Fe(this,"isEvalSupported",Wie())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Fe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Fe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const mC=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Fo,s0,Eb;class fe{static makeHexColor(e,t,s){return`#${mC[e]}${mC[t]}${mC[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const f=e[s+u],m=e[s+u+1];e[s+u]=f*r+m*o+l,e[s+u+1]=f*i+m*a+c}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],f=e[1],m=e[2],g=e[3];let w=r*u+l,v=w,_=r*m+l,x=_,S=a*f+c,C=S,T=a*g+c,R=T;if(i!==0||o!==0){const P=i*u,I=i*m,M=o*f,N=o*g;w+=M,x+=M,_+=N,v+=N,S+=P,R+=P,T+=I,C+=I}s[0]=Math.min(s[0],w,_,v,x),s[1]=Math.min(s[1],S,T,C,R),s[2]=Math.max(s[2],w,_,v,x),s[3]=Math.max(s[3],S,T,C,R)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,l=s*i+r*o,c=i**2+o**2,u=(a+c)/2,f=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+f||1),t[1]=Math.sqrt(u-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),k(this,Fo,Eb).call(this,e,s,i,a,t,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),c),k(this,Fo,Eb).call(this,e,s,i,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),c)}}Fo=new WeakSet,s0=function(e,t,s,r,i,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,m=c*c,g=m*c,w=f*(f*(f*e+3*c*t)+3*m*s)+g*r,v=f*(f*(f*i+3*c*o)+3*m*a)+g*l;u[0]=Math.min(u[0],w),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],w),u[3]=Math.max(u[3],v)},Eb=function(e,t,s,r,i,o,a,l,c,u,f,m){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&k(this,Fo,s0).call(this,e,t,s,r,i,o,a,l,-f/u,m);return}const g=u**2-4*f*c;if(g<0)return;const w=Math.sqrt(g),v=2*c;k(this,Fo,s0).call(this,e,t,s,r,i,o,a,l,(-u+w)/v,m),k(this,Fo,s0).call(this,e,t,s,r,i,o,a,l,(-u-w)/v,m)},A(fe,Fo);function Kie(n){return decodeURIComponent(escape(n))}let gC=null,SI=null;function Yie(n){return gC||(gC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,SI=new Map([["","t"]])),n.replaceAll(gC,(e,t,s)=>t?t.normalize("NFKC"):SI.get(s))}function bU(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),SU(n)}const XA="pdfjs_internal_id_";function Jie(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function On(n,e,t){return Math.min(Math.max(n,e),t)}function EU(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(SU(n))}function Xie(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Uy(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Vi="http://www.w3.org/2000/svg",Ql=class Ql{};q(Ql,"CSS",96),q(Ql,"PDF",72),q(Ql,"PDF_TO_CSS_UNITS",Ql.CSS/Ql.PDF);let kl=Ql;async function By(n,e="text"){if(Pp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Vy{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,f,m,g;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,f=0,m=0,g=1;break;case 90:u=0,f=1,m=1,g=0;break;case 270:u=0,f=-1,m=-1,g=0;break;case 0:u=1,f=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,g=-g);let w,v,_,x;u===0?(w=Math.abs(c-e[1])*s+i,v=Math.abs(l-e[0])*s+o,_=(e[3]-e[1])*s,x=(e[2]-e[0])*s):(w=Math.abs(l-e[0])*s+i,v=Math.abs(c-e[1])*s+o,_=(e[2]-e[0])*s,x=(e[3]-e[1])*s),this.transform=[u*s,f*s,m*s,g*s,w-u*s*l-m*s*c,v-f*s*l-g*s*c],this.width=_,this.height=x}get rawDims(){const e=this.viewBox;return Fe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new Vy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return fe.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const s=[e[2],e[3]];return fe.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return fe.applyInverseTransform(s,this.transform),s}}class QA extends Zu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function d_(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function ZA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Qie(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Zie(n,e="document.pdf"){if(typeof n!="string")return e;if(d_(n))return _e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(i.test(c))return r(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(i.test(c))return r(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return r(l[0])}return e}class bI{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&_e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Pp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Hr(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function eoe(n){console.log("Deprecated API usage: "+n)}var Hm;class e1{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,Hm)||E(this,Hm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,Hm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(s,r,i,o,a,l))}}Hm=new WeakMap,A(e1,Hm);function toe(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new Vy({viewBox:i,userUnit:1,scale:e,rotation:t})}function t1(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_e(`Not a valid color format: "${n}"`),[0,0,0])}function noe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,t1(s))}e.remove()}function wt(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function Yr(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function ju(n,e,t=!1,s=!0){if(e instanceof Vy){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=pn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${i}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Di{constructor(){const{pixelRatio:e}=Di;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,l=1/0;s=Di.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,l=r/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Tb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ta,hc,zs,Aa,Gm,hh,qm,$w,TU,Bn,AU,RU,Ip,r0;const qi=class qi{constructor(e){A(this,Bn);A(this,Ta,null);A(this,hc,null);A(this,zs);A(this,Aa,null);A(this,Gm,null);A(this,hh,null);E(this,zs,e),d(qi,qm)||E(qi,qm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,Ta,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,zs)._uiManager._signal;e.addEventListener("contextmenu",Hr,{signal:t}),e.addEventListener("pointerdown",k(qi,$w,TU),{signal:t});const s=E(this,Aa,document.createElement("div"));s.className="buttons",e.append(s);const r=d(this,zs).toolbarPosition;if(r){const{style:i}=e,o=d(this,zs)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,Ta)}hide(){var e;d(this,Ta).classList.add("hidden"),(e=d(this,hc))==null||e.hideDropdown()}show(){var e;d(this,Ta).classList.remove("hidden"),(e=d(this,Gm))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,zs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",d(qi,qm)[e]),k(this,Bn,Ip).call(this,s),s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),d(this,Aa).append(s)}async addAltText(e){const t=await e.render();k(this,Bn,Ip).call(this,t),d(this,Aa).append(t,d(this,Bn,r0)),E(this,Gm,e)}addColorPicker(e){E(this,hc,e);const t=e.renderButton();k(this,Bn,Ip).call(this,t),d(this,Aa).append(t,d(this,Bn,r0))}async addEditSignatureButton(e){const t=E(this,hh,await e.renderEditButton(d(this,zs)));k(this,Bn,Ip).call(this,t),d(this,Aa).append(t,d(this,Bn,r0))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){d(this,hh)&&(d(this,hh).title=e)}remove(){var e;d(this,Ta).remove(),(e=d(this,hc))==null||e.destroy(),E(this,hc,null)}};Ta=new WeakMap,hc=new WeakMap,zs=new WeakMap,Aa=new WeakMap,Gm=new WeakMap,hh=new WeakMap,qm=new WeakMap,$w=new WeakSet,TU=function(e){e.stopPropagation()},Bn=new WeakSet,AU=function(e){d(this,zs)._focusEventsAllowed=!1,Dt(e)},RU=function(e){d(this,zs)._focusEventsAllowed=!0,Dt(e)},Ip=function(e){const t=d(this,zs)._uiManager._signal;e.addEventListener("focusin",k(this,Bn,AU).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,Bn,RU).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hr,{signal:t})},r0=function(){const e=document.createElement("div");return e.className="divider",e},A(qi,$w),A(qi,qm,null);let Ab=qi;var Wm,fc,pc,Pl,kU,PU,IU;class soe{constructor(e){A(this,Pl);A(this,Wm,null);A(this,fc,null);A(this,pc);E(this,pc,e)}show(e,t,s){const[r,i]=k(this,Pl,PU).call(this,t,s),{style:o}=d(this,fc)||E(this,fc,k(this,Pl,kU).call(this));e.append(d(this,fc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,fc).remove()}}Wm=new WeakMap,fc=new WeakMap,pc=new WeakMap,Pl=new WeakSet,kU=function(){const e=E(this,fc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hr,{signal:d(this,pc)._signal});const t=E(this,Wm,document.createElement("div"));return t.className="buttons",e.append(t),k(this,Pl,IU).call(this),e},PU=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},IU=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=d(this,pc)._signal;e.addEventListener("contextmenu",Hr,{signal:s}),e.addEventListener("click",()=>{d(this,pc).highlightSelection("floating_button")},{signal:s}),d(this,Wm).append(e)};function MU(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var Uw;class roe{constructor(){A(this,Uw,0)}get id(){return`${xU}${qt(this,Uw)._++}`}}Uw=new WeakMap;var fh,Km,Sn,ph,i0;const u1=class u1{constructor(){A(this,ph);A(this,fh,bU());A(this,Km,0);A(this,Sn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return k(this,ph,i0).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return k(this,ph,i0).call(this,e,e)}async getFromBlob(e,t){const s=await t;return k(this,ph,i0).call(this,e,s)}async getFromId(e){d(this,Sn)||E(this,Sn,new Map);const t=d(this,Sn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Sn)||E(this,Sn,new Map);let s=d(this,Sn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${d(this,fh)}_${qt(this,Km)._++}`,refCounter:1,isSvg:!1},d(this,Sn).set(e,s),d(this,Sn).set(s.id,s),s}getSvgUrl(e){const t=d(this,Sn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;d(this,Sn)||E(this,Sn,new Map);const t=d(this,Sn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,fh)}_`)}};fh=new WeakMap,Km=new WeakMap,Sn=new WeakMap,ph=new WeakSet,i0=async function(e,t){d(this,Sn)||E(this,Sn,new Map);let s=d(this,Sn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${d(this,fh)}_${qt(this,Km)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await By(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=u1._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){_e(r),s=null}return d(this,Sn).set(e,s),s&&d(this,Sn).set(s.id,s),s};let Rb=u1;var At,Ra,Ym,vt;class ioe{constructor(e=128){A(this,At,[]);A(this,Ra,!1);A(this,Ym);A(this,vt,-1);E(this,Ym,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),d(this,Ra))return;const l={cmd:e,undo:t,post:s,type:i};if(d(this,vt)===-1){d(this,At).length>0&&(d(this,At).length=0),E(this,vt,0),d(this,At).push(l);return}if(o&&d(this,At)[d(this,vt)].type===i){a&&(l.undo=d(this,At)[d(this,vt)].undo),d(this,At)[d(this,vt)]=l;return}const c=d(this,vt)+1;c===d(this,Ym)?d(this,At).splice(0,1):(E(this,vt,c),c<d(this,At).length&&d(this,At).splice(c)),d(this,At).push(l)}undo(){if(d(this,vt)===-1)return;E(this,Ra,!0);const{undo:e,post:t}=d(this,At)[d(this,vt)];e(),t==null||t(),E(this,Ra,!1),E(this,vt,d(this,vt)-1)}redo(){if(d(this,vt)<d(this,At).length-1){E(this,vt,d(this,vt)+1),E(this,Ra,!0);const{cmd:e,post:t}=d(this,At)[d(this,vt)];e(),t==null||t(),E(this,Ra,!1)}}hasSomethingToUndo(){return d(this,vt)!==-1}hasSomethingToRedo(){return d(this,vt)<d(this,At).length-1}cleanType(e){if(d(this,vt)!==-1){for(let t=d(this,vt);t>=0;t--)if(d(this,At)[t].type!==e){d(this,At).splice(t+1,d(this,vt)-t),E(this,vt,t);return}d(this,At).length=0,E(this,vt,-1)}}destroy(){E(this,At,null)}}At=new WeakMap,Ra=new WeakMap,Ym=new WeakMap,vt=new WeakMap;var Bw,NU;class jy{constructor(e){A(this,Bw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(k(this,Bw,NU).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||Dt(t))}}Bw=new WeakSet,NU=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Vw=class Vw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return noe(e),Fe(this,"_colors",e)}convert(e){const t=t1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return Vw._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}};q(Vw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let kb=Vw;var mh,fs,Bt,sn,gh,Xi,yh,Hs,ka,Pa,vh,mc,ni,_r,gc,Jm,Xm,wh,Qm,si,Ia,xh,Ma,ri,jw,Na,Zm,Da,yc,vc,La,eg,Wt,Ke,Qi,Fa,wc,tg,ng,Oa,ii,Zi,sg,rg,Gs,Q,o0,Pb,DU,LU,a0,FU,OU,$U,Ib,UU,Mb,Nb,BU,kn,ji,VU,jU,Db,zU,Mp,Lb;const Ud=class Ud{constructor(e,t,s,r,i,o,a,l,c,u,f,m,g,w,v){A(this,Q);A(this,mh,new AbortController);A(this,fs,null);A(this,Bt,new Map);A(this,sn,new Map);A(this,gh,null);A(this,Xi,null);A(this,yh,null);A(this,Hs,new ioe);A(this,ka,null);A(this,Pa,null);A(this,vh,0);A(this,mc,new Set);A(this,ni,null);A(this,_r,null);A(this,gc,new Set);q(this,"_editorUndoBar",null);A(this,Jm,!1);A(this,Xm,!1);A(this,wh,!1);A(this,Qm,null);A(this,si,null);A(this,Ia,null);A(this,xh,null);A(this,Ma,!1);A(this,ri,null);A(this,jw,new roe);A(this,Na,!1);A(this,Zm,!1);A(this,Da,null);A(this,yc,null);A(this,vc,null);A(this,La,null);A(this,eg,null);A(this,Wt,xe.NONE);A(this,Ke,new Set);A(this,Qi,null);A(this,Fa,null);A(this,wc,null);A(this,tg,null);A(this,ng,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Oa,[0,0]);A(this,ii,null);A(this,Zi,null);A(this,sg,null);A(this,rg,null);A(this,Gs,null);const _=this._signal=d(this,mh).signal;E(this,Zi,e),E(this,sg,t),E(this,rg,s),E(this,gh,r),E(this,Fa,i),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),k(this,Q,FU).call(this),k(this,Q,BU).call(this),k(this,Q,Ib).call(this),E(this,Xi,a.annotationStorage),E(this,Qm,a.filterFactory),E(this,wc,l),E(this,xh,c||null),E(this,Jm,u),E(this,Xm,f),E(this,wh,m),E(this,eg,g||null),this.viewParameters={realScale:kl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=Ud.prototype,t=o=>d(o,Zi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new jy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Zi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Zi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,l;(e=d(this,Gs))==null||e.resolve(),E(this,Gs,null),(t=d(this,mh))==null||t.abort(),E(this,mh,null),this._signal=null;for(const c of d(this,sn).values())c.destroy();d(this,sn).clear(),d(this,Bt).clear(),d(this,gc).clear(),(s=d(this,La))==null||s.clear(),E(this,fs,null),d(this,Ke).clear(),d(this,Hs).destroy(),(r=d(this,gh))==null||r.destroy(),(i=d(this,Fa))==null||i.destroy(),(o=d(this,ri))==null||o.hide(),E(this,ri,null),(a=d(this,vc))==null||a.destroy(),E(this,vc,null),d(this,si)&&(clearTimeout(d(this,si)),E(this,si,null)),d(this,ii)&&(clearTimeout(d(this,ii)),E(this,ii,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,eg)}get useNewAltTextFlow(){return d(this,Xm)}get useNewAltTextWhenAddingImage(){return d(this,wh)}get hcmFilter(){return Fe(this,"hcmFilter",d(this,wc)?d(this,Qm).addHCMFilter(d(this,wc).foreground,d(this,wc).background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(d(this,Zi)).direction)}get highlightColors(){return Fe(this,"highlightColors",d(this,xh)?new Map(d(this,xh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Pa,e)}setMainHighlightColorPicker(e){E(this,vc,e)}editAltText(e,t=!1){var s;(s=d(this,gh))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=d(this,Fa))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Fa)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,wh,t);break}}onPageChanging({pageNumber:e}){E(this,vh,e-1)}focusMainContainer(){d(this,Zi).focus()}findParent(e,t){for(const s of d(this,sn).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){d(this,sg).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,gc).add(e)}removeShouldRescale(e){d(this,gc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*kl.PDF_TO_CSS_UNITS;for(const s of d(this,gc))s.onScaleChanging();(t=d(this,Pa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o}=t,a=t.toString(),c=k(this,Q,o0).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const f=k(this,Q,Pb).call(this,c),m=d(this,Wt)===xe.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(xe.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,Xi)&&!d(this,Xi).has(e.id)&&d(this,Xi).setValue(e.id,e)}a11yAlert(e,t=null){const s=d(this,rg);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,Ma)&&(E(this,Ma,!1),k(this,Q,a0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,Ke))if(t.div.contains(e)){E(this,yc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,yc))return;const[e,t]=d(this,yc);E(this,yc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,Q,Ib).call(this),k(this,Q,Mb).call(this)}removeEditListeners(){k(this,Q,UU).call(this),k(this,Q,Nb).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of d(this,_r))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of d(this,_r))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=d(this,fs))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of d(this,Ke)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of d(this,_r))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){_e(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const c=await r.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)k(this,Q,Db).call(this,l);k(this,Q,Lb).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){_e(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Wt)!==xe.NONE&&!this.isEditorHandlingKeyboard&&Ud._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,Ma)&&(E(this,Ma,!1),k(this,Q,a0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,Q,OU).call(this),k(this,Q,Mb).call(this),k(this,Q,kn).call(this,{isEditing:d(this,Wt)!==xe.NONE,isEmpty:k(this,Q,Mp).call(this),hasSomethingToUndo:d(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:d(this,Hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,Q,$U).call(this),k(this,Q,Nb).call(this),k(this,Q,kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,_r)){E(this,_r,e);for(const t of d(this,_r))k(this,Q,ji).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,jw).id}get currentLayer(){return d(this,sn).get(d(this,vh))}getLayer(e){return d(this,sn).get(e)}get currentPageIndex(){return d(this,vh)}addLayer(e){d(this,sn).set(e.pageIndex,e),d(this,Na)?e.enable():e.disable()}removeLayer(e){d(this,sn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1){var i,o,a;if(d(this,Wt)!==e&&!(d(this,Gs)&&(await d(this,Gs).promise,!d(this,Gs)))){if(E(this,Gs,Promise.withResolvers()),(i=d(this,Pa))==null||i.commitOrRemove(),E(this,Wt,e),e===xe.NONE){this.setEditingState(!1),k(this,Q,jU).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,Gs).resolve();return}e===xe.SIGNATURE&&await((a=d(this,Fa))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await k(this,Q,VU).call(this),this.unselectAll();for(const l of d(this,sn).values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),d(this,Gs).resolve();return}for(const l of d(this,Bt).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),r&&l.enterInEditMode()):l.unselect();d(this,Gs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,Wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(d(this,_r)){switch(e){case Ue.CREATE:this.currentLayer.addNewEditor(t);return;case Ue.HIGHLIGHT_DEFAULT_COLOR:(s=d(this,vc))==null||s.updateColor(t);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,tg)||E(this,tg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of d(this,Ke))r.updateParams(e,t);for(const r of d(this,_r))r.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of d(this,Bt).values())o.editorType===e&&o.show(t);(((i=d(this,tg))==null?void 0:i.get(Ue.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,Q,ji).call(this,[[Ue.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,Zm)!==e){E(this,Zm,e);for(const t of d(this,sn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of d(this,Bt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return d(this,Bt).get(e)}addEditor(e){d(this,Bt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(d(this,si)&&clearTimeout(d(this,si)),E(this,si,setTimeout(()=>{this.focusMainContainer(),E(this,si,null)},0))),d(this,Bt).delete(e.id),e.annotationElementId&&((t=d(this,La))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,mc).has(e.annotationElementId))&&((s=d(this,Xi))==null||s.remove(e.id))}addDeletedAnnotationElement(e){d(this,mc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,mc).has(e)}removeDeletedAnnotationElement(e){d(this,mc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,fs)!==e&&(E(this,fs,e),e&&k(this,Q,ji).call(this,e.propertiesToUpdate))}updateUI(e){d(this,Q,zU)===e&&k(this,Q,ji).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,Q,ji).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,Ke).has(e)){d(this,Ke).delete(e),e.unselect(),k(this,Q,kn).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,Ke).add(e),e.select(),k(this,Q,ji).call(this,e.propertiesToUpdate),k(this,Q,kn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,Pa))==null||t.commitOrRemove();for(const s of d(this,Ke))s!==e&&s.unselect();d(this,Ke).clear(),d(this,Ke).add(e),e.select(),k(this,Q,ji).call(this,e.propertiesToUpdate),k(this,Q,kn).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,Ke).has(e)}get firstSelectedEditor(){return d(this,Ke).values().next().value}unselect(e){e.unselect(),d(this,Ke).delete(e),k(this,Q,kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,Ke).size!==0}get isEnterHandled(){return d(this,Ke).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Hs).undo(),k(this,Q,kn).call(this,{hasSomethingToUndo:d(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,Q,Mp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Hs).redo(),k(this,Q,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Hs).hasSomethingToRedo(),isEmpty:k(this,Q,Mp).call(this)})}addCommands(e){d(this,Hs).add(e),k(this,Q,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,Q,Mp).call(this)})}cleanUndoStack(e){d(this,Hs).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,Ke)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)k(this,Q,Db).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=d(this,fs))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,fs)||this.hasSelection}selectAll(){for(const e of d(this,Ke))e.commit();k(this,Q,Lb).call(this,d(this,Bt).values())}unselectAll(){var e;if(!(d(this,fs)&&(d(this,fs).commitOrRemove(),d(this,Wt)!==xe.NONE))&&!((e=d(this,Pa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,Ke))t.unselect();d(this,Ke).clear(),k(this,Q,kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;d(this,Oa)[0]+=e,d(this,Oa)[1]+=t;const[r,i]=d(this,Oa),o=[...d(this,Ke)],a=1e3;d(this,ii)&&clearTimeout(d(this,ii)),E(this,ii,setTimeout(()=>{E(this,ii,null),d(this,Oa)[0]=d(this,Oa)[1]=0,this.addCommands({cmd:()=>{for(const l of o)d(this,Bt).has(l.id)&&(l.translateInPage(r,i),l.translationDone())},undo:()=>{for(const l of o)d(this,Bt).has(l.id)&&(l.translateInPage(-r,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,ni,new Map);for(const e of d(this,Ke))d(this,ni).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,ni))return!1;this.disableUserSelect(!1);const e=d(this,ni);E(this,ni,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(d(this,Bt).has(r.id)){const l=d(this,sn).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,ni))for(const s of d(this,ni).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,Ke).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,fs)===e}getActive(){return d(this,fs)}getMode(){return d(this,Wt)}get imageManager(){return Fe(this,"imageManager",new Rb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,m)=>({x:(u-r)/o,y:1-(c+f-s)/i,width:m/o,height:f/i});break;case"180":a=(c,u,f,m)=>({x:1-(c+f-s)/i,y:1-(u+m-r)/o,width:f/i,height:m/o});break;case"270":a=(c,u,f,m)=>({x:1-(u+m-r)/o,y:(c-s)/i,width:m/o,height:f/i});break;default:a=(c,u,f,m)=>({x:(c-s)/i,y:(u-r)/o,width:f/i,height:m/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:m,y:g,width:w,height:v}of f.getClientRects())w===0||v===0||l.push(a(m,g,w,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,yh)||E(this,yh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,yh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=d(this,yh))==null?void 0:r.get(e.data.id);if(!t)return;const s=d(this,Xi).getRawValue(t);s&&(d(this,Wt)===xe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=d(this,La))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),d(this,La).delete(e))}addMissingCanvas(e,t){(d(this,La)||E(this,La,new Map)).set(e,t)}};mh=new WeakMap,fs=new WeakMap,Bt=new WeakMap,sn=new WeakMap,gh=new WeakMap,Xi=new WeakMap,yh=new WeakMap,Hs=new WeakMap,ka=new WeakMap,Pa=new WeakMap,vh=new WeakMap,mc=new WeakMap,ni=new WeakMap,_r=new WeakMap,gc=new WeakMap,Jm=new WeakMap,Xm=new WeakMap,wh=new WeakMap,Qm=new WeakMap,si=new WeakMap,Ia=new WeakMap,xh=new WeakMap,Ma=new WeakMap,ri=new WeakMap,jw=new WeakMap,Na=new WeakMap,Zm=new WeakMap,Da=new WeakMap,yc=new WeakMap,vc=new WeakMap,La=new WeakMap,eg=new WeakMap,Wt=new WeakMap,Ke=new WeakMap,Qi=new WeakMap,Fa=new WeakMap,wc=new WeakMap,tg=new WeakMap,ng=new WeakMap,Oa=new WeakMap,ii=new WeakMap,Zi=new WeakMap,sg=new WeakMap,rg=new WeakMap,Gs=new WeakMap,Q=new WeakSet,o0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Pb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of d(this,sn).values())if(s.hasTextLayer(e))return s;return null},DU=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=k(this,Q,o0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(d(this,ri)||E(this,ri,new soe(this)),d(this,ri).show(s,r,this.direction==="ltr"))},LU=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Qi)&&((i=d(this,ri))==null||i.hide(),E(this,Qi,null),k(this,Q,kn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Qi))return;const r=k(this,Q,o0).call(this,e).closest(".textLayer");if(!r){d(this,Qi)&&((o=d(this,ri))==null||o.hide(),E(this,Qi,null),k(this,Q,kn).call(this,{hasSelectedText:!1}));return}if((a=d(this,ri))==null||a.hide(),E(this,Qi,t),k(this,Q,kn).call(this,{hasSelectedText:!0}),!(d(this,Wt)!==xe.HIGHLIGHT&&d(this,Wt)!==xe.NONE)&&(d(this,Wt)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Ma,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Wt)===xe.HIGHLIGHT?k(this,Q,Pb).call(this,r):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),f=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),m.type==="pointerup"&&k(this,Q,a0).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},a0=function(e=""){d(this,Wt)===xe.HIGHLIGHT?this.highlightSelection(e):d(this,Jm)&&k(this,Q,DU).call(this)},FU=function(){document.addEventListener("selectionchange",k(this,Q,LU).bind(this),{signal:this._signal})},OU=function(){if(d(this,Ia))return;E(this,Ia,new AbortController);const e=this.combinedSignal(d(this,Ia));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},$U=function(){var e;(e=d(this,Ia))==null||e.abort(),E(this,Ia,null)},Ib=function(){if(d(this,Da))return;E(this,Da,new AbortController);const e=this.combinedSignal(d(this,Da));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},UU=function(){var e;(e=d(this,Da))==null||e.abort(),E(this,Da,null)},Mb=function(){if(d(this,ka))return;E(this,ka,new AbortController);const e=this.combinedSignal(d(this,ka));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Nb=function(){var e;(e=d(this,ka))==null||e.abort(),E(this,ka,null)},BU=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},kn=function(e){Object.entries(e).some(([s,r])=>d(this,ng)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,ng),e)}),d(this,Wt)===xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,Q,ji).call(this,[[Ue.HIGHLIGHT_FREE,!0]]))},ji=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},VU=async function(){if(!d(this,Na)){E(this,Na,!0);const e=[];for(const t of d(this,sn).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,Bt).values())t.enable()}},jU=function(){if(this.unselectAll(),d(this,Na)){E(this,Na,!1);for(const e of d(this,sn).values())e.disable();for(const e of d(this,Bt).values())e.disable()}},Db=function(e){const t=d(this,sn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},zU=function(){let e=null;for(e of d(this,Ke));return e},Mp=function(){if(d(this,Bt).size===0)return!0;if(d(this,Bt).size===1)for(const e of d(this,Bt).values())return e.isEmpty();return!1},Lb=function(e){for(const t of d(this,Ke))t.unselect();d(this,Ke).clear();for(const t of e)t.isEmpty()||(d(this,Ke).add(t),t.select());k(this,Q,kn).call(this,{hasSelectedEditor:this.hasSelection})},q(Ud,"TRANSLATE_SMALL",1),q(Ud,"TRANSLATE_BIG",10);let zu=Ud;var Kt,oi,Cr,_h,ai,ps,Ch,li,es,eo,xc,ci,$a,Or,Np,l0;const Pn=class Pn{constructor(e){A(this,Or);A(this,Kt,null);A(this,oi,!1);A(this,Cr,null);A(this,_h,null);A(this,ai,null);A(this,ps,null);A(this,Ch,!1);A(this,li,null);A(this,es,null);A(this,eo,null);A(this,xc,null);A(this,ci,!1);E(this,es,e),E(this,ci,e._uiManager.useNewAltTextFlow),d(Pn,$a)||E(Pn,$a,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Pn._l10n??(Pn._l10n=e)}async render(){const e=E(this,Cr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,_h,document.createElement("span"));e.append(t),d(this,ci)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Pn,$a).missing),t.setAttribute("data-l10n-id",d(Pn,$a)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=d(this,es)._uiManager._signal;e.addEventListener("contextmenu",Hr,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),d(this,es)._uiManager.editAltText(d(this,es)),d(this,ci)&&d(this,es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Or,Np)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(E(this,Ch,!0),r(i))},{signal:s}),await k(this,Or,l0).call(this),e}finish(){d(this,Cr)&&(d(this,Cr).focus({focusVisible:d(this,Ch)}),E(this,Ch,!1))}isEmpty(){return d(this,ci)?d(this,Kt)===null:!d(this,Kt)&&!d(this,oi)}hasData(){return d(this,ci)?d(this,Kt)!==null||!!d(this,eo):this.isEmpty()}get guessedText(){return d(this,eo)}async setGuessedText(e){d(this,Kt)===null&&(E(this,eo,e),E(this,xc,await Pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Or,l0).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,ci)||d(this,Kt)){(t=d(this,li))==null||t.remove(),E(this,li,null);return}if(!d(this,li)){const s=E(this,li,document.createElement("div"));s.className="noAltTextBadge",d(this,es).div.append(s)}d(this,li).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Kt);return!e&&d(this,eo)===t&&(t=d(this,xc)),{altText:t,decorative:d(this,oi),guessedText:d(this,eo),textWithDisclaimer:d(this,xc)}}get data(){return{altText:d(this,Kt),decorative:d(this,oi)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(E(this,eo,s),E(this,xc,r)),!(d(this,Kt)===e&&d(this,oi)===t)&&(i||(E(this,Kt,e),E(this,oi,t)),k(this,Or,l0).call(this))}toggle(e=!1){d(this,Cr)&&(!e&&d(this,ps)&&(clearTimeout(d(this,ps)),E(this,ps,null)),d(this,Cr).disabled=!e)}shown(){d(this,es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Or,Np)}})}destroy(){var e,t;(e=d(this,Cr))==null||e.remove(),E(this,Cr,null),E(this,_h,null),E(this,ai,null),(t=d(this,li))==null||t.remove(),E(this,li,null)}};Kt=new WeakMap,oi=new WeakMap,Cr=new WeakMap,_h=new WeakMap,ai=new WeakMap,ps=new WeakMap,Ch=new WeakMap,li=new WeakMap,es=new WeakMap,eo=new WeakMap,xc=new WeakMap,ci=new WeakMap,$a=new WeakMap,Or=new WeakSet,Np=function(){return d(this,Kt)&&"added"||d(this,Kt)===null&&this.guessedText&&"review"||"missing"},l0=async function(){var r,i,o;const e=d(this,Cr);if(!e)return;if(d(this,ci)){if(e.classList.toggle("done",!!d(this,Kt)),e.setAttribute("data-l10n-id",d(Pn,$a)[d(this,Or,Np)]),(r=d(this,_h))==null||r.setAttribute("data-l10n-id",d(Pn,$a)[`${d(this,Or,Np)}-label`]),!d(this,Kt)){(i=d(this,ai))==null||i.remove();return}}else{if(!d(this,Kt)&&!d(this,oi)){e.classList.remove("done"),(o=d(this,ai))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,ai);if(!t){E(this,ai,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,es).id}`;const a=100,l=d(this,es)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,ps)),E(this,ps,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,ps,setTimeout(()=>{E(this,ps,null),d(this,ai).classList.add("show"),d(this,es)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,ps)&&(clearTimeout(d(this,ps)),E(this,ps,null)),(c=d(this,ai))==null||c.classList.remove("show")},{signal:l})}d(this,oi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Kt)),t.parentNode||e.append(t);const s=d(this,es).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(Pn,$a,null),q(Pn,"_l10n",null);let Pw=Pn;var Sh,_c,ig,og,ag,lg,cg,to,Cc,no,Sc,so,Il,HU,GU,qU;const d1=class d1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){A(this,Il);A(this,Sh);A(this,_c,!1);A(this,ig,null);A(this,og);A(this,ag);A(this,lg);A(this,cg);A(this,to,null);A(this,Cc);A(this,no,null);A(this,Sc);A(this,so,null);E(this,Sh,e),E(this,ig,s),E(this,og,t),E(this,ag,r),E(this,lg,i),E(this,cg,o),E(this,Sc,new AbortController),E(this,Cc,AbortSignal.any([a,d(this,Sc).signal])),e.addEventListener("touchstart",k(this,Il,HU).bind(this),{passive:!1,signal:d(this,Cc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Di.pixelRatio}destroy(){var e,t;(e=d(this,Sc))==null||e.abort(),E(this,Sc,null),(t=d(this,to))==null||t.abort(),E(this,to,null)}};Sh=new WeakMap,_c=new WeakMap,ig=new WeakMap,og=new WeakMap,ag=new WeakMap,lg=new WeakMap,cg=new WeakMap,to=new WeakMap,Cc=new WeakMap,no=new WeakMap,Sc=new WeakMap,so=new WeakMap,Il=new WeakSet,HU=function(e){var r,i,o;if((r=d(this,og))!=null&&r.call(this))return;if(e.touches.length===1){if(d(this,to))return;const a=E(this,to,new AbortController),l=AbortSignal.any([d(this,Cc),a.signal]),c=d(this,Sh),u={capture:!0,signal:l,passive:!1},f=m=>{var g;m.pointerType==="touch"&&((g=d(this,to))==null||g.abort(),E(this,to,null))};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Dt(m),f(m))},u),c.addEventListener("pointerup",f,u),c.addEventListener("pointercancel",f,u);return}if(!d(this,so)){E(this,so,new AbortController);const a=AbortSignal.any([d(this,Cc),d(this,so).signal]),l=d(this,Sh),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",k(this,Il,GU).bind(this),c);const u=k(this,Il,qU).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Dt,c),l.addEventListener("pointermove",Dt,c),l.addEventListener("pointercancel",Dt,c),l.addEventListener("pointerup",Dt,c),(i=d(this,ag))==null||i.call(this)}if(Dt(e),e.touches.length!==2||(o=d(this,ig))!=null&&o.call(this)){E(this,no,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),E(this,no,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},GU=function(e){var T;if(!d(this,no)||e.touches.length!==2)return;Dt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,l=d(this,no),{touch0X:c,touch0Y:u,touch1X:f,touch1Y:m}=l,g=f-c,w=m-u,v=o-r,_=a-i,x=Math.hypot(v,_)||1,S=Math.hypot(g,w)||1;if(!d(this,_c)&&Math.abs(S-x)<=d1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!d(this,_c)){E(this,_c,!0);return}const C=[(r+o)/2,(i+a)/2];(T=d(this,lg))==null||T.call(this,C,S,x)},qU=function(e){var t;e.touches.length>=2||(d(this,so)&&(d(this,so).abort(),E(this,so,null),(t=d(this,cg))==null||t.call(this)),d(this,no)&&(Dt(e),E(this,no,null),E(this,_c,!1)))};let Iw=d1;var bc,Sr,ht,bh,Ua,ug,Ec,rn,Tc,ro,Ba,dg,Ac,ms,hg,Rc,io,ui,Eh,Th,qs,kc,fg,zw,ge,Fb,pg,Ob,c0,WU,KU,$b,u0,Ub,YU,JU,XU,Bb,QU,Vb,ZU,eB,tB,jb,Dp;const Ae=class Ae{constructor(e){A(this,ge);A(this,bc,null);A(this,Sr,null);A(this,ht,null);A(this,bh,!1);A(this,Ua,null);A(this,ug,"");A(this,Ec,!1);A(this,rn,null);A(this,Tc,null);A(this,ro,null);A(this,Ba,null);A(this,dg,"");A(this,Ac,!1);A(this,ms,null);A(this,hg,!1);A(this,Rc,!1);A(this,io,!1);A(this,ui,null);A(this,Eh,0);A(this,Th,0);A(this,qs,null);A(this,kc,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);A(this,fg,!1);A(this,zw,Ae._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ae.prototype._resizeWithKeyboard,t=zu.TRANSLATE_SMALL,s=zu.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new jy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ae.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ooe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ae._l10n??(Ae._l10n=e),Ae._l10nResizer||(Ae._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ae._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ae._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){et("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,fg)}set _isDraggable(e){var t;E(this,fg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,zw)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,ge,Dp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Ac)?E(this,Ac,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){k(this,ge,Fb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,ms)||E(this,ms,[this.x,this.y,this.width,this.height]),k(this,ge,Fb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,ms)||E(this,ms,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,ms)&&(d(this,ms)[0]!==this.x||d(this,ms)[1]!==this.y)}get _hasBeenResized(){return!!d(this,ms)&&(d(this,ms)[2]!==this.width||d(this,ms)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ae,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=s,l*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=On(i,0,s-a),o=On(o,0,r-l);break;case 90:i=On(i,0,s-l),o=On(o,a,r);break;case 180:i=On(i,a,s),o=On(o,l,r);break;case 270:i=On(i,l,s),o=On(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[c,u]=this.getBaseTranslation();i+=c,o+=u,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return k(s=Ae,pg,Ob).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return k(s=Ae,pg,Ob).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/s).toFixed(2)}%`,d(this,Ec)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),i=!d(this,Ec)&&t.endsWith("%");if(r&&i)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!d(this,Ec)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,ht))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,Rc))return this._editToolbar;this._editToolbar=new Ab(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,ht))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,ht)||(Pw.initialize(Ae._l10n),E(this,ht,new Pw(this)),d(this,bc)&&(d(this,ht).data=d(this,bc),E(this,bc,null))),d(this,ht)}get altTextData(){var e;return(e=d(this,ht))==null?void 0:e.data}set altTextData(e){d(this,ht)&&(d(this,ht).data=e)}get guessedAltText(){var e;return(e=d(this,ht))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,ht))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,ht))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,ht)&&!d(this,ht).isEmpty()}hasAltTextData(){var e;return((e=d(this,ht))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,bh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,ge,Vb).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),MU(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,kc)||E(this,kc,new Iw({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,ge,YU).bind(this),onPinching:k(this,ge,JU).bind(this),onPinchEnd:k(this,ge,XU).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,Ac,!0),this._isDraggable){k(this,ge,QU).call(this,e);return}k(this,ge,Bb).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,ui)&&clearTimeout(d(this,ui)),E(this,ui,setTimeout(()=>{var e;E(this,ui,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,u=t/r,f=this.x*i,m=this.y*o,g=this.width*i,w=this.height*o;switch(s){case 0:return[f+c+a,o-m-u-w+l,f+c+g+a,o-m-u+l];case 90:return[f+u+a,o-m+c+l,f+u+w+a,o-m+c+g+l];case 180:return[f-c-g+a,o-m+u+l,f-c+a,o-m+u+w+l];case 270:return[f-u-w+a,o-m-c-g+l,f-u+a,o-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-r,l,a];case 180:return[i,t-r,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Rc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Rc,!1),!0):!1}isInEditMode(){return d(this,Rc)}shouldGetKeyboardEvents(){return d(this,io)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){k(this,ge,Vb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){et("An editor must be serializable")}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});r.rotation=e.rotation,E(r,bc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,l,c,u]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=c/i,r.height=u/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Ba))==null||e.abort(),E(this,Ba,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,ui)&&(clearTimeout(d(this,ui)),E(this,ui,null)),k(this,ge,Dp).call(this),this.removeEditToolbar(),d(this,qs)){for(const s of d(this,qs).values())clearTimeout(s);E(this,qs,null)}this.parent=null,(t=d(this,kc))==null||t.destroy(),E(this,kc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,ge,WU).call(this),d(this,rn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,ro,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,rn).children;if(!d(this,Sr)){E(this,Sr,Array.from(t));const o=k(this,ge,ZU).bind(this),a=k(this,ge,eB).bind(this),l=this._uiManager._signal;for(const c of d(this,Sr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",k(this,ge,tB).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Ae._l10nResizer[u])}}const s=d(this,Sr)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(d(this,Sr).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)d(this,rn).append(d(this,rn).firstChild);else if(i>r)for(let a=0;a<i-r;a++)d(this,rn).firstChild.before(d(this,rn).lastChild);let o=0;for(const a of t){const c=d(this,Sr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ae._l10nResizer[c])}}k(this,ge,jb).call(this,0),E(this,io,!0),d(this,rn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,io)&&k(this,ge,Ub).call(this,d(this,dg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,ge,Dp).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=d(this,ht))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=d(this,rn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=d(this,ht))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,hg)}set isEditing(e){E(this,hg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,Ec,!0);const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,qs)||E(this,qs,new Map);const{action:s}=e;let r=d(this,qs).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),d(this,qs).delete(s),d(this,qs).size===0&&E(this,qs,null)},Ae._telemetryTimeout),d(this,qs).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,bh,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,bh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};bc=new WeakMap,Sr=new WeakMap,ht=new WeakMap,bh=new WeakMap,Ua=new WeakMap,ug=new WeakMap,Ec=new WeakMap,rn=new WeakMap,Tc=new WeakMap,ro=new WeakMap,Ba=new WeakMap,dg=new WeakMap,Ac=new WeakMap,ms=new WeakMap,hg=new WeakMap,Rc=new WeakMap,io=new WeakMap,ui=new WeakMap,Eh=new WeakMap,Th=new WeakMap,qs=new WeakMap,kc=new WeakMap,fg=new WeakMap,zw=new WeakMap,ge=new WeakSet,Fb=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},pg=new WeakSet,Ob=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},c0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},WU=function(){if(d(this,rn))return;E(this,rn,document.createElement("div")),d(this,rn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");d(this,rn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",k(this,ge,KU).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Hr,{signal:t}),r.tabIndex=-1}this.div.prepend(d(this,rn))},KU=function(e,t){var u;t.preventDefault();const{isMac:s}=pn.platform;if(t.button!==0||t.ctrlKey&&s)return;(u=d(this,ht))==null||u.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,E(this,Tc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,ge,Ub).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Dt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Hr,{signal:o}),E(this,ro,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=d(this,ht))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,k(this,ge,u0).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},$b=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*s,o*r),this.fixAndSetPosition(),this._onResized()},u0=function(){if(!d(this,ro))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=d(this,ro);E(this,ro,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===s&&l===r||this.addCommands({cmd:k(this,ge,$b).bind(this,i,o,a,l),undo:k(this,ge,$b).bind(this,e,t,s,r),mustExec:!0})},Ub=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=Ae.MIN_SIZE/s,u=Ae.MIN_SIZE/r,f=k(this,ge,c0).call(this,this.rotation),m=(O,U)=>[f[0]*O+f[2]*U,f[1]*O+f[3]*U],g=k(this,ge,c0).call(this,360-this.rotation),w=(O,U)=>[g[0]*O+g[2]*U,g[1]*O+g[3]*U];let v,_,x=!1,S=!1;switch(e){case"topLeft":x=!0,v=(O,U)=>[0,0],_=(O,U)=>[O,U];break;case"topMiddle":v=(O,U)=>[O/2,0],_=(O,U)=>[O/2,U];break;case"topRight":x=!0,v=(O,U)=>[O,0],_=(O,U)=>[0,U];break;case"middleRight":S=!0,v=(O,U)=>[O,U/2],_=(O,U)=>[0,U/2];break;case"bottomRight":x=!0,v=(O,U)=>[O,U],_=(O,U)=>[0,0];break;case"bottomMiddle":v=(O,U)=>[O/2,U],_=(O,U)=>[O/2,0];break;case"bottomLeft":x=!0,v=(O,U)=>[0,U],_=(O,U)=>[O,0];break;case"middleLeft":S=!0,v=(O,U)=>[0,U/2],_=(O,U)=>[O,U/2];break}const C=v(a,l),T=_(a,l);let R=m(...T);const P=Ae._round(i+R[0]),I=Ae._round(o+R[1]);let M=1,N=1,L,D;if(t.fromKeyboard)({deltaX:L,deltaY:D}=t);else{const{screenX:O,screenY:U}=t,[$,F]=d(this,Tc);[L,D]=this.screenToPageTranslation(O-$,U-F),d(this,Tc)[0]=O,d(this,Tc)[1]=U}if([L,D]=w(L/s,D/r),x){const O=Math.hypot(a,l);M=N=Math.max(Math.min(Math.hypot(T[0]-C[0]-L,T[1]-C[1]-D)/O,1/a,1/l),c/a,u/l)}else S?M=On(Math.abs(T[0]-C[0]-L),c,1)/a:N=On(Math.abs(T[1]-C[1]-D),u,1)/l;const V=Ae._round(a*M),G=Ae._round(l*N);R=m(..._(V,G));const B=P-R[0],j=I-R[1];d(this,ms)||E(this,ms,[this.x,this.y,this.width,this.height]),this.width=V,this.height=G,this.x=B,this.y=j,this.setDims(s*V,r*G),this.fixAndSetPosition(),this._onResizing()},YU=function(){var e;E(this,ro,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,ht))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},JU=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=k(this,ge,c0).call(this,this.rotation),a=(P,I)=>[o[0]*P+o[2]*I,o[1]*P+o[3]*I],[l,c]=this.parentDimensions,u=this.x,f=this.y,m=this.width,g=this.height,w=Ae.MIN_SIZE/l,v=Ae.MIN_SIZE/c;i=Math.max(Math.min(i,1/m,1/g),w/m,v/g);const _=Ae._round(m*i),x=Ae._round(g*i);if(_===m&&x===g)return;d(this,ms)||E(this,ms,[u,f,m,g]);const S=a(m/2,g/2),C=Ae._round(u+S[0]),T=Ae._round(f+S[1]),R=a(_/2,x/2);this.x=C-R[0],this.y=T-R[1],this.width=_,this.height=x,this.setDims(l*_,c*x),this.fixAndSetPosition(),this._onResizing()},XU=function(){var e;(e=d(this,ht))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,ge,u0).call(this)},Bb=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QU=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=c=>{r.abort(),E(this,Ua,null),E(this,Ac,!1),this._uiManager.endDragSession()||k(this,ge,Bb).call(this,c),s&&this._onStopDragging()};t&&(E(this,Eh,e.clientX),E(this,Th,e.clientY),E(this,Ua,e.pointerId),E(this,ug,e.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:m}=c;if(m!==d(this,Ua)){Dt(c);return}const[g,w]=this.screenToPageTranslation(u-d(this,Eh),f-d(this,Th));E(this,Eh,u),E(this,Th,f),this._uiManager.dragSelectedEditors(g,w)},o),window.addEventListener("touchmove",Dt,o),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,ug)&&(d(this,kc)||c.isPrimary)&&a(c),Dt(c)},o));const l=c=>{if(!d(this,Ua)||d(this,Ua)===c.pointerId){a(c);return}Dt(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},Vb=function(){if(d(this,Ba)||!this.div)return;E(this,Ba,new AbortController);const e=this._uiManager.combinedSignal(d(this,Ba));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ZU=function(e){Ae._resizerKeyboardManager.exec(this,e)},eB=function(e){var t;d(this,io)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,rn)&&k(this,ge,Dp).call(this)},tB=function(e){E(this,dg,d(this,io)?e:"")},jb=function(e){if(d(this,Sr))for(const t of d(this,Sr))t.tabIndex=e},Dp=function(){E(this,io,!1),k(this,ge,jb).call(this,-1),k(this,ge,u0).call(this)},A(Ae,pg),q(Ae,"_l10n",null),q(Ae,"_l10nResizer",null),q(Ae,"_borderLineWidth",-1),q(Ae,"_colorManager",new kb),q(Ae,"_zIndex",1),q(Ae,"_telemetryTimeout",1e3);let it=Ae;class ooe extends it{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const EI=3285377520,Vs=4294901760,Jr=65535;class nB{constructor(e){this.h1=e?e&4294967295:EI,this.h2=e?e&4294967295:EI}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,_=e.length;v<_;v++){const x=e.charCodeAt(v);x<=255?t[s++]=x:(t[s++]=x>>>8,t[s++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,m=461845907,g=f&Jr,w=m&Jr;for(let v=0;v<r;v++)v&1?(a=o[v],a=a*f&Vs|a*g&Jr,a=a<<15|a>>>17,a=a*m&Vs|a*w&Jr,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*f&Vs|l*g&Jr,l=l<<15|l>>>17,l=l*m&Vs|l*w&Jr,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*f&Vs|a*g&Jr,a=a<<15|a>>>17,a=a*m&Vs|a*w&Jr,r&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Vs|e*36045&Jr,t=t*4283543511&Vs|((t<<16|e>>>16)*2950163797&Vs)>>>16,e^=t>>>1,e=e*444984403&Vs|e*60499&Jr,t=t*3301882366&Vs|((t<<16|e>>>16)*3120437893&Vs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const zb=Object.freeze({map:null,hash:"",transfer:void 0});var Pc,Ic,on,Hw,sB;class n1{constructor(){A(this,Hw);A(this,Pc,!1);A(this,Ic,null);A(this,on,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=d(this,on).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return d(this,on).get(e)}remove(e){if(d(this,on).delete(e),d(this,on).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,on).values())if(t instanceof it)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=d(this,on).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,d(this,on).set(e,t);r&&k(this,Hw,sB).call(this),t instanceof it&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,on).has(e)}get size(){return d(this,on).size}resetModified(){d(this,Pc)&&(E(this,Pc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rB(this)}get serializable(){if(d(this,on).size===0)return zb;const e=new Map,t=new nB,s=[],r=Object.create(null);let i=!1;for(const[o,a]of d(this,on)){const l=a instanceof it?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:zb}get editorStats(){let e=null;const t=new Map;for(const s of d(this,on).values()){if(!(s instanceof it))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(r)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){E(this,Ic,null)}get modifiedIds(){if(d(this,Ic))return d(this,Ic);const e=[];for(const t of d(this,on).values())!(t instanceof it)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,Ic,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,on).entries()}}Pc=new WeakMap,Ic=new WeakMap,on=new WeakMap,Hw=new WeakSet,sB=function(){d(this,Pc)||(E(this,Pc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var mg;class rB extends n1{constructor(t){super();A(this,mg);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);E(this,mg,{map:o,hash:r,transfer:i})}get print(){et("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,mg)}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}mg=new WeakMap;var Ah;class aoe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Ah,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Ah).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||d(this,Ah).has(e.loadedName))){if(Ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),d(this,Ah).add(r),s==null||s(e)}catch{_e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}et("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw _e(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Fe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Fe(this,"isSyncFontLoadingSupported",Fn||pn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ft(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(T,R){return T.charCodeAt(R)<<24|T.charCodeAt(R+1)<<16|T.charCodeAt(R+2)<<8|T.charCodeAt(R+3)&255}function r(T,R,P,I){const M=T.substring(0,R),N=T.substring(R+P);return M+I+N}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(T,R){if(++c>30){_e("Load test font never loaded."),R();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(u.bind(null,T,R))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,f.length,f);const w=16,v=1482184792;let _=s(m,w);for(i=0,o=f.length-3;i<o;i+=4)_=_-v+s(f,i)|0;i<f.length&&(_=_-v+s(f+"XXX",i)|0),m=r(m,w,4,Gie(_));const x=`url(data:font/opentype;base64,${btoa(m)});`,S=`@font-face {font-family:"${f}";src:${x}}`;this.insertRule(S);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const T of[e.loadedName,f]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=T,C.append(R)}this._document.body.append(C),u(f,()=>{C.remove(),t.complete()})}}Ah=new WeakMap;class loe{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${EU(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){_e(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}}function coe(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function uoe(n){if(Fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Uy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Av(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Hb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,doe=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",hoe=Jie.bind(null,Hb,doe);var oo,Gw;class foe{constructor(){A(this,oo,new Map);A(this,Gw,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};d(this,Gw).then(()=>{for(const[r]of d(this,oo))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){_e("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}d(this,oo).set(t,r)}removeEventListener(e,t){const s=d(this,oo).get(t);s==null||s(),d(this,oo).delete(t)}terminate(){for(const[,e]of d(this,oo))e==null||e();d(this,oo).clear()}}oo=new WeakMap,Gw=new WeakMap;const Rv={DATA:1,ERROR:2},It={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function TI(){}function Jn(n){if(n instanceof Rl||n instanceof bb||n instanceof CI||n instanceof kw||n instanceof pC)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||et('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Rl(n.message);case"InvalidPDFException":return new bb(n.message);case"PasswordException":return new CI(n.message,n.code);case"ResponseException":return new kw(n.message,n.status,n.missing);case"UnknownErrorException":return new pC(n.message,n.details)}return new pC(n.message,n.toString())}var Rh,rr,iB,oB,aB,d0;class Lp{constructor(e,t,s){A(this,rr);A(this,Rh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",k(this,rr,iB).bind(this),{signal:d(this,Rh).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},r),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:It.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Ft(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:It.CANCEL,streamId:i,reason:Jn(c)}),u.promise}},s)}destroy(){var e;(e=d(this,Rh))==null||e.abort(),E(this,Rh,null)}}Rh=new WeakMap,rr=new WeakSet,iB=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,rr,aB).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Rv.DATA)r.resolve(e.data);else if(e.callback===Rv.ERROR)r.reject(Jn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:Rv.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:Rv.ERROR,callbackId:e.callbackId,reason:Jn(o)})});return}if(e.streamId){k(this,rr,oB).call(this,e);return}t(e.data)},oB=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=u,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:It.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:It.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Ft(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:It.ERROR,streamId:t,reason:Jn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:It.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:It.START_COMPLETE,streamId:t,reason:Jn(c)})})},aB=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case It.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Jn(e.reason));break;case It.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Jn(e.reason));break;case It.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:It.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||TI).then(function(){i.postMessage({sourceName:s,targetName:r,stream:It.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:It.PULL_COMPLETE,streamId:t,reason:Jn(c)})});break;case It.ENQUEUE:if(Ft(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case It.CLOSE:if(Ft(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,rr,d0).call(this,o,t);break;case It.ERROR:Ft(o,"error should have stream controller"),o.controller.error(Jn(e.reason)),k(this,rr,d0).call(this,o,t);break;case It.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Jn(e.reason)),k(this,rr,d0).call(this,o,t);break;case It.CANCEL:if(!a)break;const l=Jn(e.reason);Promise.try(a.onCancel||TI,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:It.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:It.CANCEL_COMPLETE,streamId:t,reason:Jn(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},d0=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var gg;class lB{constructor({enableHWA:e=!1}){A(this,gg,!1);E(this,gg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!d(this,gg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){et("Abstract method `_createCanvas` called.")}}gg=new WeakMap;class poe extends lB{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class cB{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){et("Abstract method `_fetch` called.")}}class AI extends cB{async _fetch(e){const t=await By(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Uy(t)}}class uB{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Mc,kh,ao,lo,bn,Nc,Dc,ne,xn,Fp,wd,h0,xd,dB,Gb,_d,Op,$p,qb,Up;class moe extends uB{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,ne);A(this,Mc);A(this,kh);A(this,ao);A(this,lo);A(this,bn);A(this,Nc);A(this,Dc,0);E(this,lo,t),E(this,bn,s)}addFilter(t){if(!t)return"none";let s=d(this,ne,xn).get(t);if(s)return s;const[r,i,o]=k(this,ne,h0).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=d(this,ne,xn).get(a),s)return d(this,ne,xn).set(t,s),s;const l=`g_${d(this,lo)}_transfer_map_${qt(this,Dc)._++}`,c=k(this,ne,xd).call(this,l);d(this,ne,xn).set(t,c),d(this,ne,xn).set(a,c);const u=k(this,ne,_d).call(this,l);return k(this,ne,$p).call(this,r,i,o,u),c}addHCMFilter(t,s){var w;const r=`${t}-${s}`,i="base";let o=d(this,ne,Fp).get(i);if((o==null?void 0:o.key)===r||(o?((w=o.filter)==null||w.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},d(this,ne,Fp).set(i,o)),!t||!s))return o.url;const a=k(this,ne,Up).call(this,t);t=fe.makeHexColor(...a);const l=k(this,ne,Up).call(this,s);if(s=fe.makeHexColor(...l),d(this,ne,wd).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const _=v/255;c[v]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const u=c.join(","),f=`g_${d(this,lo)}_hcm_filter`,m=o.filter=k(this,ne,_d).call(this,f);k(this,ne,$p).call(this,u,u,u,m),k(this,ne,Gb).call(this,m);const g=(v,_)=>{const x=a[v]/255,S=l[v]/255,C=new Array(_+1);for(let T=0;T<=_;T++)C[T]=x+T/_*(S-x);return C.join(",")};return k(this,ne,$p).call(this,g(0,5),g(1,5),g(2,5),m),o.url=k(this,ne,xd).call(this,f),o.url}addAlphaFilter(t){let s=d(this,ne,xn).get(t);if(s)return s;const[r]=k(this,ne,h0).call(this,[t]),i=`alpha_${r}`;if(s=d(this,ne,xn).get(i),s)return d(this,ne,xn).set(t,s),s;const o=`g_${d(this,lo)}_alpha_map_${qt(this,Dc)._++}`,a=k(this,ne,xd).call(this,o);d(this,ne,xn).set(t,a),d(this,ne,xn).set(i,a);const l=k(this,ne,_d).call(this,o);return k(this,ne,qb).call(this,r,l),a}addLuminosityFilter(t){let s=d(this,ne,xn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=k(this,ne,h0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=d(this,ne,xn).get(i),s)return d(this,ne,xn).set(t,s),s;const o=`g_${d(this,lo)}_luminosity_map_${qt(this,Dc)._++}`,a=k(this,ne,xd).call(this,o);d(this,ne,xn).set(t,a),d(this,ne,xn).set(i,a);const l=k(this,ne,_d).call(this,o);return k(this,ne,dB).call(this,l),t&&k(this,ne,qb).call(this,r,l),a}addHighlightHCMFilter(t,s,r,i,o){var S;const a=`${s}-${r}-${i}-${o}`;let l=d(this,ne,Fp).get(t);if((l==null?void 0:l.key)===a||(l?((S=l.filter)==null||S.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,ne,Fp).set(t,l)),!s||!r))return l.url;const[c,u]=[s,r].map(k(this,ne,Up).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),m=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,w]=[i,o].map(k(this,ne,Up).bind(this));m<f&&([f,m,g,w]=[m,f,w,g]),d(this,ne,wd).style.color="";const v=(C,T,R)=>{const P=new Array(256),I=(m-f)/R,M=C/255,N=(T-C)/(255*R);let L=0;for(let D=0;D<=R;D++){const V=Math.round(f+D*I),G=M+D*N;for(let B=L;B<=V;B++)P[B]=G;L=V+1}for(let D=L;D<256;D++)P[D]=P[L-1];return P.join(",")},_=`g_${d(this,lo)}_hcm_${t}_filter`,x=l.filter=k(this,ne,_d).call(this,_);return k(this,ne,Gb).call(this,x),k(this,ne,$p).call(this,v(g[0],w[0],5),v(g[1],w[1],5),v(g[2],w[2],5),x),l.url=k(this,ne,xd).call(this,_),l.url}destroy(t=!1){var s,r,i,o;t&&((s=d(this,Nc))!=null&&s.size)||((r=d(this,ao))==null||r.parentNode.parentNode.remove(),E(this,ao,null),(i=d(this,kh))==null||i.clear(),E(this,kh,null),(o=d(this,Nc))==null||o.clear(),E(this,Nc,null),E(this,Dc,0))}}Mc=new WeakMap,kh=new WeakMap,ao=new WeakMap,lo=new WeakMap,bn=new WeakMap,Nc=new WeakMap,Dc=new WeakMap,ne=new WeakSet,xn=function(){return d(this,kh)||E(this,kh,new Map)},Fp=function(){return d(this,Nc)||E(this,Nc,new Map)},wd=function(){if(!d(this,ao)){const t=d(this,bn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=d(this,bn).createElementNS(Vi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),E(this,ao,d(this,bn).createElementNS(Vi,"defs")),t.append(r),r.append(d(this,ao)),d(this,bn).body.append(t)}return d(this,ao)},h0=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let m=0;m<256;m++)u[m]=c[m]/255;const f=u.join(",");return[f,f,f]}const[s,r,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=s[c]/255,a[c]=r[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},xd=function(t){if(d(this,Mc)===void 0){E(this,Mc,"");const s=d(this,bn).URL;s!==d(this,bn).baseURI&&(d_(s)?_e('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Mc,CU(s,"")))}return`url(${d(this,Mc)}#${t})`},dB=function(t){const s=d(this,bn).createElementNS(Vi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Gb=function(t){const s=d(this,bn).createElementNS(Vi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},_d=function(t){const s=d(this,bn).createElementNS(Vi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),d(this,ne,wd).append(s),s},Op=function(t,s,r){const i=d(this,bn).createElementNS(Vi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},$p=function(t,s,r,i){const o=d(this,bn).createElementNS(Vi,"feComponentTransfer");i.append(o),k(this,ne,Op).call(this,o,"feFuncR",t),k(this,ne,Op).call(this,o,"feFuncG",s),k(this,ne,Op).call(this,o,"feFuncB",r)},qb=function(t,s){const r=d(this,bn).createElementNS(Vi,"feComponentTransfer");s.append(r),k(this,ne,Op).call(this,r,"feFuncA",t)},Up=function(t){return d(this,ne,wd).style.color=t,t1(getComputedStyle(d(this,ne,wd)).getPropertyValue("color"))};class hB{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){et("Abstract method `_fetch` called.")}}class RI extends hB{async _fetch(e){const t=await By(e,"arraybuffer");return new Uint8Array(t)}}class fB{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){et("Abstract method `_fetch` called.")}}class kI extends fB{async _fetch(e){const t=await By(e,"arraybuffer");return new Uint8Array(t)}}Fn&&_e("Please use the `legacy` build in Node.js environments.");async function s1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class goe extends uB{}class yoe extends lB{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class voe extends cB{async _fetch(e){return s1(e)}}class woe extends hB{async _fetch(e){return s1(e)}}class xoe extends fB{async _fetch(e){return s1(e)}}const dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Wb(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class r1{isModifyingCurrentTransform(){return!1}getPattern(){et("Abstract method `getPattern` called.")}}class _oe extends r1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===dn.STROKE||r===dn.FILL){const o=t.current.getClippedPathBoundingBox(r,wt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=fe.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Wb(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else Wb(e,this._bbox),i=this._createGradient(e);return i}}function yC(n,e,t,s,r,i,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let m;l[t+1]>l[s+1]&&(m=t,t=s,s=m,m=i,i=o,o=m),l[s+1]>l[r+1]&&(m=s,s=r,r=m,m=o,o=a,a=m),l[t+1]>l[s+1]&&(m=t,t=s,s=m,m=i,i=o,o=m);const g=(l[t]+e.offsetX)*e.scaleX,w=(l[t+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,_=(l[s+1]+e.offsetY)*e.scaleY,x=(l[r]+e.offsetX)*e.scaleX,S=(l[r+1]+e.offsetY)*e.scaleY;if(w>=S)return;const C=c[i],T=c[i+1],R=c[i+2],P=c[o],I=c[o+1],M=c[o+2],N=c[a],L=c[a+1],D=c[a+2],V=Math.round(w),G=Math.round(S);let B,j,O,U,$,F,z,ee;for(let Y=V;Y<=G;Y++){if(Y<_){const H=Y<w?0:(w-Y)/(w-_);B=g-(g-v)*H,j=C-(C-P)*H,O=T-(T-I)*H,U=R-(R-M)*H}else{let H;Y>S?H=1:_===S?H=0:H=(_-Y)/(_-S),B=v-(v-x)*H,j=P-(P-N)*H,O=I-(I-L)*H,U=M-(M-D)*H}let te;Y<w?te=0:Y>S?te=1:te=(w-Y)/(w-S),$=g-(g-x)*te,F=C-(C-N)*te,z=T-(T-L)*te,ee=R-(R-D)*te;const he=Math.round(Math.min(B,$)),ke=Math.round(Math.max(B,$));let Pe=f*Y+he*4;for(let H=he;H<=ke;H++)te=(B-H)/(B-$),te<0?te=0:te>1&&(te=1),u[Pe++]=j-(j-F)*te|0,u[Pe++]=O-(O-z)*te|0,u[Pe++]=U-(U-ee)*te|0,u[Pe++]=255}}function Coe(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let f=0;f<c;f++,u++)yC(n,t,s[u],s[u+1],s[u+a],r[u],r[u+1],r[u+a]),yC(n,t,s[u+a+1],s[u+1],s[u+a],r[u+a+1],r[u+1],r[u+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)yC(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class Soe extends r1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),g=c/f,w=u/m,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/w},_=f+2*2,x=m+2*2,S=s.getCanvas("mesh",_,x),C=S.context,T=C.createImageData(f,m);if(t){const P=T.data;for(let I=0,M=P.length;I<M;I+=4)P[I]=t[0],P[I+1]=t[1],P[I+2]=t[2],P[I+3]=255}for(const P of this._figures)Coe(T,P,v);return C.putImageData(T,2,2),{canvas:S.canvas,offsetX:a-2*g,offsetY:l-2*w,scaleX:g,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){Wb(e,this._bbox);const i=new Float32Array(2);if(r===dn.SHADING)fe.singularValueDecompose2dScale(wt(e),i);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;fe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=l}else fe.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===dn.SHADING?null:this._background,t.cachedCanvases);return r!==dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class boe extends r1{getPattern(){return"hotpink"}}function Eoe(n){switch(n[0]){case"RadialAxial":return new _oe(n);case"Mesh":return new Soe(n);case"Dummy":return new boe}throw new Error(`Unknown IR type: ${n[0]}`)}const PI={COLORED:1,UNCOLORED:2},qw=class qw{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:r,tilingType:i,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),u_("TilingType: "+i);const u=t[0],f=t[1],m=t[2],g=t[3],w=m-u,v=g-f,_=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,_);const[x,S]=_;fe.singularValueDecompose2dScale(this.baseTransform,_);const C=x*_[0],T=S*_[1];let R=w,P=v,I=!1,M=!1;const N=Math.ceil(l*C),L=Math.ceil(c*T),D=Math.ceil(w*C),V=Math.ceil(v*T);N>=D?R=l:I=!0,L>=V?P=c:M=!0;const G=this.getSizeAndScale(R,this.ctx.canvas.width,C),B=this.getSizeAndScale(P,this.ctx.canvas.height,T),j=e.cachedCanvases.getCanvas("pattern",G.size,B.size),O=j.context,U=a.createCanvasGraphics(O);if(U.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(U,r,o),O.translate(-G.scale*u,-B.scale*f),U.transform(G.scale,0,0,B.scale,0,0),O.save(),this.clipBbox(U,u,f,m,g),U.baseTransform=wt(U.ctx),U.executeOperatorList(s),U.endDrawing(),O.restore(),I||M){const $=j.canvas;I&&(R=l),M&&(P=c);const F=this.getSizeAndScale(R,this.ctx.canvas.width,C),z=this.getSizeAndScale(P,this.ctx.canvas.height,T),ee=F.size,Y=z.size,te=e.cachedCanvases.getCanvas("pattern-workaround",ee,Y),he=te.context,ke=I?Math.floor(w/l):0,Pe=M?Math.floor(v/c):0;for(let H=0;H<=ke;H++)for(let Te=0;Te<=Pe;Te++)he.drawImage($,ee*H,Y*Te,ee,Y,0,0,ee,Y);return{canvas:te.canvas,scaleX:F.scale,scaleY:z.scale,offsetX:u,offsetY:f}}return{canvas:j.canvas,scaleX:G.scale,scaleY:B.scale,offsetX:u,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(qw.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),fe.axialAlignedBoundingBox([t,s,r,i],wt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case PI.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case PI.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new Hie(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r){let i=s;r!==dn.SHADING&&(i=fe.transform(i,t.baseTransform),this.matrix&&(i=fe.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};q(qw,"MAX_PATTERN_SIZE",3e3);let Kb=qw;function Toe({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=pn.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=s>>3,f=s&7,m=n.length;t=new Uint32Array(t.buffer);let g=0;for(let w=0;w<r;w++){for(const _=e+u;e<_;e++){const x=e<m?n[e]:255;t[g++]=x&128?c:l,t[g++]=x&64?c:l,t[g++]=x&32?c:l,t[g++]=x&16?c:l,t[g++]=x&8?c:l,t[g++]=x&4?c:l,t[g++]=x&2?c:l,t[g++]=x&1?c:l}if(f===0)continue;const v=e<m?n[e++]:255;for(let _=0;_<f;_++)t[g++]=v&1<<7-_?c:l}return{srcPos:e,destPos:g}}const II=16,MI=100,Aoe=15,NI=10,rs=16,vC=new DOMMatrix,ks=new Float32Array(2),$d=new Float32Array([1/0,1/0,-1/0,-1/0]);function Roe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class koe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function kv(n,e,t,s,r,i,o,a,l,c){const[u,f,m,g,w,v]=wt(n);if(f===0&&m===0){const S=o*u+w,C=Math.round(S),T=a*g+v,R=Math.round(T),P=(o+l)*u+w,I=Math.abs(Math.round(P)-C)||1,M=(a+c)*g+v,N=Math.abs(Math.round(M)-R)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),C,R),n.drawImage(e,t,s,r,i,0,0,I,N),n.setTransform(u,f,m,g,w,v),[I,N]}if(u===0&&g===0){const S=a*m+w,C=Math.round(S),T=o*f+v,R=Math.round(T),P=(a+c)*m+w,I=Math.abs(Math.round(P)-C)||1,M=(o+l)*f+v,N=Math.abs(Math.round(M)-R)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,C,R),n.drawImage(e,t,s,r,i,0,0,N,I),n.setTransform(u,f,m,g,w,v),[N,I]}n.drawImage(e,t,s,r,i,o,a,l,c);const _=Math.hypot(u,f),x=Math.hypot(m,g);return[_*l,x*c]}class DI{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",Sb);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",wn.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=$d.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=dn.FILL,t=null){const s=this.minMax.slice();if(e===dn.STROKE){t||et("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,ks);const r=ks[0]*this.lineWidth/2,i=ks[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set($d,0)}getClippedPathBoundingBox(e=dn.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function LI(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%rs,i=(t-r)/rs,o=r===0?i:i+1,a=n.createImageData(s,rs);let l=0,c;const u=e.data,f=a.data;let m,g,w,v;if(e.kind===n0.GRAYSCALE_1BPP){const _=u.byteLength,x=new Uint32Array(f.buffer,0,f.byteLength>>2),S=x.length,C=s+7>>3,T=4294967295,R=pn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<i?rs:r,c=0,g=0;g<w;g++){const P=_-l;let I=0;const M=P>C?s:P*8-7,N=M&-8;let L=0,D=0;for(;I<N;I+=8)D=u[l++],x[c++]=D&128?T:R,x[c++]=D&64?T:R,x[c++]=D&32?T:R,x[c++]=D&16?T:R,x[c++]=D&8?T:R,x[c++]=D&4?T:R,x[c++]=D&2?T:R,x[c++]=D&1?T:R;for(;I<M;I++)L===0&&(D=u[l++],L=128),x[c++]=D&L?T:R,L>>=1}for(;c<S;)x[c++]=0;n.putImageData(a,0,m*rs)}}else if(e.kind===n0.RGBA_32BPP){for(g=0,v=s*rs*4,m=0;m<i;m++)f.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,g),g+=rs;m<o&&(v=s*r*4,f.set(u.subarray(l,l+v)),n.putImageData(a,0,g))}else if(e.kind===n0.RGB_24BPP)for(w=rs,v=s*w,m=0;m<o;m++){for(m>=i&&(w=r,v=s*w),c=0,g=v;g--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,m*rs)}else throw new Error(`bad image kind: ${e.kind}`)}function FI(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%rs,i=(t-r)/rs,o=r===0?i:i+1,a=n.createImageData(s,rs);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const m=f<i?rs:r;({srcPos:l}=Toe({src:c,srcPos:l,dest:u,width:s,height:m,nonBlackColor:0})),n.putImageData(a,0,f*rs)}}function pp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Pv(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function OI(n,e){if(e)return!0;fe.singularValueDecompose2dScale(n,ks);const t=Math.fround(Di.pixelRatio*kl.PDF_TO_CSS_UNITS);return ks[0]<=t&&ks[1]<=t}const Poe=["butt","round","square"],Ioe=["miter","round","bevel"],Moe={},$I={};var Gr,Yb,Jb,Xb;const h1=class h1{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){A(this,Gr);this.ctx=e,this.current=new DI(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new koe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...wt(this.compositeCtx))}this.ctx.save(),Pv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=wt(this.ctx)}executeOperatorList(e,t,s,r){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const c=l-a>NI&&typeof s=="function",u=c?Date.now()+Aoe:0;let f=0;const m=this.commonObjs,g=this.objs;let w;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,s),a;if(w=o[a],w!==Rw.dependency)this[w].apply(this,i[a]);else for(const v of i[a]){const _=v.startsWith("g_")?m:g;if(!_.has(v))return _.get(v,s),a}if(a++,a===l)return a;if(c&&++f>NI){if(Date.now()>u)return s(),a;f=0}}}endDrawing(){k(this,Gr,Yb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,Gr,Jb).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=r,c="prescale1",u,f;for(;i>2&&a>1||o>2&&l>1;){let m=a,g=l;i>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/m),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),u=this.cachedCanvases.getCanvas(c,m,g),f=u.context,f.clearRect(0,0,m,g),f.drawImage(e,0,0,a,l,0,0,m,g),e=u.canvas,a=m,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,i=this.current.fillColor,o=this.current.patternFill,a=wt(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(N),l||(l=new Map,this._cachedBitmapsMap.set(N,l));const L=l.get(c);if(L&&!o){const D=Math.round(Math.min(a[0],a[2])+a[4]),V=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:L,offsetX:D,offsetY:V}}u=L}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),FI(f.context,e));let m=fe.transform(a,[1/s,0,0,-1/r,0,0]);m=fe.transform(m,[1,0,0,1,0,-r]);const g=$d.slice();fe.axialAlignedBoundingBox([0,0,s,r],m,g);const[w,v,_,x]=g,S=Math.round(_-w)||1,C=Math.round(x-v)||1,T=this.cachedCanvases.getCanvas("fillCanvas",S,C),R=T.context,P=w,I=v;R.translate(-P,-I),R.transform(...m),u||(u=this._scaleImage(f.canvas,Yr(R)),u=u.img,l&&o&&l.set(c,u)),R.imageSmoothingEnabled=OI(wt(R),e.interpolate),kv(R,u,0,0,u.width,u.height,0,0,s,r),R.globalCompositeOperation="source-in";const M=fe.transform(Yr(R),[1,0,0,1,-P,-I]);return R.fillStyle=o?i.getPattern(t,this,M,dn.FILL):i,R.fillRect(0,0,s,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Poe[e]}setLineJoin(e){this.ctx.lineJoin=Ioe[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=r.context;i.setTransform(this.suspendedCtx.getTransform()),pp(this.suspendedCtx,i),Roe(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),pp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,l,c,u,f){let m=e.canvas,g=l-u,w=c-f;if(o)if(g<0||w<0||g+s>m.width||w+r>m.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,r),x=_.context;x.drawImage(m,-g,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,s,r),x.globalCompositeOperation="source-over",m=_.canvas,g=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(g,w,s,r),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,w,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,s,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,g,w,s,r,l,c,s,r),t.restore()}save(){this.inSMaskMode&&pp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&pp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o){this.ctx.transform(e,t,s,r,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[r]=t;if(!s){r||(r=t[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,a=r.length;o<a;)switch(r[o++]){case Tv.moveTo:i.moveTo(r[o++],r[o++]);break;case Tv.lineTo:i.lineTo(r[o++],r[o++]);break;case Tv.curveTo:i.bezierCurveTo(r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);break;case Tv.closePath:i.closePath();break;default:_e(`Unrecognized drawing path operator: ${r[o-1]}`);break}r=i}fe.axialAlignedBoundingBox(s,wt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const i=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Yr(s),dn.STROKE),i){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(dn.STROKE,wt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,Yr(s),dn.FILL),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Moe}eoClip(){this.pendingClip=$I}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:o,y:a,fontSize:l,path:c}of e)s.addPath(c,new DOMMatrix(i).preMultiplySelf(r).translate(o,a).scale(l,-l));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||Sb,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&_e("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const i=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${i}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let c=t;t<II?c=II:t>MI&&(c=MI),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,r,i){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,f=c&wn.FILL_STROKE_MASK,m=!!(c&wn.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,w=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||m||g||w)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||w){o.save(),o.translate(t,s),o.scale(u,-u);let _;if((f===wn.FILL||f===wn.FILL_STROKE)&&(r?(_=o.getTransform(),o.setTransform(...r),o.fill(k(this,Gr,Xb).call(this,v,_,r))):o.fill(v)),f===wn.STROKE||f===wn.FILL_STROKE)if(i){_||(_=o.getTransform()),o.setTransform(...i);const{a:x,b:S,c:C,d:T}=_,R=fe.inverseTransform(i),P=fe.transform([x,S,C,T,0,0],R);fe.singularValueDecompose2dScale(P,ks),o.lineWidth*=Math.max(ks[0],ks[1])/u,o.stroke(k(this,Gr,Xb).call(this,v,_,i))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(f===wn.FILL||f===wn.FILL_STROKE)&&o.fillText(e,t,s),(f===wn.STROKE||f===wn.FILL_STROKE)&&o.strokeText(e,t,s);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:wt(o),x:t,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Fe(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,m=s.vertical,g=m?1:-1,w=s.defaultVMetrics,v=r*t.fontMatrix[0],_=t.textRenderingMode===wn.FILL&&!s.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let x,S;if(t.patternFill){i.save();const I=t.fillColor.getPattern(i,this,Yr(i),dn.FILL);x=wt(i),i.restore(),i.fillStyle=I}if(t.patternStroke){i.save();const I=t.strokeColor.getPattern(i,this,Yr(i),dn.STROKE);S=wt(i),i.restore(),i.strokeStyle=I}let C=t.lineWidth;const T=t.textMatrixScale;if(T===0||C===0){const I=t.textRenderingMode&wn.FILL_STROKE_MASK;(I===wn.STROKE||I===wn.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=T;if(o!==1&&(i.scale(o,o),C/=o),i.lineWidth=C,s.isInvalidPDFjsFont){const I=[];let M=0;for(const N of e)I.push(N.unicode),M+=N.width;i.fillText(I.join(""),0,0),t.x+=M*v*u,i.restore(),this.compose();return}let R=0,P;for(P=0;P<f;++P){const I=e[P];if(typeof I=="number"){R+=g*I*r/1e3;continue}let M=!1;const N=(I.isSpace?l:0)+a,L=I.fontChar,D=I.accent;let V,G,B=I.width;if(m){const O=I.vmetric||w,U=-(I.vmetric?O[1]:B*.5)*v,$=O[2]*v;B=O?-O[0]:B,V=U/o,G=(R+$)/o}else V=R/o,G=0;if(s.remeasure&&B>0){const O=i.measureText(L).width*1e3/r*o;if(B<O&&this.isFontSubpixelAAEnabled){const U=B/O;M=!0,i.save(),i.scale(U,1),V/=U}else B!==O&&(V+=(B-O)/2e3*r/o)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(_&&!D)i.fillText(L,V,G);else if(this.paintChar(L,V,G,x,S),D){const O=V+r*D.offset.x/o,U=G-r*D.offset.y/o;this.paintChar(D.fontChar,O,U,x,S)}}const j=m?B*v-N*c:B*v+N*c;R+=j,M&&i.restore()}m?t.y-=R:t.x+=R*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,i=s.fontSize,o=s.fontDirection,a=r.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||Sb,m=e.length,g=s.textRenderingMode===wn.INVISIBLE;let w,v,_,x;if(!(g||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(u,o),w=0;w<m;++w){if(v=e[w],typeof v=="number"){x=a*v*i/1e3,this.ctx.translate(x,0),s.x+=x*u;continue}const S=(v.isSpace?c:0)+l,C=r.charProcOperatorList[v.operatorListId];C?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(C),this.restore()):_e(`Type3 character "${v.operatorListId}" is not available.`);const T=[v.width,0];fe.applyTransform(T,f),_=T[0]*i+S,t.translate(_,0),s.x+=_*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,i,o){const a=new Path2D;a.rect(s,r,i-s,o-r),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||wt(this.ctx),r={createCanvasGraphics:i=>new h1(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Kb(e,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Eoe(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Yr(t),dn.SHADING);const r=Yr(t);if(r){const{width:i,height:o}=t.canvas,a=$d.slice();fe.axialAlignedBoundingBox([0,0,i,o],r,a);const[l,c,u,f]=a;this.ctx.fillRect(l,c,u-l,f-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){et("Should not call beginInlineImage")}beginImageData(){et("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=wt(this.ctx),t)){fe.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,r,i,o]=t,a=new Path2D;a.rect(s,r,i-s,o-r),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||u_("TODO: Support non-isolated groups."),e.knockout&&_e("Knockout groups not supported.");const s=wt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=$d.slice();fe.axialAlignedBoundingBox(e.bbox,wt(t),r);const i=[0,0,t.canvas.width,t.canvas.height];r=fe.intersect(r,i)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),c=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),m=f.context;m.translate(-o,-a),m.transform(...s);let g=new Path2D;const[w,v,_,x]=e.bbox;if(g.rect(w,v,_-w,x-v),e.matrix){const S=new Path2D;S.addPath(g,new DOMMatrix(e.matrix)),g=S}m.clip(g),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),pp(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=$d.slice();fe.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,s,r,i){if(k(this,Gr,Yb).call(this),Pv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,fe.singularValueDecompose2dScale(wt(this.ctx),ks);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(ks[0],0,0,-ks[1],0,a*ks[1]),Pv(this.ctx)}else{Pv(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new DI(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,Gr,Jb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this._createMaskCanvas(e),i=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(i,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=wt(a);a.transform(t,s,r,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const m=fe.transform(l,[t,s,r,i,o[u],o[u+1]]);a.drawImage(c.canvas,m[4],m[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const m=this.getObject(o,i);FI(f,m),f.globalCompositeOperation="source-in",f.fillStyle=r?s.getPattern(f,this,Yr(t),dn.FILL):s,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),kv(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){_e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){_e("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[t,0,0,s,r[c],r[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;this.save();const{filter:i}=r;i!=="none"&&i!==""&&(r.filter="none"),r.scale(1/t,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;LI(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,Yr(r));r.imageSmoothingEnabled=OI(wt(r),e.interpolate),kv(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;LI(l,e),r=this.applyTransferMapsToCanvas(l)}for(const i of t)s.save(),s.transform(...i.transform),s.scale(1,-1),kv(s,r,i.x,i.y,i.w,i.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===$I?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=wt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-s*r),c=Math.hypot(t,s),u=Math.hypot(r,i);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),vC.a=1/i,vC.d=1/o;const l=new Path2D;if(l.addPath(e,vC),a.length>0){const c=Math.max(i,o);s.setLineDash(a.map(u=>u/c)),s.lineDashOffset/=c}s.lineWidth=r||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Gr=new WeakSet,Yb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Jb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Xb=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let Zd=h1;for(const n in Rw)Zd.prototype[n]!==void 0&&(Zd.prototype[Rw[n]]=Zd.prototype[n]);var yg,vg;class _i{static get workerPort(){return d(this,yg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,yg,e)}static get workerSrc(){return d(this,vg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,vg,e)}}yg=new WeakMap,vg=new WeakMap,A(_i,yg,null),A(_i,vg,"");var Ph,wg;class Noe{constructor({parsedData:e,rawData:t}){A(this,Ph);A(this,wg);E(this,Ph,e),E(this,wg,t)}getRaw(){return d(this,wg)}get(e){return d(this,Ph).get(e)??null}[Symbol.iterator](){return d(this,Ph).entries()}}Ph=new WeakMap,wg=new WeakMap;const Cd=Symbol("INTERNAL");var xg,_g,Cg,Ih;class Doe{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){A(this,xg,!1);A(this,_g,!1);A(this,Cg,!1);A(this,Ih,!0);E(this,xg,!!(e&As.DISPLAY)),E(this,_g,!!(e&As.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(d(this,Cg))return d(this,Ih);if(!d(this,Ih))return!1;const{print:e,view:t}=this.usage;return d(this,xg)?(t==null?void 0:t.viewState)!=="OFF":d(this,_g)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Cd&&et("Internal method `_setVisible` called."),E(this,Cg,s),E(this,Ih,t)}}xg=new WeakMap,_g=new WeakMap,Cg=new WeakMap,Ih=new WeakMap;var Va,Qe,Mh,Nh,Sg,Qb;class Loe{constructor(e,t=As.DISPLAY){A(this,Sg);A(this,Va,null);A(this,Qe,new Map);A(this,Mh,null);A(this,Nh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,Nh,e.order);for(const s of e.groups)d(this,Qe).set(s.id,new Doe(t,s));if(e.baseState==="OFF")for(const s of d(this,Qe).values())s._setVisible(Cd,!1);for(const s of e.on)d(this,Qe).get(s)._setVisible(Cd,!0);for(const s of e.off)d(this,Qe).get(s)._setVisible(Cd,!1);E(this,Mh,this.getHash())}}isVisible(e){if(d(this,Qe).size===0)return!0;if(!e)return u_("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Qe).has(e.id)?d(this,Qe).get(e.id).visible:(_e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,Sg,Qb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Qe).has(t))return _e(`Optional content group not found: ${t}`),!0;if(d(this,Qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Qe).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!d(this,Qe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Qe).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!d(this,Qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Qe).has(t))return _e(`Optional content group not found: ${t}`),!0;if(d(this,Qe).get(t).visible)return!1}return!0}return _e(`Unknown optional content policy ${e.policy}.`),!0}return _e(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=d(this,Qe).get(e);if(!r){_e(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=d(this,Qe).get(a))==null||i._setVisible(Cd,!1,!0));r._setVisible(Cd,!!t,!0),E(this,Va,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=d(this,Qe).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}E(this,Va,null)}get hasInitialVisibility(){return d(this,Mh)===null||this.getHash()===d(this,Mh)}getOrder(){return d(this,Qe).size?d(this,Nh)?d(this,Nh).slice():[...d(this,Qe).keys()]:null}getGroup(e){return d(this,Qe).get(e)||null}getHash(){if(d(this,Va)!==null)return d(this,Va);const e=new nB;for(const[t,s]of d(this,Qe))e.update(`${t}:${s.visible}`);return E(this,Va,e.hexdigest())}[Symbol.iterator](){return d(this,Qe).entries()}}Va=new WeakMap,Qe=new WeakMap,Mh=new WeakMap,Nh=new WeakMap,Sg=new WeakSet,Qb=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=k(this,Sg,Qb).call(this,i);else if(d(this,Qe).has(i))o=d(this,Qe).get(i).visible;else return _e(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class Foe{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Ft(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Ooe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new $oe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class Ooe{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=ZA(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $oe{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Uoe(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=o(n),t){const u=c(t);return i(u)}if(t=s("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),i(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(u,{fatal:!0}),g=Uy(f);f=m.decode(g),e=!1}catch{}}return f}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),e&&(u=r("iso-8859-1",u))),u}function o(u){const f=[];let m;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(u))!==null;){let[,v,_,x]=m;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[_,x]}const w=[];for(let v=0;v<f.length&&v in f;++v){let[_,x]=f[v];x=a(x),_&&(x=unescape(x),v===0&&(x=l(x))),w.push(x)}return w.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let m=0;m<f.length;++m){const g=f[m].indexOf('"');g!==-1&&(f[m]=f[m].slice(0,g),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const m=u.slice(0,f),w=u.slice(f+1).replace(/^[^']*'/,"");return r(m,w)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,g,w){if(g==="q"||g==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,_){return String.fromCharCode(parseInt(_,16))}),r(m,w);try{w=atob(w)}catch{}return r(m,w)})}return""}function pB(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function h_(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function mB({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function gB(n){const e=n.get("Content-Disposition");if(e){let t=Uoe(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ZA(t))return t}return null}function zy(n,e){return new kw(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function yB(n){return n===200||n===206}function vB(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function wB(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(_e(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Boe{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=pB(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Voe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new joe(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Voe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,vB(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=h_(i.url),!yB(i.status))throw zy(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=mB({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=gB(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Rl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wB(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class joe{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,vB(i,this._withCredentials,this._abortController)).then(a=>{const l=h_(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!yB(a.status))throw zy(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:wB(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const wC=200,xC=206;function zoe(n){const e=n.response;return typeof e!="string"?e:Uy(e).buffer}class Hoe{constructor({url:e,httpHeaders:t,withCredentials:s}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=pB(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=xC):r.expectedStatus=wC,t.responseType="arraybuffer",Ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||wC;if(!(i===wC&&s.expectedStatus===xC)&&i!==s.expectedStatus){s.onError(r.status);return}const a=zoe(r);if(i===xC){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(_e('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Goe{constructor(e){this._source=e,this._manager=new Hoe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new qoe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new Woe(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class qoe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=h_(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=mB({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=gB(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=zy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Woe{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=h_((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=zy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Koe=/^[a-z][a-z0-9\-+.]+:/i;function Yoe(n){if(Koe.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Joe{constructor(e){this.source=e,this.url=Yoe(e.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Xoe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Qoe(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Xoe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=zy(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Rl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Qoe{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const mp=Symbol("INITIAL_DATA");var gs,bg,Zb;class xB{constructor(){A(this,bg);A(this,gs,Object.create(null))}get(e,t=null){if(t){const r=k(this,bg,Zb).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=d(this,gs)[e];if(!s||s.data===mp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=d(this,gs)[e];return!!t&&t.data!==mp}delete(e){const t=d(this,gs)[e];return!t||t.data===mp?!1:(delete d(this,gs)[e],!0)}resolve(e,t=null){const s=k(this,bg,Zb).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in d(this,gs)){const{data:s}=d(this,gs)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}E(this,gs,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,gs)){const{data:t}=d(this,gs)[e];t!==mp&&(yield[e,t])}}}gs=new WeakMap,bg=new WeakSet,Zb=function(e){var t;return(t=d(this,gs))[e]||(t[e]={...Promise.withResolvers(),data:mp})};const Zoe=1e5,UI=30;var tM,ja,ts,Eg,Tg,Lc,co,Ag,Rg,Fc,Dh,Lh,za,Fh,kg,Oh,Oc,Pg,Ig,$h,$c,Mg,Ha,Uh,qo,_B,CB,eE,Ls,f0,tE,SB,bB;const $t=class $t{constructor({textContentSource:e,container:t,viewport:s}){A(this,qo);A(this,ja,Promise.withResolvers());A(this,ts,null);A(this,Eg,!1);A(this,Tg,!!((tM=globalThis.FontInspector)!=null&&tM.enabled));A(this,Lc,null);A(this,co,null);A(this,Ag,0);A(this,Rg,0);A(this,Fc,null);A(this,Dh,null);A(this,Lh,0);A(this,za,0);A(this,Fh,Object.create(null));A(this,kg,[]);A(this,Oh,null);A(this,Oc,[]);A(this,Pg,new WeakMap);A(this,Ig,null);var l;if(e instanceof ReadableStream)E(this,Oh,e);else if(typeof e=="object")E(this,Oh,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,ts,E(this,Dh,t)),E(this,za,s.scale*Di.pixelRatio),E(this,Lh,s.rotation),E(this,co,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;E(this,Ig,[1,0,0,-1,-o,a+i]),E(this,Rg,r),E(this,Ag,i),k(l=$t,Ls,SB).call(l),ju(t,s),d(this,ja).promise.finally(()=>{d($t,Uh).delete(this),E(this,co,null),E(this,Fh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Fc).read().then(({value:t,done:s})=>{if(s){d(this,ja).resolve();return}d(this,Lc)??E(this,Lc,t.lang),Object.assign(d(this,Fh),t.styles),k(this,qo,_B).call(this,t.items),e()},d(this,ja).reject)};return E(this,Fc,d(this,Oh).getReader()),d($t,Uh).add(this),e(),d(this,ja).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Di.pixelRatio,r=e.rotation;if(r!==d(this,Lh)&&(t==null||t(),E(this,Lh,r),ju(d(this,Dh),{rotation:r})),s!==d(this,za)){t==null||t(),E(this,za,s);const o={div:null,properties:null,ctx:k(i=$t,Ls,f0).call(i,d(this,Lc))};for(const a of d(this,Oc))o.properties=d(this,Pg).get(a),o.div=a,k(this,qo,eE).call(this,o)}}cancel(){var t;const e=new Rl("TextLayer task cancelled.");(t=d(this,Fc))==null||t.cancel(e).catch(()=>{}),E(this,Fc,null),d(this,ja).reject(e)}get textDivs(){return d(this,Oc)}get textContentItemsStr(){return d(this,kg)}static cleanup(){if(!(d(this,Uh).size>0)){d(this,$h).clear();for(const{canvas:e}of d(this,$c).values())e.remove();d(this,$c).clear()}}};ja=new WeakMap,ts=new WeakMap,Eg=new WeakMap,Tg=new WeakMap,Lc=new WeakMap,co=new WeakMap,Ag=new WeakMap,Rg=new WeakMap,Fc=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,za=new WeakMap,Fh=new WeakMap,kg=new WeakMap,Oh=new WeakMap,Oc=new WeakMap,Pg=new WeakMap,Ig=new WeakMap,$h=new WeakMap,$c=new WeakMap,Mg=new WeakMap,Ha=new WeakMap,Uh=new WeakMap,qo=new WeakSet,_B=function(e){var r,i;if(d(this,Eg))return;(i=d(this,co)).ctx??(i.ctx=k(r=$t,Ls,f0).call(r,d(this,Lc)));const t=d(this,Oc),s=d(this,kg);for(const o of e){if(t.length>Zoe){_e("Ignoring additional textDivs for performance reasons."),E(this,Eg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,ts);E(this,ts,document.createElement("span")),d(this,ts).classList.add("markedContent"),o.id!==null&&d(this,ts).setAttribute("id",`${o.id}`),a.append(d(this,ts))}else o.type==="endMarkedContent"&&E(this,ts,d(this,ts).parentNode);continue}s.push(o.str),k(this,qo,CB).call(this,o)}},CB=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Oc).push(t);const r=fe.transform(d(this,Ig),e.transform);let i=Math.atan2(r[1],r[0]);const o=d(this,Fh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=d(this,Tg)&&o.fontSubstitution||o.fontFamily;a=$t.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),c=l*k(v=$t,Ls,bB).call(v,a,o,d(this,Lc));let u,f;i===0?(u=r[4],f=r[5]-c):(u=r[4]+c*Math.sin(i),f=r[5]-c*Math.cos(i));const m="calc(var(--total-scale-factor) *",g=t.style;d(this,ts)===d(this,Dh)?(g.left=`${(100*u/d(this,Rg)).toFixed(2)}%`,g.top=`${(100*f/d(this,Ag)).toFixed(2)}%`):(g.left=`${m}${u.toFixed(2)}px)`,g.top=`${m}${f.toFixed(2)}px)`),g.fontSize=`${m}${(d($t,Ha)*l).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,Tg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);_!==x&&Math.max(_,x)/Math.min(_,x)>1.5&&(w=!0)}if(w&&(s.canvasWidth=o.vertical?e.height:e.width),d(this,Pg).set(t,s),d(this,co).div=t,d(this,co).properties=s,k(this,qo,eE).call(this,d(this,co)),s.hasText&&d(this,ts).append(t),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),d(this,ts).append(_)}},eE=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(d($t,Ha)>1&&(o=`scale(${1/d($t,Ha)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:u}=s;k(a=$t,Ls,tE).call(a,r,u*d(this,za),l);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${c*d(this,za)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Ls=new WeakSet,f0=function(e=null){let t=d(this,$c).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,$c).set(e,t),d(this,Mg).set(t,{size:0,family:""})}return t},tE=function(e,t,s){const r=d(this,Mg).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},SB=function(){if(d(this,Ha)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,Ha,e.getBoundingClientRect().height),e.remove()},bB=function(e,t,s){const r=d(this,$h).get(e);if(r)return r;const i=k(this,Ls,f0).call(this,s);i.canvas.width=i.canvas.height=UI,k(this,Ls,tE).call(this,i,UI,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return a?c=a/(a+l):(pn.platform.isFirefox&&_e("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),d(this,$h).set(e,c),c},A($t,Ls),A($t,$h,new Map),A($t,$c,new Map),A($t,Mg,new WeakMap),A($t,Ha,null),A($t,Uh,new Set);let Om=$t;class $m{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if($m.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)r(c)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const eae=100;function EB(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new nE,{docId:t}=e,s=n.url?coe(n.url):null,r=n.data?uoe(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof TB?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof Um?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!d_(n.docBaseUrl)?n.docBaseUrl:null,g=Av(n.cMapUrl),w=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Fn?voe:AI),_=Av(n.iccUrl),x=Av(n.standardFontDataUrl),S=n.StandardFontDataFactory||(Fn?woe:RI),C=Av(n.wasmUrl),T=n.WasmFactory||(Fn?xoe:kI),R=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,M=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Fn,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Fn&&(pn.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,D=typeof n.disableFontFace=="boolean"?n.disableFontFace:Fn,V=n.fontExtraProperties===!0,G=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,j=n.disableRange===!0,O=n.disableStream===!0,U=n.disableAutoFetch===!0,$=n.pdfBug===!0,F=n.CanvasFactory||(Fn?yoe:poe),z=n.FilterFactory||(Fn?goe:moe),ee=n.enableHWA===!0,Y=n.useWasm!==!1,te=l?l.length:n.length??NaN,he=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Fn&&!D,ke=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===AI&&S===RI&&T===kI&&g&&x&&C&&Pp(g,document.baseURI)&&Pp(x,document.baseURI)&&Pp(C,document.baseURI)),Pe=null;Vie(f);const H={canvasFactory:new F({ownerDocument:B,enableHWA:ee}),filterFactory:new z({docId:t,ownerDocument:B}),cMapReaderFactory:ke?null:new v({baseUrl:g,isCompressed:w}),standardFontDataFactory:ke?null:new S({baseUrl:x}),wasmFactory:ke?null:new T({baseUrl:C})};u||(u=Um.create({verbosity:f,port:_i.workerPort}),e._worker=u);const Te={docId:t,apiVersion:"5.3.93",data:r,password:a,disableAutoFetch:U,rangeChunkSize:c,length:te,docBaseUrl:m,enableXfa:G,evaluatorOptions:{maxImageSize:P,disableFontFace:D,ignoreErrors:R,isEvalSupported:I,isOffscreenCanvasSupported:M,isImageDecoderSupported:N,canvasMaxAreaInBytes:L,fontExtraProperties:V,useSystemFonts:he,useWasm:Y,useWorkerFetch:ke,cMapUrl:g,iccUrl:_,standardFontDataUrl:x,wasmUrl:C}},Ne={ownerDocument:B,pdfBug:$,styleElement:Pe,loadingParams:{disableAutoFetch:U,enableXfa:G}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ie=u.messageHandler.sendWithPromise("GetDocRequest",Te,r?[r.buffer]:null);let se;if(l)se=new Foe(l,{disableRange:j,disableStream:O});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const pe=Pp(s)?Boe:Fn?Joe:Goe;se=new pe({url:s,length:te,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:j,disableStream:O})}return Ie.then(pe=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Oe=new Lp(t,pe,u.port),yt=new sae(Oe,e,se,Ne,H);e._transport=yt,Oe.send("Ready",null)})}).catch(e._capability.reject),e}var Ww;const Kw=class Kw{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${qt(Kw,Ww)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Ww=new WeakMap,A(Kw,Ww,0);let nE=Kw;var Uc,Ng,Dg,Lg,Fg;class TB{constructor(e,t,s=!1,r=null){A(this,Uc,Promise.withResolvers());A(this,Ng,[]);A(this,Dg,[]);A(this,Lg,[]);A(this,Fg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){d(this,Fg).push(e)}addProgressListener(e){d(this,Lg).push(e)}addProgressiveReadListener(e){d(this,Dg).push(e)}addProgressiveDoneListener(e){d(this,Ng).push(e)}onDataRange(e,t){for(const s of d(this,Fg))s(e,t)}onDataProgress(e,t){d(this,Uc).promise.then(()=>{for(const s of d(this,Lg))s(e,t)})}onDataProgressiveRead(e){d(this,Uc).promise.then(()=>{for(const t of d(this,Dg))t(e)})}onDataProgressiveDone(){d(this,Uc).promise.then(()=>{for(const e of d(this,Ng))e()})}transportReady(){d(this,Uc).resolve()}requestDataRange(e,t){et("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Uc=new WeakMap,Ng=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,Fg=new WeakMap;class tae{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var uo,Bc,Bp;class nae{constructor(e,t,s,r=!1){A(this,Bc);A(this,uo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new bI:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new xB,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new Vy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:r=ma.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:f=!1}){var T,R;(T=this._stats)==null||T.time("Overall");const m=this._transport.getRenderingIntent(s,r,u,f),{renderingIntent:g,cacheKey:w}=m;E(this,uo,!1),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(w);v||(v=Object.create(null),this._intentStates.set(w,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const _=!!(g&As.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(m));const x=P=>{var I;v.renderTasks.delete(S),_&&E(this,uo,!0),k(this,Bc,Bp).call(this),P?(S.capability.reject(P),this._abortOperatorList({intentState:v,reason:P instanceof Error?P:new Error(P)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new sE({callback:x,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(S);const C=S.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([P,I])=>{var M;if(this.destroyed){x();return}if((M=this._stats)==null||M.time("Rendering"),!(I.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:P,optionalContentConfig:I}),S.operatorListChanged()}).catch(x),C}getOperatorList({intent:e="display",annotationMode:t=ma.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var c;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>$m.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),E(this,uo,!1),Promise.all(e)}cleanup(e=!1){E(this,uo,!0);const t=k(this,Bc,Bp).call(this);return e&&t&&this._stats&&(this._stats=new bI),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&k(this,Bc,Bp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:f,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),u())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();k(this,Bc,Bp).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof QA){let r=eae;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Rl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}uo=new WeakMap,Bc=new WeakSet,Bp=function(){if(!d(this,uo)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,uo,!1),!0};var Ga,br,ho,Vc,Yw,jc,zc,Vn,p0,AB,RB,Vp,Bh,m0;const dt=class dt{constructor({name:e=null,port:t=null,verbosity:s=jie()}={}){A(this,Vn);A(this,Ga,Promise.withResolvers());A(this,br,null);A(this,ho,null);A(this,Vc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(d(dt,zc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(dt,zc).set(t,this),k(this,Vn,AB).call(this,t)}else k(this,Vn,RB).call(this)}get promise(){return d(this,Ga).promise}get port(){return d(this,ho)}get messageHandler(){return d(this,br)}destroy(){var e,t;this.destroyed=!0,(e=d(this,Vc))==null||e.terminate(),E(this,Vc,null),d(dt,zc).delete(d(this,ho)),E(this,ho,null),(t=d(this,br))==null||t.destroy(),E(this,br,null)}static create(e){const t=d(this,zc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new dt(e)}static get workerSrc(){if(_i.workerSrc)return _i.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>d(this,Bh,m0)?d(this,Bh,m0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ga=new WeakMap,br=new WeakMap,ho=new WeakMap,Vc=new WeakMap,Yw=new WeakMap,jc=new WeakMap,zc=new WeakMap,Vn=new WeakSet,p0=function(){d(this,Ga).resolve(),d(this,br).send("configure",{verbosity:this.verbosity})},AB=function(e){E(this,ho,e),E(this,br,new Lp("main","worker",e)),d(this,br).on("ready",()=>{}),k(this,Vn,p0).call(this)},RB=function(){if(d(dt,jc)||d(dt,Bh,m0)){k(this,Vn,Vp).call(this);return}let{workerSrc:e}=dt;try{dt._isSameOrigin(window.location,e)||(e=dt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Lp("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?d(this,Ga).reject(new Error("Worker was destroyed")):k(this,Vn,Vp).call(this)},i=new AbortController;t.addEventListener("error",()=>{d(this,Vc)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}E(this,br,s),E(this,ho,t),E(this,Vc,t),k(this,Vn,p0).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{k(this,Vn,Vp).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{u_("The worker has been disabled.")}k(this,Vn,Vp).call(this)},Vp=function(){d(dt,jc)||(_e("Setting up fake worker."),E(dt,jc,!0)),dt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Ga).reject(new Error("Worker was destroyed"));return}const t=new foe;E(this,ho,t);const s=`fake${qt(dt,Yw)._++}`,r=new Lp(s+"_worker",s,t);e.setup(r,t),E(this,br,new Lp(s,s+"_worker",t)),k(this,Vn,p0).call(this)}).catch(e=>{d(this,Ga).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Bh=new WeakSet,m0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(dt,Bh),A(dt,Yw,0),A(dt,jc,!1),A(dt,zc,new WeakMap),Fn&&(E(dt,jc,!0),_i.workerSrc||(_i.workerSrc="./pdf.worker.mjs")),dt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},dt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},dt.fromPort=e=>{if(eoe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return dt.create(e)};let Um=dt;var fo,di,Vh,jh,po,Hc,jp;class sae{constructor(e,t,s,r,i){A(this,Hc);A(this,fo,new Map);A(this,di,new Map);A(this,Vh,new Map);A(this,jh,new Map);A(this,po,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xB,this.fontLoader=new aoe({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Fe(this,"annotationStorage",new n1)}getRenderingIntent(e,t=ma.ENABLE,s=null,r=!1,i=!1){let o=As.DISPLAY,a=zb;switch(e){case"any":o=As.ANY;break;case"display":break;case"print":o=As.PRINT;break;default:_e(`getRenderingIntent - invalid intent: ${e}`)}const l=o&As.PRINT&&s instanceof rB?s:this.annotationStorage;switch(t){case ma.DISABLE:o+=As.ANNOTATIONS_DISABLE;break;case ma.ENABLE:break;case ma.ENABLE_FORMS:o+=As.ANNOTATIONS_FORMS;break;case ma.ENABLE_STORAGE:o+=As.ANNOTATIONS_STORAGE,a=l.serializable;break;default:_e(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=As.IS_EDITING),i&&(o+=As.OPLIST);const{ids:c,hash:u}=l.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=d(this,po))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of d(this,di).values())e.push(r._destroy());d(this,di).clear(),d(this,Vh).clear(),d(this,jh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),d(this,fo).clear(),this.filterFactory.destroy(),Om.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Rl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Ft(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Ft(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new tae(s,this))}),e.on("DocException",s=>{t._capability.reject(Jn(s))}),e.on("PasswordRequest",s=>{E(this,po,Promise.withResolvers());try{if(!t.onPassword)throw Jn(s);const r=i=>{i instanceof Error?d(this,po).reject(i):d(this,po).resolve({password:i})};t.onPassword(r,s.code)}catch(r){d(this,po).reject(r)}return d(this,po).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;d(this,di).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const u=i.error;_e(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,l=new loe(i,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=i;Ft(c,"The imageRef must be defined.");for(const u of d(this,di).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=d(this,di).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&_e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=d(this,Vh).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&d(this,jh).set(i.refStr,e);const o=new nae(t,i,this,this._params.pdfBug);return d(this,di).set(t,o),o});return d(this,Vh).set(t,r),r}getPageIndex(e){return Hb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Hc,jp).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Hc,jp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,Hc,jp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Hc,jp).call(this,"GetOptionalContentConfig").then(t=>new Loe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,fo).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new Noe(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,fo).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,di).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,fo).clear(),this.filterFactory.destroy(!0),Om.cleanup()}}cachedPageNumber(e){if(!Hb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,jh).get(t)??null}}fo=new WeakMap,di=new WeakMap,Vh=new WeakMap,jh=new WeakMap,po=new WeakMap,Hc=new WeakSet,jp=function(e,t=null){const s=d(this,fo).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return d(this,fo).set(e,r),r};var qa;class rae{constructor(e){A(this,qa,null);q(this,"onContinue",null);q(this,"onError",null);E(this,qa,e)}get promise(){return d(this,qa).capability.promise}cancel(e=0){d(this,qa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,qa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,qa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}qa=new WeakMap;var Wa,Gc;const Zl=class Zl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:m=null}){A(this,Wa,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rae(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(Zl,Gc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Zl,Gc).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:i,background:o}=this.params;this.gfx=new Zd(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),d(this,Wa)&&(window.cancelAnimationFrame(d(this,Wa)),E(this,Wa,null)),d(Zl,Gc).delete(this._canvas),e||(e=new QA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Wa,window.requestAnimationFrame(()=>{E(this,Wa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Zl,Gc).delete(this._canvas),this.callback())))}};Wa=new WeakMap,Gc=new WeakMap,A(Zl,Gc,new WeakSet);let sE=Zl;const iae="5.3.93",oae="cbeef3233";function BI(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function gp(n){return Math.max(0,Math.min(255,255*n))}class VI{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=gp(e),[e,e,e]}static G_HTML([e]){const t=BI(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(gp)}static RGB_HTML(e){return`#${e.map(BI).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[gp(1-Math.min(1,e+r)),gp(1-Math.min(1,s+r)),gp(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class aae{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){et("Abstract method `_createSVG` called.")}}class Mw extends aae{_createSVG(e){return document.createElementNS(Vi,e)}}class kB{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var f,m;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),a&&$m.shouldBuildText(r.name)&&c.push(g)}return{textDivs:c}}const u=[[r,-1,o]];for(;u.length>0;){const[g,w,v]=u.at(-1);if(w+1===g.children.length){u.pop();continue}const _=g.children[++u.at(-1)[1]];if(_===null)continue;const{name:x}=_;if(x==="#text"){const C=document.createTextNode(_.value);c.push(C),v.append(C);continue}const S=(f=_==null?void 0:_.attributes)!=null&&f.xmlns?document.createElementNS(_.attributes.xmlns,x):document.createElement(x);if(v.append(S),_.attributes&&this.setAttributes({html:S,element:_,storage:t,intent:i,linkService:s}),((m=_.children)==null?void 0:m.length)>0)u.push([_,-1,S]);else if(_.value){const C=document.createTextNode(_.value);a&&$m.shouldBuildText(x)&&c.push(C),S.append(C)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const lae=9,Hu=new WeakSet;class jI{static create(e){switch(e.data.annotationType){case Mt.LINK:return new PB(e);case Mt.TEXT:return new cae(e);case Mt.WIDGET:switch(e.data.fieldType){case"Tx":return new uae(e);case"Btn":return e.data.radioButton?new NB(e):e.data.checkBox?new hae(e):new fae(e);case"Ch":return new pae(e);case"Sig":return new dae(e)}return new ed(e);case Mt.POPUP:return new iE(e);case Mt.FREETEXT:return new $B(e);case Mt.LINE:return new gae(e);case Mt.SQUARE:return new yae(e);case Mt.CIRCLE:return new vae(e);case Mt.POLYLINE:return new UB(e);case Mt.CARET:return new xae(e);case Mt.INK:return new i1(e);case Mt.POLYGON:return new wae(e);case Mt.HIGHLIGHT:return new BB(e);case Mt.UNDERLINE:return new _ae(e);case Mt.SQUIGGLY:return new Cae(e);case Mt.STRIKEOUT:return new Sae(e);case Mt.STAMP:return new VB(e);case Mt.FILEATTACHMENT:return new bae(e);default:return new Pt(e)}}}var qc,zh,Hh,Og,rE;const f1=class f1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){A(this,Og);A(this,qc,null);A(this,zh,!1);A(this,Hh,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return f1._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;d(this,qc)||E(this,qc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&k(this,Og,rE).call(this,t),(s=d(this,Hh))==null||s.popup.updateEdited(e)}resetEdited(){var e;d(this,qc)&&(k(this,Og,rE).call(this,d(this,qc).rect),(e=d(this,Hh))==null||e.popup.resetEdited(),E(this,qc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof ed||(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof iE){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(v>0||_>0){const S=`calc(${v}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=S}else if(this instanceof NB){const S=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=S}switch(t.borderStyle.style){case vd.SOLID:o.borderStyle="solid";break;case vd.DASHED:o.borderStyle="dashed";break;case vd.BEVELED:_e("Unimplemented border style: beveled");break;case vd.INSET:_e("Unimplemented border style: inset");break;case vd.UNDERLINE:o.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(E(this,zh,!0),o.borderColor=fe.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const c=fe.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:m,pageY:g}=r.rawDims;o.left=`${100*(c[0]-m)/u}%`,o.top=`${100*(c[1]-g)/f}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(w,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=VI[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:VI[`${o}_rgb`](a)})};return Fe(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,_,x,S]=e.subarray(2,6);if(r===v&&i===_&&t===x&&s===S)return}const{style:o}=this.container;let a;if(d(this,zh)){const{borderColor:v,borderWidth:_}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const l=r-t,c=i-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=u.createElement("defs");f.append(m);const g=u.createElement("clipPath"),w=`clippath_${this.data.id}`;g.setAttribute("id",w),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let v=2,_=e.length;v<_;v+=8){const x=e[v],S=e[v+1],C=e[v+2],T=e[v+3],R=u.createElement("rect"),P=(C-t)/l,I=(i-S)/c,M=(x-C)/l,N=(S-T)/c;R.setAttribute("x",P),R.setAttribute("y",I),R.setAttribute("width",M),R.setAttribute("height",N),g.append(R),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${I}" width="${M}" height="${N}"/>`)}d(this,zh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=E(this,Hh,new iE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){et("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Hu.has(c)){_e(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Hu.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};qc=new WeakMap,zh=new WeakMap,Hh=new WeakMap,Og=new WeakSet,rE=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Pt=f1;var Is,Kl,IB,MB;class PB extends Pt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,Is);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action),i=!0):t.attachment?(k(this,Is,IB).call(this,r,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(k(this,Is,MB).call(this,r,t.setOCGState),i=!0):t.dest?(this._bindLink(r,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&k(this,Is,Kl).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),k(this,Is,Kl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),k(this,Is,Kl).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,Is,Kl).call(this),!this._fieldObjects){_e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const m=new Set(o);for(const g of i){const w=this._fieldObjects[g]||[];for(const{id:v}of w)m.add(v)}for(const g of Object.values(this._fieldObjects))for(const w of g)m.has(w.id)===a&&l.push(w)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,u=[];for(const m of l){const{id:g}=m;switch(u.push(g),m.type){case"text":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;c.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}default:continue}const w=document.querySelector(`[data-element-id="${g}"]`);if(w){if(!Hu.has(w)){_e(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Is=new WeakSet,Kl=function(){this.container.setAttribute("data-internal-link","")},IB=function(t,s,r=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(s.content,s.filename,r),!1},k(this,Is,Kl).call(this)},MB=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),k(this,Is,Kl).call(this)};class cae extends Pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ed extends Pt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[l,c]of s)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,r),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||lae,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(fC*r))||1,f=c/u;o=Math.min(r,l(f/fC))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(c/fC))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=fe.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class uae extends ed{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Hu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const f=this.data.dateFormat||this.data.timeFormat;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(s,"value",g.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",g=>{const w=this.data.defaultFieldValue??"";s.value=u.userValue=w,u.formattedValue=null});let m=g=>{const{formattedValue:w}=u;w!=null&&(g.target.value=w),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{var _;if(u.focused)return;const{target:v}=w;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const v={value(_){u.userValue=_.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),_.target.value=u.userValue},formattedValue(_){const{formattedValue:x}=_.detail;u.formattedValue=x,x!=null&&_.target!==document.activeElement&&(_.target.value=x),e.setValue(t,{formattedValue:x})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var T;const{charLimit:x}=_.detail,{target:S}=_;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let C=u.userValue;!C||C.length<=x||(C=C.slice(0,x),S.value=u.userValue=C,e.setValue(t,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(v,w)}),s.addEventListener("keydown",w=>{var x;u.commitKey=1;let v=-1;if(w.key==="Escape"?v=0:w.key==="Enter"&&!this.data.multiLine?v=2:w.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:_}=w.target;u.lastCommittedValue!==_&&(u.lastCommittedValue=_,u.userValue=_,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const g=m;m=null,s.addEventListener("blur",w=>{var _,x;if(!u.focused||!w.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(u.focused=!1);const{value:v}=w.target;u.userValue=v,u.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),g(w)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",w=>{var P;u.lastCommittedValue=null;const{data:v,target:_}=w,{value:x,selectionStart:S,selectionEnd:C}=_;let T=S,R=C;switch(w.inputType){case"deleteWordBackward":{const I=x.substring(0,S).match(/\w*[^\w]*$/);I&&(T-=I[0].length);break}case"deleteWordForward":{const I=x.substring(S).match(/^[^\w]*\w*/);I&&(R+=I[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(R+=1);break}w.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:T,selEnd:R}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(m&&s.addEventListener("blur",m),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class dae extends ed{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class hae extends ed{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Hu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class NB extends ed{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Hu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const m=u&&f.id===s;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fae extends PB{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class pae extends ed{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Hu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),o=()=>{u.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:m,multiple:g}=r;return g?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{const f={value(m){o==null||o();const g=m.detail.value,w=new Set(Array.isArray(g)?g:[g]);for(const v of r.options)v.selected=w.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(m){r.multiple=!0},remove(m){const g=r.options,w=m.detail.remove;g[w].selected=!1,r.remove(w),g.length>0&&Array.prototype.findIndex.call(g,_=>_.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(m){const{index:g,displayValue:w,exportValue:v}=m.detail.insert,_=r.children[g],x=document.createElement("option");x.textContent=w,x.value=v,_?_.before(x):r.append(x),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},items(m){const{items:g}=m.detail;for(;r.length!==0;)r.remove(0);for(const w of g){const{displayValue:v,exportValue:_}=w,x=document.createElement("option");x.textContent=v,x.value=_,r.append(x)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},indices(m){const g=new Set(m.detail.indices);for(const w of m.target.options)w.selected=g.has(w.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,u)}),r.addEventListener("input",u=>{var g;const f=a(!0),m=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class iE extends Pt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Pt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new mae({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${XA}${r}`).join(",")),this.container}}var Gh,Jw,Xw,qh,Wh,Et,mo,Wc,$g,Ug,Kh,go,Er,yo,Bg,vo,Vg,Kc,Yc,tt,g0,oE,DB,LB,FB,OB,y0,v0,aE;class mae{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){A(this,tt);A(this,Gh,k(this,tt,FB).bind(this));A(this,Jw,k(this,tt,aE).bind(this));A(this,Xw,k(this,tt,v0).bind(this));A(this,qh,k(this,tt,y0).bind(this));A(this,Wh,null);A(this,Et,null);A(this,mo,null);A(this,Wc,null);A(this,$g,null);A(this,Ug,null);A(this,Kh,null);A(this,go,!1);A(this,Er,null);A(this,yo,null);A(this,Bg,null);A(this,vo,null);A(this,Vg,null);A(this,Kc,null);A(this,Yc,!1);var m;E(this,Et,e),E(this,Vg,r),E(this,mo,o),E(this,vo,a),E(this,Ug,l),E(this,Wh,t),E(this,Bg,c),E(this,Kh,u),E(this,$g,s),E(this,Wc,e1.toDateObject(i)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",d(this,qh)),g.addEventListener("mouseenter",d(this,Xw)),g.addEventListener("mouseleave",d(this,Jw)),g.classList.add("popupTriggerArea");for(const g of s)(m=g.container)==null||m.addEventListener("keydown",d(this,Gh));d(this,Et).hidden=!0,f&&k(this,tt,y0).call(this)}render(){if(d(this,Er))return;const e=E(this,Er,document.createElement("div"));if(e.className="popup",d(this,Wh)){const i=e.style.outlineColor=fe.makeHexColor(...d(this,Wh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=d(this,Vg),e.append(t),d(this,Wc)){const i=document.createElement("time");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Wc).valueOf()})),i.dateTime=d(this,Wc).toISOString(),t.append(i)}const r=d(this,tt,g0);if(r)kB.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(d(this,mo));e.append(i)}d(this,Et).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,o=r.length;i<o;++i){const a=r[i];s.append(document.createTextNode(a)),i<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;d(this,Kc)||E(this,Kc,{contentsObj:d(this,mo),richText:d(this,vo)}),e&&E(this,yo,null),t&&(E(this,vo,k(this,tt,LB).call(this,t)),E(this,mo,null)),(s=d(this,Er))==null||s.remove(),E(this,Er,null)}resetEdited(){var e;d(this,Kc)&&({contentsObj:qt(this,mo)._,richText:qt(this,vo)._}=d(this,Kc),E(this,Kc,null),(e=d(this,Er))==null||e.remove(),E(this,Er,null),E(this,yo,null))}forceHide(){E(this,Yc,this.isVisible),d(this,Yc)&&(d(this,Et).hidden=!0)}maybeShow(){d(this,Yc)&&(d(this,Er)||k(this,tt,v0).call(this),E(this,Yc,!1),d(this,Et).hidden=!1)}get isVisible(){return d(this,Et).hidden===!1}}Gh=new WeakMap,Jw=new WeakMap,Xw=new WeakMap,qh=new WeakMap,Wh=new WeakMap,Et=new WeakMap,mo=new WeakMap,Wc=new WeakMap,$g=new WeakMap,Ug=new WeakMap,Kh=new WeakMap,go=new WeakMap,Er=new WeakMap,yo=new WeakMap,Bg=new WeakMap,vo=new WeakMap,Vg=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,tt=new WeakSet,g0=function(){const e=d(this,vo),t=d(this,mo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,vo).html||null},oE=function(){var e,t,s;return((s=(t=(e=d(this,tt,g0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},DB=function(){var e,t,s;return((s=(t=(e=d(this,tt,g0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},LB=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:d(this,tt,DB),fontSize:d(this,tt,oE)?`calc(${d(this,tt,oE)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},FB=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,go))&&k(this,tt,y0).call(this)},OB=function(){if(d(this,yo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=d(this,Ug);let o=!!d(this,Kh),a=o?d(this,Kh):d(this,Bg);for(const w of d(this,$g))if(!a||fe.intersect(w.data.rect,a)!==null){a=w.data.rect,o=!0;break}const l=fe.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,m=l[1];E(this,yo,[100*(f-r)/t,100*(m-i)/s]);const{style:g}=d(this,Et);g.left=`${d(this,yo)[0]}%`,g.top=`${d(this,yo)[1]}%`},y0=function(){E(this,go,!d(this,go)),d(this,go)?(k(this,tt,v0).call(this),d(this,Et).addEventListener("click",d(this,qh)),d(this,Et).addEventListener("keydown",d(this,Gh))):(k(this,tt,aE).call(this),d(this,Et).removeEventListener("click",d(this,qh)),d(this,Et).removeEventListener("keydown",d(this,Gh)))},v0=function(){d(this,Er)||this.render(),this.isVisible?d(this,go)&&d(this,Et).classList.add("focused"):(k(this,tt,OB).call(this),d(this,Et).hidden=!1,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)+1e3)},aE=function(){d(this,Et).classList.remove("focused"),!(d(this,go)||!this.isVisible)&&(d(this,Et).hidden=!0,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)-1e3)};class $B extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var jg;class gae extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,jg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=E(this,jg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,jg)}addHighlightArea(){this.container.classList.add("highlightArea")}}jg=new WeakMap;var zg;class yae extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,zg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=E(this,zg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}zg=new WeakMap;var Hg;class vae extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Hg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=E(this,Hg,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Hg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hg=new WeakMap;var Gg;class UB extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Gg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,m=s.length;f<m;f+=2){const g=s[f]-t[0],w=t[3]-s[f+1];c.push(`${g},${w}`)}c=c.join(" ");const u=E(this,Gg,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gg=new WeakMap;class wae extends UB{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class xae extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var qg,Jc,Wg,lE;class i1 extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Wg);A(this,qg,null);A(this,Jc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xe.HIGHLIGHT:xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:c}=k(this,Wg,lE).call(this,s,t),u=this.svgFactory.create(l,c,!0),f=E(this,qg,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let m=0,g=r.length;m<g;m++){const w=this.svgFactory.createElement(this.svgElementName);d(this,Jc).push(w),w.setAttribute("points",r[m].join(",")),f.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=d(this,qg);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,l=d(this,Jc).length;a<l;a++)d(this,Jc)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:c}=k(this,Wg,lE).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Jc)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap,Jc=new WeakMap,Wg=new WeakSet,lE=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class BB extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class _ae extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Cae extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Sae extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class VB extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Kg,Yg,cE;class bae extends Pt{constructor(t){var r;super(t,{isRenderable:!0});A(this,Yg);A(this,Kg,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,Yg,cE).bind(this)),E(this,Kg,r);const{isMac:i}=pn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,Yg,cE).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return d(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap,Yg=new WeakSet,cE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Jg,Xc,Ka,Xg,Ml,dE,hE;const p1=class p1{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a}){A(this,Ml);A(this,Jg,null);A(this,Xc,null);A(this,Ka,new Map);A(this,Xg,null);this.div=e,E(this,Jg,t),E(this,Xc,s),E(this,Xg,a||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return d(this,Ka).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;ju(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Mw,annotationStorage:e.annotationStorage||new n1,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Mt.POPUP;if(l){const f=r.get(a.id);if(!f)continue;i.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const c=jI.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=r.get(a.popupRef);f?f.push(c):r.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await k(this,Ml,dE).call(this,u,a.id,i.elements),c._isEditable&&(d(this,Ka).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}k(this,Ml,hE).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Mw,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=p1._defaultBorderStyle),s.data=r;const i=jI.create(s);if(!i.isRenderable)continue;const o=i.render();await k(this,Ml,dE).call(this,o,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ju(t,{rotation:e.rotation}),k(this,Ml,hE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Ka).values())}getEditableAnnotation(e){return d(this,Ka).get(e)}static get _defaultBorderStyle(){return Fe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:vd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Jg=new WeakMap,Xc=new WeakMap,Ka=new WeakMap,Xg=new WeakMap,Ml=new WeakSet,dE=async function(e,t,s){var a,l;const r=e.firstChild||e,i=r.id=`${XA}${t}`,o=await((a=d(this,Xg))==null?void 0:a.getAriaAttributes(i));if(o)for(const[c,u]of o)r.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),(l=d(this,Jg))==null||l.moveElementInDOM(this.div,e,r,!1))},hE=function(){var t;if(!d(this,Xc))return;const e=this.div;for(const[s,r]of d(this,Xc)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=d(this,Ka).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}d(this,Xc).clear()};let uE=p1;const Iv=/\r\n?|\n/g;var Tr,ys,Qg,Qc,vs,Ot,jB,zB,HB,w0,Oo,x0,_0,GB,pE,qB;const st=class st extends it{constructor(t){super({...t,name:"freeTextEditor"});A(this,Ot);A(this,Tr);A(this,ys,"");A(this,Qg,`${this.id}-editor`);A(this,Qc,null);A(this,vs);E(this,Tr,t.color||st._defaultColor||it._defaultLineColor),E(this,vs,t.fontSize||st._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=st.prototype,s=o=>o.isEmpty(),r=zu.TRANSLATE_SMALL,i=zu.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new jy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){it.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Ue.FREETEXT_SIZE:st._defaultFontSize=s;break;case Ue.FREETEXT_COLOR:st._defaultColor=s;break}}updateParams(t,s){switch(t){case Ue.FREETEXT_SIZE:k(this,Ot,jB).call(this,s);break;case Ue.FREETEXT_COLOR:k(this,Ot,zB).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,st._defaultFontSize],[Ue.FREETEXT_COLOR,st._defaultColor||it._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,d(this,vs)],[Ue.FREETEXT_COLOR,d(this,Tr)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-st._internalPadding*t,-(st._internalPadding+d(this,vs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,Qc,new AbortController);const t=this._uiManager.combinedSignal(d(this,Qc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,Qg)),this._isDraggable=!0,(t=d(this,Qc))==null||t.abort(),E(this,Qc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,ys),s=E(this,ys,k(this,Ot,HB).call(this).trimEnd());if(t===s)return;const r=i=>{if(E(this,ys,i),!i){this.remove();return}k(this,Ot,_0).call(this),this._uiManager.rebuild(this),k(this,Ot,w0).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),k(this,Ot,w0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){st._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,Qg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${d(this,vs)}px * var(--total-scale-factor))`,r.color=d(this,Tr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[m,g]=this.pageTranslation;let w,v;switch(this.rotation){case 0:w=t+(a[0]-m)/u,v=s+this.height-(a[1]-g)/f;break;case 90:w=t+(a[0]-m)/u,v=s-(a[1]-g)/f,[l,c]=[c,-l];break;case 180:w=t-this.width+(a[0]-m)/u,v=s-(a[1]-g)/f,[l,c]=[-l,-c];break;case 270:w=t+(a[0]-m-this.height*f)/u,v=s+(a[1]-g-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(w*i,v*o,l,c)}else this._moveAfterPaste(t,s);k(this,Ot,_0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,v,_;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(w=st,Oo,pE).call(w,s.getData("text")||"").replaceAll(Iv,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const x=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(Iv,"")),x!==this.editorDiv){let S=u;for(const C of this.editorDiv.childNodes){if(C===x){S=f;continue}S.push(k(v=st,Oo,x0).call(v,C))}}u.push(l.nodeValue.slice(0,c).replaceAll(Iv,""))}else if(l===this.editorDiv){let x=u,S=0;for(const C of this.editorDiv.childNodes)S++===c&&(x=f),x.push(k(_=st,Oo,x0).call(_,C))}E(this,ys,`${u.join(`
`)}${i}${f.join(`
`)}`),k(this,Ot,_0).call(this);const m=new Range;let g=Math.sumPrecise(u.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const S=x.nodeValue.length;if(g<=S){m.setStart(x,g),m.setEnd(x,g);break}g-=S}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,r){var a;let i=null;if(t instanceof $B){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:m,popupRef:g},textContent:w,textPosition:v,parent:{page:{pageNumber:_}}}=t;if(!w||w.length===0)return null;i=t={annotationType:xe.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:v,pageIndex:_-1,rect:u.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:g}}const o=await super.deserialize(t,s,r);return E(o,vs,t.fontSize),E(o,Tr,fe.makeHexColor(...t.color)),E(o,ys,k(a=st,Oo,pE).call(a,t.value)),o._initialData=i,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=st._internalPadding*this.parentScale,r=this.getRect(s,s),i=it._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,Tr)),o={annotationType:xe.FREETEXT,color:i,fontSize:d(this,vs),value:k(this,Ot,GB).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!k(this,Ot,qB).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:r}=s;r.fontSize=`calc(${d(this,vs)}px * var(--total-scale-factor))`,r.color=d(this,Tr),s.replaceChildren();for(const o of d(this,ys).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const i=st._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:d(this,ys)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Tr=new WeakMap,ys=new WeakMap,Qg=new WeakMap,Qc=new WeakMap,vs=new WeakMap,Ot=new WeakSet,jB=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-d(this,vs))*this.parentScale),E(this,vs,i),k(this,Ot,w0).call(this)},r=d(this,vs);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zB=function(t){const s=i=>{E(this,Tr,this.editorDiv.style.color=i)},r=d(this,Tr);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},HB=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=st,Oo,x0).call(r,i)),s=i);return t.join(`
`)},w0=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Oo=new WeakSet,x0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Iv,"")},_0=function(){if(this.editorDiv.replaceChildren(),!!d(this,ys))for(const t of d(this,ys).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},GB=function(){return d(this,ys).replaceAll(""," ")},pE=function(t){return t.replaceAll(" ","")},qB=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},A(st,Oo),q(st,"_freeTextDefaultContent",""),q(st,"_internalPadding",0),q(st,"_defaultColor",null),q(st,"_defaultFontSize",10),q(st,"_type","freetext"),q(st,"_editorType",xe.FREETEXT);let fE=st;class re{toSVGPath(){et("Abstract method `toSVGPath` must be implemented.")}get box(){et("Abstract getter `box` must be implemented.")}serialize(e,t){et("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}q(re,"PRECISION",1e-4);var ws,Ar,Yh,Jh,hi,Me,Zc,eu,Zg,ey,Xh,Qh,Ya,ty,Qw,Zw,Gt,zp,WB,KB,YB,JB,XB,QB;const Wi=class Wi{constructor({x:e,y:t},s,r,i,o,a=0){A(this,Gt);A(this,ws);A(this,Ar,[]);A(this,Yh);A(this,Jh);A(this,hi,[]);A(this,Me,new Float32Array(18));A(this,Zc);A(this,eu);A(this,Zg);A(this,ey);A(this,Xh);A(this,Qh);A(this,Ya,[]);E(this,ws,s),E(this,Qh,i*r),E(this,Jh,o),d(this,Me).set([NaN,NaN,NaN,NaN,e,t],6),E(this,Yh,a),E(this,ey,d(Wi,ty)*r),E(this,Zg,d(Wi,Zw)*r),E(this,Xh,r),d(this,Ya).push(e,t)}isEmpty(){return isNaN(d(this,Me)[8])}add({x:e,y:t}){var N;E(this,Zc,e),E(this,eu,t);const[s,r,i,o]=d(this,ws);let[a,l,c,u]=d(this,Me).subarray(8,12);const f=e-c,m=t-u,g=Math.hypot(f,m);if(g<d(this,Zg))return!1;const w=g-d(this,ey),v=w/g,_=v*f,x=v*m;let S=a,C=l;a=c,l=u,c+=_,u+=x,(N=d(this,Ya))==null||N.push(e,t);const T=-x/w,R=_/w,P=T*d(this,Qh),I=R*d(this,Qh);return d(this,Me).set(d(this,Me).subarray(2,8),0),d(this,Me).set([c+P,u+I],4),d(this,Me).set(d(this,Me).subarray(14,18),12),d(this,Me).set([c-P,u-I],16),isNaN(d(this,Me)[6])?(d(this,hi).length===0&&(d(this,Me).set([a+P,l+I],2),d(this,hi).push(NaN,NaN,NaN,NaN,(a+P-s)/i,(l+I-r)/o),d(this,Me).set([a-P,l-I],14),d(this,Ar).push(NaN,NaN,NaN,NaN,(a-P-s)/i,(l-I-r)/o)),d(this,Me).set([S,C,a,l,c,u],6),!this.isEmpty()):(d(this,Me).set([S,C,a,l,c,u],6),Math.abs(Math.atan2(C-l,S-a)-Math.atan2(x,_))<Math.PI/2?([a,l,c,u]=d(this,Me).subarray(2,6),d(this,hi).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/i,((l+u)/2-r)/o),[a,l,S,C]=d(this,Me).subarray(14,18),d(this,Ar).push(NaN,NaN,NaN,NaN,((S+a)/2-s)/i,((C+l)/2-r)/o),!0):([S,C,a,l,c,u]=d(this,Me).subarray(0,6),d(this,hi).push(((S+5*a)/6-s)/i,((C+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+u)/6-r)/o,((a+c)/2-s)/i,((l+u)/2-r)/o),[c,u,a,l,S,C]=d(this,Me).subarray(12,18),d(this,Ar).push(((S+5*a)/6-s)/i,((C+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+u)/6-r)/o,((a+c)/2-s)/i,((l+u)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,hi),t=d(this,Ar);if(isNaN(d(this,Me)[6])&&!this.isEmpty())return k(this,Gt,WB).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,Gt,YB).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,Gt,KB).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new ZB(e,t,s,r,i,o)}getOutlines(){var f;const e=d(this,hi),t=d(this,Ar),s=d(this,Me),[r,i,o,a]=d(this,ws),l=new Float32Array((((f=d(this,Ya))==null?void 0:f.length)??0)+2);for(let m=0,g=l.length-2;m<g;m+=2)l[m]=(d(this,Ya)[m]-r)/o,l[m+1]=(d(this,Ya)[m+1]-i)/a;if(l[l.length-2]=(d(this,Zc)-r)/o,l[l.length-1]=(d(this,eu)-i)/a,isNaN(s[6])&&!this.isEmpty())return k(this,Gt,JB).call(this,l);const c=new Float32Array(d(this,hi).length+24+d(this,Ar).length);let u=e.length;for(let m=0;m<u;m+=2){if(isNaN(e[m])){c[m]=c[m+1]=NaN;continue}c[m]=e[m],c[m+1]=e[m+1]}u=k(this,Gt,QB).call(this,c,u);for(let m=t.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(t[m+g])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[m+g],c[u+1]=t[m+g+1],u+=2}return k(this,Gt,XB).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,ws),d(this,Xh),d(this,Yh),d(this,Jh))}};ws=new WeakMap,Ar=new WeakMap,Yh=new WeakMap,Jh=new WeakMap,hi=new WeakMap,Me=new WeakMap,Zc=new WeakMap,eu=new WeakMap,Zg=new WeakMap,ey=new WeakMap,Xh=new WeakMap,Qh=new WeakMap,Ya=new WeakMap,ty=new WeakMap,Qw=new WeakMap,Zw=new WeakMap,Gt=new WeakSet,zp=function(){const e=d(this,Me).subarray(4,6),t=d(this,Me).subarray(16,18),[s,r,i,o]=d(this,ws);return[(d(this,Zc)+(e[0]-t[0])/2-s)/i,(d(this,eu)+(e[1]-t[1])/2-r)/o,(d(this,Zc)+(t[0]-e[0])/2-s)/i,(d(this,eu)+(t[1]-e[1])/2-r)/o]},WB=function(){const[e,t,s,r]=d(this,ws),[i,o,a,l]=k(this,Gt,zp).call(this);return`M${(d(this,Me)[2]-e)/s} ${(d(this,Me)[3]-t)/r} L${(d(this,Me)[4]-e)/s} ${(d(this,Me)[5]-t)/r} L${i} ${o} L${a} ${l} L${(d(this,Me)[16]-e)/s} ${(d(this,Me)[17]-t)/r} L${(d(this,Me)[14]-e)/s} ${(d(this,Me)[15]-t)/r} Z`},KB=function(e){const t=d(this,Ar);e.push(`L${t[4]} ${t[5]} Z`)},YB=function(e){const[t,s,r,i]=d(this,ws),o=d(this,Me).subarray(4,6),a=d(this,Me).subarray(16,18),[l,c,u,f]=k(this,Gt,zp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${l} ${c} L${u} ${f} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},JB=function(e){const t=d(this,Me),[s,r,i,o]=d(this,ws),[a,l,c,u]=k(this,Gt,zp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,d(this,ws),d(this,Xh),d(this,Yh),d(this,Jh))},XB=function(e,t){const s=d(this,Ar);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},QB=function(e,t){const s=d(this,Me).subarray(4,6),r=d(this,Me).subarray(16,18),[i,o,a,l]=d(this,ws),[c,u,f,m]=k(this,Gt,zp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],t),t+=24},A(Wi,ty,8),A(Wi,Qw,2),A(Wi,Zw,d(Wi,ty)+d(Wi,Qw));let Nw=Wi;var Zh,tu,wo,ny,xs,sy,Rt,ex,e4;class ZB extends re{constructor(t,s,r,i,o,a){super();A(this,ex);A(this,Zh);A(this,tu,new Float32Array(4));A(this,wo);A(this,ny);A(this,xs);A(this,sy);A(this,Rt);E(this,Rt,t),E(this,xs,s),E(this,Zh,r),E(this,sy,i),E(this,wo,o),E(this,ny,a),this.lastPoint=[NaN,NaN],k(this,ex,e4).call(this,a);const[l,c,u,f]=d(this,tu);for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-l)/u,t[m+1]=(t[m+1]-c)/f;for(let m=0,g=s.length;m<g;m+=2)s[m]=(s[m]-l)/u,s[m+1]=(s[m+1]-c)/f}toSVGPath(){const t=[`M${d(this,Rt)[4]} ${d(this,Rt)[5]}`];for(let s=6,r=d(this,Rt).length;s<r;s+=6){if(isNaN(d(this,Rt)[s])){t.push(`L${d(this,Rt)[s+4]} ${d(this,Rt)[s+5]}`);continue}t.push(`C${d(this,Rt)[s]} ${d(this,Rt)[s+1]} ${d(this,Rt)[s+2]} ${d(this,Rt)[s+3]} ${d(this,Rt)[s+4]} ${d(this,Rt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,l=i-s;let c,u;switch(o){case 0:c=re._rescale(d(this,Rt),t,i,a,-l),u=re._rescale(d(this,xs),t,i,a,-l);break;case 90:c=re._rescaleAndSwap(d(this,Rt),t,s,a,l),u=re._rescaleAndSwap(d(this,xs),t,s,a,l);break;case 180:c=re._rescale(d(this,Rt),r,s,-a,l),u=re._rescale(d(this,xs),r,s,-a,l);break;case 270:c=re._rescaleAndSwap(d(this,Rt),r,i,-a,-l),u=re._rescaleAndSwap(d(this,xs),r,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,tu)}newOutliner(t,s,r,i,o,a=0){return new Nw(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=d(this,tu),[l,c,u,f]=d(this,Zh),m=o*u,g=a*f,w=r*u+l,v=i*f+c,_=this.newOutliner({x:d(this,xs)[0]*m+w,y:d(this,xs)[1]*g+v},d(this,Zh),d(this,sy),t,d(this,ny),s??d(this,wo));for(let x=2;x<d(this,xs).length;x+=2)_.add({x:d(this,xs)[x]*m+w,y:d(this,xs)[x+1]*g+v});return _.getOutlines()}}Zh=new WeakMap,tu=new WeakMap,wo=new WeakMap,ny=new WeakMap,xs=new WeakMap,sy=new WeakMap,Rt=new WeakMap,ex=new WeakSet,e4=function(t){const s=d(this,Rt);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,l=i;const c=t?Math.max:Math.min;for(let f=6,m=s.length;f<m;f+=6){const g=s[f+4],w=s[f+5];if(isNaN(s[f]))fe.pointBoundingBox(g,w,o),l<w?(a=g,l=w):l===w&&(a=c(a,g));else{const v=[1/0,1/0,-1/0,-1/0];fe.bezierBoundingBox(r,i,...s.slice(f,f+6),v),fe.rectBoundingBox(...v,o),l<v[3]?(a=v[2],l=v[3]):l===v[3]&&(a=c(a,v[2]))}r=g,i=w}const u=d(this,tu);u[0]=o[0]-d(this,wo),u[1]=o[1]-d(this,wo),u[2]=o[2]-o[0]+2*d(this,wo),u[3]=o[3]-o[1]+2*d(this,wo),this.lastPoint=[a,l]};var ry,iy,Ja,Rr,zn,t4,C0,n4,s4,gE;class mE{constructor(e,t=0,s=0,r=!0){A(this,zn);A(this,ry);A(this,iy);A(this,Ja,[]);A(this,Rr,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:w,width:v,height:_}of e){const x=Math.floor((g-t)/o)*o,S=Math.ceil((g+v+t)/o)*o,C=Math.floor((w-t)/o)*o,T=Math.ceil((w+_+t)/o)*o,R=[x,C,T,!0],P=[S,C,T,!1];d(this,Ja).push(R,P),fe.rectBoundingBox(x,C,S,T,i)}const a=i[2]-i[0]+2*s,l=i[3]-i[1]+2*s,c=i[0]-s,u=i[1]-s,f=d(this,Ja).at(r?-1:-2),m=[f[0],f[2]];for(const g of d(this,Ja)){const[w,v,_]=g;g[0]=(w-c)/a,g[1]=(v-u)/l,g[2]=(_-u)/l}E(this,ry,new Float32Array([c,u,a,l])),E(this,iy,m)}getOutlines(){d(this,Ja).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of d(this,Ja))t[3]?(e.push(...k(this,zn,gE).call(this,t)),k(this,zn,n4).call(this,t)):(k(this,zn,s4).call(this,t),e.push(...k(this,zn,gE).call(this,t)));return k(this,zn,t4).call(this,e)}}ry=new WeakMap,iy=new WeakMap,Ja=new WeakMap,Rr=new WeakMap,zn=new WeakSet,t4=function(e){const t=[],s=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,u,f]=o;s.delete(o);let m=a,g=l;for(i=[a,c],r.push(i);;){let w;if(s.has(u))w=u;else if(s.has(f))w=f;else break;s.delete(w),[a,l,c,u,f]=w,m!==a&&(i.push(m,g,a,g===l?l:c),m=a),g=g===l?c:l}i.push(m,g)}return new Eae(r,d(this,ry),d(this,iy))},C0=function(e){const t=d(this,Rr);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},n4=function([,e,t]){const s=k(this,zn,C0).call(this,e);d(this,Rr).splice(s,0,[e,t])},s4=function([,e,t]){const s=k(this,zn,C0).call(this,e);for(let r=s;r<d(this,Rr).length;r++){const[i,o]=d(this,Rr)[r];if(i!==e)break;if(i===e&&o===t){d(this,Rr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=d(this,Rr)[r];if(i!==e)break;if(i===e&&o===t){d(this,Rr).splice(r,1);return}}},gE=function(e){const[t,s,r]=e,i=[[t,s,r]],o=k(this,zn,C0).call(this,r);for(let a=0;a<o;a++){const[l,c]=d(this,Rr)[a];for(let u=0,f=i.length;u<f;u++){const[,m,g]=i[u];if(!(c<=m||g<=l)){if(m>=l){if(g>c)i[u][1]=c;else{if(f===1)return[];i.splice(u,1),u--,f--}continue}i[u][2]=l,g>c&&i.push([t,c,g])}}}return i};var oy,ef;class Eae extends re{constructor(t,s,r){super();A(this,oy);A(this,ef);E(this,ef,t),E(this,oy,s),this.lastPoint=r}toSVGPath(){const t=[];for(const s of d(this,ef)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],l=r-t,c=i-s;for(const u of d(this,ef)){const f=new Array(u.length);for(let m=0;m<u.length;m+=2)f[m]=t+u[m]*l,f[m+1]=i-u[m+1]*c;a.push(f)}return a}get box(){return d(this,oy)}get classNamesForOutlining(){return["highlightOutline"]}}oy=new WeakMap,ef=new WeakMap;class yE extends Nw{newFreeDrawOutline(e,t,s,r,i,o){return new Tae(e,t,s,r,i,o)}}class Tae extends ZB{newOutliner(e,t,s,r,i,o=0){return new yE(e,t,s,r,i,o)}}var _s,nu,tf,Vt,ay,nf,xo,ly,Xa,kr,sf,cy,Ze,vE,wE,xE,Yl,r4,oa;const Xn=class Xn{constructor({editor:e=null,uiManager:t=null}){A(this,Ze);A(this,_s,null);A(this,nu,null);A(this,tf);A(this,Vt,null);A(this,ay,!1);A(this,nf,!1);A(this,xo,null);A(this,ly);A(this,Xa,null);A(this,kr,null);A(this,sf);var s,r;e?(E(this,nf,!1),E(this,sf,Ue.HIGHLIGHT_COLOR),E(this,xo,e)):(E(this,nf,!0),E(this,sf,Ue.HIGHLIGHT_DEFAULT_COLOR)),E(this,kr,(e==null?void 0:e._uiManager)||t),E(this,ly,d(this,kr)._eventBus),E(this,tf,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=d(this,kr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),d(Xn,cy)||E(Xn,cy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fe(this,"_keyboardManager",new jy([[["Escape","mac+Escape"],Xn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xn.prototype._moveToPrevious],[["Home","mac+Home"],Xn.prototype._moveToBeginning],[["End","mac+End"],Xn.prototype._moveToEnd]]))}renderButton(){const e=E(this,_s,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,xo)&&(e.ariaControls=`${d(this,xo).id}_colorpicker_dropdown`);const t=d(this,kr)._signal;e.addEventListener("click",k(this,Ze,Yl).bind(this),{signal:t}),e.addEventListener("keydown",k(this,Ze,xE).bind(this),{signal:t});const s=E(this,nu,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=d(this,tf),e.append(s),e}renderMainDropdown(){const e=E(this,Vt,k(this,Ze,vE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,_s)){k(this,Ze,Yl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,Ze,wE).call(this,t,e)}_moveToNext(e){var t,s;if(!d(this,Ze,oa)){k(this,Ze,Yl).call(this,e);return}if(e.target===d(this,_s)){(t=d(this,Vt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=d(this,Vt))==null?void 0:t.firstChild)||e.target===d(this,_s)){d(this,Ze,oa)&&this._hideDropdownFromKeyboard();return}d(this,Ze,oa)||k(this,Ze,Yl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!d(this,Ze,oa)){k(this,Ze,Yl).call(this,e);return}(t=d(this,Vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Ze,oa)){k(this,Ze,Yl).call(this,e);return}(t=d(this,Vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Vt))==null||e.classList.add("hidden"),d(this,_s).ariaExpanded="false",(t=d(this,Xa))==null||t.abort(),E(this,Xa,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,nf)){if(!d(this,Ze,oa)){(e=d(this,xo))==null||e.unselect();return}this.hideDropdown(),d(this,_s).focus({preventScroll:!0,focusVisible:d(this,ay)})}}updateColor(e){if(d(this,nu)&&(d(this,nu).style.backgroundColor=e),!d(this,Vt))return;const t=d(this,kr).highlightColors.values();for(const s of d(this,Vt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,_s))==null||e.remove(),E(this,_s,null),E(this,nu,null),(t=d(this,Vt))==null||t.remove(),E(this,Vt,null)}};_s=new WeakMap,nu=new WeakMap,tf=new WeakMap,Vt=new WeakMap,ay=new WeakMap,nf=new WeakMap,xo=new WeakMap,ly=new WeakMap,Xa=new WeakMap,kr=new WeakMap,sf=new WeakMap,cy=new WeakMap,Ze=new WeakSet,vE=function(){const e=document.createElement("div"),t=d(this,kr)._signal;e.addEventListener("contextmenu",Hr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,xo)&&(e.id=`${d(this,xo).id}_colorpicker_dropdown`);for(const[s,r]of d(this,kr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",d(Xn,cy)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===d(this,tf),i.addEventListener("click",k(this,Ze,wE).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,Ze,xE).bind(this),{signal:t}),e},wE=function(e,t){t.stopPropagation(),d(this,ly).dispatch("switchannotationeditorparams",{source:this,type:d(this,sf),value:e})},xE=function(e){Xn._keyboardManager.exec(this,e)},Yl=function(e){if(d(this,Ze,oa)){this.hideDropdown();return}if(E(this,ay,e.detail===0),d(this,Xa)||(E(this,Xa,new AbortController),window.addEventListener("pointerdown",k(this,Ze,r4).bind(this),{signal:d(this,kr).combinedSignal(d(this,Xa))})),d(this,_s).ariaExpanded="true",d(this,Vt)){d(this,Vt).classList.remove("hidden");return}const t=E(this,Vt,k(this,Ze,vE).call(this));d(this,_s).append(t)},r4=function(e){var t;(t=d(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},oa=function(){return d(this,Vt)&&!d(this,Vt).classList.contains("hidden")},A(Xn,cy,null);let Dw=Xn;var rf,uy,_o,su,dy,ns,hy,fy,ru,Ws,Cs,an,of,Co,En,af,Ks,py,be,_E,S0,i4,o4,a4,CE,Jl,Zs,Sd,l4,b0,Hp,c4,u4,d4,h4,f4;const Ge=class Ge extends it{constructor(t){super({...t,name:"highlightEditor"});A(this,be);A(this,rf,null);A(this,uy,0);A(this,_o);A(this,su,null);A(this,dy,null);A(this,ns,null);A(this,hy,null);A(this,fy,0);A(this,ru,null);A(this,Ws,null);A(this,Cs,null);A(this,an,!1);A(this,of,null);A(this,Co);A(this,En,null);A(this,af,"");A(this,Ks);A(this,py,"");this.color=t.color||Ge._defaultColor,E(this,Ks,t.thickness||Ge._defaultThickness),E(this,Co,t.opacity||Ge._defaultOpacity),E(this,_o,t.boxes||null),E(this,py,t.methodOfCreation||""),E(this,af,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(E(this,an,!0),k(this,be,S0).call(this,t),k(this,be,Jl).call(this)):d(this,_o)&&(E(this,rf,t.anchorNode),E(this,uy,t.anchorOffset),E(this,hy,t.focusNode),E(this,fy,t.focusOffset),k(this,be,_E).call(this),k(this,be,Jl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ge.prototype;return Fe(this,"_keyboardManager",new jy([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,an)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Ks),methodOfCreation:d(this,py)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;it.initialize(t,s),Ge._defaultColor||(Ge._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Ue.HIGHLIGHT_DEFAULT_COLOR:Ge._defaultColor=s;break;case Ue.HIGHLIGHT_THICKNESS:Ge._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return d(this,of)}updateParams(t,s){switch(t){case Ue.HIGHLIGHT_COLOR:k(this,be,i4).call(this,s);break;case Ue.HIGHLIGHT_THICKNESS:k(this,be,o4).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Ge._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Ge._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Ge._defaultColor],[Ue.HIGHLIGHT_THICKNESS,d(this,Ks)||Ge._defaultThickness],[Ue.HIGHLIGHT_FREE,d(this,an)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,dy,new Dw({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,be,Hp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,k(this,be,Hp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,be,CE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,be,Jl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?k(this,be,CE).call(this):t&&(k(this,be,Jl).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;d(this,an)?(t=(t-this.rotation+360)%360,r=k(i=Ge,Zs,Sd).call(i,d(this,Ws).box,t)):r=k(o=Ge,Zs,Sd).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(d(this,Cs),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(d(this,En),{bbox:k(a=Ge,Zs,Sd).call(a,d(this,ns).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,af)&&(t.setAttribute("aria-label",d(this,af)),t.setAttribute("role","mark")),d(this,an)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,be,l4).bind(this),{signal:this._uiManager._signal});const s=E(this,ru,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=d(this,su);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),MU(this,d(this,ru),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,be,b0).call(this,!0);break;case 1:case 3:k(this,be,b0).call(this,!1);break}}select(){var t;super.select(),d(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{selected:!1}}),d(this,an)||k(this,be,b0).call(this,!1))}get _mustFixPosition(){return!d(this,an)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Cs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,En),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:l,width:c,height:u}=r.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),g=w=>{f.abort(),k(this,Zs,h4).call(this,t,w)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Hr,{signal:m}),r.addEventListener("pointermove",k(this,Zs,d4).bind(this,t),{signal:m}),this._freeHighlight=new yE({x:i,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var v,_,x,S;let i=null;if(t instanceof BB){const{data:{quadPoints:C,rect:T,rotation:R,id:P,color:I,opacity:M,popupRef:N},parent:{page:{pageNumber:L}}}=t;i=t={annotationType:xe.HIGHLIGHT,color:Array.from(I),opacity:M,quadPoints:C,boxes:null,pageIndex:L-1,rect:T.slice(0),rotation:R,annotationElementId:P,id:P,deleted:!1,popupRef:N}}else if(t instanceof i1){const{data:{inkLists:C,rect:T,rotation:R,id:P,color:I,borderStyle:{rawWidth:M},popupRef:N},parent:{page:{pageNumber:L}}}=t;i=t={annotationType:xe.HIGHLIGHT,color:Array.from(I),thickness:M,inkLists:C,boxes:null,pageIndex:L-1,rect:T.slice(0),rotation:R,annotationElementId:P,id:P,deleted:!1,popupRef:N}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,s,r);u.color=fe.makeHexColor(...o),E(u,Co,c||1),l&&E(u,Ks,t.thickness),u._initialData=i;const[f,m]=u.pageDimensions,[g,w]=u.pageTranslation;if(a){const C=E(u,_o,[]);for(let T=0;T<a.length;T+=8)C.push({x:(a[T]-g)/f,y:1-(a[T+1]-w)/m,width:(a[T+2]-a[T])/f,height:(a[T+1]-a[T+5])/m});k(v=u,be,_E).call(v),k(_=u,be,Jl).call(_),u.rotate(u.rotation)}else if(l){E(u,an,!0);const C=l[0],T={x:C[0]-g,y:m-(C[1]-w)},R=new yE(T,[0,0,f,m],1,d(u,Ks)/2,!0,.001);for(let M=0,N=C.length;M<N;M+=2)T.x=C[M]-g,T.y=m-(C[M+1]-w),R.add(T);const{id:P,clipPathId:I}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:R.toSVGPath()}},!0,!0);k(x=u,be,S0).call(x,{highlightOutlines:R.getOutlines(),highlightId:P,clipPathId:I}),k(S=u,be,Jl).call(S),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=it._colorManager.convert(this.color),i={annotationType:xe.HIGHLIGHT,color:r,opacity:d(this,Co),thickness:d(this,Ks),quadPoints:k(this,be,c4).call(this),outlines:k(this,be,u4).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:k(this,be,Hp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,be,f4).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};rf=new WeakMap,uy=new WeakMap,_o=new WeakMap,su=new WeakMap,dy=new WeakMap,ns=new WeakMap,hy=new WeakMap,fy=new WeakMap,ru=new WeakMap,Ws=new WeakMap,Cs=new WeakMap,an=new WeakMap,of=new WeakMap,Co=new WeakMap,En=new WeakMap,af=new WeakMap,Ks=new WeakMap,py=new WeakMap,be=new WeakSet,_E=function(){const t=new mE(d(this,_o),.001);E(this,Ws,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,Ws).box;const s=new mE(d(this,_o),.0025,.001,this._uiManager.direction==="ltr");E(this,ns,s.getOutlines());const{lastPoint:r}=d(this,ns);E(this,of,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},S0=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,m;if(E(this,Ws,t),E(this,ns,t.getNewOutline(d(this,Ks)/2+1.5,.0025)),s>=0)E(this,Cs,s),E(this,su,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,En,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,ns).box,path:{d:d(this,ns).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Cs),{bbox:k(f=Ge,Zs,Sd).call(f,d(this,Ws).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,En),{bbox:k(m=Ge,Zs,Sd).call(m,d(this,ns).box,g),path:{d:d(this,ns).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[g,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*w/g,this.height=c*g/w;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[g,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*w/g,this.height=c*g/w;break}}const{lastPoint:u}=d(this,ns);E(this,of,[(u[0]-o)/l,(u[1]-a)/c])},i4=function(t){const s=(o,a)=>{var l,c;this.color=o,E(this,Co,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Cs),{root:{fill:o,"fill-opacity":a}}),(c=d(this,dy))==null||c.updateColor(o)},r=this.color,i=d(this,Co);this.addCommands({cmd:s.bind(this,t,Ge._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},o4=function(t){const s=d(this,Ks),r=i=>{E(this,Ks,i),k(this,be,a4).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},a4=function(t){if(!d(this,an))return;k(this,be,S0).call(this,{highlightOutlines:d(this,Ws).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},CE=function(){d(this,Cs)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Cs)),E(this,Cs,null),this.parent.drawLayer.remove(d(this,En)),E(this,En,null))},Jl=function(t=this.parent){d(this,Cs)===null&&({id:qt(this,Cs)._,clipPathId:qt(this,su)._}=t.drawLayer.draw({bbox:d(this,Ws).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Co)},rootClass:{highlight:!0,free:d(this,an)},path:{d:d(this,Ws).toSVGPath()}},!1,!0),E(this,En,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,an)},bbox:d(this,ns).box,path:{d:d(this,ns).toSVGPath()}},d(this,an))),d(this,ru)&&(d(this,ru).style.clipPath=d(this,su)))},Zs=new WeakSet,Sd=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},l4=function(t){Ge._keyboardManager.exec(this,t)},b0=function(t){if(!d(this,rf))return;const s=window.getSelection();t?s.setPosition(d(this,rf),d(this,uy)):s.setPosition(d(this,hy),d(this,fy))},Hp=function(){return d(this,an)?this.rotation:0},c4=function(){if(d(this,an))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=d(this,_o),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:f,height:m}of o){const g=c*t+r,w=(1-u)*s+i;a[l]=a[l+4]=g,a[l+1]=a[l+3]=w,a[l+2]=a[l+6]=g+f*t,a[l+5]=a[l+7]=w-m*s,l+=8}return a},u4=function(t){return d(this,Ws).serialize(t,k(this,be,Hp).call(this))},d4=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},h4=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},f4=function(t){const{color:s}=this._initialData;return t.color.some((r,i)=>r!==s[i])},A(Ge,Zs),q(Ge,"_defaultColor",null),q(Ge,"_defaultOpacity",1),q(Ge,"_defaultThickness",12),q(Ge,"_type","highlight"),q(Ge,"_editorType",xe.HIGHLIGHT),q(Ge,"_freeHighlightId",-1),q(Ge,"_freeHighlight",null),q(Ge,"_freeHighlightClipId","");let Lw=Ge;var iu;class p4{constructor(){A(this,iu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){d(this,iu)[e]=t}toSVGProperties(){const e=d(this,iu);return E(this,iu,Object.create(null)),{root:e}}reset(){E(this,iu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){et("Not implemented")}}iu=new WeakMap;var Ss,lf,Yt,ou,au,Qa,Za,el,lu,je,SE,bE,EE,Gp,m4,E0,qp,bd;const oe=class oe extends it{constructor(t){super(t);A(this,je);A(this,Ss,null);A(this,lf);q(this,"_drawId",null);E(this,lf,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,je,SE).call(this,t),k(this,je,Gp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){et("Not implemented")}static get typesMap(){et("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(d(oe,Yt).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=l=>{var u;i.updateProperty(s,l);const c=d(this,Ss).updateProperty(s,l);c&&k(this,je,qp).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(d(this,Ss).getPathResizingSVGProperties(k(this,je,E0).call(this)),{bbox:k(this,je,bd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(d(this,Ss).getPathResizedSVGProperties(k(this,je,E0).call(this)),{bbox:k(this,je,bd).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,je,bd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(d(this,Ss).getPathTranslatedSVGProperties(k(this,je,E0).call(this),this.parentDimensions),{bbox:k(this,je,bd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,lf)&&(E(this,lf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,je,EE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,je,Gp).call(this),k(this,je,qp).call(this,d(this,Ss).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,je,EE).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,je,Gp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties({bbox:k(this,je,bd).call(this)},d(this,Ss).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,je,qp).call(this,d(this,Ss).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){et("Not implemented")}static startDrawing(t,s,r,i){var _;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=i;if(d(oe,Za)&&d(oe,Za)!==u)return;const{viewport:{rotation:f}}=t,{width:m,height:g}=o.getBoundingClientRect(),w=E(oe,ou,new AbortController),v=t.combinedSignal(w);if(d(oe,Qa)||E(oe,Qa,c),d(oe,Za)??E(oe,Za,u),window.addEventListener("pointerup",x=>{var S;d(oe,Qa)===x.pointerId?this._endDraw(x):(S=d(oe,el))==null||S.delete(x.pointerId)},{signal:v}),window.addEventListener("pointercancel",x=>{var S;d(oe,Qa)===x.pointerId?this._currentParent.endDrawingSession():(S=d(oe,el))==null||S.delete(x.pointerId)},{signal:v}),window.addEventListener("pointerdown",x=>{d(oe,Za)===x.pointerType&&((d(oe,el)||E(oe,el,new Set)).add(x.pointerId),d(oe,Yt).isCancellable()&&(d(oe,Yt).removeLastElement(),d(oe,Yt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Hr,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",x=>{x.timeStamp===d(oe,lu)&&Dt(x)},{signal:v}),t.toggleDrawing(),(_=s._editorUndoBar)==null||_.hide(),d(oe,Yt)){t.drawLayer.updateProperties(this._currentDrawId,d(oe,Yt).startNew(a,l,m,g,f));return}s.updateUIForDefaultProperties(this),E(oe,Yt,this.createDrawerInstance(a,l,m,g,f)),E(oe,au,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(oe,au).toSVGProperties(),d(oe,Yt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(E(oe,lu,-1),!d(oe,Yt))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(d(oe,Qa)===i){if(((o=d(oe,el))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(oe,Yt).add(s,r)),E(oe,lu,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(oe,Yt,null),E(oe,au,null),E(oe,Za,null),E(oe,lu,NaN)),d(oe,ou)&&(d(oe,ou).abort(),E(oe,ou,null),E(oe,Qa,NaN),E(oe,el,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,d(oe,Yt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=d(oe,Yt),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Ue.DRAW_STEP),!d(oe,Yt).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(oe,Yt).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:d(oe,au),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){et("Not implemented")}static async deserialize(t,s,r){var f,m;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=s.viewport,c=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,t),u=await super.deserialize(t,s,r);return u.createDrawingOptions(t),k(f=u,je,SE).call(f,{drawOutlines:c}),k(m=u,je,Gp).call(m),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return d(this,Ss).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ss=new WeakMap,lf=new WeakMap,Yt=new WeakMap,ou=new WeakMap,au=new WeakMap,Qa=new WeakMap,Za=new WeakMap,el=new WeakMap,lu=new WeakMap,je=new WeakSet,SE=function({drawOutlines:t,drawId:s,drawingOptions:r}){E(this,Ss,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=k(this,je,bE).call(this,t,this.parent),k(this,je,qp).call(this,t.box)},bE=function(t,s){const{id:r}=s.drawLayer.draw(oe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},EE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Gp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,je,bE).call(this,d(this,Ss),t)}},m4=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},E0=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},qp=function(t){if([this.x,this.y,this.width,this.height]=k(this,je,m4).call(this,t),this.div){this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)}this._onResized()},bd=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(l/c),i*(c/l),r*(l/c)];case 5:return[1-s,t,r*(l/c),i*(c/l)];case 6:return[1-t-i*(c/l),1-s,i*(c/l),r*(l/c)];case 7:return[s-r*(l/c),1-t-i*(c/l),r*(l/c),i*(c/l)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(c/l),s,i*(c/l),r*(l/c)];case 13:return[1-s-r*(l/c),t-i*(c/l),r*(l/c),i*(c/l)];case 14:return[1-t,1-s-r*(l/c),i*(c/l),r*(l/c)];case 15:return[s,1-t,r*(l/c),i*(c/l)];default:return[t,s,r,i]}},q(oe,"_currentDrawId",-1),q(oe,"_currentParent",null),A(oe,Yt,null),A(oe,ou,null),A(oe,au,null),A(oe,Qa,NaN),A(oe,Za,null),A(oe,el,null),A(oe,lu,NaN),q(oe,"_INNER_MARGIN",3);let Fw=oe;var fi,Jt,Xt,cu,cf,Nn,ln,Ys,uu,du,hu,uf,T0;class Aae{constructor(e,t,s,r,i,o){A(this,uf);A(this,fi,new Float64Array(6));A(this,Jt);A(this,Xt);A(this,cu);A(this,cf);A(this,Nn);A(this,ln,"");A(this,Ys,0);A(this,uu,new Hy);A(this,du);A(this,hu);E(this,du,s),E(this,hu,r),E(this,cu,i),E(this,cf,o),[e,t]=k(this,uf,T0).call(this,e,t);const a=E(this,Jt,[NaN,NaN,NaN,NaN,e,t]);E(this,Nn,[e,t]),E(this,Xt,[{line:a,points:d(this,Nn)}]),d(this,fi).set(a,0)}updateProperty(e,t){e==="stroke-width"&&E(this,cf,t)}isEmpty(){return!d(this,Xt)||d(this,Xt).length===0}isCancellable(){return d(this,Nn).length<=10}add(e,t){[e,t]=k(this,uf,T0).call(this,e,t);const[s,r,i,o]=d(this,fi).subarray(2,6),a=e-i,l=t-o;return Math.hypot(d(this,du)*a,d(this,hu)*l)<=2?null:(d(this,Nn).push(e,t),isNaN(s)?(d(this,fi).set([i,o,e,t],2),d(this,Jt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,fi)[0])&&d(this,Jt).splice(6,6),d(this,fi).set([s,r,i,o,e,t],0),d(this,Jt).push(...re.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(d(this,Nn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){E(this,du,s),E(this,hu,r),E(this,cu,i),[e,t]=k(this,uf,T0).call(this,e,t);const o=E(this,Jt,[NaN,NaN,NaN,NaN,e,t]);E(this,Nn,[e,t]);const a=d(this,Xt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,Xt).push({line:o,points:d(this,Nn)}),d(this,fi).set(o,0),E(this,Ys,0),this.toSVGPath(),null}getLastElement(){return d(this,Xt).at(-1)}setLastElement(e){return d(this,Xt)?(d(this,Xt).push(e),E(this,Jt,e.line),E(this,Nn,e.points),E(this,Ys,0),{path:{d:this.toSVGPath()}}):d(this,uu).setLastElement(e)}removeLastElement(){if(!d(this,Xt))return d(this,uu).removeLastElement();d(this,Xt).pop(),E(this,ln,"");for(let e=0,t=d(this,Xt).length;e<t;e++){const{line:s,points:r}=d(this,Xt)[e];E(this,Jt,s),E(this,Nn,r),E(this,Ys,0),this.toSVGPath()}return{path:{d:d(this,ln)}}}toSVGPath(){const e=re.svgRound(d(this,Jt)[4]),t=re.svgRound(d(this,Jt)[5]);if(d(this,Nn).length===2)return E(this,ln,`${d(this,ln)} M ${e} ${t} Z`),d(this,ln);if(d(this,Nn).length<=6){const r=d(this,ln).lastIndexOf("M");E(this,ln,`${d(this,ln).slice(0,r)} M ${e} ${t}`),E(this,Ys,6)}if(d(this,Nn).length===4){const r=re.svgRound(d(this,Jt)[10]),i=re.svgRound(d(this,Jt)[11]);return E(this,ln,`${d(this,ln)} L ${r} ${i}`),E(this,Ys,12),d(this,ln)}const s=[];d(this,Ys)===0&&(s.push(`M ${e} ${t}`),E(this,Ys,6));for(let r=d(this,Ys),i=d(this,Jt).length;r<i;r+=6){const[o,a,l,c,u,f]=d(this,Jt).slice(r,r+6).map(re.svgRound);s.push(`C${o} ${a} ${l} ${c} ${u} ${f}`)}return E(this,ln,d(this,ln)+s.join(" ")),E(this,Ys,d(this,Jt).length),d(this,ln)}getOutlines(e,t,s,r){const i=d(this,Xt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),d(this,uu).build(d(this,Xt),e,t,s,d(this,cu),d(this,cf),r),E(this,fi,null),E(this,Jt,null),E(this,Xt,null),E(this,ln,null),d(this,uu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}fi=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,cu=new WeakMap,cf=new WeakMap,Nn=new WeakMap,ln=new WeakMap,Ys=new WeakMap,uu=new WeakMap,du=new WeakMap,hu=new WeakMap,uf=new WeakSet,T0=function(e,t){return re._normalizePoint(e,t,d(this,du),d(this,hu),d(this,cu))};var Dn,my,gy,bs,pi,mi,df,hf,fu,hn,zi,g4,y4,v4;class Hy extends re{constructor(){super(...arguments);A(this,hn);A(this,Dn);A(this,my,0);A(this,gy);A(this,bs);A(this,pi);A(this,mi);A(this,df);A(this,hf);A(this,fu)}build(t,s,r,i,o,a,l){E(this,pi,s),E(this,mi,r),E(this,df,i),E(this,hf,o),E(this,fu,a),E(this,gy,l??0),E(this,bs,t),k(this,hn,y4).call(this)}get thickness(){return d(this,fu)}setLastElement(t){return d(this,bs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,bs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of d(this,bs)){if(t.push(`M${re.svgRound(s[4])} ${re.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${re.svgRound(s[10])} ${re.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,l,c,u,f]=s.subarray(r,r+6).map(re.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${f}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],l=[],[c,u,f,m]=k(this,hn,g4).call(this);let g,w,v,_,x,S,C,T,R;switch(d(this,hf)){case 0:R=re._rescale,g=t,w=s+i,v=r,_=-i,x=t+c*r,S=s+(1-u-m)*i,C=t+(c+f)*r,T=s+(1-u)*i;break;case 90:R=re._rescaleAndSwap,g=t,w=s,v=r,_=i,x=t+u*r,S=s+c*i,C=t+(u+m)*r,T=s+(c+f)*i;break;case 180:R=re._rescale,g=t+r,w=s,v=-r,_=i,x=t+(1-c-f)*r,S=s+u*i,C=t+(1-c)*r,T=s+(u+m)*i;break;case 270:R=re._rescaleAndSwap,g=t+r,w=s+i,v=-r,_=-i,x=t+(1-u-m)*r,S=s+(1-c-f)*i,C=t+(1-u)*r,T=s+(1-c)*i;break}for(const{line:P,points:I}of d(this,bs))a.push(R(P,g,w,v,_,o?new Array(P.length):null)),l.push(R(I,g,w,v,_,o?new Array(I.length):null));return{lines:a,points:l,rect:[x,S,C,T]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const f=[];let m,g,w,v,_;switch(c){case 0:_=re._rescale,m=-t/r,g=s/i+1,w=1/r,v=-1/i;break;case 90:_=re._rescaleAndSwap,m=-s/i,g=-t/r,w=1/i,v=1/r;break;case 180:_=re._rescale,m=t/r+1,g=-s/i,w=-1/r,v=1/i;break;case 270:_=re._rescaleAndSwap,m=s/i+1,g=t/r+1,w=-1/i,v=-1/r;break}if(!a){a=[];for(const S of l){const C=S.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(C-2));a.push(T);let[R,P,I,M]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,R,P],0);for(let N=4;N<C;N+=2){const L=S[N],D=S[N+1];T.set(re.createBezierPoints(R,P,I,M,L,D),(N-2)*3),[R,P,I,M]=[I,M,L,D]}}}for(let S=0,C=a.length;S<C;S++)f.push({line:_(a[S].map(T=>T??NaN),m,g,w,v),points:_(l[S].map(T=>T??NaN),m,g,w,v)});const x=new this.prototype.constructor;return x.build(f,r,i,1,c,u,o),x}get box(){return d(this,Dn)}updateProperty(t,s){return t==="stroke-width"?k(this,hn,v4).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=k(this,hn,zi).call(this);E(this,pi,t),E(this,mi,s),E(this,df,r);const[a,l]=k(this,hn,zi).call(this),c=a-i,u=l-o,f=d(this,Dn);return f[0]-=c,f[1]-=u,f[2]+=2*c,f[3]+=2*u,f}updateRotation(t){return E(this,my,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Dn).map(re.svgRound).join(" ")}get defaultProperties(){const[t,s]=d(this,Dn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=d(this,Dn);let r=0,i=0,o=0,a=0,l=0,c=0;switch(d(this,my)){case 90:i=s/t,o=-t/s,l=t;break;case 180:r=-1,a=-1,l=t,c=s;break;case 270:i=-s/t,o=t/s,c=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${re.svgRound(l)} ${re.svgRound(c)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=k(this,hn,zi).call(this),[l,c,u,f]=d(this,Dn);if(Math.abs(u-o)<=re.PRECISION||Math.abs(f-a)<=re.PRECISION){const _=t+r/2-(l+u/2),x=s+i/2-(c+f/2);return{path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:`${this.rotationTransform} translate(${_} ${x})`}}}const m=(r-2*o)/(u-2*o),g=(i-2*a)/(f-2*a),w=u/r,v=f/i;return{path:{"transform-origin":`${re.svgRound(l)} ${re.svgRound(c)}`,transform:`${this.rotationTransform} scale(${w} ${v}) translate(${re.svgRound(o)} ${re.svgRound(a)}) scale(${m} ${g}) translate(${re.svgRound(-o)} ${re.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=k(this,hn,zi).call(this),l=d(this,Dn),[c,u,f,m]=l;if(l[0]=t,l[1]=s,l[2]=r,l[3]=i,Math.abs(f-o)<=re.PRECISION||Math.abs(m-a)<=re.PRECISION){const x=t+r/2-(c+f/2),S=s+i/2-(u+m/2);for(const{line:C,points:T}of d(this,bs))re._translate(C,x,S,C),re._translate(T,x,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*o)/(f-2*o),w=(i-2*a)/(m-2*a),v=-g*(c+o)+t+o,_=-w*(u+a)+s+a;if(g!==1||w!==1||v!==0||_!==0)for(const{line:x,points:S}of d(this,bs))re._rescale(x,v,_,g,w,x),re._rescale(S,v,_,g,w,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=d(this,Dn),l=t-a[0],c=s-a[1];if(d(this,pi)===i&&d(this,mi)===o)for(const{line:u,points:f}of d(this,bs))re._translate(u,l,c,u),re._translate(f,l,c,f);else{const u=d(this,pi)/i,f=d(this,mi)/o;E(this,pi,i),E(this,mi,o);for(const{line:m,points:g}of d(this,bs))re._rescale(m,l,c,u,f,m),re._rescale(g,l,c,u,f,g);a[2]*=u,a[3]*=f}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`}}}get defaultSVGProperties(){const t=d(this,Dn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t[0])} ${re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Dn=new WeakMap,my=new WeakMap,gy=new WeakMap,bs=new WeakMap,pi=new WeakMap,mi=new WeakMap,df=new WeakMap,hf=new WeakMap,fu=new WeakMap,hn=new WeakSet,zi=function(t=d(this,fu)){const s=d(this,gy)+t/2*d(this,df);return d(this,hf)%180===0?[s/d(this,pi),s/d(this,mi)]:[s/d(this,mi),s/d(this,pi)]},g4=function(){const[t,s,r,i]=d(this,Dn),[o,a]=k(this,hn,zi).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},y4=function(){const t=E(this,Dn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of d(this,bs)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)fe.pointBoundingBox(i[l],i[l+1],t);continue}let o=i[4],a=i[5];for(let l=6,c=i.length;l<c;l+=6){const[u,f,m,g,w,v]=i.subarray(l,l+6);fe.bezierBoundingBox(o,a,u,f,m,g,w,v,t),o=w,a=v}}const[s,r]=k(this,hn,zi).call(this);t[0]=On(t[0]-s,0,1),t[1]=On(t[1]-r,0,1),t[2]=On(t[2]+s,0,1),t[3]=On(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},v4=function(t){const[s,r]=k(this,hn,zi).call(this);E(this,fu,t);const[i,o]=k(this,hn,zi).call(this),[a,l]=[i-s,o-r],c=d(this,Dn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class f_ extends p4{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:it._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new f_(this._viewParameters);return e.updateAll(this),e}}var tx,w4;const Bd=class Bd extends Fw{constructor(t){super({...t,name:"inkEditor"});A(this,tx);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){it.initialize(t,s),this._defaultDrawingOptions=new f_(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new Aae(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return Hy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof i1){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:f,opacity:m,borderStyle:{rawWidth:g},popupRef:w},parent:{page:{pageNumber:v}}}=t;i=t={annotationType:xe.INK,color:Array.from(f),thickness:g,opacity:m,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:w}}const o=await super.deserialize(t,s,r);return o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=Bd.getDefaultDrawingOptions({stroke:fe.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:xe.INK,color:it._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:s,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!k(this,tx,w4).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s}),null}};tx=new WeakSet,w4=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},q(Bd,"_type","ink"),q(Bd,"_editorType",xe.INK),q(Bd,"_defaultDrawingOptions",null);let TE=Bd;class AE extends Hy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Mv=8,yp=3;var pu,We,RE,Pr,x4,_4,kE,A0,C4,S4,b4,PE,IE,E4;class Po{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const f=200,m=u.font=`${s} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:_,fontBoundingBoxAscent:x,fontBoundingBoxDescent:S,width:C}=u.measureText(e),T=1.5,R=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||0,C)*T),P=Math.ceil(Math.max(Math.abs(v)+Math.abs(_)||f,Math.abs(x)+Math.abs(S)||f)*T);c=new OffscreenCanvas(R,P),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=m,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,R,P),u.fillStyle="black",u.fillText(e,R*(T-1)/2,P*(3-T)/2);const I=k(this,We,PE).call(this,u.getImageData(0,0,R,P).data),M=k(this,We,b4).call(this,I),N=k(this,We,IE).call(this,M),L=k(this,We,kE).call(this,I,R,P,N);return this.processDrawnLines({lines:{curves:L,width:R,height:P},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,l]=k(this,We,E4).call(this,e),[c,u]=k(this,We,S4).call(this,o,a,l,Math.hypot(a,l)*d(this,pu).sigmaSFactor,d(this,pu).sigmaR,d(this,pu).kernelSize),f=k(this,We,IE).call(this,u),m=k(this,We,kE).call(this,c,a,l,f);return this.processDrawnLines({lines:{curves:m,width:a,height:l},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:l,width:c,height:u}=e,f=e.thickness??0,m=[],g=Math.min(t/c,s/u),w=g/t,v=g/s,_=[];for(const{points:S}of l){const C=o?k(this,We,C4).call(this,S):S;if(!C)continue;_.push(C);const T=C.length,R=new Float32Array(T),P=new Float32Array(3*(T===2?2:T-2));if(m.push({line:P,points:R}),T===2){R[0]=C[0]*w,R[1]=C[1]*v,P.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[I,M,N,L]=C;I*=w,M*=v,N*=w,L*=v,R.set([I,M,N,L],0),P.set([NaN,NaN,NaN,NaN,I,M],0);for(let D=4;D<T;D+=2){const V=R[D]=C[D]*w,G=R[D+1]=C[D+1]*v;P.set(re.createBezierPoints(I,M,N,L,V,G),(D-2)*3),[I,M,N,L]=[N,L,V,G]}}if(m.length===0)return null;const x=a?new AE:new Hy;return x.build(m,t,s,1,r,a?0:f,i),{outline:x,newCurves:_,areContours:a,thickness:f,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,l=0;for(const C of e){l+=C.length;for(let T=2,R=C.length;T<R;T++){const P=C[T]-C[T-2];o=Math.min(o,P),a=Math.max(a,P)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,f=Mv+yp*u,m=new Uint32Array(f);let g=0;m[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,m[g++]=0,m[g++]=r,m[g++]=i,m[g++]=t?0:1,m[g++]=Math.max(0,Math.floor(s??0)),m[g++]=u,m[g++]=c.BYTES_PER_ELEMENT;for(const C of e)m[g++]=C.length-2,m[g++]=C[0],m[g++]=C[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const _=c.prototype.constructor;for(const C of e){const T=new _(C.length-2);for(let R=2,P=C.length;R<P;R++)T[R-2]=C[R]-C[R-2];v.write(T)}v.close();const x=await new Response(w.readable).arrayBuffer(),S=new Uint8Array(x);return EU(S)}static async decompressSignature(e){try{const t=Xie(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const C of s)o||(o=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),o.set(C,a),a+=C.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],f=l[3],m=l[4]===0,g=l[5],w=l[6],v=l[7],_=[],x=(Mv+yp*w)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(v){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(o.buffer,x);break}a=0;for(let C=0;C<w;C++){const T=l[yp*C+Mv],R=new Float32Array(T+2);_.push(R);for(let P=0;P<yp-1;P++)R[P]=l[yp*C+Mv+P+1];for(let P=0;P<T;P++)R[P+2]=R[P]+S[a++]}return{areContours:m,thickness:g,outlines:_,width:u,height:f}}catch(t){return _e(`decompressSignature: ${t}`),null}}}pu=new WeakMap,We=new WeakSet,RE=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},Pr=new WeakMap,x4=function(e,t,s,r,i,o,a){const l=k(this,We,RE).call(this,s,r,i,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,f=d(this,Pr)[2*u],m=d(this,Pr)[2*u+1];if(e[(s+f)*t+(r+m)]!==0)return u}return-1},_4=function(e,t,s,r,i,o,a){const l=k(this,We,RE).call(this,s,r,i,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,f=d(this,Pr)[2*u],m=d(this,Pr)[2*u+1];if(e[(s+f)*t+(r+m)]!==0)return u}return-1},kE=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=e[u]<=r?1:0;for(let u=1;u<s-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*s-1-u]=0;let a=1,l;const c=[];for(let u=1;u<s-1;u++){l=1;for(let f=1;f<t-1;f++){const m=u*t+f,g=o[m];if(g===0)continue;let w=u,v=f;if(g===1&&o[m-1]===0)a+=1,v-=1;else if(g>=1&&o[m+1]===0)a+=1,v+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const _=[f,u],x=v===f+1,S={isHole:x,points:_,id:a,parent:0};c.push(S);let C;for(const D of c)if(D.id===l){C=D;break}C?C.isHole?S.parent=x?C.parent:l:S.parent=x?l:C.parent:S.parent=x?l:0;const T=k(this,We,x4).call(this,o,t,u,f,w,v,0);if(T===-1){o[m]=-a,o[m]!==1&&(l=Math.abs(o[m]));continue}let R=d(this,Pr)[2*T],P=d(this,Pr)[2*T+1];const I=u+R,M=f+P;w=I,v=M;let N=u,L=f;for(;;){const D=k(this,We,_4).call(this,o,t,N,L,w,v,1);R=d(this,Pr)[2*D],P=d(this,Pr)[2*D+1];const V=N+R,G=L+P;_.push(G,V);const B=N*t+L;if(o[B+1]===0?o[B]=-a:o[B]===1&&(o[B]=a),V===u&&G===f&&N===I&&L===M){o[m]!==1&&(l=Math.abs(o[m]));break}else w=N,v=L,N=V,L=G}}}return c},A0=function(e,t,s,r){if(s-t<=4){for(let I=t;I<s-2;I+=2)r.push(e[I],e[I+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,l=e[s-3]-o,c=Math.hypot(a,l),u=a/c,f=l/c,m=u*o-f*i,g=l/a,w=1/c,v=Math.atan(g),_=Math.cos(v),x=Math.sin(v),S=w*(Math.abs(_)+Math.abs(x)),C=w*(1-S+S**2),T=Math.max(Math.atan(Math.abs(x+_)*C),Math.atan(Math.abs(x-_)*C));let R=0,P=t;for(let I=t+2;I<s-2;I+=2){const M=Math.abs(m-u*e[I+1]+f*e[I]);M>R&&(P=I,R=M)}R>(c*T)**2?(k(this,We,A0).call(this,e,t,P+2,r),k(this,We,A0).call(this,e,P,s,r)):r.push(i,o)},C4=function(e){const t=[],s=e.length;return k(this,We,A0).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},S4=function(e,t,s,r,i,o){const a=new Float32Array(o**2),l=-2*r**2,c=o>>1;for(let v=0;v<o;v++){const _=(v-c)**2;for(let x=0;x<o;x++)a[v*o+x]=Math.exp((_+(x-c)**2)/l)}const u=new Float32Array(256),f=-2*i**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/f);const m=e.length,g=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<s;v++)for(let _=0;_<t;_++){const x=v*t+_,S=e[x];let C=0,T=0;for(let P=0;P<o;P++){const I=v+P-c;if(!(I<0||I>=s))for(let M=0;M<o;M++){const N=_+M-c;if(N<0||N>=t)continue;const L=e[I*t+N],D=a[P*o+M]*u[Math.abs(L-S)];C+=L*D,T+=D}}const R=g[x]=Math.round(C/T);w[R]++}return[g,w]},b4=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},PE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,l=s.length;a<l;a++){if(e[(a<<2)+3]===0){r=s[a]=255;continue}const u=s[a]=e[a<<2];u>r&&(r=u),u<i&&(i=u)}const o=255/(r-i);for(let a=0;a<t;a++)s[a]=(s[a]-i)*o;return s},IE=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(t=i;t<256;t++){const l=e[t];l>s&&(t-o>r&&(r=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},E4=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=d(this,pu);let o=s,a=r;if(s>i||r>i){let m=s,g=r,w=Math.log2(Math.max(s,r)/i);const v=Math.floor(w);w=w===v?v-1:v;for(let x=0;x<w;x++){o=Math.ceil(m/2),a=Math.ceil(g/2);const S=new OffscreenCanvas(o,a);S.getContext("2d").drawImage(e,0,0,m,g,0,0,o,a),m=o,g=a,e!==t&&e.close(),e=S.transferToImageBitmap()}const _=Math.min(i/o,i/a);o=Math.round(o*_),a=Math.round(a*_)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[k(this,We,PE).call(this,u),o,a]},A(Po,We),A(Po,pu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Po,Pr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class o1 extends p4{constructor(){super(),super.updateProperties({fill:it._defaultLineColor,"stroke-width":0})}clone(){const e=new o1;return e.updateAll(this),e}}class a1 extends f_{constructor(e){super(e),super.updateProperties({stroke:it._defaultLineColor,"stroke-width":1})}clone(){const e=new a1(this._viewParameters);return e.updateAll(this),e}}var tl,gi,nl,mu;const hs=class hs extends Fw{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,tl,!1);A(this,gi,null);A(this,nl,null);A(this,mu,null);this._willKeepAspectRatio=!0,E(this,nl,t.signatureData||null),E(this,gi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){it.initialize(t,s),this._defaultDrawingOptions=new o1,this._defaultDrawnSignatureOptions=new a1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,gi)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(d(this,nl)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=d(this,nl),{rawDims:{pageWidth:f,pageHeight:m},rotation:g}=this.parent.viewport,w=Po.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:g,innerMargin:hs._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(w,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){E(this,mu,t),this.addEditToolbar()}getUuid(){return d(this,mu)}get description(){return d(this,gi)}set description(t){E(this,gi,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=d(this,nl),a=Math.max(i,o),l=Po.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:l}=E(this,nl,t);E(this,tl,l instanceof AE),this.description=r,this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let c;d(this,tl)?c=hs.getDefaultDrawingOptions():(c=hs._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,f]=this.parentDimensions,[,m]=this.pageDimensions;let g=s/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,f*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Po.process(t,s,r,i,hs._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Po.extractContoursFromText(t,s,r,i,o,hs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Po.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:hs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=hs.getDefaultDrawingOptions():(this._drawingOptions=hs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:xe.SIGNATURE,isSignature:!0,areContours:d(this,tl),color:[0,0,0],thickness:d(this,tl)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:s,points:r},a.uuid=d(this,mu),a.isCopy=!0):a.lines=s,d(this,gi)&&(a.accessibilityData={type:"Figure",alt:d(this,gi)}),a}static deserializeDraw(t,s,r,i,o,a){return a.areContours?AE.deserialize(t,s,r,i,o,a):Hy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return E(i,tl,t.areContours),E(i,gi,((o=t.accessibilityData)==null?void 0:o.alt)||""),E(i,mu,t.uuid),i}};tl=new WeakMap,gi=new WeakMap,nl=new WeakMap,mu=new WeakMap,q(hs,"_type","signature"),q(hs,"_editorType",xe.SIGNATURE),q(hs,"_defaultDrawingOptions",null);let ME=hs;var ft,Qt,sl,So,rl,ff,bo,gu,yi,Es,pf,ze,Wp,Kp,R0,k0,P0,DE,I0,T4;class NE extends it{constructor(t){super({...t,name:"stampEditor"});A(this,ze);A(this,ft,null);A(this,Qt,null);A(this,sl,null);A(this,So,null);A(this,rl,null);A(this,ff,"");A(this,bo,null);A(this,gu,!1);A(this,yi,null);A(this,Es,!1);A(this,pf,!1);E(this,So,t.bitmapUrl),E(this,rl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){it.initialize(t,s)}static isHandlingMimeForPasting(t){return Tb.includes(t)}static paste(t,s){s.pasteEditor({mode:xe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;d(this,Qt)&&(E(this,ft,null),this._uiManager.imageManager.deleteId(d(this,Qt)),(t=d(this,bo))==null||t.remove(),E(this,bo,null),d(this,yi)&&(clearTimeout(d(this,yi)),E(this,yi,null))),super.remove()}rebuild(){if(!this.parent){d(this,Qt)&&k(this,ze,R0).call(this);return}super.rebuild(),this.div!==null&&(d(this,Qt)&&d(this,bo)===null&&k(this,ze,R0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,sl)||d(this,ft)||d(this,So)||d(this,rl)||d(this,Qt)||d(this,gu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,gu)||(d(this,ft)?k(this,ze,k0).call(this):k(this,ze,R0).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(E(this,Qt,r),i&&E(this,ft,i),E(this,gu,!1),k(this,ze,k0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,yi)!==null&&clearTimeout(d(this,yi)),E(this,yi,setTimeout(()=>{E(this,yi,null),k(this,ze,DE).call(this)},200))}copyCanvas(t,s,r=!1){var g;t||(t=224);const{width:i,height:o}=d(this,ft),a=new Di;let l=d(this,ft),c=i,u=o,f=null;if(s){if(i>s||o>s){const M=Math.min(s/i,s/o);c=Math.floor(i*M),u=Math.floor(o*M)}f=document.createElement("canvas");const w=f.width=Math.ceil(c*a.sx),v=f.height=Math.ceil(u*a.sy);d(this,Es)||(l=k(this,ze,P0).call(this,w,v));const _=f.getContext("2d");_.filter=this._uiManager.hcmFilter;let x="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",S="#42414d");const C=15,T=C*a.sx,R=C*a.sy,P=new OffscreenCanvas(T*2,R*2),I=P.getContext("2d");I.fillStyle=x,I.fillRect(0,0,T*2,R*2),I.fillStyle=S,I.fillRect(0,0,T,R),I.fillRect(T,R,T,R),_.fillStyle=_.createPattern(P,"repeat"),_.fillRect(0,0,w,v),_.drawImage(l,0,0,l.width,l.height,0,0,w,v)}let m=null;if(r){let w,v;if(a.symmetric&&l.width<t&&l.height<t)w=l.width,v=l.height;else if(l=d(this,ft),i>t||o>t){const S=Math.min(t/i,t/o);w=Math.floor(i*S),v=Math.floor(o*S),d(this,Es)||(l=k(this,ze,P0).call(this,w,v))}const x=new OffscreenCanvas(w,v).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,w,v),m={width:w,height:v,data:x.getImageData(0,0,w,v).data}}return{canvas:f,width:c,height:u,imageData:m}}static async deserialize(t,s,r){var _;let i=null,o=!1;if(t instanceof VB){const{data:{rect:x,rotation:S,id:C,structParent:T,popupRef:R},container:P,parent:{page:{pageNumber:I}},canvas:M}=t;let N,L;M?(delete t.canvas,{id:N,bitmap:L}=r.imageManager.getFromCanvas(P.id,M),M.remove()):(o=!0,t._hasNoCanvas=!0);const D=((_=await s._structTree.getAriaAttributes(`${XA}${C}`))==null?void 0:_.get("aria-label"))||"";i=t={annotationType:xe.STAMP,bitmapId:N,bitmap:L,pageIndex:I-1,rect:x.slice(0),rotation:S,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:T,popupRef:R}}const a=await super.deserialize(t,s,r),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:f,isSvg:m,accessibilityData:g}=t;o?(r.addMissingCanvas(t.id,a),E(a,gu,!0)):f&&r.imageManager.isValidId(f)?(E(a,Qt,f),c&&E(a,ft,c)):E(a,So,u),E(a,Es,m);const[w,v]=a.pageDimensions;return a.width=(l[2]-l[0])/w,a.height=(l[3]-l[1])/v,g&&(a.altTextData=g),a._initialData=i,E(a,pf,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:xe.STAMP,bitmapId:d(this,Qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Es),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=k(this,ze,I0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=k(this,ze,T4).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const a=d(this,Es)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(d(this,Qt)))s.stamps.set(d(this,Qt),{area:a,serialized:r}),r.bitmap=k(this,ze,I0).call(this,!1);else if(d(this,Es)){const l=s.stamps.get(d(this,Qt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=k(this,ze,I0).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}ft=new WeakMap,Qt=new WeakMap,sl=new WeakMap,So=new WeakMap,rl=new WeakMap,ff=new WeakMap,bo=new WeakMap,gu=new WeakMap,yi=new WeakMap,Es=new WeakMap,pf=new WeakMap,ze=new WeakSet,Wp=function(t,s=!1){if(!t){this.remove();return}E(this,ft,t.bitmap),s||(E(this,Qt,t.id),E(this,Es,t.isSvg)),t.file&&E(this,ff,t.file.name),k(this,ze,k0).call(this)},Kp=function(){if(E(this,sl,null),this._uiManager.enableWaiting(!1),!!d(this,bo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ft)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ft)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},R0=function(){if(d(this,Qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Qt)).then(r=>k(this,ze,Wp).call(this,r,!0)).finally(()=>k(this,ze,Kp).call(this));return}if(d(this,So)){const r=d(this,So);E(this,So,null),this._uiManager.enableWaiting(!0),E(this,sl,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,ze,Wp).call(this,i)).finally(()=>k(this,ze,Kp).call(this)));return}if(d(this,rl)){const r=d(this,rl);E(this,rl,null),this._uiManager.enableWaiting(!0),E(this,sl,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,ze,Wp).call(this,i)).finally(()=>k(this,ze,Kp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Tb.join(",");const s=this._uiManager._signal;E(this,sl,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,ze,Wp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>k(this,ze,Kp).call(this))),t.click()},k0=function(){var f;const{div:t}=this;let{width:s,height:r}=d(this,ft);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const m=Math.min(a*i/s,a*o/r);s*=m,r*=m}const[l,c]=this.parentDimensions;this.setDims(s*l/i,r*c/o),this._uiManager.enableWaiting(!1);const u=E(this,bo,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/i,this.height=r/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,ze,DE).call(this),d(this,pf)||(this.parent.addUndoableEditor(this),E(this,pf,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,ff)&&this.div.setAttribute("aria-description",d(this,ff)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},P0=function(t,s){const{width:r,height:i}=d(this,ft);let o=r,a=i,l=d(this,ft);for(;o>2*t||a>2*s;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},DE=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new Di,a=Math.ceil(r*t*o.sx),l=Math.ceil(i*s*o.sy),c=d(this,bo);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=d(this,Es)?d(this,ft):k(this,ze,P0).call(this,a,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,l)},I0=function(t){if(t){if(d(this,Es)){const i=this._uiManager.imageManager.getSvgUrl(d(this,Qt));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=d(this,ft),s.getContext("2d").drawImage(d(this,ft),0,0),s.toDataURL()}if(d(this,Es)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*kl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*kl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(d(this,ft),0,0,d(this,ft).width,d(this,ft).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(d(this,ft))},T4=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},q(NE,"_type","stamp"),q(NE,"_editorType",xe.STAMP);var yu,mf,vi,il,Eo,Ts,ol,gf,vu,Ir,To,Zt,Ao,al,yf,ue,ll,pt,A4,Xr,FE,OE,M0;const yr=class yr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){A(this,pt);A(this,yu);A(this,mf,!1);A(this,vi,null);A(this,il,null);A(this,Eo,null);A(this,Ts,new Map);A(this,ol,!1);A(this,gf,!1);A(this,vu,!1);A(this,Ir,null);A(this,To,null);A(this,Zt,null);A(this,Ao,null);A(this,al,null);A(this,yf,-1);A(this,ue);const f=[...d(yr,ll).values()];if(!yr._initialized){yr._initialized=!0;for(const m of f)m.initialize(u,e)}e.registerEditorTypes(f),E(this,ue,e),this.pageIndex=t,this.div=s,E(this,yu,i),E(this,vi,o),this.viewport=c,E(this,Zt,l),this.drawLayer=a,this._structTree=r,d(this,ue).addLayer(this)}get isEmpty(){return d(this,Ts).size===0}get isInvisible(){return this.isEmpty&&d(this,ue).getMode()===xe.NONE}updateToolbar(e){d(this,ue).updateToolbar(e)}updateMode(e=d(this,ue).getMode()){switch(k(this,pt,M0).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of d(yr,ll).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,Zt))==null?void 0:t.div)}setEditingState(e){d(this,ue).setEditingState(e)}addCommands(e){d(this,ue).addCommands(e)}cleanUndoStack(e){d(this,ue).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,vi))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;E(this,vu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=d(this,al))==null||s.abort(),E(this,al,null);const e=new Set;for(const r of d(this,Ts).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(d(this,ue).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!d(this,vi)){E(this,vu,!1);return}const t=d(this,vi).getEditableAnnotations();for(const r of t){if(r.hide(),d(this,ue).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}E(this,vu,!1)}disable(){var r;if(E(this,gf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,Zt)&&!d(this,al)){E(this,al,new AbortController);const i=d(this,ue).combinedSignal(d(this,al));d(this,Zt).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,f=d(this,yf);if(u-f>500){E(this,yf,u);return}E(this,yf,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let w;const v=new RegExp(`^${xU}[0-9]+$`);for(const x of g)if(v.test(x.id)){w=x.id;break}if(!w)return;const _=d(this,Ts).get(w);(_==null?void 0:_.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),_.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of d(this,Ts).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(d(this,vi)){const i=d(this,vi).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(d(this,ue).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(d(this,ue).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}k(this,pt,M0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of d(yr,ll).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,gf,!1)}getEditableAnnotation(e){var t;return((t=d(this,vi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,ue).getActive()!==e&&d(this,ue).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,Zt))!=null&&e.div&&!d(this,Ao)){E(this,Ao,new AbortController);const t=d(this,ue).combinedSignal(d(this,Ao));d(this,Zt).div.addEventListener("pointerdown",k(this,pt,A4).bind(this),{signal:t}),d(this,Zt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,Zt))!=null&&e.div&&d(this,Ao)&&(d(this,Ao).abort(),E(this,Ao,null),d(this,Zt).div.classList.remove("highlighting"))}enableClick(){if(d(this,il))return;E(this,il,new AbortController);const e=d(this,ue).combinedSignal(d(this,il));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,il))==null||e.abort(),E(this,il,null)}attach(e){d(this,Ts).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,ue).isDeletedAnnotationElement(t)&&d(this,ue).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,Ts).delete(e.id),(t=d(this,yu))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,gf)&&e.annotationElementId&&d(this,ue).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,ue).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,ue).addDeletedAnnotationElement(e.annotationElementId),it.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,ue).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,vu)),d(this,ue).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,Eo)&&(e._focusEventsAllowed=!1,E(this,Eo,setTimeout(()=>{E(this,Eo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,ue)._signal}),t.focus())},0))),e._structTreeParentId=(s=d(this,yu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return d(this,ue).getId()}combinedSignal(e){return d(this,ue).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,pt,Xr))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,ue).updateMode(e.mode);const{offsetX:s,offsetY:r}=k(this,pt,OE).call(this),i=this.getNextId(),o=k(this,pt,FE).call(this,{parent:this,id:i,x:s,y:r,uiManager:d(this,ue),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=d(yr,ll).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,ue)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=k(this,pt,FE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:d(this,ue),isCentered:t,...s});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(k(this,pt,OE).call(this),!0,e)}setSelected(e){d(this,ue).setSelected(e)}toggleSelected(e){d(this,ue).toggleSelected(e)}unselect(e){d(this,ue).unselect(e)}pointerup(e){var r;const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,ol)||(E(this,ol,!1),(r=d(this,pt,Xr))!=null&&r.isDrawer&&d(this,pt,Xr).supportMultipleDrawings))return;if(!d(this,mf)){E(this,mf,!0);return}const s=d(this,ue).getMode();if(s===xe.STAMP||s===xe.SIGNATURE){d(this,ue).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(d(this,ue).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),d(this,ol)){E(this,ol,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,ol,!0),(r=d(this,pt,Xr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=d(this,ue).getActive();E(this,mf,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,Ir)){d(this,pt,Xr).startDrawing(this,d(this,ue),!1,e);return}d(this,ue).setCurrentDrawingSession(this),E(this,Ir,new AbortController);const t=d(this,ue).combinedSignal(d(this,Ir));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(E(this,To,null),this.commitOrRemove())},{signal:t}),d(this,pt,Xr).startDrawing(this,d(this,ue),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,To,t);return}d(this,To)&&setTimeout(()=>{var t;(t=d(this,To))==null||t.focus(),E(this,To,null)},0)}endDrawingSession(e=!1){return d(this,Ir)?(d(this,ue).setCurrentDrawingSession(null),d(this,Ir).abort(),E(this,Ir,null),E(this,To,null),d(this,pt,Xr).endDrawing(e)):null}findNewParent(e,t,s){const r=d(this,ue).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return d(this,Ir)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Ir)&&d(this,pt,Xr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,ue).getActive())==null?void 0:e.parent)===this&&(d(this,ue).commitOrRemove(),d(this,ue).setActiveEditor(null)),d(this,Eo)&&(clearTimeout(d(this,Eo)),E(this,Eo,null));for(const s of d(this,Ts).values())(t=d(this,yu))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,d(this,Ts).clear(),d(this,ue).removeLayer(this)}render({viewport:e}){this.viewport=e,ju(this.div,e);for(const t of d(this,ue).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,ue).commitOrRemove(),k(this,pt,M0).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ju(this.div,{rotation:s}),t!==s)for(const r of d(this,Ts).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,ue).viewParameters.realScale}};yu=new WeakMap,mf=new WeakMap,vi=new WeakMap,il=new WeakMap,Eo=new WeakMap,Ts=new WeakMap,ol=new WeakMap,gf=new WeakMap,vu=new WeakMap,Ir=new WeakMap,To=new WeakMap,Zt=new WeakMap,Ao=new WeakMap,al=new WeakMap,yf=new WeakMap,ue=new WeakMap,ll=new WeakMap,pt=new WeakSet,A4=function(e){d(this,ue).unselectAll();const{target:t}=e;if(t===d(this,Zt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,Zt).div.contains(t)){const{isMac:s}=pn.platform;if(e.button!==0||e.ctrlKey&&s)return;d(this,ue).showAllEditors("highlight",!0,!0),d(this,Zt).div.classList.add("free"),this.toggleDrawing(),Lw.startHighlighting(this,d(this,ue).direction==="ltr",{target:d(this,Zt).div,x:e.x,y:e.y}),d(this,Zt).div.addEventListener("pointerup",()=>{d(this,Zt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,ue)._signal}),e.preventDefault()}},Xr=function(){return d(yr,ll).get(d(this,ue).getMode())},FE=function(e){const t=d(this,pt,Xr);return t?new t.prototype.constructor(e):null},OE=function(){const{x:e,y:t,width:s,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+r),c=(i+a)/2-e,u=(o+l)/2-t,[f,m]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:m}},M0=function(){for(const e of d(this,Ts).values())e.isEmpty()&&e.remove()},q(yr,"_initialized",!1),A(yr,ll,new Map([fE,TE,NE,Lw,ME].map(e=>[e._editorType,e])));let LE=yr;var Mr,Ln,wu,yy,nx,R4,Li,UE,k4,BE;const Ut=class Ut{constructor({pageIndex:e}){A(this,Li);A(this,Mr,null);A(this,Ln,new Map);A(this,wu,new Map);this.pageIndex=e}setParent(e){if(!d(this,Mr)){E(this,Mr,e);return}if(d(this,Mr)!==e){if(d(this,Ln).size>0)for(const t of d(this,Ln).values())t.remove(),e.append(t);E(this,Mr,e)}}static get _svgFactory(){return Fe(this,"_svgFactory",new Mw)}draw(e,t=!1,s=!1){const r=qt(Ut,yy)._++,i=k(this,Li,UE).call(this),o=Ut._svgFactory.createElement("defs");i.append(o);const a=Ut._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,wu).set(r,a);const c=s?k(this,Li,k4).call(this,o,l):null,u=Ut._svgFactory.createElement("use");return i.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(i,e),d(this,Ln).set(r,i),{id:r,clipPathId:`url(#${c})`}}drawOutline(e,t){const s=qt(Ut,yy)._++,r=k(this,Li,UE).call(this),i=Ut._svgFactory.createElement("defs");r.append(i);const o=Ut._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=Ut._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const m=Ut._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=Ut._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const c=Ut._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,e),d(this,Ln).set(s,r),s}finalizeDraw(e,t){d(this,wu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?d(this,Ln).get(e):e;if(a){if(s&&k(this,Li,BE).call(this,a,s),r&&k(l=Ut,nx,R4).call(l,a,r),i){const{classList:c}=a;for(const[u,f]of Object.entries(i))c.toggle(u,f)}if(o){const u=a.firstChild.firstChild;k(this,Li,BE).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const s=d(this,Ln).get(e);s&&(d(t,Mr).append(s),d(this,Ln).delete(e),d(t,Ln).set(e,s))}remove(e){d(this,wu).delete(e),d(this,Mr)!==null&&(d(this,Ln).get(e).remove(),d(this,Ln).delete(e))}destroy(){E(this,Mr,null);for(const e of d(this,Ln).values())e.remove();d(this,Ln).clear(),d(this,wu).clear()}};Mr=new WeakMap,Ln=new WeakMap,wu=new WeakMap,yy=new WeakMap,nx=new WeakSet,R4=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},Li=new WeakSet,UE=function(){const e=Ut._svgFactory.create(1,1,!0);return d(this,Mr).append(e),e.setAttribute("aria-hidden",!0),e},k4=function(e,t){const s=Ut._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Ut._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},BE=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},A(Ut,nx),A(Ut,yy,0);let $E=Ut;globalThis._pdfjsTestingUtils={HighlightOutliner:mE};globalThis.pdfjsLib={AbortException:Rl,AnnotationEditorLayer:LE,AnnotationEditorParamsType:Ue,AnnotationEditorType:xe,AnnotationEditorUIManager:zu,AnnotationLayer:uE,AnnotationMode:ma,AnnotationType:Mt,build:oae,ColorPicker:Dw,createValidAbsoluteUrl:_U,DOMSVGFactory:Mw,DrawLayer:$E,FeatureTest:pn,fetchData:By,getDocument:EB,getFilenameFromUrl:Qie,getPdfFilenameFromUrl:Zie,getUuid:bU,getXfaPageViewport:toe,GlobalWorkerOptions:_i,ImageKind:n0,InvalidPDFException:bb,isDataScheme:d_,isPdfFile:ZA,isValidExplicitDest:hoe,MathClamp:On,noContextMenu:Hr,normalizeUnicode:Yie,OPS:Rw,OutputScale:Di,PasswordResponses:Bie,PDFDataRangeTransport:TB,PDFDateString:e1,PDFWorker:Um,PermissionFlag:Uie,PixelsPerInch:kl,RenderingCancelledException:QA,ResponseException:kw,setLayerDimensions:ju,shadow:Fe,SignatureExtractor:Po,stopEvent:Dt,SupportedImageMimeTypes:Tb,TextLayer:Om,TouchManager:Iw,updateUrlHash:CU,Util:fe,VerbosityLevel:l_,version:iae,XfaLayer:kB};const Rae="/assets/pdf.worker-B8q3_SH5.mjs";_i.workerSrc=Rae;const kae=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const r=s.result.split(",")[1];e(r)},s.onerror=r=>t(r),s.readAsDataURL(n)}),Pae=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=async r=>{var i;if((i=r.target)!=null&&i.result)try{const o=new Uint8Array(r.target.result),a=await EB(o).promise;let l="";for(let c=1;c<=a.numPages;c++){const f=await(await a.getPage(c)).getTextContent();l+=f.items.map(m=>"str"in m?m.str:"").join(" ")+`
`}e(l)}catch(o){t(o)}},s.onerror=()=>t(new Error(`Failed to read ${n.name}.`)),s.readAsArrayBuffer(n)}),Iae=async n=>{const e=["application/pdf","image/png","image/jpeg"],t=Array.from(n).filter(s=>e.includes(s.type)).map(async s=>{let r;return s.type==="application/pdf"?r=await Pae(s):r=await kae(s),{id:crypto.randomUUID(),name:s.name,type:s.type,content:r,url:URL.createObjectURL(s),uploadedAt:new Date().toISOString()}});return Promise.all(t)};function Mae({sessionId:n,files:e,onFileAdded:t}){const[s,r]=b.useState(!1),[i,o]=b.useState(!1),[a,l]=b.useState(""),c=b.useRef(null),{toast:u}=Ko(),f=v=>{v.preventDefault(),r(!1),v.dataTransfer.files&&v.dataTransfer.files.length>0&&m(v.dataTransfer.files)},m=async v=>{if(v.length!==0){o(!0);try{const _=await Iae(v);for(const x of _)t(x),u({title:"File uploaded",description:`${x.name} was uploaded successfully.`})}catch(_){console.error("Error uploading files:",_),u({title:"Upload failed",description:"There was an error uploading your files.",variant:"destructive"})}finally{o(!1)}}},g=()=>{var v;(v=c.current)==null||v.click()},w=v=>{v.target.files&&v.target.files.length>0&&m(v.target.files)};return y.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Study Materials"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload PDFs, images, or other documents to generate study materials"})]}),y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:v=>{v.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:f,children:[y.jsx(L5,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),y.jsx("p",{className:"text-lg font-medium mb-2",children:s?"Drop files here":"Drag and drop files here"}),y.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF, PNG, JPG files"}),y.jsx(me,{onClick:g,disabled:i,children:i?"Processing...":"Browse Files"}),y.jsx("input",{ref:c,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:w,className:"hidden"})]}),e.length>0&&y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Files"}),y.jsx("div",{className:"space-y-2",children:e.map(v=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[y.jsx("span",{className:"font-medium",children:v.name}),y.jsx("span",{className:"text-sm text-gray-500",children:v.type})]},v.id))})]})]})}var l1="Progress",c1=100,[Nae,mle]=Wn(l1),[Dae,Lae]=Nae(l1),P4=b.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:r,getValueLabel:i=Fae,...o}=n;(r||r===0)&&!zI(r)&&console.error(Oae(`${r}`,"Progress"));const a=zI(r)?r:c1;s!==null&&!HI(s,a)&&console.error($ae(`${s}`,"Progress"));const l=HI(s,a)?s:null,c=Ow(l)?i(l,a):void 0;return y.jsx(Dae,{scope:t,value:l,max:a,children:y.jsx(ce.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Ow(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":N4(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});P4.displayName=l1;var I4="ProgressIndicator",M4=b.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,r=Lae(I4,t);return y.jsx(ce.div,{"data-state":N4(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});M4.displayName=I4;function Fae(n,e){return`${Math.round(n/e*100)}%`}function N4(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Ow(n){return typeof n=="number"}function zI(n){return Ow(n)&&!isNaN(n)&&n>0}function HI(n,e){return Ow(n)&&!isNaN(n)&&n<=e&&n>=0}function Oae(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${c1}\`.`}function $ae(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${c1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var D4=P4,Uae=M4;const L4=b.forwardRef(({className:n,value:e,...t},s)=>y.jsx(D4,{ref:s,className:ye("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...t,children:y.jsx(Uae,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));L4.displayName=D4.displayName;function Bae({sessionId:n,flashcards:e=[],studyMaterials:t=[],files:s=[]}){var Ne,Ie;const[r,i]=b.useState([]),[o,a]=b.useState(0),[l,c]=b.useState(!1),[u,f]=b.useState(0),[m,g]=b.useState(0),[w,v]=b.useState(0),{toast:_}=Ko(),[x,S]=b.useState(!1),[C,T]=b.useState(""),[R,P]=b.useState("notes"),[I,M]=b.useState("medium"),[N,L]=b.useState(null),[D,V]=b.useState(""),[G,B]=b.useState("medium"),[j,O]=b.useState(!1),[U,$]=b.useState(""),F=Array.isArray(e)?e:[],z=Array.isArray(r)?r:[];b.useEffect(()=>{const se=F.filter(yt=>!yt.mastered);i(ee([...se])),a(0),c(!1),g(se.length),v(F.length-se.length);const pe=F.length,Oe=pe>0?Math.round(F.filter(yt=>yt.mastered).length/pe*100):0;f(Oe)},[e]);const ee=se=>{const pe=[...se];for(let Oe=pe.length-1;Oe>0;Oe--){const yt=Math.floor(Math.random()*(Oe+1));[pe[Oe],pe[yt]]=[pe[yt],pe[Oe]]}return pe},Y=async()=>{if(z.length===0)return;const se=z[o];try{const pe=z.filter(Oi=>Oi.id!==se.id);i(pe),g(pe.length),v(w+1);const Oe=F.length,yt=Oe>0?Math.round((w+1)/Oe*100):0;f(yt),c(!1),a(o>=pe.length?0:o),_({title:"Marked as mastered",description:"You've mastered this flashcard!"})}catch{_({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},te=()=>{if(z.length===0)return;const se=[...z],pe=se.splice(o,1)[0];se.push(pe),i(se),c(!1),a(o>=se.length-1?0:o)},he=()=>{c(!1),a((o+1)%z.length)},ke=()=>{c(!1),a((o-1+z.length)%z.length)},Pe=()=>{const se=ee([...F]);i(se),a(0),c(!1),g(se.length),v(0),f(0)},H=async()=>{_({title:"Not implemented",description:"Study material generation is not available in this version.",variant:"destructive"})},Te=async()=>{O(!0),$("");try{const se=(s||[]).map(Oe=>({id:Oe.id,name:Oe.name,type:Oe.type,content:Oe.content||""})),pe=await pre(se,D,G);$(pe)}catch{_({title:"Error",description:"Failed to generate long answer.",variant:"destructive"})}finally{O(!1)}};return y.jsxs("div",{children:[y.jsxs(yO,{defaultValue:"longAnswer",className:"w-full",children:[y.jsxs(LA,{className:"w-full mb-6",children:[y.jsxs(Ro,{value:"flashcards",className:"flex-1",children:[y.jsx(sw,{className:"h-4 w-4 mr-2"}),"Flashcards"]}),y.jsxs(Ro,{value:"longAnswer",className:"flex-1",children:[y.jsx(C5,{className:"h-4 w-4 mr-2"}),"Ask Questions"]}),y.jsxs(Ro,{value:"material",className:"flex-1",children:[y.jsx($R,{className:"h-4 w-4 mr-2"}),"Study Materials"]})]}),y.jsxs(ko,{value:"flashcards",children:[y.jsx("div",{className:"flex justify-between items-center mb-6",children:y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcard Review"}),y.jsx("p",{className:"text-gray-600",children:"Practice your flashcards until you master them"})]})}),y.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-sm font-medium",children:"Mastery Progress"}),y.jsxs("span",{className:"text-sm font-medium",children:[u,"%"]})]}),y.jsx(L4,{value:u,className:"h-2"}),y.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:w})," mastered"]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:m})," remaining"]})]})]}),z.length>0?y.jsxs("div",{children:[y.jsx("div",{className:"flex justify-center mb-8",children:y.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>c(!l),children:y.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${l?"rotate-y-180":""}`,children:[y.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:y.jsx("span",{className:"text-purple-600 font-semibold",children:o+1})}),y.jsx("p",{className:"text-center text-xl font-medium",children:(Ne=z[o])==null?void 0:Ne.front}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),y.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[y.jsx("p",{className:"text-center text-lg",children:(Ie=z[o])==null?void 0:Ie.back}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs(me,{variant:"outline",onClick:ke,disabled:z.length<=1,className:"flex items-center",children:[y.jsx(zD,{className:"mr-2 h-4 w-4"}),"Previous"]}),y.jsxs(me,{variant:"outline",onClick:he,disabled:z.length<=1,className:"flex items-center",children:["Next",y.jsx(x5,{className:"ml-2 h-4 w-4"})]})]}),y.jsxs("div",{className:"flex gap-4 justify-center",children:[y.jsxs(me,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 flex-1 md:flex-none",onClick:te,children:[y.jsx(Cx,{className:"mr-2 h-4 w-4"}),"Need More Practice"]}),y.jsxs(me,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 flex-1 md:flex-none",onClick:Y,children:[y.jsx(bl,{className:"mr-2 h-4 w-4"}),"Mark as Mastered"]})]})]}):F.length===0?y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx(sw,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards to learn"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create flashcards first in the Flashcards tab"})]}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-purple-50",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:y.jsx(bl,{className:"h-8 w-8 text-purple-600"})}),y.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All cards mastered!"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Congratulations! You've mastered all your flashcards."}),y.jsx(me,{className:"gradient-bg",onClick:Pe,children:"Restart All Cards"})]})]}),y.jsx(ko,{value:"longAnswer",children:y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ask a Long-Form Question"}),y.jsxs("div",{className:"mb-4",children:[y.jsx(xt,{htmlFor:"question",children:"Your Question"}),y.jsx(NA,{id:"question",value:D,onChange:se=>V(se.target.value),placeholder:"Type your question about the study materials...",rows:3,className:"mt-2"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx(xt,{htmlFor:"complexity",children:"Answer Complexity"}),y.jsxs(qA,{value:G,onValueChange:B,children:[y.jsx(r_,{className:"mt-2",children:y.jsx(WA,{placeholder:"Select complexity"})}),y.jsxs(i_,{children:[y.jsx(Pi,{value:"easy",children:"Easy"}),y.jsx(Pi,{value:"medium",children:"Medium"}),y.jsx(Pi,{value:"hard",children:"Hard"})]})]})]}),y.jsx(me,{onClick:Te,disabled:!D.trim()||j,className:"mb-4",children:j?"Generating...":"Generate Long Answer"}),U&&y.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border",children:[y.jsx("h3",{className:"font-bold mb-2",children:"Answer"}),y.jsx("div",{className:"whitespace-pre-line text-gray-800",children:U})]})]})}),y.jsxs(ko,{value:"material",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-2xl font-semibold",children:"Study Materials"}),s.length>0&&y.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),y.jsxs("span",{children:[s.length," file",s.length>1?"s":""," available"]})]})]}),y.jsx("p",{className:"text-gray-600",children:"Generate study materials and practice with flashcards"})]}),t.length>0||N?y.jsxs("div",{className:"mb-6",children:[N&&y.jsxs(Cu,{className:"mb-6",children:[y.jsx(Su,{children:y.jsx(Jd,{children:N.title})}),y.jsx(bu,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:N.content.replace(/\n/g,"<br>")}})})})]}),t.map(se=>y.jsxs(Cu,{className:"mb-6",children:[y.jsx(Su,{children:y.jsx(Jd,{children:se.title})}),y.jsx(bu,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:se.content.replace(/\n/g,"<br>")}})})})]},se.id))]}):y.jsxs("div",{className:"text-center py-10 border rounded-lg bg-gray-50 mb-6",children:[y.jsx($R,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No study materials yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate comprehensive study materials below"})]}),y.jsxs(Cu,{children:[y.jsx(Su,{children:y.jsx(Jd,{children:"Generate New Study Material"})}),y.jsx(bu,{children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(xt,{htmlFor:"topic",children:"Topic"}),y.jsx(Lu,{id:"topic",placeholder:"Enter topic (e.g., 'The Holocaust and World War II')",value:C,onChange:se=>T(se.target.value)})]}),y.jsxs("div",{children:[y.jsx(xt,{children:"Format"}),y.jsxs(Aw,{value:R,onValueChange:se=>P(se),className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(da,{value:"notes",id:"notes"}),y.jsx(xt,{htmlFor:"notes",children:"Notes"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(da,{value:"outline",id:"outline"}),y.jsx(xt,{htmlFor:"outline",children:"Outline"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(da,{value:"summary",id:"summary"}),y.jsx(xt,{htmlFor:"summary",children:"Summary"})]})]})]}),y.jsxs("div",{children:[y.jsx(xt,{children:"Complexity"}),y.jsxs(Aw,{value:I,onValueChange:M,className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(da,{value:"simple",id:"simple"}),y.jsx(xt,{htmlFor:"simple",children:"Simple"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(da,{value:"medium",id:"medium"}),y.jsx(xt,{htmlFor:"medium",children:"Medium"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(da,{value:"advanced",id:"advanced"}),y.jsx(xt,{htmlFor:"advanced",children:"Advanced"})]})]})]}),y.jsx(me,{onClick:H,disabled:x,className:"w-full",children:x?"Generating...":y.jsxs(y.Fragment,{children:[y.jsx(I5,{className:"mr-2 h-4 w-4"}),"Generate Study Material"]})})]})})]})]})]}),y.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}function Vae(){const{id:n}=hG(),e=Hf(),{toast:t}=Ko(),[s,r]=b.useState(null),[i,o]=b.useState("files"),a=Xu(),{isLoading:l,error:c,data:u}=UL({queryKey:["session",n],queryFn:async()=>{const f=await Qs.getSession(n??"");if(f.error||!f.session)throw new Error(f.error||"Session not found");return{id:f.session.id,title:f.session.title,description:f.session.description||"",createdat:f.session.created_at,updatedat:f.session.updated_at,files:[],flashcardSets:[],quizzes:[],studyMaterials:[]}},enabled:!!n,retry:1,retryDelay:1e3});return b.useEffect(()=>{u?(console.log("Session query success:",{id:n,data:u}),r(u)):c?(console.error("Session query error:",{id:n,error:c}),t({title:"Error",description:"Failed to load study session",variant:"destructive"}),e("/sessions")):!l&&!u&&(console.log("Session not found for ID:",n),t({title:"Error",description:"Study session not found",variant:"destructive"}),e("/sessions"))},[u,c,l,n,e,t]),l?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Yd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})]}):s?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Yd,{}),y.jsxs("div",{ref:a,className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs(me,{variant:"outline",className:"mb-4",onClick:()=>e("/sessions"),children:[y.jsx(zD,{className:"mr-2 h-4 w-4"}),"Back to Sessions"]}),y.jsx("h1",{className:"text-3xl font-bold",children:s.title}),y.jsx("p",{className:"text-gray-600 mt-1",children:s.description})]}),y.jsxs(yO,{value:i,onValueChange:o,children:[y.jsxs(LA,{className:"grid grid-cols-5 mb-8",children:[y.jsxs(Ro,{value:"files",className:"flex items-center",children:[y.jsx(P5,{className:"mr-2 h-4 w-4"}),"Files"]}),y.jsxs(Ro,{value:"flashcards",className:"flex items-center",children:[y.jsx(_5,{className:"mr-2 h-4 w-4"}),"Flashcards"]}),y.jsxs(Ro,{value:"quiz",className:"flex items-center",children:[y.jsx(bl,{className:"mr-2 h-4 w-4"}),"Quiz"]}),y.jsxs(Ro,{value:"learn",className:"flex items-center",children:[y.jsx(sw,{className:"mr-2 h-4 w-4"}),"Learn"]}),y.jsxs(Ro,{value:"chat",className:"flex items-center",children:[y.jsx(N5,{className:"mr-2 h-4 w-4"}),"Chat"]})]}),y.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[y.jsx(ko,{value:"files",children:y.jsx(Mae,{sessionId:s.id,files:s.files,onFileAdded:f=>{r({...s,files:[...s.files,f]})}})}),y.jsx(ko,{value:"flashcards",children:y.jsx(uie,{flashcardSets:s.flashcardSets,files:s.files,onCreateSet:f=>{r({...s,flashcardSets:[...s.flashcardSets,f]})},onUpdateSet:f=>{r({...s,flashcardSets:s.flashcardSets.map(m=>m.id===f.id?f:m)})}})}),y.jsx(ko,{value:"quiz",children:y.jsx(Rie,{sessionId:s.id,quizzes:s.quizzes,files:s.files,flashcards:s.flashcards,onQuizAdded:f=>{r({...s,quizzes:[...s.quizzes,{...f,id:`quiz_${Date.now()}`}]})}})}),y.jsx(ko,{value:"learn",children:y.jsx(Bae,{sessionId:s.id,flashcards:s.flashcards,studyMaterials:s.studyMaterials||[],files:s.files})}),y.jsx(ko,{value:"chat",children:y.jsx($ie,{files:s.files.map(f=>({id:f.id,name:f.name,type:f.type,content:f.content||""}))})})]})]})]})]}):y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Yd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:"Session not found"}),y.jsx(me,{variant:"outline",className:"mt-4",onClick:()=>e("/sessions"),children:"Go back to sessions"})]})})]})}const jae=new l6,zae=()=>y.jsx(f6,{client:jae,children:y.jsxs(GH,{children:[y.jsx(B5,{}),y.jsx(vz,{}),y.jsx(E8,{children:y.jsx(ZG,{children:y.jsxs(kG,{children:[y.jsx(md,{path:"/",element:y.jsx(h7,{})}),y.jsxs(md,{element:y.jsx(T8,{redirectTo:"/"}),children:[y.jsx(md,{path:"/sessions",element:y.jsx(y7,{})}),y.jsx(md,{path:"/session/:id",element:y.jsx(Vae,{})})]}),y.jsx(md,{path:"*",element:y.jsx(f7,{})})]})})})]})});localStorage.removeItem("quiz_io_current_user");_C.createRoot(document.getElementById("root")).render(y.jsx(X.StrictMode,{children:y.jsx(zae,{})}));
