var EB=Object.defineProperty;var zA=n=>{throw TypeError(n)};var TB=(n,e,t)=>e in n?EB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var H=(n,e,t)=>TB(n,typeof e!="symbol"?e+"":e,t),Zx=(n,e,t)=>e.has(n)||zA("Cannot "+t);var d=(n,e,t)=>(Zx(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?zA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),E=(n,e,t,s)=>(Zx(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),R=(n,e,t)=>(Zx(n,e,"access private method"),t);var qt=(n,e,t,s)=>({set _(i){E(n,e,i,t)},get _(){return d(n,e,s)}});function AB(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var bI={exports:{}},jw={},EI={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=Symbol.for("react.element"),RB=Symbol.for("react.portal"),PB=Symbol.for("react.fragment"),IB=Symbol.for("react.strict_mode"),NB=Symbol.for("react.profiler"),MB=Symbol.for("react.provider"),DB=Symbol.for("react.context"),LB=Symbol.for("react.forward_ref"),FB=Symbol.for("react.suspense"),OB=Symbol.for("react.memo"),UB=Symbol.for("react.lazy"),HA=Symbol.iterator;function $B(n){return n===null||typeof n!="object"?null:(n=HA&&n[HA]||n["@@iterator"],typeof n=="function"?n:null)}var TI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AI=Object.assign,kI={};function Rf(n,e,t){this.props=n,this.context=e,this.refs=kI,this.updater=t||TI}Rf.prototype.isReactComponent={};Rf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Rf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function RI(){}RI.prototype=Rf.prototype;function CE(n,e,t){this.props=n,this.context=e,this.refs=kI,this.updater=t||TI}var SE=CE.prototype=new RI;SE.constructor=CE;AI(SE,Rf.prototype);SE.isPureReactComponent=!0;var GA=Array.isArray,PI=Object.prototype.hasOwnProperty,bE={current:null},II={key:!0,ref:!0,__self:!0,__source:!0};function NI(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)PI.call(e,s)&&!II.hasOwnProperty(s)&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:ry,type:n,key:r,ref:o,props:i,_owner:bE.current}}function BB(n,e){return{$$typeof:ry,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function EE(n){return typeof n=="object"&&n!==null&&n.$$typeof===ry}function VB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var qA=/\/+/g;function e_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?VB(""+n.key):e.toString(36)}function wv(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ry:case RB:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+e_(o,0):s,GA(i)?(t="",n!=null&&(t=n.replace(qA,"$&/")+"/"),wv(i,e,t,"",function(c){return c})):i!=null&&(EE(i)&&(i=BB(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qA,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",GA(n))for(var a=0;a<n.length;a++){r=n[a];var l=s+e_(r,a);o+=wv(r,e,t,l,i)}else if(l=$B(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=s+e_(r,a++),o+=wv(r,e,t,l,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ny(n,e,t){if(n==null)return n;var s=[],i=0;return wv(n,s,"","",function(r){return e.call(t,r,i++)}),s}function jB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Gn={current:null},xv={transition:null},zB={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:xv,ReactCurrentOwner:bE};function MI(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Ny,forEach:function(n,e,t){Ny(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ny(n,function(){e++}),e},toArray:function(n){return Ny(n,function(e){return e})||[]},only:function(n){if(!EE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ie.Component=Rf;Ie.Fragment=PB;Ie.Profiler=NB;Ie.PureComponent=CE;Ie.StrictMode=IB;Ie.Suspense=FB;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zB;Ie.act=MI;Ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=AI({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=bE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)PI.call(e,l)&&!II.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:ry,type:n.type,key:i,ref:r,props:s,_owner:o}};Ie.createContext=function(n){return n={$$typeof:DB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:MB,_context:n},n.Consumer=n};Ie.createElement=NI;Ie.createFactory=function(n){var e=NI.bind(null,n);return e.type=n,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(n){return{$$typeof:LB,render:n}};Ie.isValidElement=EE;Ie.lazy=function(n){return{$$typeof:UB,_payload:{_status:-1,_result:n},_init:jB}};Ie.memo=function(n,e){return{$$typeof:OB,type:n,compare:e===void 0?null:e}};Ie.startTransition=function(n){var e=xv.transition;xv.transition={};try{n()}finally{xv.transition=e}};Ie.unstable_act=MI;Ie.useCallback=function(n,e){return Gn.current.useCallback(n,e)};Ie.useContext=function(n){return Gn.current.useContext(n)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(n){return Gn.current.useDeferredValue(n)};Ie.useEffect=function(n,e){return Gn.current.useEffect(n,e)};Ie.useId=function(){return Gn.current.useId()};Ie.useImperativeHandle=function(n,e,t){return Gn.current.useImperativeHandle(n,e,t)};Ie.useInsertionEffect=function(n,e){return Gn.current.useInsertionEffect(n,e)};Ie.useLayoutEffect=function(n,e){return Gn.current.useLayoutEffect(n,e)};Ie.useMemo=function(n,e){return Gn.current.useMemo(n,e)};Ie.useReducer=function(n,e,t){return Gn.current.useReducer(n,e,t)};Ie.useRef=function(n){return Gn.current.useRef(n)};Ie.useState=function(n){return Gn.current.useState(n)};Ie.useSyncExternalStore=function(n,e,t){return Gn.current.useSyncExternalStore(n,e,t)};Ie.useTransition=function(){return Gn.current.useTransition()};Ie.version="18.3.1";EI.exports=Ie;var b=EI.exports;const Y=SI(b),DI=AB({__proto__:null,default:Y},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HB=b,GB=Symbol.for("react.element"),qB=Symbol.for("react.fragment"),WB=Object.prototype.hasOwnProperty,KB=HB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YB={key:!0,ref:!0,__self:!0,__source:!0};function LI(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)WB.call(e,s)&&!YB.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:GB,type:n,key:r,ref:o,props:i,_owner:KB.current}}jw.Fragment=qB;jw.jsx=LI;jw.jsxs=LI;bI.exports=jw;var y=bI.exports,rC={},FI={exports:{}},Ds={},OI={exports:{}},UI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,U){var q=O.length;O.push(U);e:for(;0<q;){var le=q-1>>>1,J=O[le];if(0<i(J,U))O[le]=U,O[q]=J,q=le;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var U=O[0],q=O.pop();if(q!==U){O[0]=q;e:for(var le=0,J=O.length,se=J>>>1;le<se;){var me=2*(le+1)-1,Ne=O[me],$e=me+1,z=O[$e];if(0>i(Ne,q))$e<J&&0>i(z,Ne)?(O[le]=z,O[$e]=q,le=$e):(O[le]=Ne,O[me]=q,le=me);else if($e<J&&0>i(z,q))O[le]=z,O[$e]=q,le=$e;else break e}}return U}function i(O,U){var q=O.sortIndex-U.sortIndex;return q!==0?q:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var U=t(c);U!==null;){if(U.callback===null)s(c);else if(U.startTime<=O)s(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function T(O){if(v=!1,C(O),!w)if(t(l)!==null)w=!0,F(k);else{var U=t(c);U!==null&&$(T,U.startTime-O)}}function k(O,U){w=!1,v&&(v=!1,x(N),N=-1),g=!0;var q=m;try{for(C(U),p=t(l);p!==null&&(!(p.expirationTime>U)||O&&!L());){var le=p.callback;if(typeof le=="function"){p.callback=null,m=p.priorityLevel;var J=le(p.expirationTime<=U);U=n.unstable_now(),typeof J=="function"?p.callback=J:p===t(l)&&s(l),C(U)}else s(l);p=t(l)}if(p!==null)var se=!0;else{var me=t(c);me!==null&&$(T,me.startTime-U),se=!1}return se}finally{p=null,m=q,g=!1}}var P=!1,I=null,N=-1,D=5,M=-1;function L(){return!(n.unstable_now()-M<D)}function V(){if(I!==null){var O=n.unstable_now();M=O;var U=!0;try{U=I(!0,O)}finally{U?G():(P=!1,I=null)}}else P=!1}var G;if(typeof S=="function")G=function(){S(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,j=B.port2;B.port1.onmessage=V,G=function(){j.postMessage(null)}}else G=function(){_(V,0)};function F(O){I=O,P||(P=!0,G())}function $(O,U){N=_(function(){O(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){w||g||(w=!0,F(k))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var q=m;m=U;try{return O()}finally{m=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=m;m=O;try{return U()}finally{m=q}},n.unstable_scheduleCallback=function(O,U,q){var le=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,O){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,O={id:u++,callback:U,priorityLevel:O,startTime:q,expirationTime:J,sortIndex:-1},q>le?(O.sortIndex=q,e(c,O),t(l)===null&&O===t(c)&&(v?(x(N),N=-1):v=!0,$(T,q-le))):(O.sortIndex=J,e(l,O),w||g||(w=!0,F(k))),O},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(O){var U=m;return function(){var q=m;m=U;try{return O.apply(this,arguments)}finally{m=q}}}})(UI);OI.exports=UI;var JB=OI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XB=b,Ms=JB;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $I=new Set,em={};function ju(n,e){ff(n,e),ff(n+"Capture",e)}function ff(n,e){for(em[n]=e,n=0;n<e.length;n++)$I.add(e[n])}var Mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oC=Object.prototype.hasOwnProperty,QB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WA={},KA={};function ZB(n){return oC.call(KA,n)?!0:oC.call(WA,n)?!1:QB.test(n)?KA[n]=!0:(WA[n]=!0,!1)}function e4(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function t4(n,e,t,s){if(e===null||typeof e>"u"||e4(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){mn[n]=new qn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];mn[e]=new qn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){mn[n]=new qn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){mn[n]=new qn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){mn[n]=new qn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){mn[n]=new qn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){mn[n]=new qn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){mn[n]=new qn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){mn[n]=new qn(n,5,!1,n.toLowerCase(),null,!1,!1)});var TE=/[\-:]([a-z])/g;function AE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(TE,AE);mn[e]=new qn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(TE,AE);mn[e]=new qn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(TE,AE);mn[e]=new qn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){mn[n]=new qn(n,1,!1,n.toLowerCase(),null,!1,!1)});mn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){mn[n]=new qn(n,1,!1,n.toLowerCase(),null,!0,!0)});function kE(n,e,t,s){var i=mn.hasOwnProperty(e)?mn[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t4(e,t,i,s)&&(t=null),s||i===null?ZB(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var zo=XB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,My=Symbol.for("react.element"),xd=Symbol.for("react.portal"),_d=Symbol.for("react.fragment"),RE=Symbol.for("react.strict_mode"),aC=Symbol.for("react.profiler"),BI=Symbol.for("react.provider"),VI=Symbol.for("react.context"),PE=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.suspense_list"),IE=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),jI=Symbol.for("react.offscreen"),YA=Symbol.iterator;function Kf(n){return n===null||typeof n!="object"?null:(n=YA&&n[YA]||n["@@iterator"],typeof n=="function"?n:null)}var Ct=Object.assign,t_;function cp(n){if(t_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);t_=e&&e[1]||""}return`
`+t_+n}var n_=!1;function s_(n,e){if(!n||n_)return"";n_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){s=c}n.call(e.prototype)}else{try{throw Error()}catch(c){s=c}n()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{n_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?cp(n):""}function n4(n){switch(n.tag){case 5:return cp(n.type);case 16:return cp("Lazy");case 13:return cp("Suspense");case 19:return cp("SuspenseList");case 0:case 2:case 15:return n=s_(n.type,!1),n;case 11:return n=s_(n.type.render,!1),n;case 1:return n=s_(n.type,!0),n;default:return""}}function uC(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _d:return"Fragment";case xd:return"Portal";case aC:return"Profiler";case RE:return"StrictMode";case lC:return"Suspense";case cC:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case VI:return(n.displayName||"Context")+".Consumer";case BI:return(n._context.displayName||"Context")+".Provider";case PE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case IE:return e=n.displayName||null,e!==null?e:uC(n.type)||"Memo";case ia:e=n._payload,n=n._init;try{return uC(n(e))}catch{}}return null}function s4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uC(e);case 8:return e===RE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function zI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i4(n){var e=zI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Dy(n){n._valueTracker||(n._valueTracker=i4(n))}function HI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=zI(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function w0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function dC(n,e){var t=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function JA(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=xl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GI(n,e){e=e.checked,e!=null&&kE(n,"checked",e,!1)}function hC(n,e){GI(n,e);var t=xl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?fC(n,e.type,t):e.hasOwnProperty("defaultValue")&&fC(n,e.type,xl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function XA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function fC(n,e,t){(e!=="number"||w0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var up=Array.isArray;function Fd(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+xl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function pC(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function QA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(up(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xl(t)}}function qI(n,e){var t=xl(e.value),s=xl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function ZA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function WI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mC(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?WI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ly,KI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ly=Ly||document.createElement("div"),Ly.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ly.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function tm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var $p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r4=["Webkit","ms","Moz","O"];Object.keys($p).forEach(function(n){r4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),$p[e]=$p[n]})});function YI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$p.hasOwnProperty(n)&&$p[n]?(""+e).trim():e+"px"}function JI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=YI(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var o4=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gC(n,e){if(e){if(o4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function yC(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vC=null;function NE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wC=null,Od=null,Ud=null;function e1(n){if(n=ly(n)){if(typeof wC!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Ww(e),wC(n.stateNode,n.type,e))}}function XI(n){Od?Ud?Ud.push(n):Ud=[n]:Od=n}function QI(){if(Od){var n=Od,e=Ud;if(Ud=Od=null,e1(n),e)for(n=0;n<e.length;n++)e1(e[n])}}function ZI(n,e){return n(e)}function eN(){}var i_=!1;function tN(n,e,t){if(i_)return n(e,t);i_=!0;try{return ZI(n,e,t)}finally{i_=!1,(Od!==null||Ud!==null)&&(eN(),QI())}}function nm(n,e){var t=n.stateNode;if(t===null)return null;var s=Ww(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var xC=!1;if(Mo)try{var Yf={};Object.defineProperty(Yf,"passive",{get:function(){xC=!0}}),window.addEventListener("test",Yf,Yf),window.removeEventListener("test",Yf,Yf)}catch{xC=!1}function a4(n,e,t,s,i,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Bp=!1,x0=null,_0=!1,_C=null,l4={onError:function(n){Bp=!0,x0=n}};function c4(n,e,t,s,i,r,o,a,l){Bp=!1,x0=null,a4.apply(l4,arguments)}function u4(n,e,t,s,i,r,o,a,l){if(c4.apply(this,arguments),Bp){if(Bp){var c=x0;Bp=!1,x0=null}else throw Error(W(198));_0||(_0=!0,_C=c)}}function zu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function nN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function t1(n){if(zu(n)!==n)throw Error(W(188))}function d4(n){var e=n.alternate;if(!e){if(e=zu(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return t1(i),n;if(r===s)return t1(i),e;r=r.sibling}throw Error(W(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function sN(n){return n=d4(n),n!==null?iN(n):null}function iN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=iN(n);if(e!==null)return e;n=n.sibling}return null}var rN=Ms.unstable_scheduleCallback,n1=Ms.unstable_cancelCallback,h4=Ms.unstable_shouldYield,f4=Ms.unstable_requestPaint,Rt=Ms.unstable_now,p4=Ms.unstable_getCurrentPriorityLevel,ME=Ms.unstable_ImmediatePriority,oN=Ms.unstable_UserBlockingPriority,C0=Ms.unstable_NormalPriority,m4=Ms.unstable_LowPriority,aN=Ms.unstable_IdlePriority,zw=null,Cr=null;function g4(n){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(zw,n,void 0,(n.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:w4,y4=Math.log,v4=Math.LN2;function w4(n){return n>>>=0,n===0?32:31-(y4(n)/v4|0)|0}var Fy=64,Oy=4194304;function dp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function S0(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?s=dp(a):(r&=o,r!==0&&(s=dp(r)))}else o=t&~i,o!==0?s=dp(o):r!==0&&(s=dp(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Li(e),i=1<<t,s|=n[t],e&=~i;return s}function x4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _4(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Li(r),a=1<<o,l=i[o];l===-1?(!(a&t)||a&s)&&(i[o]=x4(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function CC(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lN(){var n=Fy;return Fy<<=1,!(Fy&4194240)&&(Fy=64),n}function r_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function oy(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Li(e),n[e]=t}function C4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Li(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function DE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Li(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var Ke=0;function cN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var uN,LE,dN,hN,fN,SC=!1,Uy=[],ll=null,cl=null,ul=null,sm=new Map,im=new Map,ca=[],S4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s1(n,e){switch(n){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":sm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":im.delete(e.pointerId)}}function Jf(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=ly(e),e!==null&&LE(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function b4(n,e,t,s,i){switch(e){case"focusin":return ll=Jf(ll,n,e,t,s,i),!0;case"dragenter":return cl=Jf(cl,n,e,t,s,i),!0;case"mouseover":return ul=Jf(ul,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return sm.set(r,Jf(sm.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,im.set(r,Jf(im.get(r)||null,n,e,t,s,i)),!0}return!1}function pN(n){var e=Xl(n.target);if(e!==null){var t=zu(e);if(t!==null){if(e=t.tag,e===13){if(e=nN(t),e!==null){n.blockedOn=e,fN(n.priority,function(){dN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _v(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=bC(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);vC=s,t.target.dispatchEvent(s),vC=null}else return e=ly(t),e!==null&&LE(e),n.blockedOn=t,!1;e.shift()}return!0}function i1(n,e,t){_v(n)&&t.delete(e)}function E4(){SC=!1,ll!==null&&_v(ll)&&(ll=null),cl!==null&&_v(cl)&&(cl=null),ul!==null&&_v(ul)&&(ul=null),sm.forEach(i1),im.forEach(i1)}function Xf(n,e){n.blockedOn===e&&(n.blockedOn=null,SC||(SC=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,E4)))}function rm(n){function e(i){return Xf(i,n)}if(0<Uy.length){Xf(Uy[0],n);for(var t=1;t<Uy.length;t++){var s=Uy[t];s.blockedOn===n&&(s.blockedOn=null)}}for(ll!==null&&Xf(ll,n),cl!==null&&Xf(cl,n),ul!==null&&Xf(ul,n),sm.forEach(e),im.forEach(e),t=0;t<ca.length;t++)s=ca[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<ca.length&&(t=ca[0],t.blockedOn===null);)pN(t),t.blockedOn===null&&ca.shift()}var $d=zo.ReactCurrentBatchConfig,b0=!0;function T4(n,e,t,s){var i=Ke,r=$d.transition;$d.transition=null;try{Ke=1,FE(n,e,t,s)}finally{Ke=i,$d.transition=r}}function A4(n,e,t,s){var i=Ke,r=$d.transition;$d.transition=null;try{Ke=4,FE(n,e,t,s)}finally{Ke=i,$d.transition=r}}function FE(n,e,t,s){if(b0){var i=bC(n,e,t,s);if(i===null)m_(n,e,s,E0,t),s1(n,s);else if(b4(i,n,e,t,s))s.stopPropagation();else if(s1(n,s),e&4&&-1<S4.indexOf(n)){for(;i!==null;){var r=ly(i);if(r!==null&&uN(r),r=bC(n,e,t,s),r===null&&m_(n,e,s,E0,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else m_(n,e,s,null,t)}}var E0=null;function bC(n,e,t,s){if(E0=null,n=NE(s),n=Xl(n),n!==null)if(e=zu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=nN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return E0=n,null}function mN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p4()){case ME:return 1;case oN:return 4;case C0:case m4:return 16;case aN:return 536870912;default:return 16}default:return 16}}var ol=null,OE=null,Cv=null;function gN(){if(Cv)return Cv;var n,e=OE,t=e.length,s,i="value"in ol?ol.value:ol.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return Cv=i.slice(n,1<s?1-s:void 0)}function Sv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $y(){return!0}function r1(){return!1}function Ls(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?$y:r1,this.isPropagationStopped=r1,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$y)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$y)},persist:function(){},isPersistent:$y}),e}var Pf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},UE=Ls(Pf),ay=Ct({},Pf,{view:0,detail:0}),k4=Ls(ay),o_,a_,Qf,Hw=Ct({},ay,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$E,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qf&&(Qf&&n.type==="mousemove"?(o_=n.screenX-Qf.screenX,a_=n.screenY-Qf.screenY):a_=o_=0,Qf=n),o_)},movementY:function(n){return"movementY"in n?n.movementY:a_}}),o1=Ls(Hw),R4=Ct({},Hw,{dataTransfer:0}),P4=Ls(R4),I4=Ct({},ay,{relatedTarget:0}),l_=Ls(I4),N4=Ct({},Pf,{animationName:0,elapsedTime:0,pseudoElement:0}),M4=Ls(N4),D4=Ct({},Pf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),L4=Ls(D4),F4=Ct({},Pf,{data:0}),a1=Ls(F4),O4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=$4[n])?!!e[n]:!1}function $E(){return B4}var V4=Ct({},ay,{key:function(n){if(n.key){var e=O4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Sv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$E,charCode:function(n){return n.type==="keypress"?Sv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),j4=Ls(V4),z4=Ct({},Hw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l1=Ls(z4),H4=Ct({},ay,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$E}),G4=Ls(H4),q4=Ct({},Pf,{propertyName:0,elapsedTime:0,pseudoElement:0}),W4=Ls(q4),K4=Ct({},Hw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y4=Ls(K4),J4=[9,13,27,32],BE=Mo&&"CompositionEvent"in window,Vp=null;Mo&&"documentMode"in document&&(Vp=document.documentMode);var X4=Mo&&"TextEvent"in window&&!Vp,yN=Mo&&(!BE||Vp&&8<Vp&&11>=Vp),c1=" ",u1=!1;function vN(n,e){switch(n){case"keyup":return J4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wN(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Cd=!1;function Q4(n,e){switch(n){case"compositionend":return wN(e);case"keypress":return e.which!==32?null:(u1=!0,c1);case"textInput":return n=e.data,n===c1&&u1?null:n;default:return null}}function Z4(n,e){if(Cd)return n==="compositionend"||!BE&&vN(n,e)?(n=gN(),Cv=OE=ol=null,Cd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yN&&e.locale!=="ko"?null:e.data;default:return null}}var eV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!eV[n.type]:e==="textarea"}function xN(n,e,t,s){XI(s),e=T0(e,"onChange"),0<e.length&&(t=new UE("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var jp=null,om=null;function tV(n){IN(n,0)}function Gw(n){var e=Ed(n);if(HI(e))return n}function nV(n,e){if(n==="change")return e}var _N=!1;if(Mo){var c_;if(Mo){var u_="oninput"in document;if(!u_){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),u_=typeof h1.oninput=="function"}c_=u_}else c_=!1;_N=c_&&(!document.documentMode||9<document.documentMode)}function f1(){jp&&(jp.detachEvent("onpropertychange",CN),om=jp=null)}function CN(n){if(n.propertyName==="value"&&Gw(om)){var e=[];xN(e,om,n,NE(n)),tN(tV,e)}}function sV(n,e,t){n==="focusin"?(f1(),jp=e,om=t,jp.attachEvent("onpropertychange",CN)):n==="focusout"&&f1()}function iV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gw(om)}function rV(n,e){if(n==="click")return Gw(e)}function oV(n,e){if(n==="input"||n==="change")return Gw(e)}function aV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Oi=typeof Object.is=="function"?Object.is:aV;function am(n,e){if(Oi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!oC.call(e,i)||!Oi(n[i],e[i]))return!1}return!0}function p1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function m1(n,e){var t=p1(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=p1(t)}}function SN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?SN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function bN(){for(var n=window,e=w0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=w0(n.document)}return e}function VE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function lV(n){var e=bN(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&SN(t.ownerDocument.documentElement,t)){if(s!==null&&VE(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=m1(t,r);var o=m1(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cV=Mo&&"documentMode"in document&&11>=document.documentMode,Sd=null,EC=null,zp=null,TC=!1;function g1(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;TC||Sd==null||Sd!==w0(s)||(s=Sd,"selectionStart"in s&&VE(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zp&&am(zp,s)||(zp=s,s=T0(EC,"onSelect"),0<s.length&&(e=new UE("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Sd)))}function By(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var bd={animationend:By("Animation","AnimationEnd"),animationiteration:By("Animation","AnimationIteration"),animationstart:By("Animation","AnimationStart"),transitionend:By("Transition","TransitionEnd")},d_={},EN={};Mo&&(EN=document.createElement("div").style,"AnimationEvent"in window||(delete bd.animationend.animation,delete bd.animationiteration.animation,delete bd.animationstart.animation),"TransitionEvent"in window||delete bd.transitionend.transition);function qw(n){if(d_[n])return d_[n];if(!bd[n])return n;var e=bd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in EN)return d_[n]=e[t];return n}var TN=qw("animationend"),AN=qw("animationiteration"),kN=qw("animationstart"),RN=qw("transitionend"),PN=new Map,y1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(n,e){PN.set(n,e),ju(e,[n])}for(var h_=0;h_<y1.length;h_++){var f_=y1[h_],uV=f_.toLowerCase(),dV=f_[0].toUpperCase()+f_.slice(1);Pl(uV,"on"+dV)}Pl(TN,"onAnimationEnd");Pl(AN,"onAnimationIteration");Pl(kN,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(RN,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hV=new Set("cancel close invalid load scroll toggle".split(" ").concat(hp));function v1(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,u4(s,e,void 0,n),n.currentTarget=null}function IN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;v1(i,a,c),r=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;v1(i,a,c),r=l}}}if(_0)throw n=_C,_0=!1,_C=null,n}function ot(n,e){var t=e[IC];t===void 0&&(t=e[IC]=new Set);var s=n+"__bubble";t.has(s)||(NN(e,n,2,!1),t.add(s))}function p_(n,e,t){var s=0;e&&(s|=4),NN(t,n,s,e)}var Vy="_reactListening"+Math.random().toString(36).slice(2);function lm(n){if(!n[Vy]){n[Vy]=!0,$I.forEach(function(t){t!=="selectionchange"&&(hV.has(t)||p_(t,!1,n),p_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Vy]||(e[Vy]=!0,p_("selectionchange",!1,e))}}function NN(n,e,t,s){switch(mN(e)){case 1:var i=T4;break;case 4:i=A4;break;default:i=FE}t=i.bind(null,e,t,n),i=void 0,!xC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function m_(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xl(a),o===null)return;if(l=o.tag,l===5||l===6){s=r=o;continue e}a=a.parentNode}}s=s.return}tN(function(){var c=r,u=NE(t),p=[];e:{var m=PN.get(n);if(m!==void 0){var g=UE,w=n;switch(n){case"keypress":if(Sv(t)===0)break e;case"keydown":case"keyup":g=j4;break;case"focusin":w="focus",g=l_;break;case"focusout":w="blur",g=l_;break;case"beforeblur":case"afterblur":g=l_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=o1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=P4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=G4;break;case TN:case AN:case kN:g=M4;break;case RN:g=W4;break;case"scroll":g=k4;break;case"wheel":g=Y4;break;case"copy":case"cut":case"paste":g=L4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=l1}var v=(e&4)!==0,_=!v&&n==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var S=c,C;S!==null;){C=S;var T=C.stateNode;if(C.tag===5&&T!==null&&(C=T,x!==null&&(T=nm(S,x),T!=null&&v.push(cm(S,T,C)))),_)break;S=S.return}0<v.length&&(m=new g(m,w,null,t,u),p.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==vC&&(w=t.relatedTarget||t.fromElement)&&(Xl(w)||w[Do]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=t.relatedTarget||t.toElement,g=c,w=w?Xl(w):null,w!==null&&(_=zu(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(v=o1,T="onMouseLeave",x="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=l1,T="onPointerLeave",x="onPointerEnter",S="pointer"),_=g==null?m:Ed(g),C=w==null?m:Ed(w),m=new v(T,S+"leave",g,t,u),m.target=_,m.relatedTarget=C,T=null,Xl(u)===c&&(v=new v(x,S+"enter",w,t,u),v.target=C,v.relatedTarget=_,T=v),_=T,g&&w)t:{for(v=g,x=w,S=0,C=v;C;C=ed(C))S++;for(C=0,T=x;T;T=ed(T))C++;for(;0<S-C;)v=ed(v),S--;for(;0<C-S;)x=ed(x),C--;for(;S--;){if(v===x||x!==null&&v===x.alternate)break t;v=ed(v),x=ed(x)}v=null}else v=null;g!==null&&w1(p,m,g,v,!1),w!==null&&_!==null&&w1(p,_,w,v,!0)}}e:{if(m=c?Ed(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var k=nV;else if(d1(m))if(_N)k=oV;else{k=iV;var P=sV}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=rV);if(k&&(k=k(n,c))){xN(p,k,t,u);break e}P&&P(n,m,c),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&fC(m,"number",m.value)}switch(P=c?Ed(c):window,n){case"focusin":(d1(P)||P.contentEditable==="true")&&(Sd=P,EC=c,zp=null);break;case"focusout":zp=EC=Sd=null;break;case"mousedown":TC=!0;break;case"contextmenu":case"mouseup":case"dragend":TC=!1,g1(p,t,u);break;case"selectionchange":if(cV)break;case"keydown":case"keyup":g1(p,t,u)}var I;if(BE)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Cd?vN(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(yN&&t.locale!=="ko"&&(Cd||N!=="onCompositionStart"?N==="onCompositionEnd"&&Cd&&(I=gN()):(ol=u,OE="value"in ol?ol.value:ol.textContent,Cd=!0)),P=T0(c,N),0<P.length&&(N=new a1(N,n,null,t,u),p.push({event:N,listeners:P}),I?N.data=I:(I=wN(t),I!==null&&(N.data=I)))),(I=X4?Q4(n,t):Z4(n,t))&&(c=T0(c,"onBeforeInput"),0<c.length&&(u=new a1("onBeforeInput","beforeinput",null,t,u),p.push({event:u,listeners:c}),u.data=I))}IN(p,e)})}function cm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function T0(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=nm(n,t),r!=null&&s.unshift(cm(n,r,i)),r=nm(n,e),r!=null&&s.push(cm(n,r,i))),n=n.return}return s}function ed(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w1(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,i?(l=nm(t,r),l!=null&&o.unshift(cm(t,l,a))):i||(l=nm(t,r),l!=null&&o.push(cm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var fV=/\r\n?/g,pV=/\u0000|\uFFFD/g;function x1(n){return(typeof n=="string"?n:""+n).replace(fV,`
`).replace(pV,"")}function jy(n,e,t){if(e=x1(e),x1(n)!==e&&t)throw Error(W(425))}function A0(){}var AC=null,kC=null;function RC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var PC=typeof setTimeout=="function"?setTimeout:void 0,mV=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,gV=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(n){return _1.resolve(null).then(n).catch(yV)}:PC;function yV(n){setTimeout(function(){throw n})}function g_(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),rm(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);rm(e)}function dl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function C1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var If=Math.random().toString(36).slice(2),gr="__reactFiber$"+If,um="__reactProps$"+If,Do="__reactContainer$"+If,IC="__reactEvents$"+If,vV="__reactListeners$"+If,wV="__reactHandles$"+If;function Xl(n){var e=n[gr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Do]||t[gr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=C1(n);n!==null;){if(t=n[gr])return t;n=C1(n)}return e}n=t,t=n.parentNode}return null}function ly(n){return n=n[gr]||n[Do],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ed(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Ww(n){return n[um]||null}var NC=[],Td=-1;function Il(n){return{current:n}}function lt(n){0>Td||(n.current=NC[Td],NC[Td]=null,Td--)}function it(n,e){Td++,NC[Td]=n.current,n.current=e}var _l={},kn=Il(_l),os=Il(!1),Cu=_l;function pf(n,e){var t=n.type.contextTypes;if(!t)return _l;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function as(n){return n=n.childContextTypes,n!=null}function k0(){lt(os),lt(kn)}function S1(n,e,t){if(kn.current!==_l)throw Error(W(168));it(kn,e),it(os,t)}function MN(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(W(108,s4(n)||"Unknown",i));return Ct({},t,s)}function R0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_l,Cu=kn.current,it(kn,n),it(os,os.current),!0}function b1(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=MN(n,e,Cu),s.__reactInternalMemoizedMergedChildContext=n,lt(os),lt(kn),it(kn,n)):lt(os),it(os,t)}var zr=null,Kw=!1,y_=!1;function DN(n){zr===null?zr=[n]:zr.push(n)}function xV(n){Kw=!0,DN(n)}function Nl(){if(!y_&&zr!==null){y_=!0;var n=0,e=Ke;try{var t=zr;for(Ke=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}zr=null,Kw=!1}catch(i){throw zr!==null&&(zr=zr.slice(n+1)),rN(ME,Nl),i}finally{Ke=e,y_=!1}}return null}var Ad=[],kd=0,P0=null,I0=0,Ws=[],Ks=0,Su=null,To=1,Ao="";function jl(n,e){Ad[kd++]=I0,Ad[kd++]=P0,P0=n,I0=e}function LN(n,e,t){Ws[Ks++]=To,Ws[Ks++]=Ao,Ws[Ks++]=Su,Su=n;var s=To;n=Ao;var i=32-Li(s)-1;s&=~(1<<i),t+=1;var r=32-Li(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,To=1<<32-Li(e)+i|t<<i|s,Ao=r+n}else To=1<<r|t<<i|s,Ao=n}function jE(n){n.return!==null&&(jl(n,1),LN(n,1,0))}function zE(n){for(;n===P0;)P0=Ad[--kd],Ad[kd]=null,I0=Ad[--kd],Ad[kd]=null;for(;n===Su;)Su=Ws[--Ks],Ws[Ks]=null,Ao=Ws[--Ks],Ws[Ks]=null,To=Ws[--Ks],Ws[Ks]=null}var Ps=null,Rs=null,pt=!1,Ni=null;function FN(n,e){var t=Xs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function E1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ps=n,Rs=dl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ps=n,Rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Su!==null?{id:To,overflow:Ao}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Xs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ps=n,Rs=null,!0):!1;default:return!1}}function MC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function DC(n){if(pt){var e=Rs;if(e){var t=e;if(!E1(n,e)){if(MC(n))throw Error(W(418));e=dl(t.nextSibling);var s=Ps;e&&E1(n,e)?FN(s,t):(n.flags=n.flags&-4097|2,pt=!1,Ps=n)}}else{if(MC(n))throw Error(W(418));n.flags=n.flags&-4097|2,pt=!1,Ps=n}}}function T1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ps=n}function zy(n){if(n!==Ps)return!1;if(!pt)return T1(n),pt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!RC(n.type,n.memoizedProps)),e&&(e=Rs)){if(MC(n))throw ON(),Error(W(418));for(;e;)FN(n,e),e=dl(e.nextSibling)}if(T1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Rs=dl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Rs=null}}else Rs=Ps?dl(n.stateNode.nextSibling):null;return!0}function ON(){for(var n=Rs;n;)n=dl(n.nextSibling)}function mf(){Rs=Ps=null,pt=!1}function HE(n){Ni===null?Ni=[n]:Ni.push(n)}var _V=zo.ReactCurrentBatchConfig;function Zf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Hy(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function A1(n){var e=n._init;return e(n._payload)}function UN(n){function e(x,S){if(n){var C=x.deletions;C===null?(x.deletions=[S],x.flags|=16):C.push(S)}}function t(x,S){if(!n)return null;for(;S!==null;)e(x,S),S=S.sibling;return null}function s(x,S){for(x=new Map;S!==null;)S.key!==null?x.set(S.key,S):x.set(S.index,S),S=S.sibling;return x}function i(x,S){return x=ml(x,S),x.index=0,x.sibling=null,x}function r(x,S,C){return x.index=C,n?(C=x.alternate,C!==null?(C=C.index,C<S?(x.flags|=2,S):C):(x.flags|=2,S)):(x.flags|=1048576,S)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,S,C,T){return S===null||S.tag!==6?(S=b_(C,x.mode,T),S.return=x,S):(S=i(S,C),S.return=x,S)}function l(x,S,C,T){var k=C.type;return k===_d?u(x,S,C.props.children,T,C.key):S!==null&&(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ia&&A1(k)===S.type)?(T=i(S,C.props),T.ref=Zf(x,S,C),T.return=x,T):(T=Pv(C.type,C.key,C.props,null,x.mode,T),T.ref=Zf(x,S,C),T.return=x,T)}function c(x,S,C,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=E_(C,x.mode,T),S.return=x,S):(S=i(S,C.children||[]),S.return=x,S)}function u(x,S,C,T,k){return S===null||S.tag!==7?(S=vu(C,x.mode,T,k),S.return=x,S):(S=i(S,C),S.return=x,S)}function p(x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=b_(""+S,x.mode,C),S.return=x,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case My:return C=Pv(S.type,S.key,S.props,null,x.mode,C),C.ref=Zf(x,null,S),C.return=x,C;case xd:return S=E_(S,x.mode,C),S.return=x,S;case ia:var T=S._init;return p(x,T(S._payload),C)}if(up(S)||Kf(S))return S=vu(S,x.mode,C,null),S.return=x,S;Hy(x,S)}return null}function m(x,S,C,T){var k=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return k!==null?null:a(x,S,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case My:return C.key===k?l(x,S,C,T):null;case xd:return C.key===k?c(x,S,C,T):null;case ia:return k=C._init,m(x,S,k(C._payload),T)}if(up(C)||Kf(C))return k!==null?null:u(x,S,C,T,null);Hy(x,C)}return null}function g(x,S,C,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(C)||null,a(S,x,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case My:return x=x.get(T.key===null?C:T.key)||null,l(S,x,T,k);case xd:return x=x.get(T.key===null?C:T.key)||null,c(S,x,T,k);case ia:var P=T._init;return g(x,S,C,P(T._payload),k)}if(up(T)||Kf(T))return x=x.get(C)||null,u(S,x,T,k,null);Hy(S,T)}return null}function w(x,S,C,T){for(var k=null,P=null,I=S,N=S=0,D=null;I!==null&&N<C.length;N++){I.index>N?(D=I,I=null):D=I.sibling;var M=m(x,I,C[N],T);if(M===null){I===null&&(I=D);break}n&&I&&M.alternate===null&&e(x,I),S=r(M,S,N),P===null?k=M:P.sibling=M,P=M,I=D}if(N===C.length)return t(x,I),pt&&jl(x,N),k;if(I===null){for(;N<C.length;N++)I=p(x,C[N],T),I!==null&&(S=r(I,S,N),P===null?k=I:P.sibling=I,P=I);return pt&&jl(x,N),k}for(I=s(x,I);N<C.length;N++)D=g(I,x,N,C[N],T),D!==null&&(n&&D.alternate!==null&&I.delete(D.key===null?N:D.key),S=r(D,S,N),P===null?k=D:P.sibling=D,P=D);return n&&I.forEach(function(L){return e(x,L)}),pt&&jl(x,N),k}function v(x,S,C,T){var k=Kf(C);if(typeof k!="function")throw Error(W(150));if(C=k.call(C),C==null)throw Error(W(151));for(var P=k=null,I=S,N=S=0,D=null,M=C.next();I!==null&&!M.done;N++,M=C.next()){I.index>N?(D=I,I=null):D=I.sibling;var L=m(x,I,M.value,T);if(L===null){I===null&&(I=D);break}n&&I&&L.alternate===null&&e(x,I),S=r(L,S,N),P===null?k=L:P.sibling=L,P=L,I=D}if(M.done)return t(x,I),pt&&jl(x,N),k;if(I===null){for(;!M.done;N++,M=C.next())M=p(x,M.value,T),M!==null&&(S=r(M,S,N),P===null?k=M:P.sibling=M,P=M);return pt&&jl(x,N),k}for(I=s(x,I);!M.done;N++,M=C.next())M=g(I,x,N,M.value,T),M!==null&&(n&&M.alternate!==null&&I.delete(M.key===null?N:M.key),S=r(M,S,N),P===null?k=M:P.sibling=M,P=M);return n&&I.forEach(function(V){return e(x,V)}),pt&&jl(x,N),k}function _(x,S,C,T){if(typeof C=="object"&&C!==null&&C.type===_d&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case My:e:{for(var k=C.key,P=S;P!==null;){if(P.key===k){if(k=C.type,k===_d){if(P.tag===7){t(x,P.sibling),S=i(P,C.props.children),S.return=x,x=S;break e}}else if(P.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ia&&A1(k)===P.type){t(x,P.sibling),S=i(P,C.props),S.ref=Zf(x,P,C),S.return=x,x=S;break e}t(x,P);break}else e(x,P);P=P.sibling}C.type===_d?(S=vu(C.props.children,x.mode,T,C.key),S.return=x,x=S):(T=Pv(C.type,C.key,C.props,null,x.mode,T),T.ref=Zf(x,S,C),T.return=x,x=T)}return o(x);case xd:e:{for(P=C.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){t(x,S.sibling),S=i(S,C.children||[]),S.return=x,x=S;break e}else{t(x,S);break}else e(x,S);S=S.sibling}S=E_(C,x.mode,T),S.return=x,x=S}return o(x);case ia:return P=C._init,_(x,S,P(C._payload),T)}if(up(C))return w(x,S,C,T);if(Kf(C))return v(x,S,C,T);Hy(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(t(x,S.sibling),S=i(S,C),S.return=x,x=S):(t(x,S),S=b_(C,x.mode,T),S.return=x,x=S),o(x)):t(x,S)}return _}var gf=UN(!0),$N=UN(!1),N0=Il(null),M0=null,Rd=null,GE=null;function qE(){GE=Rd=M0=null}function WE(n){var e=N0.current;lt(N0),n._currentValue=e}function LC(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Bd(n,e){M0=n,GE=Rd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rs=!0),n.firstContext=null)}function ni(n){var e=n._currentValue;if(GE!==n)if(n={context:n,memoizedValue:e,next:null},Rd===null){if(M0===null)throw Error(W(308));Rd=n,M0.dependencies={lanes:0,firstContext:n}}else Rd=Rd.next=n;return e}var Ql=null;function KE(n){Ql===null?Ql=[n]:Ql.push(n)}function BN(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,KE(e)):(t.next=i.next,i.next=t),e.interleaved=t,Lo(n,s)}function Lo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ra=!1;function YE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ko(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Be&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Lo(n,t)}return i=s.interleaved,i===null?(e.next=e,KE(s)):(e.next=i.next,i.next=e),s.interleaved=e,Lo(n,t)}function bv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,DE(n,t)}}function k1(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function D0(n,e,t,s){var i=n.updateQueue;ra=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var p=i.baseState;o=0,u=c=l=null,a=r;do{var m=a.lane,g=a.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,v=a;switch(m=e,g=t,v.tag){case 1:if(w=v.payload,typeof w=="function"){p=w.call(g,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(g,p,m):w,m==null)break e;p=Ct({},p,m);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=p):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Eu|=o,n.lanes=o,n.memoizedState=p}}function R1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(W(191,i));i.call(s)}}}var cy={},Sr=Il(cy),dm=Il(cy),hm=Il(cy);function Zl(n){if(n===cy)throw Error(W(174));return n}function JE(n,e){switch(it(hm,e),it(dm,n),it(Sr,cy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mC(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=mC(e,n)}lt(Sr),it(Sr,e)}function yf(){lt(Sr),lt(dm),lt(hm)}function jN(n){Zl(hm.current);var e=Zl(Sr.current),t=mC(e,n.type);e!==t&&(it(dm,n),it(Sr,t))}function XE(n){dm.current===n&&(lt(Sr),lt(dm))}var xt=Il(0);function L0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v_=[];function QE(){for(var n=0;n<v_.length;n++)v_[n]._workInProgressVersionPrimary=null;v_.length=0}var Ev=zo.ReactCurrentDispatcher,w_=zo.ReactCurrentBatchConfig,bu=0,_t=null,jt=null,tn=null,F0=!1,Hp=!1,fm=0,CV=0;function yn(){throw Error(W(321))}function ZE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Oi(n[t],e[t]))return!1;return!0}function eT(n,e,t,s,i,r){if(bu=r,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ev.current=n===null||n.memoizedState===null?TV:AV,n=t(s,i),Hp){r=0;do{if(Hp=!1,fm=0,25<=r)throw Error(W(301));r+=1,tn=jt=null,e.updateQueue=null,Ev.current=kV,n=t(s,i)}while(Hp)}if(Ev.current=O0,e=jt!==null&&jt.next!==null,bu=0,tn=jt=_t=null,F0=!1,e)throw Error(W(300));return n}function tT(){var n=fm!==0;return fm=0,n}function Yi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?_t.memoizedState=tn=n:tn=tn.next=n,tn}function si(){if(jt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=jt.next;var e=tn===null?_t.memoizedState:tn.next;if(e!==null)tn=e,jt=n;else{if(n===null)throw Error(W(310));jt=n,n={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},tn===null?_t.memoizedState=tn=n:tn=tn.next=n}return tn}function pm(n,e){return typeof e=="function"?e(n):e}function x_(n){var e=si(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=jt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((bu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:n(s,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=s):l=l.next=p,_t.lanes|=u,Eu|=u}c=c.next}while(c!==null&&c!==r);l===null?o=s:l.next=a,Oi(s,e.memoizedState)||(rs=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,_t.lanes|=r,Eu|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function __(n){var e=si(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);Oi(r,e.memoizedState)||(rs=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function zN(){}function HN(n,e){var t=_t,s=si(),i=e(),r=!Oi(s.memoizedState,i);if(r&&(s.memoizedState=i,rs=!0),s=s.queue,nT(WN.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||tn!==null&&tn.memoizedState.tag&1){if(t.flags|=2048,mm(9,qN.bind(null,t,s,i,e),void 0,null),nn===null)throw Error(W(349));bu&30||GN(t,e,i)}return i}function GN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function qN(n,e,t,s){e.value=t,e.getSnapshot=s,KN(e)&&YN(n)}function WN(n,e,t){return t(function(){KN(e)&&YN(n)})}function KN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Oi(n,t)}catch{return!0}}function YN(n){var e=Lo(n,1);e!==null&&Fi(e,n,1,-1)}function P1(n){var e=Yi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pm,lastRenderedState:n},e.queue=n,n=n.dispatch=EV.bind(null,_t,n),[e.memoizedState,n]}function mm(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function JN(){return si().memoizedState}function Tv(n,e,t,s){var i=Yi();_t.flags|=n,i.memoizedState=mm(1|e,t,void 0,s===void 0?null:s)}function Yw(n,e,t,s){var i=si();s=s===void 0?null:s;var r=void 0;if(jt!==null){var o=jt.memoizedState;if(r=o.destroy,s!==null&&ZE(s,o.deps)){i.memoizedState=mm(e,t,r,s);return}}_t.flags|=n,i.memoizedState=mm(1|e,t,r,s)}function I1(n,e){return Tv(8390656,8,n,e)}function nT(n,e){return Yw(2048,8,n,e)}function XN(n,e){return Yw(4,2,n,e)}function QN(n,e){return Yw(4,4,n,e)}function ZN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function eM(n,e,t){return t=t!=null?t.concat([n]):null,Yw(4,4,ZN.bind(null,e,n),t)}function sT(){}function tM(n,e){var t=si();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&ZE(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function nM(n,e){var t=si();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&ZE(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function sM(n,e,t){return bu&21?(Oi(t,e)||(t=lN(),_t.lanes|=t,Eu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rs=!0),n.memoizedState=t)}function SV(n,e){var t=Ke;Ke=t!==0&&4>t?t:4,n(!0);var s=w_.transition;w_.transition={};try{n(!1),e()}finally{Ke=t,w_.transition=s}}function iM(){return si().memoizedState}function bV(n,e,t){var s=pl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},rM(n))oM(e,t);else if(t=BN(n,e,t,s),t!==null){var i=jn();Fi(t,n,s,i),aM(t,e,s)}}function EV(n,e,t){var s=pl(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(rM(n))oM(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(i.hasEagerState=!0,i.eagerState=a,Oi(a,o)){var l=e.interleaved;l===null?(i.next=i,KE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=BN(n,e,i,s),t!==null&&(i=jn(),Fi(t,n,s,i),aM(t,e,s))}}function rM(n){var e=n.alternate;return n===_t||e!==null&&e===_t}function oM(n,e){Hp=F0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function aM(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,DE(n,t)}}var O0={readContext:ni,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},TV={readContext:ni,useCallback:function(n,e){return Yi().memoizedState=[n,e===void 0?null:e],n},useContext:ni,useEffect:I1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Tv(4194308,4,ZN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Tv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Tv(4,2,n,e)},useMemo:function(n,e){var t=Yi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Yi();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=bV.bind(null,_t,n),[s.memoizedState,n]},useRef:function(n){var e=Yi();return n={current:n},e.memoizedState=n},useState:P1,useDebugValue:sT,useDeferredValue:function(n){return Yi().memoizedState=n},useTransition:function(){var n=P1(!1),e=n[0];return n=SV.bind(null,n[1]),Yi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=_t,i=Yi();if(pt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),nn===null)throw Error(W(349));bu&30||GN(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,I1(WN.bind(null,s,r,n),[n]),s.flags|=2048,mm(9,qN.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=Yi(),e=nn.identifierPrefix;if(pt){var t=Ao,s=To;t=(s&~(1<<32-Li(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=fm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=CV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},AV={readContext:ni,useCallback:tM,useContext:ni,useEffect:nT,useImperativeHandle:eM,useInsertionEffect:XN,useLayoutEffect:QN,useMemo:nM,useReducer:x_,useRef:JN,useState:function(){return x_(pm)},useDebugValue:sT,useDeferredValue:function(n){var e=si();return sM(e,jt.memoizedState,n)},useTransition:function(){var n=x_(pm)[0],e=si().memoizedState;return[n,e]},useMutableSource:zN,useSyncExternalStore:HN,useId:iM,unstable_isNewReconciler:!1},kV={readContext:ni,useCallback:tM,useContext:ni,useEffect:nT,useImperativeHandle:eM,useInsertionEffect:XN,useLayoutEffect:QN,useMemo:nM,useReducer:__,useRef:JN,useState:function(){return __(pm)},useDebugValue:sT,useDeferredValue:function(n){var e=si();return jt===null?e.memoizedState=n:sM(e,jt.memoizedState,n)},useTransition:function(){var n=__(pm)[0],e=si().memoizedState;return[n,e]},useMutableSource:zN,useSyncExternalStore:HN,useId:iM,unstable_isNewReconciler:!1};function mi(n,e){if(n&&n.defaultProps){e=Ct({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function FC(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Ct({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Jw={isMounted:function(n){return(n=n._reactInternals)?zu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=jn(),i=pl(n),r=ko(s,i);r.payload=e,t!=null&&(r.callback=t),e=hl(n,r,i),e!==null&&(Fi(e,n,i,s),bv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=jn(),i=pl(n),r=ko(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=hl(n,r,i),e!==null&&(Fi(e,n,i,s),bv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=jn(),s=pl(n),i=ko(t,s);i.tag=2,e!=null&&(i.callback=e),e=hl(n,i,s),e!==null&&(Fi(e,n,s,t),bv(e,n,s))}};function N1(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!am(t,s)||!am(i,r):!0}function lM(n,e,t){var s=!1,i=_l,r=e.contextType;return typeof r=="object"&&r!==null?r=ni(r):(i=as(e)?Cu:kn.current,s=e.contextTypes,r=(s=s!=null)?pf(n,i):_l),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jw,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function M1(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Jw.enqueueReplaceState(e,e.state,null)}function OC(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},YE(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=ni(r):(r=as(e)?Cu:kn.current,i.context=pf(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(FC(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jw.enqueueReplaceState(i,i.state,null),D0(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function vf(n,e){try{var t="",s=e;do t+=n4(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function C_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function UC(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var RV=typeof WeakMap=="function"?WeakMap:Map;function cM(n,e,t){t=ko(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){$0||($0=!0,KC=s),UC(n,e)},t}function uM(n,e,t){t=ko(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){UC(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){UC(n,e),typeof s!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function D1(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new RV;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=zV.bind(null,n,e,t),e.then(n,n))}function L1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function F1(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ko(-1,1),e.tag=2,hl(t,e,1))),t.lanes|=1),n)}var PV=zo.ReactCurrentOwner,rs=!1;function Un(n,e,t,s){e.child=n===null?$N(e,null,t,s):gf(e,n.child,t,s)}function O1(n,e,t,s,i){t=t.render;var r=e.ref;return Bd(e,i),s=eT(n,e,t,s,r,i),t=tT(),n!==null&&!rs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fo(n,e,i)):(pt&&t&&jE(e),e.flags|=1,Un(n,e,s,i),e.child)}function U1(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!dT(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,dM(n,e,r,s,i)):(n=Pv(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:am,t(o,s)&&n.ref===e.ref)return Fo(n,e,i)}return e.flags|=1,n=ml(r,s),n.ref=e.ref,n.return=e,e.child=n}function dM(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(am(r,s)&&n.ref===e.ref)if(rs=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(rs=!0);else return e.lanes=n.lanes,Fo(n,e,i)}return $C(n,e,t,s,i)}function hM(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Id,Es),Es|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,it(Id,Es),Es|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,it(Id,Es),Es|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,it(Id,Es),Es|=s;return Un(n,e,i,t),e.child}function fM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $C(n,e,t,s,i){var r=as(t)?Cu:kn.current;return r=pf(e,r),Bd(e,i),t=eT(n,e,t,s,r,i),s=tT(),n!==null&&!rs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fo(n,e,i)):(pt&&s&&jE(e),e.flags|=1,Un(n,e,t,i),e.child)}function $1(n,e,t,s,i){if(as(t)){var r=!0;R0(e)}else r=!1;if(Bd(e,i),e.stateNode===null)Av(n,e),lM(e,t,s),OC(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ni(c):(c=as(t)?Cu:kn.current,c=pf(e,c));var u=t.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&M1(e,o,s,c),ra=!1;var m=e.memoizedState;o.state=m,D0(e,s,o,i),l=e.memoizedState,a!==s||m!==l||os.current||ra?(typeof u=="function"&&(FC(e,t,u,s),l=e.memoizedState),(a=ra||N1(e,t,a,s,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,VN(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:mi(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ni(l):(l=as(t)?Cu:kn.current,l=pf(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&M1(e,o,s,l),ra=!1,m=e.memoizedState,o.state=m,D0(e,s,o,i);var w=e.memoizedState;a!==p||m!==w||os.current||ra?(typeof g=="function"&&(FC(e,t,g,s),w=e.memoizedState),(c=ra||N1(e,t,c,s,m,w,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=w),o.props=s,o.state=w,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),s=!1)}return BC(n,e,t,s,r,i)}function BC(n,e,t,s,i,r){fM(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&b1(e,t,!1),Fo(n,e,r);s=e.stateNode,PV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=gf(e,n.child,null,r),e.child=gf(e,null,a,r)):Un(n,e,a,r),e.memoizedState=s.state,i&&b1(e,t,!0),e.child}function pM(n){var e=n.stateNode;e.pendingContext?S1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&S1(n,e.context,!1),JE(n,e.containerInfo)}function B1(n,e,t,s,i){return mf(),HE(i),e.flags|=256,Un(n,e,t,s),e.child}var VC={dehydrated:null,treeContext:null,retryLane:0};function jC(n){return{baseLanes:n,cachePool:null,transitions:null}}function mM(n,e,t){var s=e.pendingProps,i=xt.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),it(xt,i&1),n===null)return DC(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Zw(o,s,0,null),n=vu(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=jC(t),e.memoizedState=VC,n):iT(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IV(n,e,o,s,a,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=ml(i,l),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=ml(a,r):(r=vu(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?jC(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=VC,s}return r=n.child,n=r.sibling,s=ml(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function iT(n,e){return e=Zw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Gy(n,e,t,s){return s!==null&&HE(s),gf(e,n.child,null,t),n=iT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function IV(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=C_(Error(W(422))),Gy(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Zw({mode:"visible",children:s.children},i,0,null),r=vu(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&gf(e,n.child,null,o),e.child.memoizedState=jC(o),e.memoizedState=VC,r);if(!(e.mode&1))return Gy(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(W(419)),s=C_(r,s,void 0),Gy(n,e,o,s)}if(a=(o&n.childLanes)!==0,rs||a){if(s=nn,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Lo(n,i),Fi(s,n,i,-1))}return uT(),s=C_(Error(W(421))),Gy(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=HV.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,Rs=dl(i.nextSibling),Ps=e,pt=!0,Ni=null,n!==null&&(Ws[Ks++]=To,Ws[Ks++]=Ao,Ws[Ks++]=Su,To=n.id,Ao=n.overflow,Su=e),e=iT(e,s.children),e.flags|=4096,e)}function V1(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),LC(n.return,e,t)}function S_(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function gM(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Un(n,e,s.children,t),s=xt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&V1(n,t,e);else if(n.tag===19)V1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(it(xt,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&L0(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),S_(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&L0(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}S_(e,!0,t,null,r);break;case"together":S_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Av(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Fo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Eu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=ml(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ml(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function NV(n,e,t){switch(e.tag){case 3:pM(e),mf();break;case 5:jN(e);break;case 1:as(e.type)&&R0(e);break;case 4:JE(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;it(N0,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(it(xt,xt.current&1),e.flags|=128,null):t&e.child.childLanes?mM(n,e,t):(it(xt,xt.current&1),n=Fo(n,e,t),n!==null?n.sibling:null);it(xt,xt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return gM(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(xt,xt.current),s)break;return null;case 22:case 23:return e.lanes=0,hM(n,e,t)}return Fo(n,e,t)}var yM,zC,vM,wM;yM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};zC=function(){};vM=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Zl(Sr.current);var r=null;switch(t){case"input":i=dC(n,i),s=dC(n,s),r=[];break;case"select":i=Ct({},i,{value:void 0}),s=Ct({},s,{value:void 0}),r=[];break;case"textarea":i=pC(n,i),s=pC(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=A0)}gC(t,s);var o;t=null;for(c in i)if(!s.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(em.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in s){var l=s[c];if(a=i!=null?i[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(em.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ot("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};wM=function(n,e,t,s){t!==s&&(e.flags|=4)};function ep(n,e){if(!pt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function vn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function MV(n,e,t){var s=e.pendingProps;switch(zE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return as(e.type)&&k0(),vn(e),null;case 3:return s=e.stateNode,yf(),lt(os),lt(kn),QE(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(zy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ni!==null&&(XC(Ni),Ni=null))),zC(n,e),vn(e),null;case 5:XE(e);var i=Zl(hm.current);if(t=e.type,n!==null&&e.stateNode!=null)vM(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return vn(e),null}if(n=Zl(Sr.current),zy(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[gr]=e,s[um]=r,n=(e.mode&1)!==0,t){case"dialog":ot("cancel",s),ot("close",s);break;case"iframe":case"object":case"embed":ot("load",s);break;case"video":case"audio":for(i=0;i<hp.length;i++)ot(hp[i],s);break;case"source":ot("error",s);break;case"img":case"image":case"link":ot("error",s),ot("load",s);break;case"details":ot("toggle",s);break;case"input":JA(s,r),ot("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},ot("invalid",s);break;case"textarea":QA(s,r),ot("invalid",s)}gC(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&jy(s.textContent,a,n),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&jy(s.textContent,a,n),i=["children",""+a]):em.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",s)}switch(t){case"input":Dy(s),XA(s,r,!0);break;case"textarea":Dy(s),ZA(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=A0)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=WI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[gr]=e,n[um]=s,yM(n,e,!1,!1),e.stateNode=n;e:{switch(o=yC(t,s),t){case"dialog":ot("cancel",n),ot("close",n),i=s;break;case"iframe":case"object":case"embed":ot("load",n),i=s;break;case"video":case"audio":for(i=0;i<hp.length;i++)ot(hp[i],n);i=s;break;case"source":ot("error",n),i=s;break;case"img":case"image":case"link":ot("error",n),ot("load",n),i=s;break;case"details":ot("toggle",n),i=s;break;case"input":JA(n,s),i=dC(n,s),ot("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Ct({},s,{value:void 0}),ot("invalid",n);break;case"textarea":QA(n,s),i=pC(n,s),ot("invalid",n);break;default:i=s}gC(t,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?JI(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KI(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&tm(n,l):typeof l=="number"&&tm(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(em.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ot("scroll",n):l!=null&&kE(n,r,l,o))}switch(t){case"input":Dy(n),XA(n,s,!1);break;case"textarea":Dy(n),ZA(n);break;case"option":s.value!=null&&n.setAttribute("value",""+xl(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Fd(n,!!s.multiple,r,!1):s.defaultValue!=null&&Fd(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=A0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(n&&e.stateNode!=null)wM(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=Zl(hm.current),Zl(Sr.current),zy(e)){if(s=e.stateNode,t=e.memoizedProps,s[gr]=e,(r=s.nodeValue!==t)&&(n=Ps,n!==null))switch(n.tag){case 3:jy(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&jy(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[gr]=e,e.stateNode=s}return vn(e),null;case 13:if(lt(xt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pt&&Rs!==null&&e.mode&1&&!(e.flags&128))ON(),mf(),e.flags|=98560,r=!1;else if(r=zy(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(W(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(W(317));r[gr]=e}else mf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),r=!1}else Ni!==null&&(XC(Ni),Ni=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||xt.current&1?Ht===0&&(Ht=3):uT())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return yf(),zC(n,e),n===null&&lm(e.stateNode.containerInfo),vn(e),null;case 10:return WE(e.type._context),vn(e),null;case 17:return as(e.type)&&k0(),vn(e),null;case 19:if(lt(xt),r=e.memoizedState,r===null)return vn(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)ep(r,!1);else{if(Ht!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=L0(n),o!==null){for(e.flags|=128,ep(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return it(xt,xt.current&1|2),e.child}n=n.sibling}r.tail!==null&&Rt()>wf&&(e.flags|=128,s=!0,ep(r,!1),e.lanes=4194304)}else{if(!s)if(n=L0(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ep(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!pt)return vn(e),null}else 2*Rt()-r.renderingStartTime>wf&&t!==1073741824&&(e.flags|=128,s=!0,ep(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Rt(),e.sibling=null,t=xt.current,it(xt,s?t&1|2:t&1),e):(vn(e),null);case 22:case 23:return cT(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Es&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function DV(n,e){switch(zE(e),e.tag){case 1:return as(e.type)&&k0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return yf(),lt(os),lt(kn),QE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return XE(e),null;case 13:if(lt(xt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));mf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lt(xt),null;case 4:return yf(),null;case 10:return WE(e.type._context),null;case 22:case 23:return cT(),null;case 24:return null;default:return null}}var qy=!1,Tn=!1,LV=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Pd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Tt(n,e,s)}else t.current=null}function HC(n,e,t){try{t()}catch(s){Tt(n,e,s)}}var j1=!1;function FV(n,e){if(AC=b0,n=bN(),VE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,p=n,m=null;t:for(;;){for(var g;p!==t||i!==0&&p.nodeType!==3||(a=o+i),p!==r||s!==0&&p.nodeType!==3||(l=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++c===i&&(a=o),m===r&&++u===s&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(kC={focusedElem:n,selectionRange:t},b0=!1,ne=e;ne!==null;)if(e=ne,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ne=n;else for(;ne!==null;){e=ne;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,x=e.stateNode,S=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:mi(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(T){Tt(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}return w=j1,j1=!1,w}function Gp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&HC(e,t,r)}i=i.next}while(i!==s)}}function Xw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function GC(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function xM(n){var e=n.alternate;e!==null&&(n.alternate=null,xM(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[gr],delete e[um],delete e[IC],delete e[vV],delete e[wV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _M(n){return n.tag===5||n.tag===3||n.tag===4}function z1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_M(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qC(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=A0));else if(s!==4&&(n=n.child,n!==null))for(qC(n,e,t),n=n.sibling;n!==null;)qC(n,e,t),n=n.sibling}function WC(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(WC(n,e,t),n=n.sibling;n!==null;)WC(n,e,t),n=n.sibling}var cn=null,Pi=!1;function Zo(n,e,t){for(t=t.child;t!==null;)CM(n,e,t),t=t.sibling}function CM(n,e,t){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(zw,t)}catch{}switch(t.tag){case 5:Tn||Pd(t,e);case 6:var s=cn,i=Pi;cn=null,Zo(n,e,t),cn=s,Pi=i,cn!==null&&(Pi?(n=cn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):cn.removeChild(t.stateNode));break;case 18:cn!==null&&(Pi?(n=cn,t=t.stateNode,n.nodeType===8?g_(n.parentNode,t):n.nodeType===1&&g_(n,t),rm(n)):g_(cn,t.stateNode));break;case 4:s=cn,i=Pi,cn=t.stateNode.containerInfo,Pi=!0,Zo(n,e,t),cn=s,Pi=i;break;case 0:case 11:case 14:case 15:if(!Tn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&HC(t,e,o),i=i.next}while(i!==s)}Zo(n,e,t);break;case 1:if(!Tn&&(Pd(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){Tt(t,e,a)}Zo(n,e,t);break;case 21:Zo(n,e,t);break;case 22:t.mode&1?(Tn=(s=Tn)||t.memoizedState!==null,Zo(n,e,t),Tn=s):Zo(n,e,t);break;default:Zo(n,e,t)}}function H1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new LV),e.forEach(function(s){var i=GV.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function ui(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,Pi=!1;break e;case 3:cn=a.stateNode.containerInfo,Pi=!0;break e;case 4:cn=a.stateNode.containerInfo,Pi=!0;break e}a=a.return}if(cn===null)throw Error(W(160));CM(r,o,i),cn=null,Pi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Tt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SM(e,n),e=e.sibling}function SM(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ui(e,n),Gi(n),s&4){try{Gp(3,n,n.return),Xw(3,n)}catch(v){Tt(n,n.return,v)}try{Gp(5,n,n.return)}catch(v){Tt(n,n.return,v)}}break;case 1:ui(e,n),Gi(n),s&512&&t!==null&&Pd(t,t.return);break;case 5:if(ui(e,n),Gi(n),s&512&&t!==null&&Pd(t,t.return),n.flags&32){var i=n.stateNode;try{tm(i,"")}catch(v){Tt(n,n.return,v)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&GI(i,r),yC(a,o);var c=yC(a,r);for(o=0;o<l.length;o+=2){var u=l[o],p=l[o+1];u==="style"?JI(i,p):u==="dangerouslySetInnerHTML"?KI(i,p):u==="children"?tm(i,p):kE(i,u,p,c)}switch(a){case"input":hC(i,r);break;case"textarea":qI(i,r);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?Fd(i,!!r.multiple,g,!1):m!==!!r.multiple&&(r.defaultValue!=null?Fd(i,!!r.multiple,r.defaultValue,!0):Fd(i,!!r.multiple,r.multiple?[]:"",!1))}i[um]=r}catch(v){Tt(n,n.return,v)}}break;case 6:if(ui(e,n),Gi(n),s&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(v){Tt(n,n.return,v)}}break;case 3:if(ui(e,n),Gi(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{rm(e.containerInfo)}catch(v){Tt(n,n.return,v)}break;case 4:ui(e,n),Gi(n);break;case 13:ui(e,n),Gi(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(aT=Rt())),s&4&&H1(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Tn=(c=Tn)||u,ui(e,n),Tn=c):ui(e,n),Gi(n),s&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ne=n,u=n.child;u!==null;){for(p=ne=u;ne!==null;){switch(m=ne,g=m.child,m.tag){case 0:case 11:case 14:case 15:Gp(4,m,m.return);break;case 1:Pd(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){s=m,t=m.return;try{e=s,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){Tt(s,t,v)}}break;case 5:Pd(m,m.return);break;case 22:if(m.memoizedState!==null){q1(p);continue}}g!==null?(g.return=m,ne=g):q1(p)}u=u.sibling}e:for(u=null,p=n;;){if(p.tag===5){if(u===null){u=p;try{i=p.stateNode,c?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=YI("display",o))}catch(v){Tt(n,n.return,v)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){Tt(n,n.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ui(e,n),Gi(n),s&4&&H1(n);break;case 21:break;default:ui(e,n),Gi(n)}}function Gi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(_M(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(tm(i,""),s.flags&=-33);var r=z1(n);WC(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,a=z1(n);qC(n,a,o);break;default:throw Error(W(161))}}catch(l){Tt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function OV(n,e,t){ne=n,bM(n)}function bM(n,e,t){for(var s=(n.mode&1)!==0;ne!==null;){var i=ne,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||qy;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tn;a=qy;var c=Tn;if(qy=o,(Tn=l)&&!c)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?W1(i):l!==null?(l.return=o,ne=l):W1(i);for(;r!==null;)ne=r,bM(r),r=r.sibling;ne=i,qy=a,Tn=c}G1(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,ne=r):G1(n)}}function G1(n){for(;ne!==null;){var e=ne;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||Xw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Tn)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:mi(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&R1(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}R1(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&rm(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Tn||e.flags&512&&GC(e)}catch(m){Tt(e,e.return,m)}}if(e===n){ne=null;break}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}}function q1(n){for(;ne!==null;){var e=ne;if(e===n){ne=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ne=t;break}ne=e.return}}function W1(n){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Xw(4,e)}catch(l){Tt(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(l){Tt(e,i,l)}}var r=e.return;try{GC(e)}catch(l){Tt(e,r,l)}break;case 5:var o=e.return;try{GC(e)}catch(l){Tt(e,o,l)}}}catch(l){Tt(e,e.return,l)}if(e===n){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var UV=Math.ceil,U0=zo.ReactCurrentDispatcher,rT=zo.ReactCurrentOwner,Qs=zo.ReactCurrentBatchConfig,Be=0,nn=null,Lt=null,fn=0,Es=0,Id=Il(0),Ht=0,gm=null,Eu=0,Qw=0,oT=0,qp=null,ss=null,aT=0,wf=1/0,$r=null,$0=!1,KC=null,fl=null,Wy=!1,al=null,B0=0,Wp=0,YC=null,kv=-1,Rv=0;function jn(){return Be&6?Rt():kv!==-1?kv:kv=Rt()}function pl(n){return n.mode&1?Be&2&&fn!==0?fn&-fn:_V.transition!==null?(Rv===0&&(Rv=lN()),Rv):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:mN(n.type)),n):1}function Fi(n,e,t,s){if(50<Wp)throw Wp=0,YC=null,Error(W(185));oy(n,t,s),(!(Be&2)||n!==nn)&&(n===nn&&(!(Be&2)&&(Qw|=t),Ht===4&&ua(n,fn)),ls(n,s),t===1&&Be===0&&!(e.mode&1)&&(wf=Rt()+500,Kw&&Nl()))}function ls(n,e){var t=n.callbackNode;_4(n,e);var s=S0(n,n===nn?fn:0);if(s===0)t!==null&&n1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&n1(t),e===1)n.tag===0?xV(K1.bind(null,n)):DN(K1.bind(null,n)),gV(function(){!(Be&6)&&Nl()}),t=null;else{switch(cN(s)){case 1:t=ME;break;case 4:t=oN;break;case 16:t=C0;break;case 536870912:t=aN;break;default:t=C0}t=NM(t,EM.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function EM(n,e){if(kv=-1,Rv=0,Be&6)throw Error(W(327));var t=n.callbackNode;if(Vd()&&n.callbackNode!==t)return null;var s=S0(n,n===nn?fn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=V0(n,s);else{e=s;var i=Be;Be|=2;var r=AM();(nn!==n||fn!==e)&&($r=null,wf=Rt()+500,yu(n,e));do try{VV();break}catch(a){TM(n,a)}while(!0);qE(),U0.current=r,Be=i,Lt!==null?e=0:(nn=null,fn=0,e=Ht)}if(e!==0){if(e===2&&(i=CC(n),i!==0&&(s=i,e=JC(n,i))),e===1)throw t=gm,yu(n,0),ua(n,s),ls(n,Rt()),t;if(e===6)ua(n,s);else{if(i=n.current.alternate,!(s&30)&&!$V(i)&&(e=V0(n,s),e===2&&(r=CC(n),r!==0&&(s=r,e=JC(n,r))),e===1))throw t=gm,yu(n,0),ua(n,s),ls(n,Rt()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:zl(n,ss,$r);break;case 3:if(ua(n,s),(s&130023424)===s&&(e=aT+500-Rt(),10<e)){if(S0(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){jn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=PC(zl.bind(null,n,ss,$r),e);break}zl(n,ss,$r);break;case 4:if(ua(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-Li(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*UV(s/1960))-s,10<s){n.timeoutHandle=PC(zl.bind(null,n,ss,$r),s);break}zl(n,ss,$r);break;case 5:zl(n,ss,$r);break;default:throw Error(W(329))}}}return ls(n,Rt()),n.callbackNode===t?EM.bind(null,n):null}function JC(n,e){var t=qp;return n.current.memoizedState.isDehydrated&&(yu(n,e).flags|=256),n=V0(n,e),n!==2&&(e=ss,ss=t,e!==null&&XC(e)),n}function XC(n){ss===null?ss=n:ss.push.apply(ss,n)}function $V(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!Oi(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(n,e){for(e&=~oT,e&=~Qw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Li(e),s=1<<t;n[t]=-1,e&=~s}}function K1(n){if(Be&6)throw Error(W(327));Vd();var e=S0(n,0);if(!(e&1))return ls(n,Rt()),null;var t=V0(n,e);if(n.tag!==0&&t===2){var s=CC(n);s!==0&&(e=s,t=JC(n,s))}if(t===1)throw t=gm,yu(n,0),ua(n,e),ls(n,Rt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,zl(n,ss,$r),ls(n,Rt()),null}function lT(n,e){var t=Be;Be|=1;try{return n(e)}finally{Be=t,Be===0&&(wf=Rt()+500,Kw&&Nl())}}function Tu(n){al!==null&&al.tag===0&&!(Be&6)&&Vd();var e=Be;Be|=1;var t=Qs.transition,s=Ke;try{if(Qs.transition=null,Ke=1,n)return n()}finally{Ke=s,Qs.transition=t,Be=e,!(Be&6)&&Nl()}}function cT(){Es=Id.current,lt(Id)}function yu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,mV(t)),Lt!==null)for(t=Lt.return;t!==null;){var s=t;switch(zE(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&k0();break;case 3:yf(),lt(os),lt(kn),QE();break;case 5:XE(s);break;case 4:yf();break;case 13:lt(xt);break;case 19:lt(xt);break;case 10:WE(s.type._context);break;case 22:case 23:cT()}t=t.return}if(nn=n,Lt=n=ml(n.current,null),fn=Es=e,Ht=0,gm=null,oT=Qw=Eu=0,ss=qp=null,Ql!==null){for(e=0;e<Ql.length;e++)if(t=Ql[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}Ql=null}return n}function TM(n,e){do{var t=Lt;try{if(qE(),Ev.current=O0,F0){for(var s=_t.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}F0=!1}if(bu=0,tn=jt=_t=null,Hp=!1,fm=0,rT.current=null,t===null||t.return===null){Ht=1,gm=e,Lt=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=fn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=L1(o);if(g!==null){g.flags&=-257,F1(g,o,a,r,e),g.mode&1&&D1(r,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){D1(r,c,e),uT();break e}l=Error(W(426))}}else if(pt&&a.mode&1){var _=L1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),F1(_,o,a,r,e),HE(vf(l,a));break e}}r=l=vf(l,a),Ht!==4&&(Ht=2),qp===null?qp=[r]:qp.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var x=cM(r,l,e);k1(r,x);break e;case 1:a=l;var S=r.type,C=r.stateNode;if(!(r.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(fl===null||!fl.has(C)))){r.flags|=65536,e&=-e,r.lanes|=e;var T=uM(r,a,e);k1(r,T);break e}}r=r.return}while(r!==null)}RM(t)}catch(k){e=k,Lt===t&&t!==null&&(Lt=t=t.return);continue}break}while(!0)}function AM(){var n=U0.current;return U0.current=O0,n===null?O0:n}function uT(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),nn===null||!(Eu&268435455)&&!(Qw&268435455)||ua(nn,fn)}function V0(n,e){var t=Be;Be|=2;var s=AM();(nn!==n||fn!==e)&&($r=null,yu(n,e));do try{BV();break}catch(i){TM(n,i)}while(!0);if(qE(),Be=t,U0.current=s,Lt!==null)throw Error(W(261));return nn=null,fn=0,Ht}function BV(){for(;Lt!==null;)kM(Lt)}function VV(){for(;Lt!==null&&!h4();)kM(Lt)}function kM(n){var e=IM(n.alternate,n,Es);n.memoizedProps=n.pendingProps,e===null?RM(n):Lt=e,rT.current=null}function RM(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=DV(t,e),t!==null){t.flags&=32767,Lt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ht=6,Lt=null;return}}else if(t=MV(t,e,Es),t!==null){Lt=t;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=n}while(e!==null);Ht===0&&(Ht=5)}function zl(n,e,t){var s=Ke,i=Qs.transition;try{Qs.transition=null,Ke=1,jV(n,e,t,s)}finally{Qs.transition=i,Ke=s}return null}function jV(n,e,t,s){do Vd();while(al!==null);if(Be&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(C4(n,r),n===nn&&(Lt=nn=null,fn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Wy||(Wy=!0,NM(C0,function(){return Vd(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Qs.transition,Qs.transition=null;var o=Ke;Ke=1;var a=Be;Be|=4,rT.current=null,FV(n,t),SM(t,n),lV(kC),b0=!!AC,kC=AC=null,n.current=t,OV(t),f4(),Be=a,Ke=o,Qs.transition=r}else n.current=t;if(Wy&&(Wy=!1,al=n,B0=i),r=n.pendingLanes,r===0&&(fl=null),g4(t.stateNode),ls(n,Rt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if($0)throw $0=!1,n=KC,KC=null,n;return B0&1&&n.tag!==0&&Vd(),r=n.pendingLanes,r&1?n===YC?Wp++:(Wp=0,YC=n):Wp=0,Nl(),null}function Vd(){if(al!==null){var n=cN(B0),e=Qs.transition,t=Ke;try{if(Qs.transition=null,Ke=16>n?16:n,al===null)var s=!1;else{if(n=al,al=null,B0=0,Be&6)throw Error(W(331));var i=Be;for(Be|=4,ne=n.current;ne!==null;){var r=ne,o=r.child;if(ne.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var u=ne;switch(u.tag){case 0:case 11:case 15:Gp(8,u,r)}var p=u.child;if(p!==null)p.return=u,ne=p;else for(;ne!==null;){u=ne;var m=u.sibling,g=u.return;if(xM(u),u===c){ne=null;break}if(m!==null){m.return=g,ne=m;break}ne=g}}}var w=r.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}ne=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,ne=o;else e:for(;ne!==null;){if(r=ne,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Gp(9,r,r.return)}var x=r.sibling;if(x!==null){x.return=r.return,ne=x;break e}ne=r.return}}var S=n.current;for(ne=S;ne!==null;){o=ne;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ne=C;else e:for(o=S;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xw(9,a)}}catch(k){Tt(a,a.return,k)}if(a===o){ne=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,ne=T;break e}ne=a.return}}if(Be=i,Nl(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(zw,n)}catch{}s=!0}return s}finally{Ke=t,Qs.transition=e}}return!1}function Y1(n,e,t){e=vf(t,e),e=cM(n,e,1),n=hl(n,e,1),e=jn(),n!==null&&(oy(n,1,e),ls(n,e))}function Tt(n,e,t){if(n.tag===3)Y1(n,n,t);else for(;e!==null;){if(e.tag===3){Y1(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fl===null||!fl.has(s))){n=vf(t,n),n=uM(e,n,1),e=hl(e,n,1),n=jn(),e!==null&&(oy(e,1,n),ls(e,n));break}}e=e.return}}function zV(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=jn(),n.pingedLanes|=n.suspendedLanes&t,nn===n&&(fn&t)===t&&(Ht===4||Ht===3&&(fn&130023424)===fn&&500>Rt()-aT?yu(n,0):oT|=t),ls(n,e)}function PM(n,e){e===0&&(n.mode&1?(e=Oy,Oy<<=1,!(Oy&130023424)&&(Oy=4194304)):e=1);var t=jn();n=Lo(n,e),n!==null&&(oy(n,e,t),ls(n,t))}function HV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),PM(n,t)}function GV(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),PM(n,t)}var IM;IM=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||os.current)rs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return rs=!1,NV(n,e,t);rs=!!(n.flags&131072)}else rs=!1,pt&&e.flags&1048576&&LN(e,I0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Av(n,e),n=e.pendingProps;var i=pf(e,kn.current);Bd(e,t),i=eT(null,e,s,n,i,t);var r=tT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,as(s)?(r=!0,R0(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,YE(e),i.updater=Jw,e.stateNode=i,i._reactInternals=e,OC(e,s,n,t),e=BC(null,e,s,!0,r,t)):(e.tag=0,pt&&r&&jE(e),Un(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Av(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=WV(s),n=mi(s,n),i){case 0:e=$C(null,e,s,n,t);break e;case 1:e=$1(null,e,s,n,t);break e;case 11:e=O1(null,e,s,n,t);break e;case 14:e=U1(null,e,s,mi(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:mi(s,i),$C(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:mi(s,i),$1(n,e,s,i,t);case 3:e:{if(pM(e),n===null)throw Error(W(387));s=e.pendingProps,r=e.memoizedState,i=r.element,VN(n,e),D0(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=vf(Error(W(423)),e),e=B1(n,e,s,t,i);break e}else if(s!==i){i=vf(Error(W(424)),e),e=B1(n,e,s,t,i);break e}else for(Rs=dl(e.stateNode.containerInfo.firstChild),Ps=e,pt=!0,Ni=null,t=$N(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(mf(),s===i){e=Fo(n,e,t);break e}Un(n,e,s,t)}e=e.child}return e;case 5:return jN(e),n===null&&DC(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,RC(s,i)?o=null:r!==null&&RC(s,r)&&(e.flags|=32),fM(n,e),Un(n,e,o,t),e.child;case 6:return n===null&&DC(e),null;case 13:return mM(n,e,t);case 4:return JE(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=gf(e,null,s,t):Un(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:mi(s,i),O1(n,e,s,i,t);case 7:return Un(n,e,e.pendingProps,t),e.child;case 8:return Un(n,e,e.pendingProps.children,t),e.child;case 12:return Un(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,it(N0,s._currentValue),s._currentValue=o,r!==null)if(Oi(r.value,o)){if(r.children===i.children&&!os.current){e=Fo(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=ko(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),LC(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),LC(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Un(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Bd(e,t),i=ni(i),s=s(i),e.flags|=1,Un(n,e,s,t),e.child;case 14:return s=e.type,i=mi(s,e.pendingProps),i=mi(s.type,i),U1(n,e,s,i,t);case 15:return dM(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:mi(s,i),Av(n,e),e.tag=1,as(s)?(n=!0,R0(e)):n=!1,Bd(e,t),lM(e,s,i),OC(e,s,i,t),BC(null,e,s,!0,n,t);case 19:return gM(n,e,t);case 22:return hM(n,e,t)}throw Error(W(156,e.tag))};function NM(n,e){return rN(n,e)}function qV(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(n,e,t,s){return new qV(n,e,t,s)}function dT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WV(n){if(typeof n=="function")return dT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===PE)return 11;if(n===IE)return 14}return 2}function ml(n,e){var t=n.alternate;return t===null?(t=Xs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Pv(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")dT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case _d:return vu(t.children,i,r,e);case RE:o=8,i|=8;break;case aC:return n=Xs(12,t,e,i|2),n.elementType=aC,n.lanes=r,n;case lC:return n=Xs(13,t,e,i),n.elementType=lC,n.lanes=r,n;case cC:return n=Xs(19,t,e,i),n.elementType=cC,n.lanes=r,n;case jI:return Zw(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case BI:o=10;break e;case VI:o=9;break e;case PE:o=11;break e;case IE:o=14;break e;case ia:o=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=Xs(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function vu(n,e,t,s){return n=Xs(7,n,s,e),n.lanes=t,n}function Zw(n,e,t,s){return n=Xs(22,n,s,e),n.elementType=jI,n.lanes=t,n.stateNode={isHidden:!1},n}function b_(n,e,t){return n=Xs(6,n,null,e),n.lanes=t,n}function E_(n,e,t){return e=Xs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KV(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r_(0),this.expirationTimes=r_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r_(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hT(n,e,t,s,i,r,o,a,l){return n=new KV(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Xs(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},YE(r),n}function YV(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xd,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function MM(n){if(!n)return _l;n=n._reactInternals;e:{if(zu(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(as(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(as(t))return MN(n,t,e)}return e}function DM(n,e,t,s,i,r,o,a,l){return n=hT(t,s,!0,n,i,r,o,a,l),n.context=MM(null),t=n.current,s=jn(),i=pl(t),r=ko(s,i),r.callback=e??null,hl(t,r,i),n.current.lanes=i,oy(n,i,s),ls(n,s),n}function ex(n,e,t,s){var i=e.current,r=jn(),o=pl(i);return t=MM(t),e.context===null?e.context=t:e.pendingContext=t,e=ko(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=hl(i,e,o),n!==null&&(Fi(n,i,o,r),bv(n,i,o)),o}function j0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function J1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function fT(n,e){J1(n,e),(n=n.alternate)&&J1(n,e)}function JV(){return null}var LM=typeof reportError=="function"?reportError:function(n){console.error(n)};function pT(n){this._internalRoot=n}tx.prototype.render=pT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));ex(n,e,null,null)};tx.prototype.unmount=pT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Tu(function(){ex(null,n,null,null)}),e[Do]=null}};function tx(n){this._internalRoot=n}tx.prototype.unstable_scheduleHydration=function(n){if(n){var e=hN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ca.length&&e!==0&&e<ca[t].priority;t++);ca.splice(t,0,n),t===0&&pN(n)}};function mT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function X1(){}function XV(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var c=j0(o);r.call(c)}}var o=DM(e,s,n,0,null,!1,!1,"",X1);return n._reactRootContainer=o,n[Do]=o.current,lm(n.nodeType===8?n.parentNode:n),Tu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var c=j0(l);a.call(c)}}var l=hT(n,0,!1,null,null,!1,!1,"",X1);return n._reactRootContainer=l,n[Do]=l.current,lm(n.nodeType===8?n.parentNode:n),Tu(function(){ex(e,l,t,s)}),l}function sx(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=j0(o);a.call(l)}}ex(e,o,n,i)}else o=XV(t,e,n,i,s);return j0(o)}uN=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=dp(e.pendingLanes);t!==0&&(DE(e,t|1),ls(e,Rt()),!(Be&6)&&(wf=Rt()+500,Nl()))}break;case 13:Tu(function(){var s=Lo(n,1);if(s!==null){var i=jn();Fi(s,n,1,i)}}),fT(n,1)}};LE=function(n){if(n.tag===13){var e=Lo(n,134217728);if(e!==null){var t=jn();Fi(e,n,134217728,t)}fT(n,134217728)}};dN=function(n){if(n.tag===13){var e=pl(n),t=Lo(n,e);if(t!==null){var s=jn();Fi(t,n,e,s)}fT(n,e)}};hN=function(){return Ke};fN=function(n,e){var t=Ke;try{return Ke=n,e()}finally{Ke=t}};wC=function(n,e,t){switch(e){case"input":if(hC(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Ww(s);if(!i)throw Error(W(90));HI(s),hC(s,i)}}}break;case"textarea":qI(n,t);break;case"select":e=t.value,e!=null&&Fd(n,!!t.multiple,e,!1)}};ZI=lT;eN=Tu;var QV={usingClientEntryPoint:!1,Events:[ly,Ed,Ww,XI,QI,lT]},tp={findFiberByHostInstance:Xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZV={bundleType:tp.bundleType,version:tp.version,rendererPackageName:tp.rendererPackageName,rendererConfig:tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sN(n),n===null?null:n.stateNode},findFiberByHostInstance:tp.findFiberByHostInstance||JV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ky.isDisabled&&Ky.supportsFiber)try{zw=Ky.inject(ZV),Cr=Ky}catch{}}Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QV;Ds.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mT(e))throw Error(W(200));return YV(n,e,null,t)};Ds.createRoot=function(n,e){if(!mT(n))throw Error(W(299));var t=!1,s="",i=LM;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hT(n,1,!1,null,null,t,!1,s,i),n[Do]=e.current,lm(n.nodeType===8?n.parentNode:n),new pT(e)};Ds.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=sN(e),n=n===null?null:n.stateNode,n};Ds.flushSync=function(n){return Tu(n)};Ds.hydrate=function(n,e,t){if(!nx(e))throw Error(W(200));return sx(null,n,e,!0,t)};Ds.hydrateRoot=function(n,e,t){if(!mT(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=LM;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=DM(e,null,n,1,t??null,i,!1,r,o),n[Do]=e.current,lm(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new tx(e)};Ds.render=function(n,e,t){if(!nx(e))throw Error(W(200));return sx(null,n,e,!1,t)};Ds.unmountComponentAtNode=function(n){if(!nx(n))throw Error(W(40));return n._reactRootContainer?(Tu(function(){sx(null,null,n,!1,function(){n._reactRootContainer=null,n[Do]=null})}),!0):!1};Ds.unstable_batchedUpdates=lT;Ds.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!nx(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return sx(n,e,t,!1,s)};Ds.version="18.3.1-next-f1338f8080-20240426";function FM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FM)}catch(n){console.error(n)}}FM(),FI.exports=Ds;var Hu=FI.exports;const OM=SI(Hu);var Q1=Hu;rC.createRoot=Q1.createRoot,rC.hydrateRoot=Q1.hydrateRoot;const ej=1,tj=1e6;let T_=0;function nj(){return T_=(T_+1)%Number.MAX_SAFE_INTEGER,T_.toString()}const A_=new Map,Z1=n=>{if(A_.has(n))return;const e=setTimeout(()=>{A_.delete(n),Kp({type:"REMOVE_TOAST",toastId:n})},tj);A_.set(n,e)},sj=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,ej)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Z1(t):n.toasts.forEach(s=>{Z1(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Iv=[];let Nv={toasts:[]};function Kp(n){Nv=sj(Nv,n),Iv.forEach(e=>{e(Nv)})}function ij({...n}){const e=nj(),t=i=>Kp({type:"UPDATE_TOAST",toast:{...i,id:e}}),s=()=>Kp({type:"DISMISS_TOAST",toastId:e});return Kp({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||s()}}}),{id:e,dismiss:s,update:t}}function Ho(){const[n,e]=b.useState(Nv);return b.useEffect(()=>(Iv.push(e),()=>{const t=Iv.indexOf(e);t>-1&&Iv.splice(t,1)}),[n]),{...n,toast:ij,dismiss:t=>Kp({type:"DISMISS_TOAST",toastId:t})}}function oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ek(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function UM(...n){return e=>{let t=!1;const s=n.map(i=>{const r=ek(i,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():ek(n[i],null)}}}}function Pe(...n){return b.useCallback(UM(...n),n)}function rj(n,e){const t=b.createContext(e),s=r=>{const{children:o,...a}=r,l=b.useMemo(()=>a,Object.values(a));return y.jsx(t.Provider,{value:l,children:o})};s.displayName=n+"Provider";function i(r){const o=b.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[s,i]}function Fs(n,e=[]){let t=[];function s(r,o){const a=b.createContext(o),l=t.length;t=[...t,o];const c=p=>{var x;const{scope:m,children:g,...w}=p,v=((x=m==null?void 0:m[n])==null?void 0:x[l])||a,_=b.useMemo(()=>w,Object.values(w));return y.jsx(v.Provider,{value:_,children:g})};c.displayName=r+"Provider";function u(p,m){var v;const g=((v=m==null?void 0:m[n])==null?void 0:v[l])||a,w=b.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${r}\``)}return[c,u]}const i=()=>{const r=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return b.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[s,oj(i,...e)]}function oj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const o=s.reduce((a,{useScope:l,scopeName:c})=>{const p=l(r)[`__scope${c}`];return{...a,...p}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function xf(n){const e=lj(n),t=b.forwardRef((s,i)=>{const{children:r,...o}=s,a=b.Children.toArray(r),l=a.find(uj);if(l){const c=l.props.children,u=a.map(p=>p===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:p);return y.jsx(e,{...o,ref:i,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return y.jsx(e,{...o,ref:i,children:r})});return t.displayName=`${n}.Slot`,t}var aj=xf("Slot");function lj(n){const e=b.forwardRef((t,s)=>{const{children:i,...r}=t;if(b.isValidElement(i)){const o=hj(i),a=dj(r,i.props);return i.type!==b.Fragment&&(a.ref=s?UM(s,o):o),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var $M=Symbol("radix.slottable");function cj(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=$M,e}function uj(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===$M}function dj(n,e){const t={...e};for(const s in e){const i=n[s],r=e[s];/^on[A-Z]/.test(s)?i&&r?t[s]=(...a)=>{const l=r(...a);return i(...a),l}:i&&(t[s]=i):s==="style"?t[s]={...i,...r}:s==="className"&&(t[s]=[i,r].filter(Boolean).join(" "))}return{...n,...t}}function hj(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ix(n){const e=n+"CollectionProvider",[t,s]=Fs(e),[i,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:x}=v,S=Y.useRef(null),C=Y.useRef(new Map).current;return y.jsx(i,{scope:_,itemMap:C,collectionRef:S,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=xf(a),c=Y.forwardRef((v,_)=>{const{scope:x,children:S}=v,C=r(a,x),T=Pe(_,C.collectionRef);return y.jsx(l,{ref:T,children:S})});c.displayName=a;const u=n+"CollectionItemSlot",p="data-radix-collection-item",m=xf(u),g=Y.forwardRef((v,_)=>{const{scope:x,children:S,...C}=v,T=Y.useRef(null),k=Pe(_,T),P=r(u,x);return Y.useEffect(()=>(P.itemMap.set(T,{ref:T,...C}),()=>void P.itemMap.delete(T))),y.jsx(m,{[p]:"",ref:k,children:S})});g.displayName=u;function w(v){const _=r(n+"CollectionConsumer",v);return Y.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(_.itemMap.values()).sort((P,I)=>C.indexOf(P.ref.current)-C.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,s]}var fj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=fj.reduce((n,e)=>{const t=xf(`Primitive.${e}`),s=b.forwardRef((i,r)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...a,ref:r})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function BM(n,e){n&&Hu.flushSync(()=>n.dispatchEvent(e))}function ii(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function pj(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n);b.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var mj="DismissableLayer",QC="dismissableLayer.update",gj="dismissableLayer.pointerDownOutside",yj="dismissableLayer.focusOutside",tk,VM=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uy=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=n,c=b.useContext(VM),[u,p]=b.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),w=Pe(e,I=>p(I)),v=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_),S=u?v.indexOf(u):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,T=S>=x,k=wj(I=>{const N=I.target,D=[...c.branches].some(M=>M.contains(N));!T||D||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},m),P=xj(I=>{const N=I.target;[...c.branches].some(M=>M.contains(N))||(r==null||r(I),o==null||o(I),I.defaultPrevented||a==null||a())},m);return pj(I=>{S===c.layers.size-1&&(s==null||s(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},m),b.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tk=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),nk(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=tk)}},[u,m,t,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),nk())},[u,c]),b.useEffect(()=>{const I=()=>g({});return document.addEventListener(QC,I),()=>document.removeEventListener(QC,I)},[]),y.jsx(fe.div,{...l,ref:w,style:{pointerEvents:C?T?"auto":"none":void 0,...n.style},onFocusCapture:oe(n.onFocusCapture,P.onFocusCapture),onBlurCapture:oe(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:oe(n.onPointerDownCapture,k.onPointerDownCapture)})});uy.displayName=mj;var vj="DismissableLayerBranch",jM=b.forwardRef((n,e)=>{const t=b.useContext(VM),s=b.useRef(null),i=Pe(e,s);return b.useEffect(()=>{const r=s.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),y.jsx(fe.div,{...n,ref:i})});jM.displayName=vj;function wj(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n),s=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const r=a=>{if(a.target&&!s.current){let l=function(){zM(gj,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function xj(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n),s=b.useRef(!1);return b.useEffect(()=>{const i=r=>{r.target&&!s.current&&zM(yj,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function nk(){const n=new CustomEvent(QC);document.dispatchEvent(n)}function zM(n,e,t,{discrete:s}){const i=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?BM(i,r):i.dispatchEvent(r)}var _j=uy,Cj=jM,gn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},Sj="Portal",rx=b.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[i,r]=b.useState(!1);gn(()=>r(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?OM.createPortal(y.jsx(fe.div,{...s,ref:e}),o):null});rx.displayName=Sj;function bj(n,e){return b.useReducer((t,s)=>e[t][s]??t,n)}var Go=n=>{const{present:e,children:t}=n,s=Ej(e),i=typeof t=="function"?t({present:s.isPresent}):b.Children.only(t),r=Pe(s.ref,Tj(i));return typeof t=="function"||s.isPresent?b.cloneElement(i,{ref:r}):null};Go.displayName="Presence";function Ej(n){const[e,t]=b.useState(),s=b.useRef(null),i=b.useRef(n),r=b.useRef("none"),o=n?"mounted":"unmounted",[a,l]=bj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Yy(s.current);r.current=a==="mounted"?c:"none"},[a]),gn(()=>{const c=s.current,u=i.current;if(u!==n){const m=r.current,g=Yy(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),gn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,p=g=>{const v=Yy(s.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=g=>{g.target===e&&(r.current=Yy(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{s.current=c?getComputedStyle(c):null,t(c)},[])}}function Yy(n){return(n==null?void 0:n.animationName)||"none"}function Tj(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Aj=DI[" useInsertionEffect ".trim().toString()]||gn;function Oo({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,r,o]=kj({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=b.useRef(n!==void 0);b.useEffect(()=>{const p=u.current;p!==a&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,s])}const c=b.useCallback(u=>{var p;if(a){const m=Rj(u)?u(n):u;m!==n&&((p=o.current)==null||p.call(o,m))}else r(u)},[a,n,r,o]);return[l,c]}function kj({defaultProp:n,onChange:e}){const[t,s]=b.useState(n),i=b.useRef(t),r=b.useRef(e);return Aj(()=>{r.current=e},[e]),b.useEffect(()=>{var o;i.current!==t&&((o=r.current)==null||o.call(r,t),i.current=t)},[t,i]),[t,s,r]}function Rj(n){return typeof n=="function"}var HM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Pj="VisuallyHidden",ox=b.forwardRef((n,e)=>y.jsx(fe.span,{...n,ref:e,style:{...HM,...n.style}}));ox.displayName=Pj;var Ij=ox,gT="ToastProvider",[yT,Nj,Mj]=ix("Toast"),[GM,are]=Fs("Toast",[Mj]),[Dj,ax]=GM(gT),qM=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:r=50,children:o}=n,[a,l]=b.useState(null),[c,u]=b.useState(0),p=b.useRef(!1),m=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${gT}\`. Expected non-empty \`string\`.`),y.jsx(yT.Provider,{scope:e,children:y.jsx(Dj,{scope:e,label:t,duration:s,swipeDirection:i,swipeThreshold:r,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(g=>g+1),[]),onToastRemove:b.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:o})})};qM.displayName=gT;var WM="ToastViewport",Lj=["F8"],ZC="toast.viewportPause",eS="toast.viewportResume",KM=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=Lj,label:i="Notifications ({hotkey})",...r}=n,o=ax(WM,t),a=Nj(t),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),p=b.useRef(null),m=Pe(e,p,o.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;b.useEffect(()=>{const _=x=>{var C;s.length!==0&&s.every(T=>x[T]||x.code===T)&&((C=p.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[s]),b.useEffect(()=>{const _=l.current,x=p.current;if(w&&_&&x){const S=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(ZC);x.dispatchEvent(P),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(eS);x.dispatchEvent(P),o.isClosePausedRef.current=!1}},T=P=>{!_.contains(P.relatedTarget)&&C()},k=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",S),_.addEventListener("focusout",T),_.addEventListener("pointermove",S),_.addEventListener("pointerleave",k),window.addEventListener("blur",S),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",S),_.removeEventListener("focusout",T),_.removeEventListener("pointermove",S),_.removeEventListener("pointerleave",k),window.removeEventListener("blur",S),window.removeEventListener("focus",C)}}},[w,o.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:_})=>{const S=a().map(C=>{const T=C.ref.current,k=[T,...Kj(T)];return _==="forwards"?k:k.reverse()});return(_==="forwards"?S.reverse():S).flat()},[a]);return b.useEffect(()=>{const _=p.current;if(_){const x=S=>{var k,P,I;const C=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!C){const N=document.activeElement,D=S.shiftKey;if(S.target===_&&D){(k=c.current)==null||k.focus();return}const V=v({tabbingDirection:D?"backwards":"forwards"}),G=V.findIndex(B=>B===N);k_(V.slice(G+1))?S.preventDefault():D?(P=c.current)==null||P.focus():(I=u.current)==null||I.focus()}};return _.addEventListener("keydown",x),()=>_.removeEventListener("keydown",x)}},[a,v]),y.jsxs(Cj,{ref:l,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&y.jsx(tS,{ref:c,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});k_(_)}}),y.jsx(yT.Slot,{scope:t,children:y.jsx(fe.ol,{tabIndex:-1,...r,ref:m})}),w&&y.jsx(tS,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});k_(_)}})]})});KM.displayName=WM;var YM="ToastFocusProxy",tS=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...i}=n,r=ax(YM,t);return y.jsx(ox,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=r.viewport)!=null&&c.contains(a))&&s()}})});tS.displayName=YM;var dy="Toast",Fj="toast.swipeStart",Oj="toast.swipeMove",Uj="toast.swipeCancel",$j="toast.swipeEnd",JM=b.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:i,onOpenChange:r,...o}=n,[a,l]=Oo({prop:s,defaultProp:i??!0,onChange:r,caller:dy});return y.jsx(Go,{present:t||a,children:y.jsx(jj,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ii(n.onPause),onResume:ii(n.onResume),onSwipeStart:oe(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(n.onSwipeMove,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:oe(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(n.onSwipeEnd,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});JM.displayName=dy;var[Bj,Vj]=GM(dy,{onClose(){}}),jj=b.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:i,open:r,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:g,...w}=n,v=ax(dy,t),[_,x]=b.useState(null),S=Pe(e,B=>x(B)),C=b.useRef(null),T=b.useRef(null),k=i||v.duration,P=b.useRef(0),I=b.useRef(k),N=b.useRef(0),{onToastAdd:D,onToastRemove:M}=v,L=ii(()=>{var j;(_==null?void 0:_.contains(document.activeElement))&&((j=v.viewport)==null||j.focus()),o()}),V=b.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),P.current=new Date().getTime(),N.current=window.setTimeout(L,B))},[L]);b.useEffect(()=>{const B=v.viewport;if(B){const j=()=>{V(I.current),c==null||c()},F=()=>{const $=new Date().getTime()-P.current;I.current=I.current-$,window.clearTimeout(N.current),l==null||l()};return B.addEventListener(ZC,F),B.addEventListener(eS,j),()=>{B.removeEventListener(ZC,F),B.removeEventListener(eS,j)}}},[v.viewport,k,l,c,V]),b.useEffect(()=>{r&&!v.isClosePausedRef.current&&V(k)},[r,k,v.isClosePausedRef,V]),b.useEffect(()=>(D(),()=>M()),[D,M]);const G=b.useMemo(()=>_?sD(_):null,[_]);return v.viewport?y.jsxs(y.Fragment,{children:[G&&y.jsx(zj,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),y.jsx(Bj,{scope:t,onClose:L,children:Hu.createPortal(y.jsx(yT.ItemSlot,{scope:t,children:y.jsx(_j,{asChild:!0,onEscapeKeyDown:oe(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||L(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:S,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:oe(n.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:oe(n.onPointerDown,B=>{B.button===0&&(C.current={x:B.clientX,y:B.clientY})}),onPointerMove:oe(n.onPointerMove,B=>{if(!C.current)return;const j=B.clientX-C.current.x,F=B.clientY-C.current.y,$=!!T.current,O=["left","right"].includes(v.swipeDirection),U=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,q=O?U(0,j):0,le=O?0:U(0,F),J=B.pointerType==="touch"?10:2,se={x:q,y:le},me={originalEvent:B,delta:se};$?(T.current=se,Jy(Oj,p,me,{discrete:!1})):sk(se,v.swipeDirection,J)?(T.current=se,Jy(Fj,u,me,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(j)>J||Math.abs(F)>J)&&(C.current=null)}),onPointerUp:oe(n.onPointerUp,B=>{const j=T.current,F=B.target;if(F.hasPointerCapture(B.pointerId)&&F.releasePointerCapture(B.pointerId),T.current=null,C.current=null,j){const $=B.currentTarget,O={originalEvent:B,delta:j};sk(j,v.swipeDirection,v.swipeThreshold)?Jy($j,g,O,{discrete:!0}):Jy(Uj,m,O,{discrete:!0}),$.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),zj=n=>{const{__scopeToast:e,children:t,...s}=n,i=ax(dy,e),[r,o]=b.useState(!1),[a,l]=b.useState(!1);return qj(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:y.jsx(rx,{asChild:!0,children:y.jsx(ox,{...s,children:r&&y.jsxs(y.Fragment,{children:[i.label," ",t]})})})},Hj="ToastTitle",XM=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return y.jsx(fe.div,{...s,ref:e})});XM.displayName=Hj;var Gj="ToastDescription",QM=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return y.jsx(fe.div,{...s,ref:e})});QM.displayName=Gj;var ZM="ToastAction",eD=b.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?y.jsx(nD,{altText:t,asChild:!0,children:y.jsx(vT,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ZM}\`. Expected non-empty \`string\`.`),null)});eD.displayName=ZM;var tD="ToastClose",vT=b.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,i=Vj(tD,t);return y.jsx(nD,{asChild:!0,children:y.jsx(fe.button,{type:"button",...s,ref:e,onClick:oe(n.onClick,i.onClose)})})});vT.displayName=tD;var nD=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...i}=n;return y.jsx(fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function sD(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Wj(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",r=s.dataset.radixToastAnnounceExclude==="";if(!i)if(r){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...sD(s))}}),e}function Jy(n,e,t,{discrete:s}){const i=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?BM(i,r):i.dispatchEvent(r)}var sk=(n,e,t=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),r=s>i;return e==="left"||e==="right"?r&&s>t:!r&&i>t};function qj(n=()=>{}){const e=ii(n);gn(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function Wj(n){return n.nodeType===n.ELEMENT_NODE}function Kj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function k_(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Yj=qM,iD=KM,rD=JM,oD=XM,aD=QM,lD=eD,cD=vT;function uD(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=uD(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Jj(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=uD(n))&&(s&&(s+=" "),s+=e);return s}const ik=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,rk=Jj,wT=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return rk(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:r}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],p=r==null?void 0:r[c];if(u===null)return null;const m=ik(u)||ik(p);return i[c][m]}),a=t&&Object.entries(t).reduce((c,u)=>{let[p,m]=u;return m===void 0||(c[p]=m),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:p,className:m,...g}=u;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...r,...a}[v]):{...r,...a}[v]===_})?[...c,p,m]:c},[]);return rk(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dD=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...Qj,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:dD("lucide",i),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(n,e)=>{const t=b.forwardRef(({className:s,...i},r)=>b.createElement(Zj,{ref:r,iconNode:e,className:dD(`lucide-${Xj(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=St("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=St("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=St("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=St("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=St("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=St("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=St("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=St("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=St("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=St("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=St("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=St("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=St("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=St("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=St("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=St("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=St("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=St("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Te(...n){return n.filter(Boolean).join(" ")}const f3=Yj,mD=b.forwardRef(({className:n,...e},t)=>y.jsx(iD,{ref:t,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));mD.displayName=iD.displayName;const p3=wT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gD=b.forwardRef(({className:n,variant:e,...t},s)=>y.jsx(rD,{ref:s,className:Te(p3({variant:e}),n),...t}));gD.displayName=rD.displayName;const m3=b.forwardRef(({className:n,...e},t)=>y.jsx(lD,{ref:t,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));m3.displayName=lD.displayName;const yD=b.forwardRef(({className:n,...e},t)=>y.jsx(cD,{ref:t,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(lx,{className:"h-4 w-4"})}));yD.displayName=cD.displayName;const vD=b.forwardRef(({className:n,...e},t)=>y.jsx(oD,{ref:t,className:Te("text-sm font-semibold",n),...e}));vD.displayName=oD.displayName;const wD=b.forwardRef(({className:n,...e},t)=>y.jsx(aD,{ref:t,className:Te("text-sm opacity-90",n),...e}));wD.displayName=aD.displayName;function g3(){const{toasts:n}=Ho();return y.jsxs(f3,{children:[n.map(function({id:e,title:t,description:s,action:i,...r}){return y.jsxs(gD,{...r,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(vD,{children:t}),s&&y.jsx(wD,{children:s})]}),i,y.jsx(yD,{})]},e)}),y.jsx(mD,{})]})}var y3=(n,e,t,s,i,r,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(g){(Array.isArray(n)?n:[n]).forEach(w=>{let v=w==="class",_=v&&r?i.map(x=>r[x]||x):i;v?(l.classList.remove(..._),l.classList.add(r&&r[g]?r[g]:g)):l.setAttribute(w,g)}),p(g)}function p(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)u(s);else try{let g=localStorage.getItem(e)||t,w=o&&g==="system"?m():g;u(w)}catch{}},v3=b.createContext(void 0),w3={setTheme:n=>{},themes:[]},x3=()=>{var n;return(n=b.useContext(v3))!=null?n:w3};b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:i,defaultTheme:r,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([t,e,r,n,a,o,s,i]).slice(1,-1);return b.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${y3.toString()})(${u})`}})});var _3=n=>{switch(n){case"success":return b3;case"info":return T3;case"warning":return E3;case"error":return A3;default:return null}},C3=Array(12).fill(0),S3=({visible:n,className:e})=>Y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Y.createElement("div",{className:"sonner-spinner"},C3.map((t,s)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),b3=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),E3=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),T3=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),A3=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),k3=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),R3=()=>{let[n,e]=Y.useState(document.hidden);return Y.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},nS=1,P3=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...s}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:nS++,r=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),r?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...s,dismissible:o,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=n instanceof Promise?n:n(),i=t!==void 0,r,o=s.then(async l=>{if(r=["resolve",l],Y.isValidElement(l))i=!1,this.create({id:t,type:"default",message:l});else if(N3(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:u})}}).catch(async l=>{if(r=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:u})}}).finally(()=>{var l;i&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>r[0]==="reject"?c(r[1]):l(r[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||nS++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ts=new P3,I3=(n,e)=>{let t=(e==null?void 0:e.id)||nS++;return ts.addToast({title:n,...e,id:t}),t},N3=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",M3=I3,D3=()=>ts.toasts,L3=()=>ts.getActiveToasts();Object.assign(M3,{success:ts.success,info:ts.info,warning:ts.warning,error:ts.error,custom:ts.custom,message:ts.message,promise:ts.promise,dismiss:ts.dismiss,loading:ts.loading},{getHistory:D3,getToasts:L3});function F3(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}F3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xy(n){return n.label!==void 0}var O3=3,U3="32px",$3="16px",ck=4e3,B3=356,V3=14,j3=20,z3=200;function di(...n){return n.filter(Boolean).join(" ")}function H3(n){let[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var G3=n=>{var e,t,s,i,r,o,a,l,c,u,p;let{invert:m,toast:g,unstyled:w,interacting:v,setHeights:_,visibleToasts:x,heights:S,index:C,toasts:T,expanded:k,removeToast:P,defaultRichColors:I,closeButton:N,style:D,cancelButtonStyle:M,actionButtonStyle:L,className:V="",descriptionClassName:G="",duration:B,position:j,gap:F,loadingIcon:$,expandByDefault:O,classNames:U,icons:q,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:J}=n,[se,me]=Y.useState(null),[Ne,$e]=Y.useState(null),[z,ke]=Y.useState(!1),[tt,Me]=Y.useState(!1),[ee,he]=Y.useState(!1),[Le,gt]=Y.useState(!1),[Nr,Yo]=Y.useState(!1),[Ol,qf]=Y.useState(0),[Ju,OA]=Y.useState(0),Wf=Y.useRef(g.duration||B||ck),UA=Y.useRef(null),Ul=Y.useRef(null),gB=C===0,yB=C+1<=x,Os=g.type,Xu=g.dismissible!==!1,vB=g.className||"",wB=g.descriptionClassName||"",Iy=Y.useMemo(()=>S.findIndex(_e=>_e.toastId===g.id)||0,[S,g.id]),xB=Y.useMemo(()=>{var _e;return(_e=g.closeButton)!=null?_e:N},[g.closeButton,N]),$A=Y.useMemo(()=>g.duration||B||ck,[g.duration,B]),Xx=Y.useRef(0),Qu=Y.useRef(0),BA=Y.useRef(0),Zu=Y.useRef(null),[_B,CB]=j.split("-"),VA=Y.useMemo(()=>S.reduce((_e,Je,ct)=>ct>=Iy?_e:_e+Je.height,0),[S,Iy]),jA=R3(),SB=g.invert||m,Qx=Os==="loading";Qu.current=Y.useMemo(()=>Iy*F+VA,[Iy,VA]),Y.useEffect(()=>{Wf.current=$A},[$A]),Y.useEffect(()=>{ke(!0)},[]),Y.useEffect(()=>{let _e=Ul.current;if(_e){let Je=_e.getBoundingClientRect().height;return OA(Je),_(ct=>[{toastId:g.id,height:Je,position:g.position},...ct]),()=>_(ct=>ct.filter(ai=>ai.toastId!==g.id))}},[_,g.id]),Y.useLayoutEffect(()=>{if(!z)return;let _e=Ul.current,Je=_e.style.height;_e.style.height="auto";let ct=_e.getBoundingClientRect().height;_e.style.height=Je,OA(ct),_(ai=>ai.find(li=>li.toastId===g.id)?ai.map(li=>li.toastId===g.id?{...li,height:ct}:li):[{toastId:g.id,height:ct,position:g.position},...ai])},[z,g.title,g.description,_,g.id]);let Jo=Y.useCallback(()=>{Me(!0),qf(Qu.current),_(_e=>_e.filter(Je=>Je.toastId!==g.id)),setTimeout(()=>{P(g)},z3)},[g,P,_,Qu]);Y.useEffect(()=>{if(g.promise&&Os==="loading"||g.duration===1/0||g.type==="loading")return;let _e;return k||v||J&&jA?(()=>{if(BA.current<Xx.current){let Je=new Date().getTime()-Xx.current;Wf.current=Wf.current-Je}BA.current=new Date().getTime()})():Wf.current!==1/0&&(Xx.current=new Date().getTime(),_e=setTimeout(()=>{var Je;(Je=g.onAutoClose)==null||Je.call(g,g),Jo()},Wf.current)),()=>clearTimeout(_e)},[k,v,g,Os,J,jA,Jo]),Y.useEffect(()=>{g.delete&&Jo()},[Jo,g.delete]);function bB(){var _e,Je,ct;return q!=null&&q.loading?Y.createElement("div",{className:di(U==null?void 0:U.loader,(_e=g==null?void 0:g.classNames)==null?void 0:_e.loader,"sonner-loader"),"data-visible":Os==="loading"},q.loading):$?Y.createElement("div",{className:di(U==null?void 0:U.loader,(Je=g==null?void 0:g.classNames)==null?void 0:Je.loader,"sonner-loader"),"data-visible":Os==="loading"},$):Y.createElement(S3,{className:di(U==null?void 0:U.loader,(ct=g==null?void 0:g.classNames)==null?void 0:ct.loader),visible:Os==="loading"})}return Y.createElement("li",{tabIndex:0,ref:Ul,className:di(V,vB,U==null?void 0:U.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[Os],(t=g==null?void 0:g.classNames)==null?void 0:t[Os]),"data-sonner-toast":"","data-rich-colors":(s=g.richColors)!=null?s:I,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":z,"data-promise":!!g.promise,"data-swiped":Nr,"data-removed":tt,"data-visible":yB,"data-y-position":_B,"data-x-position":CB,"data-index":C,"data-front":gB,"data-swiping":ee,"data-dismissible":Xu,"data-type":Os,"data-invert":SB,"data-swipe-out":Le,"data-swipe-direction":Ne,"data-expanded":!!(k||O&&z),style:{"--index":C,"--toasts-before":C,"--z-index":T.length-C,"--offset":`${tt?Ol:Qu.current}px`,"--initial-height":O?"auto":`${Ju}px`,...D,...g.style},onDragEnd:()=>{he(!1),me(null),Zu.current=null},onPointerDown:_e=>{Qx||!Xu||(UA.current=new Date,qf(Qu.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(he(!0),Zu.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,Je,ct,ai;if(Le||!Xu)return;Zu.current=null;let li=Number(((_e=Ul.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xo=Number(((Je=Ul.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$l=new Date().getTime()-((ct=UA.current)==null?void 0:ct.getTime()),ci=se==="x"?li:Xo,Qo=Math.abs(ci)/$l;if(Math.abs(ci)>=j3||Qo>.11){qf(Qu.current),(ai=g.onDismiss)==null||ai.call(g,g),$e(se==="x"?li>0?"right":"left":Xo>0?"down":"up"),Jo(),gt(!0),Yo(!1);return}he(!1),me(null)},onPointerMove:_e=>{var Je,ct,ai,li;if(!Zu.current||!Xu||((Je=window.getSelection())==null?void 0:Je.toString().length)>0)return;let Xo=_e.clientY-Zu.current.y,$l=_e.clientX-Zu.current.x,ci=(ct=n.swipeDirections)!=null?ct:H3(j);!se&&(Math.abs($l)>1||Math.abs(Xo)>1)&&me(Math.abs($l)>Math.abs(Xo)?"x":"y");let Qo={x:0,y:0};se==="y"?(ci.includes("top")||ci.includes("bottom"))&&(ci.includes("top")&&Xo<0||ci.includes("bottom")&&Xo>0)&&(Qo.y=Xo):se==="x"&&(ci.includes("left")||ci.includes("right"))&&(ci.includes("left")&&$l<0||ci.includes("right")&&$l>0)&&(Qo.x=$l),(Math.abs(Qo.x)>0||Math.abs(Qo.y)>0)&&Yo(!0),(ai=Ul.current)==null||ai.style.setProperty("--swipe-amount-x",`${Qo.x}px`),(li=Ul.current)==null||li.style.setProperty("--swipe-amount-y",`${Qo.y}px`)}},xB&&!g.jsx?Y.createElement("button",{"aria-label":le,"data-disabled":Qx,"data-close-button":!0,onClick:Qx||!Xu?()=>{}:()=>{var _e;Jo(),(_e=g.onDismiss)==null||_e.call(g,g)},className:di(U==null?void 0:U.closeButton,(i=g==null?void 0:g.classNames)==null?void 0:i.closeButton)},(r=q==null?void 0:q.close)!=null?r:k3):null,g.jsx||b.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:Y.createElement(Y.Fragment,null,Os||g.icon||g.promise?Y.createElement("div",{"data-icon":"",className:di(U==null?void 0:U.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||bB():null,g.type!=="loading"?g.icon||(q==null?void 0:q[Os])||_3(Os):null):null,Y.createElement("div",{"data-content":"",className:di(U==null?void 0:U.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},Y.createElement("div",{"data-title":"",className:di(U==null?void 0:U.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?Y.createElement("div",{"data-description":"",className:di(G,wB,U==null?void 0:U.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),b.isValidElement(g.cancel)?g.cancel:g.cancel&&Xy(g.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||M,onClick:_e=>{var Je,ct;Xy(g.cancel)&&Xu&&((ct=(Je=g.cancel).onClick)==null||ct.call(Je,_e),Jo())},className:di(U==null?void 0:U.cancelButton,(u=g==null?void 0:g.classNames)==null?void 0:u.cancelButton)},g.cancel.label):null,b.isValidElement(g.action)?g.action:g.action&&Xy(g.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||L,onClick:_e=>{var Je,ct;Xy(g.action)&&((ct=(Je=g.action).onClick)==null||ct.call(Je,_e),!_e.defaultPrevented&&Jo())},className:di(U==null?void 0:U.actionButton,(p=g==null?void 0:g.classNames)==null?void 0:p.actionButton)},g.action.label):null))};function uk(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function q3(n,e){let t={};return[n,e].forEach((s,i)=>{let r=i===1,o=r?"--mobile-offset":"--offset",a=r?$3:U3;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof s=="number"||typeof s=="string"?l(s):typeof s=="object"?["top","right","bottom","left"].forEach(c=>{s[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof s[c]=="number"?`${s[c]}px`:s[c]}):l(a)}),t}var W3=b.forwardRef(function(n,e){let{invert:t,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:r,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:p,duration:m,style:g,visibleToasts:w=O3,toastOptions:v,dir:_=uk(),gap:x=V3,loadingIcon:S,icons:C,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:k}=n,[P,I]=Y.useState([]),N=Y.useMemo(()=>Array.from(new Set([s].concat(P.filter(J=>J.position).map(J=>J.position)))),[P,s]),[D,M]=Y.useState([]),[L,V]=Y.useState(!1),[G,B]=Y.useState(!1),[j,F]=Y.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=Y.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=Y.useRef(null),q=Y.useRef(!1),le=Y.useCallback(J=>{I(se=>{var me;return(me=se.find(Ne=>Ne.id===J.id))!=null&&me.delete||ts.dismiss(J.id),se.filter(({id:Ne})=>Ne!==J.id)})},[]);return Y.useEffect(()=>ts.subscribe(J=>{if(J.dismiss){I(se=>se.map(me=>me.id===J.id?{...me,delete:!0}:me));return}setTimeout(()=>{OM.flushSync(()=>{I(se=>{let me=se.findIndex(Ne=>Ne.id===J.id);return me!==-1?[...se.slice(0,me),{...se[me],...J},...se.slice(me+1)]:[J,...se]})})})}),[]),Y.useEffect(()=>{if(u!=="system"){F(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{F(se?"dark":"light")})}catch{J.addListener(({matches:me})=>{try{F(me?"dark":"light")}catch(Ne){console.error(Ne)}})}},[u]),Y.useEffect(()=>{P.length<=1&&V(!1)},[P]),Y.useEffect(()=>{let J=se=>{var me,Ne;i.every($e=>se[$e]||se.code===$e)&&(V(!0),(me=$.current)==null||me.focus()),se.code==="Escape"&&(document.activeElement===$.current||(Ne=$.current)!=null&&Ne.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),Y.useEffect(()=>{if($.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,q.current=!1)}},[$.current]),Y.createElement("section",{ref:e,"aria-label":`${T} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((J,se)=>{var me;let[Ne,$e]=J.split("-");return P.length?Y.createElement("ol",{key:J,dir:_==="auto"?uk():_,tabIndex:-1,ref:$,className:a,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":Ne,"data-lifted":L&&P.length>1&&!r,"data-x-position":$e,style:{"--front-toast-height":`${((me=D[0])==null?void 0:me.height)||0}px`,"--width":`${B3}px`,"--gap":`${x}px`,...g,...q3(l,c)},onBlur:z=>{q.current&&!z.currentTarget.contains(z.relatedTarget)&&(q.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||q.current||(q.current=!0,U.current=z.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{G||V(!1)},onDragEnd:()=>V(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},P.filter(z=>!z.position&&se===0||z.position===J).map((z,ke)=>{var tt,Me;return Y.createElement(G3,{key:z.id,icons:C,index:ke,toast:z,defaultRichColors:p,duration:(tt=v==null?void 0:v.duration)!=null?tt:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:w,closeButton:(Me=v==null?void 0:v.closeButton)!=null?Me:o,interacting:G,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:le,toasts:P.filter(ee=>ee.position==z.position),heights:D.filter(ee=>ee.position==z.position),setHeights:M,expandByDefault:r,gap:x,loadingIcon:S,expanded:L,pauseWhenPageIsHidden:k,swipeDirections:n.swipeDirections})})):null}))});const K3=({...n})=>{const{theme:e="system"}=x3();return y.jsx(W3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var Y3=DI[" useId ".trim().toString()]||(()=>{}),J3=0;function gl(n){const[e,t]=b.useState(Y3());return gn(()=>{t(s=>s??String(J3++))},[n]),e?`radix-${e}`:""}const X3=["top","right","bottom","left"],Cl=Math.min,As=Math.max,H0=Math.round,Qy=Math.floor,br=n=>({x:n,y:n}),Q3={left:"right",right:"left",bottom:"top",top:"bottom"},Z3={start:"end",end:"start"};function sS(n,e,t){return As(n,Cl(e,t))}function Uo(n,e){return typeof n=="function"?n(e):n}function $o(n){return n.split("-")[0]}function Nf(n){return n.split("-")[1]}function xT(n){return n==="x"?"y":"x"}function _T(n){return n==="y"?"height":"width"}function wr(n){return["top","bottom"].includes($o(n))?"y":"x"}function CT(n){return xT(wr(n))}function e5(n,e,t){t===void 0&&(t=!1);const s=Nf(n),i=CT(n),r=_T(i);let o=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=G0(o)),[o,G0(o)]}function t5(n){const e=G0(n);return[iS(n),e,iS(e)]}function iS(n){return n.replace(/start|end/g,e=>Z3[e])}function n5(n,e,t){const s=["left","right"],i=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:s:e?s:i;case"left":case"right":return e?r:o;default:return[]}}function s5(n,e,t,s){const i=Nf(n);let r=n5($o(n),t==="start",s);return i&&(r=r.map(o=>o+"-"+i),e&&(r=r.concat(r.map(iS)))),r}function G0(n){return n.replace(/left|right|bottom|top/g,e=>Q3[e])}function i5(n){return{top:0,right:0,bottom:0,left:0,...n}}function xD(n){return typeof n!="number"?i5(n):{top:n,right:n,bottom:n,left:n}}function q0(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function dk(n,e,t){let{reference:s,floating:i}=n;const r=wr(e),o=CT(e),a=_T(o),l=$o(e),c=r==="y",u=s.x+s.width/2-i.width/2,p=s.y+s.height/2-i.height/2,m=s[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:s.y-i.height};break;case"bottom":g={x:u,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:p};break;case"left":g={x:s.x-i.width,y:p};break;default:g={x:s.x,y:s.y}}switch(Nf(e)){case"start":g[o]-=m*(t&&c?-1:1);break;case"end":g[o]+=m*(t&&c?-1:1);break}return g}const r5=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:p}=dk(c,s,l),m=s,g={},w=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:S,y:C,data:T,reset:k}=await x({x:u,y:p,initialPlacement:s,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=S??u,p=C??p,g={...g,[_]:{...g[_],...T}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):k.rects),{x:u,y:p}=dk(c,m,l)),v=-1)}return{x:u,y:p,placement:m,strategy:i,middlewareData:g}};async function ym(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:r,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=Uo(e,n),w=xD(g),_=a[m?p==="floating"?"reference":"floating":p],x=q0(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(_)))==null||t?_:_.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=p==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),T=await(r.isElement==null?void 0:r.isElement(C))?await(r.getScale==null?void 0:r.getScale(C))||{x:1,y:1}:{x:1,y:1},k=q0(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:C,strategy:l}):S);return{top:(x.top-k.top+w.top)/T.y,bottom:(k.bottom-x.bottom+w.bottom)/T.y,left:(x.left-k.left+w.left)/T.x,right:(k.right-x.right+w.right)/T.x}}const o5=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Uo(n,e)||{};if(c==null)return{};const p=xD(u),m={x:t,y:s},g=CT(i),w=_T(g),v=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",C=_?"clientHeight":"clientWidth",T=r.reference[w]+r.reference[g]-m[g]-r.floating[w],k=m[g]-r.reference[g],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=P?P[C]:0;(!I||!await(o.isElement==null?void 0:o.isElement(P)))&&(I=a.floating[C]||r.floating[w]);const N=T/2-k/2,D=I/2-v[w]/2-1,M=Cl(p[x],D),L=Cl(p[S],D),V=M,G=I-v[w]-L,B=I/2-v[w]/2+N,j=sS(V,B,G),F=!l.arrow&&Nf(i)!=null&&B!==j&&r.reference[w]/2-(B<V?M:L)-v[w]/2<0,$=F?B<V?B-V:B-G:0;return{[g]:m[g]+$,data:{[g]:j,centerOffset:B-j-$,...F&&{alignmentOffset:$}},reset:F}}}),a5=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=Uo(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const x=$o(i),S=wr(a),C=$o(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=m||(C||!v?[G0(a)]:t5(a)),P=w!=="none";!m&&P&&k.push(...s5(a,v,w,T));const I=[a,...k],N=await ym(e,_),D=[];let M=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&D.push(N[x]),p){const B=e5(i,o,T);D.push(N[B[0]],N[B[1]])}if(M=[...M,{placement:i,overflows:D}],!D.every(B=>B<=0)){var L,V;const B=(((L=r.flip)==null?void 0:L.index)||0)+1,j=I[B];if(j&&(!(p==="alignment"?S!==wr(j):!1)||M.every(O=>O.overflows[0]>0&&wr(O.placement)===S)))return{data:{index:B,overflows:M},reset:{placement:j}};let F=(V=M.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:V.placement;if(!F)switch(g){case"bestFit":{var G;const $=(G=M.filter(O=>{if(P){const U=wr(O.placement);return U===S||U==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(U=>U>0).reduce((U,q)=>U+q,0)]).sort((O,U)=>O[1]-U[1])[0])==null?void 0:G[0];$&&(F=$);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function hk(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function fk(n){return X3.some(e=>n[e]>=0)}const l5=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=Uo(n,e);switch(s){case"referenceHidden":{const r=await ym(e,{...i,elementContext:"reference"}),o=hk(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fk(o)}}}case"escaped":{const r=await ym(e,{...i,altBoundary:!0}),o=hk(r,t.floating);return{data:{escapedOffsets:o,escaped:fk(o)}}}default:return{}}}}};async function c5(n,e){const{placement:t,platform:s,elements:i}=n,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=$o(t),a=Nf(t),l=wr(t)==="y",c=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,p=Uo(e,n);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const u5=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:r,placement:o,middlewareData:a}=e,l=await c5(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:o}}}}},d5=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...l}=Uo(n,e),c={x:t,y:s},u=await ym(e,l),p=wr($o(i)),m=xT(p);let g=c[m],w=c[p];if(r){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+u[_],C=g-u[x];g=sS(S,g,C)}if(o){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=w+u[_],C=w-u[x];w=sS(S,w,C)}const v=a.fn({...e,[m]:g,[p]:w});return{...v,data:{x:v.x-t,y:v.y-s,enabled:{[m]:r,[p]:o}}}}}},h5=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Uo(n,e),u={x:t,y:s},p=wr(i),m=xT(p);let g=u[m],w=u[p];const v=Uo(a,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=m==="y"?"height":"width",T=r.reference[m]-r.floating[C]+_.mainAxis,k=r.reference[m]+r.reference[C]-_.mainAxis;g<T?g=T:g>k&&(g=k)}if(c){var x,S;const C=m==="y"?"width":"height",T=["top","left"].includes($o(i)),k=r.reference[p]-r.floating[C]+(T&&((x=o.offset)==null?void 0:x[p])||0)+(T?0:_.crossAxis),P=r.reference[p]+r.reference[C]+(T?0:((S=o.offset)==null?void 0:S[p])||0)-(T?_.crossAxis:0);w<k?w=k:w>P&&(w=P)}return{[m]:g,[p]:w}}}},f5=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Uo(n,e),u=await ym(e,c),p=$o(i),m=Nf(i),g=wr(i)==="y",{width:w,height:v}=r.floating;let _,x;p==="top"||p==="bottom"?(_=p,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=p,_=m==="end"?"top":"bottom");const S=v-u.top-u.bottom,C=w-u.left-u.right,T=Cl(v-u[_],S),k=Cl(w-u[x],C),P=!e.middlewareData.shift;let I=T,N=k;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=C),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(I=S),P&&!m){const M=As(u.left,0),L=As(u.right,0),V=As(u.top,0),G=As(u.bottom,0);g?N=w-2*(M!==0||L!==0?M+L:As(u.left,u.right)):I=v-2*(V!==0||G!==0?V+G:As(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:I});const D=await o.getDimensions(a.floating);return w!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function cx(){return typeof window<"u"}function Mf(n){return _D(n)?(n.nodeName||"").toLowerCase():"#document"}function Is(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ir(n){var e;return(e=(_D(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function _D(n){return cx()?n instanceof Node||n instanceof Is(n).Node:!1}function Ui(n){return cx()?n instanceof Element||n instanceof Is(n).Element:!1}function Ar(n){return cx()?n instanceof HTMLElement||n instanceof Is(n).HTMLElement:!1}function pk(n){return!cx()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Is(n).ShadowRoot}function hy(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=$i(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(i)}function p5(n){return["table","td","th"].includes(Mf(n))}function ux(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function ST(n){const e=bT(),t=Ui(n)?$i(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function m5(n){let e=Sl(n);for(;Ar(e)&&!_f(e);){if(ST(e))return e;if(ux(e))return null;e=Sl(e)}return null}function bT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _f(n){return["html","body","#document"].includes(Mf(n))}function $i(n){return Is(n).getComputedStyle(n)}function dx(n){return Ui(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Sl(n){if(Mf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||pk(n)&&n.host||Ir(n);return pk(e)?e.host:e}function CD(n){const e=Sl(n);return _f(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ar(e)&&hy(e)?e:CD(e)}function vm(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=CD(n),r=i===((s=n.ownerDocument)==null?void 0:s.body),o=Is(i);if(r){const a=rS(o);return e.concat(o,o.visualViewport||[],hy(i)?i:[],a&&t?vm(a):[])}return e.concat(i,vm(i,[],t))}function rS(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function SD(n){const e=$i(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=Ar(n),r=i?n.offsetWidth:t,o=i?n.offsetHeight:s,a=H0(t)!==r||H0(s)!==o;return a&&(t=r,s=o),{width:t,height:s,$:a}}function ET(n){return Ui(n)?n:n.contextElement}function jd(n){const e=ET(n);if(!Ar(e))return br(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:r}=SD(e);let o=(r?H0(t.width):t.width)/s,a=(r?H0(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const g5=br(0);function bD(n){const e=Is(n);return!bT()||!e.visualViewport?g5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function y5(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Is(n)?!1:e}function ku(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),r=ET(n);let o=br(1);e&&(s?Ui(s)&&(o=jd(s)):o=jd(n));const a=y5(r,t,s)?bD(r):br(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,p=i.height/o.y;if(r){const m=Is(r),g=s&&Ui(s)?Is(s):s;let w=m,v=rS(w);for(;v&&s&&g!==w;){const _=jd(v),x=v.getBoundingClientRect(),S=$i(v),C=x.left+(v.clientLeft+parseFloat(S.paddingLeft))*_.x,T=x.top+(v.clientTop+parseFloat(S.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,p*=_.y,l+=C,c+=T,w=Is(v),v=rS(w)}}return q0({width:u,height:p,x:l,y:c})}function TT(n,e){const t=dx(n).scrollLeft;return e?e.left+t:ku(Ir(n)).left+t}function ED(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=s.left+e.scrollLeft-(t?0:TT(n,s)),r=s.top+e.scrollTop;return{x:i,y:r}}function v5(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const r=i==="fixed",o=Ir(s),a=e?ux(e.floating):!1;if(s===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=br(1);const u=br(0),p=Ar(s);if((p||!p&&!r)&&((Mf(s)!=="body"||hy(o))&&(l=dx(s)),Ar(s))){const g=ku(s);c=jd(s),u.x=g.x+s.clientLeft,u.y=g.y+s.clientTop}const m=o&&!p&&!r?ED(o,l,!0):br(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:t.y*c.y-l.scrollTop*c.y+u.y+m.y}}function w5(n){return Array.from(n.getClientRects())}function x5(n){const e=Ir(n),t=dx(n),s=n.ownerDocument.body,i=As(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=As(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+TT(n);const a=-t.scrollTop;return $i(s).direction==="rtl"&&(o+=As(e.clientWidth,s.clientWidth)-i),{width:i,height:r,x:o,y:a}}function _5(n,e){const t=Is(n),s=Ir(n),i=t.visualViewport;let r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;const c=bT();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a,y:l}}function C5(n,e){const t=ku(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,r=Ar(n)?jd(n):br(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,l=i*r.x,c=s*r.y;return{width:o,height:a,x:l,y:c}}function mk(n,e,t){let s;if(e==="viewport")s=_5(n,t);else if(e==="document")s=x5(Ir(n));else if(Ui(e))s=C5(e,t);else{const i=bD(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return q0(s)}function TD(n,e){const t=Sl(n);return t===e||!Ui(t)||_f(t)?!1:$i(t).position==="fixed"||TD(t,e)}function S5(n,e){const t=e.get(n);if(t)return t;let s=vm(n,[],!1).filter(a=>Ui(a)&&Mf(a)!=="body"),i=null;const r=$i(n).position==="fixed";let o=r?Sl(n):n;for(;Ui(o)&&!_f(o);){const a=$i(o),l=ST(o);!l&&a.position==="fixed"&&(i=null),(r?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||hy(o)&&!l&&TD(n,o))?s=s.filter(u=>u!==o):i=a,o=Sl(o)}return e.set(n,s),s}function b5(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const o=[...t==="clippingAncestors"?ux(e)?[]:S5(e,this._c):[].concat(t),s],a=o[0],l=o.reduce((c,u)=>{const p=mk(e,u,i);return c.top=As(p.top,c.top),c.right=Cl(p.right,c.right),c.bottom=Cl(p.bottom,c.bottom),c.left=As(p.left,c.left),c},mk(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function E5(n){const{width:e,height:t}=SD(n);return{width:e,height:t}}function T5(n,e,t){const s=Ar(e),i=Ir(e),r=t==="fixed",o=ku(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=br(0);function c(){l.x=TT(i)}if(s||!s&&!r)if((Mf(e)!=="body"||hy(i))&&(a=dx(e)),s){const g=ku(e,!0,r,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();r&&!s&&i&&c();const u=i&&!s&&!r?ED(i,a):br(0),p=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:p,y:m,width:o.width,height:o.height}}function P_(n){return $i(n).position==="static"}function gk(n,e){if(!Ar(n)||$i(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ir(n)===t&&(t=t.ownerDocument.body),t}function AD(n,e){const t=Is(n);if(ux(n))return t;if(!Ar(n)){let i=Sl(n);for(;i&&!_f(i);){if(Ui(i)&&!P_(i))return i;i=Sl(i)}return t}let s=gk(n,e);for(;s&&p5(s)&&P_(s);)s=gk(s,e);return s&&_f(s)&&P_(s)&&!ST(s)?t:s||m5(n)||t}const A5=async function(n){const e=this.getOffsetParent||AD,t=this.getDimensions,s=await t(n.floating);return{reference:T5(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function k5(n){return $i(n).direction==="rtl"}const R5={convertOffsetParentRelativeRectToViewportRelativeRect:v5,getDocumentElement:Ir,getClippingRect:b5,getOffsetParent:AD,getElementRects:A5,getClientRects:w5,getDimensions:E5,getScale:jd,isElement:Ui,isRTL:k5};function kD(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function P5(n,e){let t=null,s;const i=Ir(n);function r(){var a;clearTimeout(s),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=n.getBoundingClientRect(),{left:u,top:p,width:m,height:g}=c;if(a||e(),!m||!g)return;const w=Qy(p),v=Qy(i.clientWidth-(u+m)),_=Qy(i.clientHeight-(p+g)),x=Qy(u),C={rootMargin:-w+"px "+-v+"px "+-_+"px "+-x+"px",threshold:As(0,Cl(1,l))||1};let T=!0;function k(P){const I=P[0].intersectionRatio;if(I!==l){if(!T)return o();I?o(!1,I):s=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!kD(c,n.getBoundingClientRect())&&o(),T=!1}try{t=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{t=new IntersectionObserver(k,C)}t.observe(n)}return o(!0),r}function I5(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=ET(n),u=i||r?[...c?vm(c):[],...vm(e)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",t,{passive:!0}),r&&x.addEventListener("resize",t)});const p=c&&a?P5(c,t):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let w,v=l?ku(n):null;l&&_();function _(){const x=ku(n);v&&!kD(v,x)&&t(),v=x,w=requestAnimationFrame(_)}return t(),()=>{var x;u.forEach(S=>{i&&S.removeEventListener("scroll",t),r&&S.removeEventListener("resize",t)}),p==null||p(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(w)}}const N5=u5,M5=d5,D5=a5,L5=f5,F5=l5,yk=o5,O5=h5,U5=(n,e,t)=>{const s=new Map,i={platform:R5,...t},r={...i.platform,_c:s};return r5(n,e,{...i,platform:r})};var $5=typeof document<"u",B5=function(){},Mv=$5?b.useLayoutEffect:B5;function W0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!W0(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const r=i[s];if(!(r==="_owner"&&n.$$typeof)&&!W0(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function RD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function vk(n,e){const t=RD(n);return Math.round(e*t)/t}function I_(n){const e=b.useRef(n);return Mv(()=>{e.current=n}),e}function V5(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,p]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=b.useState(s);W0(m,s)||g(s);const[w,v]=b.useState(null),[_,x]=b.useState(null),S=b.useCallback(O=>{O!==P.current&&(P.current=O,v(O))},[]),C=b.useCallback(O=>{O!==I.current&&(I.current=O,x(O))},[]),T=r||w,k=o||_,P=b.useRef(null),I=b.useRef(null),N=b.useRef(u),D=l!=null,M=I_(l),L=I_(i),V=I_(c),G=b.useCallback(()=>{if(!P.current||!I.current)return;const O={placement:e,strategy:t,middleware:m};L.current&&(O.platform=L.current),U5(P.current,I.current,O).then(U=>{const q={...U,isPositioned:V.current!==!1};B.current&&!W0(N.current,q)&&(N.current=q,Hu.flushSync(()=>{p(q)}))})},[m,e,t,L,V]);Mv(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[c]);const B=b.useRef(!1);Mv(()=>(B.current=!0,()=>{B.current=!1}),[]),Mv(()=>{if(T&&(P.current=T),k&&(I.current=k),T&&k){if(M.current)return M.current(T,k,G);G()}},[T,k,G,M,D]);const j=b.useMemo(()=>({reference:P,floating:I,setReference:S,setFloating:C}),[S,C]),F=b.useMemo(()=>({reference:T,floating:k}),[T,k]),$=b.useMemo(()=>{const O={position:t,left:0,top:0};if(!F.floating)return O;const U=vk(F.floating,u.x),q=vk(F.floating,u.y);return a?{...O,transform:"translate("+U+"px, "+q+"px)",...RD(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:q}},[t,a,F.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:G,refs:j,elements:F,floatingStyles:$}),[u,G,j,F,$])}const j5=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?yk({element:s.current,padding:i}).fn(t):{}:s?yk({element:s,padding:i}).fn(t):{}}}},z5=(n,e)=>({...N5(n),options:[n,e]}),H5=(n,e)=>({...M5(n),options:[n,e]}),G5=(n,e)=>({...O5(n),options:[n,e]}),q5=(n,e)=>({...D5(n),options:[n,e]}),W5=(n,e)=>({...L5(n),options:[n,e]}),K5=(n,e)=>({...F5(n),options:[n,e]}),Y5=(n,e)=>({...j5(n),options:[n,e]});var J5="Arrow",PD=b.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...r}=n;return y.jsx(fe.svg,{...r,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});PD.displayName=J5;var X5=PD;function hx(n){const[e,t]=b.useState(void 0);return gn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var AT="Popper",[ID,fx]=Fs(AT),[Q5,ND]=ID(AT),MD=n=>{const{__scopePopper:e,children:t}=n,[s,i]=b.useState(null);return y.jsx(Q5,{scope:e,anchor:s,onAnchorChange:i,children:t})};MD.displayName=AT;var DD="PopperAnchor",LD=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,r=ND(DD,t),o=b.useRef(null),a=Pe(e,o);return b.useEffect(()=>{r.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:y.jsx(fe.div,{...i,ref:a})});LD.displayName=DD;var kT="PopperContent",[Z5,ez]=ID(kT),FD=b.forwardRef((n,e)=>{var z,ke,tt,Me,ee,he;const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=n,_=ND(kT,t),[x,S]=b.useState(null),C=Pe(e,Le=>S(Le)),[T,k]=b.useState(null),P=hx(T),I=(P==null?void 0:P.width)??0,N=(P==null?void 0:P.height)??0,D=s+(r!=="center"?"-"+r:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],V=L.length>0,G={padding:M,boundary:L.filter(nz),altBoundary:V},{refs:B,floatingStyles:j,placement:F,isPositioned:$,middlewareData:O}=V5({strategy:"fixed",placement:D,whileElementsMounted:(...Le)=>I5(...Le,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[z5({mainAxis:i+N,alignmentAxis:o}),l&&H5({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?G5():void 0,...G}),l&&q5({...G}),W5({...G,apply:({elements:Le,rects:gt,availableWidth:Nr,availableHeight:Yo})=>{const{width:Ol,height:qf}=gt.reference,Ju=Le.floating.style;Ju.setProperty("--radix-popper-available-width",`${Nr}px`),Ju.setProperty("--radix-popper-available-height",`${Yo}px`),Ju.setProperty("--radix-popper-anchor-width",`${Ol}px`),Ju.setProperty("--radix-popper-anchor-height",`${qf}px`)}}),T&&Y5({element:T,padding:a}),sz({arrowWidth:I,arrowHeight:N}),m&&K5({strategy:"referenceHidden",...G})]}),[U,q]=$D(F),le=ii(w);gn(()=>{$&&(le==null||le())},[$,le]);const J=(z=O.arrow)==null?void 0:z.x,se=(ke=O.arrow)==null?void 0:ke.y,me=((tt=O.arrow)==null?void 0:tt.centerOffset)!==0,[Ne,$e]=b.useState();return gn(()=>{x&&$e(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:$?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(Me=O.transformOrigin)==null?void 0:Me.x,(ee=O.transformOrigin)==null?void 0:ee.y].join(" "),...((he=O.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(Z5,{scope:t,placedSide:U,onArrowChange:k,arrowX:J,arrowY:se,shouldHideArrow:me,children:y.jsx(fe.div,{"data-side":U,"data-align":q,...v,ref:C,style:{...v.style,animation:$?void 0:"none"}})})})});FD.displayName=kT;var OD="PopperArrow",tz={top:"bottom",right:"left",bottom:"top",left:"right"},UD=b.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,r=ez(OD,s),o=tz[r.placedSide];return y.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:y.jsx(X5,{...i,ref:t,style:{...i.style,display:"block"}})})});UD.displayName=OD;function nz(n){return n!==null}var sz=n=>({name:"transformOrigin",options:n,fn(e){var _,x,S;const{placement:t,rects:s,middlewareData:i}=e,o=((_=i.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=$D(t),p={start:"0%",center:"50%",end:"100%"}[u],m=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,g=(((S=i.arrow)==null?void 0:S.y)??0)+l/2;let w="",v="";return c==="bottom"?(w=o?p:`${m}px`,v=`${-l}px`):c==="top"?(w=o?p:`${m}px`,v=`${s.floating.height+l}px`):c==="right"?(w=`${-l}px`,v=o?p:`${g}px`):c==="left"&&(w=`${s.floating.width+l}px`,v=o?p:`${g}px`),{data:{x:w,y:v}}}});function $D(n){const[e,t="center"]=n.split("-");return[e,t]}var iz=MD,BD=LD,VD=FD,jD=UD,[px,lre]=Fs("Tooltip",[fx]),RT=fx(),zD="TooltipProvider",rz=700,wk="tooltip.open",[oz,HD]=px(zD),GD=n=>{const{__scopeTooltip:e,delayDuration:t=rz,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:r}=n,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),y.jsx(oz,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:r})};GD.displayName=zD;var qD="Tooltip",[cre,mx]=px(qD),oS="TooltipTrigger",az=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=mx(oS,t),r=HD(oS,t),o=RT(t),a=b.useRef(null),l=Pe(e,a,i.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),p=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),y.jsx(BD,{asChild:!0,...o,children:y.jsx(fe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:l,onPointerMove:oe(n.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:oe(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:oe(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:oe(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:oe(n.onBlur,i.onClose),onClick:oe(n.onClick,i.onClose)})})});az.displayName=oS;var lz="TooltipPortal",[ure,cz]=px(lz,{forceMount:void 0}),Cf="TooltipContent",WD=b.forwardRef((n,e)=>{const t=cz(Cf,n.__scopeTooltip),{forceMount:s=t.forceMount,side:i="top",...r}=n,o=mx(Cf,n.__scopeTooltip);return y.jsx(Go,{present:s||o.open,children:o.disableHoverableContent?y.jsx(KD,{side:i,...r,ref:e}):y.jsx(uz,{side:i,...r,ref:e})})}),uz=b.forwardRef((n,e)=>{const t=mx(Cf,n.__scopeTooltip),s=HD(Cf,n.__scopeTooltip),i=b.useRef(null),r=Pe(e,i),[o,a]=b.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:p}=s,m=b.useCallback(()=>{a(null),p(!1)},[p]),g=b.useCallback((w,v)=>{const _=w.currentTarget,x={x:w.clientX,y:w.clientY},S=mz(x,_.getBoundingClientRect()),C=gz(x,S),T=yz(v.getBoundingClientRect()),k=wz([...C,...T]);a(k),p(!0)},[p]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(l&&u){const w=_=>g(_,u),v=_=>g(_,l);return l.addEventListener("pointerleave",w),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),b.useEffect(()=>{if(o){const w=v=>{const _=v.target,x={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),C=!vz(x,o);S?m():C&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,u,o,c,m]),y.jsx(KD,{...n,ref:r})}),[dz,hz]=px(qD,{isInside:!1}),fz=cj("TooltipContent"),KD=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":i,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=n,l=mx(Cf,t),c=RT(t),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener(wk,u),()=>document.removeEventListener(wk,u)),[u]),b.useEffect(()=>{if(l.trigger){const p=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[l.trigger,u]),y.jsx(uy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:y.jsxs(VD,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(fz,{children:s}),y.jsx(dz,{scope:t,isInside:!0,children:y.jsx(Ij,{id:l.contentId,role:"tooltip",children:i||s})})]})})});WD.displayName=Cf;var YD="TooltipArrow",pz=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=RT(t);return hz(YD,t).isInside?null:y.jsx(jD,{...i,...s,ref:e})});pz.displayName=YD;function mz(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,s,i,r)){case r:return"left";case i:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function gz(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function yz(n){const{top:e,right:t,bottom:s,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:s},{x:i,y:s}]}function vz(n,e){const{x:t,y:s}=n;let i=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],l=e[o],c=a.x,u=a.y,p=l.x,m=l.y;u>s!=m>s&&t<(p-c)*(s-u)/(m-u)+c&&(i=!i)}return i}function wz(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),xz(e)}function xz(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const i=n[s];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const i=n[s];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var _z=GD,JD=WD;const Cz=_z,Sz=b.forwardRef(({className:n,sideOffset:e=4,...t},s)=>y.jsx(JD,{ref:s,sideOffset:e,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));Sz.displayName=JD.displayName;var Df=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ru=typeof window>"u"||"Deno"in globalThis;function $n(){}function bz(n,e){return typeof n=="function"?n(e):n}function aS(n){return typeof n=="number"&&n>=0&&n!==1/0}function XD(n,e){return Math.max(n+(e||0)-Date.now(),0)}function yl(n,e){return typeof n=="function"?n(e):n}function Mi(n,e){return typeof n=="function"?n(e):n}function xk(n,e){const{type:t="all",exact:s,fetchStatus:i,predicate:r,queryKey:o,stale:a}=n;if(o){if(s){if(e.queryHash!==PT(o,e.options))return!1}else if(!wm(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||r&&!r(e))}function _k(n,e){const{exact:t,status:s,predicate:i,mutationKey:r}=n;if(r){if(!e.options.mutationKey)return!1;if(t){if(Pu(e.options.mutationKey)!==Pu(r))return!1}else if(!wm(e.options.mutationKey,r))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function PT(n,e){return((e==null?void 0:e.queryKeyHashFn)||Pu)(n)}function Pu(n){return JSON.stringify(n,(e,t)=>lS(t)?Object.keys(t).sort().reduce((s,i)=>(s[i]=t[i],s),{}):t)}function wm(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>wm(n[t],e[t])):!1}function QD(n,e){if(n===e)return n;const t=Ck(n)&&Ck(e);if(t||lS(n)&&lS(e)){const s=t?n:Object.keys(n),i=s.length,r=t?e:Object.keys(e),o=r.length,a=t?[]:{},l=new Set(s);let c=0;for(let u=0;u<o;u++){const p=t?u:r[u];(!t&&l.has(p)||t)&&n[p]===void 0&&e[p]===void 0?(a[p]=void 0,c++):(a[p]=QD(n[p],e[p]),a[p]===n[p]&&n[p]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function K0(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Ck(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function lS(n){if(!Sk(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Sk(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Sk(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ez(n){return new Promise(e=>{setTimeout(e,n)})}function cS(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?QD(n,e):e}function Tz(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function Az(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var IT=Symbol();function ZD(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===IT?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function eL(n,e){return typeof n=="function"?n(...e):!!n}var ec,fa,Yd,hI,kz=(hI=class extends Df{constructor(){super();A(this,ec);A(this,fa);A(this,Yd);E(this,Yd,e=>{if(!Ru&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,fa)||this.setEventListener(d(this,Yd))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,fa))==null||e.call(this),E(this,fa,void 0))}setEventListener(e){var t;E(this,Yd,e),(t=d(this,fa))==null||t.call(this),E(this,fa,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){d(this,ec)!==e&&(E(this,ec,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,ec)=="boolean"?d(this,ec):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ec=new WeakMap,fa=new WeakMap,Yd=new WeakMap,hI),NT=new kz,Jd,pa,Xd,fI,Rz=(fI=class extends Df{constructor(){super();A(this,Jd,!0);A(this,pa);A(this,Xd);E(this,Xd,e=>{if(!Ru&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){d(this,pa)||this.setEventListener(d(this,Xd))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,pa))==null||e.call(this),E(this,pa,void 0))}setEventListener(e){var t;E(this,Xd,e),(t=d(this,pa))==null||t.call(this),E(this,pa,e(this.setOnline.bind(this)))}setOnline(e){d(this,Jd)!==e&&(E(this,Jd,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return d(this,Jd)}},Jd=new WeakMap,pa=new WeakMap,Xd=new WeakMap,fI),Y0=new Rz;function uS(){let n,e;const t=new Promise((i,r)=>{n=i,e=r});t.status="pending",t.catch(()=>{});function s(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},t.reject=i=>{s({status:"rejected",reason:i}),e(i)},t}function Pz(n){return Math.min(1e3*2**n,3e4)}function tL(n){return(n??"online")==="online"?Y0.isOnline():!0}var nL=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function N_(n){return n instanceof nL}function sL(n){let e=!1,t=0,s=!1,i;const r=uS(),o=v=>{var _;s||(m(new nL(v)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>NT.isFocused()&&(n.networkMode==="always"||Y0.isOnline())&&n.canRun(),u=()=>tL(n.networkMode)&&n.canRun(),p=v=>{var _;s||(s=!0,(_=n.onSuccess)==null||_.call(n,v),i==null||i(),r.resolve(v))},m=v=>{var _;s||(s=!0,(_=n.onError)==null||_.call(n,v),i==null||i(),r.reject(v))},g=()=>new Promise(v=>{var _;i=x=>{(s||c())&&v(x)},(_=n.onPause)==null||_.call(n)}).then(()=>{var v;i=void 0,s||(v=n.onContinue)==null||v.call(n)}),w=()=>{if(s)return;let v;const _=t===0?n.initialPromise:void 0;try{v=_??n.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(p).catch(x=>{var P;if(s)return;const S=n.retry??(Ru?0:3),C=n.retryDelay??Pz,T=typeof C=="function"?C(t,x):C,k=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,x);if(e||!k){m(x);return}t++,(P=n.onFail)==null||P.call(n,t,x),Ez(T).then(()=>c()?void 0:g()).then(()=>{e?m(x):w()})})};return{promise:r,cancel:o,continue:()=>(i==null||i(),r),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?w():g().then(w),r)}}var Iz=n=>setTimeout(n,0);function Nz(){let n=[],e=0,t=a=>{a()},s=a=>{a()},i=Iz;const r=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{s(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{r(()=>{a(...l)})},schedule:r,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{i=a}}}var zt=Nz(),tc,pI,iL=(pI=class{constructor(){A(this,tc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),aS(this.gcTime)&&E(this,tc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ru?1/0:5*60*1e3))}clearGcTimeout(){d(this,tc)&&(clearTimeout(d(this,tc)),E(this,tc,void 0))}},tc=new WeakMap,pI),Qd,nc,$s,sc,Cn,Am,ic,gi,Mr,mI,Mz=(mI=class extends iL{constructor(e){super();A(this,gi);A(this,Qd);A(this,nc);A(this,$s);A(this,sc);A(this,Cn);A(this,Am);A(this,ic);E(this,ic,!1),E(this,Am,e.defaultOptions),this.setOptions(e.options),this.observers=[],E(this,sc,e.client),E(this,$s,d(this,sc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,E(this,Qd,Dz(this.options)),this.state=e.state??d(this,Qd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,Cn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Am),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,$s).remove(this)}setData(e,t){const s=cS(this.state.data,e,this.options);return R(this,gi,Mr).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){R(this,gi,Mr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,i;const t=(s=d(this,Cn))==null?void 0:s.promise;return(i=d(this,Cn))==null||i.cancel(e),t?t.then($n).catch($n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Qd))}isActive(){return this.observers.some(e=>Mi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===IT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!XD(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Cn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Cn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,$s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,Cn)&&(d(this,ic)?d(this,Cn).cancel({revert:!0}):d(this,Cn).cancelRetry()),this.scheduleGc()),d(this,$s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||R(this,gi,Mr).call(this,{type:"invalidate"})}fetch(e,t){var c,u,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,Cn))return d(this,Cn).continueRetry(),d(this,Cn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(E(this,ic,!0),s.signal)})},r=()=>{const m=ZD(this.options,t),w=(()=>{const v={client:d(this,sc),queryKey:this.queryKey,meta:this.meta};return i(v),v})();return E(this,ic,!1),this.options.persister?this.options.persister(m,w,this):m(w)},a=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,sc),state:this.state,fetchFn:r};return i(m),m})();(c=this.options.behavior)==null||c.onFetch(a,this),E(this,nc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&R(this,gi,Mr).call(this,{type:"fetch",meta:(p=a.fetchOptions)==null?void 0:p.meta});const l=m=>{var g,w,v,_;N_(m)&&m.silent||R(this,gi,Mr).call(this,{type:"error",error:m}),N_(m)||((w=(g=d(this,$s).config).onError)==null||w.call(g,m,this),(_=(v=d(this,$s).config).onSettled)==null||_.call(v,this.state.data,m,this)),this.scheduleGc()};return E(this,Cn,sL({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,w,v,_;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(w=(g=d(this,$s).config).onSuccess)==null||w.call(g,m,this),(_=(v=d(this,$s).config).onSettled)==null||_.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,g)=>{R(this,gi,Mr).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{R(this,gi,Mr).call(this,{type:"pause"})},onContinue:()=>{R(this,gi,Mr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,Cn).start()}},Qd=new WeakMap,nc=new WeakMap,$s=new WeakMap,sc=new WeakMap,Cn=new WeakMap,Am=new WeakMap,ic=new WeakMap,gi=new WeakSet,Mr=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...rL(s.data,this.options),fetchMeta:e.meta??null};case"success":return E(this,nc,void 0),{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return N_(i)&&i.revert&&d(this,nc)?{...d(this,nc),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),zt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),d(this,$s).notify({query:this,type:"updated",action:e})})},mI);function rL(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tL(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Dz(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ji,gI,Lz=(gI=class extends Df{constructor(e={}){super();A(this,Ji);this.config=e,E(this,Ji,new Map)}build(e,t,s){const i=t.queryKey,r=t.queryHash??PT(i,t);let o=this.get(r);return o||(o=new Mz({client:e,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){d(this,Ji).has(e.queryHash)||(d(this,Ji).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,Ji).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,Ji).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,Ji).get(e)}getAll(){return[...d(this,Ji).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>xk(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>xk(e,s)):t}notify(e){zt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ji=new WeakMap,gI),Xi,In,rc,Qi,ea,yI,Fz=(yI=class extends iL{constructor(e){super();A(this,Qi);A(this,Xi);A(this,In);A(this,rc);this.mutationId=e.mutationId,E(this,In,e.mutationCache),E(this,Xi,[]),this.state=e.state||oL(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,Xi).includes(e)||(d(this,Xi).push(e),this.clearGcTimeout(),d(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){E(this,Xi,d(this,Xi).filter(t=>t!==e)),this.scheduleGc(),d(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,Xi).length||(this.state.status==="pending"?this.scheduleGc():d(this,In).remove(this))}continue(){var e;return((e=d(this,rc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,o,a,l,c,u,p,m,g,w,v,_,x,S,C,T,k,P,I,N;const t=()=>{R(this,Qi,ea).call(this,{type:"continue"})};E(this,rc,sL({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,M)=>{R(this,Qi,ea).call(this,{type:"failed",failureCount:D,error:M})},onPause:()=>{R(this,Qi,ea).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,In).canRun(this)}));const s=this.state.status==="pending",i=!d(this,rc).canStart();try{if(s)t();else{R(this,Qi,ea).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(r=d(this,In).config).onMutate)==null?void 0:o.call(r,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&R(this,Qi,ea).call(this,{type:"pending",context:M,variables:e,isPaused:i})}const D=await d(this,rc).start();return await((u=(c=d(this,In).config).onSuccess)==null?void 0:u.call(c,D,e,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,D,e,this.state.context)),await((w=(g=d(this,In).config).onSettled)==null?void 0:w.call(g,D,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,D,null,e,this.state.context)),R(this,Qi,ea).call(this,{type:"success",data:D}),D}catch(D){try{throw await((S=(x=d(this,In).config).onError)==null?void 0:S.call(x,D,e,this.state.context,this)),await((T=(C=this.options).onError)==null?void 0:T.call(C,D,e,this.state.context)),await((P=(k=d(this,In).config).onSettled)==null?void 0:P.call(k,void 0,D,this.state.variables,this.state.context,this)),await((N=(I=this.options).onSettled)==null?void 0:N.call(I,void 0,D,e,this.state.context)),D}finally{R(this,Qi,ea).call(this,{type:"error",error:D})}}finally{d(this,In).runNext(this)}}},Xi=new WeakMap,In=new WeakMap,rc=new WeakMap,Qi=new WeakSet,ea=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),zt.batch(()=>{d(this,Xi).forEach(s=>{s.onMutationUpdate(e)}),d(this,In).notify({mutation:this,type:"updated",action:e})})},yI);function oL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hr,yi,km,vI,Oz=(vI=class extends Df{constructor(e={}){super();A(this,Hr);A(this,yi);A(this,km);this.config=e,E(this,Hr,new Set),E(this,yi,new Map),E(this,km,0)}build(e,t,s){const i=new Fz({mutationCache:this,mutationId:++qt(this,km)._,options:e.defaultMutationOptions(t),state:s});return this.add(i),i}add(e){d(this,Hr).add(e);const t=Zy(e);if(typeof t=="string"){const s=d(this,yi).get(t);s?s.push(e):d(this,yi).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,Hr).delete(e)){const t=Zy(e);if(typeof t=="string"){const s=d(this,yi).get(t);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&d(this,yi).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Zy(e);if(typeof t=="string"){const s=d(this,yi).get(t),i=s==null?void 0:s.find(r=>r.state.status==="pending");return!i||i===e}else return!0}runNext(e){var s;const t=Zy(e);if(typeof t=="string"){const i=(s=d(this,yi).get(t))==null?void 0:s.find(r=>r!==e&&r.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){zt.batch(()=>{d(this,Hr).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,Hr).clear(),d(this,yi).clear()})}getAll(){return Array.from(d(this,Hr))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>_k(t,s))}findAll(e={}){return this.getAll().filter(t=>_k(e,t))}notify(e){zt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return zt.batch(()=>Promise.all(e.map(t=>t.continue().catch($n))))}},Hr=new WeakMap,yi=new WeakMap,km=new WeakMap,vI);function Zy(n){var e;return(e=n.options.scope)==null?void 0:e.id}function bk(n){return{onFetch:(e,t)=>{var u,p,m,g,w;const s=e.options,i=(m=(p=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,r=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=ZD(e.options,e.fetchOptions),S=async(C,T,k)=>{if(v)return Promise.reject();if(T==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:T,direction:k?"backward":"forward",meta:e.options.meta};return _(L),L})(),N=await x(I),{maxPages:D}=e.options,M=k?Az:Tz;return{pages:M(C.pages,N,D),pageParams:M(C.pageParams,T,D)}};if(i&&r.length){const C=i==="backward",T=C?Uz:Ek,k={pages:r,pageParams:o},P=T(s,k);a=await S(k,P,C)}else{const C=n??r.length;do{const T=l===0?o[0]??s.initialPageParam:Ek(s,a);if(l>0&&T==null)break;a=await S(a,T),l++}while(l<C)}return a};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function Ek(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function Uz(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var bt,ma,ga,Zd,eh,ya,th,nh,wI,$z=(wI=class{constructor(n={}){A(this,bt);A(this,ma);A(this,ga);A(this,Zd);A(this,eh);A(this,ya);A(this,th);A(this,nh);E(this,bt,n.queryCache||new Lz),E(this,ma,n.mutationCache||new Oz),E(this,ga,n.defaultOptions||{}),E(this,Zd,new Map),E(this,eh,new Map),E(this,ya,0)}mount(){qt(this,ya)._++,d(this,ya)===1&&(E(this,th,NT.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,bt).onFocus())})),E(this,nh,Y0.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,bt).onOnline())})))}unmount(){var n,e;qt(this,ya)._--,d(this,ya)===0&&((n=d(this,th))==null||n.call(this),E(this,th,void 0),(e=d(this,nh))==null||e.call(this),E(this,nh,void 0))}isFetching(n){return d(this,bt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,ma).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,bt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,bt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(yl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return d(this,bt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),i=d(this,bt).get(s.queryHash),r=i==null?void 0:i.state.data,o=bz(e,r);if(o!==void 0)return d(this,bt).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return zt.batch(()=>d(this,bt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,bt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,bt);zt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,bt);return zt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=zt.batch(()=>d(this,bt).findAll(n).map(i=>i.cancel(t)));return Promise.all(s).then($n).catch($n)}invalidateQueries(n,e={}){return zt.batch(()=>(d(this,bt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=zt.batch(()=>d(this,bt).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let r=i.fetch(void 0,t);return t.throwOnError||(r=r.catch($n)),i.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(s).then($n)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,bt).build(this,e);return t.isStaleByTime(yl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then($n).catch($n)}fetchInfiniteQuery(n){return n.behavior=bk(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then($n).catch($n)}ensureInfiniteQueryData(n){return n.behavior=bk(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Y0.isOnline()?d(this,ma).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,bt)}getMutationCache(){return d(this,ma)}getDefaultOptions(){return d(this,ga)}setDefaultOptions(n){E(this,ga,n)}setQueryDefaults(n,e){d(this,Zd).set(Pu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,Zd).values()],t={};return e.forEach(s=>{wm(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){d(this,eh).set(Pu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,eh).values()],t={};return e.forEach(s=>{wm(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,ga).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=PT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===IT&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,ga).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,bt).clear(),d(this,ma).clear()}},bt=new WeakMap,ma=new WeakMap,ga=new WeakMap,Zd=new WeakMap,eh=new WeakMap,ya=new WeakMap,th=new WeakMap,nh=new WeakMap,wI),Jn,Fe,Rm,Nn,oc,sh,va,wa,Pm,ih,rh,ac,lc,xa,oh,Ge,fp,dS,hS,fS,pS,mS,gS,yS,aL,xI,Bz=(xI=class extends Df{constructor(e,t){super();A(this,Ge);A(this,Jn);A(this,Fe);A(this,Rm);A(this,Nn);A(this,oc);A(this,sh);A(this,va);A(this,wa);A(this,Pm);A(this,ih);A(this,rh);A(this,ac);A(this,lc);A(this,xa);A(this,oh,new Set);this.options=t,E(this,Jn,e),E(this,wa,null),E(this,va,uS()),this.options.experimental_prefetchInRender||d(this,va).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,Fe).addObserver(this),Tk(d(this,Fe),this.options)?R(this,Ge,fp).call(this):this.updateResult(),R(this,Ge,pS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vS(d(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vS(d(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,R(this,Ge,mS).call(this),R(this,Ge,gS).call(this),d(this,Fe).removeObserver(this)}setOptions(e){const t=this.options,s=d(this,Fe);if(this.options=d(this,Jn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Mi(this.options.enabled,d(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");R(this,Ge,yS).call(this),d(this,Fe).setOptions(this.options),t._defaulted&&!K0(this.options,t)&&d(this,Jn).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,Fe),observer:this});const i=this.hasListeners();i&&Ak(d(this,Fe),s,this.options,t)&&R(this,Ge,fp).call(this),this.updateResult(),i&&(d(this,Fe)!==s||Mi(this.options.enabled,d(this,Fe))!==Mi(t.enabled,d(this,Fe))||yl(this.options.staleTime,d(this,Fe))!==yl(t.staleTime,d(this,Fe)))&&R(this,Ge,dS).call(this);const r=R(this,Ge,hS).call(this);i&&(d(this,Fe)!==s||Mi(this.options.enabled,d(this,Fe))!==Mi(t.enabled,d(this,Fe))||r!==d(this,xa))&&R(this,Ge,fS).call(this,r)}getOptimisticResult(e){const t=d(this,Jn).getQueryCache().build(d(this,Jn),e),s=this.createResult(t,e);return jz(this,s)&&(E(this,Nn,s),E(this,sh,this.options),E(this,oc,d(this,Fe).state)),s}getCurrentResult(){return d(this,Nn)}trackResult(e,t){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(s,i))})}trackProp(e){d(this,oh).add(e)}getCurrentQuery(){return d(this,Fe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=d(this,Jn).defaultQueryOptions(e),s=d(this,Jn).getQueryCache().build(d(this,Jn),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return R(this,Ge,fp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,Nn)))}createResult(e,t){var D;const s=d(this,Fe),i=this.options,r=d(this,Nn),o=d(this,oc),a=d(this,sh),c=e!==s?e.state:d(this,Rm),{state:u}=e;let p={...u},m=!1,g;if(t._optimisticResults){const M=this.hasListeners(),L=!M&&Tk(e,t),V=M&&Ak(e,s,t,i);(L||V)&&(p={...p,...rL(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:_}=p;g=p.data;let x=!1;if(t.placeholderData!==void 0&&g===void 0&&_==="pending"){let M;r!=null&&r.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(M=r.data,x=!0):M=typeof t.placeholderData=="function"?t.placeholderData((D=d(this,rh))==null?void 0:D.state.data,d(this,rh)):t.placeholderData,M!==void 0&&(_="success",g=cS(r==null?void 0:r.data,M,t),m=!0)}if(t.select&&g!==void 0&&!x)if(r&&g===(o==null?void 0:o.data)&&t.select===d(this,Pm))g=d(this,ih);else try{E(this,Pm,t.select),g=t.select(g),g=cS(r==null?void 0:r.data,g,t),E(this,ih,g),E(this,wa,null)}catch(M){E(this,wa,M)}d(this,wa)&&(w=d(this,wa),g=d(this,ih),v=Date.now(),_="error");const S=p.fetchStatus==="fetching",C=_==="pending",T=_==="error",k=C&&S,P=g!==void 0,N={status:_,fetchStatus:p.fetchStatus,isPending:C,isSuccess:_==="success",isError:T,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:p.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>c.dataUpdateCount||p.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:T&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&P,isStale:MT(e,t),refetch:this.refetch,promise:d(this,va)};if(this.options.experimental_prefetchInRender){const M=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},L=()=>{const G=E(this,va,N.promise=uS());M(G)},V=d(this,va);switch(V.status){case"pending":e.queryHash===s.queryHash&&M(V);break;case"fulfilled":(N.status==="error"||N.data!==V.value)&&L();break;case"rejected":(N.status!=="error"||N.error!==V.reason)&&L();break}}return N}updateResult(){const e=d(this,Nn),t=this.createResult(d(this,Fe),this.options);if(E(this,oc,d(this,Fe).state),E(this,sh,this.options),d(this,oc).data!==void 0&&E(this,rh,d(this,Fe)),K0(t,e))return;E(this,Nn,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!d(this,oh).size)return!0;const o=new Set(r??d(this,oh));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,Nn)).some(a=>{const l=a;return d(this,Nn)[l]!==e[l]&&o.has(l)})};R(this,Ge,aL).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&R(this,Ge,pS).call(this)}},Jn=new WeakMap,Fe=new WeakMap,Rm=new WeakMap,Nn=new WeakMap,oc=new WeakMap,sh=new WeakMap,va=new WeakMap,wa=new WeakMap,Pm=new WeakMap,ih=new WeakMap,rh=new WeakMap,ac=new WeakMap,lc=new WeakMap,xa=new WeakMap,oh=new WeakMap,Ge=new WeakSet,fp=function(e){R(this,Ge,yS).call(this);let t=d(this,Fe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch($n)),t},dS=function(){R(this,Ge,mS).call(this);const e=yl(this.options.staleTime,d(this,Fe));if(Ru||d(this,Nn).isStale||!aS(e))return;const s=XD(d(this,Nn).dataUpdatedAt,e)+1;E(this,ac,setTimeout(()=>{d(this,Nn).isStale||this.updateResult()},s))},hS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,Fe)):this.options.refetchInterval)??!1},fS=function(e){R(this,Ge,gS).call(this),E(this,xa,e),!(Ru||Mi(this.options.enabled,d(this,Fe))===!1||!aS(d(this,xa))||d(this,xa)===0)&&E(this,lc,setInterval(()=>{(this.options.refetchIntervalInBackground||NT.isFocused())&&R(this,Ge,fp).call(this)},d(this,xa)))},pS=function(){R(this,Ge,dS).call(this),R(this,Ge,fS).call(this,R(this,Ge,hS).call(this))},mS=function(){d(this,ac)&&(clearTimeout(d(this,ac)),E(this,ac,void 0))},gS=function(){d(this,lc)&&(clearInterval(d(this,lc)),E(this,lc,void 0))},yS=function(){const e=d(this,Jn).getQueryCache().build(d(this,Jn),this.options);if(e===d(this,Fe))return;const t=d(this,Fe);E(this,Fe,e),E(this,Rm,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},aL=function(e){zt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(d(this,Nn))}),d(this,Jn).getQueryCache().notify({query:d(this,Fe),type:"observerResultsUpdated"})})},xI);function Vz(n,e){return Mi(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Tk(n,e){return Vz(n,e)||n.state.data!==void 0&&vS(n,e,e.refetchOnMount)}function vS(n,e,t){if(Mi(e.enabled,n)!==!1&&yl(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&MT(n,e)}return!1}function Ak(n,e,t,s){return(n!==e||Mi(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&MT(n,t)}function MT(n,e){return Mi(e.enabled,n)!==!1&&n.isStaleByTime(yl(e.staleTime,n))}function jz(n,e){return!K0(n.getCurrentResult(),e)}var _a,Ca,Xn,Gr,Po,Dv,wS,_I,zz=(_I=class extends Df{constructor(t,s){super();A(this,Po);A(this,_a);A(this,Ca);A(this,Xn);A(this,Gr);E(this,_a,t),this.setOptions(s),this.bindMethods(),R(this,Po,Dv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=d(this,_a).defaultMutationOptions(t),K0(this.options,s)||d(this,_a).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,Xn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Pu(s.mutationKey)!==Pu(this.options.mutationKey)?this.reset():((i=d(this,Xn))==null?void 0:i.state.status)==="pending"&&d(this,Xn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=d(this,Xn))==null||t.removeObserver(this)}onMutationUpdate(t){R(this,Po,Dv).call(this),R(this,Po,wS).call(this,t)}getCurrentResult(){return d(this,Ca)}reset(){var t;(t=d(this,Xn))==null||t.removeObserver(this),E(this,Xn,void 0),R(this,Po,Dv).call(this),R(this,Po,wS).call(this)}mutate(t,s){var i;return E(this,Gr,s),(i=d(this,Xn))==null||i.removeObserver(this),E(this,Xn,d(this,_a).getMutationCache().build(d(this,_a),this.options)),d(this,Xn).addObserver(this),d(this,Xn).execute(t)}},_a=new WeakMap,Ca=new WeakMap,Xn=new WeakMap,Gr=new WeakMap,Po=new WeakSet,Dv=function(){var s;const t=((s=d(this,Xn))==null?void 0:s.state)??oL();E(this,Ca,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},wS=function(t){zt.batch(()=>{var s,i,r,o,a,l,c,u;if(d(this,Gr)&&this.hasListeners()){const p=d(this,Ca).variables,m=d(this,Ca).context;(t==null?void 0:t.type)==="success"?((i=(s=d(this,Gr)).onSuccess)==null||i.call(s,t.data,p,m),(o=(r=d(this,Gr)).onSettled)==null||o.call(r,t.data,null,p,m)):(t==null?void 0:t.type)==="error"&&((l=(a=d(this,Gr)).onError)==null||l.call(a,t.error,p,m),(u=(c=d(this,Gr)).onSettled)==null||u.call(c,void 0,t.error,p,m))}this.listeners.forEach(p=>{p(d(this,Ca))})})},_I),lL=b.createContext(void 0),DT=n=>{const e=b.useContext(lL);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Hz=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),y.jsx(lL.Provider,{value:n,children:e})),cL=b.createContext(!1),Gz=()=>b.useContext(cL);cL.Provider;function qz(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Wz=b.createContext(qz()),Kz=()=>b.useContext(Wz),Yz=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Jz=n=>{b.useEffect(()=>{n.clearReset()},[n])},Xz=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(i&&n.data===void 0||eL(t,[n.error,s])),Qz=n=>{if(n.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},Zz=(n,e)=>n.isLoading&&n.isFetching&&!e,eH=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,kk=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function tH(n,e,t){var p,m,g,w,v;const s=Gz(),i=Kz(),r=DT(),o=r.defaultQueryOptions(n);(m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=s?"isRestoring":"optimistic",Qz(o),Yz(o,i),Jz(i);const a=!r.getQueryCache().get(o.queryHash),[l]=b.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),u=!s&&n.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(_=>{const x=u?l.subscribe(zt.batchCalls(_)):$n;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),b.useEffect(()=>{l.setOptions(o)},[o,l]),eH(o,c))throw kk(o,l,i);if(Xz({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||w.call(g,o,c),o.experimental_prefetchInRender&&!Ru&&Zz(c,s)){const _=a?kk(o,l,i):(v=r.getQueryCache().get(o.queryHash))==null?void 0:v.promise;_==null||_.catch($n).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function uL(n,e){return tH(n,Bz)}function Rk(n,e){const t=DT(),[s]=b.useState(()=>new zz(t,n));b.useEffect(()=>{s.setOptions(n)},[s,n]);const i=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(zt.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=b.useCallback((o,a)=>{s.mutate(o,a).catch($n)},[s]);if(i.error&&eL(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}var LT={};Object.defineProperty(LT,"__esModule",{value:!0});LT.parse=lH;LT.serialize=cH;const nH=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,sH=/^[\u0021-\u003A\u003C-\u007E]*$/,iH=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,rH=/^[\u0020-\u003A\u003D-\u007E]*$/,oH=Object.prototype.toString,aH=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function lH(n,e){const t=new aH,s=n.length;if(s<2)return t;const i=(e==null?void 0:e.decode)||uH;let r=0;do{const o=n.indexOf("=",r);if(o===-1)break;const a=n.indexOf(";",r),l=a===-1?s:a;if(o>l){r=n.lastIndexOf(";",o-1)+1;continue}const c=Pk(n,r,o),u=Ik(n,o,c),p=n.slice(c,u);if(t[p]===void 0){let m=Pk(n,o+1,l),g=Ik(n,l,m);const w=i(n.slice(m,g));t[p]=w}r=l+1}while(r<s);return t}function Pk(n,e,t){do{const s=n.charCodeAt(e);if(s!==32&&s!==9)return e}while(++e<t);return t}function Ik(n,e,t){for(;e>t;){const s=n.charCodeAt(--e);if(s!==32&&s!==9)return e+1}return t}function cH(n,e,t){const s=(t==null?void 0:t.encode)||encodeURIComponent;if(!nH.test(n))throw new TypeError(`argument name is invalid: ${n}`);const i=s(e);if(!sH.test(i))throw new TypeError(`argument val is invalid: ${e}`);let r=n+"="+i;if(!t)return r;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);r+="; Max-Age="+t.maxAge}if(t.domain){if(!iH.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);r+="; Domain="+t.domain}if(t.path){if(!rH.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);r+="; Path="+t.path}if(t.expires){if(!dH(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);r+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.partitioned&&(r+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"none":r+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return r}function uH(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function dH(n){return oH.call(n)==="[object Date]"}var Nk="popstate";function hH(n={}){function e(s,i){let{pathname:r,search:o,hash:a}=s.location;return xS("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:xm(i)}return pH(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fH(){return Math.random().toString(36).substring(2,10)}function Mk(n,e){return{usr:n.state,key:n.key,idx:e}}function xS(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lf(e):e,state:t,key:e&&e.key||s||fH()}}function xm({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function pH(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function p(){a="POP";let _=u(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function m(_,x){a="PUSH";let S=xS(v.location,_,x);c=u()+1;let C=Mk(S,c),T=v.createHref(S);try{o.pushState(C,"",T)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(T)}r&&l&&l({action:a,location:v.location,delta:1})}function g(_,x){a="REPLACE";let S=xS(v.location,_,x);c=u();let C=Mk(S,c),T=v.createHref(S);o.replaceState(C,"",T),r&&l&&l({action:a,location:v.location,delta:0})}function w(_){return mH(_)}let v={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Nk,p),l=_,()=>{i.removeEventListener(Nk,p),l=null}},createHref(_){return e(i,_)},createURL:w,encodeLocation(_){let x=w(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(_){return o.go(_)}};return v}function mH(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:xm(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function dL(n,e,t="/"){return gH(n,e,t,!1)}function gH(n,e,t,s){let i=typeof e=="string"?Lf(e):e,r=Bo(i.pathname||"/",t);if(r==null)return null;let o=hL(n);yH(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=kH(r);a=TH(o[l],c,s)}return a}function hL(n,e=[],t=[],s=""){let i=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(mt(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length));let c=Ro([s,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(mt(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),hL(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:bH(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))i(r,o);else for(let l of fL(r.path))i(r,o,l)}),e}function fL(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=fL(s.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function yH(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EH(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var vH=/^:[\w-]+$/,wH=3,xH=2,_H=1,CH=10,SH=-2,Dk=n=>n==="*";function bH(n,e){let t=n.split("/"),s=t.length;return t.some(Dk)&&(s+=SH),e&&(s+=xH),t.filter(i=>!Dk(i)).reduce((i,r)=>i+(vH.test(r)?wH:r===""?_H:CH),s)}function EH(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function TH(n,e,t=!1){let{routesMeta:s}=n,i={},r="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,u=r==="/"?e:e.slice(r.length)||"/",p=J0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!p&&c&&t&&!s[s.length-1].route.index&&(p=J0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ro([r,p.pathname]),pathnameBase:NH(Ro([r,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(r=Ro([r,p.pathnameBase]))}return o}function J0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=AH(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:s.reduce((c,{paramName:u,isOptional:p},m)=>{if(u==="*"){let w=a[m]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[m];return p&&!g?c[u]=void 0:c[u]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function AH(n,e=!1,t=!0){Bi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function kH(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Bo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function RH(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Lf(n):n;return{pathname:t?t.startsWith("/")?t:PH(t,e):e,search:MH(s),hash:DH(i)}}function PH(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function M_(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IH(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function FT(n){let e=IH(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function OT(n,e,t,s=!1){let i;typeof n=="string"?i=Lf(n):(i={...n},mt(!i.pathname||!i.pathname.includes("?"),M_("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),M_("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),M_("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=RH(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Ro=n=>n.join("/").replace(/\/\/+/g,"/"),NH=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),MH=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DH=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function LH(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var pL=["POST","PUT","PATCH","DELETE"];new Set(pL);var FH=["GET",...pL];new Set(FH);var Ff=b.createContext(null);Ff.displayName="DataRouter";var gx=b.createContext(null);gx.displayName="DataRouterState";var mL=b.createContext({isTransitioning:!1});mL.displayName="ViewTransition";var OH=b.createContext(new Map);OH.displayName="Fetchers";var UH=b.createContext(null);UH.displayName="Await";var zi=b.createContext(null);zi.displayName="Navigation";var fy=b.createContext(null);fy.displayName="Location";var ri=b.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var UT=b.createContext(null);UT.displayName="RouteError";function $H(n,{relative:e}={}){mt(Of(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=b.useContext(zi),{hash:i,pathname:r,search:o}=my(n,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:Ro([t,r])),s.createHref({pathname:a,search:o,hash:i})}function Of(){return b.useContext(fy)!=null}function qo(){return mt(Of(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(fy).location}var gL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yL(n){b.useContext(zi).static||b.useLayoutEffect(n)}function py(){let{isDataRoute:n}=b.useContext(ri);return n?t6():BH()}function BH(){mt(Of(),"useNavigate() may be used only in the context of a <Router> component.");let n=b.useContext(Ff),{basename:e,navigator:t}=b.useContext(zi),{matches:s}=b.useContext(ri),{pathname:i}=qo(),r=JSON.stringify(FT(s)),o=b.useRef(!1);return yL(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(Bi(o.current,gL),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=OT(l,JSON.parse(r),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ro([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,r,i,n])}var VH=b.createContext(null);function jH(n){let e=b.useContext(ri).outlet;return e&&b.createElement(VH.Provider,{value:n},e)}function zH(){let{matches:n}=b.useContext(ri),e=n[n.length-1];return e?e.params:{}}function my(n,{relative:e}={}){let{matches:t}=b.useContext(ri),{pathname:s}=qo(),i=JSON.stringify(FT(t));return b.useMemo(()=>OT(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function HH(n,e){return vL(n,e)}function vL(n,e,t,s){var x;mt(Of(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(zi),{matches:r}=b.useContext(ri),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let S=u&&u.path||"";wL(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=qo(),m;if(e){let S=typeof e=="string"?Lf(e):e;mt(c==="/"||((x=S.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),m=S}else m=p;let g=m.pathname||"/",w=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=dL(n,{pathname:w});Bi(u||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Bi(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=YH(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Ro([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Ro([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),r,t,s);return e&&_?b.createElement(fy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function GH(){let n=e6(),e=LH(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:r},"ErrorBoundary")," or"," ",b.createElement("code",{style:r},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:i},t):null,o)}var qH=b.createElement(GH,null),WH=class extends b.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?b.createElement(ri.Provider,{value:this.props.routeContext},b.createElement(UT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KH({routeContext:n,match:e,children:t}){let s=b.useContext(Ff);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(ri.Provider,{value:n},t)}function YH(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,r=t==null?void 0:t.errors;if(r!=null){let l=i.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);mt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:p}=t,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let p,m=!1,g=null,w=null;t&&(p=r&&c.route.id?r[c.route.id]:void 0,g=c.route.errorElement||qH,o&&(a<0&&u===0?(wL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):a===u&&(m=!0,w=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),_=()=>{let x;return p?x=g:m?x=w:c.route.Component?x=b.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,b.createElement(KH,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?b.createElement(WH,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}function $T(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JH(n){let e=b.useContext(Ff);return mt(e,$T(n)),e}function XH(n){let e=b.useContext(gx);return mt(e,$T(n)),e}function QH(n){let e=b.useContext(ri);return mt(e,$T(n)),e}function BT(n){let e=QH(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ZH(){return BT("useRouteId")}function e6(){var s;let n=b.useContext(UT),e=XH("useRouteError"),t=BT("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function t6(){let{router:n}=JH("useNavigate"),e=BT("useNavigate"),t=b.useRef(!1);return yL(()=>{t.current=!0}),b.useCallback(async(i,r={})=>{Bi(t.current,gL),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...r}))},[n,e])}var Lk={};function wL(n,e,t){!e&&!Lk[n]&&(Lk[n]=!0,Bi(!1,t))}b.memo(n6);function n6({routes:n,future:e,state:t}){return vL(n,void 0,t,e)}function s6({to:n,replace:e,state:t,relative:s}){mt(Of(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=b.useContext(zi);Bi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=b.useContext(ri),{pathname:o}=qo(),a=py(),l=OT(n,FT(r),o,s==="path"),c=JSON.stringify(l);return b.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:s})},[a,c,s,e,t]),null}function i6(n){return jH(n.context)}function ud(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function r6({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:r=!1}){mt(!Of(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:o,navigator:i,static:r,future:{}}),[o,i,r]);typeof t=="string"&&(t=Lf(t));let{pathname:l="/",search:c="",hash:u="",state:p=null,key:m="default"}=t,g=b.useMemo(()=>{let w=Bo(l,o);return w==null?null:{location:{pathname:w,search:c,hash:u,state:p,key:m},navigationType:s}},[o,l,c,u,p,m,s]);return Bi(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:b.createElement(zi.Provider,{value:a},b.createElement(fy.Provider,{children:e,value:g}))}function o6({children:n,location:e}){return HH(_S(n),e)}function _S(n,e=[]){let t=[];return b.Children.forEach(n,(s,i)=>{if(!b.isValidElement(s))return;let r=[...e,i];if(s.type===b.Fragment){t.push.apply(t,_S(s.props.children,r));return}mt(s.type===ud,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=_S(s.props.children,r)),t.push(o)}),t}var Lv="get",Fv="application/x-www-form-urlencoded";function yx(n){return n!=null&&typeof n.tagName=="string"}function a6(n){return yx(n)&&n.tagName.toLowerCase()==="button"}function l6(n){return yx(n)&&n.tagName.toLowerCase()==="form"}function c6(n){return yx(n)&&n.tagName.toLowerCase()==="input"}function u6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function d6(n,e){return n.button===0&&(!e||e==="_self")&&!u6(n)}var ev=null;function h6(){if(ev===null)try{new FormData(document.createElement("form"),0),ev=!1}catch{ev=!0}return ev}var f6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function D_(n){return n!=null&&!f6.has(n)?(Bi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fv}"`),null):n}function p6(n,e){let t,s,i,r,o;if(l6(n)){let a=n.getAttribute("action");s=a?Bo(a,e):null,t=n.getAttribute("method")||Lv,i=D_(n.getAttribute("enctype"))||Fv,r=new FormData(n)}else if(a6(n)||c6(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(s=l?Bo(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Lv,i=D_(n.getAttribute("formenctype"))||D_(a.getAttribute("enctype"))||Fv,r=new FormData(a,n),!h6()){let{name:c,type:u,value:p}=n;if(u==="image"){let m=c?`${c}.`:"";r.append(`${m}x`,"0"),r.append(`${m}y`,"0")}else c&&r.append(c,p)}}else{if(yx(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Lv,s=null,i=Fv,o=n}return r&&i==="text/plain"&&(o=r,r=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:r,body:o}}function VT(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function m6(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g6(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function y6(n,e,t){let s=await Promise.all(n.map(async i=>{let r=e.routes[i.route.id];if(r){let o=await m6(r,t);return o.links?o.links():[]}return[]}));return _6(s.flat(1).filter(g6).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fk(n,e,t,s,i,r){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?e.filter((l,c)=>{var p;let u=s.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function v6(n,e,{includeHydrateFallback:t}={}){return w6(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function w6(n){return[...new Set(n)]}function x6(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function _6(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let r=JSON.stringify(x6(i));return t.has(r)||(t.add(r),s.push({key:r,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var C6=new Set([100,101,204,205]);function S6(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Bo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function xL(){let n=b.useContext(Ff);return VT(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function b6(){let n=b.useContext(gx);return VT(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var jT=b.createContext(void 0);jT.displayName="FrameworkContext";function _L(){let n=b.useContext(jT);return VT(n,"You must render this element inside a <HydratedRouter> element"),n}function E6(n,e){let t=b.useContext(jT),[s,i]=b.useState(!1),[r,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:p}=e,m=b.useRef(null);b.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=x=>{x.forEach(S=>{o(S.isIntersecting)})},_=new IntersectionObserver(v,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[n]),b.useEffect(()=>{if(s){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[s]);let g=()=>{i(!0)},w=()=>{i(!1),o(!1)};return t?n!=="intent"?[r,m,{}]:[r,m,{onFocus:np(a,g),onBlur:np(l,w),onMouseEnter:np(c,g),onMouseLeave:np(u,w),onTouchStart:np(p,g)}]:[!1,m,{}]}function np(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function T6({page:n,...e}){let{router:t}=xL(),s=b.useMemo(()=>dL(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?b.createElement(k6,{page:n,matches:s,...e}):null}function A6(n){let{manifest:e,routeModules:t}=_L(),[s,i]=b.useState([]);return b.useEffect(()=>{let r=!1;return y6(n,e,t).then(o=>{r||i(o)}),()=>{r=!0}},[n,e,t]),s}function k6({page:n,matches:e,...t}){let s=qo(),{manifest:i,routeModules:r}=_L(),{basename:o}=xL(),{loaderData:a,matches:l}=b6(),c=b.useMemo(()=>Fk(n,e,l,i,s,"data"),[n,e,l,i,s]),u=b.useMemo(()=>Fk(n,e,l,i,s,"assets"),[n,e,l,i,s]),p=b.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,v=!1;if(e.forEach(x=>{var C;let S=i.routes[x.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===x.route.id)&&x.route.id in a&&((C=r[x.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?v=!0:w.add(x.route.id))}),w.size===0)return[];let _=S6(n,o);return v&&w.size>0&&_.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[_.pathname+_.search]},[o,a,s,i,c,e,n,r]),m=b.useMemo(()=>v6(u,i),[u,i]),g=A6(u);return b.createElement(b.Fragment,null,p.map(w=>b.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>b.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),g.map(({key:w,link:v})=>b.createElement("link",{key:w,...v})))}function R6(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CL&&(window.__reactRouterVersion="7.6.3")}catch{}function P6({basename:n,children:e,window:t}){let s=b.useRef();s.current==null&&(s.current=hH({window:t,v5Compat:!0}));let i=s.current,[r,o]=b.useState({action:i.action,location:i.location}),a=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>i.listen(a),[i,a]),b.createElement(r6,{basename:n,children:e,location:r.location,navigationType:r.action,navigator:i})}var SL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X0=b.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p,...m},g){let{basename:w}=b.useContext(zi),v=typeof c=="string"&&SL.test(c),_,x=!1;if(typeof c=="string"&&v&&(_=c,CL))try{let D=new URL(window.location.href),M=c.startsWith("//")?new URL(D.protocol+c):new URL(c),L=Bo(M.pathname,w);M.origin===D.origin&&L!=null?c=L+M.search+M.hash:x=!0}catch{Bi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=$H(c,{relative:i}),[C,T,k]=E6(s,m),P=D6(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:p});function I(D){e&&e(D),D.defaultPrevented||P(D)}let N=b.createElement("a",{...m,...k,href:_||S,onClick:x||r?e:I,ref:R6(g,T),target:l,"data-discover":!v&&t==="render"?"true":void 0});return C&&!v?b.createElement(b.Fragment,null,N,b.createElement(T6,{page:S})):N});X0.displayName="Link";var I6=b.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:r,to:o,viewTransition:a,children:l,...c},u){let p=my(o,{relative:c.relative}),m=qo(),g=b.useContext(gx),{navigator:w,basename:v}=b.useContext(zi),_=g!=null&&$6(p)&&a===!0,x=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,S=m.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&v&&(C=Bo(C,v)||C);const T=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=S===x||!i&&S.startsWith(x)&&S.charAt(T)==="/",P=C!=null&&(C===x||!i&&C.startsWith(x)&&C.charAt(x.length)==="/"),I={isActive:k,isPending:P,isTransitioning:_},N=k?e:void 0,D;typeof s=="function"?D=s(I):D=[s,k?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let M=typeof r=="function"?r(I):r;return b.createElement(X0,{...c,"aria-current":N,className:D,ref:u,style:M,to:o,viewTransition:a},typeof l=="function"?l(I):l)});I6.displayName="NavLink";var N6=b.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:r,method:o=Lv,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:p,...m},g)=>{let w=O6(),v=U6(a,{relative:c}),_=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&SL.test(a),S=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let T=C.nativeEvent.submitter,k=(T==null?void 0:T.getAttribute("formmethod"))||o;w(T||C.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:r,relative:c,preventScrollReset:u,viewTransition:p})};return b.createElement("form",{ref:g,method:_,action:v,onSubmit:s?l:S,...m,"data-discover":!x&&n==="render"?"true":void 0})});N6.displayName="Form";function M6(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bL(n){let e=b.useContext(Ff);return mt(e,M6(n)),e}function D6(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:r,viewTransition:o}={}){let a=py(),l=qo(),c=my(n,{relative:r});return b.useCallback(u=>{if(d6(u,e)){u.preventDefault();let p=t!==void 0?t:xm(l)===xm(c);a(n,{replace:p,state:s,preventScrollReset:i,relative:r,viewTransition:o})}},[l,a,c,t,s,e,n,i,r,o])}var L6=0,F6=()=>`__${String(++L6)}__`;function O6(){let{router:n}=bL("useSubmit"),{basename:e}=b.useContext(zi),t=ZH();return b.useCallback(async(s,i={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=p6(s,e);if(i.navigate===!1){let u=i.fetcherKey||F6();await n.fetch(u,t,i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function U6(n,{relative:e}={}){let{basename:t}=b.useContext(zi),s=b.useContext(ri);mt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...my(n||".",{relative:e})},o=qo();if(n==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let u=a.toString();r.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Ro([t,r.pathname])),xm(r)}function $6(n,e={}){let t=b.useContext(mL);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=bL("useViewTransitionState"),i=my(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=Bo(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=Bo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return J0(i.pathname,o)!=null||J0(i.pathname,r)!=null}[...C6];const B6="modulepreload",V6=function(n){return"/"+n},Ok={},gy=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=V6(l),l in Ok)return;Ok[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":B6,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},j6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>gy(async()=>{const{default:s}=await Promise.resolve().then(()=>Uf);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class zT extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class z6 extends zT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Uk extends zT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $k extends zT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var CS;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(CS||(CS={}));var H6=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class G6{constructor(e,{headers:t={},customFetch:s,region:i=CS.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=j6(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return H6(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const p=yield this.fetch(c.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(v=>{throw new z6(v)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new Uk(p);if(!p.ok)throw new $k(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield p.json():g==="application/octet-stream"?w=yield p.blob():g==="text/event-stream"?w=p:g==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(i){return{data:null,error:i,response:i instanceof $k||i instanceof Uk?i.context:void 0}}})}}var is={},HT={},vx={},yy={},wx={},xx={},q6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sf=q6();const W6=Sf.fetch,EL=Sf.fetch.bind(Sf),TL=Sf.Headers,K6=Sf.Request,Y6=Sf.Response,Uf=Object.freeze(Object.defineProperty({__proto__:null,Headers:TL,Request:K6,Response:Y6,default:EL,fetch:W6},Symbol.toStringTag,{value:"Module"})),J6=kB(Uf);var _x={};Object.defineProperty(_x,"__esModule",{value:!0});let X6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_x.default=X6;var AL=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xx,"__esModule",{value:!0});const Q6=AL(J6),Z6=AL(_x);let eG=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Q6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let c=null,u=null,p=null,m=r.status,g=r.statusText;if(r.ok){if(this.method!=="HEAD"){const x=await r.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&_&&_.length>1&&(p=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,p=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await r.text();try{c=JSON.parse(v),Array.isArray(c)&&r.status===404&&(u=[],c=null,m=200,g="OK")}catch{r.status===404&&v===""?(m=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new Z6.default(c)}return{error:c,data:u,count:p,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};xx.default=eG;var tG=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wx,"__esModule",{value:!0});const nG=tG(xx);let sG=class extends nG.default{select(e){let t=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:i=s}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};wx.default=sG;var iG=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yy,"__esModule",{value:!0});const rG=iG(wx);let oG=class extends rG.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};yy.default=oG;var aG=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vx,"__esModule",{value:!0});const sp=aG(yy);let lG=class{constructor(e,{headers:t={},schema:s,fetch:i}){this.url=e,this.headers=t,this.schema=s,this.fetch=i}select(e,{head:t=!1,count:s}={}){const i=t?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new sp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new sp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:i,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new sp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new sp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new sp.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vx.default=lG;var Cx={},Sx={};Object.defineProperty(Sx,"__esModule",{value:!0});Sx.version=void 0;Sx.version="0.0.0-automated";Object.defineProperty(Cx,"__esModule",{value:!0});Cx.DEFAULT_HEADERS=void 0;const cG=Sx;Cx.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${cG.version}`};var kL=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(HT,"__esModule",{value:!0});const uG=kL(vx),dG=kL(yy),hG=Cx;let fG=class RL{constructor(e,{headers:t={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},hG.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new uG.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new RL(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:i=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||i?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,p])=>p!==void 0).map(([u,p])=>[u,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([u,p])=>{a.searchParams.append(u,p)})):(o="POST",l=t);const c=Object.assign({},this.headers);return r&&(c.Prefer=`count=${r}`),new dG.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};HT.default=fG;var $f=ti&&ti.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(is,"__esModule",{value:!0});is.PostgrestError=is.PostgrestBuilder=is.PostgrestTransformBuilder=is.PostgrestFilterBuilder=is.PostgrestQueryBuilder=is.PostgrestClient=void 0;const PL=$f(HT);is.PostgrestClient=PL.default;const IL=$f(vx);is.PostgrestQueryBuilder=IL.default;const NL=$f(yy);is.PostgrestFilterBuilder=NL.default;const ML=$f(wx);is.PostgrestTransformBuilder=ML.default;const DL=$f(xx);is.PostgrestBuilder=DL.default;const LL=$f(_x);is.PostgrestError=LL.default;var pG=is.default={PostgrestClient:PL.default,PostgrestQueryBuilder:IL.default,PostgrestFilterBuilder:NL.default,PostgrestTransformBuilder:ML.default,PostgrestBuilder:DL.default,PostgrestError:LL.default};const{PostgrestClient:mG,PostgrestQueryBuilder:yre,PostgrestFilterBuilder:vre,PostgrestTransformBuilder:wre,PostgrestBuilder:xre,PostgrestError:_re}=pG;function gG(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const yG=gG(),vG="2.11.15",wG=`realtime-js/${vG}`,xG="1.0.0",FL=1e4,_G=1e3;var Yp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Yp||(Yp={}));var _n;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(_n||(_n={}));var Ii;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ii||(Ii={}));var SS;(function(n){n.websocket="websocket"})(SS||(SS={}));var Kl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Kl||(Kl={}));class CG{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const i=t.getUint8(1),r=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+i));o=o+i;const l=s.decode(e.slice(o,o+r));o=o+r;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class OL{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(nt||(nt={}));const Bk=(n,e,t={})=>{var s;const i=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((r,o)=>(r[o]=SG(o,n,e,i),r),{})},SG=(n,e,t,s)=>{const i=e.find(a=>a.name===n),r=i==null?void 0:i.type,o=t[n];return r&&!s.includes(r)?UL(r,o):bS(o)},UL=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return AG(e,t)}switch(n){case nt.bool:return bG(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return EG(e);case nt.json:case nt.jsonb:return TG(e);case nt.timestamp:return kG(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return bS(e);default:return bS(e)}},bS=n=>n,bG=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},EG=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},TG=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},AG=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let r;const o=n.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>UL(e,a))}return n},kG=n=>typeof n=="string"?n.replace(" ","T"):n,$L=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class L_{constructor(e,t,s={},i=FL){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Vk||(Vk={}));class Jp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jp.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=Jp.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jp.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,i){const r=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const p=r[c];if(p){const m=u.map(_=>_.presence_ref),g=p.map(_=>_.presence_ref),w=u.filter(_=>g.indexOf(_.presence_ref)<0),v=p.filter(_=>m.indexOf(_.presence_ref)<0);w.length>0&&(a[c]=w),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},s,i)}static syncDiff(e,t,s,i){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const p=e[a].map(g=>g.presence_ref),m=u.filter(g=>p.indexOf(g.presence_ref)<0);e[a].unshift(...m)}s(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(p=>p.presence_ref);c=c.filter(p=>u.indexOf(p.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const i=e[s];return"metas"in i?t[s]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[s]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(jk||(jk={}));var zk;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(zk||(zk={}));var Br;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Br||(Br={}));class GT{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=_n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new L_(this,Ii.join,this.params,this.timeout),this.rejoinTimer=new OL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_n.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ii.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new Jp(this),this.broadcastEndpointURL=$L(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==_n.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Br.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Br.CLOSED));const l={},c={broadcast:r,presence:o,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var p;if(this.socket.setAuth(),u===void 0){e==null||e(Br.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,w=[];for(let v=0;v<g;v++){const _=m[v],{filter:{event:x,schema:S,table:C,filter:T}}=_,k=u&&u[v];if(k&&k.event===x&&k.schema===S&&k.table===C&&k.filter===T)w.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),this.state=_n.errored,e==null||e(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Br.SUBSCRIBED);return}}).receive("error",u=>{this.state=_n.errored,e==null||e(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_n.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ii.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new L_(this,Ii.leave,{},e),s.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const i=new AbortController,r=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new L_(this,e,t,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var i,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ii;if(s&&[a,l,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var w,v,_;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(v=g.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(r=this.bindings[o])===null||r===void 0||r.filter(g=>{var w,v,_,x,S,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const T=g.id,k=(w=g.filter)===null||w===void 0?void 0:w.event;return T&&((v=t.ids)===null||v===void 0?void 0:v.includes(T))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const T=(S=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:v,table:_,commit_timestamp:x,type:S,errors:C}=w;m=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:x,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(w))}g.callback(m,s)})}_isClosed(){return this.state===_n.closed}_isJoined(){return this.state===_n.joined}_isJoining(){return this.state===_n.joining}_isLeaving(){return this.state===_n.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:s};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===s&&GT.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ii.close,{},e)}_onError(e){this._on(Ii.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_n.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Bk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Bk(e.columns,e.old_record)),t}}const Hk=()=>{},RG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class PG{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=FL,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hk,this.ref=0,this.logger=Hk,this.conn=null,this.sendBuffer=[],this.serializer=new CG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>gy(async()=>{const{default:l}=await Promise.resolve().then(()=>Uf);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${SS.websocket}`,this.httpEndpoint=$L(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,o)=>o(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new OL(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=yG),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xG}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yp.connecting:return Kl.Connecting;case Yp.open:return Kl.Open;case Yp.closing:return Kl.Closing;default:return Kl.Closed}}isConnected(){return this.connectionState()===Kl.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(r=>r.topic===s);if(i)return i;{const r=new GT(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:s,payload:i,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${s} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:wG};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ii.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(_G,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:i,payload:r,ref:o}=t;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${s} ${i} ${o&&"("+o+")"||""}`,r),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(i,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ii.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${s}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([RG],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class qT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function en(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class IG extends qT{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ES extends qT{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var NG=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const BL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>gy(async()=>{const{default:s}=await Promise.resolve().then(()=>Uf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},MG=()=>NG(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gy(()=>Promise.resolve().then(()=>Uf),void 0)).Response:Response}),TS=n=>{if(Array.isArray(n))return n.map(t=>TS(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const i=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=TS(s)}),e};var Gu=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const F_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),DG=(n,e,t)=>Gu(void 0,void 0,void 0,function*(){const s=yield MG();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new IG(F_(i),n.status||500))}).catch(i=>{e(new ES(F_(i),i))}):e(new ES(F_(n),n))}),LG=(n,e,t,s)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),t))};function vy(n,e,t,s,i,r){return Gu(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,LG(e,s,i,r)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>DG(l,a,s))})})}function Q0(n,e,t,s){return Gu(this,void 0,void 0,function*(){return vy(n,"GET",e,t,s)})}function oa(n,e,t,s,i){return Gu(this,void 0,void 0,function*(){return vy(n,"POST",e,s,i,t)})}function FG(n,e,t,s,i){return Gu(this,void 0,void 0,function*(){return vy(n,"PUT",e,s,i,t)})}function OG(n,e,t,s){return Gu(this,void 0,void 0,function*(){return vy(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function VL(n,e,t,s,i){return Gu(this,void 0,void 0,function*(){return vy(n,"DELETE",e,s,i,t)})}var Wn=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const UG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $G{constructor(e,t={},s,i){this.url=e,this.headers=t,this.bucketId=s,this.fetch=BL(i)}uploadOrUpdate(e,t,s,i){return Wn(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},Gk),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield p.json();return p.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(r){if(en(r))return{data:null,error:r};throw r}})}upload(e,t,s){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,i){return Wn(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Gk.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),m=yield p.json();return p.ok?{data:{path:r,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(en(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Wn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const r=yield oa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new qT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}update(e,t,s){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Wn(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}copy(e,t,s){return Wn(this,void 0,void 0,function*(){try{return{data:{path:(yield oa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,s){return Wn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield oa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,s){return Wn(this,void 0,void 0,function*(){try{const i=yield oa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}download(e,t){return Wn(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Q0(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(en(a))return{data:null,error:a};throw a}})}info(e){return Wn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Q0(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:TS(s),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}exists(e){return Wn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield OG(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(en(s)&&s instanceof ES){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${c}`)}}}remove(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield VL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}list(e,t,s){return Wn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},UG),t),{prefix:e||""});return{data:yield oa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(en(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const BG="2.7.1",VG={"X-Client-Info":`storage-js/${BG}`};var td=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class jG{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},VG),t),this.fetch=BL(s)}listBuckets(){return td(this,void 0,void 0,function*(){try{return{data:yield Q0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(en(e))return{data:null,error:e};throw e}})}getBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield Q0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return td(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return td(this,void 0,void 0,function*(){try{return{data:yield FG(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(en(s))return{data:null,error:s};throw s}})}emptyBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}deleteBucket(e){return td(this,void 0,void 0,function*(){try{return{data:yield VL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}}class zG extends jG{constructor(e,t={},s){super(e,t,s)}from(e){return new $G(this.url,this.headers,e,this.fetch)}}const HG="2.50.3";let pp="";typeof Deno<"u"?pp="deno":typeof document<"u"?pp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pp="react-native":pp="node";const GG={"X-Client-Info":`supabase-js-${pp}/${HG}`},qG={headers:GG},WG={schema:"public"},KG={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YG={};var JG=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const XG=n=>{let e;return n?e=n:typeof fetch>"u"?e=EL:e=fetch,(...t)=>e(...t)},QG=()=>typeof Headers>"u"?TL:Headers,ZG=(n,e,t)=>{const s=XG(t),i=QG();return(r,o)=>JG(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(r,Object.assign(Object.assign({},o),{headers:c}))})};var eq=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};function tq(n){return n.endsWith("/")?n:n+"/"}function nq(n,e){var t,s;const{db:i,auth:r,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:p}=e,m={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(t=p==null?void 0:p.headers)!==null&&t!==void 0?t:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>eq(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const jL="2.70.0",dd=30*1e3,AS=3,O_=AS*dd,sq="http://localhost:9999",iq="supabase.auth.token",rq={"X-Client-Info":`gotrue-js/${jL}`},kS="X-Supabase-Api-Version",zL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aq=6e5;class WT extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class lq extends WT{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function cq(n){return Ce(n)&&n.name==="AuthApiError"}class HL extends WT{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ml extends WT{constructor(e,t,s,i){super(e,s,i),this.name=t,this.status=s}}class ta extends Ml{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uq(n){return Ce(n)&&n.name==="AuthSessionMissingError"}class tv extends Ml{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nv extends Ml{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sv extends Ml{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dq(n){return Ce(n)&&n.name==="AuthImplicitGrantRedirectError"}class qk extends Ml{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RS extends Ml{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function U_(n){return Ce(n)&&n.name==="AuthRetryableFetchError"}class Wk extends Ml{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Xp extends Ml{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Z0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kk=` 	
\r=`.split(""),hq=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Kk.length;e+=1)n[Kk[e].charCodeAt(0)]=-2;for(let e=0;e<Z0.length;e+=1)n[Z0[e].charCodeAt(0)]=e;return n})();function Yk(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Z0[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Z0[s]),e.queuedBits-=6}}function GL(n,e,t){const s=hq[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Jk(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{mq(o,s,t)};for(let o=0;o<n.length;o+=1)GL(n.charCodeAt(o),i,r);return e.join("")}function fq(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function pq(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}fq(s,e)}}function mq(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function gq(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)GL(n.charCodeAt(i),t,s);return new Uint8Array(e)}function yq(n){const e=[];return pq(n,t=>e.push(t)),new Uint8Array(e)}function vq(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};return n.forEach(i=>Yk(i,t,s)),Yk(null,t,s),e.join("")}function wq(n){return Math.round(Date.now()/1e3)+n}function xq(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const hi=()=>typeof window<"u"&&typeof document<"u",Bl={tested:!1,writable:!1},Qp=()=>{if(!hi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bl.tested)return Bl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Bl.tested=!0,Bl.writable=!0}catch{Bl.tested=!0,Bl.writable=!1}return Bl.writable};function _q(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return t.searchParams.forEach((s,i)=>{e[i]=s}),e}const qL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>gy(async()=>{const{default:s}=await Promise.resolve().then(()=>Uf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Cq=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",WL=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},iv=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},rv=async(n,e)=>{await n.removeItem(e)};class bx{constructor(){this.promise=new bx.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bx.promiseConstructor=Promise;function $_(n){const e=n.split(".");if(e.length!==3)throw new Xp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!oq.test(e[s]))throw new Xp("JWT not in base64url format");return{header:JSON.parse(Jk(e[0])),payload:JSON.parse(Jk(e[1])),signature:gq(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sq(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function bq(n,e){return new Promise((s,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await n(r);if(!e(r,null,o)){s(o);return}}catch(o){if(!e(r,o)){i(o);return}}})()})}function Eq(n){return("0"+n.toString(16)).substr(-2)}function Tq(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,Eq).join("")}async function Aq(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(s);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function kq(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Aq(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nd(n,e,t=!1){const s=Tq();let i=s;t&&(i+="/PASSWORD_RECOVERY"),await WL(n,`${e}-code-verifier`,i);const r=await kq(s);return[r,s===r?"plain":"s256"]}const Rq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pq(n){const e=n.headers.get(kS);if(!e||!e.match(Rq))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Iq(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Nq(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sd(n){if(!Mq.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Dq=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const Hl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lq=[502,503,504];async function Xk(n){var e;if(!Cq(n))throw new RS(Hl(n),0);if(Lq.includes(n.status))throw new RS(Hl(n),n.status);let t;try{t=await n.json()}catch(r){throw new HL(Hl(r),r)}let s;const i=Pq(n);if(i&&i.getTime()>=zL["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Wk(Hl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ta}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new Wk(Hl(t),n.status,t.weak_password.reasons);throw new lq(Hl(t),n.status||500,s)}const Fq=(n,e,t,s)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};async function Re(n,e,t,s){var i;const r=Object.assign({},s==null?void 0:s.headers);r[kS]||(r[kS]=zL["2024-01-01"].name),s!=null&&s.jwt&&(r.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Oq(n,e,t+a,{headers:r,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function Oq(n,e,t,s,i,r){const o=Fq(e,s,i,r);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new RS(Hl(l),0)}if(a.ok||await Xk(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await Xk(l)}}function Dr(n){var e;let t=null;Vq(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=wq(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Qk(n){const e=Dr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function da(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Uq(n){return{data:n,error:null}}function $q(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:r}=n,o=Dq(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Bq(n){return n}function Vq(n){return n.access_token&&n.refresh_token&&n.expires_in}const B_=["global","local","others"];var jq=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};class zq{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=qL(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=B_[0]){if(B_.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${B_.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:da})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=jq(e,["options"]),i=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:$q,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:da})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:Bq});if(u.error)throw u.error;const p=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Ce(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){sd(e);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:da})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){sd(e);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:da})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){sd(e);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:da})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){sd(e.userId);try{const{data:t,error:s}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:s}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){sd(e.userId),sd(e.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}}const Hq={getItem:n=>Qp()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Qp()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Qp()&&globalThis.localStorage.removeItem(n)}};function Zk(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Gq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const id={debug:!!(globalThis&&Qp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qq extends KL{}async function Wq(n,e,t){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),id.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{id.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw id.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new qq(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(id.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Gq();const Kq={url:sq,storageKey:iq,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rq,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function eR(n,e,t){return await t()}class _m{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_m.nextInstanceID,_m.nextInstanceID+=1,this.instanceID>0&&hi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Kq),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zq({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qL(i.fetch),this.lock=i.lock||eR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:hi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Wq:this.lock=eR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Qp()?this.storage=Hq:(this.memoryStorage={},this.storage=Zk(this.memoryStorage)):(this.memoryStorage={},this.storage=Zk(this.memoryStorage)),hi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=_q(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),hi()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:r}=await this._getSessionFromURL(t,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),dq(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ce(t)?{error:t}:{error:new HL("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,i;try{const r=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Dr}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,s,i;try{let r;if("email"in e){const{email:u,password:p,options:m}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await nd(this.storage,this.storageKey)),r=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:p,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:w},xform:Dr})}else if("phone"in e){const{phone:u,password:p,options:m}=e;r=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Dr})}else throw new nv("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qk})}else if("phone"in e){const{phone:r,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qk})}else throw new nv("You must provide either an email or phone number and a password");const{data:s,error:i}=t;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new tv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,i,r,o,a,l,c,u,p,m,g;let w,v;if("message"in e)w=e.message,v=e.signature;else{const{chain:_,wallet:x,statement:S,options:C}=e;let T;if(hi())if(typeof x=="object")T=x;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=x}const k=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),S?{statement:S}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${k.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(s=C==null?void 0:C.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=C==null?void 0:C.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(u=C==null?void 0:C.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{const{data:_,error:x}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:vq(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Dr});if(x)throw x;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new tv}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x})}catch(_){if(Ce(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await iv(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/");try{const{data:r,error:o}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Dr});if(await rv(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new tv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(Ce(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:s,token:i,access_token:r,nonce:o}=e,a=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Dr}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new tv}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,i,r,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await nd(this.storage,this.storageKey));const{error:p}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new nv("You must provide either an email or phone number.")}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let i,r;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Dr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,s,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await nd(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:Uq})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ta;const{error:i}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:r}=e,{error:o}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:r}=e,{data:o,error:a}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new nv("You must provide either an email or phone number and a type")}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await iv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<O_:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:da}):await this._useSession(async t=>{var s,i,r;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:da})})}catch(t){if(Ce(t))return uq(t)&&(await this._removeSession(),await rv(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:i,error:r}=s;if(r)throw r;if(!i.session)throw new ta;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await nd(this.storage,this.storageKey));const{data:c,error:u}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:da});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ta;const t=Date.now()/1e3;let s=t,i=!0,r=null;const{payload:o}=$_(e.access_token);if(o.exp&&(s=o.exp,i=s<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(Ce(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ta;const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!hi())throw new sv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new qk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sv("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qk("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!r||!a||!o||!c)throw new sv("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(a);let m=u+p;l&&(m=parseInt(l));const g=m-u;g*1e3<=dd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const w=m-p;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,u);const{data:v,error:_}=await this._getUser(r);if(_)throw _;const x={provider_token:s,provider_refresh_token:i,access_token:r,expires_in:p,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(Ce(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await iv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:i,error:r}=t;if(r)return{error:r};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(cq(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await rv(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=xq(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,i;try{const{data:{session:r},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await nd(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:i}=await this._useSession(async r=>{var o,a,l,c,u;const{data:p,error:m}=r;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return hi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Ce(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,i;const{data:r,error:o}=t;if(o)throw o;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await bq(async i=>(i>0&&await Sq(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dr})),(i,r)=>{const o=200*Math.pow(2,i);return r&&U_(r)&&Date.now()+o-s<dd})}catch(s){if(this._debug(t,"error",s),Ce(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),hi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await iv(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<O_;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${O_}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:r}=await this._callRefreshToken(s.refresh_token);r&&(console.error(r),U_(r)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bx;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new ta;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),Ce(r)){const o={session:null,error:r};return U_(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await WL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rv(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/dd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${dd}ms, refresh threshold is ${AS} ticks`),i<=AS&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const i=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[r,o]=await nd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(s!=null&&s.queryParams){const r=new URLSearchParams(s.queryParams);i.push(r.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;return r?{data:null,error:r}:await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,i;const{data:r,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;if(r)return{data:null,error:r};const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;return r?{data:null,error:r}:await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:i},error:r}=e;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$_(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+aq>Date.now()))return s;const{data:i,error:r}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!i.keys||i.keys.length===0)throw new Xp("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),s=i.keys.find(o=>o.kid===e),!s)throw new Xp("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};s=g.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=$_(s);if(Iq(r.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:r,header:i,signature:o},error:null}}const c=Nq(i.alg),u=await this.fetchJwk(i.kid,t),p=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,p,o,yq(`${a}.${l}`)))throw new Xp("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}}_m.nextInstanceID=0;const Yq=_m;class Jq extends Yq{constructor(e){super(e)}}var Xq=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(p){o(p)}}function l(u){try{c(s.throw(u))}catch(p){o(p)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class Qq{constructor(e,t,s){var i,r,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=tq(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:WG,realtime:YG,auth:Object.assign(Object.assign({},KG),{storageKey:c}),global:qG},p=nq(s??{},u);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=p.global.headers)!==null&&r!==void 0?r:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=ZG(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new mG(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new G6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new zG(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Xq(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:r,flowType:o,lock:a,debug:l},c,u){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jq({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new PG(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zq=(n,e,t)=>new Qq(n,e,t),eW="https://rlmvnxhichzgxagpkqgc.supabase.co",tW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsbXZueGhpY2h6Z3hhZ3BrcWdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4ODYxNTUsImV4cCI6MjA2NjQ2MjE1NX0.yxFWrAWF_-0Fgr9EYi9HqWMK9tn4pb-91tY-J0n4iL4",un=Zq(eW,tW);class rd{static async signUp(e){try{const{data:t,error:s}=await un.auth.signUp({email:e.email,password:e.password});return s?{user:null,error:s.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign up failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signIn(e){try{const{data:t,error:s}=await un.auth.signInWithPassword({email:e.email,password:e.password});return s?{user:null,error:s.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign in failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signInWithGoogle(){try{const e=window.location.origin+"/sessions",{data:t,error:s}=await un.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});return s?{user:null,error:s.message}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signOut(){try{const{error:e}=await un.auth.signOut();return{error:(e==null?void 0:e.message)||null}}catch{return{error:"An unexpected error occurred"}}}static async getCurrentUser(){try{const{data:{user:e},error:t}=await un.auth.getUser();return t?{user:null,error:t.message}:e?{user:{id:e.id,email:e.email,created_at:e.created_at},error:null}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static onAuthStateChange(e){return un.auth.onAuthStateChange(async(t,s)=>{if(t==="SIGNED_IN"&&(s!=null&&s.user)){const i={id:s.user.id,email:s.user.email,created_at:s.user.created_at};e(i)}else t==="SIGNED_OUT"&&e(null)})}}class Ys{static setCurrentUser(e){this._currentUser=e}static async getCurrentUser(){if(this._currentUser)return this._currentUser;const{data:{user:e}}=await un.auth.getUser();return e}static async createSession(e){const t=await this.getCurrentUser();if(!t)return{session:null,error:"User not authenticated"};if(t.id==="guest"){const s={id:`guest-session-${this.guestSessionId++}`,user_id:"guest",title:e.title,description:e.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.guestSessions.unshift(s),{session:s,error:null}}try{const{data:s,error:i}=await un.from("sessions").insert({user_id:t.id,title:e.title,description:e.description}).select().single();return i?{session:null,error:i.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async getSessions(){const e=await this.getCurrentUser();if(!e)return{sessions:null,error:"User not authenticated"};if(e.id==="guest")return{sessions:this.guestSessions,error:null};try{const{data:t,error:s}=await un.from("sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return s?{sessions:null,error:s.message}:{sessions:t,error:null}}catch{return{sessions:null,error:"An unexpected error occurred"}}}static async getSession(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return{session:this.guestSessions.find(i=>i.id===e)||null,error:null};try{const{data:s,error:i}=await un.from("sessions").select("*").eq("id",e).single();return i?{session:null,error:i.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async updateSession(e,t){try{const{data:s,error:i}=await un.from("sessions").update(t).eq("id",e).select().single();return i?{session:null,error:i.message}:{session:s,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async deleteSession(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return this.guestSessions=this.guestSessions.filter(s=>s.id!==e),{error:null};try{const{error:s}=await un.from("sessions").delete().eq("id",e);return s?{error:s.message}:{error:null}}catch{return{error:"An unexpected error occurred"}}}static async addFile(e,t){const s=await this.getCurrentUser();if(s&&s.id==="guest"){this.guestFiles[e]||(this.guestFiles[e]=[]);const i={...t,id:`guest-file-${this.guestFiles[e].length+1}`,session_id:e,created_at:new Date().toISOString()};return this.guestFiles[e].push(i),{file:i,error:null}}try{const{data:i,error:r}=await un.from("files").insert({session_id:e,name:t.name,type:t.type,content:t.content}).select().single();return r?{file:null,error:r.message}:{file:i,error:null}}catch{return{file:null,error:"An unexpected error occurred"}}}static async getFiles(e){const t=await this.getCurrentUser();if(t&&t.id==="guest")return{files:this.guestFiles[e]||[],error:null};try{const{data:s,error:i}=await un.from("files").select("*").eq("session_id",e).order("created_at",{ascending:!0});return i?{files:null,error:i.message}:{files:s,error:null}}catch{return{files:null,error:"An unexpected error occurred"}}}static async saveStudyContent(e,t,s){const i=await this.getCurrentUser();if(i&&i.id==="guest")return this.guestStudyContent[e]||(this.guestStudyContent[e]={}),this.guestStudyContent[e][t]={session_id:e,type:t,content:s},{studyContent:this.guestStudyContent[e][t],error:null};try{const{data:r,error:o}=await un.from("study_content").upsert({session_id:e,type:t,content:s}).select().single();return o?{studyContent:null,error:o.message}:{studyContent:r,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async getStudyContent(e,t){var i;const s=await this.getCurrentUser();if(s&&s.id==="guest")return{studyContent:((i=this.guestStudyContent[e])==null?void 0:i[t])||null,error:null};try{const{data:r,error:o}=await un.from("study_content").select("*").eq("session_id",e).eq("type",t).single();return o?{studyContent:null,error:o.message}:{studyContent:r,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async addFlashcards(e,t){const s=await this.getCurrentUser();if(s&&s.id==="guest"){this.guestFlashcards[e]||(this.guestFlashcards[e]=[]);const o=t.map((a,l)=>({...a,id:`guest-flashcard-${this.guestFlashcards[e].length+l+1}`,session_id:e}));return this.guestFlashcards[e].push(...o),o}const{data:i,error:r}=await un.from("flashcards").insert(t.map(o=>({session_id:e,front:o.front,back:o.back,mastered:o.mastered}))).select();if(r)throw new Error(r.message);return i}}H(Ys,"guestSessions",[]),H(Ys,"guestSessionId",1),H(Ys,"guestFiles",{}),H(Ys,"guestStudyContent",{}),H(Ys,"guestFlashcards",{}),H(Ys,"_currentUser",null);const YL=b.createContext(void 0);function nW({children:n}){const[e,t]=b.useState(null),[s,i]=b.useState(!0);b.useEffect(()=>{(async()=>{if(!(e!=null&&e.isGuest))try{const{user:g,error:w}=await rd.getCurrentUser();w&&console.error("Auth error:",w),t(g||{id:"guest",email:"guest@qzzly.com",created_at:new Date().toISOString(),isGuest:!0,name:"Guest User"})}catch(g){console.error("Error checking user:",g)}finally{i(!1)}})();const{data:{subscription:m}}=rd.onAuthStateChange(g=>{t(g),i(!1)});return()=>{m==null||m.unsubscribe()}},[]),b.useEffect(()=>{Ys.setCurrentUser(e)},[e]),b.useEffect(()=>{e||t({id:"guest",email:"guest@qzzly.com",created_at:new Date().toISOString(),isGuest:!0,name:"Guest User"})},[e]);const u={user:e,loading:s,isAuthenticated:!!e,signIn:async(p,m)=>{try{const{user:g,error:w}=await rd.signIn({email:p,password:m});return w?{success:!1,error:w}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signUp:async(p,m)=>{try{const{user:g,error:w}=await rd.signUp({email:p,password:m});return w?{success:!1,error:w}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signInWithGoogle:async()=>{try{const{user:p,error:m}=await rd.signInWithGoogle();return m?{success:!1,error:m}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signOut:async()=>{try{await rd.signOut(),t(null)}catch(p){console.error("Error signing out:",p)}},setGuestUser:()=>{t({id:"guest",email:"guest@qzzly.com",created_at:new Date().toISOString(),isGuest:!0,name:"Guest User"})}};return y.jsx(YL.Provider,{value:u,children:n})}function qu(){const n=b.useContext(YL);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function sW({redirectTo:n="/"}){const{isAuthenticated:e,isLoading:t}=qu();return t?y.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e?y.jsx(i6,{}):y.jsx(s6,{to:n,replace:!0})}const iW=wT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),pe=b.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},r)=>{const o=s?aj:"button";return y.jsx(o,{className:Te(iW({variant:e,size:t,className:n})),ref:r,...i})});pe.displayName="Button";var V_="focusScope.autoFocusOnMount",j_="focusScope.autoFocusOnUnmount",tR={bubbles:!1,cancelable:!0},rW="FocusScope",KT=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...o}=n,[a,l]=b.useState(null),c=ii(i),u=ii(r),p=b.useRef(null),m=Pe(e,v=>l(v)),g=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let v=function(C){if(g.paused||!a)return;const T=C.target;a.contains(T)?p.current=T:na(p.current,{select:!0})},_=function(C){if(g.paused||!a)return;const T=C.relatedTarget;T!==null&&(a.contains(T)||na(p.current,{select:!0}))},x=function(C){if(document.activeElement===document.body)for(const k of C)k.removedNodes.length>0&&na(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const S=new MutationObserver(x);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),S.disconnect()}}},[s,a,g.paused]),b.useEffect(()=>{if(a){sR.add(g);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(V_,tR);a.addEventListener(V_,c),a.dispatchEvent(x),x.defaultPrevented||(oW(dW(JL(a)),{select:!0}),document.activeElement===v&&na(a))}return()=>{a.removeEventListener(V_,c),setTimeout(()=>{const x=new CustomEvent(j_,tR);a.addEventListener(j_,u),a.dispatchEvent(x),x.defaultPrevented||na(v??document.body,{select:!0}),a.removeEventListener(j_,u),sR.remove(g)},0)}}},[a,c,u,g]);const w=b.useCallback(v=>{if(!t&&!s||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(_&&x){const S=v.currentTarget,[C,T]=aW(S);C&&T?!v.shiftKey&&x===T?(v.preventDefault(),t&&na(C,{select:!0})):v.shiftKey&&x===C&&(v.preventDefault(),t&&na(T,{select:!0})):x===S&&v.preventDefault()}},[t,s,g.paused]);return y.jsx(fe.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});KT.displayName=rW;function oW(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(na(s,{select:e}),document.activeElement!==t)return}function aW(n){const e=JL(n),t=nR(e,n),s=nR(e.reverse(),n);return[t,s]}function JL(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function nR(n,e){for(const t of n)if(!lW(t,{upTo:e}))return t}function lW(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function cW(n){return n instanceof HTMLInputElement&&"select"in n}function na(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&cW(n)&&e&&n.select()}}var sR=uW();function uW(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=iR(n,e),n.unshift(e)},remove(e){var t;n=iR(n,e),(t=n[0])==null||t.resume()}}}function iR(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function dW(n){return n.filter(e=>e.tagName!=="A")}var z_=0;function XL(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??rR()),document.body.insertAdjacentElement("beforeend",n[1]??rR()),z_++,()=>{z_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),z_--}},[])}function rR(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var yr=function(){return yr=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yr.apply(this,arguments)};function QL(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function hW(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return n.concat(r||Array.prototype.slice.call(e))}var Ov="right-scroll-bar-position",Uv="width-before-scroll-bar",fW="with-scroll-bars-hidden",pW="--removed-body-scroll-bar-size";function H_(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function mW(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var gW=typeof window<"u"?b.useLayoutEffect:b.useEffect,oR=new WeakMap;function yW(n,e){var t=mW(null,function(s){return n.forEach(function(i){return H_(i,s)})});return gW(function(){var s=oR.get(t);if(s){var i=new Set(s),r=new Set(n),o=t.current;i.forEach(function(a){r.has(a)||H_(a,null)}),r.forEach(function(a){i.has(a)||H_(a,o)})}oR.set(t,n)},[n]),t}function vW(n){return n}function wW(n,e){e===void 0&&(e=vW);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,s);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(s=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){s=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var l=function(){var u=o;o=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function xW(n){n===void 0&&(n={});var e=wW(null);return e.options=yr({async:!0,ssr:!1},n),e}var ZL=function(n){var e=n.sideCar,t=QL(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,yr({},t))};ZL.isSideCarExport=!0;function _W(n,e){return n.useMedium(e),ZL}var e2=xW(),G_=function(){},Ex=b.forwardRef(function(n,e){var t=b.useRef(null),s=b.useState({onScrollCapture:G_,onWheelCapture:G_,onTouchMoveCapture:G_}),i=s[0],r=s[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,p=n.shards,m=n.sideCar,g=n.noRelative,w=n.noIsolation,v=n.inert,_=n.allowPinchZoom,x=n.as,S=x===void 0?"div":x,C=n.gapMode,T=QL(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,P=yW([t,e]),I=yr(yr({},T),i);return b.createElement(b.Fragment,null,u&&b.createElement(k,{sideCar:e2,removeScrollBar:c,shards:p,noRelative:g,noIsolation:w,inert:v,setCallbacks:r,allowPinchZoom:!!_,lockRef:t,gapMode:C}),o?b.cloneElement(b.Children.only(a),yr(yr({},I),{ref:P})):b.createElement(S,yr({},I,{className:l,ref:P}),a))});Ex.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ex.classNames={fullWidth:Uv,zeroRight:Ov};var CW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SW(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=CW();return e&&n.setAttribute("nonce",e),n}function bW(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function EW(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var TW=function(){var n=0,e=null;return{add:function(t){n==0&&(e=SW())&&(bW(e,t),EW(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},AW=function(){var n=TW();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},t2=function(){var n=AW(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},kW={left:0,top:0,right:0,gap:0},q_=function(n){return parseInt(n||"",10)||0},RW=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[q_(t),q_(s),q_(i)]},PW=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return kW;var e=RW(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},IW=t2(),zd="data-scroll-locked",NW=function(n,e,t,s){var i=n.left,r=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(fW,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(zd,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ov,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(Uv,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Uv," .").concat(Uv,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(zd,`] {
    `).concat(pW,": ").concat(a,`px;
  }
`)},aR=function(){var n=parseInt(document.body.getAttribute(zd)||"0",10);return isFinite(n)?n:0},MW=function(){b.useEffect(function(){return document.body.setAttribute(zd,(aR()+1).toString()),function(){var n=aR()-1;n<=0?document.body.removeAttribute(zd):document.body.setAttribute(zd,n.toString())}},[])},DW=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;MW();var r=b.useMemo(function(){return PW(i)},[i]);return b.createElement(IW,{styles:NW(r,!e,i,t?"":"!important")})},PS=!1;if(typeof window<"u")try{var ov=Object.defineProperty({},"passive",{get:function(){return PS=!0,!0}});window.addEventListener("test",ov,ov),window.removeEventListener("test",ov,ov)}catch{PS=!1}var od=PS?{passive:!1}:!1,LW=function(n){return n.tagName==="TEXTAREA"},n2=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!LW(n)&&t[e]==="visible")},FW=function(n){return n2(n,"overflowY")},OW=function(n){return n2(n,"overflowX")},lR=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=s2(n,s);if(i){var r=i2(n,s),o=r[1],a=r[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},UW=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},$W=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},s2=function(n,e){return n==="v"?FW(e):OW(e)},i2=function(n,e){return n==="v"?UW(e):$W(e)},BW=function(n,e){return n==="h"&&e==="rtl"?-1:1},VW=function(n,e,t,s,i){var r=BW(n,window.getComputedStyle(e).direction),o=r*s,a=t.target,l=e.contains(a),c=!1,u=o>0,p=0,m=0;do{if(!a)break;var g=i2(n,a),w=g[0],v=g[1],_=g[2],x=v-_-r*w;(w||x)&&s2(n,a)&&(p+=x,m+=w);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(p)<1||!u&&Math.abs(m)<1)&&(c=!0),c},av=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},cR=function(n){return[n.deltaX,n.deltaY]},uR=function(n){return n&&"current"in n?n.current:n},jW=function(n,e){return n[0]===e[0]&&n[1]===e[1]},zW=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},HW=0,ad=[];function GW(n){var e=b.useRef([]),t=b.useRef([0,0]),s=b.useRef(),i=b.useState(HW++)[0],r=b.useState(t2)[0],o=b.useRef(n);b.useEffect(function(){o.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var v=hW([n.lockRef.current],(n.shards||[]).map(uR),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=b.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=av(v),S=t.current,C="deltaX"in v?v.deltaX:S[0]-x[0],T="deltaY"in v?v.deltaY:S[1]-x[1],k,P=v.target,I=Math.abs(C)>Math.abs(T)?"h":"v";if("touches"in v&&I==="h"&&P.type==="range")return!1;var N=lR(I,P);if(!N)return!0;if(N?k=I:(k=I==="v"?"h":"v",N=lR(I,P)),!N)return!1;if(!s.current&&"changedTouches"in v&&(C||T)&&(s.current=k),!k)return!0;var D=s.current||k;return VW(D,_,v,D==="h"?C:T)},[]),l=b.useCallback(function(v){var _=v;if(!(!ad.length||ad[ad.length-1]!==r)){var x="deltaY"in _?cR(_):av(_),S=e.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&jW(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var C=(o.current.shards||[]).map(uR).filter(Boolean).filter(function(k){return k.contains(_.target)}),T=C.length>0?a(_,C[0]):!o.current.noIsolation;T&&_.cancelable&&_.preventDefault()}}},[]),c=b.useCallback(function(v,_,x,S){var C={name:v,delta:_,target:x,should:S,shadowParent:qW(x)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(T){return T!==C})},1)},[]),u=b.useCallback(function(v){t.current=av(v),s.current=void 0},[]),p=b.useCallback(function(v){c(v.type,cR(v),v.target,a(v,n.lockRef.current))},[]),m=b.useCallback(function(v){c(v.type,av(v),v.target,a(v,n.lockRef.current))},[]);b.useEffect(function(){return ad.push(r),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",l,od),document.addEventListener("touchmove",l,od),document.addEventListener("touchstart",u,od),function(){ad=ad.filter(function(v){return v!==r}),document.removeEventListener("wheel",l,od),document.removeEventListener("touchmove",l,od),document.removeEventListener("touchstart",u,od)}},[]);var g=n.removeScrollBar,w=n.inert;return b.createElement(b.Fragment,null,w?b.createElement(r,{styles:zW(i)}):null,g?b.createElement(DW,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function qW(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const WW=_W(e2,GW);var YT=b.forwardRef(function(n,e){return b.createElement(Ex,yr({},n,{ref:e,sideCar:WW}))});YT.classNames=Ex.classNames;var KW=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},ld=new WeakMap,lv=new WeakMap,cv={},W_=0,r2=function(n){return n&&(n.host||r2(n.parentNode))},YW=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=r2(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},JW=function(n,e,t,s){var i=YW(e,Array.isArray(n)?n:[n]);cv[t]||(cv[t]=new WeakMap);var r=cv[t],o=[],a=new Set,l=new Set(i),c=function(p){!p||a.has(p)||(a.add(p),c(p.parentNode))};i.forEach(c);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(s),w=g!==null&&g!=="false",v=(ld.get(m)||0)+1,_=(r.get(m)||0)+1;ld.set(m,v),r.set(m,_),o.push(m),v===1&&w&&lv.set(m,!0),_===1&&m.setAttribute(t,"true"),w||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return u(e),a.clear(),W_++,function(){o.forEach(function(p){var m=ld.get(p)-1,g=r.get(p)-1;ld.set(p,m),r.set(p,g),m||(lv.has(p)||p.removeAttribute(s),lv.delete(p)),g||p.removeAttribute(t)}),W_--,W_||(ld=new WeakMap,ld=new WeakMap,lv=new WeakMap,cv={})}},o2=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=KW(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),JW(s,i,t,"aria-hidden")):function(){return null}},Tx="Dialog",[a2,Cre]=Fs(Tx),[XW,Hi]=a2(Tx),l2=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:i,onOpenChange:r,modal:o=!0}=n,a=b.useRef(null),l=b.useRef(null),[c,u]=Oo({prop:s,defaultProp:i??!1,onChange:r,caller:Tx});return y.jsx(XW,{scope:e,triggerRef:a,contentRef:l,contentId:gl(),titleId:gl(),descriptionId:gl(),open:c,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(p=>!p),[u]),modal:o,children:t})};l2.displayName=Tx;var c2="DialogTrigger",u2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Hi(c2,t),r=Pe(e,i.triggerRef);return y.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":QT(i.open),...s,ref:r,onClick:oe(n.onClick,i.onOpenToggle)})});u2.displayName=c2;var JT="DialogPortal",[QW,d2]=a2(JT,{forceMount:void 0}),h2=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:i}=n,r=Hi(JT,e);return y.jsx(QW,{scope:e,forceMount:t,children:b.Children.map(s,o=>y.jsx(Go,{present:t||r.open,children:y.jsx(rx,{asChild:!0,container:i,children:o})}))})};h2.displayName=JT;var ew="DialogOverlay",f2=b.forwardRef((n,e)=>{const t=d2(ew,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,r=Hi(ew,n.__scopeDialog);return r.modal?y.jsx(Go,{present:s||r.open,children:y.jsx(e8,{...i,ref:e})}):null});f2.displayName=ew;var ZW=xf("DialogOverlay.RemoveScroll"),e8=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Hi(ew,t);return y.jsx(YT,{as:ZW,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(fe.div,{"data-state":QT(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Iu="DialogContent",p2=b.forwardRef((n,e)=>{const t=d2(Iu,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,r=Hi(Iu,n.__scopeDialog);return y.jsx(Go,{present:s||r.open,children:r.modal?y.jsx(t8,{...i,ref:e}):y.jsx(n8,{...i,ref:e})})});p2.displayName=Iu;var t8=b.forwardRef((n,e)=>{const t=Hi(Iu,n.__scopeDialog),s=b.useRef(null),i=Pe(e,t.contentRef,s);return b.useEffect(()=>{const r=s.current;if(r)return o2(r)},[]),y.jsx(m2,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(n.onCloseAutoFocus,r=>{var o;r.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:oe(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&r.preventDefault()}),onFocusOutside:oe(n.onFocusOutside,r=>r.preventDefault())})}),n8=b.forwardRef((n,e)=>{const t=Hi(Iu,n.__scopeDialog),s=b.useRef(!1),i=b.useRef(!1);return y.jsx(m2,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,r),r.defaultPrevented||(s.current||(a=t.triggerRef.current)==null||a.focus(),r.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:r=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),m2=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:r,...o}=n,a=Hi(Iu,t),l=b.useRef(null),c=Pe(e,l);return XL(),y.jsxs(y.Fragment,{children:[y.jsx(KT,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:r,children:y.jsx(uy,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":QT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(s8,{titleId:a.titleId}),y.jsx(r8,{contentRef:l,descriptionId:a.descriptionId})]})]})}),XT="DialogTitle",g2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Hi(XT,t);return y.jsx(fe.h2,{id:i.titleId,...s,ref:e})});g2.displayName=XT;var y2="DialogDescription",v2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Hi(y2,t);return y.jsx(fe.p,{id:i.descriptionId,...s,ref:e})});v2.displayName=y2;var w2="DialogClose",x2=b.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Hi(w2,t);return y.jsx(fe.button,{type:"button",...s,ref:e,onClick:oe(n.onClick,()=>i.onOpenChange(!1))})});x2.displayName=w2;function QT(n){return n?"open":"closed"}var _2="DialogTitleWarning",[Sre,C2]=rj(_2,{contentName:Iu,titleName:XT,docsSlug:"dialog"}),s8=({titleId:n})=>{const e=C2(_2),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},i8="DialogDescriptionWarning",r8=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${C2(i8).contentName}}.`;return b.useEffect(()=>{var r;const i=(r=n.current)==null?void 0:r.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},o8=l2,a8=u2,l8=h2,S2=f2,b2=p2,E2=g2,T2=v2,c8=x2;const Ax=o8,kx=a8,u8=l8,A2=b.forwardRef(({className:n,...e},t)=>y.jsx(S2,{ref:t,className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));A2.displayName=S2.displayName;const wy=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(u8,{children:[y.jsx(A2,{}),y.jsxs(b2,{ref:s,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),"aria-describedby":t["aria-describedby"],...t,children:[e,y.jsxs(c8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(lx,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wy.displayName=b2.displayName;const xy=({className:n,...e})=>y.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});xy.displayName="DialogHeader";const ZT=({className:n,...e})=>y.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});ZT.displayName="DialogFooter";const _y=b.forwardRef(({className:n,...e},t)=>y.jsx(E2,{ref:t,className:Te("text-lg font-semibold leading-none tracking-tight",n),...e}));_y.displayName=E2.displayName;const Rx=b.forwardRef(({className:n,...e},t)=>y.jsx(T2,{ref:t,className:Te("text-sm text-muted-foreground",n),...e}));Rx.displayName=T2.displayName;function d8({children:n}){const[e,t]=b.useState(!1),{signInWithGoogle:s,loading:i,setGuestUser:r}=qu(),{toast:o}=Ho(),a=async()=>{const c=await s();c.success?o({title:"Logging in with Google...",description:"You will be redirected shortly"}):o({title:"Google login failed",description:c.error||"Please try again",variant:"destructive"})},l=()=>{r(),o({title:"Continuing as Guest",description:"You are now in guest/test mode."}),t(!1)};return y.jsxs(Ax,{open:e,onOpenChange:t,children:[y.jsx(kx,{asChild:!0,children:n||y.jsx(pe,{variant:"outline",children:"Log in"})}),y.jsxs(wy,{className:"sm:max-w-[425px]",children:[y.jsxs(xy,{children:[y.jsx(_y,{className:"text-xl font-bold",children:"Log in to Qzzly"}),y.jsx(Rx,{children:"Log in with Google to access your account. Email/password login is not supported."})]}),y.jsx(pe,{type:"button",variant:"outline",className:"w-full mt-2",onClick:a,disabled:i,children:"Continue with Google"}),y.jsx("div",{className:"text-center text-xs text-gray-400 my-2",children:"or"}),y.jsx(pe,{type:"button",variant:"secondary",className:"w-full",onClick:l,children:"Continue as Guest (Test Mode)"}),y.jsx("div",{className:"text-xs text-gray-400 mt-2 text-center",children:"Guest mode is for testing only. Your data will not be saved."})]})]})}function eA({children:n}){const[e,t]=b.useState(!1),{signInWithGoogle:s,loading:i}=qu(),{toast:r}=Ho(),o=async()=>{const a=await s();a.success?r({title:"Signing up with Google...",description:"You will be redirected shortly"}):r({title:"Google sign-up failed",description:a.error||"Please try again",variant:"destructive"})};return y.jsxs(Ax,{open:e,onOpenChange:t,children:[y.jsx(kx,{asChild:!0,children:n||y.jsx(pe,{children:"Sign up"})}),y.jsxs(wy,{className:"sm:max-w-[425px]",children:[y.jsxs(xy,{children:[y.jsx(_y,{className:"text-xl font-bold",children:"Create your account"}),y.jsx(Rx,{children:"Sign up with Google to start using Qzzly. Email/password sign up is not supported."})]}),y.jsx(pe,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,disabled:i,children:"Continue with Google"})]})]})}function Dl(){const n=b.useRef(null);return b.useEffect(()=>{const e=n.current;if(!e)return;e.classList.add("opacity-0");const t=new IntersectionObserver(([s])=>{s.isIntersecting&&(e.classList.remove("opacity-0"),e.classList.add("animate-fade-in"),t.unobserve(e))},{threshold:.1});return t.observe(e),()=>t.disconnect()},[]),n}const Hd=()=>{const{user:n}=qu(),e=Dl();return y.jsx("header",{ref:e,className:"bg-white py-5 border-b border-gray-100 sticky top-0 z-50 shadow-sm backdrop-blur-lg bg-white/90",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center",children:y.jsxs(X0,{to:"/",className:"text-2xl font-bold flex items-center",children:[y.jsx("div",{className:"w-9 h-9 mr-2 gradient-bg rounded-md flex items-center justify-center",children:y.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("span",{className:"font-extrabold tracking-tighter",children:"Qzzly"})]})}),y.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[y.jsx("a",{href:"/#features",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Features"}),y.jsx("a",{href:"/#how-it-works",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"How it Works"}),y.jsx(X0,{to:"/sessions",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"My Sessions"})]}),y.jsx("div",{className:"flex items-center space-x-4",children:n&&n.isGuest?y.jsx("span",{className:"text-xs text-purple-600 font-semibold ml-4",children:"Test Mode (Guest)"}):y.jsxs(y.Fragment,{children:[y.jsx(d8,{children:y.jsx(pe,{variant:"outline",className:"hidden md:flex border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:"Log in"})}),y.jsx(eA,{children:y.jsx(pe,{className:"gradient-bg font-medium shadow-md shadow-purple-200",children:"Sign up"})})]})})]})})})},h8=()=>{const[n,e]=b.useState(!1),[t,s]=b.useState(!1),i=b.useRef(null),r=py(),{toast:o}=Ho(),{user:a}=qu(),l=async m=>{if(!a){o({title:"Authentication required",description:"Please sign up or log in to upload files"});return}if(!(!m||m.length===0)){s(!0);try{const g=m[0];if(g.type!=="application/pdf"){o({title:"Unsupported file format",description:"Please upload PDF files only",variant:"destructive"});return}const w=g.name.replace(/\.pdf$/,""),v=await Ys.createSession({title:w});if(v.error||!v.session){o({title:"Session creation failed",description:v.error||"Unknown error",variant:"destructive"});return}o({title:"Files uploaded successfully",description:`Created new study session: ${w}`}),r(`/session/${v.session.id}`)}catch{o({title:"Upload failed",description:"There was an error uploading your files",variant:"destructive"})}finally{s(!1)}}},c=m=>{m.preventDefault(),e(!1),m.dataTransfer.files&&m.dataTransfer.files.length>0&&l(m.dataTransfer.files)},u=()=>{var m;(m=i.current)==null||m.click()},p=()=>{a?r("/sessions"):o({title:"Authentication required",description:"Please sign up to get started"})};return y.jsx("section",{className:"py-20 md:py-28 container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[y.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0",children:[y.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-8 leading-tight animate-fade-in",children:["Transform Your ",y.jsx("span",{className:"gradient-text",children:"Study Material"})," Into Interactive Quizzes"]}),y.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed animate-fade-in max-w-lg",style:{animationDelay:"0.2s"},children:"Upload your PDFs and explore our demo features to see how AI-powered study tools can accelerate your learning journey."}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 animate-fade-in",style:{animationDelay:"0.4s"},children:[a?y.jsx(pe,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",onClick:p,children:"Go to Study Sessions"}):y.jsx(eA,{children:y.jsx(pe,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",children:"Get Started Free"})}),y.jsxs(pe,{variant:"outline",className:"bg-white border border-gray-300 px-8 py-7 rounded-lg text-lg font-medium hover:bg-gray-50 transition-colors",children:[y.jsx(pD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]}),y.jsx("div",{className:"md:w-1/2 animate-fade-in animate-float",style:{animationDelay:"0.6s"},children:y.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Try it now"}),y.jsxs("div",{id:"upload-container",className:`upload-area rounded-xl p-10 text-center cursor-pointer mb-6 border-2 border-dashed border-gray-300 ${n?"border-purple-500 bg-purple-50":""}`,onDragOver:m=>{m.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:c,onClick:u,children:[t?y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-purple-500 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Creating study session..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-500 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),y.jsx("p",{className:"text-gray-600 mb-3 text-lg",children:"Drag & drop your PDF files here"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"or"}),y.jsx(pe,{variant:"outline",className:"px-6 py-3 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50 font-medium",onClick:u,children:"Browse files"})]}),y.jsx("input",{type:"file",ref:i,className:"hidden",accept:".pdf",multiple:!0,onChange:m=>{m.target.files&&m.target.files.length>0&&l(m.target.files)}})]}),y.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Supported formats: PDF (Max size: 25MB per file)"})]})})]})})},f8=()=>{const n=Dl();return y.jsx("section",{ref:n,id:"features",className:"py-20 bg-white",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Features"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Supercharge Your Learning"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Our AI analyzes your study materials and creates personalized learning resources to help you master any subject."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(a3,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Smart Quizzes"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI-generated quizzes that adapt to your knowledge gaps and learning style for maximum retention."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(z0,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Interactive Flashcards"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Turn complex concepts into easy-to-review flashcards with spaced repetition for better memorization."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(r3,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Mock Tests"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Simulate real exam conditions with comprehensive mock tests that prepare you for the real thing."})]})]})]})})},p8=()=>{const n=Dl();return y.jsx("section",{ref:n,id:"how-it-works",className:"py-24 bg-gray-50",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-20",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Process"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"How Qzzly Works"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Three simple steps to transform your study materials into effective learning tools."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl mx-auto relative",children:[y.jsx("div",{className:"hidden md:block absolute top-24 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-600"}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.2s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"1"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Upload Your PDFs"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Simply drag and drop your study materials, lecture notes, or textbook PDFs."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.4s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"2"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI Analysis"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Our advanced AI reads and understands your content, identifying key concepts and knowledge points."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.6s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"3"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Study Smarter"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Access your personalized quizzes, flashcards, and mock tests anytime, anywhere."})]})]})]})})},m8=()=>{const n=Dl();return y.jsx("section",{ref:n,className:"py-24 bg-white",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Testimonials"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"What Our Users Say"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Join thousands of students who have transformed their study habits with Qzzly."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"testimonial-card",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:y.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"JD"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-lg",children:"Jamie Davis"}),y.jsx("p",{className:"text-gray-500 text-sm",children:"Medical Student"})]})]}),y.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"Qzzly helped me prepare for my anatomy exams in half the time. The AI-generated questions were spot-on and covered exactly what I needed to know."'}),y.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>y.jsx(R_,{className:"w-5 h-5 fill-current"},e))})]}),y.jsxs("div",{className:"testimonial-card",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:y.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"MK"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-lg",children:"Michael Kim"}),y.jsx("p",{className:"text-gray-500 text-sm",children:"Law Student"})]})]}),y.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The flashcards generated from my case law notes were incredibly helpful. I could study on the go and the spaced repetition system helped me memorize key precedents."'}),y.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>y.jsx(R_,{className:"w-5 h-5 fill-current"},e))})]}),y.jsxs("div",{className:"testimonial-card",children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mr-4",children:y.jsx("span",{className:"text-green-600 font-bold text-lg",children:"SP"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-lg",children:"Sarah Patel"}),y.jsx("p",{className:"text-gray-500 text-sm",children:"Computer Science Major"})]})]}),y.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The mock tests generated from my programming textbooks were challenging and comprehensive. I aced my final exams thanks to Qzzly!"'}),y.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>y.jsx(R_,{className:"w-5 h-5 fill-current"},e))})]})]})]})})},g8=()=>{const{user:n}=qu(),e=Dl();return y.jsx("section",{ref:e,className:"py-24 bg-white",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-10 md:p-16 shadow-2xl overflow-hidden relative",children:[y.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -mr-20 -mt-20"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-purple-500/10 rounded-full -ml-20 -mb-20"}),y.jsxs("div",{className:"max-w-3xl mx-auto text-center relative",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-8 leading-tight",children:"Ready to Transform Your Study Habits?"}),y.jsx("p",{className:"text-xl text-purple-100 mb-10 leading-relaxed",children:"Join thousands of students who are studying smarter, not harder. Try Qzzly today and see the difference."}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5",children:[n&&n.isGuest?y.jsx("span",{className:"text-xs text-purple-600 font-semibold",children:"Test Mode (Guest)"}):y.jsx(eA,{redirectPath:"/sessions",children:y.jsx(pe,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",children:"Get Started Free"})}),y.jsxs(pe,{size:"lg",variant:"outline",className:"bg-transparent text-white border-2 border-white px-10 py-7 hover:bg-white/10 text-lg font-bold rounded-xl",children:[y.jsx(pD,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]})]})})})},k2=()=>{const n=Dl();return y.jsx("footer",{ref:n,className:"bg-gray-900 text-white pt-20 pb-10",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-10 h-10 gradient-bg rounded-lg flex items-center justify-center mr-3",children:y.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"white"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"white",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Qzzly"})]}),y.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"AI-powered study tools to help you learn faster and remember more."}),y.jsxs("div",{className:"flex space-x-5",children:[y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Product"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Features"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Testimonials"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"FAQ"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Resources"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Blog"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Help Center"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Tutorials"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Contact"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Company"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"About Us"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Careers"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})})]})]})]}),y.jsx("div",{className:"border-t border-gray-800 mt-16 pt-8 text-center text-gray-400",children:y.jsxs("p",{children:["© ",new Date().getFullYear()," Qzzly. All rights reserved."]})})]})})},y8=()=>y.jsxs("div",{className:"flex flex-col min-h-screen",children:[y.jsx(Hd,{}),y.jsxs("main",{className:"flex-grow",children:[y.jsx(h8,{}),y.jsx(f8,{}),y.jsx(p8,{}),y.jsx(m8,{}),y.jsx(g8,{})]}),y.jsx(k2,{})]}),v8=()=>{const n=qo();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),y.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",children:[y.jsx(Hd,{}),y.jsx("main",{className:"flex flex-1 flex-col items-center justify-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mb-6 animate-float",children:[y.jsx("ellipse",{cx:"60",cy:"60",rx:"55",ry:"55",fill:"#ede9fe"}),y.jsx("ellipse",{cx:"60",cy:"60",rx:"40",ry:"40",fill:"#a5b4fc"}),y.jsx("path",{d:"M60 80c-10 0-18-8-18-18s8-18 18-18 18 8 18 18-8 18-18 18zm0-8a10 10 0 100-20 10 10 0 000 20z",fill:"#7c3aed"}),y.jsx("circle",{cx:"50",cy:"55",r:"3",fill:"#fff"}),y.jsx("circle",{cx:"70",cy:"55",r:"3",fill:"#fff"}),y.jsx("ellipse",{cx:"60",cy:"70",rx:"6",ry:"3",fill:"#fff"})]}),y.jsx("h1",{className:"text-5xl font-extrabold text-purple-700 mb-2",children:"404"}),y.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Sorry, we couldn't find that page."}),y.jsx(pe,{className:"gradient-bg px-8 py-3 text-lg font-semibold shadow-md",asChild:!0,children:y.jsx("a",{href:"/sessions",children:"Go to My Sessions"})}),y.jsx(pe,{variant:"ghost",className:"mt-2 text-purple-600 hover:underline",asChild:!0,children:y.jsx("a",{href:"/",children:"Back to Home"})})]})}),y.jsx(k2,{})]})},wu=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));wu.displayName="Card";const xu=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:Te("flex flex-col space-y-1.5 p-6",n),...e}));xu.displayName="CardHeader";const Gd=b.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:Te("text-2xl font-semibold leading-none tracking-tight",n),...e}));Gd.displayName="CardTitle";const w8=b.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:Te("text-sm text-muted-foreground",n),...e}));w8.displayName="CardDescription";const _u=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:Te("p-6 pt-0",n),...e}));_u.displayName="CardContent";const tw=b.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:Te("flex items-center p-6 pt-0",n),...e}));tw.displayName="CardFooter";const Nu=b.forwardRef(({className:n,type:e,...t},s)=>y.jsx("input",{type:e,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));Nu.displayName="Input";var x8="Label",R2=b.forwardRef((n,e)=>y.jsx(fe.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));R2.displayName=x8;var P2=R2;const _8=wT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),wt=b.forwardRef(({className:n,...e},t)=>y.jsx(P2,{ref:t,className:Te(_8(),n),...e}));wt.displayName=P2.displayName;const tA=b.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:Te("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));tA.displayName="Textarea";function C8(){const{user:n}=qu(),e=DT(),{data:t,isLoading:s}=uL({queryKey:["sessions"],queryFn:Ys.getSessions}),i=(t==null?void 0:t.sessions)||[],[r,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(!1),p=py(),{toast:m}=Ho(),g=Rk({mutationFn:C=>Ys.createSession({title:C.title,description:C.description}),onSuccess:async C=>{if(C.error||!C.session){m({title:"Error",description:C.error||"Failed to create session",variant:"destructive"});return}e.invalidateQueries({queryKey:["sessions"]}),o(""),l(""),u(!1),m({title:"Success",description:`"${C.session.title}" has been created successfully.`}),setTimeout(()=>{p(`/session/${C.session.id}`)},100)},onError:()=>{m({title:"Error",description:"Failed to create session",variant:"destructive"})}}),w=()=>{if(!r.trim()){m({title:"Error",description:"Session title is required",variant:"destructive"});return}g.mutate({title:r,description:a})},v=Rk({mutationFn:C=>Ys.deleteSession(C),onSuccess:(C,T)=>{if(C.error){m({title:"Error",description:C.error,variant:"destructive"});return}e.setQueryData(["sessions"],(k=[])=>k.filter(P=>P.id!==T)),m({title:"Success",description:"Session has been deleted successfully."})},onError:()=>{m({title:"Error",description:"Failed to delete session",variant:"destructive"})}}),_=(C,T)=>{T.stopPropagation(),v.mutate(C)},x=C=>{if(!C)return"Unknown";const T=new Date(C);return isNaN(T.getTime())?"Unknown":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(T)},S=Dl();return y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Hd,{}),y.jsxs("main",{ref:S,className:"container mx-auto px-4 py-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold",children:"Your Study Sessions"}),y.jsxs(Ax,{open:c,onOpenChange:u,children:[y.jsx(kx,{asChild:!0,children:y.jsx(pe,{className:"gradient-bg",children:"Create New Session"})}),y.jsxs(wy,{children:[y.jsxs(xy,{children:[y.jsx(_y,{children:"Create New Study Session"}),y.jsx(Rx,{children:"Create a new study session to organize your learning materials."})]}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{htmlFor:"title",children:"Session Title"}),y.jsx(Nu,{id:"title",placeholder:"Enter a title for your study session",value:r,onChange:C=>o(C.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{htmlFor:"description",children:"Description (Optional)"}),y.jsx(tA,{id:"description",placeholder:"Describe what you'll be studying",value:a,onChange:C=>l(C.target.value)})]})]}),y.jsxs(ZT,{children:[y.jsx(pe,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),y.jsx(pe,{className:"gradient-bg",onClick:w,children:"Create Session"})]})]})]})]}),s?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(C=>y.jsxs(wu,{className:"border shadow-sm animate-pulse",children:[y.jsx(xu,{className:"bg-gray-100 h-16"}),y.jsxs(_u,{className:"pt-4",children:[y.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),y.jsx(tw,{className:"h-10 bg-gray-50"})]},C))}):i.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(C=>y.jsxs(wu,{className:"border shadow-md hover:shadow-lg transition-shadow cursor-pointer card-hover",onClick:()=>p(`/session/${C.id}`),children:[y.jsx(xu,{className:"pb-2",children:y.jsxs(Gd,{className:"flex justify-between items-start",children:[y.jsx("span",{className:"text-xl",children:C.title}),y.jsx(pe,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-500 hover:bg-red-50",onClick:T=>_(C.id,T),children:y.jsx(d3,{className:"h-4 w-4"})})]})}),y.jsxs(_u,{className:"pb-2",children:[y.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:C.description||"No description"}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(s3,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Created: ",x(C.created_at)]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(o3,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Updated: ",x(C.updated_at)]})]})]})]}),y.jsx(tw,{className:"pt-3 border-t flex justify-between",children:y.jsx("div",{})})]},C.id))}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"w-16 h-16 gradient-bg rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Study Sessions Yet"}),y.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first study session to upload PDFs and start generating flashcards, quizzes, and more."}),y.jsx(pe,{className:"gradient-bg",onClick:()=>u(!0),children:"Create Your First Session"})]})]})]})}var S8=b.createContext(void 0);function Cy(n){const e=b.useContext(S8);return n||e||"ltr"}var K_="rovingFocusGroup.onEntryFocus",b8={bubbles:!1,cancelable:!0},Sy="RovingFocusGroup",[IS,I2,E8]=ix(Sy),[T8,Px]=Fs(Sy,[E8]),[A8,k8]=T8(Sy),N2=b.forwardRef((n,e)=>y.jsx(IS.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(IS.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(R8,{...n,ref:e})})}));N2.displayName=Sy;var R8=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...p}=n,m=b.useRef(null),g=Pe(e,m),w=Cy(r),[v,_]=Oo({prop:o,defaultProp:a??null,onChange:l,caller:Sy}),[x,S]=b.useState(!1),C=ii(c),T=I2(t),k=b.useRef(!1),[P,I]=b.useState(0);return b.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(K_,C),()=>N.removeEventListener(K_,C)},[C]),y.jsx(A8,{scope:t,orientation:s,dir:w,loop:i,currentTabStopId:v,onItemFocus:b.useCallback(N=>_(N),[_]),onItemShiftTab:b.useCallback(()=>S(!0),[]),onFocusableItemAdd:b.useCallback(()=>I(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>I(N=>N-1),[]),children:y.jsx(fe.div,{tabIndex:x||P===0?-1:0,"data-orientation":s,...p,ref:g,style:{outline:"none",...n.style},onMouseDown:oe(n.onMouseDown,()=>{k.current=!0}),onFocus:oe(n.onFocus,N=>{const D=!k.current;if(N.target===N.currentTarget&&D&&!x){const M=new CustomEvent(K_,b8);if(N.currentTarget.dispatchEvent(M),!M.defaultPrevented){const L=T().filter(F=>F.focusable),V=L.find(F=>F.active),G=L.find(F=>F.id===v),j=[V,G,...L].filter(Boolean).map(F=>F.ref.current);L2(j,u)}}k.current=!1}),onBlur:oe(n.onBlur,()=>S(!1))})})}),M2="RovingFocusGroupItem",D2=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:r,children:o,...a}=n,l=gl(),c=r||l,u=k8(M2,t),p=u.currentTabStopId===c,m=I2(t),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:v}=u;return b.useEffect(()=>{if(s)return g(),()=>w()},[s,g,w]),y.jsx(IS.ItemSlot,{scope:t,id:c,focusable:s,active:i,children:y.jsx(fe.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:oe(n.onMouseDown,_=>{s?u.onItemFocus(c):_.preventDefault()}),onFocus:oe(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:oe(n.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=N8(_,u.orientation,u.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let C=m().filter(T=>T.focusable).map(T=>T.ref.current);if(x==="last")C.reverse();else if(x==="prev"||x==="next"){x==="prev"&&C.reverse();const T=C.indexOf(_.currentTarget);C=u.loop?M8(C,T+1):C.slice(T+1)}setTimeout(()=>L2(C))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:v!=null}):o})})});D2.displayName=M2;var P8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I8(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function N8(n,e,t){const s=I8(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return P8[s]}function L2(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function M8(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var F2=N2,O2=D2,Ix="Tabs",[D8,bre]=Fs(Ix,[Px]),U2=Px(),[L8,nA]=D8(Ix),$2=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:i,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=Cy(a),[p,m]=Oo({prop:s,onChange:i,defaultProp:r??"",caller:Ix});return y.jsx(L8,{scope:t,baseId:gl(),value:p,onValueChange:m,orientation:o,dir:u,activationMode:l,children:y.jsx(fe.div,{dir:u,"data-orientation":o,...c,ref:e})})});$2.displayName=Ix;var B2="TabsList",V2=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...i}=n,r=nA(B2,t),o=U2(t);return y.jsx(F2,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:s,children:y.jsx(fe.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:e})})});V2.displayName=B2;var j2="TabsTrigger",z2=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:i=!1,...r}=n,o=nA(j2,t),a=U2(t),l=q2(o.baseId,s),c=W2(o.baseId,s),u=s===o.value;return y.jsx(O2,{asChild:!0,...a,focusable:!i,active:u,children:y.jsx(fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...r,ref:e,onMouseDown:oe(n.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(s):p.preventDefault()}),onKeyDown:oe(n.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(s)}),onFocus:oe(n.onFocus,()=>{const p=o.activationMode!=="manual";!u&&!i&&p&&o.onValueChange(s)})})})});z2.displayName=j2;var H2="TabsContent",G2=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:i,children:r,...o}=n,a=nA(H2,t),l=q2(a.baseId,s),c=W2(a.baseId,s),u=s===a.value,p=b.useRef(u);return b.useEffect(()=>{const m=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Go,{present:i||u,children:({present:m})=>y.jsx(fe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:p.current?"0s":void 0},children:m&&r})})});G2.displayName=H2;function q2(n,e){return`${n}-trigger-${e}`}function W2(n,e){return`${n}-content-${e}`}var F8=$2,K2=V2,Y2=z2,J2=G2;const X2=F8,sA=b.forwardRef(({className:n,...e},t)=>y.jsx(K2,{ref:t,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));sA.displayName=K2.displayName;const So=b.forwardRef(({className:n,...e},t)=>y.jsx(Y2,{ref:t,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));So.displayName=Y2.displayName;const bo=b.forwardRef(({className:n,...e},t)=>y.jsx(J2,{ref:t,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));bo.displayName=J2.displayName;const mp=({title:n,isLoading:e,error:t,children:s,generationText:i})=>e?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),y.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:i||"Processing..."})]}):t?y.jsx("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:y.jsxs("div",{className:"text-red-500 text-center",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error"}),y.jsx("p",{className:"text-sm",children:t})]})}):y.jsxs("div",{className:"h-full",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:n}),s]});var ze;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const r={};for(const o of i)r[o]=o;return r},n.getValidEnumValues=i=>{const r=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of r)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(r){return i[r]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.push(o);return r},n.find=(i,r)=>{for(const o of i)if(r(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(ze||(ze={}));var dR;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(dR||(dR={}));const re=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),aa=n=>{switch(typeof n){case"undefined":return re.undefined;case"string":return re.string;case"number":return Number.isNaN(n)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(n)?re.array:n===null?re.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?re.promise:typeof Map<"u"&&n instanceof Map?re.map:typeof Set<"u"&&n instanceof Set?re.set:typeof Date<"u"&&n instanceof Date?re.date:re.object;default:return re.unknown}},K=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Vo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let a=s,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),s}static assert(e){if(!(e instanceof Vo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Vo.create=n=>new Vo(n);const NS=(n,e)=>{let t;switch(n.code){case K.invalid_type:n.received===re.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ze.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${ze.joinValues(n.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ze.joinValues(n.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${ze.joinValues(n.options)}, received '${n.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ze.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case K.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case K.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,ze.assertNever(n)}return{message:t}};let O8=NS;function U8(){return O8}const $8=n=>{const{data:e,path:t,errorMaps:s,issueData:i}=n,r=[...t,...i.path||[]],o={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let a="";const l=s.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:r,message:a}};function Q(n,e){const t=U8(),s=$8({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===NS?void 0:NS].filter(i=>!!i)});n.common.issues.push(s)}class Hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return ve;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t){const r=await i.key,o=await i.value;s.push({key:r,value:o})}return Hn.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:r,value:o}=i;if(r.status==="aborted"||o.status==="aborted")return ve;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[r.value]=o.value)}return{status:e.value,value:s}}}const ve=Object.freeze({status:"aborted"}),gp=n=>({status:"dirty",value:n}),oi=n=>({status:"valid",value:n}),hR=n=>n.status==="aborted",fR=n=>n.status==="dirty",bf=n=>n.status==="valid",nw=n=>typeof Promise<"u"&&n instanceof Promise;var ae;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ae||(ae={}));class kr{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pR=(n,e)=>{if(bf(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Vo(n.common.issues);return this._error=t,this._error}}};function Ee(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??s??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:i}}class Ue{get description(){return this._def.description}_getType(e){return aa(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hn,ctx:{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(nw(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},i=this._parseSync({data:e,path:s.path,parent:s});return pR(s,i)}"~validate"(e){var s,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return bf(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(i=(s=r==null?void 0:r.message)==null?void 0:s.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>bf(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(nw(i)?i:Promise.resolve(i));return pR(s,r)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const o=e(i),a=()=>r.addIssue({code:K.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new Af({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return vl.create(this,this._def)}nullable(){return kf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Er.create(this)}promise(){return aw.create(this,this._def)}or(e){return iw.create([this,e],this._def)}and(e){return rw.create(this,e,this._def)}transform(e){return new Af({...Ee(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new FS({...Ee(this._def),innerType:this,defaultValue:t,typeName:ye.ZodDefault})}brand(){return new l9({typeName:ye.ZodBranded,type:this,...Ee(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new OS({...Ee(this._def),innerType:this,catchValue:t,typeName:ye.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return iA.create(this,e)}readonly(){return US.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const B8=/^c[^\s-]{8,}$/i,V8=/^[0-9a-z]+$/,j8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,z8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H8=/^[a-z0-9_-]{21}$/i,G8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,q8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,W8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,K8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Y_;const Y8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,J8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,X8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Q8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Z8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,e9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t9=new RegExp(`^${Q2}$`);function Z2(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function n9(n){return new RegExp(`^${Z2(n)}$`)}function s9(n){let e=`${Q2}T${Z2(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function i9(n,e){return!!((e==="v4"||!e)&&Y8.test(n)||(e==="v6"||!e)&&X8.test(n))}function r9(n,e){if(!G8.test(n))return!1;try{const[t]=n.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function o9(n,e){return!!((e==="v4"||!e)&&J8.test(n)||(e==="v6"||!e)&&Q8.test(n))}class xr extends Ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:re.string,received:r.parsedType}),ve}const s=new Hn;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),Q(i,{code:K.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),Q(i,{code:K.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,a=e.data.length<r.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Q(i,{code:K.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&Q(i,{code:K.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")W8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"email",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")Y_||(Y_=new RegExp(K8,"u")),Y_.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"emoji",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")z8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"uuid",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")H8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"nanoid",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"cuid",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")V8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"cuid2",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")j8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"ulid",code:K.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Q(i,{validation:"url",code:K.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"regex",code:K.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?s9(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?t9.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?n9(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{code:K.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?q8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"duration",code:K.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?i9(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"ip",code:K.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?r9(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"jwt",code:K.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?o9(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"cidr",code:K.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?Z8.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"base64",code:K.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?e9.test(e.data)||(i=this._getOrReturnCtx(e,i),Q(i,{validation:"base64url",code:K.invalid_string,message:r.message}),s.dirty()):ze.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:K.invalid_string,...ae.errToObj(s)})}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ae.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ae.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ae.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ae.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ae.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ae.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ae.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ae.errToObj(t)})}nonempty(e){return this.min(1,ae.errToObj(e))}trim(){return new xr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}xr.create=n=>new xr({checks:[],typeName:ye.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Ee(n)});function a9(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,r=Number.parseInt(n.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return r%o/10**i}class Mu extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:re.number,received:r.parsedType}),ve}let s;const i=new Hn;for(const r of this._def.checks)r.kind==="int"?ze.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?a9(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.not_finite,message:r.message}),i.dirty()):ze.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ae.toString(t))}setLimit(e,t,s,i){return new Mu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ae.toString(i)}]})}_addCheck(e){return new Mu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ae.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Mu.create=n=>new Mu({checks:[],typeName:ye.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ee(n)});class Du extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==re.bigint)return this._getInvalidInput(e);let s;const i=new Hn;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):ze.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Q(t,{code:K.invalid_type,expected:re.bigint,received:t.parsedType}),ve}gte(e,t){return this.setLimit("min",e,!0,ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ae.toString(t))}setLimit(e,t,s,i){return new Du({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ae.toString(i)}]})}_addCheck(e){return new Du({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Du.create=n=>new Du({checks:[],typeName:ye.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Ee(n)});class sw extends Ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.boolean,received:s.parsedType}),ve}return oi(e.data)}}sw.create=n=>new sw({typeName:ye.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ee(n)});class Ef extends Ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:re.date,received:r.parsedType}),ve}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_date}),ve}const s=new Hn;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),Q(i,{code:K.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),Q(i,{code:K.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):ze.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ef({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ae.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ae.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ef.create=n=>new Ef({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ye.ZodDate,...Ee(n)});class mR extends Ue{_parse(e){if(this._getType(e)!==re.symbol){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.symbol,received:s.parsedType}),ve}return oi(e.data)}}mR.create=n=>new mR({typeName:ye.ZodSymbol,...Ee(n)});class gR extends Ue{_parse(e){if(this._getType(e)!==re.undefined){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.undefined,received:s.parsedType}),ve}return oi(e.data)}}gR.create=n=>new gR({typeName:ye.ZodUndefined,...Ee(n)});class yR extends Ue{_parse(e){if(this._getType(e)!==re.null){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.null,received:s.parsedType}),ve}return oi(e.data)}}yR.create=n=>new yR({typeName:ye.ZodNull,...Ee(n)});class vR extends Ue{constructor(){super(...arguments),this._any=!0}_parse(e){return oi(e.data)}}vR.create=n=>new vR({typeName:ye.ZodAny,...Ee(n)});class MS extends Ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oi(e.data)}}MS.create=n=>new MS({typeName:ye.ZodUnknown,...Ee(n)});class bl extends Ue{_parse(e){const t=this._getOrReturnCtx(e);return Q(t,{code:K.invalid_type,expected:re.never,received:t.parsedType}),ve}}bl.create=n=>new bl({typeName:ye.ZodNever,...Ee(n)});class wR extends Ue{_parse(e){if(this._getType(e)!==re.undefined){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.void,received:s.parsedType}),ve}return oi(e.data)}}wR.create=n=>new wR({typeName:ye.ZodVoid,...Ee(n)});class Er extends Ue{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==re.array)return Q(t,{code:K.invalid_type,expected:re.array,received:t.parsedType}),ve;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Q(t,{code:o?K.too_big:K.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Q(t,{code:K.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Q(t,{code:K.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new kr(t,o,t.path,a)))).then(o=>Hn.mergeArray(s,o));const r=[...t.data].map((o,a)=>i.type._parseSync(new kr(t,o,t.path,a)));return Hn.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new Er({...this._def,minLength:{value:e,message:ae.toString(t)}})}max(e,t){return new Er({...this._def,maxLength:{value:e,message:ae.toString(t)}})}length(e,t){return new Er({...this._def,exactLength:{value:e,message:ae.toString(t)}})}nonempty(e){return this.min(1,e)}}Er.create=(n,e)=>new Er({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Ee(e)});function hd(n){if(n instanceof Mt){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=vl.create(hd(s))}return new Mt({...n._def,shape:()=>e})}else return n instanceof Er?new Er({...n._def,type:hd(n.element)}):n instanceof vl?vl.create(hd(n.unwrap())):n instanceof kf?kf.create(hd(n.unwrap())):n instanceof Lu?Lu.create(n.items.map(e=>hd(e))):n}class Mt extends Ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ze.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==re.object){const c=this._getOrReturnCtx(e);return Q(c,{code:K.invalid_type,expected:re.object,received:c.parsedType}),ve}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bl&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=r[c],p=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new kr(i,p,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof bl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Q(i,{code:K.unrecognized_keys,keys:a}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const p=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new kr(i,p,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const p=await u.key,m=await u.value;c.push({key:p,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>Hn.mergeObjectSync(s,c)):Hn.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return ae.errToObj,new Mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var r,o;const i=((o=(r=this._def).errorMap)==null?void 0:o.call(r,t,s).message)??s.defaultError;return t.code==="unrecognized_keys"?{message:ae.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const t={};for(const s of ze.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new Mt({...this._def,shape:()=>t})}omit(e){const t={};for(const s of ze.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new Mt({...this._def,shape:()=>t})}deepPartial(){return hd(this)}partial(e){const t={};for(const s of ze.objectKeys(this.shape)){const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}return new Mt({...this._def,shape:()=>t})}required(e){const t={};for(const s of ze.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof vl;)r=r._def.innerType;t[s]=r}return new Mt({...this._def,shape:()=>t})}keyof(){return eF(ze.objectKeys(this.shape))}}Mt.create=(n,e)=>new Mt({shape:()=>n,unknownKeys:"strip",catchall:bl.create(),typeName:ye.ZodObject,...Ee(e)});Mt.strictCreate=(n,e)=>new Mt({shape:()=>n,unknownKeys:"strict",catchall:bl.create(),typeName:ye.ZodObject,...Ee(e)});Mt.lazycreate=(n,e)=>new Mt({shape:n,unknownKeys:"strip",catchall:bl.create(),typeName:ye.ZodObject,...Ee(e)});class iw extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(r){for(const a of r)if(a.result.status==="valid")return a.result;for(const a of r)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=r.map(a=>new Vo(a.ctx.common.issues));return Q(t,{code:K.invalid_union,unionErrors:o}),ve}if(t.common.async)return Promise.all(s.map(async r=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let r;const o=[];for(const l of s){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!r&&(r={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const a=o.map(l=>new Vo(l));return Q(t,{code:K.invalid_union,unionErrors:a}),ve}}get options(){return this._def.options}}iw.create=(n,e)=>new iw({options:n,typeName:ye.ZodUnion,...Ee(e)});function DS(n,e){const t=aa(n),s=aa(e);if(n===e)return{valid:!0,data:n};if(t===re.object&&s===re.object){const i=ze.objectKeys(e),r=ze.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of r){const l=DS(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===re.array&&s===re.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<n.length;r++){const o=n[r],a=e[r],l=DS(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===re.date&&s===re.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class rw extends Ue{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(r,o)=>{if(hR(r)||hR(o))return ve;const a=DS(r.value,o.value);return a.valid?((fR(r)||fR(o))&&t.dirty(),{status:t.value,value:a.data}):(Q(s,{code:K.invalid_intersection_types}),ve)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,o])=>i(r,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}rw.create=(n,e,t)=>new rw({left:n,right:e,typeName:ye.ZodIntersection,...Ee(t)});class Lu extends Ue{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.array)return Q(s,{code:K.invalid_type,expected:re.array,received:s.parsedType}),ve;if(s.data.length<this._def.items.length)return Q(s,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&s.data.length>this._def.items.length&&(Q(s,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new kr(s,o,s.path,a)):null}).filter(o=>!!o);return s.common.async?Promise.all(r).then(o=>Hn.mergeArray(t,o)):Hn.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Lu({...this._def,rest:e})}}Lu.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lu({items:n,typeName:ye.ZodTuple,rest:null,...Ee(e)})};class ow extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.object)return Q(s,{code:K.invalid_type,expected:re.object,received:s.parsedType}),ve;const i=[],r=this._def.keyType,o=this._def.valueType;for(const a in s.data)i.push({key:r._parse(new kr(s,a,s.path,a)),value:o._parse(new kr(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?Hn.mergeObjectAsync(t,i):Hn.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Ue?new ow({keyType:e,valueType:t,typeName:ye.ZodRecord,...Ee(s)}):new ow({keyType:xr.create(),valueType:e,typeName:ye.ZodRecord,...Ee(t)})}}class xR extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.map)return Q(s,{code:K.invalid_type,expected:re.map,received:s.parsedType}),ve;const i=this._def.keyType,r=this._def.valueType,o=[...s.data.entries()].map(([a,l],c)=>({key:i._parse(new kr(s,a,s.path,[c,"key"])),value:r._parse(new kr(s,l,s.path,[c,"value"]))}));if(s.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return ve;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return ve;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}xR.create=(n,e,t)=>new xR({valueType:e,keyType:n,typeName:ye.ZodMap,...Ee(t)});class Cm extends Ue{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.set)return Q(s,{code:K.invalid_type,expected:re.set,received:s.parsedType}),ve;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Q(s,{code:K.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Q(s,{code:K.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return ve;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...s.data.values()].map((l,c)=>r._parse(new kr(s,l,s.path,c)));return s.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Cm({...this._def,minSize:{value:e,message:ae.toString(t)}})}max(e,t){return new Cm({...this._def,maxSize:{value:e,message:ae.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Cm.create=(n,e)=>new Cm({valueType:n,minSize:null,maxSize:null,typeName:ye.ZodSet,...Ee(e)});class LS extends Ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}LS.create=(n,e)=>new LS({getter:n,typeName:ye.ZodLazy,...Ee(e)});class _R extends Ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Q(t,{received:t.data,code:K.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}_R.create=(n,e)=>new _R({value:n,typeName:ye.ZodLiteral,...Ee(e)});function eF(n,e){return new Tf({values:n,typeName:ye.ZodEnum,...Ee(e)})}class Tf extends Ue{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return Q(t,{expected:ze.joinValues(s),received:t.parsedType,code:K.invalid_type}),ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return Q(t,{received:t.data,code:K.invalid_enum_value,options:s}),ve}return oi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Tf.create(e,{...this._def,...t})}exclude(e,t=this._def){return Tf.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Tf.create=eF;class CR extends Ue{_parse(e){const t=ze.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==re.string&&s.parsedType!==re.number){const i=ze.objectValues(t);return Q(s,{expected:ze.joinValues(i),received:s.parsedType,code:K.invalid_type}),ve}if(this._cache||(this._cache=new Set(ze.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ze.objectValues(t);return Q(s,{received:s.data,code:K.invalid_enum_value,options:i}),ve}return oi(e.data)}get enum(){return this._def.values}}CR.create=(n,e)=>new CR({values:n,typeName:ye.ZodNativeEnum,...Ee(e)});class aw extends Ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==re.promise&&t.common.async===!1)return Q(t,{code:K.invalid_type,expected:re.promise,received:t.parsedType}),ve;const s=t.parsedType===re.promise?t.data:Promise.resolve(t.data);return oi(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}aw.create=(n,e)=>new aw({type:n,typeName:ye.ZodPromise,...Ee(e)});class Af extends Ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:o=>{Q(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const o=i.transform(s.data,r);if(s.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return ve;const l=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return l.status==="aborted"?ve:l.status==="dirty"||t.value==="dirty"?gp(l.value):l});{if(t.value==="aborted")return ve;const a=this._def.schema._parseSync({data:o,path:s.path,parent:s});return a.status==="aborted"?ve:a.status==="dirty"||t.value==="dirty"?gp(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,r);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?ve:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?ve:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!bf(o))return ve;const a=i.transform(o.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>bf(o)?Promise.resolve(i.transform(o.value,r)).then(a=>({status:t.value,value:a})):ve);ze.assertNever(i)}}Af.create=(n,e,t)=>new Af({schema:n,typeName:ye.ZodEffects,effect:e,...Ee(t)});Af.createWithPreprocess=(n,e,t)=>new Af({schema:e,effect:{type:"preprocess",transform:n},typeName:ye.ZodEffects,...Ee(t)});class vl extends Ue{_parse(e){return this._getType(e)===re.undefined?oi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vl.create=(n,e)=>new vl({innerType:n,typeName:ye.ZodOptional,...Ee(e)});class kf extends Ue{_parse(e){return this._getType(e)===re.null?oi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kf.create=(n,e)=>new kf({innerType:n,typeName:ye.ZodNullable,...Ee(e)});class FS extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===re.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}FS.create=(n,e)=>new FS({innerType:n,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class OS extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return nw(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Vo(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Vo(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}OS.create=(n,e)=>new OS({innerType:n,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class SR extends Ue{_parse(e){if(this._getType(e)!==re.nan){const s=this._getOrReturnCtx(e);return Q(s,{code:K.invalid_type,expected:re.nan,received:s.parsedType}),ve}return{status:"valid",value:e.data}}}SR.create=n=>new SR({typeName:ye.ZodNaN,...Ee(n)});class l9 extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class iA extends Ue{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?ve:r.status==="dirty"?(t.dirty(),gp(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?ve:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new iA({in:e,out:t,typeName:ye.ZodPipeline})}}class US extends Ue{_parse(e){const t=this._def.innerType._parse(e),s=i=>(bf(i)&&(i.value=Object.freeze(i.value)),i);return nw(t)?t.then(i=>s(i)):s(t)}unwrap(){return this._def.innerType}}US.create=(n,e)=>new US({innerType:n,typeName:ye.ZodReadonly,...Ee(e)});var ye;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ye||(ye={}));const Vl=xr.create,bR=Mu.create;Du.create;const c9=sw.create;Ef.create;const ER=MS.create;bl.create;const yp=Er.create,u9=Mt.create,d9=iw.create;rw.create;Lu.create;const h9=ow.create,f9=LS.create,p9=Tf.create;aw.create;vl.create;kf.create;const cd={string:n=>xr.create({...n,coerce:!0}),number:n=>Mu.create({...n,coerce:!0}),boolean:n=>sw.create({...n,coerce:!0}),bigint:n=>Du.create({...n,coerce:!0}),date:n=>Ef.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let m9,g9;function y9(){return{geminiUrl:m9,vertexUrl:g9}}function v9(n,e,t){var s,i,r;if(!(!((s=n.httpOptions)===null||s===void 0)&&s.baseUrl)){const o=y9();return n.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(r=o.geminiUrl)!==null&&r!==void 0?r:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wu{}function ue(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];return r!=null?String(r):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(n,e,t){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const u=l[c];f(u,e.slice(r+1),t[c])}else for(const c of l)f(c,e.slice(r+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];f(l[0],e.slice(r+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const s=e[e.length-1],i=n[s];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else n[s]=t}function h(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const s=e[t];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in n){const r=n[i];return Array.isArray(r)?r.map(o=>h(o,e.slice(t+1))):void 0}else return}else n=n[s]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var TR;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(TR||(TR={}));var AR;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(AR||(AR={}));var _r;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_r||(_r={}));var kR;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(kR||(kR={}));var RR;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(RR||(RR={}));var PR;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(PR||(PR={}));var IR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(IR||(IR={}));var NR;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(NR||(NR={}));var MR;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(MR||(MR={}));var DR;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(DR||(DR={}));var LR;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(LR||(LR={}));var FR;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(FR||(FR={}));var OR;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(OR||(OR={}));var UR;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(UR||(UR={}));var $R;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})($R||($R={}));var BR;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(BR||(BR={}));var lw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(lw||(lw={}));var VR;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(VR||(VR={}));var $S;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($S||($S={}));var jR;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jR||(jR={}));var zR;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(zR||(zR={}));var HR;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(HR||(HR={}));var GR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(GR||(GR={}));var qR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(qR||(qR={}));var WR;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(WR||(WR={}));var KR;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(KR||(KR={}));var YR;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(YR||(YR={}));var JR;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(JR||(JR={}));var XR;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(XR||(XR={}));var QR;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(QR||(QR={}));var ZR;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ZR||(ZR={}));var eP;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(eP||(eP={}));var tP;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(tP||(tP={}));var nP;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(nP||(nP={}));var sP;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(sP||(sP={}));var iP;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iP||(iP={}));var rP;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rP||(rP={}));var oP;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(oP||(oP={}));var aP;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aP||(aP={}));var lP;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(lP||(lP={}));var cP;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cP||(cP={}));var Nd;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Nd||(Nd={}));class BS{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ip{get text(){var e,t,s,i,r,o,a,l;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const p=[];for(const m of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,w]of Object.entries(m))g!=="text"&&g!=="thought"&&(w!==null||w!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,t,s,i,r,o,a,l;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const p of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,s,i,r,o,a,l;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,s,i,r,o,a,l,c;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,s,i,r,o,a,l,c;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class uP{}class dP{}class w9{}class x9{}class hP{}class fP{}class pP{}class _9{}class mP{}class gP{}class yP{}class C9{}class S9{}class b9{}class vP{}class E9{get text(){var e,t,s;let i="",r=!1;const o=[];for(const a of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var e,t,s;let i="";const r=[];for(const o of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&r.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class T9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tF(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function nF(n){return Array.isArray(n)?n.map(e=>cw(e)):[cw(n)]}function cw(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sF(n){const e=cw(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iF(n){const e=cw(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wP(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function rF(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>wP(e)):[wP(n)]}function VS(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xP(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function _P(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function An(n){if(n==null)throw new Error("ContentUnion is required");return VS(n)?n:{role:"user",parts:rF(n)}}function oF(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=An(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=An(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>An(t)):[An(e)]}function Zs(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xP(n)||_P(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[An(n)]}const e=[],t=[],s=VS(n[0]);for(const i of n){const r=VS(i);if(r!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(i);else{if(xP(i)||_P(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return s||e.push({role:"user",parts:rF(t)}),e}const A9=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),CP=p9(["string","number","integer","object","array","boolean","null"]),k9=d9([CP,yp(CP)]);function R9(n=!0){const e=f9(()=>{const t=u9({type:k9.optional(),format:Vl().optional(),title:Vl().optional(),description:Vl().optional(),default:ER().optional(),items:e.optional(),minItems:cd.string().optional(),maxItems:cd.string().optional(),enum:yp(ER()).optional(),properties:h9(Vl(),e).optional(),required:yp(Vl()).optional(),minProperties:cd.string().optional(),maxProperties:cd.string().optional(),propertyOrdering:yp(Vl()).optional(),minimum:bR().optional(),maximum:bR().optional(),minLength:cd.string().optional(),maxLength:cd.string().optional(),pattern:Vl().optional(),anyOf:yp(e).optional(),additionalProperties:c9().optional()});return n?t.strict():t});return e}function P9(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(_r).includes(t[0].toUpperCase())?t[0].toUpperCase():_r.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(_r).includes(s.toUpperCase())?s.toUpperCase():_r.TYPE_UNSPECIFIED})}}function qd(n){const e={},t=["items"],s=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&P9(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(_r).includes(a.toUpperCase())?a.toUpperCase():_r.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=qd(a);else if(s.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(qd(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=qd(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Sm(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=R9().parse(n);return qd(e)}else return qd(n)}function rA(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function oA(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Bf(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=Sm(e.parameters)),e.response&&(e.response=Sm(e.response));return n}function Vf(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function I9(n,e,t,s=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function Wo(n,e){if(typeof e!="string")throw new Error("name must be a string");return I9(n,e,"cachedContents")}function aF(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ko(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function N9(n){return n!=null&&typeof n=="object"&&"name"in n}function M9(n){return n!=null&&typeof n=="object"&&"video"in n}function D9(n){return n!=null&&typeof n=="object"&&"uri"in n}function lF(n){var e;let t;if(N9(n)&&(t=n.name),!(D9(n)&&(t=n.uri,t===void 0))&&!(M9(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function cF(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function uF(n){for(const e of["models","tunedModels","publisherModels"])if(L9(n,e))return n[e];return[]}function L9(n,e){return n!==null&&typeof n=="object"&&e in n}function F9(n,e={}){const t=n,s={name:t.name,description:t.description,parameters:qd(Nx(t.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function O9(n,e={}){const t=[],s=new Set;for(const i of n){const r=i.name;if(s.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);s.add(r);const o=F9(i,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function U9(n){const e=[];for(const t of n)e.push(Nx(t));return e}function $9(n){const e={};for(const[t,s]of Object.entries(n)){const i=s;e[t]=Nx(i)}return e}function Nx(n){const e=new Set(["items"]),t=new Set(["anyOf"]),s=new Set(["properties"]),i={};for(const[r,o]of Object.entries(n))if(e.has(r))i[r]=Nx(o);else if(t.has(r))i[r]=U9(o);else if(s.has(r))i[r]=$9(o);else if(r==="type"){const a=o.toUpperCase();i[r]=Object.values(_r).includes(a)?a:_r.TYPE_UNSPECIFIED}else A9.has(r)&&(i[r]=o);return i}function dF(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function B9(n){const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jf(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function hF(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V9(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function j9(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function z9(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function H9(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],V9(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],j9(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],z9(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function fF(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>H9(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function G9(n){const e={},t=h(n,["anyOf"]);t!=null&&f(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&f(e,["default"],s);const i=h(n,["description"]);i!=null&&f(e,["description"],i);const r=h(n,["enum"]);r!=null&&f(e,["enum"],r);const o=h(n,["example"]);o!=null&&f(e,["example"],o);const a=h(n,["format"]);a!=null&&f(e,["format"],a);const l=h(n,["items"]);l!=null&&f(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&f(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&f(e,["maxLength"],u);const p=h(n,["maxProperties"]);p!=null&&f(e,["maxProperties"],p);const m=h(n,["maximum"]);m!=null&&f(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&f(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&f(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&f(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&f(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&f(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&f(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&f(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&f(e,["propertyOrdering"],T);const k=h(n,["required"]);k!=null&&f(e,["required"],k);const P=h(n,["title"]);P!=null&&f(e,["title"],P);const I=h(n,["type"]);return I!=null&&f(e,["type"],I),e}function q9(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&f(e,["category"],t);const s=h(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function W9(n){const e={},t=h(n,["behavior"]);t!=null&&f(e,["behavior"],t);const s=h(n,["description"]);s!=null&&f(e,["description"],s);const i=h(n,["name"]);i!=null&&f(e,["name"],i);const r=h(n,["parameters"]);r!=null&&f(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&f(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function K9(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function Y9(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],K9(t)),e}function J9(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function X9(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],J9(t)),e}function Q9(){return{}}function Z9(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>W9(c))),f(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],Y9(s));const i=h(n,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],X9(i)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&f(e,["urlContext"],Q9());const o=h(n,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&f(e,["computerUse"],a),e}function e7(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&f(e,["allowedFunctionNames"],s),e}function t7(n){const e={},t=h(n,["latitude"]);t!=null&&f(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&f(e,["longitude"],s),e}function n7(n){const e={},t=h(n,["latLng"]);t!=null&&f(e,["latLng"],t7(t));const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function s7(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],e7(t));const s=h(n,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],n7(s)),e}function i7(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function pF(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],i7(t)),e}function r7(n){const e={},t=h(n,["speaker"]);t!=null&&f(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&f(e,["voiceConfig"],pF(s)),e}function o7(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>r7(i))),f(e,["speakerVoiceConfigs"],s)}return e}function a7(n){const e={},t=h(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],pF(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&f(e,["multiSpeakerVoiceConfig"],o7(s));const i=h(n,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function l7(n){const e={},t=h(n,["includeThoughts"]);t!=null&&f(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&f(e,["thinkingBudget"],s),e}function c7(n,e,t){const s={},i=h(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],fF(An(i)));const r=h(e,["temperature"]);r!=null&&f(s,["temperature"],r);const o=h(e,["topP"]);o!=null&&f(s,["topP"],o);const a=h(e,["topK"]);a!=null&&f(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&f(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&f(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&f(s,["stopSequences"],u);const p=h(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const m=h(e,["logprobs"]);m!=null&&f(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&f(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&f(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&f(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&f(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&f(s,["responseSchema"],G9(Sm(x)));const S=h(e,["responseJsonSchema"]);if(S!=null&&f(s,["responseJsonSchema"],S),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(t!==void 0&&C!=null){let L=C;Array.isArray(L)&&(L=L.map(V=>q9(V))),f(t,["safetySettings"],L)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let L=Vf(T);Array.isArray(L)&&(L=L.map(V=>Z9(Bf(V)))),f(t,["tools"],L)}const k=h(e,["toolConfig"]);if(t!==void 0&&k!=null&&f(t,["toolConfig"],s7(k)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&f(t,["cachedContent"],Wo(n,P));const I=h(e,["responseModalities"]);I!=null&&f(s,["responseModalities"],I);const N=h(e,["mediaResolution"]);N!=null&&f(s,["mediaResolution"],N);const D=h(e,["speechConfig"]);if(D!=null&&f(s,["speechConfig"],a7(rA(D))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);return M!=null&&f(s,["thinkingConfig"],l7(M)),s}function u7(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["request","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>fF(a))),f(t,["request","contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["request","generationConfig"],c7(n,r,t)),t}function d7(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&f(t,["fileName"],s);const i=h(e,["inlinedRequests"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>u7(n,o))),f(t,["requests","requests"],r)}return t}function h7(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function f7(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["src"]);i!=null&&f(t,["batch","inputConfig"],d7(n,dF(n,i)));const r=h(e,["config"]);return r!=null&&f(t,["config"],h7(r,t)),t}function p7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function m7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function g7(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function y7(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],g7(t,e)),e}function v7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function w7(n){const e={},t=h(n,["format"]);t!=null&&f(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const i=h(n,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function x7(n){const e={},t=h(n,["format"]);t!=null&&f(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const i=h(n,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function _7(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const i=h(n,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],x7(B9(i))),t}function C7(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["model"],Ye(n,s));const i=h(e,["src"]);i!=null&&f(t,["inputConfig"],w7(dF(n,i)));const r=h(e,["config"]);return r!=null&&f(t,["config"],_7(r,t)),t}function S7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function b7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function E7(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const r=h(n,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),t}function T7(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],E7(t,e)),e}function A7(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],jf(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function mF(){return{}}function k7(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function R7(n){const e={},t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function P7(n){const e={},t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function I7(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],k7(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],R7(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],P7(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function N7(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>I7(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function M7(n){const e={},t=h(n,["citationSources"]);return t!=null&&f(e,["citations"],t),e}function D7(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&f(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&f(e,["urlRetrievalStatus"],s),e}function L7(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>D7(i))),f(e,["urlMetadata"],s)}return e}function F7(n){const e={},t=h(n,["content"]);t!=null&&f(e,["content"],N7(t));const s=h(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],M7(s));const i=h(n,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const r=h(n,["finishReason"]);r!=null&&f(e,["finishReason"],r);const o=h(n,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],L7(o));const a=h(n,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&f(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&f(e,["logprobsResult"],u);const p=h(n,["safetyRatings"]);return p!=null&&f(e,["safetyRatings"],p),e}function O7(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>F7(a))),f(e,["candidates"],o)}const s=h(n,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const i=h(n,["promptFeedback"]);i!=null&&f(e,["promptFeedback"],i);const r=h(n,["usageMetadata"]);return r!=null&&f(e,["usageMetadata"],r),e}function U7(n){const e={},t=h(n,["response"]);return t!=null&&f(e,["response"],O7(t)),h(n,["error"])!=null&&f(e,["error"],mF()),e}function $7(n){const e={},t=h(n,["responsesFile"]);t!=null&&f(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>U7(r))),f(e,["inlinedResponses"],i)}return e}function jS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["metadata","state"]);i!=null&&f(e,["state"],hF(i));const r=h(n,["metadata","createTime"]);r!=null&&f(e,["createTime"],r);const o=h(n,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);const a=h(n,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=h(n,["metadata","model"]);l!=null&&f(e,["model"],l);const c=h(n,["metadata","output"]);return c!=null&&f(e,["dest"],$7(c)),e}function B7(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>jS(r))),f(e,["batchJobs"],i)}return e}function V7(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["done"]);return s!=null&&f(e,["done"],s),h(n,["error"])!=null&&f(e,["error"],mF()),e}function gF(n){const e={},t=h(n,["details"]);t!=null&&f(e,["details"],t);const s=h(n,["code"]);s!=null&&f(e,["code"],s);const i=h(n,["message"]);return i!=null&&f(e,["message"],i),e}function j7(n){const e={},t=h(n,["instancesFormat"]);t!=null&&f(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const i=h(n,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function z7(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&f(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const i=h(n,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function zS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["state"]);i!=null&&f(e,["state"],hF(i));const r=h(n,["error"]);r!=null&&f(e,["error"],gF(r));const o=h(n,["createTime"]);o!=null&&f(e,["createTime"],o);const a=h(n,["startTime"]);a!=null&&f(e,["startTime"],a);const l=h(n,["endTime"]);l!=null&&f(e,["endTime"],l);const c=h(n,["updateTime"]);c!=null&&f(e,["updateTime"],c);const u=h(n,["model"]);u!=null&&f(e,["model"],u);const p=h(n,["inputConfig"]);p!=null&&f(e,["src"],j7(p));const m=h(n,["outputConfig"]);return m!=null&&f(e,["dest"],z7(m)),e}function H7(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>zS(r))),f(e,["batchJobs"],i)}return e}function G7(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["done"]);s!=null&&f(e,["done"],s);const i=h(n,["error"]);return i!=null&&f(e,["error"],gF(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fu;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Fu||(Fu={}));class by{constructor(e,t,s,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,i)}init(e,t,s){var i,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};s?typeof s=="object"?o=Object.assign({},s):o=s:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q7 extends Wu{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const i=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${i}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new by(Fu.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}async createInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=C7(this.apiClient,e);return a=ue("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>zS(u))}else{const c=f7(this.apiClient,e);return a=ue("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>jS(u))}}async get(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=S7(this.apiClient,e);return a=ue("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>zS(u))}else{const c=p7(this.apiClient,e);return a=ue("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>jS(u))}}async cancel(e){var t,s,i,r;let o="",a={};if(this.apiClient.isVertexAI()){const l=b7(this.apiClient,e);o=ue("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const l=m7(this.apiClient,e);o=ue("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=T7(e);return a=ue("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=H7(u),m=new vP;return Object.assign(m,p),m})}else{const c=y7(e);return a=ue("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=B7(u),m=new vP;return Object.assign(m,p),m})}}async delete(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=A7(this.apiClient,e);return a=ue("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>G7(u))}else{const c=v7(this.apiClient,e);return a=ue("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>V7(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W7(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function K7(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Y7(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function J7(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],W7(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],K7(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],Y7(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function SP(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>J7(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function X7(n){const e={},t=h(n,["behavior"]);t!=null&&f(e,["behavior"],t);const s=h(n,["description"]);s!=null&&f(e,["description"],s);const i=h(n,["name"]);i!=null&&f(e,["name"],i);const r=h(n,["parameters"]);r!=null&&f(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&f(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function Q7(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function Z7(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],Q7(t)),e}function eK(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function tK(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],eK(t)),e}function nK(){return{}}function sK(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>X7(c))),f(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],Z7(s));const i=h(n,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],tK(i)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&f(e,["urlContext"],nK());const o=h(n,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&f(e,["computerUse"],a),e}function iK(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&f(e,["allowedFunctionNames"],s),e}function rK(n){const e={},t=h(n,["latitude"]);t!=null&&f(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&f(e,["longitude"],s),e}function oK(n){const e={},t=h(n,["latLng"]);t!=null&&f(e,["latLng"],rK(t));const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function aK(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],iK(t));const s=h(n,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],oK(s)),e}function lK(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const i=h(n,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const r=h(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let u=Zs(o);Array.isArray(u)&&(u=u.map(p=>SP(p))),f(e,["contents"],u)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],SP(An(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(p=>sK(p))),f(e,["tools"],u)}const c=h(n,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],aK(c)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function cK(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["model"],tF(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],lK(i,t)),t}function uK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function dK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function hK(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const i=h(n,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),t}function fK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],hK(i,t)),t}function pK(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function mK(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],pK(t,e)),e}function gK(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function yK(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["data"]);s!=null&&f(e,["data"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function vK(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&f(e,["fileUri"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function wK(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],gK(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],yK(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],vK(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function bP(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>wK(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function xK(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&f(e,["description"],t);const s=h(n,["name"]);s!=null&&f(e,["name"],s);const i=h(n,["parameters"]);i!=null&&f(e,["parameters"],i);const r=h(n,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=h(n,["response"]);o!=null&&f(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function _K(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function CK(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],_K(t)),e}function SK(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function bK(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],SK(t)),e}function EK(){return{}}function TK(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&f(e,["apiKeyString"],t),e}function AK(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&f(e,["apiKeyConfig"],TK(t));const s=h(n,["authType"]);s!=null&&f(e,["authType"],s);const i=h(n,["googleServiceAccountConfig"]);i!=null&&f(e,["googleServiceAccountConfig"],i);const r=h(n,["httpBasicAuthConfig"]);r!=null&&f(e,["httpBasicAuthConfig"],r);const o=h(n,["oauthConfig"]);o!=null&&f(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&f(e,["oidcConfig"],a),e}function kK(n){const e={},t=h(n,["authConfig"]);return t!=null&&f(e,["authConfig"],AK(t)),e}function RK(){return{}}function PK(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>xK(m))),f(e,["functionDeclarations"],p)}const s=h(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const i=h(n,["googleSearch"]);i!=null&&f(e,["googleSearch"],CK(i));const r=h(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],bK(r)),h(n,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],EK());const a=h(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],kK(a)),h(n,["urlContext"])!=null&&f(e,["urlContext"],RK());const c=h(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&f(e,["computerUse"],u),e}function IK(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&f(e,["allowedFunctionNames"],s),e}function NK(n){const e={},t=h(n,["latitude"]);t!=null&&f(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&f(e,["longitude"],s),e}function MK(n){const e={},t=h(n,["latLng"]);t!=null&&f(e,["latLng"],NK(t));const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function DK(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],IK(t));const s=h(n,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],MK(s)),e}function LK(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const i=h(n,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const r=h(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let p=Zs(o);Array.isArray(p)&&(p=p.map(m=>bP(m))),f(e,["contents"],p)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],bP(An(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>PK(m))),f(e,["tools"],p)}const c=h(n,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],DK(c));const u=h(n,["kmsKeyName"]);return e!==void 0&&u!=null&&f(e,["encryption_spec","kmsKeyName"],u),t}function FK(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["model"],tF(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],LK(i,t)),t}function OK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function UK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function $K(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const i=h(n,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),t}function BK(n,e){const t={},s=h(e,["name"]);s!=null&&f(t,["_url","name"],Wo(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],$K(i,t)),t}function VK(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function jK(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],VK(t,e)),e}function $v(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["model"]);i!=null&&f(e,["model"],i);const r=h(n,["createTime"]);r!=null&&f(e,["createTime"],r);const o=h(n,["updateTime"]);o!=null&&f(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&f(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function zK(){return{}}function HK(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>$v(r))),f(e,["cachedContents"],i)}return e}function Bv(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["model"]);i!=null&&f(e,["model"],i);const r=h(n,["createTime"]);r!=null&&f(e,["createTime"],r);const o=h(n,["updateTime"]);o!=null&&f(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&f(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function GK(){return{}}function qK(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>Bv(r))),f(e,["cachedContents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WK extends Wu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new by(Fu.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=FK(this.apiClient,e);return a=ue("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Bv(u))}else{const c=cK(this.apiClient,e);return a=ue("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>$v(u))}}async get(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=OK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Bv(u))}else{const c=uK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>$v(u))}}async delete(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=UK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=GK(),p=new gP;return Object.assign(p,u),p})}else{const c=dK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=zK(),p=new gP;return Object.assign(p,u),p})}}async update(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=BK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Bv(u))}else{const c=fK(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>$v(u))}}async listInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jK(e);return a=ue("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=qK(u),m=new yP;return Object.assign(m,p),m})}else{const c=mK(e);return a=ue("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=HK(u),m=new yP;return Object.assign(m,p),m})}}}function EP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function Wd(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(w){return Promise.resolve(w).then(g,p)}}function a(g,w){s[g]&&(i[g]=function(v){return new Promise(function(_,x){r.push([g,v,_,x])>1||l(g,v)})},w&&(i[g]=w(i[g])))}function l(g,w){try{c(s[g](w))}catch(v){m(r[0][3],v)}}function c(g){g.value instanceof at?Promise.resolve(g.value.v).then(u,p):m(r[0][2],g)}function u(g){l("next",g)}function p(g){l("throw",g)}function m(g,w){g(w),r.shift(),r.length&&l(r[0][0],r[0][1])}}function Zp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof EP=="function"?EP(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),i(a,l,o.done,o.value)})}}function i(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KK(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:yF(t)}function yF(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function YK(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TP(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const i=[];let r=!0;for(;s<t&&n[s].role==="model";)i.push(n[s]),r&&!yF(n[s])&&(r=!1),s++;r?e.push(...i):e.pop()}return e}class JK{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new XK(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class XK{constructor(e,t,s,i={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),YK(r)}async sendMessage(e){var t;await this.sendPromise;const s=An(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,o,a;const l=await i,c=(o=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(p))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(s,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const s=An(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const r=await i;return this.processStreamResponse(r,s)}getHistory(e=!1){const t=e?TP(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,i;return Wd(this,arguments,function*(){var o,a,l,c;const u=[];try{for(var p=!0,m=Zp(e),g;g=yield at(m.next()),o=g.done,!o;p=!0){c=g.value,p=!1;const w=c;if(KK(w)){const v=(i=(s=w.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content;v!==void 0&&u.push(v)}yield yield at(w)}}catch(w){a={error:w}}finally{try{!p&&!o&&(l=m.return)&&(yield at(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,u)})}recordHistory(e,t,s){let i=[];t.length>0&&t.every(r=>r.role!==void 0)?i=t:i.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...TP(s)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mx extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Mx.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QK(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function ZK(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],QK(t,e)),e}function eY(n){const e={},t=h(n,["details"]);t!=null&&f(e,["details"],t);const s=h(n,["message"]);s!=null&&f(e,["message"],s);const i=h(n,["code"]);return i!=null&&f(e,["code"],i),e}function tY(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=h(n,["sizeBytes"]);r!=null&&f(e,["sizeBytes"],r);const o=h(n,["createTime"]);o!=null&&f(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&f(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&f(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&f(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&f(e,["uri"],u);const p=h(n,["downloadUri"]);p!=null&&f(e,["downloadUri"],p);const m=h(n,["state"]);m!=null&&f(e,["state"],m);const g=h(n,["source"]);g!=null&&f(e,["source"],g);const w=h(n,["videoMetadata"]);w!=null&&f(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&f(e,["error"],eY(v)),e}function nY(n){const e={},t=h(n,["file"]);t!=null&&f(e,["file"],tY(t));const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function sY(n){const e={},t=h(n,["name"]);t!=null&&f(e,["_url","file"],lF(t));const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function iY(n){const e={},t=h(n,["name"]);t!=null&&f(e,["_url","file"],lF(t));const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function rY(n){const e={},t=h(n,["details"]);t!=null&&f(e,["details"],t);const s=h(n,["message"]);s!=null&&f(e,["message"],s);const i=h(n,["code"]);return i!=null&&f(e,["code"],i),e}function HS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["mimeType"]);i!=null&&f(e,["mimeType"],i);const r=h(n,["sizeBytes"]);r!=null&&f(e,["sizeBytes"],r);const o=h(n,["createTime"]);o!=null&&f(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&f(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&f(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&f(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&f(e,["uri"],u);const p=h(n,["downloadUri"]);p!=null&&f(e,["downloadUri"],p);const m=h(n,["state"]);m!=null&&f(e,["state"],m);const g=h(n,["source"]);g!=null&&f(e,["source"],g);const w=h(n,["videoMetadata"]);w!=null&&f(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&f(e,["error"],rY(v)),e}function oY(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>HS(r))),f(e,["files"],i)}return e}function aY(){return{}}function lY(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cY extends Wu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new by(Fu.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>HS(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZK(e);return r=ue("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>{const c=oY(l),u=new C9;return Object.assign(u,c),u})}}async createInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nY(e);return r=ue("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(()=>{const l=aY(),c=new S9;return Object.assign(c,l),c})}}async get(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sY(e);return r=ue("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>HS(l))}}async delete(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iY(e);return r=ue("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(()=>{const l=lY(),c=new b9;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uY(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function dY(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function vF(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],uY(t)),e}function hY(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],dY(t)),e}function fY(n){const e={},t=h(n,["speaker"]);t!=null&&f(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&f(e,["voiceConfig"],vF(s)),e}function pY(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>fY(i))),f(e,["speakerVoiceConfigs"],s)}return e}function mY(n){const e={},t=h(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],vF(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&f(e,["multiSpeakerVoiceConfig"],pY(s));const i=h(n,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function gY(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&f(e,["voiceConfig"],hY(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function yY(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function vY(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function wY(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function xY(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["data"]);s!=null&&f(e,["data"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _Y(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function CY(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&f(e,["fileUri"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function SY(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],yY(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],wY(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],_Y(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function bY(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],vY(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],xY(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],CY(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function EY(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>SY(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function TY(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>bY(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function AY(n){const e={},t=h(n,["behavior"]);t!=null&&f(e,["behavior"],t);const s=h(n,["description"]);s!=null&&f(e,["description"],s);const i=h(n,["name"]);i!=null&&f(e,["name"],i);const r=h(n,["parameters"]);r!=null&&f(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&f(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function kY(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&f(e,["description"],t);const s=h(n,["name"]);s!=null&&f(e,["name"],s);const i=h(n,["parameters"]);i!=null&&f(e,["parameters"],i);const r=h(n,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=h(n,["response"]);o!=null&&f(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function RY(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function PY(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function IY(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],RY(t)),e}function NY(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],PY(t)),e}function MY(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function DY(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function LY(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],MY(t)),e}function FY(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],DY(t)),e}function OY(){return{}}function UY(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&f(e,["apiKeyString"],t),e}function $Y(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&f(e,["apiKeyConfig"],UY(t));const s=h(n,["authType"]);s!=null&&f(e,["authType"],s);const i=h(n,["googleServiceAccountConfig"]);i!=null&&f(e,["googleServiceAccountConfig"],i);const r=h(n,["httpBasicAuthConfig"]);r!=null&&f(e,["httpBasicAuthConfig"],r);const o=h(n,["oauthConfig"]);o!=null&&f(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&f(e,["oidcConfig"],a),e}function BY(n){const e={},t=h(n,["authConfig"]);return t!=null&&f(e,["authConfig"],$Y(t)),e}function VY(){return{}}function jY(){return{}}function zY(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>AY(c))),f(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],IY(s));const i=h(n,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],LY(i)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&f(e,["urlContext"],VY());const o=h(n,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&f(e,["computerUse"],a),e}function HY(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>kY(m))),f(e,["functionDeclarations"],p)}const s=h(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const i=h(n,["googleSearch"]);i!=null&&f(e,["googleSearch"],NY(i));const r=h(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],FY(r)),h(n,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],OY());const a=h(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],BY(a)),h(n,["urlContext"])!=null&&f(e,["urlContext"],jY());const c=h(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&f(e,["computerUse"],u),e}function GY(n){const e={},t=h(n,["handle"]);if(t!=null&&f(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qY(n){const e={},t=h(n,["handle"]);t!=null&&f(e,["handle"],t);const s=h(n,["transparent"]);return s!=null&&f(e,["transparent"],s),e}function AP(){return{}}function kP(){return{}}function WY(n){const e={},t=h(n,["disabled"]);t!=null&&f(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&f(e,["startOfSpeechSensitivity"],s);const i=h(n,["endOfSpeechSensitivity"]);i!=null&&f(e,["endOfSpeechSensitivity"],i);const r=h(n,["prefixPaddingMs"]);r!=null&&f(e,["prefixPaddingMs"],r);const o=h(n,["silenceDurationMs"]);return o!=null&&f(e,["silenceDurationMs"],o),e}function KY(n){const e={},t=h(n,["disabled"]);t!=null&&f(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&f(e,["startOfSpeechSensitivity"],s);const i=h(n,["endOfSpeechSensitivity"]);i!=null&&f(e,["endOfSpeechSensitivity"],i);const r=h(n,["prefixPaddingMs"]);r!=null&&f(e,["prefixPaddingMs"],r);const o=h(n,["silenceDurationMs"]);return o!=null&&f(e,["silenceDurationMs"],o),e}function YY(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&f(e,["automaticActivityDetection"],WY(t));const s=h(n,["activityHandling"]);s!=null&&f(e,["activityHandling"],s);const i=h(n,["turnCoverage"]);return i!=null&&f(e,["turnCoverage"],i),e}function JY(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&f(e,["automaticActivityDetection"],KY(t));const s=h(n,["activityHandling"]);s!=null&&f(e,["activityHandling"],s);const i=h(n,["turnCoverage"]);return i!=null&&f(e,["turnCoverage"],i),e}function XY(n){const e={},t=h(n,["targetTokens"]);return t!=null&&f(e,["targetTokens"],t),e}function QY(n){const e={},t=h(n,["targetTokens"]);return t!=null&&f(e,["targetTokens"],t),e}function ZY(n){const e={},t=h(n,["triggerTokens"]);t!=null&&f(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&f(e,["slidingWindow"],XY(s)),e}function eJ(n){const e={},t=h(n,["triggerTokens"]);t!=null&&f(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&f(e,["slidingWindow"],QY(s)),e}function tJ(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&f(e,["proactiveAudio"],t),e}function nJ(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&f(e,["proactiveAudio"],t),e}function sJ(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const i=h(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const r=h(n,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=h(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const p=h(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],mY(oA(p)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],EY(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let k=Vf(w);Array.isArray(k)&&(k=k.map(P=>zY(Bf(P)))),f(e,["setup","tools"],k)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],GY(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","inputAudioTranscription"],AP());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],AP());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&f(e,["setup","realtimeInputConfig"],YY(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&f(e,["setup","contextWindowCompression"],ZY(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&f(e,["setup","proactivity"],tJ(T)),t}function iJ(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const i=h(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const r=h(n,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=h(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const p=h(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],gY(oA(p)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],TY(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let k=Vf(w);Array.isArray(k)&&(k=k.map(P=>HY(Bf(P)))),f(e,["setup","tools"],k)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],qY(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","inputAudioTranscription"],kP());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],kP());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&f(e,["setup","realtimeInputConfig"],JY(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&f(e,["setup","contextWindowCompression"],eJ(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&f(e,["setup","proactivity"],nJ(T)),t}function rJ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["setup","model"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],sJ(i,t)),t}function oJ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["setup","model"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],iJ(i,t)),t}function aJ(){return{}}function lJ(){return{}}function cJ(){return{}}function uJ(){return{}}function dJ(n){const e={},t=h(n,["media"]);t!=null&&f(e,["mediaChunks"],nF(t));const s=h(n,["audio"]);s!=null&&f(e,["audio"],iF(s));const i=h(n,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const r=h(n,["video"]);r!=null&&f(e,["video"],sF(r));const o=h(n,["text"]);return o!=null&&f(e,["text"],o),h(n,["activityStart"])!=null&&f(e,["activityStart"],aJ()),h(n,["activityEnd"])!=null&&f(e,["activityEnd"],cJ()),e}function hJ(n){const e={},t=h(n,["media"]);t!=null&&f(e,["mediaChunks"],nF(t));const s=h(n,["audio"]);s!=null&&f(e,["audio"],iF(s));const i=h(n,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const r=h(n,["video"]);r!=null&&f(e,["video"],sF(r));const o=h(n,["text"]);return o!=null&&f(e,["text"],o),h(n,["activityStart"])!=null&&f(e,["activityStart"],lJ()),h(n,["activityEnd"])!=null&&f(e,["activityEnd"],uJ()),e}function wF(n){const e={},t=h(n,["text"]);t!=null&&f(e,["text"],t);const s=h(n,["weight"]);return s!=null&&f(e,["weight"],s),e}function fJ(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>wF(i))),f(e,["weightedPrompts"],s)}return e}function xF(n){const e={},t=h(n,["temperature"]);t!=null&&f(e,["temperature"],t);const s=h(n,["topK"]);s!=null&&f(e,["topK"],s);const i=h(n,["seed"]);i!=null&&f(e,["seed"],i);const r=h(n,["guidance"]);r!=null&&f(e,["guidance"],r);const o=h(n,["bpm"]);o!=null&&f(e,["bpm"],o);const a=h(n,["density"]);a!=null&&f(e,["density"],a);const l=h(n,["brightness"]);l!=null&&f(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&f(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&f(e,["muteBass"],u);const p=h(n,["muteDrums"]);p!=null&&f(e,["muteDrums"],p);const m=h(n,["onlyBassAndDrums"]);return m!=null&&f(e,["onlyBassAndDrums"],m),e}function pJ(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&f(e,["musicGenerationConfig"],xF(t)),e}function _F(n){const e={},t=h(n,["model"]);return t!=null&&f(e,["model"],t),e}function CF(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>wF(i))),f(e,["weightedPrompts"],s)}return e}function GS(n){const e={},t=h(n,["setup"]);t!=null&&f(e,["setup"],_F(t));const s=h(n,["clientContent"]);s!=null&&f(e,["clientContent"],CF(s));const i=h(n,["musicGenerationConfig"]);i!=null&&f(e,["musicGenerationConfig"],xF(i));const r=h(n,["playbackControl"]);return r!=null&&f(e,["playbackControl"],r),e}function mJ(){return{}}function gJ(n){const e={},t=h(n,["sessionId"]);return t!=null&&f(e,["sessionId"],t),e}function yJ(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function vJ(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function wJ(n){const e={},t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function xJ(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["data"]);s!=null&&f(e,["data"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _J(n){const e={},t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function CJ(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&f(e,["fileUri"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function SJ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],yJ(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],wJ(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],_J(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function bJ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],vJ(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],xJ(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],CJ(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function EJ(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>SJ(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function TJ(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>bJ(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function RP(n){const e={},t=h(n,["text"]);t!=null&&f(e,["text"],t);const s=h(n,["finished"]);return s!=null&&f(e,["finished"],s),e}function PP(n){const e={},t=h(n,["text"]);t!=null&&f(e,["text"],t);const s=h(n,["finished"]);return s!=null&&f(e,["finished"],s),e}function AJ(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&f(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&f(e,["urlRetrievalStatus"],s),e}function kJ(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>AJ(i))),f(e,["urlMetadata"],s)}return e}function RJ(n){const e={},t=h(n,["modelTurn"]);t!=null&&f(e,["modelTurn"],EJ(t));const s=h(n,["turnComplete"]);s!=null&&f(e,["turnComplete"],s);const i=h(n,["interrupted"]);i!=null&&f(e,["interrupted"],i);const r=h(n,["groundingMetadata"]);r!=null&&f(e,["groundingMetadata"],r);const o=h(n,["generationComplete"]);o!=null&&f(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&f(e,["inputTranscription"],RP(a));const l=h(n,["outputTranscription"]);l!=null&&f(e,["outputTranscription"],RP(l));const c=h(n,["urlContextMetadata"]);return c!=null&&f(e,["urlContextMetadata"],kJ(c)),e}function PJ(n){const e={},t=h(n,["modelTurn"]);t!=null&&f(e,["modelTurn"],TJ(t));const s=h(n,["turnComplete"]);s!=null&&f(e,["turnComplete"],s);const i=h(n,["interrupted"]);i!=null&&f(e,["interrupted"],i);const r=h(n,["groundingMetadata"]);r!=null&&f(e,["groundingMetadata"],r);const o=h(n,["generationComplete"]);o!=null&&f(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&f(e,["inputTranscription"],PP(a));const l=h(n,["outputTranscription"]);return l!=null&&f(e,["outputTranscription"],PP(l)),e}function IJ(n){const e={},t=h(n,["id"]);t!=null&&f(e,["id"],t);const s=h(n,["args"]);s!=null&&f(e,["args"],s);const i=h(n,["name"]);return i!=null&&f(e,["name"],i),e}function NJ(n){const e={},t=h(n,["args"]);t!=null&&f(e,["args"],t);const s=h(n,["name"]);return s!=null&&f(e,["name"],s),e}function MJ(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>IJ(i))),f(e,["functionCalls"],s)}return e}function DJ(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>NJ(i))),f(e,["functionCalls"],s)}return e}function LJ(n){const e={},t=h(n,["ids"]);return t!=null&&f(e,["ids"],t),e}function FJ(n){const e={},t=h(n,["ids"]);return t!=null&&f(e,["ids"],t),e}function uv(n){const e={},t=h(n,["modality"]);t!=null&&f(e,["modality"],t);const s=h(n,["tokenCount"]);return s!=null&&f(e,["tokenCount"],s),e}function dv(n){const e={},t=h(n,["modality"]);t!=null&&f(e,["modality"],t);const s=h(n,["tokenCount"]);return s!=null&&f(e,["tokenCount"],s),e}function OJ(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const i=h(n,["responseTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const r=h(n,["toolUsePromptTokenCount"]);r!=null&&f(e,["toolUsePromptTokenCount"],r);const o=h(n,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>uv(g))),f(e,["promptTokensDetails"],m)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>uv(g))),f(e,["cacheTokensDetails"],m)}const u=h(n,["responseTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>uv(g))),f(e,["responseTokensDetails"],m)}const p=h(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>uv(g))),f(e,["toolUsePromptTokensDetails"],m)}return e}function UJ(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const i=h(n,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const r=h(n,["toolUsePromptTokenCount"]);r!=null&&f(e,["toolUsePromptTokenCount"],r);const o=h(n,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(w=>dv(w))),f(e,["promptTokensDetails"],g)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>dv(w))),f(e,["cacheTokensDetails"],g)}const u=h(n,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(w=>dv(w))),f(e,["responseTokensDetails"],g)}const p=h(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>dv(w))),f(e,["toolUsePromptTokensDetails"],g)}const m=h(n,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}function $J(n){const e={},t=h(n,["timeLeft"]);return t!=null&&f(e,["timeLeft"],t),e}function BJ(n){const e={},t=h(n,["timeLeft"]);return t!=null&&f(e,["timeLeft"],t),e}function VJ(n){const e={},t=h(n,["newHandle"]);t!=null&&f(e,["newHandle"],t);const s=h(n,["resumable"]);s!=null&&f(e,["resumable"],s);const i=h(n,["lastConsumedClientMessageIndex"]);return i!=null&&f(e,["lastConsumedClientMessageIndex"],i),e}function jJ(n){const e={},t=h(n,["newHandle"]);t!=null&&f(e,["newHandle"],t);const s=h(n,["resumable"]);s!=null&&f(e,["resumable"],s);const i=h(n,["lastConsumedClientMessageIndex"]);return i!=null&&f(e,["lastConsumedClientMessageIndex"],i),e}function zJ(n){const e={};h(n,["setupComplete"])!=null&&f(e,["setupComplete"],mJ());const s=h(n,["serverContent"]);s!=null&&f(e,["serverContent"],RJ(s));const i=h(n,["toolCall"]);i!=null&&f(e,["toolCall"],MJ(i));const r=h(n,["toolCallCancellation"]);r!=null&&f(e,["toolCallCancellation"],LJ(r));const o=h(n,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],OJ(o));const a=h(n,["goAway"]);a!=null&&f(e,["goAway"],$J(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],VJ(l)),e}function HJ(n){const e={},t=h(n,["setupComplete"]);t!=null&&f(e,["setupComplete"],gJ(t));const s=h(n,["serverContent"]);s!=null&&f(e,["serverContent"],PJ(s));const i=h(n,["toolCall"]);i!=null&&f(e,["toolCall"],DJ(i));const r=h(n,["toolCallCancellation"]);r!=null&&f(e,["toolCallCancellation"],FJ(r));const o=h(n,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],UJ(o));const a=h(n,["goAway"]);a!=null&&f(e,["goAway"],BJ(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],jJ(l)),e}function GJ(){return{}}function qJ(n){const e={},t=h(n,["text"]);t!=null&&f(e,["text"],t);const s=h(n,["weight"]);return s!=null&&f(e,["weight"],s),e}function WJ(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>qJ(i))),f(e,["weightedPrompts"],s)}return e}function KJ(n){const e={},t=h(n,["temperature"]);t!=null&&f(e,["temperature"],t);const s=h(n,["topK"]);s!=null&&f(e,["topK"],s);const i=h(n,["seed"]);i!=null&&f(e,["seed"],i);const r=h(n,["guidance"]);r!=null&&f(e,["guidance"],r);const o=h(n,["bpm"]);o!=null&&f(e,["bpm"],o);const a=h(n,["density"]);a!=null&&f(e,["density"],a);const l=h(n,["brightness"]);l!=null&&f(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&f(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&f(e,["muteBass"],u);const p=h(n,["muteDrums"]);p!=null&&f(e,["muteDrums"],p);const m=h(n,["onlyBassAndDrums"]);return m!=null&&f(e,["onlyBassAndDrums"],m),e}function YJ(n){const e={},t=h(n,["clientContent"]);t!=null&&f(e,["clientContent"],WJ(t));const s=h(n,["musicGenerationConfig"]);return s!=null&&f(e,["musicGenerationConfig"],KJ(s)),e}function JJ(n){const e={},t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);s!=null&&f(e,["mimeType"],s);const i=h(n,["sourceMetadata"]);return i!=null&&f(e,["sourceMetadata"],YJ(i)),e}function XJ(n){const e={},t=h(n,["audioChunks"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>JJ(i))),f(e,["audioChunks"],s)}return e}function QJ(n){const e={},t=h(n,["text"]);t!=null&&f(e,["text"],t);const s=h(n,["filteredReason"]);return s!=null&&f(e,["filteredReason"],s),e}function ZJ(n){const e={};h(n,["setupComplete"])!=null&&f(e,["setupComplete"],GJ());const s=h(n,["serverContent"]);s!=null&&f(e,["serverContent"],XJ(s));const i=h(n,["filteredPrompt"]);return i!=null&&f(e,["filteredPrompt"],QJ(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eX(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function tX(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nX(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function sX(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],eX(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],tX(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],nX(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function Dx(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>sX(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function iX(n){const e={},t=h(n,["anyOf"]);t!=null&&f(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&f(e,["default"],s);const i=h(n,["description"]);i!=null&&f(e,["description"],i);const r=h(n,["enum"]);r!=null&&f(e,["enum"],r);const o=h(n,["example"]);o!=null&&f(e,["example"],o);const a=h(n,["format"]);a!=null&&f(e,["format"],a);const l=h(n,["items"]);l!=null&&f(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&f(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&f(e,["maxLength"],u);const p=h(n,["maxProperties"]);p!=null&&f(e,["maxProperties"],p);const m=h(n,["maximum"]);m!=null&&f(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&f(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&f(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&f(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&f(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&f(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&f(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&f(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&f(e,["propertyOrdering"],T);const k=h(n,["required"]);k!=null&&f(e,["required"],k);const P=h(n,["title"]);P!=null&&f(e,["title"],P);const I=h(n,["type"]);return I!=null&&f(e,["type"],I),e}function rX(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&f(e,["category"],t);const s=h(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function oX(n){const e={},t=h(n,["behavior"]);t!=null&&f(e,["behavior"],t);const s=h(n,["description"]);s!=null&&f(e,["description"],s);const i=h(n,["name"]);i!=null&&f(e,["name"],i);const r=h(n,["parameters"]);r!=null&&f(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&f(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function aX(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function lX(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],aX(t)),e}function cX(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function uX(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],cX(t)),e}function dX(){return{}}function hX(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>oX(c))),f(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],lX(s));const i=h(n,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],uX(i)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&f(e,["urlContext"],dX());const o=h(n,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&f(e,["computerUse"],a),e}function fX(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&f(e,["allowedFunctionNames"],s),e}function pX(n){const e={},t=h(n,["latitude"]);t!=null&&f(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&f(e,["longitude"],s),e}function mX(n){const e={},t=h(n,["latLng"]);t!=null&&f(e,["latLng"],pX(t));const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function gX(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],fX(t));const s=h(n,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],mX(s)),e}function yX(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function SF(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],yX(t)),e}function vX(n){const e={},t=h(n,["speaker"]);t!=null&&f(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&f(e,["voiceConfig"],SF(s)),e}function wX(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>vX(i))),f(e,["speakerVoiceConfigs"],s)}return e}function xX(n){const e={},t=h(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],SF(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&f(e,["multiSpeakerVoiceConfig"],wX(s));const i=h(n,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function _X(n){const e={},t=h(n,["includeThoughts"]);t!=null&&f(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&f(e,["thinkingBudget"],s),e}function CX(n,e,t){const s={},i=h(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Dx(An(i)));const r=h(e,["temperature"]);r!=null&&f(s,["temperature"],r);const o=h(e,["topP"]);o!=null&&f(s,["topP"],o);const a=h(e,["topK"]);a!=null&&f(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&f(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&f(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&f(s,["stopSequences"],u);const p=h(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const m=h(e,["logprobs"]);m!=null&&f(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&f(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&f(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&f(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&f(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&f(s,["responseSchema"],iX(Sm(x)));const S=h(e,["responseJsonSchema"]);if(S!=null&&f(s,["responseJsonSchema"],S),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(t!==void 0&&C!=null){let L=C;Array.isArray(L)&&(L=L.map(V=>rX(V))),f(t,["safetySettings"],L)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let L=Vf(T);Array.isArray(L)&&(L=L.map(V=>hX(Bf(V)))),f(t,["tools"],L)}const k=h(e,["toolConfig"]);if(t!==void 0&&k!=null&&f(t,["toolConfig"],gX(k)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&f(t,["cachedContent"],Wo(n,P));const I=h(e,["responseModalities"]);I!=null&&f(s,["responseModalities"],I);const N=h(e,["mediaResolution"]);N!=null&&f(s,["mediaResolution"],N);const D=h(e,["speechConfig"]);if(D!=null&&f(s,["speechConfig"],xX(rA(D))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);return M!=null&&f(s,["thinkingConfig"],_X(M)),s}function IP(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>Dx(a))),f(t,["contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["generationConfig"],CX(n,r,t)),t}function SX(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const i=h(n,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const r=h(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&f(e,["requests[]","outputDimensionality"],r),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);i!=null&&f(t,["requests[]","content"],oF(n,i));const r=h(e,["config"]);r!=null&&f(t,["config"],SX(r,t));const o=h(e,["model"]);return o!==void 0&&f(t,["requests[]","model"],Ye(n,o)),t}function EX(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const i=h(n,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const r=h(n,["guidanceScale"]);if(e!==void 0&&r!=null&&f(e,["parameters","guidanceScale"],r),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const a=h(n,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=h(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const u=h(n,["language"]);e!==void 0&&u!=null&&f(e,["parameters","language"],u);const p=h(n,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=h(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function TX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const r=h(e,["config"]);return r!=null&&f(t,["config"],EX(r,t)),t}function AX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","name"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function kX(n,e,t){const s={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const r=h(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const o=h(e,["filter"]);t!==void 0&&o!=null&&f(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],cF(n,a)),s}function RX(n,e){const t={},s=h(e,["config"]);return s!=null&&f(t,["config"],kX(n,s,t)),t}function PX(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const i=h(n,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const r=h(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),t}function IX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","name"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],PX(i,t)),t}function NX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","name"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function MX(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function DX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>Dx(a))),f(t,["contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["config"],MX(r)),t}function LX(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&f(e,["bytesBase64Encoded"],Ko(t));const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function FX(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=h(n,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=h(n,["aspectRatio"]);if(e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r),h(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=h(n,["personGeneration"]);if(e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=h(n,["enhancePrompt"]);if(e!==void 0&&l!=null&&f(e,["parameters","enhancePrompt"],l),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function OX(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const r=h(e,["image"]);if(r!=null&&f(t,["instances[0]","image"],LX(r)),h(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=h(e,["config"]);return o!=null&&f(t,["config"],FX(o,t)),t}function UX(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function $X(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["data"]);s!=null&&f(e,["data"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function BX(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&f(e,["fileUri"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function VX(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],UX(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],$X(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],BX(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function zf(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>VX(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function jX(n){const e={},t=h(n,["anyOf"]);t!=null&&f(e,["anyOf"],t);const s=h(n,["default"]);s!=null&&f(e,["default"],s);const i=h(n,["description"]);i!=null&&f(e,["description"],i);const r=h(n,["enum"]);r!=null&&f(e,["enum"],r);const o=h(n,["example"]);o!=null&&f(e,["example"],o);const a=h(n,["format"]);a!=null&&f(e,["format"],a);const l=h(n,["items"]);l!=null&&f(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&f(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&f(e,["maxLength"],u);const p=h(n,["maxProperties"]);p!=null&&f(e,["maxProperties"],p);const m=h(n,["maximum"]);m!=null&&f(e,["maximum"],m);const g=h(n,["minItems"]);g!=null&&f(e,["minItems"],g);const w=h(n,["minLength"]);w!=null&&f(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&f(e,["minProperties"],v);const _=h(n,["minimum"]);_!=null&&f(e,["minimum"],_);const x=h(n,["nullable"]);x!=null&&f(e,["nullable"],x);const S=h(n,["pattern"]);S!=null&&f(e,["pattern"],S);const C=h(n,["properties"]);C!=null&&f(e,["properties"],C);const T=h(n,["propertyOrdering"]);T!=null&&f(e,["propertyOrdering"],T);const k=h(n,["required"]);k!=null&&f(e,["required"],k);const P=h(n,["title"]);P!=null&&f(e,["title"],P);const I=h(n,["type"]);return I!=null&&f(e,["type"],I),e}function zX(n){const e={},t=h(n,["featureSelectionPreference"]);return t!=null&&f(e,["featureSelectionPreference"],t),e}function HX(n){const e={},t=h(n,["method"]);t!=null&&f(e,["method"],t);const s=h(n,["category"]);s!=null&&f(e,["category"],s);const i=h(n,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function GX(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&f(e,["description"],t);const s=h(n,["name"]);s!=null&&f(e,["name"],s);const i=h(n,["parameters"]);i!=null&&f(e,["parameters"],i);const r=h(n,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=h(n,["response"]);o!=null&&f(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function qX(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function WX(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],qX(t)),e}function KX(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function YX(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],KX(t)),e}function JX(){return{}}function XX(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&f(e,["apiKeyString"],t),e}function QX(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&f(e,["apiKeyConfig"],XX(t));const s=h(n,["authType"]);s!=null&&f(e,["authType"],s);const i=h(n,["googleServiceAccountConfig"]);i!=null&&f(e,["googleServiceAccountConfig"],i);const r=h(n,["httpBasicAuthConfig"]);r!=null&&f(e,["httpBasicAuthConfig"],r);const o=h(n,["oauthConfig"]);o!=null&&f(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&f(e,["oidcConfig"],a),e}function ZX(n){const e={},t=h(n,["authConfig"]);return t!=null&&f(e,["authConfig"],QX(t)),e}function eQ(){return{}}function bF(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>GX(m))),f(e,["functionDeclarations"],p)}const s=h(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const i=h(n,["googleSearch"]);i!=null&&f(e,["googleSearch"],WX(i));const r=h(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],YX(r)),h(n,["enterpriseWebSearch"])!=null&&f(e,["enterpriseWebSearch"],JX());const a=h(n,["googleMaps"]);a!=null&&f(e,["googleMaps"],ZX(a)),h(n,["urlContext"])!=null&&f(e,["urlContext"],eQ());const c=h(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&f(e,["computerUse"],u),e}function tQ(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["allowedFunctionNames"]);return s!=null&&f(e,["allowedFunctionNames"],s),e}function nQ(n){const e={},t=h(n,["latitude"]);t!=null&&f(e,["latitude"],t);const s=h(n,["longitude"]);return s!=null&&f(e,["longitude"],s),e}function sQ(n){const e={},t=h(n,["latLng"]);t!=null&&f(e,["latLng"],nQ(t));const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function iQ(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&f(e,["functionCallingConfig"],tQ(t));const s=h(n,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],sQ(s)),e}function rQ(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function oQ(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],rQ(t)),e}function aQ(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&f(e,["voiceConfig"],oQ(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=h(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function lQ(n){const e={},t=h(n,["includeThoughts"]);t!=null&&f(e,["includeThoughts"],t);const s=h(n,["thinkingBudget"]);return s!=null&&f(e,["thinkingBudget"],s),e}function cQ(n,e,t){const s={},i=h(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],zf(An(i)));const r=h(e,["temperature"]);r!=null&&f(s,["temperature"],r);const o=h(e,["topP"]);o!=null&&f(s,["topP"],o);const a=h(e,["topK"]);a!=null&&f(s,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&f(s,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&f(s,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&f(s,["stopSequences"],u);const p=h(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const m=h(e,["logprobs"]);m!=null&&f(s,["logprobs"],m);const g=h(e,["presencePenalty"]);g!=null&&f(s,["presencePenalty"],g);const w=h(e,["frequencyPenalty"]);w!=null&&f(s,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&f(s,["seed"],v);const _=h(e,["responseMimeType"]);_!=null&&f(s,["responseMimeType"],_);const x=h(e,["responseSchema"]);x!=null&&f(s,["responseSchema"],jX(Sm(x)));const S=h(e,["responseJsonSchema"]);S!=null&&f(s,["responseJsonSchema"],S);const C=h(e,["routingConfig"]);C!=null&&f(s,["routingConfig"],C);const T=h(e,["modelSelectionConfig"]);T!=null&&f(s,["modelConfig"],zX(T));const k=h(e,["safetySettings"]);if(t!==void 0&&k!=null){let j=k;Array.isArray(j)&&(j=j.map(F=>HX(F))),f(t,["safetySettings"],j)}const P=h(e,["tools"]);if(t!==void 0&&P!=null){let j=Vf(P);Array.isArray(j)&&(j=j.map(F=>bF(Bf(F)))),f(t,["tools"],j)}const I=h(e,["toolConfig"]);t!==void 0&&I!=null&&f(t,["toolConfig"],iQ(I));const N=h(e,["labels"]);t!==void 0&&N!=null&&f(t,["labels"],N);const D=h(e,["cachedContent"]);t!==void 0&&D!=null&&f(t,["cachedContent"],Wo(n,D));const M=h(e,["responseModalities"]);M!=null&&f(s,["responseModalities"],M);const L=h(e,["mediaResolution"]);L!=null&&f(s,["mediaResolution"],L);const V=h(e,["speechConfig"]);V!=null&&f(s,["speechConfig"],aQ(rA(V)));const G=h(e,["audioTimestamp"]);G!=null&&f(s,["audioTimestamp"],G);const B=h(e,["thinkingConfig"]);return B!=null&&f(s,["thinkingConfig"],lQ(B)),s}function NP(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>zf(a))),f(t,["contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["generationConfig"],cQ(n,r,t)),t}function uQ(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const i=h(n,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const r=h(n,["outputDimensionality"]);e!==void 0&&r!=null&&f(e,["parameters","outputDimensionality"],r);const o=h(n,["mimeType"]);e!==void 0&&o!=null&&f(e,["instances[]","mimeType"],o);const a=h(n,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),t}function dQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);i!=null&&f(t,["instances[]","content"],oF(n,i));const r=h(e,["config"]);return r!=null&&f(t,["config"],uQ(r,t)),t}function hQ(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const i=h(n,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const r=h(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const g=h(n,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const _=h(n,["addWatermark"]);e!==void 0&&_!=null&&f(e,["parameters","addWatermark"],_);const x=h(n,["enhancePrompt"]);return e!==void 0&&x!=null&&f(e,["parameters","enhancePrompt"],x),t}function fQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const r=h(e,["config"]);return r!=null&&f(t,["config"],hQ(r,t)),t}function Lx(n){const e={},t=h(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Ko(s));const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function pQ(n){const e={},t=h(n,["maskMode"]);t!=null&&f(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const i=h(n,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function mQ(n){const e={},t=h(n,["controlType"]);t!=null&&f(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function gQ(n){const e={},t=h(n,["styleDescription"]);return t!=null&&f(e,["styleDescription"],t),e}function yQ(n){const e={},t=h(n,["subjectType"]);t!=null&&f(e,["subjectType"],t);const s=h(n,["subjectDescription"]);return s!=null&&f(e,["subjectDescription"],s),e}function vQ(n){const e={},t=h(n,["referenceImage"]);t!=null&&f(e,["referenceImage"],Lx(t));const s=h(n,["referenceId"]);s!=null&&f(e,["referenceId"],s);const i=h(n,["referenceType"]);i!=null&&f(e,["referenceType"],i);const r=h(n,["maskImageConfig"]);r!=null&&f(e,["maskImageConfig"],pQ(r));const o=h(n,["controlImageConfig"]);o!=null&&f(e,["controlImageConfig"],mQ(o));const a=h(n,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],gQ(a));const l=h(n,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],yQ(l)),e}function wQ(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const i=h(n,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const r=h(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const g=h(n,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const _=h(n,["editMode"]);e!==void 0&&_!=null&&f(e,["parameters","editMode"],_);const x=h(n,["baseSteps"]);return e!==void 0&&x!=null&&f(e,["parameters","editConfig","baseSteps"],x),t}function xQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const r=h(e,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>vQ(l))),f(t,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&f(t,["config"],wQ(o,t)),t}function _Q(n,e){const t={},s=h(n,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const i=h(n,["outputMimeType"]);e!==void 0&&i!=null&&f(e,["parameters","outputOptions","mimeType"],i);const r=h(n,["outputCompressionQuality"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","compressionQuality"],r);const o=h(n,["enhanceInputImage"]);e!==void 0&&o!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=h(n,["imagePreservationFactor"]);e!==void 0&&a!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=h(n,["mode"]);return e!==void 0&&c!=null&&f(e,["parameters","mode"],c),t}function CQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["image"]);i!=null&&f(t,["instances[0]","image"],Lx(i));const r=h(e,["upscaleFactor"]);r!=null&&f(t,["parameters","upscaleConfig","upscaleFactor"],r);const o=h(e,["config"]);return o!=null&&f(t,["config"],_Q(o,t)),t}function SQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","name"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function bQ(n,e,t){const s={},i=h(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const r=h(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const o=h(e,["filter"]);t!==void 0&&o!=null&&f(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&f(t,["_url","models_url"],cF(n,a)),s}function EQ(n,e){const t={},s=h(e,["config"]);return s!=null&&f(t,["config"],bQ(n,s,t)),t}function TQ(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const i=h(n,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const r=h(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),t}function AQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],TQ(i,t)),t}function kQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","name"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],i),t}function RQ(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],zf(An(s)));const i=h(n,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>bF(a))),f(e,["tools"],o)}const r=h(n,["generationConfig"]);return e!==void 0&&r!=null&&f(e,["generationConfig"],r),t}function PQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>zf(a))),f(t,["contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["config"],RQ(r,t)),t}function IQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["contents"]);if(i!=null){let o=Zs(i);Array.isArray(o)&&(o=o.map(a=>zf(a))),f(t,["contents"],o)}const r=h(e,["config"]);return r!=null&&f(t,["config"],r),t}function NQ(n){const e={},t=h(n,["uri"]);t!=null&&f(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Ko(s));const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function MQ(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const i=h(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const r=h(n,["fps"]);e!==void 0&&r!=null&&f(e,["parameters","fps"],r);const o=h(n,["durationSeconds"]);e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o);const a=h(n,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=h(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const p=h(n,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const g=h(n,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);const w=h(n,["generateAudio"]);e!==void 0&&w!=null&&f(e,["parameters","generateAudio"],w);const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Lx(v));const _=h(n,["compressionQuality"]);return e!==void 0&&_!=null&&f(e,["parameters","compressionQuality"],_),t}function DQ(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["_url","model"],Ye(n,s));const i=h(e,["prompt"]);i!=null&&f(t,["instances[0]","prompt"],i);const r=h(e,["image"]);r!=null&&f(t,["instances[0]","image"],Lx(r));const o=h(e,["video"]);o!=null&&f(t,["instances[0]","video"],NQ(o));const a=h(e,["config"]);return a!=null&&f(t,["config"],MQ(a,t)),t}function LQ(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function FQ(n){const e={},t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function OQ(n){const e={},t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function UQ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],LQ(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],FQ(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],OQ(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function $Q(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>UQ(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function BQ(n){const e={},t=h(n,["citationSources"]);return t!=null&&f(e,["citations"],t),e}function VQ(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&f(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&f(e,["urlRetrievalStatus"],s),e}function jQ(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>VQ(i))),f(e,["urlMetadata"],s)}return e}function zQ(n){const e={},t=h(n,["content"]);t!=null&&f(e,["content"],$Q(t));const s=h(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],BQ(s));const i=h(n,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const r=h(n,["finishReason"]);r!=null&&f(e,["finishReason"],r);const o=h(n,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],jQ(o));const a=h(n,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&f(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&f(e,["logprobsResult"],u);const p=h(n,["safetyRatings"]);return p!=null&&f(e,["safetyRatings"],p),e}function MP(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>zQ(a))),f(e,["candidates"],o)}const s=h(n,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const i=h(n,["promptFeedback"]);i!=null&&f(e,["promptFeedback"],i);const r=h(n,["usageMetadata"]);return r!=null&&f(e,["usageMetadata"],r),e}function HQ(n){const e={},t=h(n,["values"]);return t!=null&&f(e,["values"],t),e}function GQ(){return{}}function qQ(n){const e={},t=h(n,["embeddings"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>HQ(r))),f(e,["embeddings"],i)}return h(n,["metadata"])!=null&&f(e,["metadata"],GQ()),e}function WQ(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&f(e,["imageBytes"],Ko(t));const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function EF(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const i=h(n,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function KQ(n){const e={},t=h(n,["_self"]);t!=null&&f(e,["image"],WQ(t));const s=h(n,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const i=h(n,["_self"]);return i!=null&&f(e,["safetyAttributes"],EF(i)),e}function YQ(n){const e={},t=h(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>KQ(r))),f(e,["generatedImages"],i)}const s=h(n,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],EF(s)),e}function JQ(n){const e={},t=h(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&f(e,["createTime"],s);const i=h(n,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function qS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["description"]);i!=null&&f(e,["description"],i);const r=h(n,["version"]);r!=null&&f(e,["version"],r);const o=h(n,["_self"]);o!=null&&f(e,["tunedModelInfo"],JQ(o));const a=h(n,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=h(n,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=h(n,["supportedGenerationMethods"]);return c!=null&&f(e,["supportedActions"],c),e}function XQ(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["_self"]);if(s!=null){let i=uF(s);Array.isArray(i)&&(i=i.map(r=>qS(r))),f(e,["models"],i)}return e}function QQ(){return{}}function ZQ(n){const e={},t=h(n,["totalTokens"]);t!=null&&f(e,["totalTokens"],t);const s=h(n,["cachedContentTokenCount"]);return s!=null&&f(e,["cachedContentTokenCount"],s),e}function eZ(n){const e={},t=h(n,["video","uri"]);t!=null&&f(e,["uri"],t);const s=h(n,["video","encodedVideo"]);s!=null&&f(e,["videoBytes"],Ko(s));const i=h(n,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function tZ(n){const e={},t=h(n,["_self"]);return t!=null&&f(e,["video"],eZ(t)),e}function nZ(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>tZ(o))),f(e,["generatedVideos"],r)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const i=h(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function sZ(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata"]);s!=null&&f(e,["metadata"],s);const i=h(n,["done"]);i!=null&&f(e,["done"],i);const r=h(n,["error"]);r!=null&&f(e,["error"],r);const o=h(n,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],nZ(o)),e}function iZ(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function rZ(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["data"]);s!=null&&f(e,["data"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function oZ(n){const e={},t=h(n,["displayName"]);t!=null&&f(e,["displayName"],t);const s=h(n,["fileUri"]);s!=null&&f(e,["fileUri"],s);const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function aZ(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],iZ(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],rZ(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],oZ(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function lZ(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>aZ(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function cZ(n){const e={},t=h(n,["citations"]);return t!=null&&f(e,["citations"],t),e}function uZ(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&f(e,["retrievedUrl"],t);const s=h(n,["urlRetrievalStatus"]);return s!=null&&f(e,["urlRetrievalStatus"],s),e}function dZ(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>uZ(i))),f(e,["urlMetadata"],s)}return e}function hZ(n){const e={},t=h(n,["content"]);t!=null&&f(e,["content"],lZ(t));const s=h(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],cZ(s));const i=h(n,["finishMessage"]);i!=null&&f(e,["finishMessage"],i);const r=h(n,["finishReason"]);r!=null&&f(e,["finishReason"],r);const o=h(n,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],dZ(o));const a=h(n,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&f(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&f(e,["logprobsResult"],u);const p=h(n,["safetyRatings"]);return p!=null&&f(e,["safetyRatings"],p),e}function DP(n){const e={},t=h(n,["candidates"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>hZ(c))),f(e,["candidates"],l)}const s=h(n,["createTime"]);s!=null&&f(e,["createTime"],s);const i=h(n,["responseId"]);i!=null&&f(e,["responseId"],i);const r=h(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=h(n,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=h(n,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function fZ(n){const e={},t=h(n,["truncated"]);t!=null&&f(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function pZ(n){const e={},t=h(n,["values"]);t!=null&&f(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&f(e,["statistics"],fZ(s)),e}function mZ(n){const e={},t=h(n,["billableCharacterCount"]);return t!=null&&f(e,["billableCharacterCount"],t),e}function gZ(n){const e={},t=h(n,["predictions[]","embeddings"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>pZ(r))),f(e,["embeddings"],i)}const s=h(n,["metadata"]);return s!=null&&f(e,["metadata"],mZ(s)),e}function yZ(n){const e={},t=h(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],Ko(s));const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function TF(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const i=h(n,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function aA(n){const e={},t=h(n,["_self"]);t!=null&&f(e,["image"],yZ(t));const s=h(n,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const i=h(n,["_self"]);i!=null&&f(e,["safetyAttributes"],TF(i));const r=h(n,["prompt"]);return r!=null&&f(e,["enhancedPrompt"],r),e}function vZ(n){const e={},t=h(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>aA(r))),f(e,["generatedImages"],i)}const s=h(n,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],TF(s)),e}function wZ(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>aA(i))),f(e,["generatedImages"],s)}return e}function xZ(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>aA(i))),f(e,["generatedImages"],s)}return e}function _Z(n){const e={},t=h(n,["endpoint"]);t!=null&&f(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function CZ(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&f(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&f(e,["createTime"],s);const i=h(n,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function SZ(n){const e={},t=h(n,["checkpointId"]);t!=null&&f(e,["checkpointId"],t);const s=h(n,["epoch"]);s!=null&&f(e,["epoch"],s);const i=h(n,["step"]);return i!=null&&f(e,["step"],i),e}function WS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["displayName"]);s!=null&&f(e,["displayName"],s);const i=h(n,["description"]);i!=null&&f(e,["description"],i);const r=h(n,["versionId"]);r!=null&&f(e,["version"],r);const o=h(n,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>_Z(m))),f(e,["endpoints"],p)}const a=h(n,["labels"]);a!=null&&f(e,["labels"],a);const l=h(n,["_self"]);l!=null&&f(e,["tunedModelInfo"],CZ(l));const c=h(n,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const u=h(n,["checkpoints"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>SZ(m))),f(e,["checkpoints"],p)}return e}function bZ(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["_self"]);if(s!=null){let i=uF(s);Array.isArray(i)&&(i=i.map(r=>WS(r))),f(e,["models"],i)}return e}function EZ(){return{}}function TZ(n){const e={},t=h(n,["totalTokens"]);return t!=null&&f(e,["totalTokens"],t),e}function AZ(n){const e={},t=h(n,["tokensInfo"]);return t!=null&&f(e,["tokensInfo"],t),e}function kZ(n){const e={},t=h(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Ko(s));const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function RZ(n){const e={},t=h(n,["_self"]);return t!=null&&f(e,["video"],kZ(t)),e}function PZ(n){const e={},t=h(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>RZ(o))),f(e,["generatedVideos"],r)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const i=h(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function IZ(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata"]);s!=null&&f(e,["metadata"],s);const i=h(n,["done"]);i!=null&&f(e,["done"],i);const r=h(n,["error"]);r!=null&&f(e,["error"],r);const o=h(n,["response"]);return o!=null&&f(e,["response"],PZ(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NZ="Content-Type",MZ="X-Server-Timeout",DZ="User-Agent",KS="x-goog-api-client",LZ="1.8.0",FZ=`google-genai-sdk/${LZ}`,OZ="v1beta1",UZ="v1beta",LP=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class $Z{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:OZ,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:UZ,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const i=[this.getRequestUrlInternal(t)];return s&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(i,r,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[i,r]of Object.entries(t))typeof r=="object"?s[i]=Object.assign(Object.assign({},s[i]),r):r!==void 0&&(s[i]=r);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(i,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const i=new AbortController,r=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=r}return t&&t.extraBody!==null&&BZ(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await FP(i),new BS(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await FP(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Wd(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield at(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(l);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,w=m.code,v=`got status: ${g}. ${JSON.stringify(p)}`;if(w>=400&&w<600)throw new Mx({message:v,status:w})}}catch(p){if(p.name==="ApiError")throw p}o+=c;let u=o.match(LP);for(;u;){const p=u[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new BS(m)),o=o.slice(u[0].length),u=o.match(LP)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=FZ+" "+this.clientOptions.userAgentExtra;return e[DZ]=t,e[KS]=t,e[NZ]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))t.append(s,i);e.timeout&&e.timeout>0&&t.append(MZ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);i.sizeBytes=String(o.size);const a=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l=await this.fetchUploadUrl(i,t);return r.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:ue("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(s=o==null?void 0:o.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function FP(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(s);throw t>=400&&t<600?new Mx({message:i,status:t}):new Error(i)}}function BZ(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(r,o){const a=Object.assign({},r);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=s(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=s(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VZ="mcp_used/unknown";function AF(n){for(const e of n)if(lA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function kF(n){var e;const t=(e=n[KS])!==null&&e!==void 0?e:"";n[KS]=(t+` ${VZ}`).trimStart()}function jZ(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>lA(i)))!==null&&s!==void 0?s:!1}function zZ(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>!lA(i)))!==null&&s!==void 0?s:!1}function lA(n){return n!==null&&typeof n=="object"&&n instanceof cA}function HZ(n,e=100){return Wd(this,arguments,function*(){let s,i=0;for(;i<e;){const r=yield at(n.listTools({cursor:s}));for(const o of r.tools)yield yield at(o),i++;if(!r.nextCursor)break;s=r.nextCursor}})}class cA{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new cA(e,t)}async initialize(){var e,t,s,i;if(this.mcpTools.length>0)return;const r={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(t=void 0,Zp(HZ(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const p=i;o.push(p);const m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=u}}catch(p){t={error:p}}finally{try{!a&&!e&&(s=l.return)&&await s.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),O9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[s.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await i.callTool({name:s.name,arguments:s.args},void 0,r);t.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GZ(n,e,t){const s=new T9;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data);const r=ZJ(i);Object.assign(s,r),e(s)}class qZ{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=YZ(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(C=>{c=C}),p=e.callbacks,m=function(){c({})},g=this.apiClient,w={onopen:m,onmessage:C=>{GZ(g,p.onmessage,C)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(C){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(C){}},v=this.webSocketFactory.create(l,KZ(o),w);v.connect(),await u;const _=Ye(this.apiClient,e.model),x=_F({model:_}),S=GS({setup:x});return v.send(JSON.stringify(S)),new WZ(v,this.apiClient)}}class WZ{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fJ(e),s=CF(t);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=pJ(e),s=GS(t);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const t=GS({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Nd.PLAY)}pause(){this.sendPlaybackControl(Nd.PAUSE)}stop(){this.sendPlaybackControl(Nd.STOP)}resetContext(){this.sendPlaybackControl(Nd.RESET_CONTEXT)}close(){this.conn.close()}}function KZ(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function YZ(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JZ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function XZ(n,e,t){const s=new E9;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const r=JSON.parse(i);if(n.isVertexAI()){const o=HJ(r);Object.assign(s,o)}else{const o=zJ(r);Object.assign(s,o)}e(s)}class QZ{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new qZ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,i,r,o,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&AF(e.config.tools)&&kF(p);const m=nee(p);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const D=this.apiClient.getApiKey();let M="BidiGenerateContent",L="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),M="BidiGenerateContentConstrained",L="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${L}=${D}`}let g=()=>{};const w=new Promise(D=>{g=D}),v=e.callbacks,_=function(){var D;(D=v==null?void 0:v.onopen)===null||D===void 0||D.call(v),g({})},x=this.apiClient,S={onopen:_,onmessage:D=>{XZ(x,v.onmessage,D)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(D){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(D){}},C=this.webSocketFactory.create(u,tee(m),S);C.connect(),await w;let T=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const D=this.apiClient.getProject(),M=this.apiClient.getLocation();T=`projects/${D}/locations/${M}/`+T}let k={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[lw.AUDIO]}:e.config.responseModalities=[lw.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],I=[];for(const D of P)if(this.isCallableTool(D)){const M=D;I.push(await M.tool())}else I.push(D);I.length>0&&(e.config.tools=I);const N={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=oJ(this.apiClient,N):k=rJ(this.apiClient,N),delete k.config,C.send(JSON.stringify(k)),new eee(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZZ={turnComplete:!0};class eee{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Zs(t.turns),e.isVertexAI()?s=s.map(i=>zf(i)):s=s.map(i=>Dx(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const r of s){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(JZ)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},ZZ),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:hJ(e)}:t={realtimeInput:dJ(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tee(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function nee(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OP=10;function UP(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Vv(o)){i=!0;break}if(!i)return!0;const r=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Vv(n){return"callTool"in n&&typeof n.callTool=="function"}function $P(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class see extends Wu{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,i,r,o,a;const l=await this.processParamsForMcpUsage(t);if(!jZ(t)||UP(t.config))return await this.generateContentInternal(l);if(zZ(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const p=Zs(l.contents),m=(r=(i=(s=l.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:OP;let g=0;for(;g<m&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const w=c.candidates[0].content,v=[];for(const _ of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Vv(_)){const S=await _.callTool(c.functionCalls);v.push(...S)}g++,u={role:"user",parts:v},l.contents=Zs(l.contents),l.contents.push(w),l.contents.push(u),$P(l.config)&&(p.push(w),p.push(u))}return $P(l.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(UP(t.config)){const s=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var i;let r;const o=[];if(s!=null&&s.generatedImages)for(const l of s.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:o.push(l);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r}:a={generatedImages:o},a}),this.list=async t=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new by(Fu.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var t,s,i;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const o=await Promise.all(r.map(async l=>Vv(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&AF(e.config.tools)){const l=(i=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),kF(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,s,i;const r=new Map;for(const o of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Vv(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(e){var t,s,i;const r=(i=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:OP;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,p){var m,g;return Wd(this,arguments,function*(){for(var w,v,_,x;a<r;){o&&(a++,o=!1);const k=yield at(c.processParamsForMcpUsage(p)),P=yield at(c.generateContentStreamInternal(k)),I=[],N=[];try{for(var S=!0,C=(v=void 0,Zp(P)),T;T=yield at(C.next()),w=T.done,!w;S=!0){x=T.value,S=!1;const D=x;if(yield yield at(D),D.candidates&&(!((m=D.candidates[0])===null||m===void 0)&&m.content)){N.push(D.candidates[0].content);for(const M of(g=D.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<r&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(M.functionCall.name)){const L=yield at(u.get(M.functionCall.name).callTool([M.functionCall]));I.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(D){v={error:D}}finally{try{!S&&!w&&(_=C.return)&&(yield at(_.call(C)))}finally{if(v)throw v.error}}if(I.length>0){o=!0;const D=new ip;D.candidates=[{content:{role:"user",parts:I}}],yield yield at(D);const M=[];M.push(...N),M.push({role:"user",parts:I});const L=Zs(p.contents).concat(M);p.contents=L}else break}})}(this,l,e)}async generateContentInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=NP(this.apiClient,e);return a=ue("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=DP(u),m=new ip;return Object.assign(m,p),m})}else{const c=IP(this.apiClient,e);return a=ue("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=MP(u),m=new ip;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=NP(this.apiClient,e);return a=ue("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Wd(this,arguments,function*(){var m,g,w,v;try{for(var _=!0,x=Zp(p),S;S=yield at(x.next()),m=S.done,!m;_=!0){v=S.value,_=!1;const T=DP(yield at(v.json())),k=new ip;Object.assign(k,T),yield yield at(k)}}catch(C){g={error:C}}finally{try{!_&&!m&&(w=x.return)&&(yield at(w.call(x)))}finally{if(g)throw g.error}}})})}else{const c=IP(this.apiClient,e);return a=ue("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return Wd(this,arguments,function*(){var m,g,w,v;try{for(var _=!0,x=Zp(p),S;S=yield at(x.next()),m=S.done,!m;_=!0){v=S.value,_=!1;const T=MP(yield at(v.json())),k=new ip;Object.assign(k,T),yield yield at(k)}}catch(C){g={error:C}}finally{try{!_&&!m&&(w=x.return)&&(yield at(w.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dQ(this.apiClient,e);return a=ue("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=gZ(u),m=new uP;return Object.assign(m,p),m})}else{const c=bX(this.apiClient,e);return a=ue("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=qQ(u),m=new uP;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fQ(this.apiClient,e);return a=ue("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=vZ(u),m=new dP;return Object.assign(m,p),m})}else{const c=TX(this.apiClient,e);return a=ue("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=YQ(u),m=new dP;return Object.assign(m,p),m})}}async editImageInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI()){const a=xQ(this.apiClient,e);return r=ue("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>{const c=wZ(l),u=new w9;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI()){const a=CQ(this.apiClient,e);return r=ue("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>{const c=xZ(l),u=new x9;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=SQ(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>WS(u))}else{const c=AX(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qS(u))}}async listInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=EQ(this.apiClient,e);return a=ue("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=bZ(u),m=new hP;return Object.assign(m,p),m})}else{const c=RX(this.apiClient,e);return a=ue("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=XQ(u),m=new hP;return Object.assign(m,p),m})}}async update(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=AQ(this.apiClient,e);return a=ue("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>WS(u))}else{const c=IX(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qS(u))}}async delete(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=kQ(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(()=>{const u=EZ(),p=new fP;return Object.assign(p,u),p})}else{const c=NX(this.apiClient,e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=QQ(),p=new fP;return Object.assign(p,u),p})}}async countTokens(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=PQ(this.apiClient,e);return a=ue("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=TZ(u),m=new pP;return Object.assign(m,p),m})}else{const c=DX(this.apiClient,e);return a=ue("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=ZQ(u),m=new pP;return Object.assign(m,p),m})}}async computeTokens(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI()){const a=IQ(this.apiClient,e);return r=ue("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>{const c=AZ(l),u=new _9;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=DQ(this.apiClient,e);return a=ue("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>IZ(u))}else{const c=OX(this.apiClient,e);return a=ue("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>sZ(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iee(n){const e={},t=h(n,["operationName"]);t!=null&&f(e,["_url","operationName"],t);const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function ree(n){const e={},t=h(n,["operationName"]);t!=null&&f(e,["_url","operationName"],t);const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function oee(n){const e={},t=h(n,["operationName"]);t!=null&&f(e,["operationName"],t);const s=h(n,["resourceName"]);s!=null&&f(e,["_url","resourceName"],s);const i=h(n,["config"]);return i!=null&&f(e,["config"],i),e}function aee(n){const e={},t=h(n,["video","uri"]);t!=null&&f(e,["uri"],t);const s=h(n,["video","encodedVideo"]);s!=null&&f(e,["videoBytes"],Ko(s));const i=h(n,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function lee(n){const e={},t=h(n,["_self"]);return t!=null&&f(e,["video"],aee(t)),e}function cee(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>lee(o))),f(e,["generatedVideos"],r)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const i=h(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function uee(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata"]);s!=null&&f(e,["metadata"],s);const i=h(n,["done"]);i!=null&&f(e,["done"],i);const r=h(n,["error"]);r!=null&&f(e,["error"],r);const o=h(n,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],cee(o)),e}function dee(n){const e={},t=h(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Ko(s));const i=h(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function hee(n){const e={},t=h(n,["_self"]);return t!=null&&f(e,["video"],dee(t)),e}function fee(n){const e={},t=h(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>hee(o))),f(e,["generatedVideos"],r)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const i=h(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function BP(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata"]);s!=null&&f(e,["metadata"],s);const i=h(n,["done"]);i!=null&&f(e,["done"],i);const r=h(n,["error"]);r!=null&&f(e,["error"],r);const o=h(n,["response"]);return o!=null&&f(e,["response"],fee(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pee extends Wu{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let r;return s&&"httpOptions"in s&&(r=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:t.name,config:s})}async getVideosOperationInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ree(e);return a=ue("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>BP(u))}else{const c=iee(e);return a=ue("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>uee(u))}}async fetchPredictVideosOperationInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI()){const a=oee(e);return r=ue("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>BP(l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mee(n){const e={},t=h(n,["voiceName"]);return t!=null&&f(e,["voiceName"],t),e}function RF(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&f(e,["prebuiltVoiceConfig"],mee(t)),e}function gee(n){const e={},t=h(n,["speaker"]);t!=null&&f(e,["speaker"],t);const s=h(n,["voiceConfig"]);return s!=null&&f(e,["voiceConfig"],RF(s)),e}function yee(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>gee(i))),f(e,["speakerVoiceConfigs"],s)}return e}function vee(n){const e={},t=h(n,["voiceConfig"]);t!=null&&f(e,["voiceConfig"],RF(t));const s=h(n,["multiSpeakerVoiceConfig"]);s!=null&&f(e,["multiSpeakerVoiceConfig"],yee(s));const i=h(n,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function wee(n){const e={},t=h(n,["fps"]);t!=null&&f(e,["fps"],t);const s=h(n,["endOffset"]);s!=null&&f(e,["endOffset"],s);const i=h(n,["startOffset"]);return i!=null&&f(e,["startOffset"],i),e}function xee(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&f(e,["data"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function _ee(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Cee(n){const e={},t=h(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],wee(t));const s=h(n,["thought"]);s!=null&&f(e,["thought"],s);const i=h(n,["inlineData"]);i!=null&&f(e,["inlineData"],xee(i));const r=h(n,["fileData"]);r!=null&&f(e,["fileData"],_ee(r));const o=h(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&f(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&f(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);const p=h(n,["text"]);return p!=null&&f(e,["text"],p),e}function See(n){const e={},t=h(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Cee(r))),f(e,["parts"],i)}const s=h(n,["role"]);return s!=null&&f(e,["role"],s),e}function bee(n){const e={},t=h(n,["behavior"]);t!=null&&f(e,["behavior"],t);const s=h(n,["description"]);s!=null&&f(e,["description"],s);const i=h(n,["name"]);i!=null&&f(e,["name"],i);const r=h(n,["parameters"]);r!=null&&f(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&f(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function Eee(n){const e={},t=h(n,["startTime"]);t!=null&&f(e,["startTime"],t);const s=h(n,["endTime"]);return s!=null&&f(e,["endTime"],s),e}function Tee(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],Eee(t)),e}function Aee(n){const e={},t=h(n,["mode"]);t!=null&&f(e,["mode"],t);const s=h(n,["dynamicThreshold"]);return s!=null&&f(e,["dynamicThreshold"],s),e}function kee(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&f(e,["dynamicRetrievalConfig"],Aee(t)),e}function Ree(){return{}}function Pee(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>bee(c))),f(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],Tee(s));const i=h(n,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],kee(i)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&f(e,["urlContext"],Ree());const o=h(n,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&f(e,["computerUse"],a),e}function Iee(n){const e={},t=h(n,["handle"]);if(t!=null&&f(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VP(){return{}}function Nee(n){const e={},t=h(n,["disabled"]);t!=null&&f(e,["disabled"],t);const s=h(n,["startOfSpeechSensitivity"]);s!=null&&f(e,["startOfSpeechSensitivity"],s);const i=h(n,["endOfSpeechSensitivity"]);i!=null&&f(e,["endOfSpeechSensitivity"],i);const r=h(n,["prefixPaddingMs"]);r!=null&&f(e,["prefixPaddingMs"],r);const o=h(n,["silenceDurationMs"]);return o!=null&&f(e,["silenceDurationMs"],o),e}function Mee(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&f(e,["automaticActivityDetection"],Nee(t));const s=h(n,["activityHandling"]);s!=null&&f(e,["activityHandling"],s);const i=h(n,["turnCoverage"]);return i!=null&&f(e,["turnCoverage"],i),e}function Dee(n){const e={},t=h(n,["targetTokens"]);return t!=null&&f(e,["targetTokens"],t),e}function Lee(n){const e={},t=h(n,["triggerTokens"]);t!=null&&f(e,["triggerTokens"],t);const s=h(n,["slidingWindow"]);return s!=null&&f(e,["slidingWindow"],Dee(s)),e}function Fee(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&f(e,["proactiveAudio"],t),e}function Oee(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const i=h(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const r=h(n,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=h(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const p=h(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],vee(oA(p)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(n,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],See(An(g)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let k=Vf(w);Array.isArray(k)&&(k=k.map(P=>Pee(Bf(P)))),f(e,["setup","tools"],k)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&f(e,["setup","sessionResumption"],Iee(v));const _=h(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","inputAudioTranscription"],VP());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&f(e,["setup","outputAudioTranscription"],VP());const S=h(n,["realtimeInputConfig"]);e!==void 0&&S!=null&&f(e,["setup","realtimeInputConfig"],Mee(S));const C=h(n,["contextWindowCompression"]);e!==void 0&&C!=null&&f(e,["setup","contextWindowCompression"],Lee(C));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&f(e,["setup","proactivity"],Fee(T)),t}function Uee(n,e){const t={},s=h(e,["model"]);s!=null&&f(t,["setup","model"],Ye(n,s));const i=h(e,["config"]);return i!=null&&f(t,["config"],Oee(i,t)),t}function $ee(n,e,t){const s={},i=h(e,["expireTime"]);t!==void 0&&i!=null&&f(t,["expireTime"],i);const r=h(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&f(t,["newSessionExpireTime"],r);const o=h(e,["uses"]);t!==void 0&&o!=null&&f(t,["uses"],o);const a=h(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&f(t,["bidiGenerateContentSetup"],Uee(n,a));const l=h(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&f(t,["fieldMask"],l),s}function Bee(n,e){const t={},s=h(e,["config"]);return s!=null&&f(t,["config"],$ee(n,s,t)),t}function Vee(n){const e={},t=h(n,["name"]);return t!=null&&f(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jee(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const i=Object.keys(s).map(r=>`${t}.${r}`);e.push(...i)}else e.push(t)}return e.join(",")}function zee(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const r=s.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const r=jee(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?n.fieldMask=r:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class Hee extends Wu{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Bee(this.apiClient,e);r=ue("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=zee(a,e.config);return i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),i.then(c=>Vee(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gee(n){const e={},t=h(n,["name"]);t!=null&&f(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function qee(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const r=h(n,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),t}function Wee(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],qee(t,e)),e}function Kee(n){const e={},t=h(n,["textInput"]);t!=null&&f(e,["textInput"],t);const s=h(n,["output"]);return s!=null&&f(e,["output"],s),e}function Yee(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=h(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Kee(i))),f(e,["examples","examples"],s)}return e}function Jee(n,e){const t={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&f(e,["displayName"],s),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(n,["epochCount"]);e!==void 0&&i!=null&&f(e,["tuningTask","hyperparameters","epochCount"],i);const r=h(n,["learningRateMultiplier"]);if(r!=null&&f(t,["tuningTask","hyperparameters","learningRateMultiplier"],r),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=h(n,["batchSize"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","batchSize"],o);const a=h(n,["learningRate"]);return e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","learningRate"],a),t}function Xee(n){const e={},t=h(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);const s=h(n,["trainingDataset"]);s!=null&&f(e,["tuningTask","trainingData"],Yee(s));const i=h(n,["config"]);return i!=null&&f(e,["config"],Jee(i,e)),e}function Qee(n){const e={},t=h(n,["name"]);t!=null&&f(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&f(e,["config"],s),e}function Zee(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const i=h(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const r=h(n,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),t}function ete(n){const e={},t=h(n,["config"]);return t!=null&&f(e,["config"],Zee(t,e)),e}function tte(n,e){const t={},s=h(n,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s);const i=h(n,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function nte(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&f(t,["validationDatasetUri"],s);const i=h(n,["vertexDatasetResource"]);return e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),t}function ste(n,e){const t={},s=h(n,["validationDataset"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec"],nte(s,t));const i=h(n,["tunedModelDisplayName"]);e!==void 0&&i!=null&&f(e,["tunedModelDisplayName"],i);const r=h(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=h(n,["epochCount"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=h(n,["learningRateMultiplier"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=h(n,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=h(n,["adapterSize"]);if(e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function ite(n){const e={},t=h(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);const s=h(n,["trainingDataset"]);s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],tte(s,e));const i=h(n,["config"]);return i!=null&&f(e,["config"],ste(i,e)),e}function rte(n){const e={},t=h(n,["name"]);t!=null&&f(e,["model"],t);const s=h(n,["name"]);return s!=null&&f(e,["endpoint"],s),e}function PF(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["state"]);s!=null&&f(e,["state"],aF(s));const i=h(n,["createTime"]);i!=null&&f(e,["createTime"],i);const r=h(n,["tuningTask","startTime"]);r!=null&&f(e,["startTime"],r);const o=h(n,["tuningTask","completeTime"]);o!=null&&f(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&f(e,["updateTime"],a);const l=h(n,["description"]);l!=null&&f(e,["description"],l);const c=h(n,["baseModel"]);c!=null&&f(e,["baseModel"],c);const u=h(n,["_self"]);u!=null&&f(e,["tunedModel"],rte(u));const p=h(n,["distillationSpec"]);p!=null&&f(e,["distillationSpec"],p);const m=h(n,["experiment"]);m!=null&&f(e,["experiment"],m);const g=h(n,["labels"]);g!=null&&f(e,["labels"],g);const w=h(n,["pipelineJob"]);w!=null&&f(e,["pipelineJob"],w);const v=h(n,["satisfiesPzi"]);v!=null&&f(e,["satisfiesPzi"],v);const _=h(n,["satisfiesPzs"]);_!=null&&f(e,["satisfiesPzs"],_);const x=h(n,["serviceAccount"]);x!=null&&f(e,["serviceAccount"],x);const S=h(n,["tunedModelDisplayName"]);return S!=null&&f(e,["tunedModelDisplayName"],S),e}function ote(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>PF(r))),f(e,["tuningJobs"],i)}return e}function ate(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["metadata"]);s!=null&&f(e,["metadata"],s);const i=h(n,["done"]);i!=null&&f(e,["done"],i);const r=h(n,["error"]);return r!=null&&f(e,["error"],r),e}function lte(n){const e={},t=h(n,["checkpointId"]);t!=null&&f(e,["checkpointId"],t);const s=h(n,["epoch"]);s!=null&&f(e,["epoch"],s);const i=h(n,["step"]);i!=null&&f(e,["step"],i);const r=h(n,["endpoint"]);return r!=null&&f(e,["endpoint"],r),e}function cte(n){const e={},t=h(n,["model"]);t!=null&&f(e,["model"],t);const s=h(n,["endpoint"]);s!=null&&f(e,["endpoint"],s);const i=h(n,["checkpoints"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>lte(o))),f(e,["checkpoints"],r)}return e}function YS(n){const e={},t=h(n,["name"]);t!=null&&f(e,["name"],t);const s=h(n,["state"]);s!=null&&f(e,["state"],aF(s));const i=h(n,["createTime"]);i!=null&&f(e,["createTime"],i);const r=h(n,["startTime"]);r!=null&&f(e,["startTime"],r);const o=h(n,["endTime"]);o!=null&&f(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&f(e,["updateTime"],a);const l=h(n,["error"]);l!=null&&f(e,["error"],l);const c=h(n,["description"]);c!=null&&f(e,["description"],c);const u=h(n,["baseModel"]);u!=null&&f(e,["baseModel"],u);const p=h(n,["tunedModel"]);p!=null&&f(e,["tunedModel"],cte(p));const m=h(n,["supervisedTuningSpec"]);m!=null&&f(e,["supervisedTuningSpec"],m);const g=h(n,["tuningDataStats"]);g!=null&&f(e,["tuningDataStats"],g);const w=h(n,["encryptionSpec"]);w!=null&&f(e,["encryptionSpec"],w);const v=h(n,["partnerModelTuningSpec"]);v!=null&&f(e,["partnerModelTuningSpec"],v);const _=h(n,["distillationSpec"]);_!=null&&f(e,["distillationSpec"],_);const x=h(n,["experiment"]);x!=null&&f(e,["experiment"],x);const S=h(n,["labels"]);S!=null&&f(e,["labels"],S);const C=h(n,["pipelineJob"]);C!=null&&f(e,["pipelineJob"],C);const T=h(n,["satisfiesPzi"]);T!=null&&f(e,["satisfiesPzi"],T);const k=h(n,["satisfiesPzs"]);k!=null&&f(e,["satisfiesPzs"],k);const P=h(n,["serviceAccount"]);P!=null&&f(e,["serviceAccount"],P);const I=h(n,["tunedModelDisplayName"]);return I!=null&&f(e,["tunedModelDisplayName"],I),e}function ute(n){const e={},t=h(n,["nextPageToken"]);t!=null&&f(e,["nextPageToken"],t);const s=h(n,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>YS(r))),f(e,["tuningJobs"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dte extends Wu{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new by(Fu.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const s=await this.tuneMldevInternal(t);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:$S.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Qee(e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>YS(u))}else{const c=Gee(e);return a=ue("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>PF(u))}}async listInternal(e){var t,s,i,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ete(e);return a=ue("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const p=ute(u),m=new mP;return Object.assign(m,p),m})}else{const c=Wee(e);return a=ue("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=ote(u),m=new mP;return Object.assign(m,p),m})}}async tuneInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI()){const a=ite(e);return r=ue("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>YS(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let i,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Xee(e);return r=ue("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),i.then(l=>ate(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hte{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fte=1024*1024*8,pte=3,mte=1e3,gte=2,J_="x-goog-upload-status";async function yte(n,e,t){var s,i,r;let o=0,a=0,l=new BS(new Response),c="upload";for(o=n.size;a<o;){const p=Math.min(fte,o-a),m=n.slice(a,a+p);a+p>=o&&(c+=", finalize");let g=0,w=mte;for(;g<pte&&(l=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[J_]));)g++,await wte(w),w=w*gte;if(a+=p,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[J_])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[J_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function vte(n){return{size:n.size,type:n.type}}function wte(n){return new Promise(e=>setTimeout(e,n))}class xte{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yte(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vte(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _te{create(e,t,s){return new Cte(e,t,s)}}class Cte{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jP="x-goog-api-key";class Ste{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(jP)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(jP,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bte="gl-node/";class Ete{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=v9(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const i=new Ste(this.apiKey);this.apiClient=new $Z({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:bte+"web",uploader:new xte,downloader:new hte}),this.models=new see(this.apiClient),this.live=new QZ(this.apiClient,i,new _te),this.batches=new q7(this.apiClient),this.chats=new JK(this.models,this.apiClient),this.caches=new WK(this.apiClient),this.files=new cY(this.apiClient),this.operations=new pee(this.apiClient),this.authTokens=new Hee(this.apiClient),this.tunings=new dte(this.apiClient)}}const Tte="AIzaSyCxykzmAuWfh4MMe3K8FliQ8uNcvqoWb2c",IF=new Ete({apiKey:Tte}),NF="gemini-2.5-flash-preview-04-17",MF=n=>{let e=n.trim();const t=/^```(json)?\s*\n?(.*?)\n?\s*```$/s,s=e.match(t);s&&s[2]&&(e=s[2].trim()),e=e.replace(/,\s*([}\]])/g,"$1");const i=Math.min(...["[","{"].map(l=>e.indexOf(l)).filter(l=>l!==-1));i>0&&(e=e.slice(i));const r=e.lastIndexOf("]"),o=e.lastIndexOf("}"),a=Math.max(r,o);a!==-1&&(e=e.slice(0,a+1));try{return JSON.parse(e)}catch(l){const c=e.match(/\[.*\]/s),u=e.match(/\{.*\}/s);let p=c?c[0]:u?u[0]:null;if(p)try{return JSON.parse(p)}catch(m){console.error("Failed fallback JSON parse:",m)}return console.error("Failed to parse JSON response:",l),console.error("Original string:",n),null}},Ate=n=>{const e=[];let t="";return n.forEach(s=>{s.type==="application/pdf"?t+=`

--- Content from ${s.name} ---
${s.content}`:s.type.startsWith("image/")&&e.push({inlineData:{mimeType:s.type,data:s.content}})}),t&&e.unshift({text:t}),e},uA=async(n,e,t=!1)=>{const s=Ate(n);return s.unshift({text:e}),await IF.models.generateContent({model:NF,contents:{parts:s},config:t?{responseMimeType:"application/json"}:{}})},kte=async(n,e=15,t="medium",s="")=>{let i=`Based on the following document(s), generate ${e} key terms and their definitions for a set of flashcards.`;s&&s.trim()&&(i+=` Focus on the topic: ${s}.`),i+=` The flashcards should be at a ${t} difficulty level. The output must be a valid JSON array of objects, where each object has a "term" and a "definition" key. Do not include any text outside of the JSON array.`;const r=await uA(n,i,!0);return(MF(r.text)||[]).map((a,l)=>({id:`fc_${Date.now()}_${l}`,front:a.term||a.front||"",back:a.definition||a.back||"",mastered:!1}))},Rte=async(n,e=10,t="medium",s="")=>{let i=`Create a multiple-choice quiz with ${e} questions based on the following document(s).`;s&&s.trim()&&(i+=` Focus on the topic: ${s}.`),i+=` The quiz should be at a ${t} difficulty level. For each question, provide 4 distinct options and indicate the correct answer. The output must be a valid JSON array of objects. Each object should have a "question" (string), "options" (array of 4 strings), and "answer" (string, the full text of the correct option). Do not include any text outside of the JSON array.`;const r=await uA(n,i,!0);return MF(r.text)||[]},Pte=async(n,e,t="medium")=>{const s=`Answer the following question in a detailed, well-explained manner at a ${t} complexity level, using only the provided documents for context.

Question: ${e}`;return(await uA(n,s)).text},Ite=n=>{let e=n.map(t=>`--- Content from ${t.name} (${t.type}) ---
${(t.content||"").slice(0,2e3)}`).join(`

`);return e.length>1e4&&(e=e.slice(0,1e4)+`
...`),{async sendMessage(t){try{const s=`Context:
${e}

User: ${t}

Assistant:`;return{text:(await IF.models.generateContent({model:NF,contents:[{text:s}]})).text}}catch(s){throw console.error("Gemini chat error:",s),new Error((s==null?void 0:s.message)||"Gemini chat failed")}}}};function uw(n,[e,t]){return Math.min(t,Math.max(e,n))}function Fx(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var DF=["PageUp","PageDown"],LF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],FF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hf="Slider",[JS,Nte,Mte]=ix(Hf),[OF,Ere]=Fs(Hf,[Mte]),[Dte,Ox]=OF(Hf),UF=b.forwardRef((n,e)=>{const{name:t,min:s=0,max:i=100,step:r=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:w,...v}=n,_=b.useRef(new Set),x=b.useRef(0),C=o==="horizontal"?Lte:Fte,[T=[],k]=Oo({prop:u,defaultProp:c,onChange:L=>{var G;(G=[..._.current][x.current])==null||G.focus(),p(L)}}),P=b.useRef(T);function I(L){const V=Vte(T,L);M(L,V)}function N(L){M(L,x.current)}function D(){const L=P.current[x.current];T[x.current]!==L&&m(T)}function M(L,V,{commit:G}={commit:!1}){const B=Gte(r),j=qte(Math.round((L-s)/r)*r+s,B),F=uw(j,[s,i]);k(($=[])=>{const O=$te($,F,V);if(Hte(O,l*r)){x.current=O.indexOf(F);const U=String(O)!==String($);return U&&G&&m(O),U?O:$}else return $})}return y.jsx(Dte,{scope:n.__scopeSlider,name:t,disabled:a,min:s,max:i,valueIndexToChangeRef:x,thumbs:_.current,values:T,orientation:o,form:w,children:y.jsx(JS.Provider,{scope:n.__scopeSlider,children:y.jsx(JS.Slot,{scope:n.__scopeSlider,children:y.jsx(C,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:oe(v.onPointerDown,()=>{a||(P.current=T)}),min:s,max:i,inverted:g,onSlideStart:a?void 0:I,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:D,onHomeKeyDown:()=>!a&&M(s,0,{commit:!0}),onEndKeyDown:()=>!a&&M(i,T.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:V})=>{if(!a){const j=DF.includes(L.key)||L.shiftKey&&LF.includes(L.key)?10:1,F=x.current,$=T[F],O=r*j*V;M($+O,F,{commit:!0})}}})})})})});UF.displayName=Hf;var[$F,BF]=OF(Hf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Lte=b.forwardRef((n,e)=>{const{min:t,max:s,dir:i,inverted:r,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[p,m]=b.useState(null),g=Pe(e,C=>m(C)),w=b.useRef(void 0),v=Cy(i),_=v==="ltr",x=_&&!r||!_&&r;function S(C){const T=w.current||p.getBoundingClientRect(),k=[0,T.width],I=dA(k,x?[t,s]:[s,t]);return w.current=T,I(C-T.left)}return y.jsx($F,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(VF,{dir:v,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const T=S(C.clientX);o==null||o(T)},onSlideMove:C=>{const T=S(C.clientX);a==null||a(T)},onSlideEnd:()=>{w.current=void 0,l==null||l()},onStepKeyDown:C=>{const k=FF[x?"from-left":"from-right"].includes(C.key);c==null||c({event:C,direction:k?-1:1})}})})}),Fte=b.forwardRef((n,e)=>{const{min:t,max:s,inverted:i,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=b.useRef(null),p=Pe(e,u),m=b.useRef(void 0),g=!i;function w(v){const _=m.current||u.current.getBoundingClientRect(),x=[0,_.height],C=dA(x,g?[s,t]:[t,s]);return m.current=_,C(v-_.top)}return y.jsx($F,{scope:n.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(VF,{"data-orientation":"vertical",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const _=w(v.clientY);r==null||r(_)},onSlideMove:v=>{const _=w(v.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:v=>{const x=FF[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:x?-1:1})}})})}),VF=b.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:i,onSlideEnd:r,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=Ox(Hf,t);return y.jsx(fe.span,{...c,ref:e,onKeyDown:oe(n.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(a(p),p.preventDefault()):DF.concat(LF).includes(p.key)&&(l(p),p.preventDefault())}),onPointerDown:oe(n.onPointerDown,p=>{const m=p.target;m.setPointerCapture(p.pointerId),p.preventDefault(),u.thumbs.has(m)?m.focus():s(p)}),onPointerMove:oe(n.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:oe(n.onPointerUp,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&(m.releasePointerCapture(p.pointerId),r(p))})})}),jF="SliderTrack",zF=b.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=Ox(jF,t);return y.jsx(fe.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});zF.displayName=jF;var XS="SliderRange",HF=b.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=Ox(XS,t),r=BF(XS,t),o=b.useRef(null),a=Pe(e,o),l=i.values.length,c=i.values.map(m=>WF(m,i.min,i.max)),u=l>1?Math.min(...c):0,p=100-Math.max(...c);return y.jsx(fe.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:a,style:{...n.style,[r.startEdge]:u+"%",[r.endEdge]:p+"%"}})});HF.displayName=XS;var QS="SliderThumb",GF=b.forwardRef((n,e)=>{const t=Nte(n.__scopeSlider),[s,i]=b.useState(null),r=Pe(e,a=>i(a)),o=b.useMemo(()=>s?t().findIndex(a=>a.ref.current===s):-1,[t,s]);return y.jsx(Ote,{...n,ref:r,index:o})}),Ote=b.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:i,...r}=n,o=Ox(QS,t),a=BF(QS,t),[l,c]=b.useState(null),u=Pe(e,S=>c(S)),p=l?o.form||!!l.closest("form"):!0,m=hx(l),g=o.values[s],w=g===void 0?0:WF(g,o.min,o.max),v=Bte(s,o.values.length),_=m==null?void 0:m[a.size],x=_?jte(_,w,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${w}% + ${x}px)`},children:[y.jsx(JS.ItemSlot,{scope:n.__scopeSlider,children:y.jsx(fe.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...r,ref:u,style:g===void 0?{display:"none"}:n.style,onFocus:oe(n.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),p&&y.jsx(qF,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},s)]})});GF.displayName=QS;var Ute="RadioBubbleInput",qF=b.forwardRef(({__scopeSlider:n,value:e,...t},s)=>{const i=b.useRef(null),r=Pe(i,s),o=Fx(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),y.jsx(fe.input,{style:{display:"none"},...t,ref:r,defaultValue:e})});qF.displayName=Ute;function $te(n=[],e,t){const s=[...n];return s[t]=e,s.sort((i,r)=>i-r)}function WF(n,e,t){const r=100/(t-e)*(n-e);return uw(r,[0,100])}function Bte(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Vte(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),s=Math.min(...t);return t.indexOf(s)}function jte(n,e,t){const s=n/2,r=dA([0,50],[0,s]);return(s-r(e)*t)*t}function zte(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function Hte(n,e){if(e>0){const t=zte(n);return Math.min(...t)>=e}return!0}function dA(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function Gte(n){return(String(n).split(".")[1]||"").length}function qte(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var KF=UF,Wte=zF,Kte=HF,Yte=GF;const hA=b.forwardRef(({className:n,...e},t)=>y.jsxs(KF,{ref:t,className:Te("relative flex w-full touch-none select-none items-center",n),...e,children:[y.jsx(Wte,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:y.jsx(Kte,{className:"absolute h-full bg-primary"})}),y.jsx(Yte,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));hA.displayName=KF.displayName;var Jte=[" ","Enter","ArrowUp","ArrowDown"],Xte=[" ","Enter"],Ou="Select",[Ux,$x,Qte]=ix(Ou),[Gf,Tre]=Fs(Ou,[Qte,fx]),Bx=fx(),[Zte,Ll]=Gf(Ou),[ene,tne]=Gf(Ou),YF=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:r,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:p,disabled:m,required:g,form:w}=n,v=Bx(e),[_,x]=b.useState(null),[S,C]=b.useState(null),[T,k]=b.useState(!1),P=Cy(c),[I,N]=Oo({prop:s,defaultProp:i??!1,onChange:r,caller:Ou}),[D,M]=Oo({prop:o,defaultProp:a,onChange:l,caller:Ou}),L=b.useRef(null),V=_?w||!!_.closest("form"):!0,[G,B]=b.useState(new Set),j=Array.from(G).map(F=>F.props.value).join(";");return y.jsx(iz,{...v,children:y.jsxs(Zte,{required:g,scope:e,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:T,onValueNodeHasChildrenChange:k,contentId:gl(),value:D,onValueChange:M,open:I,onOpenChange:N,dir:P,triggerPointerDownPosRef:L,disabled:m,children:[y.jsx(Ux.Provider,{scope:e,children:y.jsx(ene,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(F=>{B($=>new Set($).add(F))},[]),onNativeOptionRemove:b.useCallback(F=>{B($=>{const O=new Set($);return O.delete(F),O})},[]),children:t})}),V?y.jsxs(wO,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:p,value:D,onChange:F=>M(F.target.value),disabled:m,form:w,children:[D===void 0?y.jsx("option",{value:""}):null,Array.from(G)]},j):null]})})};YF.displayName=Ou;var JF="SelectTrigger",XF=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,r=Bx(t),o=Ll(JF,t),a=o.disabled||s,l=Pe(e,o.onTriggerChange),c=$x(t),u=b.useRef("touch"),[p,m,g]=_O(v=>{const _=c().filter(C=>!C.disabled),x=_.find(C=>C.value===o.value),S=CO(_,v,x);S!==void 0&&o.onValueChange(S.value)}),w=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return y.jsx(BD,{asChild:!0,...r,children:y.jsx(fe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":xO(o.value)?"":void 0,...i,ref:l,onClick:oe(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:oe(i.onPointerDown,v=>{u.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:oe(i.onKeyDown,v=>{const _=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(_&&v.key===" ")&&Jte.includes(v.key)&&(w(),v.preventDefault())})})})});XF.displayName=JF;var QF="SelectValue",ZF=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:r,placeholder:o="",...a}=n,l=Ll(QF,t),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,p=Pe(e,l.onValueNodeChange);return gn(()=>{c(u)},[c,u]),y.jsx(fe.span,{...a,ref:p,style:{pointerEvents:"none"},children:xO(l.value)?y.jsx(y.Fragment,{children:o}):r})});ZF.displayName=QF;var nne="SelectIcon",eO=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return y.jsx(fe.span,{"aria-hidden":!0,...i,ref:e,children:s||"▼"})});eO.displayName=nne;var sne="SelectPortal",tO=n=>y.jsx(rx,{asChild:!0,...n});tO.displayName=sne;var Uu="SelectContent",nO=b.forwardRef((n,e)=>{const t=Ll(Uu,n.__scopeSelect),[s,i]=b.useState();if(gn(()=>{i(new DocumentFragment)},[]),!t.open){const r=s;return r?Hu.createPortal(y.jsx(sO,{scope:n.__scopeSelect,children:y.jsx(Ux.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),r):null}return y.jsx(iO,{...n,ref:e})});nO.displayName=Uu;var fi=10,[sO,Fl]=Gf(Uu),ine="SelectContentImpl",rne=xf("SelectContent.RemoveScroll"),iO=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...x}=n,S=Ll(Uu,t),[C,T]=b.useState(null),[k,P]=b.useState(null),I=Pe(e,z=>T(z)),[N,D]=b.useState(null),[M,L]=b.useState(null),V=$x(t),[G,B]=b.useState(!1),j=b.useRef(!1);b.useEffect(()=>{if(C)return o2(C)},[C]),XL();const F=b.useCallback(z=>{const[ke,...tt]=V().map(he=>he.ref.current),[Me]=tt.slice(-1),ee=document.activeElement;for(const he of z)if(he===ee||(he==null||he.scrollIntoView({block:"nearest"}),he===ke&&k&&(k.scrollTop=0),he===Me&&k&&(k.scrollTop=k.scrollHeight),he==null||he.focus(),document.activeElement!==ee))return},[V,k]),$=b.useCallback(()=>F([N,C]),[F,N,C]);b.useEffect(()=>{G&&$()},[G,$]);const{onOpenChange:O,triggerPointerDownPosRef:U}=S;b.useEffect(()=>{if(C){let z={x:0,y:0};const ke=Me=>{var ee,he;z={x:Math.abs(Math.round(Me.pageX)-(((ee=U.current)==null?void 0:ee.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((he=U.current)==null?void 0:he.y)??0))}},tt=Me=>{z.x<=10&&z.y<=10?Me.preventDefault():C.contains(Me.target)||O(!1),document.removeEventListener("pointermove",ke),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",tt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",tt,{capture:!0})}}},[C,O,U]),b.useEffect(()=>{const z=()=>O(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[O]);const[q,le]=_O(z=>{const ke=V().filter(ee=>!ee.disabled),tt=ke.find(ee=>ee.ref.current===document.activeElement),Me=CO(ke,z,tt);Me&&setTimeout(()=>Me.ref.current.focus())}),J=b.useCallback((z,ke,tt)=>{const Me=!j.current&&!tt;(S.value!==void 0&&S.value===ke||Me)&&(D(z),Me&&(j.current=!0))},[S.value]),se=b.useCallback(()=>C==null?void 0:C.focus(),[C]),me=b.useCallback((z,ke,tt)=>{const Me=!j.current&&!tt;(S.value!==void 0&&S.value===ke||Me)&&L(z)},[S.value]),Ne=s==="popper"?ZS:rO,$e=Ne===ZS?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return y.jsx(sO,{scope:t,content:C,viewport:k,onViewportChange:P,itemRefCallback:J,selectedItem:N,onItemLeave:se,itemTextRefCallback:me,focusSelectedItem:$,selectedItemText:M,position:s,isPositioned:G,searchRef:q,children:y.jsx(YT,{as:rne,allowPinchZoom:!0,children:y.jsx(KT,{asChild:!0,trapped:S.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:oe(i,z=>{var ke;(ke=S.trigger)==null||ke.focus({preventScroll:!0}),z.preventDefault()}),children:y.jsx(uy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(Ne,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:z=>z.preventDefault(),...x,...$e,onPlaced:()=>B(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:oe(x.onKeyDown,z=>{const ke=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!ke&&z.key.length===1&&le(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let Me=V().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(z.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const ee=z.target,he=Me.indexOf(ee);Me=Me.slice(he+1)}setTimeout(()=>F(Me)),z.preventDefault()}})})})})})})});iO.displayName=ine;var one="SelectItemAlignedPosition",rO=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,r=Ll(Uu,t),o=Fl(Uu,t),[a,l]=b.useState(null),[c,u]=b.useState(null),p=Pe(e,I=>u(I)),m=$x(t),g=b.useRef(!1),w=b.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,C=b.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&c&&v&&_&&x){const I=r.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),D=r.valueNode.getBoundingClientRect(),M=x.getBoundingClientRect();if(r.dir!=="rtl"){const ee=M.left-N.left,he=D.left-ee,Le=I.left-he,gt=I.width+Le,Nr=Math.max(gt,N.width),Yo=window.innerWidth-fi,Ol=uw(he,[fi,Math.max(fi,Yo-Nr)]);a.style.minWidth=gt+"px",a.style.left=Ol+"px"}else{const ee=N.right-M.right,he=window.innerWidth-D.right-ee,Le=window.innerWidth-I.right-he,gt=I.width+Le,Nr=Math.max(gt,N.width),Yo=window.innerWidth-fi,Ol=uw(he,[fi,Math.max(fi,Yo-Nr)]);a.style.minWidth=gt+"px",a.style.right=Ol+"px"}const L=m(),V=window.innerHeight-fi*2,G=v.scrollHeight,B=window.getComputedStyle(c),j=parseInt(B.borderTopWidth,10),F=parseInt(B.paddingTop,10),$=parseInt(B.borderBottomWidth,10),O=parseInt(B.paddingBottom,10),U=j+F+G+O+$,q=Math.min(_.offsetHeight*5,U),le=window.getComputedStyle(v),J=parseInt(le.paddingTop,10),se=parseInt(le.paddingBottom,10),me=I.top+I.height/2-fi,Ne=V-me,$e=_.offsetHeight/2,z=_.offsetTop+$e,ke=j+F+z,tt=U-ke;if(ke<=me){const ee=L.length>0&&_===L[L.length-1].ref.current;a.style.bottom="0px";const he=c.clientHeight-v.offsetTop-v.offsetHeight,Le=Math.max(Ne,$e+(ee?se:0)+he+$),gt=ke+Le;a.style.height=gt+"px"}else{const ee=L.length>0&&_===L[0].ref.current;a.style.top="0px";const Le=Math.max(me,j+v.offsetTop+(ee?J:0)+$e)+tt;a.style.height=Le+"px",v.scrollTop=ke-me+v.offsetTop}a.style.margin=`${fi}px 0`,a.style.minHeight=q+"px",a.style.maxHeight=V+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[m,r.trigger,r.valueNode,a,c,v,_,x,r.dir,s]);gn(()=>C(),[C]);const[T,k]=b.useState();gn(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const P=b.useCallback(I=>{I&&w.current===!0&&(C(),S==null||S(),w.current=!1)},[C,S]);return y.jsx(lne,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:P,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:y.jsx(fe.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});rO.displayName=one;var ane="SelectPopperPosition",ZS=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=fi,...r}=n,o=Bx(t);return y.jsx(VD,{...o,...r,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ZS.displayName=ane;var[lne,fA]=Gf(Uu,{}),eb="SelectViewport",oO=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,r=Fl(eb,t),o=fA(eb,t),a=Pe(e,r.onViewportChange),l=b.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),y.jsx(Ux.Slot,{scope:t,children:y.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:oe(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&p){const g=Math.abs(l.current-u.scrollTop);if(g>0){const w=window.innerHeight-fi*2,v=parseFloat(p.style.minHeight),_=parseFloat(p.style.height),x=Math.max(v,_);if(x<w){const S=x+g,C=Math.min(w,S),T=S-C;p.style.height=C+"px",p.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,p.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});oO.displayName=eb;var aO="SelectGroup",[cne,une]=Gf(aO),dne=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=gl();return y.jsx(cne,{scope:t,id:i,children:y.jsx(fe.div,{role:"group","aria-labelledby":i,...s,ref:e})})});dne.displayName=aO;var lO="SelectLabel",cO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=une(lO,t);return y.jsx(fe.div,{id:i.id,...s,ref:e})});cO.displayName=lO;var dw="SelectItem",[hne,uO]=Gf(dw),dO=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:r,...o}=n,a=Ll(dw,t),l=Fl(dw,t),c=a.value===s,[u,p]=b.useState(r??""),[m,g]=b.useState(!1),w=Pe(e,S=>{var C;return(C=l.itemRefCallback)==null?void 0:C.call(l,S,s,i)}),v=gl(),_=b.useRef("touch"),x=()=>{i||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(hne,{scope:t,value:s,disabled:i,textId:v,isSelected:c,onItemTextChange:b.useCallback(S=>{p(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(Ux.ItemSlot,{scope:t,value:s,disabled:i,textValue:u,children:y.jsx(fe.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:w,onFocus:oe(o.onFocus,()=>g(!0)),onBlur:oe(o.onBlur,()=>g(!1)),onClick:oe(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:oe(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:oe(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:oe(o.onPointerMove,S=>{var C;_.current=S.pointerType,i?(C=l.onItemLeave)==null||C.call(l):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:oe(o.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=l.onItemLeave)==null||C.call(l))}),onKeyDown:oe(o.onKeyDown,S=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&S.key===" "||(Xte.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});dO.displayName=dw;var vp="SelectItemText",hO=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...r}=n,o=Ll(vp,t),a=Fl(vp,t),l=uO(vp,t),c=tne(vp,t),[u,p]=b.useState(null),m=Pe(e,x=>p(x),l.onItemTextChange,x=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,x,l.value,l.disabled)}),g=u==null?void 0:u.textContent,w=b.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=c;return gn(()=>(v(w),()=>_(w)),[v,_,w]),y.jsxs(y.Fragment,{children:[y.jsx(fe.span,{id:l.textId,...r,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hu.createPortal(r.children,o.valueNode):null]})});hO.displayName=vp;var fO="SelectItemIndicator",pO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return uO(fO,t).isSelected?y.jsx(fe.span,{"aria-hidden":!0,...s,ref:e}):null});pO.displayName=fO;var tb="SelectScrollUpButton",mO=b.forwardRef((n,e)=>{const t=Fl(tb,n.__scopeSelect),s=fA(tb,n.__scopeSelect),[i,r]=b.useState(!1),o=Pe(e,s.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;r(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?y.jsx(yO,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});mO.displayName=tb;var nb="SelectScrollDownButton",gO=b.forwardRef((n,e)=>{const t=Fl(nb,n.__scopeSelect),s=fA(nb,n.__scopeSelect),[i,r]=b.useState(!1),o=Pe(e,s.onScrollButtonChange);return gn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?y.jsx(yO,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});gO.displayName=nb;var yO=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,r=Fl("SelectScrollButton",t),o=b.useRef(null),a=$x(t),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),gn(()=>{var u;const c=a().find(p=>p.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),y.jsx(fe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:oe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:oe(i.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:oe(i.onPointerLeave,()=>{l()})})}),fne="SelectSeparator",vO=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return y.jsx(fe.div,{"aria-hidden":!0,...s,ref:e})});vO.displayName=fne;var sb="SelectArrow",pne=b.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=Bx(t),r=Ll(sb,t),o=Fl(sb,t);return r.open&&o.position==="popper"?y.jsx(jD,{...i,...s,ref:e}):null});pne.displayName=sb;var mne="SelectBubbleInput",wO=b.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const i=b.useRef(null),r=Pe(s,i),o=Fx(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),y.jsx(fe.select,{...t,style:{...HM,...t.style},ref:r,defaultValue:e})});wO.displayName=mne;function xO(n){return n===""||n===void 0}function _O(n){const e=ii(n),t=b.useRef(""),s=b.useRef(0),i=b.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),r=b.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,r]}function CO(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=gne(n,Math.max(r,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function gne(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var yne=YF,SO=XF,vne=ZF,wne=eO,xne=tO,bO=nO,_ne=oO,EO=cO,TO=dO,Cne=hO,Sne=pO,AO=mO,kO=gO,RO=vO;const pA=yne,mA=vne,Vx=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(SO,{ref:s,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,y.jsx(wne,{asChild:!0,children:y.jsx(fD,{className:"h-4 w-4 opacity-50"})})]}));Vx.displayName=SO.displayName;const PO=b.forwardRef(({className:n,...e},t)=>y.jsx(AO,{ref:t,className:Te("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(i3,{className:"h-4 w-4"})}));PO.displayName=AO.displayName;const IO=b.forwardRef(({className:n,...e},t)=>y.jsx(kO,{ref:t,className:Te("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(fD,{className:"h-4 w-4"})}));IO.displayName=kO.displayName;const jx=b.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>y.jsx(xne,{children:y.jsxs(bO,{ref:i,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[y.jsx(PO,{}),y.jsx(_ne,{className:Te("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(IO,{})]})}));jx.displayName=bO.displayName;const bne=b.forwardRef(({className:n,...e},t)=>y.jsx(EO,{ref:t,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));bne.displayName=EO.displayName;const Tr=b.forwardRef(({className:n,children:e,...t},s)=>y.jsxs(TO,{ref:s,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(Sne,{children:y.jsx(Au,{className:"h-4 w-4"})})}),y.jsx(Cne,{children:e})]}));Tr.displayName=TO.displayName;const Ene=b.forwardRef(({className:n,...e},t)=>y.jsx(RO,{ref:t,className:Te("-mx-1 my-1 h-px bg-muted",n),...e}));Ene.displayName=RO.displayName;const Tne=({flashcardSets:n,onCreateSet:e,onUpdateSet:t})=>{const[s,i]=b.useState(null),[r,o]=b.useState(!1),[a,l]=b.useState(""),[c,u]=b.useState({count:15,difficulty:"medium",topic:""}),[p,m]=b.useState(!1),[g,w]=b.useState(null),[v,_]=b.useState(0),[x,S]=b.useState(!1);b.useEffect(()=>{_(0),S(!1)},[s]);const C=async()=>{m(!0),w(null);try{const M=await kte([],c.count,c.difficulty,c.topic),L={id:`set_${Date.now()}`,name:a||`Set ${n.length+1}`,createdAt:new Date().toISOString(),settings:{...c},flashcards:M};e(L),i(L.id),o(!1),l("")}catch(M){w(M instanceof Error?M.message:"Failed to generate flashcards")}finally{m(!1)}},T=n.find(M=>M.id===s)||null;if(!T)return y.jsx(mp,{title:"Flashcards",isLoading:p,error:g,children:y.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[y.jsxs("div",{className:"w-full max-w-xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Your Flashcard Sets"}),y.jsx(pe,{onClick:()=>o(!0),className:"px-4 py-2",children:"+ New Set"})]}),n.length===0?y.jsx("div",{className:"text-gray-500 text-center py-8",children:"No flashcard sets yet."}):y.jsx("ul",{className:"space-y-3",children:n.map(M=>y.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 cursor-pointer hover:bg-purple-50",onClick:()=>i(M.id),children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold",children:M.name}),y.jsxs("div",{className:"text-xs text-gray-500",children:[M.flashcards.filter(L=>L.mastered).length," / ",M.flashcards.length," mastered"]})]}),y.jsx(pe,{size:"sm",variant:"outline",onClick:L=>{L.stopPropagation(),i(M.id)},children:"Study"})]},M.id))})]}),r&&y.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Flashcard Set"}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Set Name"}),y.jsx(Nu,{value:a,onChange:M=>l(M.target.value),placeholder:"e.g. Chapter 1 Vocab"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Number of flashcards"}),y.jsx(hA,{value:[c.count],min:5,max:30,step:1,onValueChange:M=>u({...c,count:M[0]})}),y.jsx("span",{className:"ml-2",children:c.count})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Difficulty"}),y.jsxs(pA,{value:c.difficulty,onValueChange:M=>u({...c,difficulty:M}),children:[y.jsx(Vx,{children:y.jsx(mA,{placeholder:"Select difficulty"})}),y.jsxs(jx,{children:[y.jsx(Tr,{value:"easy",children:"Easy"}),y.jsx(Tr,{value:"medium",children:"Medium"}),y.jsx(Tr,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Topic (optional)"}),y.jsx(Nu,{value:c.topic,onChange:M=>u({...c,topic:M.target.value}),placeholder:"e.g. Photosynthesis"})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsx(pe,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),y.jsx(pe,{onClick:C,disabled:p,children:p?"Generating...":"Create"})]}),g&&y.jsx("div",{className:"text-red-500 mt-2 text-sm",children:g})]})})]})});const k=T.flashcards,P=k[v],I=()=>{v<k.length-1&&(_(v+1),S(!1))},N=()=>{v>0&&(_(v-1),S(!1))},D=()=>{const M=[...k];M[v].mastered=!M[v].mastered;const L={...T,flashcards:M};t(L)};return p?y.jsx(mp,{title:"Flashcards",isLoading:p,error:g,children:y.jsx("div",{className:"flex justify-center items-center h-32",children:"Generating flashcards..."})}):g?y.jsx(mp,{title:"Flashcards",isLoading:p,error:g,children:y.jsx("div",{className:"flex justify-center items-center h-32 text-red-500",children:g})}):y.jsx(mp,{title:T.name,isLoading:p,error:g,children:y.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[y.jsxs("div",{className:"text-base text-gray-500 mb-2",children:["Card ",v+1," of ",k.length," | ",k.filter(M=>M.mastered).length," mastered"]}),y.jsx("div",{className:"w-full flex justify-center",children:y.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 w-full max-w-2xl min-h-[320px] flex flex-col justify-center items-center border border-gray-200 transition-all duration-300",children:[y.jsx("div",{className:"text-3xl font-extrabold mb-6 text-gray-900",children:P.front}),x&&y.jsx("div",{className:"text-2xl text-gray-700 border-t pt-8 mt-8 w-full text-center",children:P.back})]})}),y.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mt-10",children:[y.jsx(pe,{onClick:N,disabled:v===0,className:"min-w-[140px] py-3 text-lg",children:"Previous"}),y.jsx(pe,{onClick:()=>S(!x),className:"min-w-[180px] py-3 text-lg",children:x?"Hide Answer":"Show Answer"}),y.jsx(pe,{onClick:I,disabled:v===k.length-1,className:"min-w-[140px] py-3 text-lg",children:"Next"})]}),y.jsx("div",{className:"flex justify-center mt-6",children:y.jsx(pe,{variant:P.mastered?"default":"outline",onClick:D,className:"min-w-[220px] py-3 text-lg",children:P.mastered?"Mastered":"Mark as Mastered"})}),y.jsx("div",{className:"flex justify-center mt-8",children:y.jsx(pe,{variant:"outline",onClick:()=>i(null),children:"Back to Sets"})})]})})};var zx="Checkbox",[Ane,Are]=Fs(zx),[kne,gA]=Ane(zx);function Rne(n){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:i,disabled:r,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:p}=n,[m,g]=Oo({prop:t,defaultProp:i??!1,onChange:l,caller:zx}),[w,v]=b.useState(null),[_,x]=b.useState(null),S=b.useRef(!1),C=w?!!o||!!w.closest("form"):!0,T={checked:m,disabled:r,setChecked:g,control:w,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:wl(i)?!1:i,isFormControl:C,bubbleInput:_,setBubbleInput:x};return y.jsx(kne,{scope:e,...T,children:Pne(p)?p(T):s})}var NO="CheckboxTrigger",MO=b.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...s},i)=>{const{control:r,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:w}=gA(NO,n),v=Pe(i,u),_=b.useRef(l);return b.useEffect(()=>{const x=r==null?void 0:r.form;if(x){const S=()=>p(_.current);return x.addEventListener("reset",S),()=>x.removeEventListener("reset",S)}},[r,p]),y.jsx(fe.button,{type:"button",role:"checkbox","aria-checked":wl(l)?"mixed":l,"aria-required":c,"data-state":UO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...s,ref:v,onKeyDown:oe(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:oe(t,x=>{p(S=>wl(S)?!0:!S),w&&g&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});MO.displayName=NO;var yA=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:i,defaultChecked:r,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...p}=n;return y.jsx(Rne,{__scopeCheckbox:t,checked:i,defaultChecked:r,disabled:a,required:o,onCheckedChange:c,name:s,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>y.jsxs(y.Fragment,{children:[y.jsx(MO,{...p,ref:e,__scopeCheckbox:t}),m&&y.jsx(OO,{__scopeCheckbox:t})]})})});yA.displayName=zx;var DO="CheckboxIndicator",LO=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...i}=n,r=gA(DO,t);return y.jsx(Go,{present:s||wl(r.checked)||r.checked===!0,children:y.jsx(fe.span,{"data-state":UO(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});LO.displayName=DO;var FO="CheckboxBubbleInput",OO=b.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:i,checked:r,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:p,bubbleInput:m,setBubbleInput:g}=gA(FO,n),w=Pe(t,g),v=Fx(r),_=hx(s);b.useEffect(()=>{const S=m;if(!S)return;const C=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(C,"checked").set,P=!i.current;if(v!==r&&k){const I=new Event("click",{bubbles:P});S.indeterminate=wl(r),k.call(S,wl(r)?!1:r),S.dispatchEvent(I)}},[m,v,r,i]);const x=b.useRef(wl(r)?!1:r);return y.jsx(fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:p,...e,tabIndex:-1,ref:w,style:{...e.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});OO.displayName=FO;function Pne(n){return typeof n=="function"}function wl(n){return n==="indeterminate"}function UO(n){return wl(n)?"indeterminate":n?"checked":"unchecked"}const wp=b.forwardRef(({className:n,...e},t)=>y.jsx(yA,{ref:t,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(LO,{className:Te("flex items-center justify-center text-current"),children:y.jsx(Au,{className:"h-4 w-4"})})}));wp.displayName=yA.displayName;function Ine(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Nne=["color"],Mne=b.forwardRef(function(n,e){var t=n.color,s=t===void 0?"currentColor":t,i=Ine(n,Nne);return b.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),b.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}),vA="Radio",[Dne,$O]=Fs(vA),[Lne,Fne]=Dne(vA),BO=b.forwardRef((n,e)=>{const{__scopeRadio:t,name:s,checked:i=!1,required:r,disabled:o,value:a="on",onCheck:l,form:c,...u}=n,[p,m]=b.useState(null),g=Pe(e,_=>m(_)),w=b.useRef(!1),v=p?c||!!p.closest("form"):!0;return y.jsxs(Lne,{scope:t,checked:i,disabled:o,children:[y.jsx(fe.button,{type:"button",role:"radio","aria-checked":i,"data-state":HO(i),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:g,onClick:oe(n.onClick,_=>{i||l==null||l(),v&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),v&&y.jsx(zO,{control:p,bubbles:!w.current,name:s,value:a,checked:i,required:r,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});BO.displayName=vA;var VO="RadioIndicator",jO=b.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:s,...i}=n,r=Fne(VO,t);return y.jsx(Go,{present:s||r.checked,children:y.jsx(fe.span,{"data-state":HO(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})})});jO.displayName=VO;var One="RadioBubbleInput",zO=b.forwardRef(({__scopeRadio:n,control:e,checked:t,bubbles:s=!0,...i},r)=>{const o=b.useRef(null),a=Pe(o,r),l=Fx(t),c=hx(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==t&&g){const w=new Event("click",{bubbles:s});g.call(u,t),u.dispatchEvent(w)}},[l,t,s]),y.jsx(fe.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zO.displayName=One;function HO(n){return n?"checked":"unchecked"}var Une=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hx="RadioGroup",[$ne,kre]=Fs(Hx,[Px,$O]),GO=Px(),qO=$O(),[Bne,Vne]=$ne(Hx),WO=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:s,defaultValue:i,value:r,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:p,...m}=n,g=GO(t),w=Cy(c),[v,_]=Oo({prop:r,defaultProp:i??null,onChange:p,caller:Hx});return y.jsx(Bne,{scope:t,name:s,required:o,disabled:a,value:v,onValueChange:_,children:y.jsx(F2,{asChild:!0,...g,orientation:l,dir:w,loop:u,children:y.jsx(fe.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:w,...m,ref:e})})})});WO.displayName=Hx;var KO="RadioGroupItem",YO=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:s,...i}=n,r=Vne(KO,t),o=r.disabled||s,a=GO(t),l=qO(t),c=b.useRef(null),u=Pe(e,c),p=r.value===i.value,m=b.useRef(!1);return b.useEffect(()=>{const g=v=>{Une.includes(v.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",w)}},[]),y.jsx(O2,{asChild:!0,...a,focusable:!o,active:p,children:y.jsx(BO,{disabled:o,required:r.required,checked:p,...l,...i,name:r.name,ref:u,onCheck:()=>r.onValueChange(i.value),onKeyDown:oe(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:oe(i.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});YO.displayName=KO;var jne="RadioGroupIndicator",JO=b.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...s}=n,i=qO(t);return y.jsx(jO,{...i,...s,ref:e})});JO.displayName=jne;var XO=WO,QO=YO,zne=JO;const hw=b.forwardRef(({className:n,...e},t)=>y.jsx(XO,{className:Te("grid gap-2",n),...e,ref:t}));hw.displayName=XO.displayName;const la=b.forwardRef(({className:n,...e},t)=>y.jsx(QO,{ref:t,className:Te("aspect-square h-5 w-5 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:y.jsx(zne,{className:"flex items-center justify-center",children:y.jsx(Mne,{className:"h-3.5 w-3.5 fill-primary"})})}));la.displayName=QO.displayName;function Hne({sessionId:n,quizzes:e,files:t,onQuizAdded:s}){const[i,r]=b.useState(null),[o,a]=b.useState(0),[l,c]=b.useState(null),[u,p]=b.useState(!1),[m,g]=b.useState(0),[w,v]=b.useState(!1),[_,x]=b.useState(!1),[S,C]=b.useState(!1),[T,k]=b.useState(!1),[P,I]=b.useState({questionCount:5,difficulty:"medium",topic:"",showExplanations:!0,questionTypes:["multiple-choice"]}),{toast:N}=Ho(),D=j=>{r(j),a(0),c(null),p(!1),g(0),v(!1)},M=j=>{u||c(j)},L=()=>{l===null||!i||(p(!0),l===i.questions[o].correctAnswer&&g(m+1))},V=()=>{i&&(o<i.questions.length-1?(a(o+1),c(null),p(!1)):v(!0))},G=()=>{!i||o===0||(a(o-1),c(null),p(!1))},B=async()=>{var j;C(!0);try{if(!t||t.length===0){N({title:"No study materials",description:"Please upload files first to generate quiz questions from your content",variant:"destructive"}),C(!1);return}const $=(await Rte(t,P.questionCount,P.difficulty,P.topic)).slice(0,P.questionCount),O={id:`quiz_${Date.now()}`,title:P.topic||((j=t[0])==null?void 0:j.name.replace(".pdf",""))||"Quiz",questions:$.map((U,q)=>({id:`q_${Date.now()}_${q}`,text:U.question,options:U.options,correctAnswer:U.options.findIndex(le=>le===U.answer),explanation:""}))};s(O),N({title:"Success",description:"New quiz generated successfully"})}catch(F){console.error("Error generating quiz:",F),N({title:"Error",description:"Failed to generate quiz",variant:"destructive"})}finally{C(!1)}};return y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Quizzes"}),y.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes"})]}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsxs(Ax,{open:T,onOpenChange:k,children:[y.jsx(kx,{asChild:!0,children:y.jsxs(pe,{variant:"outline",className:"flex items-center gap-2",children:[y.jsx(ak,{className:"h-4 w-4"}),"Quiz Options"]})}),y.jsxs(wy,{children:[y.jsx(xy,{children:y.jsx(_y,{children:"Quiz Generation Settings"})}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{children:"Number of questions"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(hA,{value:[P.questionCount],min:3,max:15,step:1,onValueChange:j=>I({...P,questionCount:j[0]}),className:"flex-grow"}),y.jsx("span",{className:"w-8 text-center font-medium",children:P.questionCount})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{children:"Difficulty level"}),y.jsxs(pA,{value:P.difficulty,onValueChange:j=>I({...P,difficulty:j}),children:[y.jsx(Vx,{children:y.jsx(mA,{placeholder:"Select difficulty"})}),y.jsxs(jx,{children:[y.jsx(Tr,{value:"easy",children:"Easy"}),y.jsx(Tr,{value:"medium",children:"Medium"}),y.jsx(Tr,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{children:"Specific Topic (optional)"}),y.jsx(Nu,{id:"topic",placeholder:"Leave blank to generate from uploaded files",value:P.topic,onChange:j=>I({...P,topic:j.target.value})}),y.jsx("p",{className:"text-xs text-gray-500",children:"If left blank, quiz will be generated based on your study materials"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(wt,{children:"Question Types"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(wp,{id:"multiple-choice",checked:P.questionTypes.includes("multiple-choice"),onCheckedChange:j=>{const F=j?[...P.questionTypes,"multiple-choice"]:P.questionTypes.filter($=>$!=="multiple-choice");I({...P,questionTypes:F.length>0?F:["multiple-choice"]})}}),y.jsx(wt,{htmlFor:"multiple-choice",children:"Multiple Choice"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(wp,{id:"true-false",checked:P.questionTypes.includes("true-false"),onCheckedChange:j=>{const F=j?[...P.questionTypes,"true-false"]:P.questionTypes.filter($=>$!=="true-false");I({...P,questionTypes:F})}}),y.jsx(wt,{htmlFor:"true-false",children:"True/False"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(wp,{id:"short-answer",checked:P.questionTypes.includes("short-answer"),onCheckedChange:j=>{const F=j?[...P.questionTypes,"short-answer"]:P.questionTypes.filter($=>$!=="short-answer");I({...P,questionTypes:F})}}),y.jsx(wt,{htmlFor:"short-answer",children:"Short Answer"})]})]}),y.jsx("p",{className:"text-xs text-gray-500",children:"Select the types of questions you want in your quiz"})]}),y.jsxs("div",{className:"flex items-start space-x-2",children:[y.jsx(wp,{id:"explanations",checked:P.showExplanations,onCheckedChange:j=>I({...P,showExplanations:j===!0})}),y.jsxs("div",{className:"grid gap-1.5 leading-none",children:[y.jsx(wt,{htmlFor:"explanations",children:"Include answer explanations"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Show detailed explanations after answering each question"})]})]})]}),y.jsx(ZT,{children:y.jsx(pe,{onClick:()=>k(!1),children:"Save Settings"})})]})]}),y.jsxs(pe,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:B,disabled:S,children:[S?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):y.jsx(lk,{className:"h-4 w-4"}),"Generate with AI"]})]})]}),i?w?y.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full gradient-bg mx-auto flex items-center justify-center mb-4",children:y.jsx(Au,{className:"h-8 w-8 text-white"})}),y.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Completed!"}),y.jsxs("p",{className:"text-gray-600 mb-2",children:["Your score: ",m," out of ",i.questions.length]}),y.jsxs("p",{className:"text-gray-600 mb-6",children:[Math.round(m/i.questions.length*100),"% correct"]}),y.jsxs("div",{className:"flex justify-center gap-4",children:[y.jsx(pe,{variant:"outline",onClick:()=>D(i),children:"Retry Quiz"}),y.jsx(pe,{className:"gradient-bg",onClick:()=>r(null),children:"Back to Quizzes"})]})]}):y.jsxs("div",{className:"bg-white rounded-lg border",children:[y.jsxs("div",{className:"border-b p-6",children:[y.jsx("h3",{className:"text-xl font-semibold",children:i.title}),y.jsxs("div",{className:"flex justify-between items-center mt-2",children:[y.jsxs("span",{className:"text-gray-600",children:["Question ",o+1," of ",i.questions.length]}),y.jsx(pe,{variant:"ghost",onClick:()=>r(null),children:"Exit Quiz"})]})]}),y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h4",{className:"text-lg font-medium mb-4",children:i.questions[o].text}),y.jsx(hw,{value:l==null?void 0:l.toString(),onValueChange:j=>M(parseInt(j)),className:"space-y-3",disabled:u,children:i.questions[o].options.map((j,F)=>{const $=F===i.questions[o].correctAnswer,O=l===F,U=u&&O&&!$,q=u&&$;let le="flex items-center space-x-3 p-4 rounded-md border ";return u?q?le+="border-green-500 bg-green-50":U?le+="border-red-500 bg-red-50":le+="border-gray-200":O?le+="border-purple-500 bg-purple-50":le+="border-gray-200 hover:border-gray-300",y.jsxs("div",{className:le,children:[y.jsx(la,{value:F.toString(),id:`option-${F}`}),y.jsx(wt,{htmlFor:`option-${F}`,className:"flex-grow cursor-pointer",children:j}),u&&$&&y.jsx(Au,{className:"h-5 w-5 text-green-600"}),u&&U&&y.jsx(lx,{className:"h-5 w-5 text-red-600"})]},F)})})]}),u&&y.jsxs("div",{className:`p-4 rounded-md ${l===i.questions[o].correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} mb-6`,children:[y.jsx("p",{className:`font-medium mb-1 ${l===i.questions[o].correctAnswer?"text-green-600":"text-red-600"}`,children:l===i.questions[o].correctAnswer?"Correct!":"Incorrect"}),y.jsx("p",{className:"text-gray-700",children:i.questions[o].explanation||"No explanation available."})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx(pe,{variant:"outline",disabled:o===0||!u,onClick:G,children:"Previous"}),u?y.jsx(pe,{className:"gradient-bg",onClick:V,children:o<i.questions.length-1?"Next Question":"Finish Quiz"}):y.jsx(pe,{className:"gradient-bg",onClick:L,disabled:l===null,children:"Check Answer"})]})]})]}):y.jsx("div",{children:e.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(j=>y.jsxs(wu,{className:"card-hover",children:[y.jsx(xu,{children:y.jsx(Gd,{children:j.title})}),y.jsx(_u,{children:y.jsxs("p",{className:"text-sm text-gray-500",children:[j.questions.length," questions"]})}),y.jsx(tw,{children:y.jsx(pe,{className:"gradient-bg w-full",onClick:()=>D(j),children:"Start Quiz"})})]},j.id))}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx("svg",{className:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate a quiz with AI based on your study materials"}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[y.jsxs(pe,{variant:"outline",onClick:()=>k(!0),children:[y.jsx(ak,{className:"mr-2 h-4 w-4"}),"Quiz Options"]}),y.jsxs(pe,{className:"gradient-bg",onClick:B,disabled:S,children:[S?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white mr-2"}):y.jsx(lk,{className:"mr-2 h-4 w-4"}),"Generate Quiz with AI"]})]})]})})]})}const Gne=n=>{if(!n)return"";let e=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e=e.replace(/\*\*(.*?)\*\*|__(.*?)__/g,"<strong>$1$2</strong>"),e=e.replace(/\*(.*?)\*|_(.*?)_/g,"<em>$1$2</em>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/^\s*\n\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/^\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/<\/ul>\n<ul>/gim,""),e=e.replace(/\n\* (.*)/gim,"<li>$1</li>"),e=e.replace(/\n\n/g,"</p><p>"),e=e.replace(/```(.*?)\n(.*?)```/gs,(t,s,i)=>{const r=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre><code class="language-${s}">${r}</code></pre>`}),e=`<p>${e}</p>`,e=e.replace(/<\/li><li>/g,`</li>
<li>`),e=e.replace(/<p><\/p>/g,""),e=e.replace(/<p><ul>/g,"<ul>"),e=e.replace(/<\/ul><\/p>/g,"</ul>"),e},qne=({content:n})=>{const e=Gne(n);return y.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e}})};var Lr=(n=>(n.SUMMARY="summary",n.NOTES="notes",n.OUTLINE="outline",n.FLASHCARDS="flashcards",n.QUIZ="quiz",n.CHAT="chat",n.STUDY_PLAN="study_plan",n.CONCEPT_MAP="concept_map",n))(Lr||{});const Wne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),y.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Kne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),y.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Yne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),y.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Jne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),y.jsx("polyline",{points:"14 2 14 8 20 8"}),y.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),y.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),y.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),Xne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),y.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),y.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),ZO=n=>y.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Qne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),y.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),y.jsx("path",{d:"M12 11h4"}),y.jsx("path",{d:"M12 16h4"}),y.jsx("path",{d:"M8 11h.01"}),y.jsx("path",{d:"M8 16h.01"})]}),Zne=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),y.jsx("circle",{cx:"18",cy:"6",r:"3"}),y.jsx("circle",{cx:"6",cy:"18",r:"3"}),y.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]});Lr.SUMMARY,Lr.NOTES,Lr.OUTLINE,Lr.FLASHCARDS,Lr.QUIZ,Lr.CHAT,Lr.STUDY_PLAN,Lr.CONCEPT_MAP;const ese=({files:n})=>{const[e,t]=b.useState([]),[s,i]=b.useState(""),[r,o]=b.useState(!1),a=b.useRef(null),[l,c]=b.useState(null),u=()=>{var g;(g=a.current)==null||g.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{c(Ite(n))},[n]),b.useEffect(()=>{u()},[e]);const p=async()=>{if(!s.trim()||!l)return;const g={id:Date.now().toString(),role:"user",content:s,timestamp:new Date().toISOString()};t(w=>[...w,g]),i(""),o(!0);try{const w=await l.sendMessage(s),v={id:(Date.now()+1).toString(),role:"assistant",content:w.text,timestamp:new Date().toISOString()};t(_=>[..._,v])}catch(w){const v={id:(Date.now()+1).toString(),role:"assistant",content:(w==null?void 0:w.message)||"Sorry, I encountered an error while processing your request. Please try again.",timestamp:new Date().toISOString()};t(_=>[..._,v])}finally{o(!1)}},m=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),p())};return y.jsx(mp,{title:"Chat with your Documents",isLoading:!1,error:null,children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 mb-4 px-2",children:[e.length===0&&y.jsxs("div",{className:"text-center text-gray-500 py-8",children:[y.jsx(ZO,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsx("p",{children:"Start a conversation about your documents!"})]}),e.map(g=>y.jsx("div",{className:`flex ${g.role==="user"?"justify-end":"justify-start"} w-full`,children:y.jsx("div",{className:`rounded-2xl px-6 py-4 max-w-[70%] ${g.role==="user"?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white self-end":"bg-gray-100 text-gray-900 self-start"} shadow-md`,children:y.jsx("div",{className:"text-base whitespace-pre-line",children:y.jsx(qne,{content:g.content})})})},g.id)),r&&y.jsx("div",{className:"flex justify-start w-full",children:y.jsx("div",{className:"rounded-2xl px-6 py-4 max-w-[70%] bg-gray-100 text-gray-900 shadow-md",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),y.jsx("div",{ref:a})]}),y.jsxs("div",{className:"flex space-x-2 mt-4 px-2 pb-2",children:[y.jsx(Nu,{value:s,onChange:g=>i(g.target.value),onKeyPress:m,placeholder:"Ask a question about your documents...",disabled:r,className:"flex-1 text-lg py-3"}),y.jsx(pe,{onClick:p,disabled:r||!s.trim(),className:"px-6 py-3 text-lg",children:"Send"})]})]})})},Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ib=[.001,0,0,.001,0,0],X_=1.35,bs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ha={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},eU="pdfjs_internal_editor_",we={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},tse={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},jv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Nt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Gx={ERRORS:0,WARNINGS:1,INFOS:5},fw={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},hv={moveTo:0,lineTo:1,curveTo:2,closePath:3},nse={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let qx=Gx.WARNINGS;function sse(n){Number.isInteger(n)&&(qx=n)}function ise(){return qx}function Wx(n){qx>=Gx.INFOS&&console.log(`Info: ${n}`)}function xe(n){qx>=Gx.WARNINGS&&console.log(`Warning: ${n}`)}function Ze(n){throw new Error(n)}function Ft(n,e){n||Ze(e)}function rse(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function tU(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=use(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return rse(s)?s:null}function nU(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&tU(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function De(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Ku=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class zP extends Ku{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Q_ extends Ku{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rb extends Ku{constructor(e){super(e,"InvalidPDFException")}}class pw extends Ku{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class ose extends Ku{constructor(e){super(e,"FormatError")}}class El extends Ku{constructor(e){super(e,"AbortException")}}function sU(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Ey(n){typeof n!="string"&&Ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function ase(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function lse(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function cse(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return De(this,"isLittleEndian",lse())}static get isEvalSupported(){return De(this,"isEvalSupported",cse())}static get isOffscreenCanvasSupported(){return De(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return De(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return De(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return De(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Z_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Io,zv,ob;class de{static makeHexColor(e,t,s){return`#${Z_[e]}${Z_[t]}${Z_[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const p=e[s+u],m=e[s+u+1];e[s+u]=p*i+m*o+l,e[s+u+1]=p*r+m*a+c}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],p=e[1],m=e[2],g=e[3];let w=i*u+l,v=w,_=i*m+l,x=_,S=a*p+c,C=S,T=a*g+c,k=T;if(r!==0||o!==0){const P=r*u,I=r*m,N=o*p,D=o*g;w+=N,x+=N,_+=D,v+=D,S+=P,k+=P,T+=I,C+=I}s[0]=Math.min(s[0],w,_,v,x),s[1]=Math.min(s[1],S,T,C,k),s[2]=Math.max(s[2],w,_,v,x),s[3]=Math.max(s[3],S,T,C,k)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],a=s**2+i**2,l=s*r+i*o,c=r**2+o**2,u=(a+c)/2,p=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+p||1),t[1]=Math.sqrt(u-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),R(this,Io,ob).call(this,e,s,r,a,t,i,o,l,3*(-e+3*(s-r)+a),6*(e-2*s+r),3*(s-e),c),R(this,Io,ob).call(this,e,s,r,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c)}}Io=new WeakSet,zv=function(e,t,s,i,r,o,a,l,c,u){if(c<=0||c>=1)return;const p=1-c,m=c*c,g=m*c,w=p*(p*(p*e+3*c*t)+3*m*s)+g*i,v=p*(p*(p*r+3*c*o)+3*m*a)+g*l;u[0]=Math.min(u[0],w),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],w),u[3]=Math.max(u[3],v)},ob=function(e,t,s,i,r,o,a,l,c,u,p,m){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&R(this,Io,zv).call(this,e,t,s,i,r,o,a,l,-p/u,m);return}const g=u**2-4*p*c;if(g<0)return;const w=Math.sqrt(g),v=2*c;R(this,Io,zv).call(this,e,t,s,i,r,o,a,l,(-u+w)/v,m),R(this,Io,zv).call(this,e,t,s,i,r,o,a,l,(-u-w)/v,m)},A(de,Io);function use(n){return decodeURIComponent(escape(n))}let eC=null,HP=null;function dse(n){return eC||(eC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,HP=new Map([["ﬅ","ſt"]])),n.replaceAll(eC,(e,t,s)=>t?t.normalize("NFKC"):HP.get(s))}function iU(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),sU(n)}const wA="pdfjs_internal_id_";function hse(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function On(n,e,t){return Math.min(Math.max(n,e),t)}function rU(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(sU(n))}function fse(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Ey(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Fr="http://www.w3.org/2000/svg",Yl=class Yl{};H(Yl,"CSS",96),H(Yl,"PDF",72),H(Yl,"PDF_TO_CSS_UNITS",Yl.CSS/Yl.PDF);let Tl=Yl;async function Ty(n,e="text"){if(xp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Ay{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,p,m,g;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,p=0,m=0,g=1;break;case 90:u=0,p=1,m=1,g=0;break;case 270:u=0,p=-1,m=-1,g=0;break;case 0:u=1,p=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,g=-g);let w,v,_,x;u===0?(w=Math.abs(c-e[1])*s+r,v=Math.abs(l-e[0])*s+o,_=(e[3]-e[1])*s,x=(e[2]-e[0])*s):(w=Math.abs(l-e[0])*s+r,v=Math.abs(c-e[1])*s+o,_=(e[2]-e[0])*s,x=(e[3]-e[1])*s),this.transform=[u*s,p*s,m*s,g*s,w-u*s*l-m*s*c,v-p*s*l-g*s*c],this.width=_,this.height=x}get rawDims(){const e=this.viewBox;return De(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Ay({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return de.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];de.applyTransform(t,this.transform);const s=[e[2],e[3]];return de.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return de.applyInverseTransform(s,this.transform),s}}class xA extends Ku{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Kx(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function _A(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function pse(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function mse(n,e="document.pdf"){if(typeof n!="string")return e;if(Kx(n))return xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(r.test(c))return i(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(r.test(c))return i(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return i(l[0])}return e}class GP{constructor(){H(this,"started",Object.create(null));H(this,"times",[])}time(e){e in this.started&&xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function xp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Vi(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function gse(n){console.log("Deprecated API usage: "+n)}var Im;class CA{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,Im)||E(this,Im,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,Im).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,c==="-"?(o+=u,a+=p):c==="+"&&(o-=u,a-=p),new Date(Date.UTC(s,i,r,o,a,l))}}Im=new WeakMap,A(CA,Im);function yse(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Ay({viewBox:r,userUnit:1,scale:e,rotation:t})}function SA(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(xe(`Not a valid color format: "${n}"`),[0,0,0])}function vse(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,SA(s))}e.remove()}function vt(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function qi(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function $u(n,e,t=!1,s=!0){if(e instanceof Ay){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,a=pn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,p=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=p):(o.width=p,o.height=u)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Rr{constructor(){const{pixelRatio:e}=Rr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let o=1/0,a=1/0,l=1/0;s=Rr.capPixels(s,r),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const ab=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Sa,cc,Bs,ba,Nm,ah,Mm,Sw,oU,Bn,aU,lU,_p,Hv;const Vr=class Vr{constructor(e){A(this,Bn);A(this,Sa,null);A(this,cc,null);A(this,Bs);A(this,ba,null);A(this,Nm,null);A(this,ah,null);E(this,Bs,e),d(Vr,Mm)||E(Vr,Mm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,Sa,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,Bs)._uiManager._signal;e.addEventListener("contextmenu",Vi,{signal:t}),e.addEventListener("pointerdown",R(Vr,Sw,oU),{signal:t});const s=E(this,ba,document.createElement("div"));s.className="buttons",e.append(s);const i=d(this,Bs).toolbarPosition;if(i){const{style:r}=e,o=d(this,Bs)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,Sa)}hide(){var e;d(this,Sa).classList.add("hidden"),(e=d(this,cc))==null||e.hideDropdown()}show(){var e;d(this,Sa).classList.remove("hidden"),(e=d(this,Nm))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,Bs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",d(Vr,Mm)[e]),R(this,Bn,_p).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),d(this,ba).append(s)}async addAltText(e){const t=await e.render();R(this,Bn,_p).call(this,t),d(this,ba).append(t,d(this,Bn,Hv)),E(this,Nm,e)}addColorPicker(e){E(this,cc,e);const t=e.renderButton();R(this,Bn,_p).call(this,t),d(this,ba).append(t,d(this,Bn,Hv))}async addEditSignatureButton(e){const t=E(this,ah,await e.renderEditButton(d(this,Bs)));R(this,Bn,_p).call(this,t),d(this,ba).append(t,d(this,Bn,Hv))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){d(this,ah)&&(d(this,ah).title=e)}remove(){var e;d(this,Sa).remove(),(e=d(this,cc))==null||e.destroy(),E(this,cc,null)}};Sa=new WeakMap,cc=new WeakMap,Bs=new WeakMap,ba=new WeakMap,Nm=new WeakMap,ah=new WeakMap,Mm=new WeakMap,Sw=new WeakSet,oU=function(e){e.stopPropagation()},Bn=new WeakSet,aU=function(e){d(this,Bs)._focusEventsAllowed=!1,Dt(e)},lU=function(e){d(this,Bs)._focusEventsAllowed=!0,Dt(e)},_p=function(e){const t=d(this,Bs)._uiManager._signal;e.addEventListener("focusin",R(this,Bn,aU).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,Bn,lU).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Vi,{signal:t})},Hv=function(){const e=document.createElement("div");return e.className="divider",e},A(Vr,Sw),A(Vr,Mm,null);let lb=Vr;var Dm,uc,dc,Al,cU,uU,dU;class wse{constructor(e){A(this,Al);A(this,Dm,null);A(this,uc,null);A(this,dc);E(this,dc,e)}show(e,t,s){const[i,r]=R(this,Al,uU).call(this,t,s),{style:o}=d(this,uc)||E(this,uc,R(this,Al,cU).call(this));e.append(d(this,uc)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,uc).remove()}}Dm=new WeakMap,uc=new WeakMap,dc=new WeakMap,Al=new WeakSet,cU=function(){const e=E(this,uc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Vi,{signal:d(this,dc)._signal});const t=E(this,Dm,document.createElement("div"));return t.className="buttons",e.append(t),R(this,Al,dU).call(this),e},uU=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const a=r.x+(t?r.width:0);if(o>s){i=a,s=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,s]},dU=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=d(this,dc)._signal;e.addEventListener("contextmenu",Vi,{signal:s}),e.addEventListener("click",()=>{d(this,dc).highlightSelection("floating_button")},{signal:s}),d(this,Dm).append(e)};function hU(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var bw;class xse{constructor(){A(this,bw,0)}get id(){return`${eU}${qt(this,bw)._++}`}}bw=new WeakMap;var lh,Lm,Sn,ch,Gv;const NA=class NA{constructor(){A(this,ch);A(this,lh,iU());A(this,Lm,0);A(this,Sn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return De(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return R(this,ch,Gv).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return R(this,ch,Gv).call(this,e,e)}async getFromBlob(e,t){const s=await t;return R(this,ch,Gv).call(this,e,s)}async getFromId(e){d(this,Sn)||E(this,Sn,new Map);const t=d(this,Sn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Sn)||E(this,Sn,new Map);let s=d(this,Sn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${d(this,lh)}_${qt(this,Lm)._++}`,refCounter:1,isSvg:!1},d(this,Sn).set(e,s),d(this,Sn).set(s.id,s),s}getSvgUrl(e){const t=d(this,Sn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;d(this,Sn)||E(this,Sn,new Map);const t=d(this,Sn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,lh)}_`)}};lh=new WeakMap,Lm=new WeakMap,Sn=new WeakMap,ch=new WeakSet,Gv=async function(e,t){d(this,Sn)||E(this,Sn,new Map);let s=d(this,Sn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${d(this,lh)}_${qt(this,Lm)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Ty(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=NA._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const p=s.svgUrl=o.result;a.src=await r?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){xe(i),s=null}return d(this,Sn).set(e,s),s&&d(this,Sn).set(s.id,s),s};let cb=NA;var At,Ea,Fm,yt;class _se{constructor(e=128){A(this,At,[]);A(this,Ea,!1);A(this,Fm);A(this,yt,-1);E(this,Fm,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),d(this,Ea))return;const l={cmd:e,undo:t,post:s,type:r};if(d(this,yt)===-1){d(this,At).length>0&&(d(this,At).length=0),E(this,yt,0),d(this,At).push(l);return}if(o&&d(this,At)[d(this,yt)].type===r){a&&(l.undo=d(this,At)[d(this,yt)].undo),d(this,At)[d(this,yt)]=l;return}const c=d(this,yt)+1;c===d(this,Fm)?d(this,At).splice(0,1):(E(this,yt,c),c<d(this,At).length&&d(this,At).splice(c)),d(this,At).push(l)}undo(){if(d(this,yt)===-1)return;E(this,Ea,!0);const{undo:e,post:t}=d(this,At)[d(this,yt)];e(),t==null||t(),E(this,Ea,!1),E(this,yt,d(this,yt)-1)}redo(){if(d(this,yt)<d(this,At).length-1){E(this,yt,d(this,yt)+1),E(this,Ea,!0);const{cmd:e,post:t}=d(this,At)[d(this,yt)];e(),t==null||t(),E(this,Ea,!1)}}hasSomethingToUndo(){return d(this,yt)!==-1}hasSomethingToRedo(){return d(this,yt)<d(this,At).length-1}cleanType(e){if(d(this,yt)!==-1){for(let t=d(this,yt);t>=0;t--)if(d(this,At)[t].type!==e){d(this,At).splice(t+1,d(this,yt)-t),E(this,yt,t);return}d(this,At).length=0,E(this,yt,-1)}}destroy(){E(this,At,null)}}At=new WeakMap,Ea=new WeakMap,Fm=new WeakMap,yt=new WeakMap;var Ew,fU;class ky{constructor(e){A(this,Ew);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[s,i,r={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(R(this,Ew,fU).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(i.bind(e,...o,t)(),r||Dt(t))}}Ew=new WeakSet,fU=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Tw=class Tw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return vse(e),De(this,"_colors",e)}convert(e){const t=SA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return Tw._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?de.makeHexColor(...t):e}};H(Tw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ub=Tw;var uh,us,Bt,sn,dh,qr,hh,Vs,Ta,Aa,fh,hc,Zi,vi,fc,Om,Um,ph,$m,er,ka,mh,Ra,tr,Aw,Pa,Bm,Ia,pc,mc,Na,Vm,Wt,We,Wr,Ma,gc,jm,zm,Da,nr,Kr,Hm,Gm,js,X,qv,db,pU,mU,Wv,gU,yU,vU,hb,wU,fb,pb,xU,Rn,Or,_U,CU,mb,SU,Cp,gb;const Dd=class Dd{constructor(e,t,s,i,r,o,a,l,c,u,p,m,g,w,v){A(this,X);A(this,uh,new AbortController);A(this,us,null);A(this,Bt,new Map);A(this,sn,new Map);A(this,dh,null);A(this,qr,null);A(this,hh,null);A(this,Vs,new _se);A(this,Ta,null);A(this,Aa,null);A(this,fh,0);A(this,hc,new Set);A(this,Zi,null);A(this,vi,null);A(this,fc,new Set);H(this,"_editorUndoBar",null);A(this,Om,!1);A(this,Um,!1);A(this,ph,!1);A(this,$m,null);A(this,er,null);A(this,ka,null);A(this,mh,null);A(this,Ra,!1);A(this,tr,null);A(this,Aw,new xse);A(this,Pa,!1);A(this,Bm,!1);A(this,Ia,null);A(this,pc,null);A(this,mc,null);A(this,Na,null);A(this,Vm,null);A(this,Wt,we.NONE);A(this,We,new Set);A(this,Wr,null);A(this,Ma,null);A(this,gc,null);A(this,jm,null);A(this,zm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Da,[0,0]);A(this,nr,null);A(this,Kr,null);A(this,Hm,null);A(this,Gm,null);A(this,js,null);const _=this._signal=d(this,uh).signal;E(this,Kr,e),E(this,Hm,t),E(this,Gm,s),E(this,dh,i),E(this,Ma,r),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),R(this,X,gU).call(this),R(this,X,xU).call(this),R(this,X,hb).call(this),E(this,qr,a.annotationStorage),E(this,$m,a.filterFactory),E(this,gc,l),E(this,mh,c||null),E(this,Om,u),E(this,Um,p),E(this,ph,m),E(this,Vm,g||null),this.viewParameters={realScale:Tl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=Dd.prototype,t=o=>d(o,Kr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return De(this,"_keyboardManager",new ky([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Kr).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Kr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,o,a,l;(e=d(this,js))==null||e.resolve(),E(this,js,null),(t=d(this,uh))==null||t.abort(),E(this,uh,null),this._signal=null;for(const c of d(this,sn).values())c.destroy();d(this,sn).clear(),d(this,Bt).clear(),d(this,fc).clear(),(s=d(this,Na))==null||s.clear(),E(this,us,null),d(this,We).clear(),d(this,Vs).destroy(),(i=d(this,dh))==null||i.destroy(),(r=d(this,Ma))==null||r.destroy(),(o=d(this,tr))==null||o.hide(),E(this,tr,null),(a=d(this,mc))==null||a.destroy(),E(this,mc,null),d(this,er)&&(clearTimeout(d(this,er)),E(this,er,null)),d(this,nr)&&(clearTimeout(d(this,nr)),E(this,nr,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,Vm)}get useNewAltTextFlow(){return d(this,Um)}get useNewAltTextWhenAddingImage(){return d(this,ph)}get hcmFilter(){return De(this,"hcmFilter",d(this,gc)?d(this,$m).addHCMFilter(d(this,gc).foreground,d(this,gc).background):"none")}get direction(){return De(this,"direction",getComputedStyle(d(this,Kr)).direction)}get highlightColors(){return De(this,"highlightColors",d(this,mh)?new Map(d(this,mh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return De(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Aa,e)}setMainHighlightColorPicker(e){E(this,mc,e)}editAltText(e,t=!1){var s;(s=d(this,dh))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=d(this,Ma))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Ma)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,ph,t);break}}onPageChanging({pageNumber:e}){E(this,fh,e-1)}focusMainContainer(){d(this,Kr).focus()}findParent(e,t){for(const s of d(this,sn).values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+a)return s}return null}disableUserSelect(e=!1){d(this,Hm).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,fc).add(e)}removeShouldRescale(e){d(this,fc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Tl.PDF_TO_CSS_UNITS;for(const s of d(this,fc))s.onScaleChanging();(t=d(this,Aa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=t,a=t.toString(),c=R(this,X,qv).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const p=R(this,X,db).call(this,c),m=d(this,Wt)===we.NONE,g=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(we.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,qr)&&!d(this,qr).has(e.id)&&d(this,qr).setValue(e.id,e)}a11yAlert(e,t=null){const s=d(this,Gm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,Ra)&&(E(this,Ra,!1),R(this,X,Wv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,We))if(t.div.contains(e)){E(this,pc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,pc))return;const[e,t]=d(this,pc);E(this,pc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,X,hb).call(this),R(this,X,fb).call(this)}removeEditListeners(){R(this,X,wU).call(this),R(this,X,pb).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of d(this,vi))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of d(this,vi))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=d(this,us))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of d(this,We)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of d(this,vi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){xe(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const c=await i.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)R(this,X,mb).call(this,l);R(this,X,gb).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){xe(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Wt)!==we.NONE&&!this.isEditorHandlingKeyboard&&Dd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,Ra)&&(E(this,Ra,!1),R(this,X,Wv).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,X,yU).call(this),R(this,X,fb).call(this),R(this,X,Rn).call(this,{isEditing:d(this,Wt)!==we.NONE,isEmpty:R(this,X,Cp).call(this),hasSomethingToUndo:d(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:d(this,Vs).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,X,vU).call(this),R(this,X,pb).call(this),R(this,X,Rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,vi)){E(this,vi,e);for(const t of d(this,vi))R(this,X,Or).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,Aw).id}get currentLayer(){return d(this,sn).get(d(this,fh))}getLayer(e){return d(this,sn).get(e)}get currentPageIndex(){return d(this,fh)}addLayer(e){d(this,sn).set(e.pageIndex,e),d(this,Pa)?e.enable():e.disable()}removeLayer(e){d(this,sn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1){var r,o,a;if(d(this,Wt)!==e&&!(d(this,js)&&(await d(this,js).promise,!d(this,js)))){if(E(this,js,Promise.withResolvers()),(r=d(this,Aa))==null||r.commitOrRemove(),E(this,Wt,e),e===we.NONE){this.setEditingState(!1),R(this,X,CU).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,js).resolve();return}e===we.SIGNATURE&&await((a=d(this,Ma))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await R(this,X,_U).call(this),this.unselectAll();for(const l of d(this,sn).values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),d(this,js).resolve();return}for(const l of d(this,Bt).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),i&&l.enterInEditMode()):l.unselect();d(this,js).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,Wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(d(this,vi)){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor(t);return;case Oe.HIGHLIGHT_DEFAULT_COLOR:(s=d(this,mc))==null||s.updateColor(t);break;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,jm)||E(this,jm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of d(this,We))i.updateParams(e,t);for(const i of d(this,vi))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of d(this,Bt).values())o.editorType===e&&o.show(t);(((r=d(this,jm))==null?void 0:r.get(Oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,X,Or).call(this,[[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,Bm)!==e){E(this,Bm,e);for(const t of d(this,sn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of d(this,Bt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return d(this,Bt).get(e)}addEditor(e){d(this,Bt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(d(this,er)&&clearTimeout(d(this,er)),E(this,er,setTimeout(()=>{this.focusMainContainer(),E(this,er,null)},0))),d(this,Bt).delete(e.id),e.annotationElementId&&((t=d(this,Na))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,hc).has(e.annotationElementId))&&((s=d(this,qr))==null||s.remove(e.id))}addDeletedAnnotationElement(e){d(this,hc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,hc).has(e)}removeDeletedAnnotationElement(e){d(this,hc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,us)!==e&&(E(this,us,e),e&&R(this,X,Or).call(this,e.propertiesToUpdate))}updateUI(e){d(this,X,SU)===e&&R(this,X,Or).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){R(this,X,Or).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,We).has(e)){d(this,We).delete(e),e.unselect(),R(this,X,Rn).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,We).add(e),e.select(),R(this,X,Or).call(this,e.propertiesToUpdate),R(this,X,Rn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,Aa))==null||t.commitOrRemove();for(const s of d(this,We))s!==e&&s.unselect();d(this,We).clear(),d(this,We).add(e),e.select(),R(this,X,Or).call(this,e.propertiesToUpdate),R(this,X,Rn).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,We).has(e)}get firstSelectedEditor(){return d(this,We).values().next().value}unselect(e){e.unselect(),d(this,We).delete(e),R(this,X,Rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,We).size!==0}get isEnterHandled(){return d(this,We).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Vs).undo(),R(this,X,Rn).call(this,{hasSomethingToUndo:d(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,X,Cp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Vs).redo(),R(this,X,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Vs).hasSomethingToRedo(),isEmpty:R(this,X,Cp).call(this)})}addCommands(e){d(this,Vs).add(e),R(this,X,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,X,Cp).call(this)})}cleanUndoStack(e){d(this,Vs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,We)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)R(this,X,mb).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=d(this,us))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,us)||this.hasSelection}selectAll(){for(const e of d(this,We))e.commit();R(this,X,gb).call(this,d(this,Bt).values())}unselectAll(){var e;if(!(d(this,us)&&(d(this,us).commitOrRemove(),d(this,Wt)!==we.NONE))&&!((e=d(this,Aa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,We))t.unselect();d(this,We).clear(),R(this,X,Rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;d(this,Da)[0]+=e,d(this,Da)[1]+=t;const[i,r]=d(this,Da),o=[...d(this,We)],a=1e3;d(this,nr)&&clearTimeout(d(this,nr)),E(this,nr,setTimeout(()=>{E(this,nr,null),d(this,Da)[0]=d(this,Da)[1]=0,this.addCommands({cmd:()=>{for(const l of o)d(this,Bt).has(l.id)&&(l.translateInPage(i,r),l.translationDone())},undo:()=>{for(const l of o)d(this,Bt).has(l.id)&&(l.translateInPage(-i,-r),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Zi,new Map);for(const e of d(this,We))d(this,Zi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Zi))return!1;this.disableUserSelect(!1);const e=d(this,Zi);E(this,Zi,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},a]of e)a.newX=i,a.newY=r,a.newPageIndex=o,t||(t=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(i,r,o,a)=>{if(d(this,Bt).has(i.id)){const l=d(this,sn).get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of e)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of e)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,Zi))for(const s of d(this,Zi).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,We).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,us)===e}getActive(){return d(this,us)}getMode(){return d(this,Wt)}get imageManager(){return De(this,"imageManager",new cb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,p,m)=>({x:(u-i)/o,y:1-(c+p-s)/r,width:m/o,height:p/r});break;case"180":a=(c,u,p,m)=>({x:1-(c+p-s)/r,y:1-(u+m-i)/o,width:p/r,height:m/o});break;case"270":a=(c,u,p,m)=>({x:1-(u+m-i)/o,y:(c-s)/r,width:m/o,height:p/r});break;default:a=(c,u,p,m)=>({x:(c-s)/r,y:(u-i)/o,width:p/r,height:m/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const p=t.getRangeAt(c);if(!p.collapsed)for(const{x:m,y:g,width:w,height:v}of p.getClientRects())w===0||v===0||l.push(a(m,g,w,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,hh)||E(this,hh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,hh))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=d(this,hh))==null?void 0:i.get(e.data.id);if(!t)return;const s=d(this,qr).getRawValue(t);s&&(d(this,Wt)===we.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=d(this,Na))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),d(this,Na).delete(e))}addMissingCanvas(e,t){(d(this,Na)||E(this,Na,new Map)).set(e,t)}};uh=new WeakMap,us=new WeakMap,Bt=new WeakMap,sn=new WeakMap,dh=new WeakMap,qr=new WeakMap,hh=new WeakMap,Vs=new WeakMap,Ta=new WeakMap,Aa=new WeakMap,fh=new WeakMap,hc=new WeakMap,Zi=new WeakMap,vi=new WeakMap,fc=new WeakMap,Om=new WeakMap,Um=new WeakMap,ph=new WeakMap,$m=new WeakMap,er=new WeakMap,ka=new WeakMap,mh=new WeakMap,Ra=new WeakMap,tr=new WeakMap,Aw=new WeakMap,Pa=new WeakMap,Bm=new WeakMap,Ia=new WeakMap,pc=new WeakMap,mc=new WeakMap,Na=new WeakMap,Vm=new WeakMap,Wt=new WeakMap,We=new WeakMap,Wr=new WeakMap,Ma=new WeakMap,gc=new WeakMap,jm=new WeakMap,zm=new WeakMap,Da=new WeakMap,nr=new WeakMap,Kr=new WeakMap,Hm=new WeakMap,Gm=new WeakMap,js=new WeakMap,X=new WeakSet,qv=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},db=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of d(this,sn).values())if(s.hasTextLayer(e))return s;return null},pU=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=R(this,X,qv).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(d(this,tr)||E(this,tr,new wse(this)),d(this,tr).show(s,i,this.direction==="ltr"))},mU=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Wr)&&((r=d(this,tr))==null||r.hide(),E(this,Wr,null),R(this,X,Rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Wr))return;const i=R(this,X,qv).call(this,e).closest(".textLayer");if(!i){d(this,Wr)&&((o=d(this,tr))==null||o.hide(),E(this,Wr,null),R(this,X,Rn).call(this,{hasSelectedText:!1}));return}if((a=d(this,tr))==null||a.hide(),E(this,Wr,t),R(this,X,Rn).call(this,{hasSelectedText:!0}),!(d(this,Wt)!==we.HIGHLIGHT&&d(this,Wt)!==we.NONE)&&(d(this,Wt)===we.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Ra,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Wt)===we.HIGHLIGHT?R(this,X,db).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),p=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),m.type==="pointerup"&&R(this,X,Wv).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})}},Wv=function(e=""){d(this,Wt)===we.HIGHLIGHT?this.highlightSelection(e):d(this,Om)&&R(this,X,pU).call(this)},gU=function(){document.addEventListener("selectionchange",R(this,X,mU).bind(this),{signal:this._signal})},yU=function(){if(d(this,ka))return;E(this,ka,new AbortController);const e=this.combinedSignal(d(this,ka));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},vU=function(){var e;(e=d(this,ka))==null||e.abort(),E(this,ka,null)},hb=function(){if(d(this,Ia))return;E(this,Ia,new AbortController);const e=this.combinedSignal(d(this,Ia));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},wU=function(){var e;(e=d(this,Ia))==null||e.abort(),E(this,Ia,null)},fb=function(){if(d(this,Ta))return;E(this,Ta,new AbortController);const e=this.combinedSignal(d(this,Ta));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},pb=function(){var e;(e=d(this,Ta))==null||e.abort(),E(this,Ta,null)},xU=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Rn=function(e){Object.entries(e).some(([s,i])=>d(this,zm)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,zm),e)}),d(this,Wt)===we.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,X,Or).call(this,[[Oe.HIGHLIGHT_FREE,!0]]))},Or=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},_U=async function(){if(!d(this,Pa)){E(this,Pa,!0);const e=[];for(const t of d(this,sn).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,Bt).values())t.enable()}},CU=function(){if(this.unselectAll(),d(this,Pa)){E(this,Pa,!1);for(const e of d(this,sn).values())e.disable();for(const e of d(this,Bt).values())e.disable()}},mb=function(e){const t=d(this,sn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},SU=function(){let e=null;for(e of d(this,We));return e},Cp=function(){if(d(this,Bt).size===0)return!0;if(d(this,Bt).size===1)for(const e of d(this,Bt).values())return e.isEmpty();return!1},gb=function(e){for(const t of d(this,We))t.unselect();d(this,We).clear();for(const t of e)t.isEmpty()||(d(this,We).add(t),t.select());R(this,X,Rn).call(this,{hasSelectedEditor:this.hasSelection})},H(Dd,"TRANSLATE_SMALL",1),H(Dd,"TRANSLATE_BIG",10);let Bu=Dd;var Kt,sr,wi,gh,ir,ds,yh,rr,Qn,Yr,yc,or,La,Di,Sp,Kv;const Pn=class Pn{constructor(e){A(this,Di);A(this,Kt,null);A(this,sr,!1);A(this,wi,null);A(this,gh,null);A(this,ir,null);A(this,ds,null);A(this,yh,!1);A(this,rr,null);A(this,Qn,null);A(this,Yr,null);A(this,yc,null);A(this,or,!1);E(this,Qn,e),E(this,or,e._uiManager.useNewAltTextFlow),d(Pn,La)||E(Pn,La,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Pn._l10n??(Pn._l10n=e)}async render(){const e=E(this,wi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,gh,document.createElement("span"));e.append(t),d(this,or)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Pn,La).missing),t.setAttribute("data-l10n-id",d(Pn,La)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=d(this,Qn)._uiManager._signal;e.addEventListener("contextmenu",Vi,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),d(this,Qn)._uiManager.editAltText(d(this,Qn)),d(this,or)&&d(this,Qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Di,Sp)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(E(this,yh,!0),i(r))},{signal:s}),await R(this,Di,Kv).call(this),e}finish(){d(this,wi)&&(d(this,wi).focus({focusVisible:d(this,yh)}),E(this,yh,!1))}isEmpty(){return d(this,or)?d(this,Kt)===null:!d(this,Kt)&&!d(this,sr)}hasData(){return d(this,or)?d(this,Kt)!==null||!!d(this,Yr):this.isEmpty()}get guessedText(){return d(this,Yr)}async setGuessedText(e){d(this,Kt)===null&&(E(this,Yr,e),E(this,yc,await Pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,Di,Kv).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,or)||d(this,Kt)){(t=d(this,rr))==null||t.remove(),E(this,rr,null);return}if(!d(this,rr)){const s=E(this,rr,document.createElement("div"));s.className="noAltTextBadge",d(this,Qn).div.append(s)}d(this,rr).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Kt);return!e&&d(this,Yr)===t&&(t=d(this,yc)),{altText:t,decorative:d(this,sr),guessedText:d(this,Yr),textWithDisclaimer:d(this,yc)}}get data(){return{altText:d(this,Kt),decorative:d(this,sr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(E(this,Yr,s),E(this,yc,i)),!(d(this,Kt)===e&&d(this,sr)===t)&&(r||(E(this,Kt,e),E(this,sr,t)),R(this,Di,Kv).call(this))}toggle(e=!1){d(this,wi)&&(!e&&d(this,ds)&&(clearTimeout(d(this,ds)),E(this,ds,null)),d(this,wi).disabled=!e)}shown(){d(this,Qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Di,Sp)}})}destroy(){var e,t;(e=d(this,wi))==null||e.remove(),E(this,wi,null),E(this,gh,null),E(this,ir,null),(t=d(this,rr))==null||t.remove(),E(this,rr,null)}};Kt=new WeakMap,sr=new WeakMap,wi=new WeakMap,gh=new WeakMap,ir=new WeakMap,ds=new WeakMap,yh=new WeakMap,rr=new WeakMap,Qn=new WeakMap,Yr=new WeakMap,yc=new WeakMap,or=new WeakMap,La=new WeakMap,Di=new WeakSet,Sp=function(){return d(this,Kt)&&"added"||d(this,Kt)===null&&this.guessedText&&"review"||"missing"},Kv=async function(){var i,r,o;const e=d(this,wi);if(!e)return;if(d(this,or)){if(e.classList.toggle("done",!!d(this,Kt)),e.setAttribute("data-l10n-id",d(Pn,La)[d(this,Di,Sp)]),(i=d(this,gh))==null||i.setAttribute("data-l10n-id",d(Pn,La)[`${d(this,Di,Sp)}-label`]),!d(this,Kt)){(r=d(this,ir))==null||r.remove();return}}else{if(!d(this,Kt)&&!d(this,sr)){e.classList.remove("done"),(o=d(this,ir))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,ir);if(!t){E(this,ir,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,Qn).id}`;const a=100,l=d(this,Qn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,ds)),E(this,ds,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,ds,setTimeout(()=>{E(this,ds,null),d(this,ir).classList.add("show"),d(this,Qn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,ds)&&(clearTimeout(d(this,ds)),E(this,ds,null)),(c=d(this,ir))==null||c.classList.remove("show")},{signal:l})}d(this,sr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Kt)),t.parentNode||e.append(t);const s=d(this,Qn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(Pn,La,null),H(Pn,"_l10n",null);let mw=Pn;var vh,vc,qm,Wm,Km,Ym,Jm,Jr,wc,Xr,xc,Qr,kl,bU,EU,TU;const MA=class MA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){A(this,kl);A(this,vh);A(this,vc,!1);A(this,qm,null);A(this,Wm);A(this,Km);A(this,Ym);A(this,Jm);A(this,Jr,null);A(this,wc);A(this,Xr,null);A(this,xc);A(this,Qr,null);E(this,vh,e),E(this,qm,s),E(this,Wm,t),E(this,Km,i),E(this,Ym,r),E(this,Jm,o),E(this,xc,new AbortController),E(this,wc,AbortSignal.any([a,d(this,xc).signal])),e.addEventListener("touchstart",R(this,kl,bU).bind(this),{passive:!1,signal:d(this,wc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Rr.pixelRatio}destroy(){var e,t;(e=d(this,xc))==null||e.abort(),E(this,xc,null),(t=d(this,Jr))==null||t.abort(),E(this,Jr,null)}};vh=new WeakMap,vc=new WeakMap,qm=new WeakMap,Wm=new WeakMap,Km=new WeakMap,Ym=new WeakMap,Jm=new WeakMap,Jr=new WeakMap,wc=new WeakMap,Xr=new WeakMap,xc=new WeakMap,Qr=new WeakMap,kl=new WeakSet,bU=function(e){var i,r,o;if((i=d(this,Wm))!=null&&i.call(this))return;if(e.touches.length===1){if(d(this,Jr))return;const a=E(this,Jr,new AbortController),l=AbortSignal.any([d(this,wc),a.signal]),c=d(this,vh),u={capture:!0,signal:l,passive:!1},p=m=>{var g;m.pointerType==="touch"&&((g=d(this,Jr))==null||g.abort(),E(this,Jr,null))};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Dt(m),p(m))},u),c.addEventListener("pointerup",p,u),c.addEventListener("pointercancel",p,u);return}if(!d(this,Qr)){E(this,Qr,new AbortController);const a=AbortSignal.any([d(this,wc),d(this,Qr).signal]),l=d(this,vh),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",R(this,kl,EU).bind(this),c);const u=R(this,kl,TU).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Dt,c),l.addEventListener("pointermove",Dt,c),l.addEventListener("pointercancel",Dt,c),l.addEventListener("pointerup",Dt,c),(r=d(this,Km))==null||r.call(this)}if(Dt(e),e.touches.length!==2||(o=d(this,qm))!=null&&o.call(this)){E(this,Xr,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),E(this,Xr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},EU=function(e){var T;if(!d(this,Xr)||e.touches.length!==2)return;Dt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:a}=s,l=d(this,Xr),{touch0X:c,touch0Y:u,touch1X:p,touch1Y:m}=l,g=p-c,w=m-u,v=o-i,_=a-r,x=Math.hypot(v,_)||1,S=Math.hypot(g,w)||1;if(!d(this,vc)&&Math.abs(S-x)<=MA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!d(this,vc)){E(this,vc,!0);return}const C=[(i+o)/2,(r+a)/2];(T=d(this,Ym))==null||T.call(this,C,S,x)},TU=function(e){var t;e.touches.length>=2||(d(this,Qr)&&(d(this,Qr).abort(),E(this,Qr,null),(t=d(this,Jm))==null||t.call(this)),d(this,Xr)&&(Dt(e),E(this,Xr,null),E(this,vc,!1)))};let gw=MA;var _c,xi,dt,wh,Fa,Xm,Cc,rn,Sc,Zr,Oa,Qm,bc,hs,Zm,Ec,eo,ar,xh,_h,zs,Tc,eg,kw,ge,yb,tg,vb,Yv,AU,kU,wb,Jv,xb,RU,PU,IU,_b,NU,Cb,MU,DU,LU,Sb,bp;const be=class be{constructor(e){A(this,ge);A(this,_c,null);A(this,xi,null);A(this,dt,null);A(this,wh,!1);A(this,Fa,null);A(this,Xm,"");A(this,Cc,!1);A(this,rn,null);A(this,Sc,null);A(this,Zr,null);A(this,Oa,null);A(this,Qm,"");A(this,bc,!1);A(this,hs,null);A(this,Zm,!1);A(this,Ec,!1);A(this,eo,!1);A(this,ar,null);A(this,xh,0);A(this,_h,0);A(this,zs,null);A(this,Tc,null);H(this,"isSelected",!1);H(this,"_isCopy",!1);H(this,"_editToolbar",null);H(this,"_initialOptions",Object.create(null));H(this,"_initialData",null);H(this,"_isVisible",!0);H(this,"_uiManager",null);H(this,"_focusEventsAllowed",!0);A(this,eg,!1);A(this,kw,be._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=be.prototype._resizeWithKeyboard,t=Bu.TRANSLATE_SMALL,s=Bu.TRANSLATE_BIG;return De(this,"_resizerKeyboardManager",new ky([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],be.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return De(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Cse({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(be._l10n??(be._l10n=e),be._l10nResizer||(be._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),be._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);be._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,eg)}set _isDraggable(e){var t;E(this,eg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,kw)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,ge,bp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,bc)?E(this,bc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){R(this,ge,yb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,hs)||E(this,hs,[this.x,this.y,this.width,this.height]),R(this,ge,yb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,hs)||E(this,hs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,hs)&&(d(this,hs)[0]!==this.x||d(this,hs)[1]!==this.y)}get _hasBeenResized(){return!!d(this,hs)&&(d(this,hs)[2]!==this.width||d(this,hs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=be,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=s,l*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=On(r,0,s-a),o=On(o,0,i-l);break;case 90:r=On(r,0,s-l),o=On(o,a,i);break;case 180:r=On(r,a,s),o=On(o,l,i);break;case 270:r=On(r,l,s),o=On(o,0,i-a);break}this.x=r/=s,this.y=o/=i;const[c,u]=this.getBaseTranslation();r+=c,o+=u,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return R(s=be,tg,vb).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return R(s=be,tg,vb).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,d(this,Cc)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!d(this,Cc)&&t.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!d(this,Cc)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,dt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,Ec))return this._editToolbar;this._editToolbar=new lb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,dt))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,dt)||(mw.initialize(be._l10n),E(this,dt,new mw(this)),d(this,_c)&&(d(this,dt).data=d(this,_c),E(this,_c,null))),d(this,dt)}get altTextData(){var e;return(e=d(this,dt))==null?void 0:e.data}set altTextData(e){d(this,dt)&&(d(this,dt).data=e)}get guessedAltText(){var e;return(e=d(this,dt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,dt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,dt))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,dt)&&!d(this,dt).isEmpty()}hasAltTextData(){var e;return((e=d(this,dt))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,wh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),R(this,ge,Cb).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),hU(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Tc)||E(this,Tc,new gw({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,ge,RU).bind(this),onPinching:R(this,ge,PU).bind(this),onPinchEnd:R(this,ge,IU).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,bc,!0),this._isDraggable){R(this,ge,NU).call(this,e);return}R(this,ge,_b).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,ar)&&clearTimeout(d(this,ar)),E(this,ar,setTimeout(()=>{var e;E(this,ar,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,p=this.x*r,m=this.y*o,g=this.width*r,w=this.height*o;switch(s){case 0:return[p+c+a,o-m-u-w+l,p+c+g+a,o-m-u+l];case 90:return[p+u+a,o-m+c+l,p+u+w+a,o-m+c+g+l];case 180:return[p-c-g+a,o-m+u+l,p-c+a,o-m+u+w+l];case 270:return[p-u-w+a,o-m-c-g+l,p-u+a,o-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,a=r-s,l=o-i;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-i,l,a];case 180:return[r,t-i,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Ec,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Ec,!1),!0):!1}isInEditMode(){return d(this,Ec)}shouldGetKeyboardEvents(){return d(this,eo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}rebuild(){R(this,ge,Cb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ze("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});i.rotation=e.rotation,E(i,_c,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/r,i.y=l/o,i.width=c/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Oa))==null||e.abort(),E(this,Oa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,ar)&&(clearTimeout(d(this,ar)),E(this,ar,null)),R(this,ge,bp).call(this),this.removeEditToolbar(),d(this,zs)){for(const s of d(this,zs).values())clearTimeout(s);E(this,zs,null)}this.parent=null,(t=d(this,Tc))==null||t.destroy(),E(this,Tc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,ge,AU).call(this),d(this,rn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Zr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,rn).children;if(!d(this,xi)){E(this,xi,Array.from(t));const o=R(this,ge,MU).bind(this),a=R(this,ge,DU).bind(this),l=this._uiManager._signal;for(const c of d(this,xi)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",R(this,ge,LU).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",be._l10nResizer[u])}}const s=d(this,xi)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(d(this,xi).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)d(this,rn).append(d(this,rn).firstChild);else if(r>i)for(let a=0;a<r-i;a++)d(this,rn).firstChild.before(d(this,rn).lastChild);let o=0;for(const a of t){const c=d(this,xi)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",be._l10nResizer[c])}}R(this,ge,Sb).call(this,0),E(this,eo,!0),d(this,rn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,eo)&&R(this,ge,xb).call(this,d(this,Qm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,ge,bp).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=d(this,dt))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=d(this,rn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=d(this,dt))==null||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,Zm)}set isEditing(e){E(this,Zm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,Cc,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,zs)||E(this,zs,new Map);const{action:s}=e;let i=d(this,zs).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),d(this,zs).delete(s),d(this,zs).size===0&&E(this,zs,null)},be._telemetryTimeout),d(this,zs).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,wh,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,wh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};_c=new WeakMap,xi=new WeakMap,dt=new WeakMap,wh=new WeakMap,Fa=new WeakMap,Xm=new WeakMap,Cc=new WeakMap,rn=new WeakMap,Sc=new WeakMap,Zr=new WeakMap,Oa=new WeakMap,Qm=new WeakMap,bc=new WeakMap,hs=new WeakMap,Zm=new WeakMap,Ec=new WeakMap,eo=new WeakMap,ar=new WeakMap,xh=new WeakMap,_h=new WeakMap,zs=new WeakMap,Tc=new WeakMap,eg=new WeakMap,kw=new WeakMap,ge=new WeakSet,yb=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},tg=new WeakSet,vb=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Yv=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},AU=function(){if(d(this,rn))return;E(this,rn,document.createElement("div")),d(this,rn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");d(this,rn).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",R(this,ge,kU).bind(this,s),{signal:t}),i.addEventListener("contextmenu",Vi,{signal:t}),i.tabIndex=-1}this.div.prepend(d(this,rn))},kU=function(e,t){var u;t.preventDefault();const{isMac:s}=pn.platform;if(t.button!==0||t.ctrlKey&&s)return;(u=d(this,dt))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,E(this,Sc,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,ge,xb).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Dt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Vi,{signal:o}),E(this,Zr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var p;r.abort(),this.parent.togglePointerEvents(!0),(p=d(this,dt))==null||p.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,R(this,ge,Jv).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},wb=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},Jv=function(){if(!d(this,Zr))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=d(this,Zr);E(this,Zr,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===s&&l===i||this.addCommands({cmd:R(this,ge,wb).bind(this,r,o,a,l),undo:R(this,ge,wb).bind(this,e,t,s,i),mustExec:!0})},xb=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=be.MIN_SIZE/s,u=be.MIN_SIZE/i,p=R(this,ge,Yv).call(this,this.rotation),m=(F,$)=>[p[0]*F+p[2]*$,p[1]*F+p[3]*$],g=R(this,ge,Yv).call(this,360-this.rotation),w=(F,$)=>[g[0]*F+g[2]*$,g[1]*F+g[3]*$];let v,_,x=!1,S=!1;switch(e){case"topLeft":x=!0,v=(F,$)=>[0,0],_=(F,$)=>[F,$];break;case"topMiddle":v=(F,$)=>[F/2,0],_=(F,$)=>[F/2,$];break;case"topRight":x=!0,v=(F,$)=>[F,0],_=(F,$)=>[0,$];break;case"middleRight":S=!0,v=(F,$)=>[F,$/2],_=(F,$)=>[0,$/2];break;case"bottomRight":x=!0,v=(F,$)=>[F,$],_=(F,$)=>[0,0];break;case"bottomMiddle":v=(F,$)=>[F/2,$],_=(F,$)=>[F/2,0];break;case"bottomLeft":x=!0,v=(F,$)=>[0,$],_=(F,$)=>[F,0];break;case"middleLeft":S=!0,v=(F,$)=>[0,$/2],_=(F,$)=>[F,$/2];break}const C=v(a,l),T=_(a,l);let k=m(...T);const P=be._round(r+k[0]),I=be._round(o+k[1]);let N=1,D=1,M,L;if(t.fromKeyboard)({deltaX:M,deltaY:L}=t);else{const{screenX:F,screenY:$}=t,[O,U]=d(this,Sc);[M,L]=this.screenToPageTranslation(F-O,$-U),d(this,Sc)[0]=F,d(this,Sc)[1]=$}if([M,L]=w(M/s,L/i),x){const F=Math.hypot(a,l);N=D=Math.max(Math.min(Math.hypot(T[0]-C[0]-M,T[1]-C[1]-L)/F,1/a,1/l),c/a,u/l)}else S?N=On(Math.abs(T[0]-C[0]-M),c,1)/a:D=On(Math.abs(T[1]-C[1]-L),u,1)/l;const V=be._round(a*N),G=be._round(l*D);k=m(..._(V,G));const B=P-k[0],j=I-k[1];d(this,hs)||E(this,hs,[this.x,this.y,this.width,this.height]),this.width=V,this.height=G,this.x=B,this.y=j,this.setDims(s*V,i*G),this.fixAndSetPosition(),this._onResizing()},RU=function(){var e;E(this,Zr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,dt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},PU=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=R(this,ge,Yv).call(this,this.rotation),a=(P,I)=>[o[0]*P+o[2]*I,o[1]*P+o[3]*I],[l,c]=this.parentDimensions,u=this.x,p=this.y,m=this.width,g=this.height,w=be.MIN_SIZE/l,v=be.MIN_SIZE/c;r=Math.max(Math.min(r,1/m,1/g),w/m,v/g);const _=be._round(m*r),x=be._round(g*r);if(_===m&&x===g)return;d(this,hs)||E(this,hs,[u,p,m,g]);const S=a(m/2,g/2),C=be._round(u+S[0]),T=be._round(p+S[1]),k=a(_/2,x/2);this.x=C-k[0],this.y=T-k[1],this.width=_,this.height=x,this.setDims(l*_,c*x),this.fixAndSetPosition(),this._onResizing()},IU=function(){var e;(e=d(this,dt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),R(this,ge,Jv).call(this)},_b=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},NU=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=c=>{i.abort(),E(this,Fa,null),E(this,bc,!1),this._uiManager.endDragSession()||R(this,ge,_b).call(this,c),s&&this._onStopDragging()};t&&(E(this,xh,e.clientX),E(this,_h,e.clientY),E(this,Fa,e.pointerId),E(this,Xm,e.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:p,pointerId:m}=c;if(m!==d(this,Fa)){Dt(c);return}const[g,w]=this.screenToPageTranslation(u-d(this,xh),p-d(this,_h));E(this,xh,u),E(this,_h,p),this._uiManager.dragSelectedEditors(g,w)},o),window.addEventListener("touchmove",Dt,o),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,Xm)&&(d(this,Tc)||c.isPrimary)&&a(c),Dt(c)},o));const l=c=>{if(!d(this,Fa)||d(this,Fa)===c.pointerId){a(c);return}Dt(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},Cb=function(){if(d(this,Oa)||!this.div)return;E(this,Oa,new AbortController);const e=this._uiManager.combinedSignal(d(this,Oa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},MU=function(e){be._resizerKeyboardManager.exec(this,e)},DU=function(e){var t;d(this,eo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,rn)&&R(this,ge,bp).call(this)},LU=function(e){E(this,Qm,d(this,eo)?e:"")},Sb=function(e){if(d(this,xi))for(const t of d(this,xi))t.tabIndex=e},bp=function(){E(this,eo,!1),R(this,ge,Sb).call(this,-1),R(this,ge,Jv).call(this)},A(be,tg),H(be,"_l10n",null),H(be,"_l10nResizer",null),H(be,"_borderLineWidth",-1),H(be,"_colorManager",new ub),H(be,"_zIndex",1),H(be,"_telemetryTimeout",1e3);let rt=be;class Cse extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qP=3285377520,Us=4294901760,Wi=65535;class FU{constructor(e){this.h1=e?e&4294967295:qP,this.h2=e?e&4294967295:qP}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,_=e.length;v<_;v++){const x=e.charCodeAt(v);x<=255?t[s++]=x:(t[s++]=x>>>8,t[s++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const p=3432918353,m=461845907,g=p&Wi,w=m&Wi;for(let v=0;v<i;v++)v&1?(a=o[v],a=a*p&Us|a*g&Wi,a=a<<15|a>>>17,a=a*m&Us|a*w&Wi,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*p&Us|l*g&Wi,l=l<<15|l>>>17,l=l*m&Us|l*w&Wi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*p&Us|a*g&Wi,a=a<<15|a>>>17,a=a*m&Us|a*w&Wi,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Us|e*36045&Wi,t=t*4283543511&Us|((t<<16|e>>>16)*2950163797&Us)>>>16,e^=t>>>1,e=e*444984403&Us|e*60499&Wi,t=t*3301882366&Us|((t<<16|e>>>16)*3120437893&Us)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const bb=Object.freeze({map:null,hash:"",transfer:void 0});var Ac,kc,on,Rw,OU;class bA{constructor(){A(this,Rw);A(this,Ac,!1);A(this,kc,null);A(this,on,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=d(this,on).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return d(this,on).get(e)}remove(e){if(d(this,on).delete(e),d(this,on).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,on).values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=d(this,on).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,d(this,on).set(e,t);i&&R(this,Rw,OU).call(this),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,on).has(e)}get size(){return d(this,on).size}resetModified(){d(this,Ac)&&(E(this,Ac,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new UU(this)}get serializable(){if(d(this,on).size===0)return bb;const e=new Map,t=new FU,s=[],i=Object.create(null);let r=!1;for(const[o,a]of d(this,on)){const l=a instanceof rt?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:bb}get editorStats(){let e=null;const t=new Map;for(const s of d(this,on).values()){if(!(s instanceof rt))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){E(this,kc,null)}get modifiedIds(){if(d(this,kc))return d(this,kc);const e=[];for(const t of d(this,on).values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,kc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,on).entries()}}Ac=new WeakMap,kc=new WeakMap,on=new WeakMap,Rw=new WeakSet,OU=function(){d(this,Ac)||(E(this,Ac,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ng;class UU extends bA{constructor(t){super();A(this,ng);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);E(this,ng,{map:o,hash:i,transfer:r})}get print(){Ze("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,ng)}get modifiedIds(){return De(this,"modifiedIds",{ids:new Set,hash:""})}}ng=new WeakMap;var Ch;class Sse{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Ch,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Ch).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||d(this,Ch).has(e.loadedName))){if(Ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),d(this,Ch).add(i),s==null||s(e)}catch{xe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw xe(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return De(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return De(this,"isSyncFontLoadingSupported",Fn||pn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ft(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return De(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(T,k){return T.charCodeAt(k)<<24|T.charCodeAt(k+1)<<16|T.charCodeAt(k+2)<<8|T.charCodeAt(k+3)&255}function i(T,k,P,I){const N=T.substring(0,k),D=T.substring(k+P);return N+I+D}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(T,k){if(++c>30){xe("Load test font never loaded."),k();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(u.bind(null,T,k))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=i(m,976,p.length,p);const w=16,v=1482184792;let _=s(m,w);for(r=0,o=p.length-3;r<o;r+=4)_=_-v+s(p,r)|0;r<p.length&&(_=_-v+s(p+"XXX",r)|0),m=i(m,w,4,ase(_));const x=`url(data:font/opentype;base64,${btoa(m)});`,S=`@font-face {font-family:"${p}";src:${x}}`;this.insertRule(S);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const T of[e.loadedName,p]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=T,C.append(k)}this._document.body.append(C),u(p,()=>{C.remove(),t.complete()})}}Ch=new WeakMap;class bse{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${rU(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){xe(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}function Ese(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Tse(n){if(Fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Ey(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function fv(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Eb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Ase=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",kse=hse.bind(null,Eb,Ase);var to,Pw;class Rse{constructor(){A(this,to,new Map);A(this,Pw,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};d(this,Pw).then(()=>{for(const[i]of d(this,to))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){xe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}d(this,to).set(t,i)}removeEventListener(e,t){const s=d(this,to).get(t);s==null||s(),d(this,to).delete(t)}terminate(){for(const[,e]of d(this,to))e==null||e();d(this,to).clear()}}to=new WeakMap,Pw=new WeakMap;const pv={DATA:1,ERROR:2},It={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function WP(){}function Kn(n){if(n instanceof El||n instanceof rb||n instanceof zP||n instanceof pw||n instanceof Q_)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new El(n.message);case"InvalidPDFException":return new rb(n.message);case"PasswordException":return new zP(n.message,n.code);case"ResponseException":return new pw(n.message,n.status,n.missing);case"UnknownErrorException":return new Q_(n.message,n.details)}return new Q_(n.message,n.toString())}var Sh,ei,$U,BU,VU,Xv;class Ep{constructor(e,t,s){A(this,ei);A(this,Sh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",R(this,ei,$U).bind(this),{signal:d(this,Sh).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:It.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Ft(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:It.CANCEL,streamId:r,reason:Kn(c)}),u.promise}},s)}destroy(){var e;(e=d(this,Sh))==null||e.abort(),E(this,Sh,null)}}Sh=new WeakMap,ei=new WeakSet,$U=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,ei,VU).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===pv.DATA)i.resolve(e.data);else if(e.callback===pv.ERROR)i.reject(Kn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:pv.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:pv.ERROR,callbackId:e.callbackId,reason:Kn(o)})});return}if(e.streamId){R(this,ei,BU).call(this,e);return}t(e.data)},BU=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=u,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:It.ENQUEUE,streamId:t,chunk:c},p)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:It.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Ft(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:It.ERROR,streamId:t,reason:Kn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:It.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:It.START_COMPLETE,streamId:t,reason:Kn(c)})})},VU=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case It.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Kn(e.reason));break;case It.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Kn(e.reason));break;case It.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:It.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||WP).then(function(){r.postMessage({sourceName:s,targetName:i,stream:It.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:It.PULL_COMPLETE,streamId:t,reason:Kn(c)})});break;case It.ENQUEUE:if(Ft(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case It.CLOSE:if(Ft(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),R(this,ei,Xv).call(this,o,t);break;case It.ERROR:Ft(o,"error should have stream controller"),o.controller.error(Kn(e.reason)),R(this,ei,Xv).call(this,o,t);break;case It.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Kn(e.reason)),R(this,ei,Xv).call(this,o,t);break;case It.CANCEL:if(!a)break;const l=Kn(e.reason);Promise.try(a.onCancel||WP,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:It.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:It.CANCEL_COMPLETE,streamId:t,reason:Kn(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Xv=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var sg;class jU{constructor({enableHWA:e=!1}){A(this,sg,!1);E(this,sg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!d(this,sg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ze("Abstract method `_createCanvas` called.")}}sg=new WeakMap;class Pse extends jU{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class zU{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class KP extends zU{async _fetch(e){const t=await Ty(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ey(t)}}class HU{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Rc,bh,no,so,bn,Pc,Ic,Z,xn,Tp,pd,Qv,md,GU,Tb,gd,Ap,kp,Ab,Rp;class Ise extends HU{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,Z);A(this,Rc);A(this,bh);A(this,no);A(this,so);A(this,bn);A(this,Pc);A(this,Ic,0);E(this,so,t),E(this,bn,s)}addFilter(t){if(!t)return"none";let s=d(this,Z,xn).get(t);if(s)return s;const[i,r,o]=R(this,Z,Qv).call(this,t),a=t.length===1?i:`${i}${r}${o}`;if(s=d(this,Z,xn).get(a),s)return d(this,Z,xn).set(t,s),s;const l=`g_${d(this,so)}_transfer_map_${qt(this,Ic)._++}`,c=R(this,Z,md).call(this,l);d(this,Z,xn).set(t,c),d(this,Z,xn).set(a,c);const u=R(this,Z,gd).call(this,l);return R(this,Z,kp).call(this,i,r,o,u),c}addHCMFilter(t,s){var w;const i=`${t}-${s}`,r="base";let o=d(this,Z,Tp).get(r);if((o==null?void 0:o.key)===i||(o?((w=o.filter)==null||w.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},d(this,Z,Tp).set(r,o)),!t||!s))return o.url;const a=R(this,Z,Rp).call(this,t);t=de.makeHexColor(...a);const l=R(this,Z,Rp).call(this,s);if(s=de.makeHexColor(...l),d(this,Z,pd).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const _=v/255;c[v]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const u=c.join(","),p=`g_${d(this,so)}_hcm_filter`,m=o.filter=R(this,Z,gd).call(this,p);R(this,Z,kp).call(this,u,u,u,m),R(this,Z,Tb).call(this,m);const g=(v,_)=>{const x=a[v]/255,S=l[v]/255,C=new Array(_+1);for(let T=0;T<=_;T++)C[T]=x+T/_*(S-x);return C.join(",")};return R(this,Z,kp).call(this,g(0,5),g(1,5),g(2,5),m),o.url=R(this,Z,md).call(this,p),o.url}addAlphaFilter(t){let s=d(this,Z,xn).get(t);if(s)return s;const[i]=R(this,Z,Qv).call(this,[t]),r=`alpha_${i}`;if(s=d(this,Z,xn).get(r),s)return d(this,Z,xn).set(t,s),s;const o=`g_${d(this,so)}_alpha_map_${qt(this,Ic)._++}`,a=R(this,Z,md).call(this,o);d(this,Z,xn).set(t,a),d(this,Z,xn).set(r,a);const l=R(this,Z,gd).call(this,o);return R(this,Z,Ab).call(this,i,l),a}addLuminosityFilter(t){let s=d(this,Z,xn).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=R(this,Z,Qv).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=d(this,Z,xn).get(r),s)return d(this,Z,xn).set(t,s),s;const o=`g_${d(this,so)}_luminosity_map_${qt(this,Ic)._++}`,a=R(this,Z,md).call(this,o);d(this,Z,xn).set(t,a),d(this,Z,xn).set(r,a);const l=R(this,Z,gd).call(this,o);return R(this,Z,GU).call(this,l),t&&R(this,Z,Ab).call(this,i,l),a}addHighlightHCMFilter(t,s,i,r,o){var S;const a=`${s}-${i}-${r}-${o}`;let l=d(this,Z,Tp).get(t);if((l==null?void 0:l.key)===a||(l?((S=l.filter)==null||S.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,Z,Tp).set(t,l)),!s||!i))return l.url;const[c,u]=[s,i].map(R(this,Z,Rp).bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),m=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,w]=[r,o].map(R(this,Z,Rp).bind(this));m<p&&([p,m,g,w]=[m,p,w,g]),d(this,Z,pd).style.color="";const v=(C,T,k)=>{const P=new Array(256),I=(m-p)/k,N=C/255,D=(T-C)/(255*k);let M=0;for(let L=0;L<=k;L++){const V=Math.round(p+L*I),G=N+L*D;for(let B=M;B<=V;B++)P[B]=G;M=V+1}for(let L=M;L<256;L++)P[L]=P[M-1];return P.join(",")},_=`g_${d(this,so)}_hcm_${t}_filter`,x=l.filter=R(this,Z,gd).call(this,_);return R(this,Z,Tb).call(this,x),R(this,Z,kp).call(this,v(g[0],w[0],5),v(g[1],w[1],5),v(g[2],w[2],5),x),l.url=R(this,Z,md).call(this,_),l.url}destroy(t=!1){var s,i,r,o;t&&((s=d(this,Pc))!=null&&s.size)||((i=d(this,no))==null||i.parentNode.parentNode.remove(),E(this,no,null),(r=d(this,bh))==null||r.clear(),E(this,bh,null),(o=d(this,Pc))==null||o.clear(),E(this,Pc,null),E(this,Ic,0))}}Rc=new WeakMap,bh=new WeakMap,no=new WeakMap,so=new WeakMap,bn=new WeakMap,Pc=new WeakMap,Ic=new WeakMap,Z=new WeakSet,xn=function(){return d(this,bh)||E(this,bh,new Map)},Tp=function(){return d(this,Pc)||E(this,Pc,new Map)},pd=function(){if(!d(this,no)){const t=d(this,bn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=d(this,bn).createElementNS(Fr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),E(this,no,d(this,bn).createElementNS(Fr,"defs")),t.append(i),i.append(d(this,no)),d(this,bn).body.append(t)}return d(this,no)},Qv=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let m=0;m<256;m++)u[m]=c[m]/255;const p=u.join(",");return[p,p,p]}const[s,i,r]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=s[c]/255,a[c]=i[c]/255,l[c]=r[c]/255;return[o.join(","),a.join(","),l.join(",")]},md=function(t){if(d(this,Rc)===void 0){E(this,Rc,"");const s=d(this,bn).URL;s!==d(this,bn).baseURI&&(Kx(s)?xe('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Rc,nU(s,"")))}return`url(${d(this,Rc)}#${t})`},GU=function(t){const s=d(this,bn).createElementNS(Fr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Tb=function(t){const s=d(this,bn).createElementNS(Fr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},gd=function(t){const s=d(this,bn).createElementNS(Fr,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),d(this,Z,pd).append(s),s},Ap=function(t,s,i){const r=d(this,bn).createElementNS(Fr,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},kp=function(t,s,i,r){const o=d(this,bn).createElementNS(Fr,"feComponentTransfer");r.append(o),R(this,Z,Ap).call(this,o,"feFuncR",t),R(this,Z,Ap).call(this,o,"feFuncG",s),R(this,Z,Ap).call(this,o,"feFuncB",i)},Ab=function(t,s){const i=d(this,bn).createElementNS(Fr,"feComponentTransfer");s.append(i),R(this,Z,Ap).call(this,i,"feFuncA",t)},Rp=function(t){return d(this,Z,pd).style.color=t,SA(getComputedStyle(d(this,Z,pd)).getPropertyValue("color"))};class qU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class YP extends qU{async _fetch(e){const t=await Ty(e,"arraybuffer");return new Uint8Array(t)}}class WU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class JP extends WU{async _fetch(e){const t=await Ty(e,"arraybuffer");return new Uint8Array(t)}}Fn&&xe("Please use the `legacy` build in Node.js environments.");async function EA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Nse extends HU{}class Mse extends jU{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Dse extends zU{async _fetch(e){return EA(e)}}class Lse extends qU{async _fetch(e){return EA(e)}}class Fse extends WU{async _fetch(e){return EA(e)}}const dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function kb(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class TA{isModifyingCurrentTransform(){return!1}getPattern(){Ze("Abstract method `getPattern` called.")}}class Ose extends TA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===dn.STROKE||i===dn.FILL){const o=t.current.getClippedPathBoundingBox(i,vt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=de.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),kb(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=e.createPattern(c.canvas,"no-repeat");const p=new DOMMatrix(s);r.setTransform(p)}else kb(e,this._bbox),r=this._createGradient(e);return r}}function tC(n,e,t,s,i,r,o,a){const l=e.coords,c=e.colors,u=n.data,p=n.width*4;let m;l[t+1]>l[s+1]&&(m=t,t=s,s=m,m=r,r=o,o=m),l[s+1]>l[i+1]&&(m=s,s=i,i=m,m=o,o=a,a=m),l[t+1]>l[s+1]&&(m=t,t=s,s=m,m=r,r=o,o=m);const g=(l[t]+e.offsetX)*e.scaleX,w=(l[t+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,_=(l[s+1]+e.offsetY)*e.scaleY,x=(l[i]+e.offsetX)*e.scaleX,S=(l[i+1]+e.offsetY)*e.scaleY;if(w>=S)return;const C=c[r],T=c[r+1],k=c[r+2],P=c[o],I=c[o+1],N=c[o+2],D=c[a],M=c[a+1],L=c[a+2],V=Math.round(w),G=Math.round(S);let B,j,F,$,O,U,q,le;for(let J=V;J<=G;J++){if(J<_){const z=J<w?0:(w-J)/(w-_);B=g-(g-v)*z,j=C-(C-P)*z,F=T-(T-I)*z,$=k-(k-N)*z}else{let z;J>S?z=1:_===S?z=0:z=(_-J)/(_-S),B=v-(v-x)*z,j=P-(P-D)*z,F=I-(I-M)*z,$=N-(N-L)*z}let se;J<w?se=0:J>S?se=1:se=(w-J)/(w-S),O=g-(g-x)*se,U=C-(C-D)*se,q=T-(T-M)*se,le=k-(k-L)*se;const me=Math.round(Math.min(B,O)),Ne=Math.round(Math.max(B,O));let $e=p*J+me*4;for(let z=me;z<=Ne;z++)se=(B-z)/(B-O),se<0?se=0:se>1&&(se=1),u[$e++]=j-(j-U)*se|0,u[$e++]=F-(F-q)*se|0,u[$e++]=$-($-le)*se|0,u[$e++]=255}}function Use(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let p=0;p<c;p++,u++)tC(n,t,s[u],s[u+1],s[u+a],i[u],i[u+1],i[u+a]),tC(n,t,s[u+a+1],s[u+1],s[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)tC(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class $se extends TA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),g=c/p,w=u/m,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/w},_=p+2*2,x=m+2*2,S=s.getCanvas("mesh",_,x),C=S.context,T=C.createImageData(p,m);if(t){const P=T.data;for(let I=0,N=P.length;I<N;I+=4)P[I]=t[0],P[I+1]=t[1],P[I+2]=t[2],P[I+3]=255}for(const P of this._figures)Use(T,P,v);return C.putImageData(T,2,2),{canvas:S.canvas,offsetX:a-2*g,offsetY:l-2*w,scaleX:g,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){kb(e,this._bbox);const r=new Float32Array(2);if(i===dn.SHADING)de.singularValueDecompose2dScale(vt(e),r);else if(this.matrix){de.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;de.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=a,r[1]*=l}else de.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===dn.SHADING?null:this._background,t.cachedCanvases);return i!==dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Bse extends TA{getPattern(){return"hotpink"}}function Vse(n){switch(n[0]){case"RadialAxial":return new Ose(n);case"Mesh":return new $se(n);case"Dummy":return new Bse}throw new Error(`Unknown IR type: ${n[0]}`)}const XP={COLORED:1,UNCOLORED:2},Iw=class Iw{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),Wx("TilingType: "+r);const u=t[0],p=t[1],m=t[2],g=t[3],w=m-u,v=g-p,_=new Float32Array(2);de.singularValueDecompose2dScale(this.matrix,_);const[x,S]=_;de.singularValueDecompose2dScale(this.baseTransform,_);const C=x*_[0],T=S*_[1];let k=w,P=v,I=!1,N=!1;const D=Math.ceil(l*C),M=Math.ceil(c*T),L=Math.ceil(w*C),V=Math.ceil(v*T);D>=L?k=l:I=!0,M>=V?P=c:N=!0;const G=this.getSizeAndScale(k,this.ctx.canvas.width,C),B=this.getSizeAndScale(P,this.ctx.canvas.height,T),j=e.cachedCanvases.getCanvas("pattern",G.size,B.size),F=j.context,$=a.createCanvasGraphics(F);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,i,o),F.translate(-G.scale*u,-B.scale*p),$.transform(G.scale,0,0,B.scale,0,0),F.save(),this.clipBbox($,u,p,m,g),$.baseTransform=vt($.ctx),$.executeOperatorList(s),$.endDrawing(),F.restore(),I||N){const O=j.canvas;I&&(k=l),N&&(P=c);const U=this.getSizeAndScale(k,this.ctx.canvas.width,C),q=this.getSizeAndScale(P,this.ctx.canvas.height,T),le=U.size,J=q.size,se=e.cachedCanvases.getCanvas("pattern-workaround",le,J),me=se.context,Ne=I?Math.floor(w/l):0,$e=N?Math.floor(v/c):0;for(let z=0;z<=Ne;z++)for(let ke=0;ke<=$e;ke++)me.drawImage(O,le*z,J*ke,le,J,0,0,le,J);return{canvas:se.canvas,scaleX:U.scale,scaleY:q.scale,offsetX:u,offsetY:p}}return{canvas:j.canvas,scaleX:G.scale,scaleY:B.scale,offsetX:u,offsetY:p}}getSizeAndScale(e,t,s){const i=Math.max(Iw.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,a=r-s;e.ctx.rect(t,s,o,a),de.axialAlignedBoundingBox([t,s,i,r],vt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case XP.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=a;break;case XP.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new ose(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i){let r=s;i!==dn.SHADING&&(r=de.transform(r,t.baseTransform),this.matrix&&(r=de.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};H(Iw,"MAX_PATTERN_SIZE",3e3);let Rb=Iw;function jse({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=pn.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=s>>3,p=s&7,m=n.length;t=new Uint32Array(t.buffer);let g=0;for(let w=0;w<i;w++){for(const _=e+u;e<_;e++){const x=e<m?n[e]:255;t[g++]=x&128?c:l,t[g++]=x&64?c:l,t[g++]=x&32?c:l,t[g++]=x&16?c:l,t[g++]=x&8?c:l,t[g++]=x&4?c:l,t[g++]=x&2?c:l,t[g++]=x&1?c:l}if(p===0)continue;const v=e<m?n[e++]:255;for(let _=0;_<p;_++)t[g++]=v&1<<7-_?c:l}return{srcPos:e,destPos:g}}const QP=16,ZP=100,zse=15,eI=10,ns=16,nC=new DOMMatrix,Ts=new Float32Array(2),Md=new Float32Array([1/0,1/0,-1/0,-1/0]);function Hse(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,o,a){e.transform(t,s,i,r,o,a),this.__originalTransform(t,s,i,r,o,a)},n.setTransform=function(t,s,i,r,o,a){e.setTransform(t,s,i,r,o,a),this.__originalSetTransform(t,s,i,r,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,a){e.bezierCurveTo(t,s,i,r,o,a),this.__originalBezierCurveTo(t,s,i,r,o,a)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Gse{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function mv(n,e,t,s,i,r,o,a,l,c){const[u,p,m,g,w,v]=vt(n);if(p===0&&m===0){const S=o*u+w,C=Math.round(S),T=a*g+v,k=Math.round(T),P=(o+l)*u+w,I=Math.abs(Math.round(P)-C)||1,N=(a+c)*g+v,D=Math.abs(Math.round(N)-k)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),C,k),n.drawImage(e,t,s,i,r,0,0,I,D),n.setTransform(u,p,m,g,w,v),[I,D]}if(u===0&&g===0){const S=a*m+w,C=Math.round(S),T=o*p+v,k=Math.round(T),P=(a+c)*m+w,I=Math.abs(Math.round(P)-C)||1,N=(o+l)*p+v,D=Math.abs(Math.round(N)-k)||1;return n.setTransform(0,Math.sign(p),Math.sign(m),0,C,k),n.drawImage(e,t,s,i,r,0,0,D,I),n.setTransform(u,p,m,g,w,v),[D,I]}n.drawImage(e,t,s,i,r,o,a,l,c);const _=Math.hypot(u,p),x=Math.hypot(m,g);return[_*l,x*c]}class tI{constructor(e,t){H(this,"alphaIsShape",!1);H(this,"fontSize",0);H(this,"fontSizeScale",1);H(this,"textMatrix",null);H(this,"textMatrixScale",1);H(this,"fontMatrix",ib);H(this,"leading",0);H(this,"x",0);H(this,"y",0);H(this,"lineX",0);H(this,"lineY",0);H(this,"charSpacing",0);H(this,"wordSpacing",0);H(this,"textHScale",1);H(this,"textRenderingMode",wn.FILL);H(this,"textRise",0);H(this,"fillColor","#000000");H(this,"strokeColor","#000000");H(this,"patternFill",!1);H(this,"patternStroke",!1);H(this,"fillAlpha",1);H(this,"strokeAlpha",1);H(this,"lineWidth",1);H(this,"activeSMask",null);H(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Md.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=dn.FILL,t=null){const s=this.minMax.slice();if(e===dn.STROKE){t||Ze("Stroke bounding box must include transform."),de.singularValueDecompose2dScale(t,Ts);const i=Ts[0]*this.lineWidth/2,r=Ts[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Md,0)}getClippedPathBoundingBox(e=dn.FILL,t=null){return de.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nI(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%ns,r=(t-i)/ns,o=i===0?r:r+1,a=n.createImageData(s,ns);let l=0,c;const u=e.data,p=a.data;let m,g,w,v;if(e.kind===jv.GRAYSCALE_1BPP){const _=u.byteLength,x=new Uint32Array(p.buffer,0,p.byteLength>>2),S=x.length,C=s+7>>3,T=4294967295,k=pn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<r?ns:i,c=0,g=0;g<w;g++){const P=_-l;let I=0;const N=P>C?s:P*8-7,D=N&-8;let M=0,L=0;for(;I<D;I+=8)L=u[l++],x[c++]=L&128?T:k,x[c++]=L&64?T:k,x[c++]=L&32?T:k,x[c++]=L&16?T:k,x[c++]=L&8?T:k,x[c++]=L&4?T:k,x[c++]=L&2?T:k,x[c++]=L&1?T:k;for(;I<N;I++)M===0&&(L=u[l++],M=128),x[c++]=L&M?T:k,M>>=1}for(;c<S;)x[c++]=0;n.putImageData(a,0,m*ns)}}else if(e.kind===jv.RGBA_32BPP){for(g=0,v=s*ns*4,m=0;m<r;m++)p.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,g),g+=ns;m<o&&(v=s*i*4,p.set(u.subarray(l,l+v)),n.putImageData(a,0,g))}else if(e.kind===jv.RGB_24BPP)for(w=ns,v=s*w,m=0;m<o;m++){for(m>=r&&(w=i,v=s*w),c=0,g=v;g--;)p[c++]=u[l++],p[c++]=u[l++],p[c++]=u[l++],p[c++]=255;n.putImageData(a,0,m*ns)}else throw new Error(`bad image kind: ${e.kind}`)}function sI(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%ns,r=(t-i)/ns,o=i===0?r:r+1,a=n.createImageData(s,ns);let l=0;const c=e.data,u=a.data;for(let p=0;p<o;p++){const m=p<r?ns:i;({srcPos:l}=jse({src:c,srcPos:l,dest:u,width:s,height:m,nonBlackColor:0})),n.putImageData(a,0,p*ns)}}function rp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function gv(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function iI(n,e){if(e)return!0;de.singularValueDecompose2dScale(n,Ts);const t=Math.fround(Rr.pixelRatio*Tl.PDF_TO_CSS_UNITS);return Ts[0]<=t&&Ts[1]<=t}const qse=["butt","round","square"],Wse=["miter","round","bevel"],Kse={},rI={};var ji,Pb,Ib,Nb;const DA=class DA{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){A(this,ji);this.ctx=e,this.current=new tI(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new Gse(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),gv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,o=e.fnArray;let a=t||0;const l=r.length;if(l===a)return a;const c=l-a>eI&&typeof s=="function",u=c?Date.now()+zse:0;let p=0;const m=this.commonObjs,g=this.objs;let w;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(w=o[a],w!==fw.dependency)this[w].apply(this,r[a]);else for(const v of r[a]){const _=v.startsWith("g_")?m:g;if(!_.has(v))return _.get(v,s),a}if(a++,a===l)return a;if(c&&++p>eI){if(Date.now()>u)return s(),a;p=0}}}endDrawing(){R(this,ji,Pb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,ji,Ib).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=i,c="prescale1",u,p;for(;r>2&&a>1||o>2&&l>1;){let m=a,g=l;r>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/m),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),u=this.cachedCanvases.getCanvas(c,m,g),p=u.context,p.clearRect(0,0,m,g),p.drawImage(e,0,0,a,l,0,0,m,g),e=u.canvas,a=m,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,o=this.current.patternFill,a=vt(t);let l,c,u,p;if((e.bitmap||e.data)&&e.count>1){const D=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(D),l||(l=new Map,this._cachedBitmapsMap.set(D,l));const M=l.get(c);if(M&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),V=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:L,offsetY:V}}u=M}u||(p=this.cachedCanvases.getCanvas("maskCanvas",s,i),sI(p.context,e));let m=de.transform(a,[1/s,0,0,-1/i,0,0]);m=de.transform(m,[1,0,0,1,0,-i]);const g=Md.slice();de.axialAlignedBoundingBox([0,0,s,i],m,g);const[w,v,_,x]=g,S=Math.round(_-w)||1,C=Math.round(x-v)||1,T=this.cachedCanvases.getCanvas("fillCanvas",S,C),k=T.context,P=w,I=v;k.translate(-P,-I),k.transform(...m),u||(u=this._scaleImage(p.canvas,qi(k)),u=u.img,l&&o&&l.set(c,u)),k.imageSmoothingEnabled=iI(vt(k),e.interpolate),mv(k,u,0,0,u.width,u.height,0,0,s,i),k.globalCompositeOperation="source-in";const N=de.transform(qi(k),[1,0,0,1,-P,-I]);return k.fillStyle=o?r.getPattern(t,this,N,dn.FILL):r,k.fillRect(0,0,s,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=qse[e]}setLineJoin(e){this.ctx.lineJoin=Wse[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),rp(this.suspendedCtx,r),Hse(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),rp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,a,l,c,u,p){let m=e.canvas,g=l-u,w=c-p;if(o)if(g<0||w<0||g+s>m.width||w+i>m.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,i),x=_.context;x.drawImage(m,-g,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,s,i),x.globalCompositeOperation="source-over",m=_.canvas,g=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(g,w,s,i),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,w,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,s,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,g,w,s,i,l,c,s,i),t.restore()}save(){this.inSMaskMode&&rp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&rp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,o){this.ctx.transform(e,t,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[i]=t;if(!s){i||(i=t[0]=new Path2D),this[e](i);return}if(!(i instanceof Path2D)){const r=t[0]=new Path2D;for(let o=0,a=i.length;o<a;)switch(i[o++]){case hv.moveTo:r.moveTo(i[o++],i[o++]);break;case hv.lineTo:r.lineTo(i[o++],i[o++]);break;case hv.curveTo:r.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case hv.closePath:r.closePath();break;default:xe(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=r}de.axialAlignedBoundingBox(s,vt(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,qi(s),dn.STROKE),r){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(r)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(dn.STROKE,vt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const l=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,qi(s),dn.FILL),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Kse}eoClip(){this.pendingClip=rI}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:c}of e)s.addPath(c,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(l,-l));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||ib,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&xe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let c=t;t<QP?c=QP:t>ZP&&(c=ZP),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,p=c&wn.FILL_STROKE_MASK,m=!!(c&wn.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,w=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||m||g||w)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||w){o.save(),o.translate(t,s),o.scale(u,-u);let _;if((p===wn.FILL||p===wn.FILL_STROKE)&&(i?(_=o.getTransform(),o.setTransform(...i),o.fill(R(this,ji,Nb).call(this,v,_,i))):o.fill(v)),p===wn.STROKE||p===wn.FILL_STROKE)if(r){_||(_=o.getTransform()),o.setTransform(...r);const{a:x,b:S,c:C,d:T}=_,k=de.inverseTransform(r),P=de.transform([x,S,C,T,0,0],k);de.singularValueDecompose2dScale(P,Ts),o.lineWidth*=Math.max(Ts[0],Ts[1])/u,o.stroke(R(this,ji,Nb).call(this,v,_,r))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(p===wn.FILL||p===wn.FILL_STROKE)&&o.fillText(e,t,s),(p===wn.STROKE||p===wn.FILL_STROKE)&&o.strokeText(e,t,s);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vt(o),x:t,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return De(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,p=e.length,m=s.vertical,g=m?1:-1,w=s.defaultVMetrics,v=i*t.fontMatrix[0],_=t.textRenderingMode===wn.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),c>0?r.scale(u,-1):r.scale(u,1);let x,S;if(t.patternFill){r.save();const I=t.fillColor.getPattern(r,this,qi(r),dn.FILL);x=vt(r),r.restore(),r.fillStyle=I}if(t.patternStroke){r.save();const I=t.strokeColor.getPattern(r,this,qi(r),dn.STROKE);S=vt(r),r.restore(),r.strokeStyle=I}let C=t.lineWidth;const T=t.textMatrixScale;if(T===0||C===0){const I=t.textRenderingMode&wn.FILL_STROKE_MASK;(I===wn.STROKE||I===wn.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=T;if(o!==1&&(r.scale(o,o),C/=o),r.lineWidth=C,s.isInvalidPDFjsFont){const I=[];let N=0;for(const D of e)I.push(D.unicode),N+=D.width;r.fillText(I.join(""),0,0),t.x+=N*v*u,r.restore(),this.compose();return}let k=0,P;for(P=0;P<p;++P){const I=e[P];if(typeof I=="number"){k+=g*I*i/1e3;continue}let N=!1;const D=(I.isSpace?l:0)+a,M=I.fontChar,L=I.accent;let V,G,B=I.width;if(m){const F=I.vmetric||w,$=-(I.vmetric?F[1]:B*.5)*v,O=F[2]*v;B=F?-F[0]:B,V=$/o,G=(k+O)/o}else V=k/o,G=0;if(s.remeasure&&B>0){const F=r.measureText(M).width*1e3/i*o;if(B<F&&this.isFontSubpixelAAEnabled){const $=B/F;N=!0,r.save(),r.scale($,1),V/=$}else B!==F&&(V+=(B-F)/2e3*i/o)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(_&&!L)r.fillText(M,V,G);else if(this.paintChar(M,V,G,x,S),L){const F=V+i*L.offset.x/o,$=G-i*L.offset.y/o;this.paintChar(L.fontChar,F,$,x,S)}}const j=m?B*v-D*c:B*v+D*c;k+=j,N&&r.restore()}m?t.y-=k:t.x+=k*u,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,a=i.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,u=s.textHScale*o,p=s.fontMatrix||ib,m=e.length,g=s.textRenderingMode===wn.INVISIBLE;let w,v,_,x;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(u,o),w=0;w<m;++w){if(v=e[w],typeof v=="number"){x=a*v*r/1e3,this.ctx.translate(x,0),s.x+=x*u;continue}const S=(v.isSpace?c:0)+l,C=i.charProcOperatorList[v.operatorListId];C?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...p),this.executeOperatorList(C),this.restore()):xe(`Type3 character "${v.operatorListId}" is not available.`);const T=[v.width,0];de.applyTransform(T,p),_=T[0]*r+S,t.translate(_,0),s.x+=_*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,o){const a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||vt(this.ctx),i={createCanvasGraphics:r=>new DA(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Rb(e,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Vse(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,qi(t),dn.SHADING);const i=qi(t);if(i){const{width:r,height:o}=t.canvas,a=Md.slice();de.axialAlignedBoundingBox([0,0,r,o],i,a);const[l,c,u,p]=a;this.ctx.fillRect(l,c,u-l,p-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ze("Should not call beginInlineImage")}beginImageData(){Ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=vt(this.ctx),t)){de.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,i,r,o]=t,a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Wx("TODO: Support non-isolated groups."),e.knockout&&xe("Knockout groups not supported.");const s=vt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Md.slice();de.axialAlignedBoundingBox(e.bbox,vt(t),i);const r=[0,0,t.canvas.width,t.canvas.height];i=de.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(u,l,c),m=p.context;m.translate(-o,-a),m.transform(...s);let g=new Path2D;const[w,v,_,x]=e.bbox;if(g.rect(w,v,_-w,x-v),e.matrix){const S=new Path2D;S.addPath(g,new DOMMatrix(e.matrix)),g=S}m.clip(g),e.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),rp(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=Md.slice();de.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(R(this,ji,Pb).call(this),gv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,de.singularValueDecompose2dScale(vt(this.ctx),Ts);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Ts[0],0,0,-Ts[1],0,a*Ts[1]),gv(this.ctx)}else{gv(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new tI(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,ji,Ib).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this._createMaskCanvas(e),r=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=vt(a);a.transform(t,s,i,r,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,p=o.length;u<p;u+=2){const m=de.transform(l,[t,s,i,r,o[u],o[u+1]]);a.drawImage(c.canvas,m[4],m[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),p=u.context;p.save();const m=this.getObject(o,r);sI(p,m),p.globalCompositeOperation="source-in",p.fillStyle=i?s.getPattern(p,this,qi(t),dn.FILL):s,p.fillRect(0,0,a,l),p.restore(),t.save(),t.transform(...c),t.scale(1,-1),mv(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){xe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){xe("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,s,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/t,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;nI(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,qi(i));i.imageSmoothingEnabled=iI(vt(i),e.interpolate),mv(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;nI(l,e),i=this.applyTransferMapsToCanvas(l)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),mv(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===rI?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const l=Math.abs(t),c=Math.abs(r);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,p=c*e;o=u<1?1/u:1,a=p<1?1/p:1}}else{const l=Math.abs(t*r-s*i),c=Math.hypot(t,s),u=Math.hypot(i,r);if(e===0)o=u/l,a=c/l;else{const p=e*l;o=u>p?u/p:1,a=c>p?c/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(r,o),nC.a=1/r,nC.d=1/o;const l=new Path2D;if(l.addPath(e,nC),a.length>0){const c=Math.max(r,o);s.setLineDash(a.map(u=>u/c)),s.lineDashOffset/=c}s.lineWidth=i||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ji=new WeakSet,Pb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ib=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Nb=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Kd=DA;for(const n in fw)Kd.prototype[n]!==void 0&&(Kd.prototype[fw[n]]=Kd.prototype[n]);var ig,rg;class vr{static get workerPort(){return d(this,ig)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,ig,e)}static get workerSrc(){return d(this,rg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,rg,e)}}ig=new WeakMap,rg=new WeakMap,A(vr,ig,null),A(vr,rg,"");var Eh,og;class Yse{constructor({parsedData:e,rawData:t}){A(this,Eh);A(this,og);E(this,Eh,e),E(this,og,t)}getRaw(){return d(this,og)}get(e){return d(this,Eh).get(e)??null}[Symbol.iterator](){return d(this,Eh).entries()}}Eh=new WeakMap,og=new WeakMap;const yd=Symbol("INTERNAL");var ag,lg,cg,Th;class Jse{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){A(this,ag,!1);A(this,lg,!1);A(this,cg,!1);A(this,Th,!0);E(this,ag,!!(e&bs.DISPLAY)),E(this,lg,!!(e&bs.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(d(this,cg))return d(this,Th);if(!d(this,Th))return!1;const{print:e,view:t}=this.usage;return d(this,ag)?(t==null?void 0:t.viewState)!=="OFF":d(this,lg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==yd&&Ze("Internal method `_setVisible` called."),E(this,cg,s),E(this,Th,t)}}ag=new WeakMap,lg=new WeakMap,cg=new WeakMap,Th=new WeakMap;var Ua,Xe,Ah,kh,ug,Mb;class Xse{constructor(e,t=bs.DISPLAY){A(this,ug);A(this,Ua,null);A(this,Xe,new Map);A(this,Ah,null);A(this,kh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,kh,e.order);for(const s of e.groups)d(this,Xe).set(s.id,new Jse(t,s));if(e.baseState==="OFF")for(const s of d(this,Xe).values())s._setVisible(yd,!1);for(const s of e.on)d(this,Xe).get(s)._setVisible(yd,!0);for(const s of e.off)d(this,Xe).get(s)._setVisible(yd,!1);E(this,Ah,this.getHash())}}isVisible(e){if(d(this,Xe).size===0)return!0;if(!e)return Wx("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Xe).has(e.id)?d(this,Xe).get(e.id).visible:(xe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,ug,Mb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Xe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(d(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Xe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!d(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Xe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!d(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Xe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(d(this,Xe).get(t).visible)return!1}return!0}return xe(`Unknown optional content policy ${e.policy}.`),!0}return xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=d(this,Xe).get(e);if(!i){xe(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((r=d(this,Xe).get(a))==null||r._setVisible(yd,!1,!0));i._setVisible(yd,!!t,!0),E(this,Ua,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=d(this,Xe).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}E(this,Ua,null)}get hasInitialVisibility(){return d(this,Ah)===null||this.getHash()===d(this,Ah)}getOrder(){return d(this,Xe).size?d(this,kh)?d(this,kh).slice():[...d(this,Xe).keys()]:null}getGroup(e){return d(this,Xe).get(e)||null}getHash(){if(d(this,Ua)!==null)return d(this,Ua);const e=new FU;for(const[t,s]of d(this,Xe))e.update(`${t}:${s.visible}`);return E(this,Ua,e.hexdigest())}[Symbol.iterator](){return d(this,Xe).entries()}}Ua=new WeakMap,Xe=new WeakMap,Ah=new WeakMap,kh=new WeakMap,ug=new WeakSet,Mb=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=R(this,ug,Mb).call(this,r);else if(d(this,Xe).has(r))o=d(this,Xe).get(r).visible;else return xe(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class Qse{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Ft(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Zse(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new eie(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class Zse{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=_A(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class eie{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function tie(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),r(u)}if(t=o(n),t){const u=c(t);return r(u)}if(t=s("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),r(u)}function s(u,p){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(u,p){if(u){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(u,{fatal:!0}),g=Ey(p);p=m.decode(g),e=!1}catch{}}return p}function r(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const p=[];let m;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(u))!==null;){let[,v,_,x]=m;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[_,x]}const w=[];for(let v=0;v<p.length&&v in p;++v){let[_,x]=p[v];x=a(x),_&&(x=unescape(x),v===0&&(x=l(x))),w.push(x)}return w.join("")}function a(u){if(u.startsWith('"')){const p=u.slice(1).split('\\"');for(let m=0;m<p.length;++m){const g=p[m].indexOf('"');g!==-1&&(p[m]=p[m].slice(0,g),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}u=p.join('"')}return u}function l(u){const p=u.indexOf("'");if(p===-1)return u;const m=u.slice(0,p),w=u.slice(p+1).replace(/^[^']*'/,"");return i(m,w)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,g,w){if(g==="q"||g==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,_){return String.fromCharCode(parseInt(_,16))}),i(m,w);try{w=atob(w)}catch{}return i(m,w)})}return""}function KU(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Yx(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function YU({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function JU(n){const e=n.get("Content-Disposition");if(e){let t=tie(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(_A(t))return t}return null}function Ry(n,e){return new pw(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function XU(n){return n===200||n===206}function QU(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ZU(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(xe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class nie{constructor(e){H(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=KU(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sie(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new iie(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class sie{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,QU(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Yx(r.url),!XU(r.status))throw Ry(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=YU({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=JU(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new El("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ZU(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class iie{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,QU(r,this._withCredentials,this._abortController)).then(a=>{const l=Yx(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!XU(a.status))throw Ry(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:ZU(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const sC=200,iC=206;function rie(n){const e=n.response;return typeof e!="string"?e:Ey(e).buffer}class oie{constructor({url:e,httpHeaders:t,withCredentials:s}){H(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=KU(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=iC):i.expectedStatus=sC,t.responseType="arraybuffer",Ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||sC;if(!(r===sC&&s.expectedStatus===iC)&&r!==s.expectedStatus){s.onError(i.status);return}const a=rie(i);if(r===iC){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(xe('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class aie{constructor(e){this._source=e,this._manager=new oie(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lie(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new cie(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class lie{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Yx(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=YU({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=JU(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ry(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cie{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Yx((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Ry(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uie=/^[a-z][a-z0-9\-+.]+:/i;function die(n){if(uie.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class hie{constructor(e){this.source=e,this.url=die(e.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fie(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new pie(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class fie{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Ry(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new El("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pie{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const op=Symbol("INITIAL_DATA");var fs,dg,Db;class e${constructor(){A(this,dg);A(this,fs,Object.create(null))}get(e,t=null){if(t){const i=R(this,dg,Db).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=d(this,fs)[e];if(!s||s.data===op)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=d(this,fs)[e];return!!t&&t.data!==op}delete(e){const t=d(this,fs)[e];return!t||t.data===op?!1:(delete d(this,fs)[e],!0)}resolve(e,t=null){const s=R(this,dg,Db).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in d(this,fs)){const{data:s}=d(this,fs)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}E(this,fs,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,fs)){const{data:t}=d(this,fs)[e];t!==op&&(yield[e,t])}}}fs=new WeakMap,dg=new WeakSet,Db=function(e){var t;return(t=d(this,fs))[e]||(t[e]={...Promise.withResolvers(),data:op})};const mie=1e5,oI=30;var CI,$a,Zn,hg,fg,Nc,io,pg,mg,Mc,Rh,Ph,Ba,Ih,gg,Nh,Dc,yg,vg,Mh,Lc,wg,Va,Dh,jo,t$,n$,Lb,Ns,Zv,Fb,s$,i$;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:s}){A(this,jo);A(this,$a,Promise.withResolvers());A(this,Zn,null);A(this,hg,!1);A(this,fg,!!((CI=globalThis.FontInspector)!=null&&CI.enabled));A(this,Nc,null);A(this,io,null);A(this,pg,0);A(this,mg,0);A(this,Mc,null);A(this,Rh,null);A(this,Ph,0);A(this,Ba,0);A(this,Ih,Object.create(null));A(this,gg,[]);A(this,Nh,null);A(this,Dc,[]);A(this,yg,new WeakMap);A(this,vg,null);var l;if(e instanceof ReadableStream)E(this,Nh,e);else if(typeof e=="object")E(this,Nh,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Zn,E(this,Rh,t)),E(this,Ba,s.scale*Rr.pixelRatio),E(this,Ph,s.rotation),E(this,io,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;E(this,vg,[1,0,0,-1,-o,a+r]),E(this,mg,i),E(this,pg,r),R(l=Ut,Ns,s$).call(l),$u(t,s),d(this,$a).promise.finally(()=>{d(Ut,Dh).delete(this),E(this,io,null),E(this,Ih,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return De(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Mc).read().then(({value:t,done:s})=>{if(s){d(this,$a).resolve();return}d(this,Nc)??E(this,Nc,t.lang),Object.assign(d(this,Ih),t.styles),R(this,jo,t$).call(this,t.items),e()},d(this,$a).reject)};return E(this,Mc,d(this,Nh).getReader()),d(Ut,Dh).add(this),e(),d(this,$a).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*Rr.pixelRatio,i=e.rotation;if(i!==d(this,Ph)&&(t==null||t(),E(this,Ph,i),$u(d(this,Rh),{rotation:i})),s!==d(this,Ba)){t==null||t(),E(this,Ba,s);const o={div:null,properties:null,ctx:R(r=Ut,Ns,Zv).call(r,d(this,Nc))};for(const a of d(this,Dc))o.properties=d(this,yg).get(a),o.div=a,R(this,jo,Lb).call(this,o)}}cancel(){var t;const e=new El("TextLayer task cancelled.");(t=d(this,Mc))==null||t.cancel(e).catch(()=>{}),E(this,Mc,null),d(this,$a).reject(e)}get textDivs(){return d(this,Dc)}get textContentItemsStr(){return d(this,gg)}static cleanup(){if(!(d(this,Dh).size>0)){d(this,Mh).clear();for(const{canvas:e}of d(this,Lc).values())e.remove();d(this,Lc).clear()}}};$a=new WeakMap,Zn=new WeakMap,hg=new WeakMap,fg=new WeakMap,Nc=new WeakMap,io=new WeakMap,pg=new WeakMap,mg=new WeakMap,Mc=new WeakMap,Rh=new WeakMap,Ph=new WeakMap,Ba=new WeakMap,Ih=new WeakMap,gg=new WeakMap,Nh=new WeakMap,Dc=new WeakMap,yg=new WeakMap,vg=new WeakMap,Mh=new WeakMap,Lc=new WeakMap,wg=new WeakMap,Va=new WeakMap,Dh=new WeakMap,jo=new WeakSet,t$=function(e){var i,r;if(d(this,hg))return;(r=d(this,io)).ctx??(r.ctx=R(i=Ut,Ns,Zv).call(i,d(this,Nc)));const t=d(this,Dc),s=d(this,gg);for(const o of e){if(t.length>mie){xe("Ignoring additional textDivs for performance reasons."),E(this,hg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,Zn);E(this,Zn,document.createElement("span")),d(this,Zn).classList.add("markedContent"),o.id!==null&&d(this,Zn).setAttribute("id",`${o.id}`),a.append(d(this,Zn))}else o.type==="endMarkedContent"&&E(this,Zn,d(this,Zn).parentNode);continue}s.push(o.str),R(this,jo,n$).call(this,o)}},n$=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Dc).push(t);const i=de.transform(d(this,vg),e.transform);let r=Math.atan2(i[1],i[0]);const o=d(this,Ih)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=d(this,fg)&&o.fontSubstitution||o.fontFamily;a=Ut.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*R(v=Ut,Ns,i$).call(v,a,o,d(this,Nc));let u,p;r===0?(u=i[4],p=i[5]-c):(u=i[4]+c*Math.sin(r),p=i[5]-c*Math.cos(r));const m="calc(var(--total-scale-factor) *",g=t.style;d(this,Zn)===d(this,Rh)?(g.left=`${(100*u/d(this,mg)).toFixed(2)}%`,g.top=`${(100*p/d(this,pg)).toFixed(2)}%`):(g.left=`${m}${u.toFixed(2)}px)`,g.top=`${m}${p.toFixed(2)}px)`),g.fontSize=`${m}${(d(Ut,Va)*l).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,fg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);_!==x&&Math.max(_,x)/Math.min(_,x)>1.5&&(w=!0)}if(w&&(s.canvasWidth=o.vertical?e.height:e.width),d(this,yg).set(t,s),d(this,io).div=t,d(this,io).properties=s,R(this,jo,Lb).call(this,d(this,io)),s.hasText&&d(this,Zn).append(t),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),d(this,Zn).append(_)}},Lb=function(e){var a;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(d(Ut,Va)>1&&(o=`scale(${1/d(Ut,Va)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:u}=s;R(a=Ut,Ns,Fb).call(a,i,u*d(this,Ba),l);const{width:p}=i.measureText(t.textContent);p>0&&(o=`scaleX(${c*d(this,Ba)/p}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Ns=new WeakSet,Zv=function(e=null){let t=d(this,Lc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Lc).set(e,t),d(this,wg).set(t,{size:0,family:""})}return t},Fb=function(e,t,s){const i=d(this,wg).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},s$=function(){if(d(this,Va)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,Va,e.getBoundingClientRect().height),e.remove()},i$=function(e,t,s){const i=d(this,Mh).get(e);if(i)return i;const r=R(this,Ns,Zv).call(this,s);r.canvas.width=r.canvas.height=oI,R(this,Ns,Fb).call(this,r,oI,e);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return a?c=a/(a+l):(pn.platform.isFirefox&&xe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),d(this,Mh).set(e,c),c},A(Ut,Ns),A(Ut,Mh,new Map),A(Ut,Lc,new Map),A(Ut,wg,new WeakMap),A(Ut,Va,null),A(Ut,Dh,new Set);let bm=Ut;class Em{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Em.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const c of r.children)i(c)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const gie=100;function r$(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Ob,{docId:t}=e,s=n.url?Ese(n.url):null,i=n.data?Tse(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof o$?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof Tm?n.worker:null;const p=n.verbosity,m=typeof n.docBaseUrl=="string"&&!Kx(n.docBaseUrl)?n.docBaseUrl:null,g=fv(n.cMapUrl),w=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Fn?Dse:KP),_=fv(n.iccUrl),x=fv(n.standardFontDataUrl),S=n.StandardFontDataFactory||(Fn?Lse:YP),C=fv(n.wasmUrl),T=n.WasmFactory||(Fn?Fse:JP),k=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Fn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Fn&&(pn.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:Fn,V=n.fontExtraProperties===!0,G=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,j=n.disableRange===!0,F=n.disableStream===!0,$=n.disableAutoFetch===!0,O=n.pdfBug===!0,U=n.CanvasFactory||(Fn?Mse:Pse),q=n.FilterFactory||(Fn?Nse:Ise),le=n.enableHWA===!0,J=n.useWasm!==!1,se=l?l.length:n.length??NaN,me=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Fn&&!L,Ne=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===KP&&S===YP&&T===JP&&g&&x&&C&&xp(g,document.baseURI)&&xp(x,document.baseURI)&&xp(C,document.baseURI)),$e=null;sse(p);const z={canvasFactory:new U({ownerDocument:B,enableHWA:le}),filterFactory:new q({docId:t,ownerDocument:B}),cMapReaderFactory:Ne?null:new v({baseUrl:g,isCompressed:w}),standardFontDataFactory:Ne?null:new S({baseUrl:x}),wasmFactory:Ne?null:new T({baseUrl:C})};u||(u=Tm.create({verbosity:p,port:vr.workerPort}),e._worker=u);const ke={docId:t,apiVersion:"5.3.93",data:i,password:a,disableAutoFetch:$,rangeChunkSize:c,length:se,docBaseUrl:m,enableXfa:G,evaluatorOptions:{maxImageSize:P,disableFontFace:L,ignoreErrors:k,isEvalSupported:I,isOffscreenCanvasSupported:N,isImageDecoderSupported:D,canvasMaxAreaInBytes:M,fontExtraProperties:V,useSystemFonts:me,useWasm:J,useWorkerFetch:Ne,cMapUrl:g,iccUrl:_,standardFontDataUrl:x,wasmUrl:C}},tt={ownerDocument:B,pdfBug:O,styleElement:$e,loadingParams:{disableAutoFetch:$,enableXfa:G}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Me=u.messageHandler.sendWithPromise("GetDocRequest",ke,i?[i.buffer]:null);let ee;if(l)ee=new Qse(l,{disableRange:j,disableStream:F});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const he=xp(s)?nie:Fn?hie:aie;ee=new he({url:s,length:se,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:j,disableStream:F})}return Me.then(he=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Le=new Ep(t,he,u.port),gt=new wie(Le,e,ee,tt,z);e._transport=gt,Le.send("Ready",null)})}).catch(e._capability.reject),e}var Nw;const Mw=class Mw{constructor(){H(this,"_capability",Promise.withResolvers());H(this,"_transport",null);H(this,"_worker",null);H(this,"docId",`d${qt(Mw,Nw)._++}`);H(this,"destroyed",!1);H(this,"onPassword",null);H(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Nw=new WeakMap,A(Mw,Nw,0);let Ob=Mw;var Fc,xg,_g,Cg,Sg;class o${constructor(e,t,s=!1,i=null){A(this,Fc,Promise.withResolvers());A(this,xg,[]);A(this,_g,[]);A(this,Cg,[]);A(this,Sg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){d(this,Sg).push(e)}addProgressListener(e){d(this,Cg).push(e)}addProgressiveReadListener(e){d(this,_g).push(e)}addProgressiveDoneListener(e){d(this,xg).push(e)}onDataRange(e,t){for(const s of d(this,Sg))s(e,t)}onDataProgress(e,t){d(this,Fc).promise.then(()=>{for(const s of d(this,Cg))s(e,t)})}onDataProgressiveRead(e){d(this,Fc).promise.then(()=>{for(const t of d(this,_g))t(e)})}onDataProgressiveDone(){d(this,Fc).promise.then(()=>{for(const e of d(this,xg))e()})}transportReady(){d(this,Fc).resolve()}requestDataRange(e,t){Ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Fc=new WeakMap,xg=new WeakMap,_g=new WeakMap,Cg=new WeakMap,Sg=new WeakMap;class yie{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ro,Oc,Pp;class vie{constructor(e,t,s,i=!1){A(this,Oc);A(this,ro,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new GP:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new e$,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Ay({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=ha.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:p=!1}){var T,k;(T=this._stats)==null||T.time("Overall");const m=this._transport.getRenderingIntent(s,i,u,p),{renderingIntent:g,cacheKey:w}=m;E(this,ro,!1),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(w);v||(v=Object.create(null),this._intentStates.set(w,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const _=!!(g&bs.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(m));const x=P=>{var I;v.renderTasks.delete(S),_&&E(this,ro,!0),R(this,Oc,Pp).call(this),P?(S.capability.reject(P),this._abortOperatorList({intentState:v,reason:P instanceof Error?P:new Error(P)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new Ub({callback:x,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(S);const C=S.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([P,I])=>{var N;if(this.destroyed){x();return}if((N=this._stats)==null||N.time("Rendering"),!(I.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:P,optionalContentConfig:I}),S.operatorListChanged()}).catch(x),C}getOperatorList({intent:e="display",annotationMode:t=ha.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var c;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Em.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),E(this,ro,!1),Promise.all(e)}cleanup(e=!1){E(this,ro,!0);const t=R(this,Oc,Pp).call(this);return e&&t&&this._stats&&(this._stats=new GP),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&R(this,Oc,Pp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:p,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,c),u())},p=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();R(this,Oc,Pp).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(p);else if(c.opListReadCapability)c.opListReadCapability.reject(p);else throw p}})};u()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof xA){let i=gie;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new El(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}ro=new WeakMap,Oc=new WeakSet,Pp=function(){if(!d(this,ro)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,ro,!1),!0};var ja,_i,oo,Uc,Dw,$c,Bc,Vn,e0,a$,l$,Ip,Lh,t0;const ut=class ut{constructor({name:e=null,port:t=null,verbosity:s=ise()}={}){A(this,Vn);A(this,ja,Promise.withResolvers());A(this,_i,null);A(this,oo,null);A(this,Uc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(d(ut,Bc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(ut,Bc).set(t,this),R(this,Vn,a$).call(this,t)}else R(this,Vn,l$).call(this)}get promise(){return d(this,ja).promise}get port(){return d(this,oo)}get messageHandler(){return d(this,_i)}destroy(){var e,t;this.destroyed=!0,(e=d(this,Uc))==null||e.terminate(),E(this,Uc,null),d(ut,Bc).delete(d(this,oo)),E(this,oo,null),(t=d(this,_i))==null||t.destroy(),E(this,_i,null)}static create(e){const t=d(this,Bc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ut(e)}static get workerSrc(){if(vr.workerSrc)return vr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return De(this,"_setupFakeWorkerGlobal",(async()=>d(this,Lh,t0)?d(this,Lh,t0):(await import(this.workerSrc)).WorkerMessageHandler)())}};ja=new WeakMap,_i=new WeakMap,oo=new WeakMap,Uc=new WeakMap,Dw=new WeakMap,$c=new WeakMap,Bc=new WeakMap,Vn=new WeakSet,e0=function(){d(this,ja).resolve(),d(this,_i).send("configure",{verbosity:this.verbosity})},a$=function(e){E(this,oo,e),E(this,_i,new Ep("main","worker",e)),d(this,_i).on("ready",()=>{}),R(this,Vn,e0).call(this)},l$=function(){if(d(ut,$c)||d(ut,Lh,t0)){R(this,Vn,Ip).call(this);return}let{workerSrc:e}=ut;try{ut._isSameOrigin(window.location,e)||(e=ut._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Ep("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?d(this,ja).reject(new Error("Worker was destroyed")):R(this,Vn,Ip).call(this)},r=new AbortController;t.addEventListener("error",()=>{d(this,Uc)||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}E(this,_i,s),E(this,oo,t),E(this,Uc,t),R(this,Vn,e0).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{R(this,Vn,Ip).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{Wx("The worker has been disabled.")}R(this,Vn,Ip).call(this)},Ip=function(){d(ut,$c)||(xe("Setting up fake worker."),E(ut,$c,!0)),ut._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,ja).reject(new Error("Worker was destroyed"));return}const t=new Rse;E(this,oo,t);const s=`fake${qt(ut,Dw)._++}`,i=new Ep(s+"_worker",s,t);e.setup(i,t),E(this,_i,new Ep(s,s+"_worker",t)),R(this,Vn,e0).call(this)}).catch(e=>{d(this,ja).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Lh=new WeakSet,t0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(ut,Lh),A(ut,Dw,0),A(ut,$c,!1),A(ut,Bc,new WeakMap),Fn&&(E(ut,$c,!0),vr.workerSrc||(vr.workerSrc="./pdf.worker.mjs")),ut._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},ut._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ut.fromPort=e=>{if(gse("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ut.create(e)};let Tm=ut;var ao,lr,Fh,Oh,lo,Vc,Np;class wie{constructor(e,t,s,i,r){A(this,Vc);A(this,ao,new Map);A(this,lr,new Map);A(this,Fh,new Map);A(this,Oh,new Map);A(this,lo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new e$,this.fontLoader=new Sse({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return De(this,"annotationStorage",new bA)}getRenderingIntent(e,t=ha.ENABLE,s=null,i=!1,r=!1){let o=bs.DISPLAY,a=bb;switch(e){case"any":o=bs.ANY;break;case"display":break;case"print":o=bs.PRINT;break;default:xe(`getRenderingIntent - invalid intent: ${e}`)}const l=o&bs.PRINT&&s instanceof UU?s:this.annotationStorage;switch(t){case ha.DISABLE:o+=bs.ANNOTATIONS_DISABLE;break;case ha.ENABLE:break;case ha.ENABLE_FORMS:o+=bs.ANNOTATIONS_FORMS;break;case ha.ENABLE_STORAGE:o+=bs.ANNOTATIONS_STORAGE,a=l.serializable;break;default:xe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=bs.IS_EDITING),r&&(o+=bs.OPLIST);const{ids:c,hash:u}=l.modifiedIds,p=[o,a.hash,u];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=d(this,lo))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of d(this,lr).values())e.push(i._destroy());d(this,lr).clear(),d(this,Fh).clear(),d(this,Oh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),d(this,ao).clear(),this.filterFactory.destroy(),bm.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new El("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Ft(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{Ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Ft(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new yie(s,this))}),e.on("DocException",s=>{t._capability.reject(Kn(s))}),e.on("PasswordRequest",s=>{E(this,lo,Promise.withResolvers());try{if(!t.onPassword)throw Kn(s);const i=r=>{r instanceof Error?d(this,lo).reject(r):d(this,lo).resolve({password:r})};t.onPassword(i,s.code)}catch(i){d(this,lo).reject(i)}return d(this,lo).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;d(this,lr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const u=r.error;xe(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,p)=>globalThis.FontInspector.fontAdded(u,p):null,l=new bse(r,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=r;Ft(c,"The imageRef must be defined.");for(const u of d(this,lr).values())for(const[,p]of u.objs)if((p==null?void 0:p.ref)===c)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var l;if(this.destroyed)return;const a=d(this,lr).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=d(this,Fh).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&d(this,Oh).set(r.refStr,e);const o=new vie(t,r,this,this._params.pdfBug);return d(this,lr).set(t,o),o});return d(this,Fh).set(t,i),i}getPageIndex(e){return Eb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,Vc,Np).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Vc,Np).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,Vc,Np).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,Vc,Np).call(this,"GetOptionalContentConfig").then(t=>new Xse(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,ao).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new Yse(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,ao).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,lr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,ao).clear(),this.filterFactory.destroy(!0),bm.cleanup()}}cachedPageNumber(e){if(!Eb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Oh).get(t)??null}}ao=new WeakMap,lr=new WeakMap,Fh=new WeakMap,Oh=new WeakMap,lo=new WeakMap,Vc=new WeakSet,Np=function(e,t=null){const s=d(this,ao).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return d(this,ao).set(e,i),i};var za;class xie{constructor(e){A(this,za,null);H(this,"onContinue",null);H(this,"onError",null);E(this,za,e)}get promise(){return d(this,za).capability.promise}cancel(e=0){d(this,za).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,za).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,za);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}za=new WeakMap;var Ha,jc;const Jl=class Jl{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:p=!1,pageColors:m=null}){A(this,Ha,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xie(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(Jl,jc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Jl,jc).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new Kd(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),d(this,Ha)&&(window.cancelAnimationFrame(d(this,Ha)),E(this,Ha,null)),d(Jl,jc).delete(this._canvas),e||(e=new xA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Ha,window.requestAnimationFrame(()=>{E(this,Ha,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Jl,jc).delete(this._canvas),this.callback())))}};Ha=new WeakMap,jc=new WeakMap,A(Jl,jc,new WeakSet);let Ub=Jl;const _ie="5.3.93",Cie="cbeef3233";function aI(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ap(n){return Math.max(0,Math.min(255,255*n))}class lI{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ap(e),[e,e,e]}static G_HTML([e]){const t=aI(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ap)}static RGB_HTML(e){return`#${e.map(aI).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[ap(1-Math.min(1,e+i)),ap(1-Math.min(1,s+i)),ap(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class Sie{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ze("Abstract method `_createSVG` called.")}}class yw extends Sie{_createSVG(e){return document.createElementNS(Fr,e)}}class c${static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var p,m;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),a&&Em.shouldBuildText(i.name)&&c.push(g)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[g,w,v]=u.at(-1);if(w+1===g.children.length){u.pop();continue}const _=g.children[++u.at(-1)[1]];if(_===null)continue;const{name:x}=_;if(x==="#text"){const C=document.createTextNode(_.value);c.push(C),v.append(C);continue}const S=(p=_==null?void 0:_.attributes)!=null&&p.xmlns?document.createElementNS(_.attributes.xmlns,x):document.createElement(x);if(v.append(S),_.attributes&&this.setAttributes({html:S,element:_,storage:t,intent:r,linkService:s}),((m=_.children)==null?void 0:m.length)>0)u.push([_,-1,S]);else if(_.value){const C=document.createTextNode(_.value);a&&Em.shouldBuildText(x)&&c.push(C),S.append(C)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const bie=9,Vu=new WeakSet;class cI{static create(e){switch(e.data.annotationType){case Nt.LINK:return new u$(e);case Nt.TEXT:return new Eie(e);case Nt.WIDGET:switch(e.data.fieldType){case"Tx":return new Tie(e);case"Btn":return e.data.radioButton?new f$(e):e.data.checkBox?new kie(e):new Rie(e);case"Ch":return new Pie(e);case"Sig":return new Aie(e)}return new Yu(e);case Nt.POPUP:return new Bb(e);case Nt.FREETEXT:return new v$(e);case Nt.LINE:return new Nie(e);case Nt.SQUARE:return new Mie(e);case Nt.CIRCLE:return new Die(e);case Nt.POLYLINE:return new w$(e);case Nt.CARET:return new Fie(e);case Nt.INK:return new AA(e);case Nt.POLYGON:return new Lie(e);case Nt.HIGHLIGHT:return new x$(e);case Nt.UNDERLINE:return new Oie(e);case Nt.SQUIGGLY:return new Uie(e);case Nt.STRIKEOUT:return new $ie(e);case Nt.STAMP:return new _$(e);case Nt.FILEATTACHMENT:return new Bie(e);default:return new Pt(e)}}}var zc,Uh,$h,bg,$b;const LA=class LA{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){A(this,bg);A(this,zc,null);A(this,Uh,!1);A(this,$h,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return LA._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;d(this,zc)||E(this,zc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,bg,$b).call(this,t),(s=d(this,$h))==null||s.popup.updateEdited(e)}resetEdited(){var e;d(this,zc)&&(R(this,bg,$b).call(this,d(this,zc).rect),(e=d(this,$h))==null||e.popup.resetEdited(),E(this,zc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Yu||(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Bb){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(v>0||_>0){const S=`calc(${v}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=S}else if(this instanceof f$){const S=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=S}switch(t.borderStyle.style){case fd.SOLID:o.borderStyle="solid";break;case fd.DASHED:o.borderStyle="dashed";break;case fd.BEVELED:xe("Unimplemented border style: beveled");break;case fd.INSET:xe("Unimplemented border style: inset");break;case fd.UNDERLINE:o.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(E(this,Uh,!0),o.borderColor=de.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const c=de.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:p,pageX:m,pageY:g}=i.rawDims;o.left=`${100*(c[0]-m)/u}%`,o.top=`${100*(c[1]-g)/p}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(o.width=`${100*a/u}%`,o.height=`${100*l/p}%`):this.setRotation(w,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],a=r.slice(1);i.target.style[s]=lI[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:lI[`${o}_rgb`](a)})};return De(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const a={detail:{[i]:r},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,_,x,S]=e.subarray(2,6);if(i===v&&r===_&&t===x&&s===S)return}const{style:o}=this.container;let a;if(d(this,Uh)){const{borderColor:v,borderWidth:_}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const l=i-t,c=r-s,{svgFactory:u}=this,p=u.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const m=u.createElement("defs");p.append(m);const g=u.createElement("clipPath"),w=`clippath_${this.data.id}`;g.setAttribute("id",w),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let v=2,_=e.length;v<_;v+=8){const x=e[v],S=e[v+1],C=e[v+2],T=e[v+3],k=u.createElement("rect"),P=(C-t)/l,I=(r-S)/c,N=(x-C)/l,D=(S-T)/c;k.setAttribute("x",P),k.setAttribute("y",I),k.setAttribute("width",N),k.setAttribute("height",D),g.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${I}" width="${N}" height="${D}"/>`)}d(this,Uh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=E(this,$h,new Bb({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Vu.has(c)){xe(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&Vu.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};zc=new WeakMap,Uh=new WeakMap,$h=new WeakMap,bg=new WeakSet,$b=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let Pt=LA;var ks,Gl,d$,h$;class u$ extends Pt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,ks);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(R(this,ks,d$).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(R(this,ks,h$).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&R(this,ks,Gl).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),R(this,ks,Gl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,ks,Gl).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),R(this,ks,Gl).call(this),!this._fieldObjects){xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var p;i==null||i();const{fields:r,refs:o,include:a}=s,l=[];if(r.length!==0||o.length!==0){const m=new Set(o);for(const g of r){const w=this._fieldObjects[g]||[];for(const{id:v}of w)m.add(v)}for(const g of Object.values(this._fieldObjects))for(const w of g)m.has(w.id)===a&&l.push(w)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,u=[];for(const m of l){const{id:g}=m;switch(u.push(g),m.type){case"text":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;c.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}default:continue}const w=document.querySelector(`[data-element-id="${g}"]`);if(w){if(!Vu.has(w)){xe(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}ks=new WeakSet,Gl=function(){this.container.setAttribute("data-internal-link","")},d$=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},R(this,ks,Gl).call(this)},h$=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),R(this,ks,Gl).call(this)};class Eie extends Pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Yu extends Pt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,a;for(const[l,c]of s)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":de.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||bie,r=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(X_*i))||1,p=c/u;o=Math.min(i,l(p/X_))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/X_))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=de.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Tie extends Yu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Vu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const p=this.data.dateFormat||this.data.timeFormat;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(s,"value",g.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",g=>{const w=this.data.defaultFieldValue??"";s.value=u.userValue=w,u.formattedValue=null});let m=g=>{const{formattedValue:w}=u;w!=null&&(g.target.value=w),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{var _;if(u.focused)return;const{target:v}=w;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const v={value(_){u.userValue=_.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),_.target.value=u.userValue},formattedValue(_){const{formattedValue:x}=_.detail;u.formattedValue=x,x!=null&&_.target!==document.activeElement&&(_.target.value=x),e.setValue(t,{formattedValue:x})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var T;const{charLimit:x}=_.detail,{target:S}=_;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let C=u.userValue;!C||C.length<=x||(C=C.slice(0,x),S.value=u.userValue=C,e.setValue(t,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(v,w)}),s.addEventListener("keydown",w=>{var x;u.commitKey=1;let v=-1;if(w.key==="Escape"?v=0:w.key==="Enter"&&!this.data.multiLine?v=2:w.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:_}=w.target;u.lastCommittedValue!==_&&(u.lastCommittedValue=_,u.userValue=_,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const g=m;m=null,s.addEventListener("blur",w=>{var _,x;if(!u.focused||!w.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(u.focused=!1);const{value:v}=w.target;u.userValue=v,u.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),g(w)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",w=>{var P;u.lastCommittedValue=null;const{data:v,target:_}=w,{value:x,selectionStart:S,selectionEnd:C}=_;let T=S,k=C;switch(w.inputType){case"deleteWordBackward":{const I=x.substring(0,S).match(/\w*[^\w]*$/);I&&(T-=I[0].length);break}case"deleteWordForward":{const I=x.substring(S).match(/^[^\w]*\w*/);I&&(k+=I[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(k+=1);break}w.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:T,selEnd:k}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(m&&s.addEventListener("blur",m),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Aie extends Yu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class kie extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Vu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class f$ extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Vu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const p of this._getElementsByName(c.target.name)){const m=u&&p.id===s;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Rie extends u${constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class Pie extends Yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Vu.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const p=this.data.defaultFieldValue;for(const m of i.options)m.selected=m.value===p});for(const u of this.data.options){const p=document.createElement("option");p.textContent=u.displayValue,p.value=u.exportValue,s.value.includes(u.exportValue)&&(p.setAttribute("selected",!0),r=!1),i.append(p)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const p=u?"value":"textContent",{options:m,multiple:g}=i;return g?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let l=a(!1);const c=u=>{const p=u.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const p={value(m){o==null||o();const g=m.detail.value,w=new Set(Array.isArray(g)?g:[g]);for(const v of i.options)v.selected=w.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(m){i.multiple=!0},remove(m){const g=i.options,w=m.detail.remove;g[w].selected=!1,i.remove(w),g.length>0&&Array.prototype.findIndex.call(g,_=>_.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},clear(m){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(m){const{index:g,displayValue:w,exportValue:v}=m.detail.insert,_=i.children[g],x=document.createElement("option");x.textContent=w,x.value=v,_?_.before(x):i.append(x),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},items(m){const{items:g}=m.detail;for(;i.length!==0;)i.remove(0);for(const w of g){const{displayValue:v,exportValue:_}=w,x=document.createElement("option");x.textContent=v,x.value=_,i.append(x)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},indices(m){const g=new Set(m.detail.indices);for(const w of m.target.options)w.selected=g.has(w.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,u)}),i.addEventListener("input",u=>{var g;const p=a(!0),m=a(!1);e.setValue(t,{value:p}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Bb extends Pt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Pt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Iie({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${wA}${i}`).join(",")),this.container}}var Bh,Lw,Fw,Vh,jh,Et,co,Hc,Eg,Tg,zh,uo,Ci,ho,Ag,fo,kg,Gc,qc,et,n0,Vb,p$,m$,g$,y$,s0,i0,jb;class Iie{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:p}){A(this,et);A(this,Bh,R(this,et,g$).bind(this));A(this,Lw,R(this,et,jb).bind(this));A(this,Fw,R(this,et,i0).bind(this));A(this,Vh,R(this,et,s0).bind(this));A(this,jh,null);A(this,Et,null);A(this,co,null);A(this,Hc,null);A(this,Eg,null);A(this,Tg,null);A(this,zh,null);A(this,uo,!1);A(this,Ci,null);A(this,ho,null);A(this,Ag,null);A(this,fo,null);A(this,kg,null);A(this,Gc,null);A(this,qc,!1);var m;E(this,Et,e),E(this,kg,i),E(this,co,o),E(this,fo,a),E(this,Tg,l),E(this,jh,t),E(this,Ag,c),E(this,zh,u),E(this,Eg,s),E(this,Hc,CA.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",d(this,Vh)),g.addEventListener("mouseenter",d(this,Fw)),g.addEventListener("mouseleave",d(this,Lw)),g.classList.add("popupTriggerArea");for(const g of s)(m=g.container)==null||m.addEventListener("keydown",d(this,Bh));d(this,Et).hidden=!0,p&&R(this,et,s0).call(this)}render(){if(d(this,Ci))return;const e=E(this,Ci,document.createElement("div"));if(e.className="popup",d(this,jh)){const r=e.style.outlineColor=de.makeHexColor(...d(this,jh));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=d(this,kg),e.append(t),d(this,Hc)){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Hc).valueOf()})),r.dateTime=d(this,Hc).toISOString(),t.append(r)}const i=d(this,et,n0);if(i)c$.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(d(this,co));e.append(r)}d(this,Et).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;d(this,Gc)||E(this,Gc,{contentsObj:d(this,co),richText:d(this,fo)}),e&&E(this,ho,null),t&&(E(this,fo,R(this,et,m$).call(this,t)),E(this,co,null)),(s=d(this,Ci))==null||s.remove(),E(this,Ci,null)}resetEdited(){var e;d(this,Gc)&&({contentsObj:qt(this,co)._,richText:qt(this,fo)._}=d(this,Gc),E(this,Gc,null),(e=d(this,Ci))==null||e.remove(),E(this,Ci,null),E(this,ho,null))}forceHide(){E(this,qc,this.isVisible),d(this,qc)&&(d(this,Et).hidden=!0)}maybeShow(){d(this,qc)&&(d(this,Ci)||R(this,et,i0).call(this),E(this,qc,!1),d(this,Et).hidden=!1)}get isVisible(){return d(this,Et).hidden===!1}}Bh=new WeakMap,Lw=new WeakMap,Fw=new WeakMap,Vh=new WeakMap,jh=new WeakMap,Et=new WeakMap,co=new WeakMap,Hc=new WeakMap,Eg=new WeakMap,Tg=new WeakMap,zh=new WeakMap,uo=new WeakMap,Ci=new WeakMap,ho=new WeakMap,Ag=new WeakMap,fo=new WeakMap,kg=new WeakMap,Gc=new WeakMap,qc=new WeakMap,et=new WeakSet,n0=function(){const e=d(this,fo),t=d(this,co);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,fo).html||null},Vb=function(){var e,t,s;return((s=(t=(e=d(this,et,n0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},p$=function(){var e,t,s;return((s=(t=(e=d(this,et,n0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},m$=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:d(this,et,p$),fontSize:d(this,et,Vb)?`calc(${d(this,et,Vb)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},g$=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,uo))&&R(this,et,s0).call(this)},y$=function(){if(d(this,ho)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=d(this,Tg);let o=!!d(this,zh),a=o?d(this,zh):d(this,Ag);for(const w of d(this,Eg))if(!a||de.intersect(w.data.rect,a)!==null){a=w.data.rect,o=!0;break}const l=de.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,p=l[0]+u,m=l[1];E(this,ho,[100*(p-i)/t,100*(m-r)/s]);const{style:g}=d(this,Et);g.left=`${d(this,ho)[0]}%`,g.top=`${d(this,ho)[1]}%`},s0=function(){E(this,uo,!d(this,uo)),d(this,uo)?(R(this,et,i0).call(this),d(this,Et).addEventListener("click",d(this,Vh)),d(this,Et).addEventListener("keydown",d(this,Bh))):(R(this,et,jb).call(this),d(this,Et).removeEventListener("click",d(this,Vh)),d(this,Et).removeEventListener("keydown",d(this,Bh)))},i0=function(){d(this,Ci)||this.render(),this.isVisible?d(this,uo)&&d(this,Et).classList.add("focused"):(R(this,et,y$).call(this),d(this,Et).hidden=!1,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)+1e3)},jb=function(){d(this,Et).classList.remove("focused"),!(d(this,uo)||!this.isVisible)&&(d(this,Et).hidden=!0,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)-1e3)};class v$ extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=we.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rg;class Nie extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Rg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=E(this,Rg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rg=new WeakMap;var Pg;class Mie extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Pg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=E(this,Pg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap;var Ig;class Die extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Ig,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=E(this,Ig,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ig=new WeakMap;var Ng;class w$ extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Ng,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let p=0,m=s.length;p<m;p+=2){const g=s[p]-t[0],w=t[3]-s[p+1];c.push(`${g},${w}`)}c=c.join(" ");const u=E(this,Ng,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap;class Lie extends w${constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Fie extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Mg,Wc,Dg,zb;class AA extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Dg);A(this,Mg,null);A(this,Wc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?we.HIGHLIGHT:we.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:c}=R(this,Dg,zb).call(this,s,t),u=this.svgFactory.create(l,c,!0),p=E(this,Mg,this.svgFactory.createElement("svg:g"));u.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let m=0,g=i.length;m<g;m++){const w=this.svgFactory.createElement(this.svgElementName);d(this,Wc).push(w),w.setAttribute("points",i[m].join(",")),p.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,o=d(this,Mg);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let a=0,l=d(this,Wc).length;a<l;a++)d(this,Wc)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:c}=R(this,Dg,zb).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Wc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mg=new WeakMap,Wc=new WeakMap,Dg=new WeakSet,zb=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class x$ extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=we.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Oie extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Uie extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class $ie extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class _$ extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=we.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lg,Fg,Hb;class Bie extends Pt{constructor(t){var i;super(t,{isRenderable:!0});A(this,Fg);A(this,Lg,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",R(this,Fg,Hb).bind(this)),E(this,Lg,i);const{isMac:r}=pn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&R(this,Fg,Hb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return d(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap,Fg=new WeakSet,Hb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Og,Kc,Ga,Ug,Rl,qb,Wb;const FA=class FA{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){A(this,Rl);A(this,Og,null);A(this,Kc,null);A(this,Ga,new Map);A(this,Ug,null);this.div=e,E(this,Og,t),E(this,Kc,s),E(this,Ug,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return d(this,Ga).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;$u(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new yw,annotationStorage:e.annotationStorage||new bA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Nt.POPUP;if(l){const p=i.get(a.id);if(!p)continue;r.elements=p}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const c=cI.create(r);if(!c.isRenderable)continue;if(!l&&a.popupRef){const p=i.get(a.popupRef);p?p.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await R(this,Rl,qb).call(this,u,a.id,r.elements),c._isEditable&&(d(this,Ga).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}R(this,Rl,Wb).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new yw,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=FA._defaultBorderStyle),s.data=i;const r=cI.create(s);if(!r.isRenderable)continue;const o=r.render();await R(this,Rl,qb).call(this,o,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,$u(t,{rotation:e.rotation}),R(this,Rl,Wb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Ga).values())}getEditableAnnotation(e){return d(this,Ga).get(e)}static get _defaultBorderStyle(){return De(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Og=new WeakMap,Kc=new WeakMap,Ga=new WeakMap,Ug=new WeakMap,Rl=new WeakSet,qb=async function(e,t,s){var a,l;const i=e.firstChild||e,r=i.id=`${wA}${t}`,o=await((a=d(this,Ug))==null?void 0:a.getAriaAttributes(r));if(o)for(const[c,u]of o)i.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),(l=d(this,Og))==null||l.moveElementInDOM(this.div,e,i,!1))},Wb=function(){var t;if(!d(this,Kc))return;const e=this.div;for(const[s,i]of d(this,Kc)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const a=d(this,Ga).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}d(this,Kc).clear()};let Gb=FA;const yv=/\r\n?|\n/g;var Si,ps,$g,Yc,ms,Ot,C$,S$,b$,r0,No,o0,a0,E$,Yb,T$;const st=class st extends rt{constructor(t){super({...t,name:"freeTextEditor"});A(this,Ot);A(this,Si);A(this,ps,"");A(this,$g,`${this.id}-editor`);A(this,Yc,null);A(this,ms);E(this,Si,t.color||st._defaultColor||rt._defaultLineColor),E(this,ms,t.fontSize||st._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=st.prototype,s=o=>o.isEmpty(),i=Bu.TRANSLATE_SMALL,r=Bu.TRANSLATE_BIG;return De(this,"_keyboardManager",new ky([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){rt.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Oe.FREETEXT_SIZE:st._defaultFontSize=s;break;case Oe.FREETEXT_COLOR:st._defaultColor=s;break}}updateParams(t,s){switch(t){case Oe.FREETEXT_SIZE:R(this,Ot,C$).call(this,s);break;case Oe.FREETEXT_COLOR:R(this,Ot,S$).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,st._defaultFontSize],[Oe.FREETEXT_COLOR,st._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,d(this,ms)],[Oe.FREETEXT_COLOR,d(this,Si)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-st._internalPadding*t,-(st._internalPadding+d(this,ms))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,Yc,new AbortController);const t=this._uiManager.combinedSignal(d(this,Yc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,$g)),this._isDraggable=!0,(t=d(this,Yc))==null||t.abort(),E(this,Yc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,ps),s=E(this,ps,R(this,Ot,b$).call(this).trimEnd());if(t===s)return;const i=r=>{if(E(this,ps,r),!r){this.remove();return}R(this,Ot,a0).call(this),this._uiManager.rebuild(this),R(this,Ot,r0).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),R(this,Ot,r0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){st._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,$g)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${d(this,ms)}px * var(--total-scale-factor))`,i.color=d(this,Si),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,p]=this.pageDimensions,[m,g]=this.pageTranslation;let w,v;switch(this.rotation){case 0:w=t+(a[0]-m)/u,v=s+this.height-(a[1]-g)/p;break;case 90:w=t+(a[0]-m)/u,v=s-(a[1]-g)/p,[l,c]=[c,-l];break;case 180:w=t-this.width+(a[0]-m)/u,v=s-(a[1]-g)/p,[l,c]=[-l,-c];break;case 270:w=t+(a[0]-m-this.height*p)/u,v=s+(a[1]-g-this.width*u)/p,[l,c]=[-c,l];break}this.setAt(w*r,v*o,l,c)}else this._moveAfterPaste(t,s);R(this,Ot,a0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,v,_;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=R(w=st,No,Yb).call(w,s.getData("text")||"").replaceAll(yv,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],p=[];if(l.nodeType===Node.TEXT_NODE){const x=l.parentElement;if(p.push(l.nodeValue.slice(c).replaceAll(yv,"")),x!==this.editorDiv){let S=u;for(const C of this.editorDiv.childNodes){if(C===x){S=p;continue}S.push(R(v=st,No,o0).call(v,C))}}u.push(l.nodeValue.slice(0,c).replaceAll(yv,""))}else if(l===this.editorDiv){let x=u,S=0;for(const C of this.editorDiv.childNodes)S++===c&&(x=p),x.push(R(_=st,No,o0).call(_,C))}E(this,ps,`${u.join(`
`)}${r}${p.join(`
`)}`),R(this,Ot,a0).call(this);const m=new Range;let g=Math.sumPrecise(u.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const S=x.nodeValue.length;if(g<=S){m.setStart(x,g),m.setEnd(x,g);break}g-=S}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var a;let r=null;if(t instanceof v$){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:p,id:m,popupRef:g},textContent:w,textPosition:v,parent:{page:{pageNumber:_}}}=t;if(!w||w.length===0)return null;r=t={annotationType:we.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:v,pageIndex:_-1,rect:u.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:g}}const o=await super.deserialize(t,s,i);return E(o,ms,t.fontSize),E(o,Si,de.makeHexColor(...t.color)),E(o,ps,R(a=st,No,Yb).call(a,t.value)),o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=st._internalPadding*this.parentScale,i=this.getRect(s,s),r=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,Si)),o={annotationType:we.FREETEXT,color:r,fontSize:d(this,ms),value:R(this,Ot,E$).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!R(this,Ot,T$).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${d(this,ms)}px * var(--total-scale-factor))`,i.color=d(this,Si),s.replaceChildren();for(const o of d(this,ps).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=st._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:d(this,ps)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Si=new WeakMap,ps=new WeakMap,$g=new WeakMap,Yc=new WeakMap,ms=new WeakMap,Ot=new WeakSet,C$=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-d(this,ms))*this.parentScale),E(this,ms,r),R(this,Ot,r0).call(this)},i=d(this,ms);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},S$=function(t){const s=r=>{E(this,Si,this.editorDiv.style.color=r)},i=d(this,Si);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b$=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(R(i=st,No,o0).call(i,r)),s=r);return t.join(`
`)},r0=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},No=new WeakSet,o0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(yv,"")},a0=function(){if(this.editorDiv.replaceChildren(),!!d(this,ps))for(const t of d(this,ps).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},E$=function(){return d(this,ps).replaceAll(" "," ")},Yb=function(t){return t.replaceAll(" "," ")},T$=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((a,l)=>a!==r[l])||t.pageIndex!==o},A(st,No),H(st,"_freeTextDefaultContent",""),H(st,"_internalPadding",0),H(st,"_defaultColor",null),H(st,"_defaultFontSize",10),H(st,"_type","freetext"),H(st,"_editorType",we.FREETEXT);let Kb=st;class te{toSVGPath(){Ze("Abstract method `toSVGPath` must be implemented.")}get box(){Ze("Abstract getter `box` must be implemented.")}serialize(e,t){Ze("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=s+e[a+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=s+e[a]*r;return o}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}H(te,"PRECISION",1e-4);var gs,bi,Hh,Gh,cr,Ae,Jc,Xc,Bg,Vg,qh,Wh,qa,jg,Ow,Uw,Gt,Mp,A$,k$,R$,P$,I$,N$;const jr=class jr{constructor({x:e,y:t},s,i,r,o,a=0){A(this,Gt);A(this,gs);A(this,bi,[]);A(this,Hh);A(this,Gh);A(this,cr,[]);A(this,Ae,new Float32Array(18));A(this,Jc);A(this,Xc);A(this,Bg);A(this,Vg);A(this,qh);A(this,Wh);A(this,qa,[]);E(this,gs,s),E(this,Wh,r*i),E(this,Gh,o),d(this,Ae).set([NaN,NaN,NaN,NaN,e,t],6),E(this,Hh,a),E(this,Vg,d(jr,jg)*i),E(this,Bg,d(jr,Uw)*i),E(this,qh,i),d(this,qa).push(e,t)}isEmpty(){return isNaN(d(this,Ae)[8])}add({x:e,y:t}){var D;E(this,Jc,e),E(this,Xc,t);const[s,i,r,o]=d(this,gs);let[a,l,c,u]=d(this,Ae).subarray(8,12);const p=e-c,m=t-u,g=Math.hypot(p,m);if(g<d(this,Bg))return!1;const w=g-d(this,Vg),v=w/g,_=v*p,x=v*m;let S=a,C=l;a=c,l=u,c+=_,u+=x,(D=d(this,qa))==null||D.push(e,t);const T=-x/w,k=_/w,P=T*d(this,Wh),I=k*d(this,Wh);return d(this,Ae).set(d(this,Ae).subarray(2,8),0),d(this,Ae).set([c+P,u+I],4),d(this,Ae).set(d(this,Ae).subarray(14,18),12),d(this,Ae).set([c-P,u-I],16),isNaN(d(this,Ae)[6])?(d(this,cr).length===0&&(d(this,Ae).set([a+P,l+I],2),d(this,cr).push(NaN,NaN,NaN,NaN,(a+P-s)/r,(l+I-i)/o),d(this,Ae).set([a-P,l-I],14),d(this,bi).push(NaN,NaN,NaN,NaN,(a-P-s)/r,(l-I-i)/o)),d(this,Ae).set([S,C,a,l,c,u],6),!this.isEmpty()):(d(this,Ae).set([S,C,a,l,c,u],6),Math.abs(Math.atan2(C-l,S-a)-Math.atan2(x,_))<Math.PI/2?([a,l,c,u]=d(this,Ae).subarray(2,6),d(this,cr).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/r,((l+u)/2-i)/o),[a,l,S,C]=d(this,Ae).subarray(14,18),d(this,bi).push(NaN,NaN,NaN,NaN,((S+a)/2-s)/r,((C+l)/2-i)/o),!0):([S,C,a,l,c,u]=d(this,Ae).subarray(0,6),d(this,cr).push(((S+5*a)/6-s)/r,((C+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),[c,u,a,l,S,C]=d(this,Ae).subarray(12,18),d(this,bi).push(((S+5*a)/6-s)/r,((C+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,cr),t=d(this,bi);if(isNaN(d(this,Ae)[6])&&!this.isEmpty())return R(this,Gt,A$).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);R(this,Gt,R$).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return R(this,Gt,k$).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new M$(e,t,s,i,r,o)}getOutlines(){var p;const e=d(this,cr),t=d(this,bi),s=d(this,Ae),[i,r,o,a]=d(this,gs),l=new Float32Array((((p=d(this,qa))==null?void 0:p.length)??0)+2);for(let m=0,g=l.length-2;m<g;m+=2)l[m]=(d(this,qa)[m]-i)/o,l[m+1]=(d(this,qa)[m+1]-r)/a;if(l[l.length-2]=(d(this,Jc)-i)/o,l[l.length-1]=(d(this,Xc)-r)/a,isNaN(s[6])&&!this.isEmpty())return R(this,Gt,P$).call(this,l);const c=new Float32Array(d(this,cr).length+24+d(this,bi).length);let u=e.length;for(let m=0;m<u;m+=2){if(isNaN(e[m])){c[m]=c[m+1]=NaN;continue}c[m]=e[m],c[m+1]=e[m+1]}u=R(this,Gt,N$).call(this,c,u);for(let m=t.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(t[m+g])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[m+g],c[u+1]=t[m+g+1],u+=2}return R(this,Gt,I$).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,gs),d(this,qh),d(this,Hh),d(this,Gh))}};gs=new WeakMap,bi=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,cr=new WeakMap,Ae=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,Bg=new WeakMap,Vg=new WeakMap,qh=new WeakMap,Wh=new WeakMap,qa=new WeakMap,jg=new WeakMap,Ow=new WeakMap,Uw=new WeakMap,Gt=new WeakSet,Mp=function(){const e=d(this,Ae).subarray(4,6),t=d(this,Ae).subarray(16,18),[s,i,r,o]=d(this,gs);return[(d(this,Jc)+(e[0]-t[0])/2-s)/r,(d(this,Xc)+(e[1]-t[1])/2-i)/o,(d(this,Jc)+(t[0]-e[0])/2-s)/r,(d(this,Xc)+(t[1]-e[1])/2-i)/o]},A$=function(){const[e,t,s,i]=d(this,gs),[r,o,a,l]=R(this,Gt,Mp).call(this);return`M${(d(this,Ae)[2]-e)/s} ${(d(this,Ae)[3]-t)/i} L${(d(this,Ae)[4]-e)/s} ${(d(this,Ae)[5]-t)/i} L${r} ${o} L${a} ${l} L${(d(this,Ae)[16]-e)/s} ${(d(this,Ae)[17]-t)/i} L${(d(this,Ae)[14]-e)/s} ${(d(this,Ae)[15]-t)/i} Z`},k$=function(e){const t=d(this,bi);e.push(`L${t[4]} ${t[5]} Z`)},R$=function(e){const[t,s,i,r]=d(this,gs),o=d(this,Ae).subarray(4,6),a=d(this,Ae).subarray(16,18),[l,c,u,p]=R(this,Gt,Mp).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${l} ${c} L${u} ${p} L${(a[0]-t)/i} ${(a[1]-s)/r}`)},P$=function(e){const t=d(this,Ae),[s,i,r,o]=d(this,gs),[a,l,c,u]=R(this,Gt,Mp).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(p,e,d(this,gs),d(this,qh),d(this,Hh),d(this,Gh))},I$=function(e,t){const s=d(this,bi);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},N$=function(e,t){const s=d(this,Ae).subarray(4,6),i=d(this,Ae).subarray(16,18),[r,o,a,l]=d(this,gs),[c,u,p,m]=R(this,Gt,Mp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],t),t+=24},A(jr,jg,8),A(jr,Ow,2),A(jr,Uw,d(jr,jg)+d(jr,Ow));let vw=jr;var Kh,Qc,po,zg,ys,Hg,kt,$w,D$;class M$ extends te{constructor(t,s,i,r,o,a){super();A(this,$w);A(this,Kh);A(this,Qc,new Float32Array(4));A(this,po);A(this,zg);A(this,ys);A(this,Hg);A(this,kt);E(this,kt,t),E(this,ys,s),E(this,Kh,i),E(this,Hg,r),E(this,po,o),E(this,zg,a),this.lastPoint=[NaN,NaN],R(this,$w,D$).call(this,a);const[l,c,u,p]=d(this,Qc);for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-l)/u,t[m+1]=(t[m+1]-c)/p;for(let m=0,g=s.length;m<g;m+=2)s[m]=(s[m]-l)/u,s[m+1]=(s[m+1]-c)/p}toSVGPath(){const t=[`M${d(this,kt)[4]} ${d(this,kt)[5]}`];for(let s=6,i=d(this,kt).length;s<i;s+=6){if(isNaN(d(this,kt)[s])){t.push(`L${d(this,kt)[s+4]} ${d(this,kt)[s+5]}`);continue}t.push(`C${d(this,kt)[s]} ${d(this,kt)[s+1]} ${d(this,kt)[s+2]} ${d(this,kt)[s+3]} ${d(this,kt)[s+4]} ${d(this,kt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const a=i-t,l=r-s;let c,u;switch(o){case 0:c=te._rescale(d(this,kt),t,r,a,-l),u=te._rescale(d(this,ys),t,r,a,-l);break;case 90:c=te._rescaleAndSwap(d(this,kt),t,s,a,l),u=te._rescaleAndSwap(d(this,ys),t,s,a,l);break;case 180:c=te._rescale(d(this,kt),i,s,-a,l),u=te._rescale(d(this,ys),i,s,-a,l);break;case 270:c=te._rescaleAndSwap(d(this,kt),i,r,-a,-l),u=te._rescaleAndSwap(d(this,ys),i,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,Qc)}newOutliner(t,s,i,r,o,a=0){return new vw(t,s,i,r,o,a)}getNewOutline(t,s){const[i,r,o,a]=d(this,Qc),[l,c,u,p]=d(this,Kh),m=o*u,g=a*p,w=i*u+l,v=r*p+c,_=this.newOutliner({x:d(this,ys)[0]*m+w,y:d(this,ys)[1]*g+v},d(this,Kh),d(this,Hg),t,d(this,zg),s??d(this,po));for(let x=2;x<d(this,ys).length;x+=2)_.add({x:d(this,ys)[x]*m+w,y:d(this,ys)[x+1]*g+v});return _.getOutlines()}}Kh=new WeakMap,Qc=new WeakMap,po=new WeakMap,zg=new WeakMap,ys=new WeakMap,Hg=new WeakMap,kt=new WeakMap,$w=new WeakSet,D$=function(t){const s=d(this,kt);let i=s[4],r=s[5];const o=[i,r,i,r];let a=i,l=r;const c=t?Math.max:Math.min;for(let p=6,m=s.length;p<m;p+=6){const g=s[p+4],w=s[p+5];if(isNaN(s[p]))de.pointBoundingBox(g,w,o),l<w?(a=g,l=w):l===w&&(a=c(a,g));else{const v=[1/0,1/0,-1/0,-1/0];de.bezierBoundingBox(i,r,...s.slice(p,p+6),v),de.rectBoundingBox(...v,o),l<v[3]?(a=v[2],l=v[3]):l===v[3]&&(a=c(a,v[2]))}i=g,r=w}const u=d(this,Qc);u[0]=o[0]-d(this,po),u[1]=o[1]-d(this,po),u[2]=o[2]-o[0]+2*d(this,po),u[3]=o[3]-o[1]+2*d(this,po),this.lastPoint=[a,l]};var Gg,qg,Wa,Ei,zn,L$,l0,F$,O$,Xb;class Jb{constructor(e,t=0,s=0,i=!0){A(this,zn);A(this,Gg);A(this,qg);A(this,Wa,[]);A(this,Ei,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:w,width:v,height:_}of e){const x=Math.floor((g-t)/o)*o,S=Math.ceil((g+v+t)/o)*o,C=Math.floor((w-t)/o)*o,T=Math.ceil((w+_+t)/o)*o,k=[x,C,T,!0],P=[S,C,T,!1];d(this,Wa).push(k,P),de.rectBoundingBox(x,C,S,T,r)}const a=r[2]-r[0]+2*s,l=r[3]-r[1]+2*s,c=r[0]-s,u=r[1]-s,p=d(this,Wa).at(i?-1:-2),m=[p[0],p[2]];for(const g of d(this,Wa)){const[w,v,_]=g;g[0]=(w-c)/a,g[1]=(v-u)/l,g[2]=(_-u)/l}E(this,Gg,new Float32Array([c,u,a,l])),E(this,qg,m)}getOutlines(){d(this,Wa).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of d(this,Wa))t[3]?(e.push(...R(this,zn,Xb).call(this,t)),R(this,zn,F$).call(this,t)):(R(this,zn,O$).call(this,t),e.push(...R(this,zn,Xb).call(this,t)));return R(this,zn,L$).call(this,e)}}Gg=new WeakMap,qg=new WeakMap,Wa=new WeakMap,Ei=new WeakMap,zn=new WeakSet,L$=function(e){const t=[],s=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,u,p]=o;s.delete(o);let m=a,g=l;for(r=[a,c],i.push(r);;){let w;if(s.has(u))w=u;else if(s.has(p))w=p;else break;s.delete(w),[a,l,c,u,p]=w,m!==a&&(r.push(m,g,a,g===l?l:c),m=a),g=g===l?c:l}r.push(m,g)}return new Vie(i,d(this,Gg),d(this,qg))},l0=function(e){const t=d(this,Ei);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},F$=function([,e,t]){const s=R(this,zn,l0).call(this,e);d(this,Ei).splice(s,0,[e,t])},O$=function([,e,t]){const s=R(this,zn,l0).call(this,e);for(let i=s;i<d(this,Ei).length;i++){const[r,o]=d(this,Ei)[i];if(r!==e)break;if(r===e&&o===t){d(this,Ei).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=d(this,Ei)[i];if(r!==e)break;if(r===e&&o===t){d(this,Ei).splice(i,1);return}}},Xb=function(e){const[t,s,i]=e,r=[[t,s,i]],o=R(this,zn,l0).call(this,i);for(let a=0;a<o;a++){const[l,c]=d(this,Ei)[a];for(let u=0,p=r.length;u<p;u++){const[,m,g]=r[u];if(!(c<=m||g<=l)){if(m>=l){if(g>c)r[u][1]=c;else{if(p===1)return[];r.splice(u,1),u--,p--}continue}r[u][2]=l,g>c&&r.push([t,c,g])}}}return r};var Wg,Yh;class Vie extends te{constructor(t,s,i){super();A(this,Wg);A(this,Yh);E(this,Yh,t),E(this,Wg,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of d(this,Yh)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===i?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const a=[],l=i-t,c=r-s;for(const u of d(this,Yh)){const p=new Array(u.length);for(let m=0;m<u.length;m+=2)p[m]=t+u[m]*l,p[m+1]=r-u[m+1]*c;a.push(p)}return a}get box(){return d(this,Wg)}get classNamesForOutlining(){return["highlightOutline"]}}Wg=new WeakMap,Yh=new WeakMap;class Qb extends vw{newFreeDrawOutline(e,t,s,i,r,o){return new jie(e,t,s,i,r,o)}}class jie extends M${newOutliner(e,t,s,i,r,o=0){return new Qb(e,t,s,i,r,o)}}var vs,Zc,Jh,Vt,Kg,Xh,mo,Yg,Ka,Ti,Qh,Jg,Qe,Zb,eE,tE,ql,U$,sa;const Yn=class Yn{constructor({editor:e=null,uiManager:t=null}){A(this,Qe);A(this,vs,null);A(this,Zc,null);A(this,Jh);A(this,Vt,null);A(this,Kg,!1);A(this,Xh,!1);A(this,mo,null);A(this,Yg);A(this,Ka,null);A(this,Ti,null);A(this,Qh);var s,i;e?(E(this,Xh,!1),E(this,Qh,Oe.HIGHLIGHT_COLOR),E(this,mo,e)):(E(this,Xh,!0),E(this,Qh,Oe.HIGHLIGHT_DEFAULT_COLOR)),E(this,Ti,(e==null?void 0:e._uiManager)||t),E(this,Yg,d(this,Ti)._eventBus),E(this,Jh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=d(this,Ti))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),d(Yn,Jg)||E(Yn,Jg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return De(this,"_keyboardManager",new ky([[["Escape","mac+Escape"],Yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yn.prototype._moveToPrevious],[["Home","mac+Home"],Yn.prototype._moveToBeginning],[["End","mac+End"],Yn.prototype._moveToEnd]]))}renderButton(){const e=E(this,vs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,mo)&&(e.ariaControls=`${d(this,mo).id}_colorpicker_dropdown`);const t=d(this,Ti)._signal;e.addEventListener("click",R(this,Qe,ql).bind(this),{signal:t}),e.addEventListener("keydown",R(this,Qe,tE).bind(this),{signal:t});const s=E(this,Zc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=d(this,Jh),e.append(s),e}renderMainDropdown(){const e=E(this,Vt,R(this,Qe,Zb).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,vs)){R(this,Qe,ql).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,Qe,eE).call(this,t,e)}_moveToNext(e){var t,s;if(!d(this,Qe,sa)){R(this,Qe,ql).call(this,e);return}if(e.target===d(this,vs)){(t=d(this,Vt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=d(this,Vt))==null?void 0:t.firstChild)||e.target===d(this,vs)){d(this,Qe,sa)&&this._hideDropdownFromKeyboard();return}d(this,Qe,sa)||R(this,Qe,ql).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!d(this,Qe,sa)){R(this,Qe,ql).call(this,e);return}(t=d(this,Vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Qe,sa)){R(this,Qe,ql).call(this,e);return}(t=d(this,Vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Vt))==null||e.classList.add("hidden"),d(this,vs).ariaExpanded="false",(t=d(this,Ka))==null||t.abort(),E(this,Ka,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Xh)){if(!d(this,Qe,sa)){(e=d(this,mo))==null||e.unselect();return}this.hideDropdown(),d(this,vs).focus({preventScroll:!0,focusVisible:d(this,Kg)})}}updateColor(e){if(d(this,Zc)&&(d(this,Zc).style.backgroundColor=e),!d(this,Vt))return;const t=d(this,Ti).highlightColors.values();for(const s of d(this,Vt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,vs))==null||e.remove(),E(this,vs,null),E(this,Zc,null),(t=d(this,Vt))==null||t.remove(),E(this,Vt,null)}};vs=new WeakMap,Zc=new WeakMap,Jh=new WeakMap,Vt=new WeakMap,Kg=new WeakMap,Xh=new WeakMap,mo=new WeakMap,Yg=new WeakMap,Ka=new WeakMap,Ti=new WeakMap,Qh=new WeakMap,Jg=new WeakMap,Qe=new WeakSet,Zb=function(){const e=document.createElement("div"),t=d(this,Ti)._signal;e.addEventListener("contextmenu",Vi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,mo)&&(e.id=`${d(this,mo).id}_colorpicker_dropdown`);for(const[s,i]of d(this,Ti).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",d(Yn,Jg)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===d(this,Jh),r.addEventListener("click",R(this,Qe,eE).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",R(this,Qe,tE).bind(this),{signal:t}),e},eE=function(e,t){t.stopPropagation(),d(this,Yg).dispatch("switchannotationeditorparams",{source:this,type:d(this,Qh),value:e})},tE=function(e){Yn._keyboardManager.exec(this,e)},ql=function(e){if(d(this,Qe,sa)){this.hideDropdown();return}if(E(this,Kg,e.detail===0),d(this,Ka)||(E(this,Ka,new AbortController),window.addEventListener("pointerdown",R(this,Qe,U$).bind(this),{signal:d(this,Ti).combinedSignal(d(this,Ka))})),d(this,vs).ariaExpanded="true",d(this,Vt)){d(this,Vt).classList.remove("hidden");return}const t=E(this,Vt,R(this,Qe,Zb).call(this));d(this,vs).append(t)},U$=function(e){var t;(t=d(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},sa=function(){return d(this,Vt)&&!d(this,Vt).classList.contains("hidden")},A(Yn,Jg,null);let ww=Yn;var Zh,Xg,go,eu,Qg,es,Zg,ey,tu,Hs,ws,an,ef,yo,En,tf,Gs,ty,Se,nE,c0,$$,B$,V$,sE,Wl,Js,vd,j$,u0,Dp,z$,H$,G$,q$,W$;const He=class He extends rt{constructor(t){super({...t,name:"highlightEditor"});A(this,Se);A(this,Zh,null);A(this,Xg,0);A(this,go);A(this,eu,null);A(this,Qg,null);A(this,es,null);A(this,Zg,null);A(this,ey,0);A(this,tu,null);A(this,Hs,null);A(this,ws,null);A(this,an,!1);A(this,ef,null);A(this,yo);A(this,En,null);A(this,tf,"");A(this,Gs);A(this,ty,"");this.color=t.color||He._defaultColor,E(this,Gs,t.thickness||He._defaultThickness),E(this,yo,t.opacity||He._defaultOpacity),E(this,go,t.boxes||null),E(this,ty,t.methodOfCreation||""),E(this,tf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(E(this,an,!0),R(this,Se,c0).call(this,t),R(this,Se,Wl).call(this)):d(this,go)&&(E(this,Zh,t.anchorNode),E(this,Xg,t.anchorOffset),E(this,Zg,t.focusNode),E(this,ey,t.focusOffset),R(this,Se,nE).call(this),R(this,Se,Wl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=He.prototype;return De(this,"_keyboardManager",new ky([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,an)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Gs),methodOfCreation:d(this,ty)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;rt.initialize(t,s),He._defaultColor||(He._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Oe.HIGHLIGHT_DEFAULT_COLOR:He._defaultColor=s;break;case Oe.HIGHLIGHT_THICKNESS:He._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return d(this,ef)}updateParams(t,s){switch(t){case Oe.HIGHLIGHT_COLOR:R(this,Se,$$).call(this,s);break;case Oe.HIGHLIGHT_THICKNESS:R(this,Se,B$).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_DEFAULT_COLOR,He._defaultColor],[Oe.HIGHLIGHT_THICKNESS,He._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||He._defaultColor],[Oe.HIGHLIGHT_THICKNESS,d(this,Gs)||He._defaultThickness],[Oe.HIGHLIGHT_FREE,d(this,an)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,Qg,new ww({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Se,Dp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,R(this,Se,Dp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){R(this,Se,sE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Se,Wl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?R(this,Se,sE).call(this):t&&(R(this,Se,Wl).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,a;const{drawLayer:s}=this.parent;let i;d(this,an)?(t=(t-this.rotation+360)%360,i=R(r=He,Js,vd).call(r,d(this,Hs).box,t)):i=R(o=He,Js,vd).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(d(this,ws),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(d(this,En),{bbox:R(a=He,Js,vd).call(a,d(this,es).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,tf)&&(t.setAttribute("aria-label",d(this,tf)),t.setAttribute("role","mark")),d(this,an)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,Se,j$).bind(this),{signal:this._uiManager._signal});const s=E(this,tu,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=d(this,eu);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),hU(this,d(this,tu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,Se,u0).call(this,!0);break;case 1:case 3:R(this,Se,u0).call(this,!1);break}}select(){var t;super.select(),d(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,En),{rootClass:{selected:!1}}),d(this,an)||R(this,Se,u0).call(this,!1))}get _mustFixPosition(){return!d(this,an)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,ws),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,En),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:a,y:l,width:c,height:u}=i.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),g=w=>{p.abort(),R(this,Js,q$).call(this,t,w)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Vi,{signal:m}),i.addEventListener("pointermove",R(this,Js,G$).bind(this,t),{signal:m}),this._freeHighlight=new Qb({x:r,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var v,_,x,S;let r=null;if(t instanceof x$){const{data:{quadPoints:C,rect:T,rotation:k,id:P,color:I,opacity:N,popupRef:D},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:we.HIGHLIGHT,color:Array.from(I),opacity:N,quadPoints:C,boxes:null,pageIndex:M-1,rect:T.slice(0),rotation:k,annotationElementId:P,id:P,deleted:!1,popupRef:D}}else if(t instanceof AA){const{data:{inkLists:C,rect:T,rotation:k,id:P,color:I,borderStyle:{rawWidth:N},popupRef:D},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:we.HIGHLIGHT,color:Array.from(I),thickness:N,inkLists:C,boxes:null,pageIndex:M-1,rect:T.slice(0),rotation:k,annotationElementId:P,id:P,deleted:!1,popupRef:D}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,s,i);u.color=de.makeHexColor(...o),E(u,yo,c||1),l&&E(u,Gs,t.thickness),u._initialData=r;const[p,m]=u.pageDimensions,[g,w]=u.pageTranslation;if(a){const C=E(u,go,[]);for(let T=0;T<a.length;T+=8)C.push({x:(a[T]-g)/p,y:1-(a[T+1]-w)/m,width:(a[T+2]-a[T])/p,height:(a[T+1]-a[T+5])/m});R(v=u,Se,nE).call(v),R(_=u,Se,Wl).call(_),u.rotate(u.rotation)}else if(l){E(u,an,!0);const C=l[0],T={x:C[0]-g,y:m-(C[1]-w)},k=new Qb(T,[0,0,p,m],1,d(u,Gs)/2,!0,.001);for(let N=0,D=C.length;N<D;N+=2)T.x=C[N]-g,T.y=m-(C[N+1]-w),k.add(T);const{id:P,clipPathId:I}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);R(x=u,Se,c0).call(x,{highlightOutlines:k.getOutlines(),highlightId:P,clipPathId:I}),R(S=u,Se,Wl).call(S),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=rt._colorManager.convert(this.color),r={annotationType:we.HIGHLIGHT,color:i,opacity:d(this,yo),thickness:d(this,Gs),quadPoints:R(this,Se,z$).call(this),outlines:R(this,Se,H$).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:R(this,Se,Dp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,Se,W$).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Zh=new WeakMap,Xg=new WeakMap,go=new WeakMap,eu=new WeakMap,Qg=new WeakMap,es=new WeakMap,Zg=new WeakMap,ey=new WeakMap,tu=new WeakMap,Hs=new WeakMap,ws=new WeakMap,an=new WeakMap,ef=new WeakMap,yo=new WeakMap,En=new WeakMap,tf=new WeakMap,Gs=new WeakMap,ty=new WeakMap,Se=new WeakSet,nE=function(){const t=new Jb(d(this,go),.001);E(this,Hs,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,Hs).box;const s=new Jb(d(this,go),.0025,.001,this._uiManager.direction==="ltr");E(this,es,s.getOutlines());const{lastPoint:i}=d(this,es);E(this,ef,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},c0=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var p,m;if(E(this,Hs,t),E(this,es,t.getNewOutline(d(this,Gs)/2+1.5,.0025)),s>=0)E(this,ws,s),E(this,eu,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,En,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,es).box,path:{d:d(this,es).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,ws),{bbox:R(p=He,Js,vd).call(p,d(this,Hs).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,En),{bbox:R(m=He,Js,vd).call(m,d(this,es).box,g),path:{d:d(this,es).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[g,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*w/g,this.height=c*g/w;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[g,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*w/g,this.height=c*g/w;break}}const{lastPoint:u}=d(this,es);E(this,ef,[(u[0]-o)/l,(u[1]-a)/c])},$$=function(t){const s=(o,a)=>{var l,c;this.color=o,E(this,yo,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,ws),{root:{fill:o,"fill-opacity":a}}),(c=d(this,Qg))==null||c.updateColor(o)},i=this.color,r=d(this,yo);this.addCommands({cmd:s.bind(this,t,He._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},B$=function(t){const s=d(this,Gs),i=r=>{E(this,Gs,r),R(this,Se,V$).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},V$=function(t){if(!d(this,an))return;R(this,Se,c0).call(this,{highlightOutlines:d(this,Hs).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},sE=function(){d(this,ws)===null||!this.parent||(this.parent.drawLayer.remove(d(this,ws)),E(this,ws,null),this.parent.drawLayer.remove(d(this,En)),E(this,En,null))},Wl=function(t=this.parent){d(this,ws)===null&&({id:qt(this,ws)._,clipPathId:qt(this,eu)._}=t.drawLayer.draw({bbox:d(this,Hs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,yo)},rootClass:{highlight:!0,free:d(this,an)},path:{d:d(this,Hs).toSVGPath()}},!1,!0),E(this,En,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,an)},bbox:d(this,es).box,path:{d:d(this,es).toSVGPath()}},d(this,an))),d(this,tu)&&(d(this,tu).style.clipPath=d(this,eu)))},Js=new WeakSet,vd=function([t,s,i,r],o){switch(o){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},j$=function(t){He._keyboardManager.exec(this,t)},u0=function(t){if(!d(this,Zh))return;const s=window.getSelection();t?s.setPosition(d(this,Zh),d(this,Xg)):s.setPosition(d(this,Zg),d(this,ey))},Dp=function(){return d(this,an)?this.rotation:0},z$=function(){if(d(this,an))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=d(this,go),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:p,height:m}of o){const g=c*t+i,w=(1-u)*s+r;a[l]=a[l+4]=g,a[l+1]=a[l+3]=w,a[l+2]=a[l+6]=g+p*t,a[l+5]=a[l+7]=w-m*s,l+=8}return a},H$=function(t){return d(this,Hs).serialize(t,R(this,Se,Dp).call(this))},G$=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},q$=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},W$=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},A(He,Js),H(He,"_defaultColor",null),H(He,"_defaultOpacity",1),H(He,"_defaultThickness",12),H(He,"_type","highlight"),H(He,"_editorType",we.HIGHLIGHT),H(He,"_freeHighlightId",-1),H(He,"_freeHighlight",null),H(He,"_freeHighlightClipId","");let xw=He;var nu;class K${constructor(){A(this,nu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){d(this,nu)[e]=t}toSVGProperties(){const e=d(this,nu);return E(this,nu,Object.create(null)),{root:e}}reset(){E(this,nu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ze("Not implemented")}}nu=new WeakMap;var xs,nf,Yt,su,iu,Ya,Ja,Xa,ru,Ve,iE,rE,oE,Lp,Y$,d0,Fp,wd;const ie=class ie extends rt{constructor(t){super(t);A(this,Ve);A(this,xs,null);A(this,nf);H(this,"_drawId",null);E(this,nf,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(R(this,Ve,iE).call(this,t),R(this,Ve,Lp).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Ze("Not implemented")}static get typesMap(){Ze("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(d(ie,Yt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,o=r[s],a=l=>{var u;r.updateProperty(s,l);const c=d(this,xs).updateProperty(s,l);c&&R(this,Ve,Fp).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,xs).getPathResizingSVGProperties(R(this,Ve,d0).call(this)),{bbox:R(this,Ve,wd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,xs).getPathResizedSVGProperties(R(this,Ve,d0).call(this)),{bbox:R(this,Ve,wd).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:R(this,Ve,wd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,xs).getPathTranslatedSVGProperties(R(this,Ve,d0).call(this),this.parentDimensions),{bbox:R(this,Ve,wd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,nf)&&(E(this,nf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){R(this,Ve,oE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Ve,Lp).call(this),R(this,Ve,Fp).call(this,d(this,xs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),R(this,Ve,oE).call(this)):t&&(this._uiManager.addShouldRescale(this),R(this,Ve,Lp).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties({bbox:R(this,Ve,wd).call(this)},d(this,xs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,Ve,Fp).call(this,d(this,xs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,o){Ze("Not implemented")}static startDrawing(t,s,i,r){var _;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=r;if(d(ie,Ja)&&d(ie,Ja)!==u)return;const{viewport:{rotation:p}}=t,{width:m,height:g}=o.getBoundingClientRect(),w=E(ie,su,new AbortController),v=t.combinedSignal(w);if(d(ie,Ya)||E(ie,Ya,c),d(ie,Ja)??E(ie,Ja,u),window.addEventListener("pointerup",x=>{var S;d(ie,Ya)===x.pointerId?this._endDraw(x):(S=d(ie,Xa))==null||S.delete(x.pointerId)},{signal:v}),window.addEventListener("pointercancel",x=>{var S;d(ie,Ya)===x.pointerId?this._currentParent.endDrawingSession():(S=d(ie,Xa))==null||S.delete(x.pointerId)},{signal:v}),window.addEventListener("pointerdown",x=>{d(ie,Ja)===x.pointerType&&((d(ie,Xa)||E(ie,Xa,new Set)).add(x.pointerId),d(ie,Yt).isCancellable()&&(d(ie,Yt).removeLastElement(),d(ie,Yt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Vi,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",x=>{x.timeStamp===d(ie,ru)&&Dt(x)},{signal:v}),t.toggleDrawing(),(_=s._editorUndoBar)==null||_.hide(),d(ie,Yt)){t.drawLayer.updateProperties(this._currentDrawId,d(ie,Yt).startNew(a,l,m,g,p));return}s.updateUIForDefaultProperties(this),E(ie,Yt,this.createDrawerInstance(a,l,m,g,p)),E(ie,iu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(ie,iu).toSVGProperties(),d(ie,Yt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(E(ie,ru,-1),!d(ie,Yt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(d(ie,Ya)===r){if(((o=d(ie,Xa))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ie,Yt).add(s,i)),E(ie,ru,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(ie,Yt,null),E(ie,iu,null),E(ie,Ja,null),E(ie,ru,NaN)),d(ie,su)&&(d(ie,su).abort(),E(ie,su,null),E(ie,Ya,NaN),E(ie,Xa,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,d(ie,Yt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=d(ie,Yt),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Oe.DRAW_STEP),!d(ie,Yt).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ie,Yt).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:d(ie,iu),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,o,a){Ze("Not implemented")}static async deserialize(t,s,i){var p,m;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=s.viewport,c=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,t),u=await super.deserialize(t,s,i);return u.createDrawingOptions(t),R(p=u,Ve,iE).call(p,{drawOutlines:c}),R(m=u,Ve,Lp).call(m),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return d(this,xs).serialize([s,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};xs=new WeakMap,nf=new WeakMap,Yt=new WeakMap,su=new WeakMap,iu=new WeakMap,Ya=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,ru=new WeakMap,Ve=new WeakSet,iE=function({drawOutlines:t,drawId:s,drawingOptions:i}){E(this,xs,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=R(this,Ve,rE).call(this,t,this.parent),R(this,Ve,Fp).call(this,t.box)},rE=function(t,s){const{id:i}=s.drawLayer.draw(ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},oE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Lp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,Ve,rE).call(this,d(this,xs),t)}},Y$=function([t,s,i,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},d0=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},Fp=function(t){if([this.x,this.y,this.width,this.height]=R(this,Ve,Y$).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},wd=function(){const{x:t,y:s,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(l/c),r*(c/l),i*(l/c)];case 5:return[1-s,t,i*(l/c),r*(c/l)];case 6:return[1-t-r*(c/l),1-s,r*(c/l),i*(l/c)];case 7:return[s-i*(l/c),1-t-r*(c/l),i*(l/c),r*(c/l)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(c/l),s,r*(c/l),i*(l/c)];case 13:return[1-s-i*(l/c),t-r*(c/l),i*(l/c),r*(c/l)];case 14:return[1-t,1-s-i*(l/c),r*(c/l),i*(l/c)];case 15:return[s,1-t,i*(l/c),r*(c/l)];default:return[t,s,i,r]}},H(ie,"_currentDrawId",-1),H(ie,"_currentParent",null),A(ie,Yt,null),A(ie,su,null),A(ie,iu,null),A(ie,Ya,NaN),A(ie,Ja,null),A(ie,Xa,null),A(ie,ru,NaN),H(ie,"_INNER_MARGIN",3);let _w=ie;var ur,Jt,Xt,ou,sf,Mn,ln,qs,au,lu,cu,rf,h0;class zie{constructor(e,t,s,i,r,o){A(this,rf);A(this,ur,new Float64Array(6));A(this,Jt);A(this,Xt);A(this,ou);A(this,sf);A(this,Mn);A(this,ln,"");A(this,qs,0);A(this,au,new Py);A(this,lu);A(this,cu);E(this,lu,s),E(this,cu,i),E(this,ou,r),E(this,sf,o),[e,t]=R(this,rf,h0).call(this,e,t);const a=E(this,Jt,[NaN,NaN,NaN,NaN,e,t]);E(this,Mn,[e,t]),E(this,Xt,[{line:a,points:d(this,Mn)}]),d(this,ur).set(a,0)}updateProperty(e,t){e==="stroke-width"&&E(this,sf,t)}isEmpty(){return!d(this,Xt)||d(this,Xt).length===0}isCancellable(){return d(this,Mn).length<=10}add(e,t){[e,t]=R(this,rf,h0).call(this,e,t);const[s,i,r,o]=d(this,ur).subarray(2,6),a=e-r,l=t-o;return Math.hypot(d(this,lu)*a,d(this,cu)*l)<=2?null:(d(this,Mn).push(e,t),isNaN(s)?(d(this,ur).set([r,o,e,t],2),d(this,Jt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,ur)[0])&&d(this,Jt).splice(6,6),d(this,ur).set([s,i,r,o,e,t],0),d(this,Jt).push(...te.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(d(this,Mn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){E(this,lu,s),E(this,cu,i),E(this,ou,r),[e,t]=R(this,rf,h0).call(this,e,t);const o=E(this,Jt,[NaN,NaN,NaN,NaN,e,t]);E(this,Mn,[e,t]);const a=d(this,Xt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,Xt).push({line:o,points:d(this,Mn)}),d(this,ur).set(o,0),E(this,qs,0),this.toSVGPath(),null}getLastElement(){return d(this,Xt).at(-1)}setLastElement(e){return d(this,Xt)?(d(this,Xt).push(e),E(this,Jt,e.line),E(this,Mn,e.points),E(this,qs,0),{path:{d:this.toSVGPath()}}):d(this,au).setLastElement(e)}removeLastElement(){if(!d(this,Xt))return d(this,au).removeLastElement();d(this,Xt).pop(),E(this,ln,"");for(let e=0,t=d(this,Xt).length;e<t;e++){const{line:s,points:i}=d(this,Xt)[e];E(this,Jt,s),E(this,Mn,i),E(this,qs,0),this.toSVGPath()}return{path:{d:d(this,ln)}}}toSVGPath(){const e=te.svgRound(d(this,Jt)[4]),t=te.svgRound(d(this,Jt)[5]);if(d(this,Mn).length===2)return E(this,ln,`${d(this,ln)} M ${e} ${t} Z`),d(this,ln);if(d(this,Mn).length<=6){const i=d(this,ln).lastIndexOf("M");E(this,ln,`${d(this,ln).slice(0,i)} M ${e} ${t}`),E(this,qs,6)}if(d(this,Mn).length===4){const i=te.svgRound(d(this,Jt)[10]),r=te.svgRound(d(this,Jt)[11]);return E(this,ln,`${d(this,ln)} L ${i} ${r}`),E(this,qs,12),d(this,ln)}const s=[];d(this,qs)===0&&(s.push(`M ${e} ${t}`),E(this,qs,6));for(let i=d(this,qs),r=d(this,Jt).length;i<r;i+=6){const[o,a,l,c,u,p]=d(this,Jt).slice(i,i+6).map(te.svgRound);s.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}return E(this,ln,d(this,ln)+s.join(" ")),E(this,qs,d(this,Jt).length),d(this,ln)}getOutlines(e,t,s,i){const r=d(this,Xt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),d(this,au).build(d(this,Xt),e,t,s,d(this,ou),d(this,sf),i),E(this,ur,null),E(this,Jt,null),E(this,Xt,null),E(this,ln,null),d(this,au)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ur=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,ou=new WeakMap,sf=new WeakMap,Mn=new WeakMap,ln=new WeakMap,qs=new WeakMap,au=new WeakMap,lu=new WeakMap,cu=new WeakMap,rf=new WeakSet,h0=function(e,t){return te._normalizePoint(e,t,d(this,lu),d(this,cu),d(this,ou))};var Dn,ny,sy,_s,dr,hr,of,af,uu,hn,Ur,J$,X$,Q$;class Py extends te{constructor(){super(...arguments);A(this,hn);A(this,Dn);A(this,ny,0);A(this,sy);A(this,_s);A(this,dr);A(this,hr);A(this,of);A(this,af);A(this,uu)}build(t,s,i,r,o,a,l){E(this,dr,s),E(this,hr,i),E(this,of,r),E(this,af,o),E(this,uu,a),E(this,sy,l??0),E(this,_s,t),R(this,hn,X$).call(this)}get thickness(){return d(this,uu)}setLastElement(t){return d(this,_s).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,_s).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of d(this,_s)){if(t.push(`M${te.svgRound(s[4])} ${te.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${te.svgRound(s[10])} ${te.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,a,l,c,u,p]=s.subarray(i,i+6).map(te.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}}return t.join("")}serialize([t,s,i,r],o){const a=[],l=[],[c,u,p,m]=R(this,hn,J$).call(this);let g,w,v,_,x,S,C,T,k;switch(d(this,af)){case 0:k=te._rescale,g=t,w=s+r,v=i,_=-r,x=t+c*i,S=s+(1-u-m)*r,C=t+(c+p)*i,T=s+(1-u)*r;break;case 90:k=te._rescaleAndSwap,g=t,w=s,v=i,_=r,x=t+u*i,S=s+c*r,C=t+(u+m)*i,T=s+(c+p)*r;break;case 180:k=te._rescale,g=t+i,w=s,v=-i,_=r,x=t+(1-c-p)*i,S=s+u*r,C=t+(1-c)*i,T=s+(u+m)*r;break;case 270:k=te._rescaleAndSwap,g=t+i,w=s+r,v=-i,_=-r,x=t+(1-u-m)*i,S=s+(1-c-p)*r,C=t+(1-u)*i,T=s+(1-c)*r;break}for(const{line:P,points:I}of d(this,_s))a.push(k(P,g,w,v,_,o?new Array(P.length):null)),l.push(k(I,g,w,v,_,o?new Array(I.length):null));return{lines:a,points:l,rect:[x,S,C,T]}}static deserialize(t,s,i,r,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const p=[];let m,g,w,v,_;switch(c){case 0:_=te._rescale,m=-t/i,g=s/r+1,w=1/i,v=-1/r;break;case 90:_=te._rescaleAndSwap,m=-s/r,g=-t/i,w=1/r,v=1/i;break;case 180:_=te._rescale,m=t/i+1,g=-s/r,w=-1/i,v=1/r;break;case 270:_=te._rescaleAndSwap,m=s/r+1,g=t/i+1,w=-1/r,v=-1/i;break}if(!a){a=[];for(const S of l){const C=S.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(C-2));a.push(T);let[k,P,I,N]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,k,P],0);for(let D=4;D<C;D+=2){const M=S[D],L=S[D+1];T.set(te.createBezierPoints(k,P,I,N,M,L),(D-2)*3),[k,P,I,N]=[I,N,M,L]}}}for(let S=0,C=a.length;S<C;S++)p.push({line:_(a[S].map(T=>T??NaN),m,g,w,v),points:_(l[S].map(T=>T??NaN),m,g,w,v)});const x=new this.prototype.constructor;return x.build(p,i,r,1,c,u,o),x}get box(){return d(this,Dn)}updateProperty(t,s){return t==="stroke-width"?R(this,hn,Q$).call(this,s):null}updateParentDimensions([t,s],i){const[r,o]=R(this,hn,Ur).call(this);E(this,dr,t),E(this,hr,s),E(this,of,i);const[a,l]=R(this,hn,Ur).call(this),c=a-r,u=l-o,p=d(this,Dn);return p[0]-=c,p[1]-=u,p[2]+=2*c,p[3]+=2*u,p}updateRotation(t){return E(this,ny,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Dn).map(te.svgRound).join(" ")}get defaultProperties(){const[t,s]=d(this,Dn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=d(this,Dn);let i=0,r=0,o=0,a=0,l=0,c=0;switch(d(this,ny)){case 90:r=s/t,o=-t/s,l=t;break;case 180:i=-1,a=-1,l=t,c=s;break;case 270:r=-s/t,o=t/s,c=s;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${te.svgRound(l)} ${te.svgRound(c)})`}getPathResizingSVGProperties([t,s,i,r]){const[o,a]=R(this,hn,Ur).call(this),[l,c,u,p]=d(this,Dn);if(Math.abs(u-o)<=te.PRECISION||Math.abs(p-a)<=te.PRECISION){const _=t+i/2-(l+u/2),x=s+r/2-(c+p/2);return{path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(s)}`,transform:`${this.rotationTransform} translate(${_} ${x})`}}}const m=(i-2*o)/(u-2*o),g=(r-2*a)/(p-2*a),w=u/i,v=p/r;return{path:{"transform-origin":`${te.svgRound(l)} ${te.svgRound(c)}`,transform:`${this.rotationTransform} scale(${w} ${v}) translate(${te.svgRound(o)} ${te.svgRound(a)}) scale(${m} ${g}) translate(${te.svgRound(-o)} ${te.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[o,a]=R(this,hn,Ur).call(this),l=d(this,Dn),[c,u,p,m]=l;if(l[0]=t,l[1]=s,l[2]=i,l[3]=r,Math.abs(p-o)<=te.PRECISION||Math.abs(m-a)<=te.PRECISION){const x=t+i/2-(c+p/2),S=s+r/2-(u+m/2);for(const{line:C,points:T}of d(this,_s))te._translate(C,x,S,C),te._translate(T,x,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*o)/(p-2*o),w=(r-2*a)/(m-2*a),v=-g*(c+o)+t+o,_=-w*(u+a)+s+a;if(g!==1||w!==1||v!==0||_!==0)for(const{line:x,points:S}of d(this,_s))te._rescale(x,v,_,g,w,x),te._rescale(S,v,_,g,w,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,o]=i,a=d(this,Dn),l=t-a[0],c=s-a[1];if(d(this,dr)===r&&d(this,hr)===o)for(const{line:u,points:p}of d(this,_s))te._translate(u,l,c,u),te._translate(p,l,c,p);else{const u=d(this,dr)/r,p=d(this,hr)/o;E(this,dr,r),E(this,hr,o);for(const{line:m,points:g}of d(this,_s))te._rescale(m,l,c,u,p,m),te._rescale(g,l,c,u,p,g);a[2]*=u,a[3]*=p}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${te.svgRound(t)} ${te.svgRound(s)}`}}}get defaultSVGProperties(){const t=d(this,Dn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${te.svgRound(t[0])} ${te.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Dn=new WeakMap,ny=new WeakMap,sy=new WeakMap,_s=new WeakMap,dr=new WeakMap,hr=new WeakMap,of=new WeakMap,af=new WeakMap,uu=new WeakMap,hn=new WeakSet,Ur=function(t=d(this,uu)){const s=d(this,sy)+t/2*d(this,of);return d(this,af)%180===0?[s/d(this,dr),s/d(this,hr)]:[s/d(this,hr),s/d(this,dr)]},J$=function(){const[t,s,i,r]=d(this,Dn),[o,a]=R(this,hn,Ur).call(this,0);return[t+o,s+a,i-2*o,r-2*a]},X$=function(){const t=E(this,Dn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of d(this,_s)){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6)de.pointBoundingBox(r[l],r[l+1],t);continue}let o=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[u,p,m,g,w,v]=r.subarray(l,l+6);de.bezierBoundingBox(o,a,u,p,m,g,w,v,t),o=w,a=v}}const[s,i]=R(this,hn,Ur).call(this);t[0]=On(t[0]-s,0,1),t[1]=On(t[1]-i,0,1),t[2]=On(t[2]+s,0,1),t[3]=On(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},Q$=function(t){const[s,i]=R(this,hn,Ur).call(this);E(this,uu,t);const[r,o]=R(this,hn,Ur).call(this),[a,l]=[r-s,o-i],c=d(this,Dn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class Jx extends K${constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Jx(this._viewParameters);return e.updateAll(this),e}}var Bw,Z$;const Ld=class Ld extends _w{constructor(t){super({...t,name:"inkEditor"});A(this,Bw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){rt.initialize(t,s),this._defaultDrawingOptions=new Jx(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return De(this,"typesMap",new Map([[Oe.INK_THICKNESS,"stroke-width"],[Oe.INK_COLOR,"stroke"],[Oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,o){return new zie(t,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,o,a){return Py.deserialize(t,s,i,r,o,a)}static async deserialize(t,s,i){let r=null;if(t instanceof AA){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:p,opacity:m,borderStyle:{rawWidth:g},popupRef:w},parent:{page:{pageNumber:v}}}=t;r=t={annotationType:we.INK,color:Array.from(p),thickness:g,opacity:m,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:w}}const o=await super.deserialize(t,s,i);return o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Ld.getDefaultDrawingOptions({stroke:de.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:we.INK,color:rt._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!R(this,Bw,Z$).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Bw=new WeakSet,Z$=function(t){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},H(Ld,"_type","ink"),H(Ld,"_editorType",we.INK),H(Ld,"_defaultDrawingOptions",null);let aE=Ld;class lE extends Py{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const vv=8,lp=3;var du,qe,cE,Ai,eB,tB,uE,f0,nB,sB,iB,dE,hE,rB;class Eo{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const p=200,m=u.font=`${s} ${i} ${p}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:_,fontBoundingBoxAscent:x,fontBoundingBoxDescent:S,width:C}=u.measureText(e),T=1.5,k=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||0,C)*T),P=Math.ceil(Math.max(Math.abs(v)+Math.abs(_)||p,Math.abs(x)+Math.abs(S)||p)*T);c=new OffscreenCanvas(k,P),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=m,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,k,P),u.fillStyle="black",u.fillText(e,k*(T-1)/2,P*(3-T)/2);const I=R(this,qe,dE).call(this,u.getImageData(0,0,k,P).data),N=R(this,qe,iB).call(this,I),D=R(this,qe,hE).call(this,N),M=R(this,qe,uE).call(this,I,k,P,D);return this.processDrawnLines({lines:{curves:M,width:k,height:P},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[o,a,l]=R(this,qe,rB).call(this,e),[c,u]=R(this,qe,sB).call(this,o,a,l,Math.hypot(a,l)*d(this,du).sigmaSFactor,d(this,du).sigmaR,d(this,du).kernelSize),p=R(this,qe,hE).call(this,u),m=R(this,qe,uE).call(this,c,a,l,p);return this.processDrawnLines({lines:{curves:m,width:a,height:l},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([t,s]=[s,t]);const{curves:l,width:c,height:u}=e,p=e.thickness??0,m=[],g=Math.min(t/c,s/u),w=g/t,v=g/s,_=[];for(const{points:S}of l){const C=o?R(this,qe,nB).call(this,S):S;if(!C)continue;_.push(C);const T=C.length,k=new Float32Array(T),P=new Float32Array(3*(T===2?2:T-2));if(m.push({line:P,points:k}),T===2){k[0]=C[0]*w,k[1]=C[1]*v,P.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[I,N,D,M]=C;I*=w,N*=v,D*=w,M*=v,k.set([I,N,D,M],0),P.set([NaN,NaN,NaN,NaN,I,N],0);for(let L=4;L<T;L+=2){const V=k[L]=C[L]*w,G=k[L+1]=C[L+1]*v;P.set(te.createBezierPoints(I,N,D,M,V,G),(L-2)*3),[I,N,D,M]=[D,M,V,G]}}if(m.length===0)return null;const x=a?new lE:new Py;return x.build(m,t,s,1,i,a?0:p,r),{outline:x,newCurves:_,areContours:a,thickness:p,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let o=1/0,a=-1/0,l=0;for(const C of e){l+=C.length;for(let T=2,k=C.length;T<k;T++){const P=C[T]-C[T-2];o=Math.min(o,P),a=Math.max(a,P)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,p=vv+lp*u,m=new Uint32Array(p);let g=0;m[g++]=p*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,m[g++]=0,m[g++]=i,m[g++]=r,m[g++]=t?0:1,m[g++]=Math.max(0,Math.floor(s??0)),m[g++]=u,m[g++]=c.BYTES_PER_ELEMENT;for(const C of e)m[g++]=C.length-2,m[g++]=C[0],m[g++]=C[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const _=c.prototype.constructor;for(const C of e){const T=new _(C.length-2);for(let k=2,P=C.length;k<P;k++)T[k-2]=C[k]-C[k-2];v.write(T)}v.close();const x=await new Response(w.readable).arrayBuffer(),S=new Uint8Array(x);return rU(S)}static async decompressSignature(e){try{const t=fse(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const C of s)o||(o=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),o.set(C,a),a+=C.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],p=l[3],m=l[4]===0,g=l[5],w=l[6],v=l[7],_=[],x=(vv+lp*w)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(v){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(o.buffer,x);break}a=0;for(let C=0;C<w;C++){const T=l[lp*C+vv],k=new Float32Array(T+2);_.push(k);for(let P=0;P<lp-1;P++)k[P]=l[lp*C+vv+P+1];for(let P=0;P<T;P++)k[P+2]=k[P]+S[a++]}return{areContours:m,thickness:g,outlines:_,width:u,height:p}}catch(t){return xe(`decompressSignature: ${t}`),null}}}du=new WeakMap,qe=new WeakSet,cE=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},Ai=new WeakMap,eB=function(e,t,s,i,r,o,a){const l=R(this,qe,cE).call(this,s,i,r,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,p=d(this,Ai)[2*u],m=d(this,Ai)[2*u+1];if(e[(s+p)*t+(i+m)]!==0)return u}return-1},tB=function(e,t,s,i,r,o,a){const l=R(this,qe,cE).call(this,s,i,r,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,p=d(this,Ai)[2*u],m=d(this,Ai)[2*u+1];if(e[(s+p)*t+(i+m)]!==0)return u}return-1},uE=function(e,t,s,i){const r=e.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<s-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*s-1-u]=0;let a=1,l;const c=[];for(let u=1;u<s-1;u++){l=1;for(let p=1;p<t-1;p++){const m=u*t+p,g=o[m];if(g===0)continue;let w=u,v=p;if(g===1&&o[m-1]===0)a+=1,v-=1;else if(g>=1&&o[m+1]===0)a+=1,v+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const _=[p,u],x=v===p+1,S={isHole:x,points:_,id:a,parent:0};c.push(S);let C;for(const L of c)if(L.id===l){C=L;break}C?C.isHole?S.parent=x?C.parent:l:S.parent=x?l:C.parent:S.parent=x?l:0;const T=R(this,qe,eB).call(this,o,t,u,p,w,v,0);if(T===-1){o[m]=-a,o[m]!==1&&(l=Math.abs(o[m]));continue}let k=d(this,Ai)[2*T],P=d(this,Ai)[2*T+1];const I=u+k,N=p+P;w=I,v=N;let D=u,M=p;for(;;){const L=R(this,qe,tB).call(this,o,t,D,M,w,v,1);k=d(this,Ai)[2*L],P=d(this,Ai)[2*L+1];const V=D+k,G=M+P;_.push(G,V);const B=D*t+M;if(o[B+1]===0?o[B]=-a:o[B]===1&&(o[B]=a),V===u&&G===p&&D===I&&M===N){o[m]!==1&&(l=Math.abs(o[m]));break}else w=D,v=M,D=V,M=G}}}return c},f0=function(e,t,s,i){if(s-t<=4){for(let I=t;I<s-2;I+=2)i.push(e[I],e[I+1]);return}const r=e[t],o=e[t+1],a=e[s-4]-r,l=e[s-3]-o,c=Math.hypot(a,l),u=a/c,p=l/c,m=u*o-p*r,g=l/a,w=1/c,v=Math.atan(g),_=Math.cos(v),x=Math.sin(v),S=w*(Math.abs(_)+Math.abs(x)),C=w*(1-S+S**2),T=Math.max(Math.atan(Math.abs(x+_)*C),Math.atan(Math.abs(x-_)*C));let k=0,P=t;for(let I=t+2;I<s-2;I+=2){const N=Math.abs(m-u*e[I+1]+p*e[I]);N>k&&(P=I,k=N)}k>(c*T)**2?(R(this,qe,f0).call(this,e,t,P+2,i),R(this,qe,f0).call(this,e,P,s,i)):i.push(r,o)},nB=function(e){const t=[],s=e.length;return R(this,qe,f0).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},sB=function(e,t,s,i,r,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let v=0;v<o;v++){const _=(v-c)**2;for(let x=0;x<o;x++)a[v*o+x]=Math.exp((_+(x-c)**2)/l)}const u=new Float32Array(256),p=-2*r**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/p);const m=e.length,g=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<s;v++)for(let _=0;_<t;_++){const x=v*t+_,S=e[x];let C=0,T=0;for(let P=0;P<o;P++){const I=v+P-c;if(!(I<0||I>=s))for(let N=0;N<o;N++){const D=_+N-c;if(D<0||D>=t)continue;const M=e[I*t+D],L=a[P*o+N]*u[Math.abs(M-S)];C+=M*L,T+=L}}const k=g[x]=Math.round(C/T);w[k]++}return[g,w]},iB=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},dE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let a=0,l=s.length;a<l;a++){if(e[(a<<2)+3]===0){i=s[a]=255;continue}const u=s[a]=e[a<<2];u>i&&(i=u),u<r&&(r=u)}const o=255/(i-r);for(let a=0;a<t;a++)s[a]=(s[a]-r)*o;return s},hE=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(l=>l!==0);let o=r,a=r;for(t=r;t<256;t++){const l=e[t];l>s&&(t-o>i&&(i=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},rB=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=d(this,du);let o=s,a=i;if(s>r||i>r){let m=s,g=i,w=Math.log2(Math.max(s,i)/r);const v=Math.floor(w);w=w===v?v-1:v;for(let x=0;x<w;x++){o=Math.ceil(m/2),a=Math.ceil(g/2);const S=new OffscreenCanvas(o,a);S.getContext("2d").drawImage(e,0,0,m,g,0,0,o,a),m=o,g=a,e!==t&&e.close(),e=S.transferToImageBitmap()}const _=Math.min(r/o,r/a);o=Math.round(o*_),a=Math.round(a*_)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[R(this,qe,dE).call(this,u),o,a]},A(Eo,qe),A(Eo,du,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Eo,Ai,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class kA extends K${constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const e=new kA;return e.updateAll(this),e}}class RA extends Jx{constructor(e){super(e),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const e=new RA(this._viewParameters);return e.updateAll(this),e}}var Qa,fr,Za,hu;const cs=class cs extends _w{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,Qa,!1);A(this,fr,null);A(this,Za,null);A(this,hu,null);this._willKeepAspectRatio=!0,E(this,Za,t.signatureData||null),E(this,fr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){rt.initialize(t,s),this._defaultDrawingOptions=new kA,this._defaultDrawnSignatureOptions=new RA(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return De(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,fr)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(d(this,Za)){const{lines:r,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=d(this,Za),{rawDims:{pageWidth:p,pageHeight:m},rotation:g}=this.parent.viewport,w=Eo.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:g,innerMargin:cs._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(w,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){E(this,hu,t),this.addEditToolbar()}getUuid(){return d(this,hu)}get description(){return d(this,fr)}set description(t){E(this,fr,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:o}=d(this,Za),a=Math.max(r,o),l=Eo.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:o,y:a}=this,{outline:l}=E(this,Za,t);E(this,Qa,l instanceof lE),this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let c;d(this,Qa)?c=cs.getDefaultDrawingOptions():(c=cs._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,p]=this.parentDimensions,[,m]=this.pageDimensions;let g=s/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,p*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Eo.process(t,s,i,r,cs._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return Eo.extractContoursFromText(t,s,i,r,o,cs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Eo.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:cs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=cs.getDefaultDrawingOptions():(this._drawingOptions=cs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:we.SIGNATURE,isSignature:!0,areContours:d(this,Qa),color:[0,0,0],thickness:d(this,Qa)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:s,points:i},a.uuid=d(this,hu),a.isCopy=!0):a.lines=s,d(this,fr)&&(a.accessibilityData={type:"Figure",alt:d(this,fr)}),a}static deserializeDraw(t,s,i,r,o,a){return a.areContours?lE.deserialize(t,s,i,r,o,a):Py.deserialize(t,s,i,r,o,a)}static async deserialize(t,s,i){var o;const r=await super.deserialize(t,s,i);return E(r,Qa,t.areContours),E(r,fr,((o=t.accessibilityData)==null?void 0:o.alt)||""),E(r,hu,t.uuid),r}};Qa=new WeakMap,fr=new WeakMap,Za=new WeakMap,hu=new WeakMap,H(cs,"_type","signature"),H(cs,"_editorType",we.SIGNATURE),H(cs,"_defaultDrawingOptions",null);let fE=cs;var ht,Qt,el,vo,tl,lf,wo,fu,pr,Cs,cf,je,Op,Up,p0,m0,g0,mE,y0,oB;class pE extends rt{constructor(t){super({...t,name:"stampEditor"});A(this,je);A(this,ht,null);A(this,Qt,null);A(this,el,null);A(this,vo,null);A(this,tl,null);A(this,lf,"");A(this,wo,null);A(this,fu,!1);A(this,pr,null);A(this,Cs,!1);A(this,cf,!1);E(this,vo,t.bitmapUrl),E(this,tl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){rt.initialize(t,s)}static isHandlingMimeForPasting(t){return ab.includes(t)}static paste(t,s){s.pasteEditor({mode:we.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;d(this,Qt)&&(E(this,ht,null),this._uiManager.imageManager.deleteId(d(this,Qt)),(t=d(this,wo))==null||t.remove(),E(this,wo,null),d(this,pr)&&(clearTimeout(d(this,pr)),E(this,pr,null))),super.remove()}rebuild(){if(!this.parent){d(this,Qt)&&R(this,je,p0).call(this);return}super.rebuild(),this.div!==null&&(d(this,Qt)&&d(this,wo)===null&&R(this,je,p0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,el)||d(this,ht)||d(this,vo)||d(this,tl)||d(this,Qt)||d(this,fu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,fu)||(d(this,ht)?R(this,je,m0).call(this):R(this,je,p0).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(E(this,Qt,i),r&&E(this,ht,r),E(this,fu,!1),R(this,je,m0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,pr)!==null&&clearTimeout(d(this,pr)),E(this,pr,setTimeout(()=>{E(this,pr,null),R(this,je,mE).call(this)},200))}copyCanvas(t,s,i=!1){var g;t||(t=224);const{width:r,height:o}=d(this,ht),a=new Rr;let l=d(this,ht),c=r,u=o,p=null;if(s){if(r>s||o>s){const N=Math.min(s/r,s/o);c=Math.floor(r*N),u=Math.floor(o*N)}p=document.createElement("canvas");const w=p.width=Math.ceil(c*a.sx),v=p.height=Math.ceil(u*a.sy);d(this,Cs)||(l=R(this,je,g0).call(this,w,v));const _=p.getContext("2d");_.filter=this._uiManager.hcmFilter;let x="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",S="#42414d");const C=15,T=C*a.sx,k=C*a.sy,P=new OffscreenCanvas(T*2,k*2),I=P.getContext("2d");I.fillStyle=x,I.fillRect(0,0,T*2,k*2),I.fillStyle=S,I.fillRect(0,0,T,k),I.fillRect(T,k,T,k),_.fillStyle=_.createPattern(P,"repeat"),_.fillRect(0,0,w,v),_.drawImage(l,0,0,l.width,l.height,0,0,w,v)}let m=null;if(i){let w,v;if(a.symmetric&&l.width<t&&l.height<t)w=l.width,v=l.height;else if(l=d(this,ht),r>t||o>t){const S=Math.min(t/r,t/o);w=Math.floor(r*S),v=Math.floor(o*S),d(this,Cs)||(l=R(this,je,g0).call(this,w,v))}const x=new OffscreenCanvas(w,v).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,w,v),m={width:w,height:v,data:x.getImageData(0,0,w,v).data}}return{canvas:p,width:c,height:u,imageData:m}}static async deserialize(t,s,i){var _;let r=null,o=!1;if(t instanceof _$){const{data:{rect:x,rotation:S,id:C,structParent:T,popupRef:k},container:P,parent:{page:{pageNumber:I}},canvas:N}=t;let D,M;N?(delete t.canvas,{id:D,bitmap:M}=i.imageManager.getFromCanvas(P.id,N),N.remove()):(o=!0,t._hasNoCanvas=!0);const L=((_=await s._structTree.getAriaAttributes(`${wA}${C}`))==null?void 0:_.get("aria-label"))||"";r=t={annotationType:we.STAMP,bitmapId:D,bitmap:M,pageIndex:I-1,rect:x.slice(0),rotation:S,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:T,popupRef:k}}const a=await super.deserialize(t,s,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:p,isSvg:m,accessibilityData:g}=t;o?(i.addMissingCanvas(t.id,a),E(a,fu,!0)):p&&i.imageManager.isValidId(p)?(E(a,Qt,p),c&&E(a,ht,c)):E(a,vo,u),E(a,Cs,m);const[w,v]=a.pageDimensions;return a.width=(l[2]-l[0])/w,a.height=(l[3]-l[1])/v,g&&(a.altTextData=g),a._initialData=r,E(a,cf,!!r),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:we.STAMP,bitmapId:d(this,Qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Cs),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=R(this,je,y0).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=R(this,je,oB).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=d(this,Cs)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(d(this,Qt)))s.stamps.set(d(this,Qt),{area:a,serialized:i}),i.bitmap=R(this,je,y0).call(this,!1);else if(d(this,Cs)){const l=s.stamps.get(d(this,Qt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=R(this,je,y0).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}ht=new WeakMap,Qt=new WeakMap,el=new WeakMap,vo=new WeakMap,tl=new WeakMap,lf=new WeakMap,wo=new WeakMap,fu=new WeakMap,pr=new WeakMap,Cs=new WeakMap,cf=new WeakMap,je=new WeakSet,Op=function(t,s=!1){if(!t){this.remove();return}E(this,ht,t.bitmap),s||(E(this,Qt,t.id),E(this,Cs,t.isSvg)),t.file&&E(this,lf,t.file.name),R(this,je,m0).call(this)},Up=function(){if(E(this,el,null),this._uiManager.enableWaiting(!1),!!d(this,wo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ht)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ht)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},p0=function(){if(d(this,Qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Qt)).then(i=>R(this,je,Op).call(this,i,!0)).finally(()=>R(this,je,Up).call(this));return}if(d(this,vo)){const i=d(this,vo);E(this,vo,null),this._uiManager.enableWaiting(!0),E(this,el,this._uiManager.imageManager.getFromUrl(i).then(r=>R(this,je,Op).call(this,r)).finally(()=>R(this,je,Up).call(this)));return}if(d(this,tl)){const i=d(this,tl);E(this,tl,null),this._uiManager.enableWaiting(!0),E(this,el,this._uiManager.imageManager.getFromFile(i).then(r=>R(this,je,Op).call(this,r)).finally(()=>R(this,je,Up).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ab.join(",");const s=this._uiManager._signal;E(this,el,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,je,Op).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>R(this,je,Up).call(this))),t.click()},m0=function(){var p;const{div:t}=this;let{width:s,height:i}=d(this,ht);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>a*r||i>a*o){const m=Math.min(a*r/s,a*o/i);s*=m,i*=m}const[l,c]=this.parentDimensions;this.setDims(s*l/r,i*c/o),this._uiManager.enableWaiting(!1);const u=E(this,wo,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=i/o,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,je,mE).call(this),d(this,cf)||(this.parent.addUndoableEditor(this),E(this,cf,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,lf)&&this.div.setAttribute("aria-description",d(this,lf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},g0=function(t,s){const{width:i,height:r}=d(this,ht);let o=i,a=r,l=d(this,ht);for(;o>2*t||a>2*s;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(o,a);p.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=p.transferToImageBitmap()}return l},mE=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,o=new Rr,a=Math.ceil(i*t*o.sx),l=Math.ceil(r*s*o.sy),c=d(this,wo);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=d(this,Cs)?d(this,ht):R(this,je,g0).call(this,a,l),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(u,0,0,u.width,u.height,0,0,a,l)},y0=function(t){if(t){if(d(this,Cs)){const r=this._uiManager.imageManager.getSvgUrl(d(this,Qt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=d(this,ht),s.getContext("2d").drawImage(d(this,ht),0,0),s.toDataURL()}if(d(this,Cs)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Tl.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Tl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(d(this,ht),0,0,d(this,ht).width,d(this,ht).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(d(this,ht))},oB=function(t){var a;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},H(pE,"_type","stamp"),H(pE,"_editorType",we.STAMP);var pu,uf,mr,nl,xo,Ss,sl,df,mu,ki,_o,Zt,Co,il,hf,ce,rl,ft,aB,Ki,yE,vE,v0;const pi=class pi{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){A(this,ft);A(this,pu);A(this,uf,!1);A(this,mr,null);A(this,nl,null);A(this,xo,null);A(this,Ss,new Map);A(this,sl,!1);A(this,df,!1);A(this,mu,!1);A(this,ki,null);A(this,_o,null);A(this,Zt,null);A(this,Co,null);A(this,il,null);A(this,hf,-1);A(this,ce);const p=[...d(pi,rl).values()];if(!pi._initialized){pi._initialized=!0;for(const m of p)m.initialize(u,e)}e.registerEditorTypes(p),E(this,ce,e),this.pageIndex=t,this.div=s,E(this,pu,r),E(this,mr,o),this.viewport=c,E(this,Zt,l),this.drawLayer=a,this._structTree=i,d(this,ce).addLayer(this)}get isEmpty(){return d(this,Ss).size===0}get isInvisible(){return this.isEmpty&&d(this,ce).getMode()===we.NONE}updateToolbar(e){d(this,ce).updateToolbar(e)}updateMode(e=d(this,ce).getMode()){switch(R(this,ft,v0).call(this),e){case we.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case we.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case we.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of d(pi,rl).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,Zt))==null?void 0:t.div)}setEditingState(e){d(this,ce).setEditingState(e)}addCommands(e){d(this,ce).addCommands(e)}cleanUndoStack(e){d(this,ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,mr))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;E(this,mu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=d(this,il))==null||s.abort(),E(this,il,null);const e=new Set;for(const i of d(this,Ss).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(d(this,ce).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!d(this,mr)){E(this,mu,!1);return}const t=d(this,mr).getEditableAnnotations();for(const i of t){if(i.hide(),d(this,ce).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}E(this,mu,!1)}disable(){var i;if(E(this,df,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,Zt)&&!d(this,il)){E(this,il,new AbortController);const r=d(this,ce).combinedSignal(d(this,il));d(this,Zt).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,p=d(this,hf);if(u-p>500){E(this,hf,u);return}E(this,hf,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let w;const v=new RegExp(`^${eU}[0-9]+$`);for(const x of g)if(v.test(x.id)){w=x.id;break}if(!w)return;const _=d(this,Ss).get(w);(_==null?void 0:_.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),_.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of d(this,Ss).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(d(this,mr)){const r=d(this,mr).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(d(this,ce).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(d(this,ce).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}R(this,ft,v0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of d(pi,rl).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,df,!1)}getEditableAnnotation(e){var t;return((t=d(this,mr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,ce).getActive()!==e&&d(this,ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,Zt))!=null&&e.div&&!d(this,Co)){E(this,Co,new AbortController);const t=d(this,ce).combinedSignal(d(this,Co));d(this,Zt).div.addEventListener("pointerdown",R(this,ft,aB).bind(this),{signal:t}),d(this,Zt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,Zt))!=null&&e.div&&d(this,Co)&&(d(this,Co).abort(),E(this,Co,null),d(this,Zt).div.classList.remove("highlighting"))}enableClick(){if(d(this,nl))return;E(this,nl,new AbortController);const e=d(this,ce).combinedSignal(d(this,nl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,nl))==null||e.abort(),E(this,nl,null)}attach(e){d(this,Ss).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,ce).isDeletedAnnotationElement(t)&&d(this,ce).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,Ss).delete(e.id),(t=d(this,pu))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,df)&&e.annotationElementId&&d(this,ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,ce).addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,mu)),d(this,ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,xo)&&(e._focusEventsAllowed=!1,E(this,xo,setTimeout(()=>{E(this,xo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,ce)._signal}),t.focus())},0))),e._structTreeParentId=(s=d(this,pu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return d(this,ce).getId()}combinedSignal(e){return d(this,ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,ft,Ki))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,ce).updateMode(e.mode);const{offsetX:s,offsetY:i}=R(this,ft,vE).call(this),r=this.getNextId(),o=R(this,ft,yE).call(this,{parent:this,id:r,x:s,y:i,uiManager:d(this,ce),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=d(pi,rl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,ce)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=R(this,ft,yE).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:d(this,ce),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(e={}){this.createAndAddNewEditor(R(this,ft,vE).call(this),!0,e)}setSelected(e){d(this,ce).setSelected(e)}toggleSelected(e){d(this,ce).toggleSelected(e)}unselect(e){d(this,ce).unselect(e)}pointerup(e){var i;const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,sl)||(E(this,sl,!1),(i=d(this,ft,Ki))!=null&&i.isDrawer&&d(this,ft,Ki).supportMultipleDrawings))return;if(!d(this,uf)){E(this,uf,!0);return}const s=d(this,ce).getMode();if(s===we.STAMP||s===we.SIGNATURE){d(this,ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(d(this,ce).getMode()===we.HIGHLIGHT&&this.enableTextSelection(),d(this,sl)){E(this,sl,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,sl,!0),(i=d(this,ft,Ki))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=d(this,ce).getActive();E(this,uf,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,ki)){d(this,ft,Ki).startDrawing(this,d(this,ce),!1,e);return}d(this,ce).setCurrentDrawingSession(this),E(this,ki,new AbortController);const t=d(this,ce).combinedSignal(d(this,ki));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(E(this,_o,null),this.commitOrRemove())},{signal:t}),d(this,ft,Ki).startDrawing(this,d(this,ce),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,_o,t);return}d(this,_o)&&setTimeout(()=>{var t;(t=d(this,_o))==null||t.focus(),E(this,_o,null)},0)}endDrawingSession(e=!1){return d(this,ki)?(d(this,ce).setCurrentDrawingSession(null),d(this,ki).abort(),E(this,ki,null),E(this,_o,null),d(this,ft,Ki).endDrawing(e)):null}findNewParent(e,t,s){const i=d(this,ce).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return d(this,ki)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,ki)&&d(this,ft,Ki).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,ce).getActive())==null?void 0:e.parent)===this&&(d(this,ce).commitOrRemove(),d(this,ce).setActiveEditor(null)),d(this,xo)&&(clearTimeout(d(this,xo)),E(this,xo,null));for(const s of d(this,Ss).values())(t=d(this,pu))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,d(this,Ss).clear(),d(this,ce).removeLayer(this)}render({viewport:e}){this.viewport=e,$u(this.div,e);for(const t of d(this,ce).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,ce).commitOrRemove(),R(this,ft,v0).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,$u(this.div,{rotation:s}),t!==s)for(const i of d(this,Ss).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,ce).viewParameters.realScale}};pu=new WeakMap,uf=new WeakMap,mr=new WeakMap,nl=new WeakMap,xo=new WeakMap,Ss=new WeakMap,sl=new WeakMap,df=new WeakMap,mu=new WeakMap,ki=new WeakMap,_o=new WeakMap,Zt=new WeakMap,Co=new WeakMap,il=new WeakMap,hf=new WeakMap,ce=new WeakMap,rl=new WeakMap,ft=new WeakSet,aB=function(e){d(this,ce).unselectAll();const{target:t}=e;if(t===d(this,Zt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,Zt).div.contains(t)){const{isMac:s}=pn.platform;if(e.button!==0||e.ctrlKey&&s)return;d(this,ce).showAllEditors("highlight",!0,!0),d(this,Zt).div.classList.add("free"),this.toggleDrawing(),xw.startHighlighting(this,d(this,ce).direction==="ltr",{target:d(this,Zt).div,x:e.x,y:e.y}),d(this,Zt).div.addEventListener("pointerup",()=>{d(this,Zt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,ce)._signal}),e.preventDefault()}},Ki=function(){return d(pi,rl).get(d(this,ce).getMode())},yE=function(e){const t=d(this,ft,Ki);return t?new t.prototype.constructor(e):null},vE=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+i),c=(r+a)/2-e,u=(o+l)/2-t,[p,m]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:p,offsetY:m}},v0=function(){for(const e of d(this,Ss).values())e.isEmpty()&&e.remove()},H(pi,"_initialized",!1),A(pi,rl,new Map([Kb,aE,pE,xw,fE].map(e=>[e._editorType,e])));let gE=pi;var Ri,Ln,gu,iy,Vw,lB,Pr,xE,cB,_E;const $t=class $t{constructor({pageIndex:e}){A(this,Pr);A(this,Ri,null);A(this,Ln,new Map);A(this,gu,new Map);this.pageIndex=e}setParent(e){if(!d(this,Ri)){E(this,Ri,e);return}if(d(this,Ri)!==e){if(d(this,Ln).size>0)for(const t of d(this,Ln).values())t.remove(),e.append(t);E(this,Ri,e)}}static get _svgFactory(){return De(this,"_svgFactory",new yw)}draw(e,t=!1,s=!1){const i=qt($t,iy)._++,r=R(this,Pr,xE).call(this),o=$t._svgFactory.createElement("defs");r.append(o);const a=$t._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,gu).set(i,a);const c=s?R(this,Pr,cB).call(this,o,l):null,u=$t._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,e),d(this,Ln).set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const s=qt($t,iy)._++,i=R(this,Pr,xE).call(this),r=$t._svgFactory.createElement("defs");i.append(r);const o=$t._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const p=$t._svgFactory.createElement("mask");r.append(p),l=`mask_p${this.pageIndex}_${s}`,p.setAttribute("id",l),p.setAttribute("maskUnits","objectBoundingBox");const m=$t._svgFactory.createElement("rect");p.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=$t._svgFactory.createElement("use");p.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const c=$t._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),d(this,Ln).set(s,i),s}finalizeDraw(e,t){d(this,gu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,a=typeof e=="number"?d(this,Ln).get(e):e;if(a){if(s&&R(this,Pr,_E).call(this,a,s),i&&R(l=$t,Vw,lB).call(l,a,i),r){const{classList:c}=a;for(const[u,p]of Object.entries(r))c.toggle(u,p)}if(o){const u=a.firstChild.firstChild;R(this,Pr,_E).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const s=d(this,Ln).get(e);s&&(d(t,Ri).append(s),d(this,Ln).delete(e),d(t,Ln).set(e,s))}remove(e){d(this,gu).delete(e),d(this,Ri)!==null&&(d(this,Ln).get(e).remove(),d(this,Ln).delete(e))}destroy(){E(this,Ri,null);for(const e of d(this,Ln).values())e.remove();d(this,Ln).clear(),d(this,gu).clear()}};Ri=new WeakMap,Ln=new WeakMap,gu=new WeakMap,iy=new WeakMap,Vw=new WeakSet,lB=function(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},Pr=new WeakSet,xE=function(){const e=$t._svgFactory.create(1,1,!0);return d(this,Ri).append(e),e.setAttribute("aria-hidden",!0),e},cB=function(e,t){const s=$t._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=$t._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},_E=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},A($t,Vw),A($t,iy,0);let wE=$t;globalThis._pdfjsTestingUtils={HighlightOutliner:Jb};globalThis.pdfjsLib={AbortException:El,AnnotationEditorLayer:gE,AnnotationEditorParamsType:Oe,AnnotationEditorType:we,AnnotationEditorUIManager:Bu,AnnotationLayer:Gb,AnnotationMode:ha,AnnotationType:Nt,build:Cie,ColorPicker:ww,createValidAbsoluteUrl:tU,DOMSVGFactory:yw,DrawLayer:wE,FeatureTest:pn,fetchData:Ty,getDocument:r$,getFilenameFromUrl:pse,getPdfFilenameFromUrl:mse,getUuid:iU,getXfaPageViewport:yse,GlobalWorkerOptions:vr,ImageKind:jv,InvalidPDFException:rb,isDataScheme:Kx,isPdfFile:_A,isValidExplicitDest:kse,MathClamp:On,noContextMenu:Vi,normalizeUnicode:dse,OPS:fw,OutputScale:Rr,PasswordResponses:nse,PDFDataRangeTransport:o$,PDFDateString:CA,PDFWorker:Tm,PermissionFlag:tse,PixelsPerInch:Tl,RenderingCancelledException:xA,ResponseException:pw,setLayerDimensions:$u,shadow:De,SignatureExtractor:Eo,stopEvent:Dt,SupportedImageMimeTypes:ab,TextLayer:bm,TouchManager:gw,updateUrlHash:nU,Util:de,VerbosityLevel:Gx,version:_ie,XfaLayer:c$};const Hie="/assets/pdf.worker-B8q3_SH5.mjs";vr.workerSrc=Hie;const Gie=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const i=s.result.split(",")[1];e(i)},s.onerror=i=>t(i),s.readAsDataURL(n)}),qie=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=async i=>{var r;if((r=i.target)!=null&&r.result)try{const o=new Uint8Array(i.target.result),a=await r$(o).promise;let l="";for(let c=1;c<=a.numPages;c++){const p=await(await a.getPage(c)).getTextContent();l+=p.items.map(m=>"str"in m?m.str:"").join(" ")+`
`}e(l)}catch(o){t(o)}},s.onerror=()=>t(new Error(`Failed to read ${n.name}.`)),s.readAsArrayBuffer(n)}),Wie=async n=>{const e=["application/pdf","image/png","image/jpeg"],t=Array.from(n).filter(s=>e.includes(s.type)).map(async s=>{let i;return s.type==="application/pdf"?i=await qie(s):i=await Gie(s),{id:crypto.randomUUID(),name:s.name,type:s.type,content:i,url:URL.createObjectURL(s),uploadedAt:new Date().toISOString()}});return Promise.all(t)};function Kie({sessionId:n,files:e,onFileAdded:t}){const[s,i]=b.useState(!1),[r,o]=b.useState(!1),[a,l]=b.useState(""),c=b.useRef(null),{toast:u}=Ho(),p=v=>{v.preventDefault(),i(!1),v.dataTransfer.files&&v.dataTransfer.files.length>0&&m(v.dataTransfer.files)},m=async v=>{if(v.length!==0){o(!0);try{const _=await Wie(v);for(const x of _)t(x),u({title:"File uploaded",description:`${x.name} was uploaded successfully.`})}catch(_){console.error("Error uploading files:",_),u({title:"Upload failed",description:"There was an error uploading your files.",variant:"destructive"})}finally{o(!1)}}},g=()=>{var v;(v=c.current)==null||v.click()},w=v=>{v.target.files&&v.target.files.length>0&&m(v.target.files)};return y.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Study Materials"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload PDFs, images, or other documents to generate study materials"})]}),y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:v=>{v.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:p,children:[y.jsx(h3,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),y.jsx("p",{className:"text-lg font-medium mb-2",children:s?"Drop files here":"Drag and drop files here"}),y.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF, PNG, JPG files"}),y.jsx(pe,{onClick:g,disabled:r,children:r?"Processing...":"Browse Files"}),y.jsx("input",{ref:c,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:w,className:"hidden"})]}),e.length>0&&y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Files"}),y.jsx("div",{className:"space-y-2",children:e.map(v=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[y.jsx("span",{className:"font-medium",children:v.name}),y.jsx("span",{className:"text-sm text-gray-500",children:v.type})]},v.id))})]})]})}var PA="Progress",IA=100,[Yie,Rre]=Fs(PA),[Jie,Xie]=Yie(PA),uB=b.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:i,getValueLabel:r=Qie,...o}=n;(i||i===0)&&!uI(i)&&console.error(Zie(`${i}`,"Progress"));const a=uI(i)?i:IA;s!==null&&!dI(s,a)&&console.error(ere(`${s}`,"Progress"));const l=dI(s,a)?s:null,c=Cw(l)?r(l,a):void 0;return y.jsx(Jie,{scope:t,value:l,max:a,children:y.jsx(fe.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Cw(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":fB(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});uB.displayName=PA;var dB="ProgressIndicator",hB=b.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,i=Xie(dB,t);return y.jsx(fe.div,{"data-state":fB(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});hB.displayName=dB;function Qie(n,e){return`${Math.round(n/e*100)}%`}function fB(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Cw(n){return typeof n=="number"}function uI(n){return Cw(n)&&!isNaN(n)&&n>0}function dI(n,e){return Cw(n)&&!isNaN(n)&&n<=e&&n>=0}function Zie(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${IA}\`.`}function ere(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${IA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pB=uB,tre=hB;const mB=b.forwardRef(({className:n,value:e,...t},s)=>y.jsx(pB,{ref:s,className:Te("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...t,children:y.jsx(tre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));mB.displayName=pB.displayName;function nre({sessionId:n,flashcards:e=[],studyMaterials:t=[],files:s=[]}){var tt,Me;const[i,r]=b.useState([]),[o,a]=b.useState(0),[l,c]=b.useState(!1),[u,p]=b.useState(0),[m,g]=b.useState(0),[w,v]=b.useState(0),{toast:_}=Ho(),[x,S]=b.useState(!1),[C,T]=b.useState(""),[k,P]=b.useState("notes"),[I,N]=b.useState("medium"),[D,M]=b.useState(null),[L,V]=b.useState(""),[G,B]=b.useState("medium"),[j,F]=b.useState(!1),[$,O]=b.useState(""),U=Array.isArray(e)?e:[],q=Array.isArray(i)?i:[];b.useEffect(()=>{const ee=U.filter(gt=>!gt.mastered);r(le([...ee])),a(0),c(!1),g(ee.length),v(U.length-ee.length);const he=U.length,Le=he>0?Math.round(U.filter(gt=>gt.mastered).length/he*100):0;p(Le)},[e]);const le=ee=>{const he=[...ee];for(let Le=he.length-1;Le>0;Le--){const gt=Math.floor(Math.random()*(Le+1));[he[Le],he[gt]]=[he[gt],he[Le]]}return he},J=async()=>{if(q.length===0)return;const ee=q[o];try{const he=q.filter(Nr=>Nr.id!==ee.id);r(he),g(he.length),v(w+1);const Le=U.length,gt=Le>0?Math.round((w+1)/Le*100):0;p(gt),c(!1),a(o>=he.length?0:o),_({title:"Marked as mastered",description:"You've mastered this flashcard!"})}catch{_({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},se=()=>{if(q.length===0)return;const ee=[...q],he=ee.splice(o,1)[0];ee.push(he),r(ee),c(!1),a(o>=ee.length-1?0:o)},me=()=>{c(!1),a((o+1)%q.length)},Ne=()=>{c(!1),a((o-1+q.length)%q.length)},$e=()=>{const ee=le([...U]);r(ee),a(0),c(!1),g(ee.length),v(0),p(0)},z=async()=>{_({title:"Not implemented",description:"Study material generation is not available in this version.",variant:"destructive"})},ke=async()=>{F(!0),O("");try{const ee=(s||[]).map(Le=>({id:Le.id,name:Le.name,type:Le.type,content:Le.content||""})),he=await Pte(ee,L,G);O(he)}catch{_({title:"Error",description:"Failed to generate long answer.",variant:"destructive"})}finally{F(!1)}};return y.jsxs("div",{children:[y.jsxs(X2,{defaultValue:"longAnswer",className:"w-full",children:[y.jsxs(sA,{className:"w-full mb-6",children:[y.jsxs(So,{value:"flashcards",className:"flex-1",children:[y.jsx(z0,{className:"h-4 w-4 mr-2"}),"Flashcards"]}),y.jsxs(So,{value:"longAnswer",className:"flex-1",children:[y.jsx(n3,{className:"h-4 w-4 mr-2"}),"Ask Questions"]}),y.jsxs(So,{value:"material",className:"flex-1",children:[y.jsx(ok,{className:"h-4 w-4 mr-2"}),"Study Materials"]})]}),y.jsxs(bo,{value:"flashcards",children:[y.jsx("div",{className:"flex justify-between items-center mb-6",children:y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcard Review"}),y.jsx("p",{className:"text-gray-600",children:"Practice your flashcards until you master them"})]})}),y.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-sm font-medium",children:"Mastery Progress"}),y.jsxs("span",{className:"text-sm font-medium",children:[u,"%"]})]}),y.jsx(mB,{value:u,className:"h-2"}),y.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:w})," mastered"]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:m})," remaining"]})]})]}),q.length>0?y.jsxs("div",{children:[y.jsx("div",{className:"flex justify-center mb-8",children:y.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>c(!l),children:y.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${l?"rotate-y-180":""}`,children:[y.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:y.jsx("span",{className:"text-purple-600 font-semibold",children:o+1})}),y.jsx("p",{className:"text-center text-xl font-medium",children:(tt=q[o])==null?void 0:tt.front}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),y.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[y.jsx("p",{className:"text-center text-lg",children:(Me=q[o])==null?void 0:Me.back}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs(pe,{variant:"outline",onClick:Ne,disabled:q.length<=1,className:"flex items-center",children:[y.jsx(hD,{className:"mr-2 h-4 w-4"}),"Previous"]}),y.jsxs(pe,{variant:"outline",onClick:me,disabled:q.length<=1,className:"flex items-center",children:["Next",y.jsx(e3,{className:"ml-2 h-4 w-4"})]})]}),y.jsxs("div",{className:"flex gap-4 justify-center",children:[y.jsxs(pe,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 flex-1 md:flex-none",onClick:se,children:[y.jsx(lx,{className:"mr-2 h-4 w-4"}),"Need More Practice"]}),y.jsxs(pe,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 flex-1 md:flex-none",onClick:J,children:[y.jsx(Au,{className:"mr-2 h-4 w-4"}),"Mark as Mastered"]})]})]}):U.length===0?y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx(z0,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards to learn"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create flashcards first in the Flashcards tab"})]}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-purple-50",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:y.jsx(Au,{className:"h-8 w-8 text-purple-600"})}),y.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All cards mastered!"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Congratulations! You've mastered all your flashcards."}),y.jsx(pe,{className:"gradient-bg",onClick:$e,children:"Restart All Cards"})]})]}),y.jsx(bo,{value:"longAnswer",children:y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ask a Long-Form Question"}),y.jsxs("div",{className:"mb-4",children:[y.jsx(wt,{htmlFor:"question",children:"Your Question"}),y.jsx(tA,{id:"question",value:L,onChange:ee=>V(ee.target.value),placeholder:"Type your question about the study materials...",rows:3,className:"mt-2"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx(wt,{htmlFor:"complexity",children:"Answer Complexity"}),y.jsxs(pA,{value:G,onValueChange:B,children:[y.jsx(Vx,{className:"mt-2",children:y.jsx(mA,{placeholder:"Select complexity"})}),y.jsxs(jx,{children:[y.jsx(Tr,{value:"easy",children:"Easy"}),y.jsx(Tr,{value:"medium",children:"Medium"}),y.jsx(Tr,{value:"hard",children:"Hard"})]})]})]}),y.jsx(pe,{onClick:ke,disabled:!L.trim()||j,className:"mb-4",children:j?"Generating...":"Generate Long Answer"}),$&&y.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border",children:[y.jsx("h3",{className:"font-bold mb-2",children:"Answer"}),y.jsx("div",{className:"whitespace-pre-line text-gray-800",children:$})]})]})}),y.jsxs(bo,{value:"material",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-2xl font-semibold",children:"Study Materials"}),s.length>0&&y.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),y.jsxs("span",{children:[s.length," file",s.length>1?"s":""," available"]})]})]}),y.jsx("p",{className:"text-gray-600",children:"Generate study materials and practice with flashcards"})]}),t.length>0||D?y.jsxs("div",{className:"mb-6",children:[D&&y.jsxs(wu,{className:"mb-6",children:[y.jsx(xu,{children:y.jsx(Gd,{children:D.title})}),y.jsx(_u,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:D.content.replace(/\n/g,"<br>")}})})})]}),t.map(ee=>y.jsxs(wu,{className:"mb-6",children:[y.jsx(xu,{children:y.jsx(Gd,{children:ee.title})}),y.jsx(_u,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:ee.content.replace(/\n/g,"<br>")}})})})]},ee.id))]}):y.jsxs("div",{className:"text-center py-10 border rounded-lg bg-gray-50 mb-6",children:[y.jsx(ok,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No study materials yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate comprehensive study materials below"})]}),y.jsxs(wu,{children:[y.jsx(xu,{children:y.jsx(Gd,{children:"Generate New Study Material"})}),y.jsx(_u,{children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(wt,{htmlFor:"topic",children:"Topic"}),y.jsx(Nu,{id:"topic",placeholder:"Enter topic (e.g., 'The Holocaust and World War II')",value:C,onChange:ee=>T(ee.target.value)})]}),y.jsxs("div",{children:[y.jsx(wt,{children:"Format"}),y.jsxs(hw,{value:k,onValueChange:ee=>P(ee),className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(la,{value:"notes",id:"notes"}),y.jsx(wt,{htmlFor:"notes",children:"Notes"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(la,{value:"outline",id:"outline"}),y.jsx(wt,{htmlFor:"outline",children:"Outline"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(la,{value:"summary",id:"summary"}),y.jsx(wt,{htmlFor:"summary",children:"Summary"})]})]})]}),y.jsxs("div",{children:[y.jsx(wt,{children:"Complexity"}),y.jsxs(hw,{value:I,onValueChange:N,className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(la,{value:"simple",id:"simple"}),y.jsx(wt,{htmlFor:"simple",children:"Simple"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(la,{value:"medium",id:"medium"}),y.jsx(wt,{htmlFor:"medium",children:"Medium"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(la,{value:"advanced",id:"advanced"}),y.jsx(wt,{htmlFor:"advanced",children:"Advanced"})]})]})]}),y.jsx(pe,{onClick:z,disabled:x,className:"w-full",children:x?"Generating...":y.jsxs(y.Fragment,{children:[y.jsx(c3,{className:"mr-2 h-4 w-4"}),"Generate Study Material"]})})]})})]})]})]}),y.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}function sre(){const{id:n}=zH(),e=py(),{toast:t}=Ho(),[s,i]=b.useState(null),[r,o]=b.useState("files"),a=Dl(),{isLoading:l,error:c,data:u}=uL({queryKey:["session",n],queryFn:async()=>{const p=await Ys.getSession(n??"");if(p.error||!p.session)throw new Error(p.error||"Session not found");return{id:p.session.id,title:p.session.title,description:p.session.description||"",createdat:p.session.created_at,updatedat:p.session.updated_at,files:[],flashcardSets:[],quizzes:[],studyMaterials:[]}},enabled:!!n,retry:1,retryDelay:1e3});return b.useEffect(()=>{u?(console.log("Session query success:",{id:n,data:u}),i(u)):c?(console.error("Session query error:",{id:n,error:c}),t({title:"Error",description:"Failed to load study session",variant:"destructive"}),e("/sessions")):!l&&!u&&(console.log("Session not found for ID:",n),t({title:"Error",description:"Study session not found",variant:"destructive"}),e("/sessions"))},[u,c,l,n,e,t]),l?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Hd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})]}):s?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Hd,{}),y.jsxs("div",{ref:a,className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs(pe,{variant:"outline",className:"mb-4",onClick:()=>e("/sessions"),children:[y.jsx(hD,{className:"mr-2 h-4 w-4"}),"Back to Sessions"]}),y.jsx("h1",{className:"text-3xl font-bold",children:s.title}),y.jsx("p",{className:"text-gray-600 mt-1",children:s.description})]}),y.jsxs(X2,{value:r,onValueChange:o,children:[y.jsxs(sA,{className:"grid grid-cols-5 mb-8",children:[y.jsxs(So,{value:"files",className:"flex items-center",children:[y.jsx(l3,{className:"mr-2 h-4 w-4"}),"Files"]}),y.jsxs(So,{value:"flashcards",className:"flex items-center",children:[y.jsx(t3,{className:"mr-2 h-4 w-4"}),"Flashcards"]}),y.jsxs(So,{value:"quiz",className:"flex items-center",children:[y.jsx(Au,{className:"mr-2 h-4 w-4"}),"Quiz"]}),y.jsxs(So,{value:"learn",className:"flex items-center",children:[y.jsx(z0,{className:"mr-2 h-4 w-4"}),"Learn"]}),y.jsxs(So,{value:"chat",className:"flex items-center",children:[y.jsx(u3,{className:"mr-2 h-4 w-4"}),"Chat"]})]}),y.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[y.jsx(bo,{value:"files",children:y.jsx(Kie,{sessionId:s.id,files:s.files,onFileAdded:p=>{i({...s,files:[...s.files,p]})}})}),y.jsx(bo,{value:"flashcards",children:y.jsx(Tne,{flashcardSets:s.flashcardSets,onCreateSet:p=>{i({...s,flashcardSets:[...s.flashcardSets,p]})},onUpdateSet:p=>{i({...s,flashcardSets:s.flashcardSets.map(m=>m.id===p.id?p:m)})}})}),y.jsx(bo,{value:"quiz",children:y.jsx(Hne,{sessionId:s.id,quizzes:s.quizzes,files:s.files,flashcards:s.flashcards,onQuizAdded:p=>{i({...s,quizzes:[...s.quizzes,{...p,id:`quiz_${Date.now()}`}]})}})}),y.jsx(bo,{value:"learn",children:y.jsx(nre,{sessionId:s.id,flashcards:s.flashcards,studyMaterials:s.studyMaterials||[],files:s.files})}),y.jsx(bo,{value:"chat",children:y.jsx(ese,{files:s.files.map(p=>({id:p.id,name:p.name,type:p.type,content:p.content||""}))})})]})]})]})]}):y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(Hd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:"Session not found"}),y.jsx(pe,{variant:"outline",className:"mt-4",onClick:()=>e("/sessions"),children:"Go back to sessions"})]})})]})}const ire=new $z,rre=()=>y.jsx(Hz,{client:ire,children:y.jsxs(Cz,{children:[y.jsx(g3,{}),y.jsx(K3,{}),y.jsx(nW,{children:y.jsx(P6,{children:y.jsxs(o6,{children:[y.jsx(ud,{path:"/",element:y.jsx(y8,{})}),y.jsxs(ud,{element:y.jsx(sW,{redirectTo:"/"}),children:[y.jsx(ud,{path:"/sessions",element:y.jsx(C8,{})}),y.jsx(ud,{path:"/session/:id",element:y.jsx(sre,{})})]}),y.jsx(ud,{path:"*",element:y.jsx(v8,{})})]})})})]})});localStorage.removeItem("quiz_io_current_user");rC.createRoot(document.getElementById("root")).render(y.jsx(Y.StrictMode,{children:y.jsx(rre,{})}));
