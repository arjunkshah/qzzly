var U4=Object.defineProperty;var Mk=n=>{throw TypeError(n)};var $4=(n,e,t)=>e in n?U4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Z=(n,e,t)=>$4(n,typeof e!="symbol"?e+"":e,t),g_=(n,e,t)=>e.has(n)||Mk("Cannot "+t);var d=(n,e,t)=>(g_(n,e,"read from private field"),t?t.call(n):e.get(n)),k=(n,e,t)=>e.has(n)?Mk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),E=(n,e,t,r)=>(g_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),R=(n,e,t)=>(g_(n,e,"access private method"),t);var un=(n,e,t,r)=>({set _(s){E(n,e,s,t)},get _(){return d(n,e,r)}});function j4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var As=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function V4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var kM={exports:{}},sb={},RM={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),B4=Symbol.for("react.portal"),z4=Symbol.for("react.fragment"),H4=Symbol.for("react.strict_mode"),G4=Symbol.for("react.profiler"),q4=Symbol.for("react.provider"),W4=Symbol.for("react.context"),K4=Symbol.for("react.forward_ref"),Y4=Symbol.for("react.suspense"),J4=Symbol.for("react.memo"),X4=Symbol.for("react.lazy"),Dk=Symbol.iterator;function Q4(n){return n===null||typeof n!="object"?null:(n=Dk&&n[Dk]||n["@@iterator"],typeof n=="function"?n:null)}var PM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NM=Object.assign,IM={};function Ep(n,e,t){this.props=n,this.context=e,this.refs=IM,this.updater=t||PM}Ep.prototype.isReactComponent={};Ep.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ep.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function MM(){}MM.prototype=Ep.prototype;function YT(n,e,t){this.props=n,this.context=e,this.refs=IM,this.updater=t||PM}var JT=YT.prototype=new MM;JT.constructor=YT;NM(JT,Ep.prototype);JT.isPureReactComponent=!0;var Lk=Array.isArray,DM=Object.prototype.hasOwnProperty,XT={current:null},LM={key:!0,ref:!0,__self:!0,__source:!0};function FM(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)DM.call(e,r)&&!LM.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:fv,type:n,key:i,ref:o,props:s,_owner:XT.current}}function Z4(n,e){return{$$typeof:fv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function QT(n){return typeof n=="object"&&n!==null&&n.$$typeof===fv}function e3(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Fk=/\/+/g;function y_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?e3(""+n.key):e.toString(36)}function R0(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case fv:case B4:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+y_(o,0):r,Lk(s)?(t="",n!=null&&(t=n.replace(Fk,"$&/")+"/"),R0(s,e,t,"",function(c){return c})):s!=null&&(QT(s)&&(s=Z4(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fk,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Lk(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+y_(i,a);o+=R0(i,e,t,l,s)}else if(l=Q4(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+y_(i,a++),o+=R0(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bv(n,e,t){if(n==null)return n;var r=[],s=0;return R0(n,r,"","",function(i){return e.call(t,i,s++)}),r}function t3(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ur={current:null},P0={transition:null},n3={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:P0,ReactCurrentOwner:XT};function OM(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Bv,forEach:function(n,e,t){Bv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Bv(n,function(){e++}),e},toArray:function(n){return Bv(n,function(e){return e})||[]},only:function(n){if(!QT(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};He.Component=Ep;He.Fragment=z4;He.Profiler=G4;He.PureComponent=YT;He.StrictMode=H4;He.Suspense=Y4;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n3;He.act=OM;He.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=NM({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=XT.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)DM.call(e,l)&&!LM.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fv,type:n.type,key:s,ref:i,props:r,_owner:o}};He.createContext=function(n){return n={$$typeof:W4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:q4,_context:n},n.Consumer=n};He.createElement=FM;He.createFactory=function(n){var e=FM.bind(null,n);return e.type=n,e};He.createRef=function(){return{current:null}};He.forwardRef=function(n){return{$$typeof:K4,render:n}};He.isValidElement=QT;He.lazy=function(n){return{$$typeof:X4,_payload:{_status:-1,_result:n},_init:t3}};He.memo=function(n,e){return{$$typeof:J4,type:n,compare:e===void 0?null:e}};He.startTransition=function(n){var e=P0.transition;P0.transition={};try{n()}finally{P0.transition=e}};He.unstable_act=OM;He.useCallback=function(n,e){return ur.current.useCallback(n,e)};He.useContext=function(n){return ur.current.useContext(n)};He.useDebugValue=function(){};He.useDeferredValue=function(n){return ur.current.useDeferredValue(n)};He.useEffect=function(n,e){return ur.current.useEffect(n,e)};He.useId=function(){return ur.current.useId()};He.useImperativeHandle=function(n,e,t){return ur.current.useImperativeHandle(n,e,t)};He.useInsertionEffect=function(n,e){return ur.current.useInsertionEffect(n,e)};He.useLayoutEffect=function(n,e){return ur.current.useLayoutEffect(n,e)};He.useMemo=function(n,e){return ur.current.useMemo(n,e)};He.useReducer=function(n,e,t){return ur.current.useReducer(n,e,t)};He.useRef=function(n){return ur.current.useRef(n)};He.useState=function(n){return ur.current.useState(n)};He.useSyncExternalStore=function(n,e,t){return ur.current.useSyncExternalStore(n,e,t)};He.useTransition=function(){return ur.current.useTransition()};He.version="18.3.1";RM.exports=He;var S=RM.exports;const K=AM(S),UM=j4({__proto__:null,default:K},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=S,s3=Symbol.for("react.element"),i3=Symbol.for("react.fragment"),o3=Object.prototype.hasOwnProperty,a3=r3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l3={key:!0,ref:!0,__self:!0,__source:!0};function $M(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)o3.call(e,r)&&!l3.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:s3,type:n,key:i,ref:o,props:s,_owner:a3.current}}sb.Fragment=i3;sb.jsx=$M;sb.jsxs=$M;kM.exports=sb;var g=kM.exports,EC={},jM={exports:{}},os={},VM={exports:{}},BM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,U){var H=V.length;V.push(U);e:for(;0<H;){var Q=H-1>>>1,J=V[Q];if(0<s(J,U))V[Q]=U,V[H]=J,H=Q;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var U=V[0],H=V.pop();if(H!==U){V[0]=H;e:for(var Q=0,J=V.length,re=J>>>1;Q<re;){var ye=2*(Q+1)-1,Me=V[ye],De=ye+1,Y=V[De];if(0>s(Me,H))De<J&&0>s(Y,Me)?(V[Q]=Y,V[De]=H,Q=De):(V[Q]=Me,V[ye]=H,Q=ye);else if(De<J&&0>s(Y,H))V[Q]=Y,V[De]=H,Q=De;else break e}}return U}function s(V,U){var H=V.sortIndex-U.sortIndex;return H!==0?H:V.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,y=!1,w=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=V)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function T(V){if(v=!1,_(V),!w)if(t(l)!==null)w=!0,j(A);else{var U=t(c);U!==null&&z(T,U.startTime-V)}}function A(V,U){w=!1,v&&(v=!1,x(I),I=-1),y=!0;var H=m;try{for(_(U),f=t(l);f!==null&&(!(f.expirationTime>U)||V&&!F());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var J=Q(f.expirationTime<=U);U=n.unstable_now(),typeof J=="function"?f.callback=J:f===t(l)&&r(l),_(U)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var ye=t(c);ye!==null&&z(T,ye.startTime-U),re=!1}return re}finally{f=null,m=H,y=!1}}var P=!1,N=null,I=-1,M=5,D=-1;function F(){return!(n.unstable_now()-D<M)}function $(){if(N!==null){var V=n.unstable_now();D=V;var U=!0;try{U=N(!0,V)}finally{U?G():(P=!1,N=null)}}else P=!1}var G;if(typeof C=="function")G=function(){C($)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=$,G=function(){W.postMessage(null)}}else G=function(){b($,0)};function j(V){N=V,P||(P=!0,G())}function z(V,U){I=b(function(){V(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,j(A))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var H=m;m=U;try{return V()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,U){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var H=m;m=V;try{return U()}finally{m=H}},n.unstable_scheduleCallback=function(V,U,H){var Q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,V){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,V={id:u++,callback:U,priorityLevel:V,startTime:H,expirationTime:J,sortIndex:-1},H>Q?(V.sortIndex=H,e(c,V),t(l)===null&&V===t(c)&&(v?(x(I),I=-1):v=!0,z(T,H-Q))):(V.sortIndex=J,e(l,V),w||y||(w=!0,j(A))),V},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(V){var U=m;return function(){var H=m;m=U;try{return V.apply(this,arguments)}finally{m=H}}}})(BM);VM.exports=BM;var c3=VM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3=S,is=c3;function X(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zM=new Set,og={};function Fd(n,e){lp(n,e),lp(n+"Capture",e)}function lp(n,e){for(og[n]=e,n=0;n<e.length;n++)zM.add(e[n])}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TC=Object.prototype.hasOwnProperty,d3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ok={},Uk={};function h3(n){return TC.call(Uk,n)?!0:TC.call(Ok,n)?!1:d3.test(n)?Uk[n]=!0:(Ok[n]=!0,!1)}function f3(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function p3(n,e,t,r){if(e===null||typeof e>"u"||f3(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dr(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Mn[n]=new dr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Mn[e]=new dr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Mn[n]=new dr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Mn[n]=new dr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Mn[n]=new dr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Mn[n]=new dr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Mn[n]=new dr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Mn[n]=new dr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Mn[n]=new dr(n,5,!1,n.toLowerCase(),null,!1,!1)});var ZT=/[\-:]([a-z])/g;function eA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ZT,eA);Mn[e]=new dr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ZT,eA);Mn[e]=new dr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ZT,eA);Mn[e]=new dr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Mn[n]=new dr(n,1,!1,n.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Mn[n]=new dr(n,1,!1,n.toLowerCase(),null,!0,!0)});function tA(n,e,t,r){var s=Mn.hasOwnProperty(e)?Mn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(p3(e,t,s,r)&&(t=null),r||s===null?h3(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Fa=u3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zv=Symbol.for("react.element"),fh=Symbol.for("react.portal"),ph=Symbol.for("react.fragment"),nA=Symbol.for("react.strict_mode"),AC=Symbol.for("react.profiler"),HM=Symbol.for("react.provider"),GM=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),kC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),sA=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),qM=Symbol.for("react.offscreen"),$k=Symbol.iterator;function Wp(n){return n===null||typeof n!="object"?null:(n=$k&&n[$k]||n["@@iterator"],typeof n=="function"?n:null)}var Ft=Object.assign,v_;function hm(n){if(v_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);v_=e&&e[1]||""}return`
`+v_+n}var w_=!1;function x_(n,e){if(!n||w_)return"";w_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{w_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?hm(n):""}function m3(n){switch(n.tag){case 5:return hm(n.type);case 16:return hm("Lazy");case 13:return hm("Suspense");case 19:return hm("SuspenseList");case 0:case 2:case 15:return n=x_(n.type,!1),n;case 11:return n=x_(n.type.render,!1),n;case 1:return n=x_(n.type,!0),n;default:return""}}function PC(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ph:return"Fragment";case fh:return"Portal";case AC:return"Profiler";case nA:return"StrictMode";case kC:return"Suspense";case RC:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case GM:return(n.displayName||"Context")+".Consumer";case HM:return(n._context.displayName||"Context")+".Provider";case rA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sA:return e=n.displayName||null,e!==null?e:PC(n.type)||"Memo";case Xa:e=n._payload,n=n._init;try{return PC(n(e))}catch{}}return null}function g3(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PC(e);case 8:return e===nA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function WM(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function y3(n){var e=WM(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Hv(n){n._valueTracker||(n._valueTracker=y3(n))}function KM(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=WM(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Pw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function NC(n,e){var t=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function jk(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=fc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YM(n,e){e=e.checked,e!=null&&tA(n,"checked",e,!1)}function IC(n,e){YM(n,e);var t=fc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?MC(n,e.type,t):e.hasOwnProperty("defaultValue")&&MC(n,e.type,fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Vk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function MC(n,e,t){(e!=="number"||Pw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fm=Array.isArray;function Ph(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+fc(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function DC(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bk(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(X(92));if(fm(t)){if(1<t.length)throw Error(X(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:fc(t)}}function JM(n,e){var t=fc(e.value),r=fc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function zk(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function XM(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function LC(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?XM(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gv,QM=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gv=Gv||document.createElement("div"),Gv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ag(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v3=["Webkit","ms","Moz","O"];Object.keys(Bm).forEach(function(n){v3.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bm[e]=Bm[n]})});function ZM(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bm.hasOwnProperty(n)&&Bm[n]?(""+e).trim():e+"px"}function eD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=ZM(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var w3=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FC(n,e){if(e){if(w3[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function OC(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UC=null;function iA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $C=null,Nh=null,Ih=null;function Hk(n){if(n=gv(n)){if(typeof $C!="function")throw Error(X(280));var e=n.stateNode;e&&(e=cb(e),$C(n.stateNode,n.type,e))}}function tD(n){Nh?Ih?Ih.push(n):Ih=[n]:Nh=n}function nD(){if(Nh){var n=Nh,e=Ih;if(Ih=Nh=null,Hk(n),e)for(n=0;n<e.length;n++)Hk(e[n])}}function rD(n,e){return n(e)}function sD(){}var b_=!1;function iD(n,e,t){if(b_)return n(e,t);b_=!0;try{return rD(n,e,t)}finally{b_=!1,(Nh!==null||Ih!==null)&&(sD(),nD())}}function lg(n,e){var t=n.stateNode;if(t===null)return null;var r=cb(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(X(231,e,typeof t));return t}var jC=!1;if(Aa)try{var Kp={};Object.defineProperty(Kp,"passive",{get:function(){jC=!0}}),window.addEventListener("test",Kp,Kp),window.removeEventListener("test",Kp,Kp)}catch{jC=!1}function x3(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var zm=!1,Nw=null,Iw=!1,VC=null,b3={onError:function(n){zm=!0,Nw=n}};function _3(n,e,t,r,s,i,o,a,l){zm=!1,Nw=null,x3.apply(b3,arguments)}function C3(n,e,t,r,s,i,o,a,l){if(_3.apply(this,arguments),zm){if(zm){var c=Nw;zm=!1,Nw=null}else throw Error(X(198));Iw||(Iw=!0,VC=c)}}function Od(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function oD(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Gk(n){if(Od(n)!==n)throw Error(X(188))}function S3(n){var e=n.alternate;if(!e){if(e=Od(n),e===null)throw Error(X(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return Gk(s),n;if(i===r)return Gk(s),e;i=i.sibling}throw Error(X(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(X(189))}}if(t.alternate!==r)throw Error(X(190))}if(t.tag!==3)throw Error(X(188));return t.stateNode.current===t?n:e}function aD(n){return n=S3(n),n!==null?lD(n):null}function lD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=lD(n);if(e!==null)return e;n=n.sibling}return null}var cD=is.unstable_scheduleCallback,qk=is.unstable_cancelCallback,E3=is.unstable_shouldYield,T3=is.unstable_requestPaint,zt=is.unstable_now,A3=is.unstable_getCurrentPriorityLevel,oA=is.unstable_ImmediatePriority,uD=is.unstable_UserBlockingPriority,Mw=is.unstable_NormalPriority,k3=is.unstable_LowPriority,dD=is.unstable_IdlePriority,ib=null,io=null;function R3(n){if(io&&typeof io.onCommitFiberRoot=="function")try{io.onCommitFiberRoot(ib,n,void 0,(n.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:I3,P3=Math.log,N3=Math.LN2;function I3(n){return n>>>=0,n===0?32:31-(P3(n)/N3|0)|0}var qv=64,Wv=4194304;function pm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Dw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=pm(a):(i&=o,i!==0&&(r=pm(i)))}else o=t&~s,o!==0?r=pm(o):i!==0&&(r=pm(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-di(e),s=1<<t,r|=n[t],e&=~s;return r}function M3(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D3(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-di(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=M3(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function BC(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hD(){var n=qv;return qv<<=1,!(qv&4194240)&&(qv=64),n}function __(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function pv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-di(e),n[e]=t}function L3(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-di(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function aA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-di(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var at=0;function fD(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var pD,lA,mD,gD,yD,zC=!1,Kv=[],tc=null,nc=null,rc=null,cg=new Map,ug=new Map,tl=[],F3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wk(n,e){switch(n){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":cg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ug.delete(e.pointerId)}}function Yp(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gv(e),e!==null&&lA(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function O3(n,e,t,r,s){switch(e){case"focusin":return tc=Yp(tc,n,e,t,r,s),!0;case"dragenter":return nc=Yp(nc,n,e,t,r,s),!0;case"mouseover":return rc=Yp(rc,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return cg.set(i,Yp(cg.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ug.set(i,Yp(ug.get(i)||null,n,e,t,r,s)),!0}return!1}function vD(n){var e=Bc(n.target);if(e!==null){var t=Od(e);if(t!==null){if(e=t.tag,e===13){if(e=oD(t),e!==null){n.blockedOn=e,yD(n.priority,function(){mD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function N0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=HC(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);UC=r,t.target.dispatchEvent(r),UC=null}else return e=gv(t),e!==null&&lA(e),n.blockedOn=t,!1;e.shift()}return!0}function Kk(n,e,t){N0(n)&&t.delete(e)}function U3(){zC=!1,tc!==null&&N0(tc)&&(tc=null),nc!==null&&N0(nc)&&(nc=null),rc!==null&&N0(rc)&&(rc=null),cg.forEach(Kk),ug.forEach(Kk)}function Jp(n,e){n.blockedOn===e&&(n.blockedOn=null,zC||(zC=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,U3)))}function dg(n){function e(s){return Jp(s,n)}if(0<Kv.length){Jp(Kv[0],n);for(var t=1;t<Kv.length;t++){var r=Kv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(tc!==null&&Jp(tc,n),nc!==null&&Jp(nc,n),rc!==null&&Jp(rc,n),cg.forEach(e),ug.forEach(e),t=0;t<tl.length;t++)r=tl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<tl.length&&(t=tl[0],t.blockedOn===null);)vD(t),t.blockedOn===null&&tl.shift()}var Mh=Fa.ReactCurrentBatchConfig,Lw=!0;function $3(n,e,t,r){var s=at,i=Mh.transition;Mh.transition=null;try{at=1,cA(n,e,t,r)}finally{at=s,Mh.transition=i}}function j3(n,e,t,r){var s=at,i=Mh.transition;Mh.transition=null;try{at=4,cA(n,e,t,r)}finally{at=s,Mh.transition=i}}function cA(n,e,t,r){if(Lw){var s=HC(n,e,t,r);if(s===null)I_(n,e,r,Fw,t),Wk(n,r);else if(O3(s,n,e,t,r))r.stopPropagation();else if(Wk(n,r),e&4&&-1<F3.indexOf(n)){for(;s!==null;){var i=gv(s);if(i!==null&&pD(i),i=HC(n,e,t,r),i===null&&I_(n,e,r,Fw,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else I_(n,e,r,null,t)}}var Fw=null;function HC(n,e,t,r){if(Fw=null,n=iA(r),n=Bc(n),n!==null)if(e=Od(n),e===null)n=null;else if(t=e.tag,t===13){if(n=oD(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Fw=n,null}function wD(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A3()){case oA:return 1;case uD:return 4;case Mw:case k3:return 16;case dD:return 536870912;default:return 16}default:return 16}}var Zl=null,uA=null,I0=null;function xD(){if(I0)return I0;var n,e=uA,t=e.length,r,s="value"in Zl?Zl.value:Zl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return I0=s.slice(n,1<r?1-r:void 0)}function M0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Yv(){return!0}function Yk(){return!1}function as(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yv:Yk,this.isPropagationStopped=Yk,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Yv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Yv)},persist:function(){},isPersistent:Yv}),e}var Tp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dA=as(Tp),mv=Ft({},Tp,{view:0,detail:0}),V3=as(mv),C_,S_,Xp,ob=Ft({},mv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xp&&(Xp&&n.type==="mousemove"?(C_=n.screenX-Xp.screenX,S_=n.screenY-Xp.screenY):S_=C_=0,Xp=n),C_)},movementY:function(n){return"movementY"in n?n.movementY:S_}}),Jk=as(ob),B3=Ft({},ob,{dataTransfer:0}),z3=as(B3),H3=Ft({},mv,{relatedTarget:0}),E_=as(H3),G3=Ft({},Tp,{animationName:0,elapsedTime:0,pseudoElement:0}),q3=as(G3),W3=Ft({},Tp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),K3=as(W3),Y3=Ft({},Tp,{data:0}),Xk=as(Y3),J3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Q3[n])?!!e[n]:!1}function hA(){return Z3}var e5=Ft({},mv,{key:function(n){if(n.key){var e=J3[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=M0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?X3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hA,charCode:function(n){return n.type==="keypress"?M0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?M0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),t5=as(e5),n5=Ft({},ob,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qk=as(n5),r5=Ft({},mv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hA}),s5=as(r5),i5=Ft({},Tp,{propertyName:0,elapsedTime:0,pseudoElement:0}),o5=as(i5),a5=Ft({},ob,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),l5=as(a5),c5=[9,13,27,32],fA=Aa&&"CompositionEvent"in window,Hm=null;Aa&&"documentMode"in document&&(Hm=document.documentMode);var u5=Aa&&"TextEvent"in window&&!Hm,bD=Aa&&(!fA||Hm&&8<Hm&&11>=Hm),Zk=" ",eR=!1;function _D(n,e){switch(n){case"keyup":return c5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mh=!1;function d5(n,e){switch(n){case"compositionend":return CD(e);case"keypress":return e.which!==32?null:(eR=!0,Zk);case"textInput":return n=e.data,n===Zk&&eR?null:n;default:return null}}function h5(n,e){if(mh)return n==="compositionend"||!fA&&_D(n,e)?(n=xD(),I0=uA=Zl=null,mh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bD&&e.locale!=="ko"?null:e.data;default:return null}}var f5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!f5[n.type]:e==="textarea"}function SD(n,e,t,r){tD(r),e=Ow(e,"onChange"),0<e.length&&(t=new dA("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Gm=null,hg=null;function p5(n){LD(n,0)}function ab(n){var e=vh(n);if(KM(e))return n}function m5(n,e){if(n==="change")return e}var ED=!1;if(Aa){var T_;if(Aa){var A_="oninput"in document;if(!A_){var nR=document.createElement("div");nR.setAttribute("oninput","return;"),A_=typeof nR.oninput=="function"}T_=A_}else T_=!1;ED=T_&&(!document.documentMode||9<document.documentMode)}function rR(){Gm&&(Gm.detachEvent("onpropertychange",TD),hg=Gm=null)}function TD(n){if(n.propertyName==="value"&&ab(hg)){var e=[];SD(e,hg,n,iA(n)),iD(p5,e)}}function g5(n,e,t){n==="focusin"?(rR(),Gm=e,hg=t,Gm.attachEvent("onpropertychange",TD)):n==="focusout"&&rR()}function y5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ab(hg)}function v5(n,e){if(n==="click")return ab(e)}function w5(n,e){if(n==="input"||n==="change")return ab(e)}function x5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fi=typeof Object.is=="function"?Object.is:x5;function fg(n,e){if(fi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!TC.call(e,s)||!fi(n[s],e[s]))return!1}return!0}function sR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iR(n,e){var t=sR(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=sR(t)}}function AD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?AD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kD(){for(var n=window,e=Pw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Pw(n.document)}return e}function pA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function b5(n){var e=kD(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&AD(t.ownerDocument.documentElement,t)){if(r!==null&&pA(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=iR(t,i);var o=iR(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _5=Aa&&"documentMode"in document&&11>=document.documentMode,gh=null,GC=null,qm=null,qC=!1;function oR(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qC||gh==null||gh!==Pw(r)||(r=gh,"selectionStart"in r&&pA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qm&&fg(qm,r)||(qm=r,r=Ow(GC,"onSelect"),0<r.length&&(e=new dA("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=gh)))}function Jv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yh={animationend:Jv("Animation","AnimationEnd"),animationiteration:Jv("Animation","AnimationIteration"),animationstart:Jv("Animation","AnimationStart"),transitionend:Jv("Transition","TransitionEnd")},k_={},RD={};Aa&&(RD=document.createElement("div").style,"AnimationEvent"in window||(delete yh.animationend.animation,delete yh.animationiteration.animation,delete yh.animationstart.animation),"TransitionEvent"in window||delete yh.transitionend.transition);function lb(n){if(k_[n])return k_[n];if(!yh[n])return n;var e=yh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in RD)return k_[n]=e[t];return n}var PD=lb("animationend"),ND=lb("animationiteration"),ID=lb("animationstart"),MD=lb("transitionend"),DD=new Map,aR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cc(n,e){DD.set(n,e),Fd(e,[n])}for(var R_=0;R_<aR.length;R_++){var P_=aR[R_],C5=P_.toLowerCase(),S5=P_[0].toUpperCase()+P_.slice(1);Cc(C5,"on"+S5)}Cc(PD,"onAnimationEnd");Cc(ND,"onAnimationIteration");Cc(ID,"onAnimationStart");Cc("dblclick","onDoubleClick");Cc("focusin","onFocus");Cc("focusout","onBlur");Cc(MD,"onTransitionEnd");lp("onMouseEnter",["mouseout","mouseover"]);lp("onMouseLeave",["mouseout","mouseover"]);lp("onPointerEnter",["pointerout","pointerover"]);lp("onPointerLeave",["pointerout","pointerover"]);Fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E5=new Set("cancel close invalid load scroll toggle".split(" ").concat(mm));function lR(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,C3(r,e,void 0,n),n.currentTarget=null}function LD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;lR(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;lR(s,a,c),i=l}}}if(Iw)throw n=VC,Iw=!1,VC=null,n}function xt(n,e){var t=e[XC];t===void 0&&(t=e[XC]=new Set);var r=n+"__bubble";t.has(r)||(FD(e,n,2,!1),t.add(r))}function N_(n,e,t){var r=0;e&&(r|=4),FD(t,n,r,e)}var Xv="_reactListening"+Math.random().toString(36).slice(2);function pg(n){if(!n[Xv]){n[Xv]=!0,zM.forEach(function(t){t!=="selectionchange"&&(E5.has(t)||N_(t,!1,n),N_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Xv]||(e[Xv]=!0,N_("selectionchange",!1,e))}}function FD(n,e,t,r){switch(wD(e)){case 1:var s=$3;break;case 4:s=j3;break;default:s=cA}t=s.bind(null,e,t,n),s=void 0,!jC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function I_(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bc(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}iD(function(){var c=i,u=iA(t),f=[];e:{var m=DD.get(n);if(m!==void 0){var y=dA,w=n;switch(n){case"keypress":if(M0(t)===0)break e;case"keydown":case"keyup":y=t5;break;case"focusin":w="focus",y=E_;break;case"focusout":w="blur",y=E_;break;case"beforeblur":case"afterblur":y=E_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Jk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=z3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=s5;break;case PD:case ND:case ID:y=q3;break;case MD:y=o5;break;case"scroll":y=V3;break;case"wheel":y=l5;break;case"copy":case"cut":case"paste":y=K3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Qk}var v=(e&4)!==0,b=!v&&n==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var C=c,_;C!==null;){_=C;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,x!==null&&(T=lg(C,x),T!=null&&v.push(mg(C,T,_)))),b)break;C=C.return}0<v.length&&(m=new y(m,w,null,t,u),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",m&&t!==UC&&(w=t.relatedTarget||t.fromElement)&&(Bc(w)||w[ka]))break e;if((y||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=t.relatedTarget||t.toElement,y=c,w=w?Bc(w):null,w!==null&&(b=Od(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(v=Jk,T="onMouseLeave",x="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(v=Qk,T="onPointerLeave",x="onPointerEnter",C="pointer"),b=y==null?m:vh(y),_=w==null?m:vh(w),m=new v(T,C+"leave",y,t,u),m.target=b,m.relatedTarget=_,T=null,Bc(u)===c&&(v=new v(x,C+"enter",w,t,u),v.target=_,v.relatedTarget=b,T=v),b=T,y&&w)t:{for(v=y,x=w,C=0,_=v;_;_=Wd(_))C++;for(_=0,T=x;T;T=Wd(T))_++;for(;0<C-_;)v=Wd(v),C--;for(;0<_-C;)x=Wd(x),_--;for(;C--;){if(v===x||x!==null&&v===x.alternate)break t;v=Wd(v),x=Wd(x)}v=null}else v=null;y!==null&&cR(f,m,y,v,!1),w!==null&&b!==null&&cR(f,b,w,v,!0)}}e:{if(m=c?vh(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var A=m5;else if(tR(m))if(ED)A=w5;else{A=y5;var P=g5}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=v5);if(A&&(A=A(n,c))){SD(f,A,t,u);break e}P&&P(n,m,c),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&MC(m,"number",m.value)}switch(P=c?vh(c):window,n){case"focusin":(tR(P)||P.contentEditable==="true")&&(gh=P,GC=c,qm=null);break;case"focusout":qm=GC=gh=null;break;case"mousedown":qC=!0;break;case"contextmenu":case"mouseup":case"dragend":qC=!1,oR(f,t,u);break;case"selectionchange":if(_5)break;case"keydown":case"keyup":oR(f,t,u)}var N;if(fA)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else mh?_D(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(bD&&t.locale!=="ko"&&(mh||I!=="onCompositionStart"?I==="onCompositionEnd"&&mh&&(N=xD()):(Zl=u,uA="value"in Zl?Zl.value:Zl.textContent,mh=!0)),P=Ow(c,I),0<P.length&&(I=new Xk(I,n,null,t,u),f.push({event:I,listeners:P}),N?I.data=N:(N=CD(t),N!==null&&(I.data=N)))),(N=u5?d5(n,t):h5(n,t))&&(c=Ow(c,"onBeforeInput"),0<c.length&&(u=new Xk("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=N))}LD(f,e)})}function mg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ow(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lg(n,t),i!=null&&r.unshift(mg(n,i,s)),i=lg(n,e),i!=null&&r.push(mg(n,i,s))),n=n.return}return r}function Wd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function cR(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=lg(t,i),l!=null&&o.unshift(mg(t,l,a))):s||(l=lg(t,i),l!=null&&o.push(mg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var T5=/\r\n?/g,A5=/\u0000|\uFFFD/g;function uR(n){return(typeof n=="string"?n:""+n).replace(T5,`
`).replace(A5,"")}function Qv(n,e,t){if(e=uR(e),uR(n)!==e&&t)throw Error(X(425))}function Uw(){}var WC=null,KC=null;function YC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JC=typeof setTimeout=="function"?setTimeout:void 0,k5=typeof clearTimeout=="function"?clearTimeout:void 0,dR=typeof Promise=="function"?Promise:void 0,R5=typeof queueMicrotask=="function"?queueMicrotask:typeof dR<"u"?function(n){return dR.resolve(null).then(n).catch(P5)}:JC;function P5(n){setTimeout(function(){throw n})}function M_(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),dg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);dg(e)}function sc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function hR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ap=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Ap,gg="__reactProps$"+Ap,ka="__reactContainer$"+Ap,XC="__reactEvents$"+Ap,N5="__reactListeners$"+Ap,I5="__reactHandles$"+Ap;function Bc(n){var e=n[Xi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ka]||t[Xi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=hR(n);n!==null;){if(t=n[Xi])return t;n=hR(n)}return e}n=t,t=n.parentNode}return null}function gv(n){return n=n[Xi]||n[ka],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(X(33))}function cb(n){return n[gg]||null}var QC=[],wh=-1;function Sc(n){return{current:n}}function Ct(n){0>wh||(n.current=QC[wh],QC[wh]=null,wh--)}function yt(n,e){wh++,QC[wh]=n.current,n.current=e}var pc={},qn=Sc(pc),Rr=Sc(!1),yd=pc;function cp(n,e){var t=n.type.contextTypes;if(!t)return pc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(n){return n=n.childContextTypes,n!=null}function $w(){Ct(Rr),Ct(qn)}function fR(n,e,t){if(qn.current!==pc)throw Error(X(168));yt(qn,e),yt(Rr,t)}function OD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,g3(n)||"Unknown",s));return Ft({},t,r)}function jw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pc,yd=qn.current,yt(qn,n),yt(Rr,Rr.current),!0}function pR(n,e,t){var r=n.stateNode;if(!r)throw Error(X(169));t?(n=OD(n,e,yd),r.__reactInternalMemoizedMergedChildContext=n,Ct(Rr),Ct(qn),yt(qn,n)):Ct(Rr),yt(Rr,t)}var Io=null,ub=!1,D_=!1;function UD(n){Io===null?Io=[n]:Io.push(n)}function M5(n){ub=!0,UD(n)}function Ec(){if(!D_&&Io!==null){D_=!0;var n=0,e=at;try{var t=Io;for(at=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Io=null,ub=!1}catch(s){throw Io!==null&&(Io=Io.slice(n+1)),cD(oA,Ec),s}finally{at=e,D_=!1}}return null}var xh=[],bh=0,Vw=null,Bw=0,vs=[],ws=0,vd=null,ga=1,ya="";function Ic(n,e){xh[bh++]=Bw,xh[bh++]=Vw,Vw=n,Bw=e}function $D(n,e,t){vs[ws++]=ga,vs[ws++]=ya,vs[ws++]=vd,vd=n;var r=ga;n=ya;var s=32-di(r)-1;r&=~(1<<s),t+=1;var i=32-di(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ga=1<<32-di(e)+s|t<<s|r,ya=i+n}else ga=1<<i|t<<s|r,ya=n}function mA(n){n.return!==null&&(Ic(n,1),$D(n,1,0))}function gA(n){for(;n===Vw;)Vw=xh[--bh],xh[bh]=null,Bw=xh[--bh],xh[bh]=null;for(;n===vd;)vd=vs[--ws],vs[ws]=null,ya=vs[--ws],vs[ws]=null,ga=vs[--ws],vs[ws]=null}var ns=null,ts=null,Rt=!1,ii=null;function jD(n,e){var t=bs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function mR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ns=n,ts=sc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ns=n,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vd!==null?{id:ga,overflow:ya}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=bs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ns=n,ts=null,!0):!1;default:return!1}}function ZC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function eS(n){if(Rt){var e=ts;if(e){var t=e;if(!mR(n,e)){if(ZC(n))throw Error(X(418));e=sc(t.nextSibling);var r=ns;e&&mR(n,e)?jD(r,t):(n.flags=n.flags&-4097|2,Rt=!1,ns=n)}}else{if(ZC(n))throw Error(X(418));n.flags=n.flags&-4097|2,Rt=!1,ns=n}}}function gR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ns=n}function Zv(n){if(n!==ns)return!1;if(!Rt)return gR(n),Rt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!YC(n.type,n.memoizedProps)),e&&(e=ts)){if(ZC(n))throw VD(),Error(X(418));for(;e;)jD(n,e),e=sc(e.nextSibling)}if(gR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(X(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ts=sc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ts=null}}else ts=ns?sc(n.stateNode.nextSibling):null;return!0}function VD(){for(var n=ts;n;)n=sc(n.nextSibling)}function up(){ts=ns=null,Rt=!1}function yA(n){ii===null?ii=[n]:ii.push(n)}var D5=Fa.ReactCurrentBatchConfig;function Qp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(X(309));var r=t.stateNode}if(!r)throw Error(X(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(X(284));if(!t._owner)throw Error(X(290,n))}return n}function e0(n,e){throw n=Object.prototype.toString.call(e),Error(X(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function yR(n){var e=n._init;return e(n._payload)}function BD(n){function e(x,C){if(n){var _=x.deletions;_===null?(x.deletions=[C],x.flags|=16):_.push(C)}}function t(x,C){if(!n)return null;for(;C!==null;)e(x,C),C=C.sibling;return null}function r(x,C){for(x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function s(x,C){return x=lc(x,C),x.index=0,x.sibling=null,x}function i(x,C,_){return x.index=_,n?(_=x.alternate,_!==null?(_=_.index,_<C?(x.flags|=2,C):_):(x.flags|=2,C)):(x.flags|=1048576,C)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,C,_,T){return C===null||C.tag!==6?(C=V_(_,x.mode,T),C.return=x,C):(C=s(C,_),C.return=x,C)}function l(x,C,_,T){var A=_.type;return A===ph?u(x,C,_.props.children,T,_.key):C!==null&&(C.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xa&&yR(A)===C.type)?(T=s(C,_.props),T.ref=Qp(x,C,_),T.return=x,T):(T=j0(_.type,_.key,_.props,null,x.mode,T),T.ref=Qp(x,C,_),T.return=x,T)}function c(x,C,_,T){return C===null||C.tag!==4||C.stateNode.containerInfo!==_.containerInfo||C.stateNode.implementation!==_.implementation?(C=B_(_,x.mode,T),C.return=x,C):(C=s(C,_.children||[]),C.return=x,C)}function u(x,C,_,T,A){return C===null||C.tag!==7?(C=md(_,x.mode,T,A),C.return=x,C):(C=s(C,_),C.return=x,C)}function f(x,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return C=V_(""+C,x.mode,_),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case zv:return _=j0(C.type,C.key,C.props,null,x.mode,_),_.ref=Qp(x,null,C),_.return=x,_;case fh:return C=B_(C,x.mode,_),C.return=x,C;case Xa:var T=C._init;return f(x,T(C._payload),_)}if(fm(C)||Wp(C))return C=md(C,x.mode,_,null),C.return=x,C;e0(x,C)}return null}function m(x,C,_,T){var A=C!==null?C.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(x,C,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zv:return _.key===A?l(x,C,_,T):null;case fh:return _.key===A?c(x,C,_,T):null;case Xa:return A=_._init,m(x,C,A(_._payload),T)}if(fm(_)||Wp(_))return A!==null?null:u(x,C,_,T,null);e0(x,_)}return null}function y(x,C,_,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(_)||null,a(C,x,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zv:return x=x.get(T.key===null?_:T.key)||null,l(C,x,T,A);case fh:return x=x.get(T.key===null?_:T.key)||null,c(C,x,T,A);case Xa:var P=T._init;return y(x,C,_,P(T._payload),A)}if(fm(T)||Wp(T))return x=x.get(_)||null,u(C,x,T,A,null);e0(C,T)}return null}function w(x,C,_,T){for(var A=null,P=null,N=C,I=C=0,M=null;N!==null&&I<_.length;I++){N.index>I?(M=N,N=null):M=N.sibling;var D=m(x,N,_[I],T);if(D===null){N===null&&(N=M);break}n&&N&&D.alternate===null&&e(x,N),C=i(D,C,I),P===null?A=D:P.sibling=D,P=D,N=M}if(I===_.length)return t(x,N),Rt&&Ic(x,I),A;if(N===null){for(;I<_.length;I++)N=f(x,_[I],T),N!==null&&(C=i(N,C,I),P===null?A=N:P.sibling=N,P=N);return Rt&&Ic(x,I),A}for(N=r(x,N);I<_.length;I++)M=y(N,x,I,_[I],T),M!==null&&(n&&M.alternate!==null&&N.delete(M.key===null?I:M.key),C=i(M,C,I),P===null?A=M:P.sibling=M,P=M);return n&&N.forEach(function(F){return e(x,F)}),Rt&&Ic(x,I),A}function v(x,C,_,T){var A=Wp(_);if(typeof A!="function")throw Error(X(150));if(_=A.call(_),_==null)throw Error(X(151));for(var P=A=null,N=C,I=C=0,M=null,D=_.next();N!==null&&!D.done;I++,D=_.next()){N.index>I?(M=N,N=null):M=N.sibling;var F=m(x,N,D.value,T);if(F===null){N===null&&(N=M);break}n&&N&&F.alternate===null&&e(x,N),C=i(F,C,I),P===null?A=F:P.sibling=F,P=F,N=M}if(D.done)return t(x,N),Rt&&Ic(x,I),A;if(N===null){for(;!D.done;I++,D=_.next())D=f(x,D.value,T),D!==null&&(C=i(D,C,I),P===null?A=D:P.sibling=D,P=D);return Rt&&Ic(x,I),A}for(N=r(x,N);!D.done;I++,D=_.next())D=y(N,x,I,D.value,T),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?I:D.key),C=i(D,C,I),P===null?A=D:P.sibling=D,P=D);return n&&N.forEach(function($){return e(x,$)}),Rt&&Ic(x,I),A}function b(x,C,_,T){if(typeof _=="object"&&_!==null&&_.type===ph&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zv:e:{for(var A=_.key,P=C;P!==null;){if(P.key===A){if(A=_.type,A===ph){if(P.tag===7){t(x,P.sibling),C=s(P,_.props.children),C.return=x,x=C;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xa&&yR(A)===P.type){t(x,P.sibling),C=s(P,_.props),C.ref=Qp(x,P,_),C.return=x,x=C;break e}t(x,P);break}else e(x,P);P=P.sibling}_.type===ph?(C=md(_.props.children,x.mode,T,_.key),C.return=x,x=C):(T=j0(_.type,_.key,_.props,null,x.mode,T),T.ref=Qp(x,C,_),T.return=x,x=T)}return o(x);case fh:e:{for(P=_.key;C!==null;){if(C.key===P)if(C.tag===4&&C.stateNode.containerInfo===_.containerInfo&&C.stateNode.implementation===_.implementation){t(x,C.sibling),C=s(C,_.children||[]),C.return=x,x=C;break e}else{t(x,C);break}else e(x,C);C=C.sibling}C=B_(_,x.mode,T),C.return=x,x=C}return o(x);case Xa:return P=_._init,b(x,C,P(_._payload),T)}if(fm(_))return w(x,C,_,T);if(Wp(_))return v(x,C,_,T);e0(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,C!==null&&C.tag===6?(t(x,C.sibling),C=s(C,_),C.return=x,x=C):(t(x,C),C=V_(_,x.mode,T),C.return=x,x=C),o(x)):t(x,C)}return b}var dp=BD(!0),zD=BD(!1),zw=Sc(null),Hw=null,_h=null,vA=null;function wA(){vA=_h=Hw=null}function xA(n){var e=zw.current;Ct(zw),n._currentValue=e}function tS(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Dh(n,e){Hw=n,vA=_h=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(kr=!0),n.firstContext=null)}function ks(n){var e=n._currentValue;if(vA!==n)if(n={context:n,memoizedValue:e,next:null},_h===null){if(Hw===null)throw Error(X(308));_h=n,Hw.dependencies={lanes:0,firstContext:n}}else _h=_h.next=n;return e}var zc=null;function bA(n){zc===null?zc=[n]:zc.push(n)}function HD(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,bA(e)):(t.next=s.next,s.next=t),e.interleaved=t,Ra(n,r)}function Ra(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Qa=!1;function _A(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function va(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ic(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ra(n,t)}return s=r.interleaved,s===null?(e.next=e,bA(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ra(n,t)}function D0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,aA(n,t)}}function vR(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Gw(n,e,t,r){var s=n.updateQueue;Qa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,v=a;switch(m=e,y=t,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(y,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(y,f,m):w,m==null)break e;f=Ft({},f,m);break e;case 2:Qa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=y,l=f):u=u.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xd|=o,n.lanes=o,n.memoizedState=f}}function wR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var yv={},oo=Sc(yv),yg=Sc(yv),vg=Sc(yv);function Hc(n){if(n===yv)throw Error(X(174));return n}function CA(n,e){switch(yt(vg,e),yt(yg,n),yt(oo,yv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:LC(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=LC(e,n)}Ct(oo),yt(oo,e)}function hp(){Ct(oo),Ct(yg),Ct(vg)}function qD(n){Hc(vg.current);var e=Hc(oo.current),t=LC(e,n.type);e!==t&&(yt(yg,n),yt(oo,t))}function SA(n){yg.current===n&&(Ct(oo),Ct(yg))}var Dt=Sc(0);function qw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L_=[];function EA(){for(var n=0;n<L_.length;n++)L_[n]._workInProgressVersionPrimary=null;L_.length=0}var L0=Fa.ReactCurrentDispatcher,F_=Fa.ReactCurrentBatchConfig,wd=0,Lt=null,on=null,wn=null,Ww=!1,Wm=!1,wg=0,L5=0;function Ln(){throw Error(X(321))}function TA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fi(n[t],e[t]))return!1;return!0}function AA(n,e,t,r,s,i){if(wd=i,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L0.current=n===null||n.memoizedState===null?$5:j5,n=t(r,s),Wm){i=0;do{if(Wm=!1,wg=0,25<=i)throw Error(X(301));i+=1,wn=on=null,e.updateQueue=null,L0.current=V5,n=t(r,s)}while(Wm)}if(L0.current=Kw,e=on!==null&&on.next!==null,wd=0,wn=on=Lt=null,Ww=!1,e)throw Error(X(300));return n}function kA(){var n=wg!==0;return wg=0,n}function Pi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Lt.memoizedState=wn=n:wn=wn.next=n,wn}function Rs(){if(on===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=on.next;var e=wn===null?Lt.memoizedState:wn.next;if(e!==null)wn=e,on=n;else{if(n===null)throw Error(X(310));on=n,n={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},wn===null?Lt.memoizedState=wn=n:wn=wn.next=n}return wn}function xg(n,e){return typeof e=="function"?e(n):e}function O_(n){var e=Rs(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=n;var r=on,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((wd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Lt.lanes|=u,xd|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,fi(r,e.memoizedState)||(kr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,Lt.lanes|=i,xd|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function U_(n){var e=Rs(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);fi(i,e.memoizedState)||(kr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function WD(){}function KD(n,e){var t=Lt,r=Rs(),s=e(),i=!fi(r.memoizedState,s);if(i&&(r.memoizedState=s,kr=!0),r=r.queue,RA(XD.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||wn!==null&&wn.memoizedState.tag&1){if(t.flags|=2048,bg(9,JD.bind(null,t,r,s,e),void 0,null),xn===null)throw Error(X(349));wd&30||YD(t,e,s)}return s}function YD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JD(n,e,t,r){e.value=t,e.getSnapshot=r,QD(e)&&ZD(n)}function XD(n,e,t){return t(function(){QD(e)&&ZD(n)})}function QD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fi(n,t)}catch{return!0}}function ZD(n){var e=Ra(n,1);e!==null&&hi(e,n,1,-1)}function xR(n){var e=Pi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xg,lastRenderedState:n},e.queue=n,n=n.dispatch=U5.bind(null,Lt,n),[e.memoizedState,n]}function bg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function eL(){return Rs().memoizedState}function F0(n,e,t,r){var s=Pi();Lt.flags|=n,s.memoizedState=bg(1|e,t,void 0,r===void 0?null:r)}function db(n,e,t,r){var s=Rs();r=r===void 0?null:r;var i=void 0;if(on!==null){var o=on.memoizedState;if(i=o.destroy,r!==null&&TA(r,o.deps)){s.memoizedState=bg(e,t,i,r);return}}Lt.flags|=n,s.memoizedState=bg(1|e,t,i,r)}function bR(n,e){return F0(8390656,8,n,e)}function RA(n,e){return db(2048,8,n,e)}function tL(n,e){return db(4,2,n,e)}function nL(n,e){return db(4,4,n,e)}function rL(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function sL(n,e,t){return t=t!=null?t.concat([n]):null,db(4,4,rL.bind(null,e,n),t)}function PA(){}function iL(n,e){var t=Rs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&TA(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function oL(n,e){var t=Rs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&TA(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function aL(n,e,t){return wd&21?(fi(t,e)||(t=hD(),Lt.lanes|=t,xd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,kr=!0),n.memoizedState=t)}function F5(n,e){var t=at;at=t!==0&&4>t?t:4,n(!0);var r=F_.transition;F_.transition={};try{n(!1),e()}finally{at=t,F_.transition=r}}function lL(){return Rs().memoizedState}function O5(n,e,t){var r=ac(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},cL(n))uL(e,t);else if(t=HD(n,e,t,r),t!==null){var s=ar();hi(t,n,r,s),dL(t,e,r)}}function U5(n,e,t){var r=ac(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(cL(n))uL(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,fi(a,o)){var l=e.interleaved;l===null?(s.next=s,bA(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=HD(n,e,s,r),t!==null&&(s=ar(),hi(t,n,r,s),dL(t,e,r))}}function cL(n){var e=n.alternate;return n===Lt||e!==null&&e===Lt}function uL(n,e){Wm=Ww=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function dL(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,aA(n,t)}}var Kw={readContext:ks,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},$5={readContext:ks,useCallback:function(n,e){return Pi().memoizedState=[n,e===void 0?null:e],n},useContext:ks,useEffect:bR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,F0(4194308,4,rL.bind(null,e,n),t)},useLayoutEffect:function(n,e){return F0(4194308,4,n,e)},useInsertionEffect:function(n,e){return F0(4,2,n,e)},useMemo:function(n,e){var t=Pi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Pi();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=O5.bind(null,Lt,n),[r.memoizedState,n]},useRef:function(n){var e=Pi();return n={current:n},e.memoizedState=n},useState:xR,useDebugValue:PA,useDeferredValue:function(n){return Pi().memoizedState=n},useTransition:function(){var n=xR(!1),e=n[0];return n=F5.bind(null,n[1]),Pi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Lt,s=Pi();if(Rt){if(t===void 0)throw Error(X(407));t=t()}else{if(t=e(),xn===null)throw Error(X(349));wd&30||YD(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,bR(XD.bind(null,r,i,n),[n]),r.flags|=2048,bg(9,JD.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Pi(),e=xn.identifierPrefix;if(Rt){var t=ya,r=ga;t=(r&~(1<<32-di(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=wg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=L5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},j5={readContext:ks,useCallback:iL,useContext:ks,useEffect:RA,useImperativeHandle:sL,useInsertionEffect:tL,useLayoutEffect:nL,useMemo:oL,useReducer:O_,useRef:eL,useState:function(){return O_(xg)},useDebugValue:PA,useDeferredValue:function(n){var e=Rs();return aL(e,on.memoizedState,n)},useTransition:function(){var n=O_(xg)[0],e=Rs().memoizedState;return[n,e]},useMutableSource:WD,useSyncExternalStore:KD,useId:lL,unstable_isNewReconciler:!1},V5={readContext:ks,useCallback:iL,useContext:ks,useEffect:RA,useImperativeHandle:sL,useInsertionEffect:tL,useLayoutEffect:nL,useMemo:oL,useReducer:U_,useRef:eL,useState:function(){return U_(xg)},useDebugValue:PA,useDeferredValue:function(n){var e=Rs();return on===null?e.memoizedState=n:aL(e,on.memoizedState,n)},useTransition:function(){var n=U_(xg)[0],e=Rs().memoizedState;return[n,e]},useMutableSource:WD,useSyncExternalStore:KD,useId:lL,unstable_isNewReconciler:!1};function Bs(n,e){if(n&&n.defaultProps){e=Ft({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function nS(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ft({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var hb={isMounted:function(n){return(n=n._reactInternals)?Od(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ar(),s=ac(n),i=va(r,s);i.payload=e,t!=null&&(i.callback=t),e=ic(n,i,s),e!==null&&(hi(e,n,s,r),D0(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ar(),s=ac(n),i=va(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=ic(n,i,s),e!==null&&(hi(e,n,s,r),D0(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ar(),r=ac(n),s=va(t,r);s.tag=2,e!=null&&(s.callback=e),e=ic(n,s,r),e!==null&&(hi(e,n,r,t),D0(e,n,r))}};function _R(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fg(t,r)||!fg(s,i):!0}function hL(n,e,t){var r=!1,s=pc,i=e.contextType;return typeof i=="object"&&i!==null?i=ks(i):(s=Pr(e)?yd:qn.current,r=e.contextTypes,i=(r=r!=null)?cp(n,s):pc),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hb,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function CR(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&hb.enqueueReplaceState(e,e.state,null)}function rS(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},_A(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ks(i):(i=Pr(e)?yd:qn.current,s.context=cp(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nS(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hb.enqueueReplaceState(s,s.state,null),Gw(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function fp(n,e){try{var t="",r=e;do t+=m3(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function $_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function sS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var B5=typeof WeakMap=="function"?WeakMap:Map;function fL(n,e,t){t=va(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Jw||(Jw=!0,pS=r),sS(n,e)},t}function pL(n,e,t){t=va(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){sS(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){sS(n,e),typeof r!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function SR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new B5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=nz.bind(null,n,e,t),e.then(n,n))}function ER(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function TR(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=va(-1,1),e.tag=2,ic(t,e,1))),t.lanes|=1),n)}var z5=Fa.ReactCurrentOwner,kr=!1;function nr(n,e,t,r){e.child=n===null?zD(e,null,t,r):dp(e,n.child,t,r)}function AR(n,e,t,r,s){t=t.render;var i=e.ref;return Dh(e,s),r=AA(n,e,t,r,i,s),t=kA(),n!==null&&!kr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Pa(n,e,s)):(Rt&&t&&mA(e),e.flags|=1,nr(n,e,r,s),e.child)}function kR(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!UA(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,mL(n,e,i,r,s)):(n=j0(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:fg,t(o,r)&&n.ref===e.ref)return Pa(n,e,s)}return e.flags|=1,n=lc(i,r),n.ref=e.ref,n.return=e,e.child=n}function mL(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(fg(i,r)&&n.ref===e.ref)if(kr=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(kr=!0);else return e.lanes=n.lanes,Pa(n,e,s)}return iS(n,e,t,r,s)}function gL(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Sh,Yr),Yr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,yt(Sh,Yr),Yr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,yt(Sh,Yr),Yr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,yt(Sh,Yr),Yr|=r;return nr(n,e,s,t),e.child}function yL(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function iS(n,e,t,r,s){var i=Pr(t)?yd:qn.current;return i=cp(e,i),Dh(e,s),t=AA(n,e,t,r,i,s),r=kA(),n!==null&&!kr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Pa(n,e,s)):(Rt&&r&&mA(e),e.flags|=1,nr(n,e,t,s),e.child)}function RR(n,e,t,r,s){if(Pr(t)){var i=!0;jw(e)}else i=!1;if(Dh(e,s),e.stateNode===null)O0(n,e),hL(e,t,r),rS(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ks(c):(c=Pr(t)?yd:qn.current,c=cp(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&CR(e,o,r,c),Qa=!1;var m=e.memoizedState;o.state=m,Gw(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Rr.current||Qa?(typeof u=="function"&&(nS(e,t,u,r),l=e.memoizedState),(a=Qa||_R(e,t,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GD(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Bs(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=Pr(t)?yd:qn.current,l=cp(e,l));var y=t.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&CR(e,o,r,l),Qa=!1,m=e.memoizedState,o.state=m,Gw(e,r,o,s);var w=e.memoizedState;a!==f||m!==w||Rr.current||Qa?(typeof y=="function"&&(nS(e,t,y,r),w=e.memoizedState),(c=Qa||_R(e,t,c,r,m,w,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return oS(n,e,t,r,i,s)}function oS(n,e,t,r,s,i){yL(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&pR(e,t,!1),Pa(n,e,i);r=e.stateNode,z5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=dp(e,n.child,null,i),e.child=dp(e,null,a,i)):nr(n,e,a,i),e.memoizedState=r.state,s&&pR(e,t,!0),e.child}function vL(n){var e=n.stateNode;e.pendingContext?fR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&fR(n,e.context,!1),CA(n,e.containerInfo)}function PR(n,e,t,r,s){return up(),yA(s),e.flags|=256,nr(n,e,t,r),e.child}var aS={dehydrated:null,treeContext:null,retryLane:0};function lS(n){return{baseLanes:n,cachePool:null,transitions:null}}function wL(n,e,t){var r=e.pendingProps,s=Dt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),yt(Dt,s&1),n===null)return eS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mb(o,r,0,null),n=md(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=lS(t),e.memoizedState=aS,n):NA(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return H5(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lc(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=lc(a,i):(i=md(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?lS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=aS,r}return i=n.child,n=i.sibling,r=lc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function NA(n,e){return e=mb({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function t0(n,e,t,r){return r!==null&&yA(r),dp(e,n.child,null,t),n=NA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function H5(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=$_(Error(X(422))),t0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mb({mode:"visible",children:r.children},s,0,null),i=md(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&dp(e,n.child,null,o),e.child.memoizedState=lS(o),e.memoizedState=aS,i);if(!(e.mode&1))return t0(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(X(419)),r=$_(i,r,void 0),t0(n,e,o,r)}if(a=(o&n.childLanes)!==0,kr||a){if(r=xn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ra(n,s),hi(r,n,s,-1))}return OA(),r=$_(Error(X(421))),t0(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=rz.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,ts=sc(s.nextSibling),ns=e,Rt=!0,ii=null,n!==null&&(vs[ws++]=ga,vs[ws++]=ya,vs[ws++]=vd,ga=n.id,ya=n.overflow,vd=e),e=NA(e,r.children),e.flags|=4096,e)}function NR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),tS(n.return,e,t)}function j_(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function xL(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(nr(n,e,r.children,t),r=Dt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&NR(n,t,e);else if(n.tag===19)NR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(yt(Dt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&qw(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),j_(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&qw(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}j_(e,!0,t,null,i);break;case"together":j_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function O0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Pa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(X(153));if(e.child!==null){for(n=e.child,t=lc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=lc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function G5(n,e,t){switch(e.tag){case 3:vL(e),up();break;case 5:qD(e);break;case 1:Pr(e.type)&&jw(e);break;case 4:CA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;yt(zw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yt(Dt,Dt.current&1),e.flags|=128,null):t&e.child.childLanes?wL(n,e,t):(yt(Dt,Dt.current&1),n=Pa(n,e,t),n!==null?n.sibling:null);yt(Dt,Dt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return xL(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(Dt,Dt.current),r)break;return null;case 22:case 23:return e.lanes=0,gL(n,e,t)}return Pa(n,e,t)}var bL,cS,_L,CL;bL=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};cS=function(){};_L=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Hc(oo.current);var i=null;switch(t){case"input":s=NC(n,s),r=NC(n,r),i=[];break;case"select":s=Ft({},s,{value:void 0}),r=Ft({},r,{value:void 0}),i=[];break;case"textarea":s=DC(n,s),r=DC(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Uw)}FC(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(og.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(og.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xt("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};CL=function(n,e,t,r){t!==r&&(e.flags|=4)};function Zp(n,e){if(!Rt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Fn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function q5(n,e,t){var r=e.pendingProps;switch(gA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(e),null;case 1:return Pr(e.type)&&$w(),Fn(e),null;case 3:return r=e.stateNode,hp(),Ct(Rr),Ct(qn),EA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Zv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ii!==null&&(yS(ii),ii=null))),cS(n,e),Fn(e),null;case 5:SA(e);var s=Hc(vg.current);if(t=e.type,n!==null&&e.stateNode!=null)_L(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Fn(e),null}if(n=Hc(oo.current),Zv(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Xi]=e,r[gg]=i,n=(e.mode&1)!==0,t){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(s=0;s<mm.length;s++)xt(mm[s],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":jk(r,i),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xt("invalid",r);break;case"textarea":Bk(r,i),xt("invalid",r)}FC(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qv(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qv(r.textContent,a,n),s=["children",""+a]):og.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xt("scroll",r)}switch(t){case"input":Hv(r),Vk(r,i,!0);break;case"textarea":Hv(r),zk(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=XM(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Xi]=e,n[gg]=r,bL(n,e,!1,!1),e.stateNode=n;e:{switch(o=OC(t,r),t){case"dialog":xt("cancel",n),xt("close",n),s=r;break;case"iframe":case"object":case"embed":xt("load",n),s=r;break;case"video":case"audio":for(s=0;s<mm.length;s++)xt(mm[s],n);s=r;break;case"source":xt("error",n),s=r;break;case"img":case"image":case"link":xt("error",n),xt("load",n),s=r;break;case"details":xt("toggle",n),s=r;break;case"input":jk(n,r),s=NC(n,r),xt("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=Ft({},r,{value:void 0}),xt("invalid",n);break;case"textarea":Bk(n,r),s=DC(n,r),xt("invalid",n);break;default:s=r}FC(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?eD(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QM(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ag(n,l):typeof l=="number"&&ag(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(og.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xt("scroll",n):l!=null&&tA(n,i,l,o))}switch(t){case"input":Hv(n),Vk(n,r,!1);break;case"textarea":Hv(n),zk(n);break;case"option":r.value!=null&&n.setAttribute("value",""+fc(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Ph(n,!!r.multiple,i,!1):r.defaultValue!=null&&Ph(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Uw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fn(e),null;case 6:if(n&&e.stateNode!=null)CL(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(t=Hc(vg.current),Hc(oo.current),Zv(e)){if(r=e.stateNode,t=e.memoizedProps,r[Xi]=e,(i=r.nodeValue!==t)&&(n=ns,n!==null))switch(n.tag){case 3:Qv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qv(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return Fn(e),null;case 13:if(Ct(Dt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rt&&ts!==null&&e.mode&1&&!(e.flags&128))VD(),up(),e.flags|=98560,i=!1;else if(i=Zv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Xi]=e}else up(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fn(e),i=!1}else ii!==null&&(yS(ii),ii=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Dt.current&1?ln===0&&(ln=3):OA())),e.updateQueue!==null&&(e.flags|=4),Fn(e),null);case 4:return hp(),cS(n,e),n===null&&pg(e.stateNode.containerInfo),Fn(e),null;case 10:return xA(e.type._context),Fn(e),null;case 17:return Pr(e.type)&&$w(),Fn(e),null;case 19:if(Ct(Dt),i=e.memoizedState,i===null)return Fn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Zp(i,!1);else{if(ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=qw(n),o!==null){for(e.flags|=128,Zp(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return yt(Dt,Dt.current&1|2),e.child}n=n.sibling}i.tail!==null&&zt()>pp&&(e.flags|=128,r=!0,Zp(i,!1),e.lanes=4194304)}else{if(!r)if(n=qw(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Zp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Rt)return Fn(e),null}else 2*zt()-i.renderingStartTime>pp&&t!==1073741824&&(e.flags|=128,r=!0,Zp(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=zt(),e.sibling=null,t=Dt.current,yt(Dt,r?t&1|2:t&1),e):(Fn(e),null);case 22:case 23:return FA(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yr&1073741824&&(Fn(e),e.subtreeFlags&6&&(e.flags|=8192)):Fn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function W5(n,e){switch(gA(e),e.tag){case 1:return Pr(e.type)&&$w(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return hp(),Ct(Rr),Ct(qn),EA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return SA(e),null;case 13:if(Ct(Dt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(X(340));up()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ct(Dt),null;case 4:return hp(),null;case 10:return xA(e.type._context),null;case 22:case 23:return FA(),null;case 24:return null;default:return null}}var n0=!1,Hn=!1,K5=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ch(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){$t(n,e,r)}else t.current=null}function uS(n,e,t){try{t()}catch(r){$t(n,e,r)}}var IR=!1;function Y5(n,e){if(WC=Lw,n=kD(),pA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,m=null;t:for(;;){for(var y;f!==t||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===n)break t;if(m===t&&++c===s&&(a=o),m===i&&++u===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(KC={focusedElem:n,selectionRange:t},Lw=!1,pe=e;pe!==null;)if(e=pe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,pe=n;else for(;pe!==null;){e=pe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,b=w.memoizedState,x=e.stateNode,C=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Bs(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(T){$t(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}return w=IR,IR=!1,w}function Km(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&uS(e,t,i)}s=s.next}while(s!==r)}}function fb(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function dS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function SL(n){var e=n.alternate;e!==null&&(n.alternate=null,SL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Xi],delete e[gg],delete e[XC],delete e[N5],delete e[I5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function EL(n){return n.tag===5||n.tag===3||n.tag===4}function MR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||EL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Uw));else if(r!==4&&(n=n.child,n!==null))for(hS(n,e,t),n=n.sibling;n!==null;)hS(n,e,t),n=n.sibling}function fS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(fS(n,e,t),n=n.sibling;n!==null;)fS(n,e,t),n=n.sibling}var kn=null,ri=!1;function Ha(n,e,t){for(t=t.child;t!==null;)TL(n,e,t),t=t.sibling}function TL(n,e,t){if(io&&typeof io.onCommitFiberUnmount=="function")try{io.onCommitFiberUnmount(ib,t)}catch{}switch(t.tag){case 5:Hn||Ch(t,e);case 6:var r=kn,s=ri;kn=null,Ha(n,e,t),kn=r,ri=s,kn!==null&&(ri?(n=kn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):kn.removeChild(t.stateNode));break;case 18:kn!==null&&(ri?(n=kn,t=t.stateNode,n.nodeType===8?M_(n.parentNode,t):n.nodeType===1&&M_(n,t),dg(n)):M_(kn,t.stateNode));break;case 4:r=kn,s=ri,kn=t.stateNode.containerInfo,ri=!0,Ha(n,e,t),kn=r,ri=s;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uS(t,e,o),s=s.next}while(s!==r)}Ha(n,e,t);break;case 1:if(!Hn&&(Ch(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){$t(t,e,a)}Ha(n,e,t);break;case 21:Ha(n,e,t);break;case 22:t.mode&1?(Hn=(r=Hn)||t.memoizedState!==null,Ha(n,e,t),Hn=r):Ha(n,e,t);break;default:Ha(n,e,t)}}function DR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new K5),e.forEach(function(r){var s=sz.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Fs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kn=a.stateNode,ri=!1;break e;case 3:kn=a.stateNode.containerInfo,ri=!0;break e;case 4:kn=a.stateNode.containerInfo,ri=!0;break e}a=a.return}if(kn===null)throw Error(X(160));TL(i,o,s),kn=null,ri=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){$t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AL(e,n),e=e.sibling}function AL(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fs(e,n),Ti(n),r&4){try{Km(3,n,n.return),fb(3,n)}catch(v){$t(n,n.return,v)}try{Km(5,n,n.return)}catch(v){$t(n,n.return,v)}}break;case 1:Fs(e,n),Ti(n),r&512&&t!==null&&Ch(t,t.return);break;case 5:if(Fs(e,n),Ti(n),r&512&&t!==null&&Ch(t,t.return),n.flags&32){var s=n.stateNode;try{ag(s,"")}catch(v){$t(n,n.return,v)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&YM(s,i),OC(a,o);var c=OC(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?eD(s,f):u==="dangerouslySetInnerHTML"?QM(s,f):u==="children"?ag(s,f):tA(s,u,f,c)}switch(a){case"input":IC(s,i);break;case"textarea":JM(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ph(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ph(s,!!i.multiple,i.defaultValue,!0):Ph(s,!!i.multiple,i.multiple?[]:"",!1))}s[gg]=i}catch(v){$t(n,n.return,v)}}break;case 6:if(Fs(e,n),Ti(n),r&4){if(n.stateNode===null)throw Error(X(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(v){$t(n,n.return,v)}}break;case 3:if(Fs(e,n),Ti(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{dg(e.containerInfo)}catch(v){$t(n,n.return,v)}break;case 4:Fs(e,n),Ti(n);break;case 13:Fs(e,n),Ti(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(DA=zt())),r&4&&DR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Hn=(c=Hn)||u,Fs(e,n),Hn=c):Fs(e,n),Ti(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(pe=n,u=n.child;u!==null;){for(f=pe=u;pe!==null;){switch(m=pe,y=m.child,m.tag){case 0:case 11:case 14:case 15:Km(4,m,m.return);break;case 1:Ch(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){$t(r,t,v)}}break;case 5:Ch(m,m.return);break;case 22:if(m.memoizedState!==null){FR(f);continue}}y!==null?(y.return=m,pe=y):FR(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ZM("display",o))}catch(v){$t(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){$t(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fs(e,n),Ti(n),r&4&&DR(n);break;case 21:break;default:Fs(e,n),Ti(n)}}function Ti(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(EL(t)){var r=t;break e}t=t.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ag(s,""),r.flags&=-33);var i=MR(n);fS(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=MR(n);hS(n,a,o);break;default:throw Error(X(161))}}catch(l){$t(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function J5(n,e,t){pe=n,kL(n)}function kL(n,e,t){for(var r=(n.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||n0;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Hn;a=n0;var c=Hn;if(n0=o,(Hn=l)&&!c)for(pe=s;pe!==null;)o=pe,l=o.child,o.tag===22&&o.memoizedState!==null?OR(s):l!==null?(l.return=o,pe=l):OR(s);for(;i!==null;)pe=i,kL(i),i=i.sibling;pe=s,n0=a,Hn=c}LR(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):LR(n)}}function LR(n){for(;pe!==null;){var e=pe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||fb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Bs(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wR(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&dg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Hn||e.flags&512&&dS(e)}catch(m){$t(e,e.return,m)}}if(e===n){pe=null;break}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}}function FR(n){for(;pe!==null;){var e=pe;if(e===n){pe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,pe=t;break}pe=e.return}}function OR(n){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fb(4,e)}catch(l){$t(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){$t(e,s,l)}}var i=e.return;try{dS(e)}catch(l){$t(e,i,l)}break;case 5:var o=e.return;try{dS(e)}catch(l){$t(e,o,l)}}}catch(l){$t(e,e.return,l)}if(e===n){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var X5=Math.ceil,Yw=Fa.ReactCurrentDispatcher,IA=Fa.ReactCurrentOwner,Cs=Fa.ReactCurrentBatchConfig,Xe=0,xn=null,Jt=null,Nn=0,Yr=0,Sh=Sc(0),ln=0,_g=null,xd=0,pb=0,MA=0,Ym=null,Tr=null,DA=0,pp=1/0,ko=null,Jw=!1,pS=null,oc=null,r0=!1,ec=null,Xw=0,Jm=0,mS=null,U0=-1,$0=0;function ar(){return Xe&6?zt():U0!==-1?U0:U0=zt()}function ac(n){return n.mode&1?Xe&2&&Nn!==0?Nn&-Nn:D5.transition!==null?($0===0&&($0=hD()),$0):(n=at,n!==0||(n=window.event,n=n===void 0?16:wD(n.type)),n):1}function hi(n,e,t,r){if(50<Jm)throw Jm=0,mS=null,Error(X(185));pv(n,t,r),(!(Xe&2)||n!==xn)&&(n===xn&&(!(Xe&2)&&(pb|=t),ln===4&&nl(n,Nn)),Nr(n,r),t===1&&Xe===0&&!(e.mode&1)&&(pp=zt()+500,ub&&Ec()))}function Nr(n,e){var t=n.callbackNode;D3(n,e);var r=Dw(n,n===xn?Nn:0);if(r===0)t!==null&&qk(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qk(t),e===1)n.tag===0?M5(UR.bind(null,n)):UD(UR.bind(null,n)),R5(function(){!(Xe&6)&&Ec()}),t=null;else{switch(fD(r)){case 1:t=oA;break;case 4:t=uD;break;case 16:t=Mw;break;case 536870912:t=dD;break;default:t=Mw}t=FL(t,RL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function RL(n,e){if(U0=-1,$0=0,Xe&6)throw Error(X(327));var t=n.callbackNode;if(Lh()&&n.callbackNode!==t)return null;var r=Dw(n,n===xn?Nn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Qw(n,r);else{e=r;var s=Xe;Xe|=2;var i=NL();(xn!==n||Nn!==e)&&(ko=null,pp=zt()+500,pd(n,e));do try{ez();break}catch(a){PL(n,a)}while(!0);wA(),Yw.current=i,Xe=s,Jt!==null?e=0:(xn=null,Nn=0,e=ln)}if(e!==0){if(e===2&&(s=BC(n),s!==0&&(r=s,e=gS(n,s))),e===1)throw t=_g,pd(n,0),nl(n,r),Nr(n,zt()),t;if(e===6)nl(n,r);else{if(s=n.current.alternate,!(r&30)&&!Q5(s)&&(e=Qw(n,r),e===2&&(i=BC(n),i!==0&&(r=i,e=gS(n,i))),e===1))throw t=_g,pd(n,0),nl(n,r),Nr(n,zt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Mc(n,Tr,ko);break;case 3:if(nl(n,r),(r&130023424)===r&&(e=DA+500-zt(),10<e)){if(Dw(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){ar(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=JC(Mc.bind(null,n,Tr,ko),e);break}Mc(n,Tr,ko);break;case 4:if(nl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-di(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X5(r/1960))-r,10<r){n.timeoutHandle=JC(Mc.bind(null,n,Tr,ko),r);break}Mc(n,Tr,ko);break;case 5:Mc(n,Tr,ko);break;default:throw Error(X(329))}}}return Nr(n,zt()),n.callbackNode===t?RL.bind(null,n):null}function gS(n,e){var t=Ym;return n.current.memoizedState.isDehydrated&&(pd(n,e).flags|=256),n=Qw(n,e),n!==2&&(e=Tr,Tr=t,e!==null&&yS(e)),n}function yS(n){Tr===null?Tr=n:Tr.push.apply(Tr,n)}function Q5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!fi(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nl(n,e){for(e&=~MA,e&=~pb,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-di(e),r=1<<t;n[t]=-1,e&=~r}}function UR(n){if(Xe&6)throw Error(X(327));Lh();var e=Dw(n,0);if(!(e&1))return Nr(n,zt()),null;var t=Qw(n,e);if(n.tag!==0&&t===2){var r=BC(n);r!==0&&(e=r,t=gS(n,r))}if(t===1)throw t=_g,pd(n,0),nl(n,e),Nr(n,zt()),t;if(t===6)throw Error(X(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Mc(n,Tr,ko),Nr(n,zt()),null}function LA(n,e){var t=Xe;Xe|=1;try{return n(e)}finally{Xe=t,Xe===0&&(pp=zt()+500,ub&&Ec())}}function bd(n){ec!==null&&ec.tag===0&&!(Xe&6)&&Lh();var e=Xe;Xe|=1;var t=Cs.transition,r=at;try{if(Cs.transition=null,at=1,n)return n()}finally{at=r,Cs.transition=t,Xe=e,!(Xe&6)&&Ec()}}function FA(){Yr=Sh.current,Ct(Sh)}function pd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,k5(t)),Jt!==null)for(t=Jt.return;t!==null;){var r=t;switch(gA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$w();break;case 3:hp(),Ct(Rr),Ct(qn),EA();break;case 5:SA(r);break;case 4:hp();break;case 13:Ct(Dt);break;case 19:Ct(Dt);break;case 10:xA(r.type._context);break;case 22:case 23:FA()}t=t.return}if(xn=n,Jt=n=lc(n.current,null),Nn=Yr=e,ln=0,_g=null,MA=pb=xd=0,Tr=Ym=null,zc!==null){for(e=0;e<zc.length;e++)if(t=zc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}zc=null}return n}function PL(n,e){do{var t=Jt;try{if(wA(),L0.current=Kw,Ww){for(var r=Lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ww=!1}if(wd=0,wn=on=Lt=null,Wm=!1,wg=0,IA.current=null,t===null||t.return===null){ln=1,_g=e,Jt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=Nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=ER(o);if(y!==null){y.flags&=-257,TR(y,o,a,i,e),y.mode&1&&SR(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){SR(i,c,e),OA();break e}l=Error(X(426))}}else if(Rt&&a.mode&1){var b=ER(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),TR(b,o,a,i,e),yA(fp(l,a));break e}}i=l=fp(l,a),ln!==4&&(ln=2),Ym===null?Ym=[i]:Ym.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=fL(i,l,e);vR(i,x);break e;case 1:a=l;var C=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof C.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(oc===null||!oc.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=pL(i,a,e);vR(i,T);break e}}i=i.return}while(i!==null)}ML(t)}catch(A){e=A,Jt===t&&t!==null&&(Jt=t=t.return);continue}break}while(!0)}function NL(){var n=Yw.current;return Yw.current=Kw,n===null?Kw:n}function OA(){(ln===0||ln===3||ln===2)&&(ln=4),xn===null||!(xd&268435455)&&!(pb&268435455)||nl(xn,Nn)}function Qw(n,e){var t=Xe;Xe|=2;var r=NL();(xn!==n||Nn!==e)&&(ko=null,pd(n,e));do try{Z5();break}catch(s){PL(n,s)}while(!0);if(wA(),Xe=t,Yw.current=r,Jt!==null)throw Error(X(261));return xn=null,Nn=0,ln}function Z5(){for(;Jt!==null;)IL(Jt)}function ez(){for(;Jt!==null&&!E3();)IL(Jt)}function IL(n){var e=LL(n.alternate,n,Yr);n.memoizedProps=n.pendingProps,e===null?ML(n):Jt=e,IA.current=null}function ML(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=W5(t,e),t!==null){t.flags&=32767,Jt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,Jt=null;return}}else if(t=q5(t,e,Yr),t!==null){Jt=t;return}if(e=e.sibling,e!==null){Jt=e;return}Jt=e=n}while(e!==null);ln===0&&(ln=5)}function Mc(n,e,t){var r=at,s=Cs.transition;try{Cs.transition=null,at=1,tz(n,e,t,r)}finally{Cs.transition=s,at=r}return null}function tz(n,e,t,r){do Lh();while(ec!==null);if(Xe&6)throw Error(X(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(X(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(L3(n,i),n===xn&&(Jt=xn=null,Nn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||r0||(r0=!0,FL(Mw,function(){return Lh(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Cs.transition,Cs.transition=null;var o=at;at=1;var a=Xe;Xe|=4,IA.current=null,Y5(n,t),AL(t,n),b5(KC),Lw=!!WC,KC=WC=null,n.current=t,J5(t),T3(),Xe=a,at=o,Cs.transition=i}else n.current=t;if(r0&&(r0=!1,ec=n,Xw=s),i=n.pendingLanes,i===0&&(oc=null),R3(t.stateNode),Nr(n,zt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jw)throw Jw=!1,n=pS,pS=null,n;return Xw&1&&n.tag!==0&&Lh(),i=n.pendingLanes,i&1?n===mS?Jm++:(Jm=0,mS=n):Jm=0,Ec(),null}function Lh(){if(ec!==null){var n=fD(Xw),e=Cs.transition,t=at;try{if(Cs.transition=null,at=16>n?16:n,ec===null)var r=!1;else{if(n=ec,ec=null,Xw=0,Xe&6)throw Error(X(331));var s=Xe;for(Xe|=4,pe=n.current;pe!==null;){var i=pe,o=i.child;if(pe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pe=c;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:Km(8,u,i)}var f=u.child;if(f!==null)f.return=u,pe=f;else for(;pe!==null;){u=pe;var m=u.sibling,y=u.return;if(SL(u),u===c){pe=null;break}if(m!==null){m.return=y,pe=m;break}pe=y}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pe=o;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Km(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,pe=x;break e}pe=i.return}}var C=n.current;for(pe=C;pe!==null;){o=pe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,pe=_;else e:for(o=C;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fb(9,a)}}catch(A){$t(a,a.return,A)}if(a===o){pe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,pe=T;break e}pe=a.return}}if(Xe=s,Ec(),io&&typeof io.onPostCommitFiberRoot=="function")try{io.onPostCommitFiberRoot(ib,n)}catch{}r=!0}return r}finally{at=t,Cs.transition=e}}return!1}function $R(n,e,t){e=fp(t,e),e=fL(n,e,1),n=ic(n,e,1),e=ar(),n!==null&&(pv(n,1,e),Nr(n,e))}function $t(n,e,t){if(n.tag===3)$R(n,n,t);else for(;e!==null;){if(e.tag===3){$R(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oc===null||!oc.has(r))){n=fp(t,n),n=pL(e,n,1),e=ic(e,n,1),n=ar(),e!==null&&(pv(e,1,n),Nr(e,n));break}}e=e.return}}function nz(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ar(),n.pingedLanes|=n.suspendedLanes&t,xn===n&&(Nn&t)===t&&(ln===4||ln===3&&(Nn&130023424)===Nn&&500>zt()-DA?pd(n,0):MA|=t),Nr(n,e)}function DL(n,e){e===0&&(n.mode&1?(e=Wv,Wv<<=1,!(Wv&130023424)&&(Wv=4194304)):e=1);var t=ar();n=Ra(n,e),n!==null&&(pv(n,e,t),Nr(n,t))}function rz(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),DL(n,t)}function sz(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),DL(n,t)}var LL;LL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Rr.current)kr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return kr=!1,G5(n,e,t);kr=!!(n.flags&131072)}else kr=!1,Rt&&e.flags&1048576&&$D(e,Bw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;O0(n,e),n=e.pendingProps;var s=cp(e,qn.current);Dh(e,t),s=AA(null,e,r,n,s,t);var i=kA();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(r)?(i=!0,jw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_A(e),s.updater=hb,e.stateNode=s,s._reactInternals=e,rS(e,r,n,t),e=oS(null,e,r,!0,i,t)):(e.tag=0,Rt&&i&&mA(e),nr(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(O0(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oz(r),n=Bs(r,n),s){case 0:e=iS(null,e,r,n,t);break e;case 1:e=RR(null,e,r,n,t);break e;case 11:e=AR(null,e,r,n,t);break e;case 14:e=kR(null,e,r,Bs(r.type,n),t);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),iS(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),RR(n,e,r,s,t);case 3:e:{if(vL(e),n===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GD(n,e),Gw(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fp(Error(X(423)),e),e=PR(n,e,r,t,s);break e}else if(r!==s){s=fp(Error(X(424)),e),e=PR(n,e,r,t,s);break e}else for(ts=sc(e.stateNode.containerInfo.firstChild),ns=e,Rt=!0,ii=null,t=zD(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(up(),r===s){e=Pa(n,e,t);break e}nr(n,e,r,t)}e=e.child}return e;case 5:return qD(e),n===null&&eS(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,YC(r,s)?o=null:i!==null&&YC(r,i)&&(e.flags|=32),yL(n,e),nr(n,e,o,t),e.child;case 6:return n===null&&eS(e),null;case 13:return wL(n,e,t);case 4:return CA(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=dp(e,null,r,t):nr(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),AR(n,e,r,s,t);case 7:return nr(n,e,e.pendingProps,t),e.child;case 8:return nr(n,e,e.pendingProps.children,t),e.child;case 12:return nr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,yt(zw,r._currentValue),r._currentValue=o,i!==null)if(fi(i.value,o)){if(i.children===s.children&&!Rr.current){e=Pa(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=va(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),tS(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),tS(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nr(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Dh(e,t),s=ks(s),r=r(s),e.flags|=1,nr(n,e,r,t),e.child;case 14:return r=e.type,s=Bs(r,e.pendingProps),s=Bs(r.type,s),kR(n,e,r,s,t);case 15:return mL(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),O0(n,e),e.tag=1,Pr(r)?(n=!0,jw(e)):n=!1,Dh(e,t),hL(e,r,s),rS(e,r,s,t),oS(null,e,r,!0,n,t);case 19:return xL(n,e,t);case 22:return gL(n,e,t)}throw Error(X(156,e.tag))};function FL(n,e){return cD(n,e)}function iz(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(n,e,t,r){return new iz(n,e,t,r)}function UA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oz(n){if(typeof n=="function")return UA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===rA)return 11;if(n===sA)return 14}return 2}function lc(n,e){var t=n.alternate;return t===null?(t=bs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function j0(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")UA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ph:return md(t.children,s,i,e);case nA:o=8,s|=8;break;case AC:return n=bs(12,t,e,s|2),n.elementType=AC,n.lanes=i,n;case kC:return n=bs(13,t,e,s),n.elementType=kC,n.lanes=i,n;case RC:return n=bs(19,t,e,s),n.elementType=RC,n.lanes=i,n;case qM:return mb(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case HM:o=10;break e;case GM:o=9;break e;case rA:o=11;break e;case sA:o=14;break e;case Xa:o=16,r=null;break e}throw Error(X(130,n==null?n:typeof n,""))}return e=bs(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function md(n,e,t,r){return n=bs(7,n,r,e),n.lanes=t,n}function mb(n,e,t,r){return n=bs(22,n,r,e),n.elementType=qM,n.lanes=t,n.stateNode={isHidden:!1},n}function V_(n,e,t){return n=bs(6,n,null,e),n.lanes=t,n}function B_(n,e,t){return e=bs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function az(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=__(0),this.expirationTimes=__(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=__(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $A(n,e,t,r,s,i,o,a,l){return n=new az(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_A(i),n}function lz(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fh,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function OL(n){if(!n)return pc;n=n._reactInternals;e:{if(Od(n)!==n||n.tag!==1)throw Error(X(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(n.tag===1){var t=n.type;if(Pr(t))return OD(n,t,e)}return e}function UL(n,e,t,r,s,i,o,a,l){return n=$A(t,r,!0,n,s,i,o,a,l),n.context=OL(null),t=n.current,r=ar(),s=ac(t),i=va(r,s),i.callback=e??null,ic(t,i,s),n.current.lanes=s,pv(n,s,r),Nr(n,r),n}function gb(n,e,t,r){var s=e.current,i=ar(),o=ac(s);return t=OL(t),e.context===null?e.context=t:e.pendingContext=t,e=va(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ic(s,e,o),n!==null&&(hi(n,s,o,i),D0(n,s,o)),o}function Zw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function jA(n,e){jR(n,e),(n=n.alternate)&&jR(n,e)}function cz(){return null}var $L=typeof reportError=="function"?reportError:function(n){console.error(n)};function VA(n){this._internalRoot=n}yb.prototype.render=VA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(X(409));gb(n,e,null,null)};yb.prototype.unmount=VA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;bd(function(){gb(null,n,null,null)}),e[ka]=null}};function yb(n){this._internalRoot=n}yb.prototype.unstable_scheduleHydration=function(n){if(n){var e=gD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<tl.length&&e!==0&&e<tl[t].priority;t++);tl.splice(t,0,n),t===0&&vD(n)}};function BA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function VR(){}function uz(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zw(o);i.call(c)}}var o=UL(e,r,n,0,null,!1,!1,"",VR);return n._reactRootContainer=o,n[ka]=o.current,pg(n.nodeType===8?n.parentNode:n),bd(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zw(l);a.call(c)}}var l=$A(n,0,!1,null,null,!1,!1,"",VR);return n._reactRootContainer=l,n[ka]=l.current,pg(n.nodeType===8?n.parentNode:n),bd(function(){gb(e,l,t,r)}),l}function wb(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zw(o);a.call(l)}}gb(e,o,n,s)}else o=uz(t,e,n,s,r);return Zw(o)}pD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=pm(e.pendingLanes);t!==0&&(aA(e,t|1),Nr(e,zt()),!(Xe&6)&&(pp=zt()+500,Ec()))}break;case 13:bd(function(){var r=Ra(n,1);if(r!==null){var s=ar();hi(r,n,1,s)}}),jA(n,1)}};lA=function(n){if(n.tag===13){var e=Ra(n,134217728);if(e!==null){var t=ar();hi(e,n,134217728,t)}jA(n,134217728)}};mD=function(n){if(n.tag===13){var e=ac(n),t=Ra(n,e);if(t!==null){var r=ar();hi(t,n,e,r)}jA(n,e)}};gD=function(){return at};yD=function(n,e){var t=at;try{return at=n,e()}finally{at=t}};$C=function(n,e,t){switch(e){case"input":if(IC(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=cb(r);if(!s)throw Error(X(90));KM(r),IC(r,s)}}}break;case"textarea":JM(n,t);break;case"select":e=t.value,e!=null&&Ph(n,!!t.multiple,e,!1)}};rD=LA;sD=bd;var dz={usingClientEntryPoint:!1,Events:[gv,vh,cb,tD,nD,LA]},em={findFiberByHostInstance:Bc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hz={bundleType:em.bundleType,version:em.version,rendererPackageName:em.rendererPackageName,rendererConfig:em.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=aD(n),n===null?null:n.stateNode},findFiberByHostInstance:em.findFiberByHostInstance||cz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var s0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!s0.isDisabled&&s0.supportsFiber)try{ib=s0.inject(hz),io=s0}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dz;os.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BA(e))throw Error(X(200));return lz(n,e,null,t)};os.createRoot=function(n,e){if(!BA(n))throw Error(X(299));var t=!1,r="",s=$L;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$A(n,1,!1,null,null,t,!1,r,s),n[ka]=e.current,pg(n.nodeType===8?n.parentNode:n),new VA(e)};os.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(X(188)):(n=Object.keys(n).join(","),Error(X(268,n)));return n=aD(e),n=n===null?null:n.stateNode,n};os.flushSync=function(n){return bd(n)};os.hydrate=function(n,e,t){if(!vb(e))throw Error(X(200));return wb(null,n,e,!0,t)};os.hydrateRoot=function(n,e,t){if(!BA(n))throw Error(X(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=$L;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=UL(e,null,n,1,t??null,s,!1,i,o),n[ka]=e.current,pg(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new yb(e)};os.render=function(n,e,t){if(!vb(e))throw Error(X(200));return wb(null,n,e,!1,t)};os.unmountComponentAtNode=function(n){if(!vb(n))throw Error(X(40));return n._reactRootContainer?(bd(function(){wb(null,null,n,!1,function(){n._reactRootContainer=null,n[ka]=null})}),!0):!1};os.unstable_batchedUpdates=LA;os.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!vb(t))throw Error(X(200));if(n==null||n._reactInternals===void 0)throw Error(X(38));return wb(n,e,t,!1,r)};os.version="18.3.1-next-f1338f8080-20240426";function jL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jL)}catch(n){console.error(n)}}jL(),jM.exports=os;var Ud=jM.exports;const VL=AM(Ud);var BR=Ud;EC.createRoot=BR.createRoot,EC.hydrateRoot=BR.hydrateRoot;const fz=1,pz=1e6;let z_=0;function mz(){return z_=(z_+1)%Number.MAX_SAFE_INTEGER,z_.toString()}const H_=new Map,zR=n=>{if(H_.has(n))return;const e=setTimeout(()=>{H_.delete(n),Xm({type:"REMOVE_TOAST",toastId:n})},pz);H_.set(n,e)},gz=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,fz)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?zR(t):n.toasts.forEach(r=>{zR(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},V0=[];let B0={toasts:[]};function Xm(n){B0=gz(B0,n),V0.forEach(e=>{e(B0)})}function yz({...n}){const e=mz(),t=s=>Xm({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Xm({type:"DISMISS_TOAST",toastId:e});return Xm({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function Ps(){const[n,e]=S.useState(B0);return S.useEffect(()=>(V0.push(e),()=>{const t=V0.indexOf(e);t>-1&&V0.splice(t,1)}),[n]),{...n,toast:yz,dismiss:t=>Xm({type:"DISMISS_TOAST",toastId:t})}}function te(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function HR(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function xb(...n){return e=>{let t=!1;const r=n.map(s=>{const i=HR(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():HR(n[s],null)}}}}function Ue(...n){return S.useCallback(xb(...n),n)}function vz(n,e){const t=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return g.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function s(i){const o=S.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function hr(n,e=[]){let t=[];function r(i,o){const a=S.createContext(o),l=t.length;t=[...t,o];const c=f=>{var x;const{scope:m,children:y,...w}=f,v=((x=m==null?void 0:m[n])==null?void 0:x[l])||a,b=S.useMemo(()=>w,Object.values(w));return g.jsx(v.Provider,{value:b,children:y})};c.displayName=i+"Provider";function u(f,m){var v;const y=((v=m==null?void 0:m[n])==null?void 0:v[l])||a,w=S.useContext(y);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return S.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,wz(s,...e)]}function wz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function _d(n){const e=xz(n),t=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(_z);if(l){const c=l.props.children,u=a.map(f=>f===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:f);return g.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,u):null})}return g.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var BL=_d("Slot");function xz(n){const e=S.forwardRef((t,r)=>{const{children:s,...i}=t;if(S.isValidElement(s)){const o=Sz(s),a=Cz(i,s.props);return s.type!==S.Fragment&&(a.ref=r?xb(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var zL=Symbol("radix.slottable");function bz(n){const e=({children:t})=>g.jsx(g.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=zL,e}function _z(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===zL}function Cz(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function Sz(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vv(n){const e=n+"CollectionProvider",[t,r]=hr(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:x}=v,C=K.useRef(null),_=K.useRef(new Map).current;return g.jsx(s,{scope:b,itemMap:_,collectionRef:C,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=_d(a),c=K.forwardRef((v,b)=>{const{scope:x,children:C}=v,_=i(a,x),T=Ue(b,_.collectionRef);return g.jsx(l,{ref:T,children:C})});c.displayName=a;const u=n+"CollectionItemSlot",f="data-radix-collection-item",m=_d(u),y=K.forwardRef((v,b)=>{const{scope:x,children:C,..._}=v,T=K.useRef(null),A=Ue(b,T),P=i(u,x);return K.useEffect(()=>(P.itemMap.set(T,{ref:T,..._}),()=>void P.itemMap.delete(T))),g.jsx(m,{[f]:"",ref:A,children:C})});y.displayName=u;function w(v){const b=i(n+"CollectionConsumer",v);return K.useCallback(()=>{const C=b.collectionRef.current;if(!C)return[];const _=Array.from(C.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((P,N)=>_.indexOf(P.ref.current)-_.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:y},w,r]}var Ez=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=Ez.reduce((n,e)=>{const t=_d(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function zA(n,e){n&&Ud.flushSync(()=>n.dispatchEvent(e))}function Ir(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Tz(n,e=globalThis==null?void 0:globalThis.document){const t=Ir(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Az="DismissableLayer",vS="dismissableLayer.update",kz="dismissableLayer.pointerDownOutside",Rz="dismissableLayer.focusOutside",GR,HL=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kp=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=S.useContext(HL),[u,f]=S.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=S.useState({}),w=Ue(e,N=>f(N)),v=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),C=u?v.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,T=C>=x,A=Nz(N=>{const I=N.target,M=[...c.branches].some(D=>D.contains(I));!T||M||(s==null||s(N),o==null||o(N),N.defaultPrevented||a==null||a())},m),P=Iz(N=>{const I=N.target;[...c.branches].some(D=>D.contains(I))||(i==null||i(N),o==null||o(N),N.defaultPrevented||a==null||a())},m);return Tz(N=>{C===c.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&a&&(N.preventDefault(),a()))},m),S.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(GR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),qR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=GR)}},[u,m,t,c]),S.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),qR())},[u,c]),S.useEffect(()=>{const N=()=>y({});return document.addEventListener(vS,N),()=>document.removeEventListener(vS,N)},[]),g.jsx(we.div,{...l,ref:w,style:{pointerEvents:_?T?"auto":"none":void 0,...n.style},onFocusCapture:te(n.onFocusCapture,P.onFocusCapture),onBlurCapture:te(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:te(n.onPointerDownCapture,A.onPointerDownCapture)})});kp.displayName=Az;var Pz="DismissableLayerBranch",GL=S.forwardRef((n,e)=>{const t=S.useContext(HL),r=S.useRef(null),s=Ue(e,r);return S.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),g.jsx(we.div,{...n,ref:s})});GL.displayName=Pz;function Nz(n,e=globalThis==null?void 0:globalThis.document){const t=Ir(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){qL(kz,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Iz(n,e=globalThis==null?void 0:globalThis.document){const t=Ir(n),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&qL(Rz,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qR(){const n=new CustomEvent(vS);document.dispatchEvent(n)}function qL(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?zA(s,i):s.dispatchEvent(i)}var Mz=kp,Dz=GL,Dn=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Lz="Portal",wv=S.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=S.useState(!1);Dn(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?VL.createPortal(g.jsx(we.div,{...r,ref:e}),o):null});wv.displayName=Lz;function Fz(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var ls=n=>{const{present:e,children:t}=n,r=Oz(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),i=Ue(r.ref,Uz(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};ls.displayName="Presence";function Oz(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),i=S.useRef("none"),o=n?"mounted":"unmounted",[a,l]=Fz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=i0(r.current);i.current=a==="mounted"?c:"none"},[a]),Dn(()=>{const c=r.current,u=s.current;if(u!==n){const m=i.current,y=i0(c);n?l("MOUNT"):y==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Dn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=y=>{const v=i0(r.current).includes(y.animationName);if(y.target===e&&v&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=y=>{y.target===e&&(i.current=i0(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function i0(n){return(n==null?void 0:n.animationName)||"none"}function Uz(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var $z=UM[" useInsertionEffect ".trim().toString()]||Dn;function uo({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,o]=jz({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:s;{const u=S.useRef(n!==void 0);S.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=S.useCallback(u=>{var f;if(a){const m=Vz(u)?u(n):u;m!==n&&((f=o.current)==null||f.call(o,m))}else i(u)},[a,n,i,o]);return[l,c]}function jz({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),i=S.useRef(e);return $z(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,r,i]}function Vz(n){return typeof n=="function"}var WL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bz="VisuallyHidden",bb=S.forwardRef((n,e)=>g.jsx(we.span,{...n,ref:e,style:{...WL,...n.style}}));bb.displayName=Bz;var zz=bb,HA="ToastProvider",[GA,Hz,Gz]=vv("Toast"),[KL,$ue]=hr("Toast",[Gz]),[qz,_b]=KL(HA),YL=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,l]=S.useState(null),[c,u]=S.useState(0),f=S.useRef(!1),m=S.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${HA}\`. Expected non-empty \`string\`.`),g.jsx(GA.Provider,{scope:e,children:g.jsx(qz,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>u(y=>y+1),[]),onToastRemove:S.useCallback(()=>u(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};YL.displayName=HA;var JL="ToastViewport",Wz=["F8"],wS="toast.viewportPause",xS="toast.viewportResume",XL=S.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Wz,label:s="Notifications ({hotkey})",...i}=n,o=_b(JL,t),a=Hz(t),l=S.useRef(null),c=S.useRef(null),u=S.useRef(null),f=S.useRef(null),m=Ue(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;S.useEffect(()=>{const b=x=>{var _;r.length!==0&&r.every(T=>x[T]||x.code===T)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),S.useEffect(()=>{const b=l.current,x=f.current;if(w&&b&&x){const C=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(wS);x.dispatchEvent(P),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(xS);x.dispatchEvent(P),o.isClosePausedRef.current=!1}},T=P=>{!b.contains(P.relatedTarget)&&_()},A=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",C),b.addEventListener("focusout",T),b.addEventListener("pointermove",C),b.addEventListener("pointerleave",A),window.addEventListener("blur",C),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",C),b.removeEventListener("focusout",T),b.removeEventListener("pointermove",C),b.removeEventListener("pointerleave",A),window.removeEventListener("blur",C),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const v=S.useCallback(({tabbingDirection:b})=>{const C=a().map(_=>{const T=_.ref.current,A=[T,...o6(T)];return b==="forwards"?A:A.reverse()});return(b==="forwards"?C.reverse():C).flat()},[a]);return S.useEffect(()=>{const b=f.current;if(b){const x=C=>{var A,P,N;const _=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!_){const I=document.activeElement,M=C.shiftKey;if(C.target===b&&M){(A=c.current)==null||A.focus();return}const $=v({tabbingDirection:M?"backwards":"forwards"}),G=$.findIndex(O=>O===I);G_($.slice(G+1))?C.preventDefault():M?(P=c.current)==null||P.focus():(N=u.current)==null||N.focus()}};return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)}},[a,v]),g.jsxs(Dz,{ref:l,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&g.jsx(bS,{ref:c,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});G_(b)}}),g.jsx(GA.Slot,{scope:t,children:g.jsx(we.ol,{tabIndex:-1,...i,ref:m})}),w&&g.jsx(bS,{ref:u,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});G_(b)}})]})});XL.displayName=JL;var QL="ToastFocusProxy",bS=S.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=_b(QL,t);return g.jsx(bb,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});bS.displayName=QL;var xv="Toast",Kz="toast.swipeStart",Yz="toast.swipeMove",Jz="toast.swipeCancel",Xz="toast.swipeEnd",ZL=S.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a,l]=uo({prop:r,defaultProp:s??!0,onChange:i,caller:xv});return g.jsx(ls,{present:t||a,children:g.jsx(e6,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ir(n.onPause),onResume:Ir(n.onResume),onSwipeStart:te(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:te(n.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:te(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:te(n.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});ZL.displayName=xv;var[Qz,Zz]=KL(xv,{onClose(){}}),e6=S.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...w}=n,v=_b(xv,t),[b,x]=S.useState(null),C=Ue(e,O=>x(O)),_=S.useRef(null),T=S.useRef(null),A=s||v.duration,P=S.useRef(0),N=S.useRef(A),I=S.useRef(0),{onToastAdd:M,onToastRemove:D}=v,F=Ir(()=>{var W;(b==null?void 0:b.contains(document.activeElement))&&((W=v.viewport)==null||W.focus()),o()}),$=S.useCallback(O=>{!O||O===1/0||(window.clearTimeout(I.current),P.current=new Date().getTime(),I.current=window.setTimeout(F,O))},[F]);S.useEffect(()=>{const O=v.viewport;if(O){const W=()=>{$(N.current),c==null||c()},j=()=>{const z=new Date().getTime()-P.current;N.current=N.current-z,window.clearTimeout(I.current),l==null||l()};return O.addEventListener(wS,j),O.addEventListener(xS,W),()=>{O.removeEventListener(wS,j),O.removeEventListener(xS,W)}}},[v.viewport,A,l,c,$]),S.useEffect(()=>{i&&!v.isClosePausedRef.current&&$(A)},[i,A,v.isClosePausedRef,$]),S.useEffect(()=>(M(),()=>D()),[M,D]);const G=S.useMemo(()=>b?o2(b):null,[b]);return v.viewport?g.jsxs(g.Fragment,{children:[G&&g.jsx(t6,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),g.jsx(Qz,{scope:t,onClose:F,children:Ud.createPortal(g.jsx(GA.ItemSlot,{scope:t,children:g.jsx(Mz,{asChild:!0,onEscapeKeyDown:te(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||F(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:C,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:te(n.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:te(n.onPointerDown,O=>{O.button===0&&(_.current={x:O.clientX,y:O.clientY})}),onPointerMove:te(n.onPointerMove,O=>{if(!_.current)return;const W=O.clientX-_.current.x,j=O.clientY-_.current.y,z=!!T.current,V=["left","right"].includes(v.swipeDirection),U=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=V?U(0,W):0,Q=V?0:U(0,j),J=O.pointerType==="touch"?10:2,re={x:H,y:Q},ye={originalEvent:O,delta:re};z?(T.current=re,o0(Yz,f,ye,{discrete:!1})):WR(re,v.swipeDirection,J)?(T.current=re,o0(Kz,u,ye,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>J||Math.abs(j)>J)&&(_.current=null)}),onPointerUp:te(n.onPointerUp,O=>{const W=T.current,j=O.target;if(j.hasPointerCapture(O.pointerId)&&j.releasePointerCapture(O.pointerId),T.current=null,_.current=null,W){const z=O.currentTarget,V={originalEvent:O,delta:W};WR(W,v.swipeDirection,v.swipeThreshold)?o0(Xz,y,V,{discrete:!0}):o0(Jz,m,V,{discrete:!0}),z.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),t6=n=>{const{__scopeToast:e,children:t,...r}=n,s=_b(xv,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return s6(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.jsx(wv,{asChild:!0,children:g.jsx(bb,{...r,children:i&&g.jsxs(g.Fragment,{children:[s.label," ",t]})})})},n6="ToastTitle",e2=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return g.jsx(we.div,{...r,ref:e})});e2.displayName=n6;var r6="ToastDescription",t2=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return g.jsx(we.div,{...r,ref:e})});t2.displayName=r6;var n2="ToastAction",r2=S.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?g.jsx(i2,{altText:t,asChild:!0,children:g.jsx(qA,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${n2}\`. Expected non-empty \`string\`.`),null)});r2.displayName=n2;var s2="ToastClose",qA=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=Zz(s2,t);return g.jsx(i2,{asChild:!0,children:g.jsx(we.button,{type:"button",...r,ref:e,onClick:te(n.onClick,s.onClose)})})});qA.displayName=s2;var i2=S.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return g.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function o2(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),i6(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...o2(r))}}),e}function o0(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?zA(s,i):s.dispatchEvent(i)}var WR=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function s6(n=()=>{}){const e=Ir(n);Dn(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function i6(n){return n.nodeType===n.ELEMENT_NODE}function o6(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function G_(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var a6=YL,a2=XL,l2=ZL,c2=e2,u2=t2,d2=r2,h2=qA;function f2(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=f2(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function p2(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=f2(n))&&(r&&(r+=" "),r+=e);return r}const KR=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,YR=p2,Cb=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return YR(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=t==null?void 0:t[c],f=i==null?void 0:i[c];if(u===null)return null;const m=KR(u)||KR(f);return s[c][m]}),a=t&&Object.entries(t).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...y}=u;return Object.entries(y).every(w=>{let[v,b]=w;return Array.isArray(b)?b.includes({...i,...a}[v]):{...i,...a}[v]===b})?[...c,f,m]:c},[]);return YR(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...c6,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:m2("lucide",s),...a},[...o.map(([c,u])=>S.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(n,e)=>{const t=S.forwardRef(({className:r,...s},i)=>S.createElement(u6,{ref:i,iconNode:e,className:m2(`lucide-${l6(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=it("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=it("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=it("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=it("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=it("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=it("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=it("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=it("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=it("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=it("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=it("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=it("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=it("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=it("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=it("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=it("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KA="-",A6=n=>{const e=R6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(KA);return a[0]===""&&a.length!==1&&a.shift(),b2(a,e)||k6(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},b2=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?b2(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(KA);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},QR=/^\[(.+)\]$/,k6=n=>{if(QR.test(n)){const e=QR.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},R6=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return N6(Object.entries(n.classGroups),t).forEach(([i,o])=>{CS(o,r,i,e)}),r},CS=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ZR(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(P6(s)){CS(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{CS(o,ZR(e,i),t,r)})})},ZR=(n,e)=>{let t=n;return e.split(KA).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},P6=n=>n.isThemeGetter,N6=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,I6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},_2="!",M6=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,f;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){f=b;continue}}x==="["?c++:x==="]"&&c--}const m=l.length===0?a:a.substring(u),y=m.startsWith(_2),w=y?m.substring(1):m,v=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},D6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},L6=n=>({cache:I6(n.cacheSize),parseClassName:M6(n),...A6(n)}),F6=/\s+/,O6=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(F6);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=t(c);let w=!!y,v=r(w?m.substring(0,y):m);if(!v){if(!w){a=c+(a.length>0?" "+a:a);continue}if(v=r(m),!v){a=c+(a.length>0?" "+a:a);continue}w=!1}const b=D6(u).join(":"),x=f?b+_2:b,C=x+v;if(i.includes(C))continue;i.push(C);const _=s(v,w);for(let T=0;T<_.length;++T){const A=_[T];i.push(x+A)}a=c+(a.length>0?" "+a:a)}return a};function U6(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=C2(e))&&(r&&(r+=" "),r+=t);return r}const C2=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=C2(n[r]))&&(t&&(t+=" "),t+=e);return t};function $6(n,...e){let t,r,s,i=o;function o(l){const c=e.reduce((u,f)=>f(u),n());return t=L6(c),r=t.cache.get,s=t.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=O6(l,t);return s(l,u),u}return function(){return i(U6.apply(null,arguments))}}const wt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},S2=/^\[(?:([a-z-]+):)?(.+)\]$/i,j6=/^\d+\/\d+$/,V6=new Set(["px","full","screen"]),B6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,H6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,G6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,q6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bo=n=>Fh(n)||V6.has(n)||j6.test(n),Ga=n=>Rp(n,"length",eH),Fh=n=>!!n&&!Number.isNaN(Number(n)),W_=n=>Rp(n,"number",Fh),tm=n=>!!n&&Number.isInteger(Number(n)),W6=n=>n.endsWith("%")&&Fh(n.slice(0,-1)),$e=n=>S2.test(n),qa=n=>B6.test(n),K6=new Set(["length","size","percentage"]),Y6=n=>Rp(n,K6,E2),J6=n=>Rp(n,"position",E2),X6=new Set(["image","url"]),Q6=n=>Rp(n,X6,nH),Z6=n=>Rp(n,"",tH),nm=()=>!0,Rp=(n,e,t)=>{const r=S2.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},eH=n=>z6.test(n)&&!H6.test(n),E2=()=>!1,tH=n=>G6.test(n),nH=n=>q6.test(n),rH=()=>{const n=wt("colors"),e=wt("spacing"),t=wt("blur"),r=wt("brightness"),s=wt("borderColor"),i=wt("borderRadius"),o=wt("borderSpacing"),a=wt("borderWidth"),l=wt("contrast"),c=wt("grayscale"),u=wt("hueRotate"),f=wt("invert"),m=wt("gap"),y=wt("gradientColorStops"),w=wt("gradientColorStopPositions"),v=wt("inset"),b=wt("margin"),x=wt("opacity"),C=wt("padding"),_=wt("saturate"),T=wt("scale"),A=wt("sepia"),P=wt("skew"),N=wt("space"),I=wt("translate"),M=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",$e,e],$=()=>[$e,e],G=()=>["",bo,Ga],O=()=>["auto",Fh,$e],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",$e],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Fh,$e];return{cacheSize:500,separator:":",theme:{colors:[nm],spacing:[bo,Ga],blur:["none","",qa,$e],brightness:Q(),borderColor:[n],borderRadius:["none","","full",qa,$e],borderSpacing:$(),borderWidth:G(),contrast:Q(),grayscale:U(),hueRotate:Q(),invert:U(),gap:$(),gradientColorStops:[n],gradientColorStopPositions:[W6,Ga],inset:F(),margin:F(),opacity:Q(),padding:$(),saturate:Q(),scale:Q(),sepia:U(),skew:Q(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",$e]}],container:["container"],columns:[{columns:[qa]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),$e]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tm,$e]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$e]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",tm,$e]}],"grid-cols":[{"grid-cols":[nm]}],"col-start-end":[{col:["auto",{span:["full",tm,$e]},$e]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[nm]}],"row-start-end":[{row:["auto",{span:[tm,$e]},$e]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$e]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$e,e]}],"min-w":[{"min-w":[$e,e,"min","max","fit"]}],"max-w":[{"max-w":[$e,e,"none","full","min","max","fit","prose",{screen:[qa]},qa]}],h:[{h:[$e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qa,Ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",W_]}],"font-family":[{font:[nm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$e]}],"line-clamp":[{"line-clamp":["none",Fh,W_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bo,$e]}],"list-image":[{"list-image":["none",$e]}],"list-style-type":[{list:["none","disc","decimal",$e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bo,Ga]}],"underline-offset":[{"underline-offset":["auto",bo,$e]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),J6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Y6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Q6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:j()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[bo,$e]}],"outline-w":[{outline:[bo,Ga]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[bo,Ga]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",qa,Z6]}],"shadow-color":[{shadow:[nm]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qa,$e]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$e]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",$e]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",$e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[tm,$e]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[bo,Ga,W_]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sH=$6(rH);function Ee(...n){return sH(p2(n))}const iH=a6,T2=S.forwardRef(({className:n,...e},t)=>g.jsx(a2,{ref:t,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));T2.displayName=a2.displayName;const oH=Cb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),A2=S.forwardRef(({className:n,variant:e,...t},r)=>g.jsx(l2,{ref:r,className:Ee(oH({variant:e}),n),...t}));A2.displayName=l2.displayName;const aH=S.forwardRef(({className:n,...e},t)=>g.jsx(d2,{ref:t,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));aH.displayName=d2.displayName;const k2=S.forwardRef(({className:n,...e},t)=>g.jsx(h2,{ref:t,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:g.jsx(bv,{className:"h-4 w-4"})}));k2.displayName=h2.displayName;const R2=S.forwardRef(({className:n,...e},t)=>g.jsx(c2,{ref:t,className:Ee("text-sm font-semibold",n),...e}));R2.displayName=c2.displayName;const P2=S.forwardRef(({className:n,...e},t)=>g.jsx(u2,{ref:t,className:Ee("text-sm opacity-90",n),...e}));P2.displayName=u2.displayName;function lH(){const{toasts:n}=Ps();return g.jsxs(iH,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return g.jsxs(A2,{...i,children:[g.jsxs("div",{className:"grid gap-1",children:[t&&g.jsx(R2,{children:t}),r&&g.jsx(P2,{children:r})]}),s,g.jsx(k2,{})]},e)}),g.jsx(T2,{})]})}var cH=(n,e,t,r,s,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(y){(Array.isArray(n)?n:[n]).forEach(w=>{let v=w==="class",b=v&&i?s.map(x=>i[x]||x):s;v?(l.classList.remove(...b),l.classList.add(i&&i[y]?i[y]:y)):l.setAttribute(w,y)}),f(y)}function f(y){a&&c.includes(y)&&(l.style.colorScheme=y)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let y=localStorage.getItem(e)||t,w=o&&y==="system"?m():y;u(w)}catch{}},uH=S.createContext(void 0),dH={setTheme:n=>{},themes:[]},hH=()=>{var n;return(n=S.useContext(uH))!=null?n:dH};S.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([t,e,i,n,a,o,r,s]).slice(1,-1);return S.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${cH.toString()})(${u})`}})});var fH=n=>{switch(n){case"success":return gH;case"info":return vH;case"warning":return yH;case"error":return wH;default:return null}},pH=Array(12).fill(0),mH=({visible:n,className:e})=>K.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},K.createElement("div",{className:"sonner-spinner"},pH.map((t,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),gH=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yH=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vH=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wH=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xH=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bH=()=>{let[n,e]=K.useState(document.hidden);return K.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},SS=1,_H=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:SS++,i=this.toasts.find(a=>a.id===s),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],K.isValidElement(l))s=!1,this.create({id:t,type:"default",message:l});else if(SH(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:u})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:u})}}).finally(()=>{var l;s&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||SS++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sr=new _H,CH=(n,e)=>{let t=(e==null?void 0:e.id)||SS++;return Sr.addToast({title:n,...e,id:t}),t},SH=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",EH=CH,TH=()=>Sr.toasts,AH=()=>Sr.getActiveToasts();Object.assign(EH,{success:Sr.success,info:Sr.info,warning:Sr.warning,error:Sr.error,custom:Sr.custom,message:Sr.message,promise:Sr.promise,dismiss:Sr.dismiss,loading:Sr.loading},{getHistory:TH,getToasts:AH});function kH(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}kH(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function a0(n){return n.label!==void 0}var RH=3,PH="32px",NH="16px",eP=4e3,IH=356,MH=14,DH=20,LH=200;function Os(...n){return n.filter(Boolean).join(" ")}function FH(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var OH=n=>{var e,t,r,s,i,o,a,l,c,u,f;let{invert:m,toast:y,unstyled:w,interacting:v,setHeights:b,visibleToasts:x,heights:C,index:_,toasts:T,expanded:A,removeToast:P,defaultRichColors:N,closeButton:I,style:M,cancelButtonStyle:D,actionButtonStyle:F,className:$="",descriptionClassName:G="",duration:O,position:W,gap:j,loadingIcon:z,expandByDefault:V,classNames:U,icons:H,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:J}=n,[re,ye]=K.useState(null),[Me,De]=K.useState(null),[Y,Se]=K.useState(!1),[se,xe]=K.useState(!1),[Te,ke]=K.useState(!1),[Nt,bn]=K.useState(!1),[_i,Ci]=K.useState(!1),[yo,qd]=K.useState(0),[vo,L]=K.useState(0),B=K.useRef(y.duration||O||eP),q=K.useRef(null),oe=K.useRef(null),ie=_===0,ne=_+1<=x,he=y.type,Ge=y.dismissible!==!1,ct=y.className||"",pr=y.descriptionClassName||"",wo=K.useMemo(()=>C.findIndex(Le=>Le.toastId===y.id)||0,[C,y.id]),Si=K.useMemo(()=>{var Le;return(Le=y.closeButton)!=null?Le:I},[y.closeButton,I]),$v=K.useMemo(()=>y.duration||O||eP,[y.duration,O]),Rc=K.useRef(0),Ei=K.useRef(0),jv=K.useRef(0),xo=K.useRef(null),[p_,Vv]=W.split("-"),Nk=K.useMemo(()=>C.reduce((Le,ut,St)=>St>=wo?Le:Le+ut.height,0),[C,wo]),Ik=bH(),F4=y.invert||m,m_=he==="loading";Ei.current=K.useMemo(()=>wo*j+Nk,[wo,Nk]),K.useEffect(()=>{B.current=$v},[$v]),K.useEffect(()=>{Se(!0)},[]),K.useEffect(()=>{let Le=oe.current;if(Le){let ut=Le.getBoundingClientRect().height;return L(ut),b(St=>[{toastId:y.id,height:ut,position:y.position},...St]),()=>b(St=>St.filter(Ms=>Ms.toastId!==y.id))}},[b,y.id]),K.useLayoutEffect(()=>{if(!Y)return;let Le=oe.current,ut=Le.style.height;Le.style.height="auto";let St=Le.getBoundingClientRect().height;Le.style.height=ut,L(St),b(Ms=>Ms.find(Ds=>Ds.toastId===y.id)?Ms.map(Ds=>Ds.toastId===y.id?{...Ds,height:St}:Ds):[{toastId:y.id,height:St,position:y.position},...Ms])},[Y,y.title,y.description,b,y.id]);let Va=K.useCallback(()=>{xe(!0),qd(Ei.current),b(Le=>Le.filter(ut=>ut.toastId!==y.id)),setTimeout(()=>{P(y)},LH)},[y,P,b,Ei]);K.useEffect(()=>{if(y.promise&&he==="loading"||y.duration===1/0||y.type==="loading")return;let Le;return A||v||J&&Ik?(()=>{if(jv.current<Rc.current){let ut=new Date().getTime()-Rc.current;B.current=B.current-ut}jv.current=new Date().getTime()})():B.current!==1/0&&(Rc.current=new Date().getTime(),Le=setTimeout(()=>{var ut;(ut=y.onAutoClose)==null||ut.call(y,y),Va()},B.current)),()=>clearTimeout(Le)},[A,v,y,he,J,Ik,Va]),K.useEffect(()=>{y.delete&&Va()},[Va,y.delete]);function O4(){var Le,ut,St;return H!=null&&H.loading?K.createElement("div",{className:Os(U==null?void 0:U.loader,(Le=y==null?void 0:y.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":he==="loading"},H.loading):z?K.createElement("div",{className:Os(U==null?void 0:U.loader,(ut=y==null?void 0:y.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":he==="loading"},z):K.createElement(mH,{className:Os(U==null?void 0:U.loader,(St=y==null?void 0:y.classNames)==null?void 0:St.loader),visible:he==="loading"})}return K.createElement("li",{tabIndex:0,ref:oe,className:Os($,ct,U==null?void 0:U.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[he],(t=y==null?void 0:y.classNames)==null?void 0:t[he]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:N,"data-styled":!(y.jsx||y.unstyled||w),"data-mounted":Y,"data-promise":!!y.promise,"data-swiped":_i,"data-removed":se,"data-visible":ne,"data-y-position":p_,"data-x-position":Vv,"data-index":_,"data-front":ie,"data-swiping":Te,"data-dismissible":Ge,"data-type":he,"data-invert":F4,"data-swipe-out":Nt,"data-swipe-direction":Me,"data-expanded":!!(A||V&&Y),style:{"--index":_,"--toasts-before":_,"--z-index":T.length-_,"--offset":`${se?yo:Ei.current}px`,"--initial-height":V?"auto":`${vo}px`,...M,...y.style},onDragEnd:()=>{ke(!1),ye(null),xo.current=null},onPointerDown:Le=>{m_||!Ge||(q.current=new Date,qd(Ei.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(ke(!0),xo.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,ut,St,Ms;if(Nt||!Ge)return;xo.current=null;let Ds=Number(((Le=oe.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ba=Number(((ut=oe.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pc=new Date().getTime()-((St=q.current)==null?void 0:St.getTime()),Ls=re==="x"?Ds:Ba,za=Math.abs(Ls)/Pc;if(Math.abs(Ls)>=DH||za>.11){qd(Ei.current),(Ms=y.onDismiss)==null||Ms.call(y,y),De(re==="x"?Ds>0?"right":"left":Ba>0?"down":"up"),Va(),bn(!0),Ci(!1);return}ke(!1),ye(null)},onPointerMove:Le=>{var ut,St,Ms,Ds;if(!xo.current||!Ge||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;let Ba=Le.clientY-xo.current.y,Pc=Le.clientX-xo.current.x,Ls=(St=n.swipeDirections)!=null?St:FH(W);!re&&(Math.abs(Pc)>1||Math.abs(Ba)>1)&&ye(Math.abs(Pc)>Math.abs(Ba)?"x":"y");let za={x:0,y:0};re==="y"?(Ls.includes("top")||Ls.includes("bottom"))&&(Ls.includes("top")&&Ba<0||Ls.includes("bottom")&&Ba>0)&&(za.y=Ba):re==="x"&&(Ls.includes("left")||Ls.includes("right"))&&(Ls.includes("left")&&Pc<0||Ls.includes("right")&&Pc>0)&&(za.x=Pc),(Math.abs(za.x)>0||Math.abs(za.y)>0)&&Ci(!0),(Ms=oe.current)==null||Ms.style.setProperty("--swipe-amount-x",`${za.x}px`),(Ds=oe.current)==null||Ds.style.setProperty("--swipe-amount-y",`${za.y}px`)}},Si&&!y.jsx?K.createElement("button",{"aria-label":Q,"data-disabled":m_,"data-close-button":!0,onClick:m_||!Ge?()=>{}:()=>{var Le;Va(),(Le=y.onDismiss)==null||Le.call(y,y)},className:Os(U==null?void 0:U.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},(i=H==null?void 0:H.close)!=null?i:xH):null,y.jsx||S.isValidElement(y.title)?y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title:K.createElement(K.Fragment,null,he||y.icon||y.promise?K.createElement("div",{"data-icon":"",className:Os(U==null?void 0:U.icon,(o=y==null?void 0:y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||O4():null,y.type!=="loading"?y.icon||(H==null?void 0:H[he])||fH(he):null):null,K.createElement("div",{"data-content":"",className:Os(U==null?void 0:U.content,(a=y==null?void 0:y.classNames)==null?void 0:a.content)},K.createElement("div",{"data-title":"",className:Os(U==null?void 0:U.title,(l=y==null?void 0:y.classNames)==null?void 0:l.title)},typeof y.title=="function"?y.title():y.title),y.description?K.createElement("div",{"data-description":"",className:Os(G,pr,U==null?void 0:U.description,(c=y==null?void 0:y.classNames)==null?void 0:c.description)},typeof y.description=="function"?y.description():y.description):null),S.isValidElement(y.cancel)?y.cancel:y.cancel&&a0(y.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:Le=>{var ut,St;a0(y.cancel)&&Ge&&((St=(ut=y.cancel).onClick)==null||St.call(ut,Le),Va())},className:Os(U==null?void 0:U.cancelButton,(u=y==null?void 0:y.classNames)==null?void 0:u.cancelButton)},y.cancel.label):null,S.isValidElement(y.action)?y.action:y.action&&a0(y.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||F,onClick:Le=>{var ut,St;a0(y.action)&&((St=(ut=y.action).onClick)==null||St.call(ut,Le),!Le.defaultPrevented&&Va())},className:Os(U==null?void 0:U.actionButton,(f=y==null?void 0:y.classNames)==null?void 0:f.actionButton)},y.action.label):null))};function tP(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function UH(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?NH:PH;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var $H=S.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:f,duration:m,style:y,visibleToasts:w=RH,toastOptions:v,dir:b=tP(),gap:x=MH,loadingIcon:C,icons:_,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:A}=n,[P,N]=K.useState([]),I=K.useMemo(()=>Array.from(new Set([r].concat(P.filter(J=>J.position).map(J=>J.position)))),[P,r]),[M,D]=K.useState([]),[F,$]=K.useState(!1),[G,O]=K.useState(!1),[W,j]=K.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=K.useRef(null),V=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=K.useRef(null),H=K.useRef(!1),Q=K.useCallback(J=>{N(re=>{var ye;return(ye=re.find(Me=>Me.id===J.id))!=null&&ye.delete||Sr.dismiss(J.id),re.filter(({id:Me})=>Me!==J.id)})},[]);return K.useEffect(()=>Sr.subscribe(J=>{if(J.dismiss){N(re=>re.map(ye=>ye.id===J.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{VL.flushSync(()=>{N(re=>{let ye=re.findIndex(Me=>Me.id===J.id);return ye!==-1?[...re.slice(0,ye),{...re[ye],...J},...re.slice(ye+1)]:[J,...re]})})})}),[]),K.useEffect(()=>{if(u!=="system"){j(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?j("dark"):j("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:re})=>{j(re?"dark":"light")})}catch{J.addListener(({matches:ye})=>{try{j(ye?"dark":"light")}catch(Me){console.error(Me)}})}},[u]),K.useEffect(()=>{P.length<=1&&$(!1)},[P]),K.useEffect(()=>{let J=re=>{var ye,Me;s.every(De=>re[De]||re.code===De)&&($(!0),(ye=z.current)==null||ye.focus()),re.code==="Escape"&&(document.activeElement===z.current||(Me=z.current)!=null&&Me.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),K.useEffect(()=>{if(z.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,H.current=!1)}},[z.current]),K.createElement("section",{ref:e,"aria-label":`${T} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((J,re)=>{var ye;let[Me,De]=J.split("-");return P.length?K.createElement("ol",{key:J,dir:b==="auto"?tP():b,tabIndex:-1,ref:z,className:a,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Me,"data-lifted":F&&P.length>1&&!i,"data-x-position":De,style:{"--front-toast-height":`${((ye=M[0])==null?void 0:ye.height)||0}px`,"--width":`${IH}px`,"--gap":`${x}px`,...y,...UH(l,c)},onBlur:Y=>{H.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(H.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||H.current||(H.current=!0,U.current=Y.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{G||$(!1)},onDragEnd:()=>$(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},P.filter(Y=>!Y.position&&re===0||Y.position===J).map((Y,Se)=>{var se,xe;return K.createElement(OH,{key:Y.id,icons:_,index:Se,toast:Y,defaultRichColors:f,duration:(se=v==null?void 0:v.duration)!=null?se:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:w,closeButton:(xe=v==null?void 0:v.closeButton)!=null?xe:o,interacting:G,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Q,toasts:P.filter(Te=>Te.position==Y.position),heights:M.filter(Te=>Te.position==Y.position),setHeights:D,expandByDefault:i,gap:x,loadingIcon:C,expanded:F,pauseWhenPageIsHidden:A,swipeDirections:n.swipeDirections})})):null}))});const jH=({...n})=>{const{theme:e="system"}=hH();return g.jsx($H,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var VH=UM[" useId ".trim().toString()]||(()=>{}),BH=0;function ao(n){const[e,t]=S.useState(VH());return Dn(()=>{t(r=>r??String(BH++))},[n]),e?`radix-${e}`:""}const zH=["top","right","bottom","left"],mc=Math.min,Zr=Math.max,nx=Math.round,l0=Math.floor,lo=n=>({x:n,y:n}),HH={left:"right",right:"left",bottom:"top",top:"bottom"},GH={start:"end",end:"start"};function ES(n,e,t){return Zr(n,mc(e,t))}function Na(n,e){return typeof n=="function"?n(e):n}function Ia(n){return n.split("-")[0]}function Pp(n){return n.split("-")[1]}function YA(n){return n==="x"?"y":"x"}function JA(n){return n==="y"?"height":"width"}function to(n){return["top","bottom"].includes(Ia(n))?"y":"x"}function XA(n){return YA(to(n))}function qH(n,e,t){t===void 0&&(t=!1);const r=Pp(n),s=XA(n),i=JA(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=rx(o)),[o,rx(o)]}function WH(n){const e=rx(n);return[TS(n),e,TS(e)]}function TS(n){return n.replace(/start|end/g,e=>GH[e])}function KH(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function YH(n,e,t,r){const s=Pp(n);let i=KH(Ia(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(TS)))),i}function rx(n){return n.replace(/left|right|bottom|top/g,e=>HH[e])}function JH(n){return{top:0,right:0,bottom:0,left:0,...n}}function N2(n){return typeof n!="number"?JH(n):{top:n,right:n,bottom:n,left:n}}function sx(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function nP(n,e,t){let{reference:r,floating:s}=n;const i=to(e),o=XA(e),a=JA(o),l=Ia(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let y;switch(l){case"top":y={x:u,y:r.y-s.height};break;case"bottom":y={x:u,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Pp(e)){case"start":y[o]-=m*(t&&c?-1:1);break;case"end":y[o]+=m*(t&&c?-1:1);break}return y}const XH=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=nP(c,r,l),m=r,y={},w=0;for(let v=0;v<a.length;v++){const{name:b,fn:x}=a[v],{x:C,y:_,data:T,reset:A}=await x({x:u,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:c,platform:o,elements:{reference:n,floating:e}});u=C??u,f=_??f,y={...y,[b]:{...y[b],...T}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):A.rects),{x:u,y:f}=nP(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:s,middlewareData:y}};async function Cg(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=Na(e,n),w=N2(y),b=a[m?f==="floating"?"reference":"floating":f],x=sx(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(b)))==null||t?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),C=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),T=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},A=sx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:_,strategy:l}):C);return{top:(x.top-A.top+w.top)/T.y,bottom:(A.bottom-x.bottom+w.bottom)/T.y,left:(x.left-A.left+w.left)/T.x,right:(A.right-x.right+w.right)/T.x}}const QH=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Na(n,e)||{};if(c==null)return{};const f=N2(u),m={x:t,y:r},y=XA(s),w=JA(y),v=await o.getDimensions(c),b=y==="y",x=b?"top":"left",C=b?"bottom":"right",_=b?"clientHeight":"clientWidth",T=i.reference[w]+i.reference[y]-m[y]-i.floating[w],A=m[y]-i.reference[y],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=P?P[_]:0;(!N||!await(o.isElement==null?void 0:o.isElement(P)))&&(N=a.floating[_]||i.floating[w]);const I=T/2-A/2,M=N/2-v[w]/2-1,D=mc(f[x],M),F=mc(f[C],M),$=D,G=N-v[w]-F,O=N/2-v[w]/2+I,W=ES($,O,G),j=!l.arrow&&Pp(s)!=null&&O!==W&&i.reference[w]/2-(O<$?D:F)-v[w]/2<0,z=j?O<$?O-$:O-G:0;return{[y]:m[y]+z,data:{[y]:W,centerOffset:O-W-z,...j&&{alignmentOffset:z}},reset:j}}}),ZH=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...b}=Na(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const x=Ia(s),C=to(a),_=Ia(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=m||(_||!v?[rx(a)]:WH(a)),P=w!=="none";!m&&P&&A.push(...YH(a,v,w,T));const N=[a,...A],I=await Cg(e,b),M=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&M.push(I[x]),f){const O=qH(s,o,T);M.push(I[O[0]],I[O[1]])}if(D=[...D,{placement:s,overflows:M}],!M.every(O=>O<=0)){var F,$;const O=(((F=i.flip)==null?void 0:F.index)||0)+1,W=N[O];if(W&&(!(f==="alignment"?C!==to(W):!1)||D.every(V=>V.overflows[0]>0&&to(V.placement)===C)))return{data:{index:O,overflows:D},reset:{placement:W}};let j=($=D.filter(z=>z.overflows[0]<=0).sort((z,V)=>z.overflows[1]-V.overflows[1])[0])==null?void 0:$.placement;if(!j)switch(y){case"bestFit":{var G;const z=(G=D.filter(V=>{if(P){const U=to(V.placement);return U===C||U==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(U=>U>0).reduce((U,H)=>U+H,0)]).sort((V,U)=>V[1]-U[1])[0])==null?void 0:G[0];z&&(j=z);break}case"initialPlacement":j=a;break}if(s!==j)return{reset:{placement:j}}}return{}}}};function rP(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function sP(n){return zH.some(e=>n[e]>=0)}const eG=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Na(n,e);switch(r){case"referenceHidden":{const i=await Cg(e,{...s,elementContext:"reference"}),o=rP(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:sP(o)}}}case"escaped":{const i=await Cg(e,{...s,altBoundary:!0}),o=rP(i,t.floating);return{data:{escapedOffsets:o,escaped:sP(o)}}}default:return{}}}}};async function tG(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ia(t),a=Pp(t),l=to(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=Na(e,n);let{mainAxis:m,crossAxis:y,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof w=="number"&&(y=a==="end"?w*-1:w),l?{x:y*u,y:m*c}:{x:m*c,y:y*u}}const nG=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await tG(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},rG=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:C}=b;return{x,y:C}}},...l}=Na(n,e),c={x:t,y:r},u=await Cg(e,l),f=to(Ia(s)),m=YA(f);let y=c[m],w=c[f];if(i){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",C=y+u[b],_=y-u[x];y=ES(C,y,_)}if(o){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",C=w+u[b],_=w-u[x];w=ES(C,w,_)}const v=a.fn({...e,[m]:y,[f]:w});return{...v,data:{x:v.x-t,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},sG=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Na(n,e),u={x:t,y:r},f=to(s),m=YA(f);let y=u[m],w=u[f];const v=Na(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const _=m==="y"?"height":"width",T=i.reference[m]-i.floating[_]+b.mainAxis,A=i.reference[m]+i.reference[_]-b.mainAxis;y<T?y=T:y>A&&(y=A)}if(c){var x,C;const _=m==="y"?"width":"height",T=["top","left"].includes(Ia(s)),A=i.reference[f]-i.floating[_]+(T&&((x=o.offset)==null?void 0:x[f])||0)+(T?0:b.crossAxis),P=i.reference[f]+i.reference[_]+(T?0:((C=o.offset)==null?void 0:C[f])||0)-(T?b.crossAxis:0);w<A?w=A:w>P&&(w=P)}return{[m]:y,[f]:w}}}},iG=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Na(n,e),u=await Cg(e,c),f=Ia(s),m=Pp(s),y=to(s)==="y",{width:w,height:v}=i.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,b=m==="end"?"top":"bottom");const C=v-u.top-u.bottom,_=w-u.left-u.right,T=mc(v-u[b],C),A=mc(w-u[x],_),P=!e.middlewareData.shift;let N=T,I=A;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=C),P&&!m){const D=Zr(u.left,0),F=Zr(u.right,0),$=Zr(u.top,0),G=Zr(u.bottom,0);y?I=w-2*(D!==0||F!==0?D+F:Zr(u.left,u.right)):N=v-2*($!==0||G!==0?$+G:Zr(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:N});const M=await o.getDimensions(a.floating);return w!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function Sb(){return typeof window<"u"}function Np(n){return I2(n)?(n.nodeName||"").toLowerCase():"#document"}function rs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function go(n){var e;return(e=(I2(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function I2(n){return Sb()?n instanceof Node||n instanceof rs(n).Node:!1}function pi(n){return Sb()?n instanceof Element||n instanceof rs(n).Element:!1}function ho(n){return Sb()?n instanceof HTMLElement||n instanceof rs(n).HTMLElement:!1}function iP(n){return!Sb()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof rs(n).ShadowRoot}function _v(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=mi(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function oG(n){return["table","td","th"].includes(Np(n))}function Eb(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function QA(n){const e=ZA(),t=pi(n)?mi(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function aG(n){let e=gc(n);for(;ho(e)&&!mp(e);){if(QA(e))return e;if(Eb(e))return null;e=gc(e)}return null}function ZA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mp(n){return["html","body","#document"].includes(Np(n))}function mi(n){return rs(n).getComputedStyle(n)}function Tb(n){return pi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function gc(n){if(Np(n)==="html")return n;const e=n.assignedSlot||n.parentNode||iP(n)&&n.host||go(n);return iP(e)?e.host:e}function M2(n){const e=gc(n);return mp(e)?n.ownerDocument?n.ownerDocument.body:n.body:ho(e)&&_v(e)?e:M2(e)}function Sg(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=M2(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=rs(s);if(i){const a=AS(o);return e.concat(o,o.visualViewport||[],_v(s)?s:[],a&&t?Sg(a):[])}return e.concat(s,Sg(s,[],t))}function AS(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function D2(n){const e=mi(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ho(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=nx(t)!==i||nx(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function e1(n){return pi(n)?n:n.contextElement}function Oh(n){const e=e1(n);if(!ho(e))return lo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=D2(e);let o=(i?nx(t.width):t.width)/r,a=(i?nx(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lG=lo(0);function L2(n){const e=rs(n);return!ZA()||!e.visualViewport?lG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cG(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==rs(n)?!1:e}function Cd(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=e1(n);let o=lo(1);e&&(r?pi(r)&&(o=Oh(r)):o=Oh(n));const a=cG(i,t,r)?L2(i):lo(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const m=rs(i),y=r&&pi(r)?rs(r):r;let w=m,v=AS(w);for(;v&&r&&y!==w;){const b=Oh(v),x=v.getBoundingClientRect(),C=mi(v),_=x.left+(v.clientLeft+parseFloat(C.paddingLeft))*b.x,T=x.top+(v.clientTop+parseFloat(C.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,f*=b.y,l+=_,c+=T,w=rs(v),v=AS(w)}}return sx({width:u,height:f,x:l,y:c})}function t1(n,e){const t=Tb(n).scrollLeft;return e?e.left+t:Cd(go(n)).left+t}function F2(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:t1(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function uG(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=go(r),a=e?Eb(e.floating):!1;if(r===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=lo(1);const u=lo(0),f=ho(r);if((f||!f&&!i)&&((Np(r)!=="body"||_v(o))&&(l=Tb(r)),ho(r))){const y=Cd(r);c=Oh(r),u.x=y.x+r.clientLeft,u.y=y.y+r.clientTop}const m=o&&!f&&!i?F2(o,l,!0):lo(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:t.y*c.y-l.scrollTop*c.y+u.y+m.y}}function dG(n){return Array.from(n.getClientRects())}function hG(n){const e=go(n),t=Tb(n),r=n.ownerDocument.body,s=Zr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Zr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+t1(n);const a=-t.scrollTop;return mi(r).direction==="rtl"&&(o+=Zr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function fG(n,e){const t=rs(n),r=go(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=ZA();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function pG(n,e){const t=Cd(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=ho(n)?Oh(n):lo(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function oP(n,e,t){let r;if(e==="viewport")r=fG(n,t);else if(e==="document")r=hG(go(n));else if(pi(e))r=pG(e,t);else{const s=L2(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return sx(r)}function O2(n,e){const t=gc(n);return t===e||!pi(t)||mp(t)?!1:mi(t).position==="fixed"||O2(t,e)}function mG(n,e){const t=e.get(n);if(t)return t;let r=Sg(n,[],!1).filter(a=>pi(a)&&Np(a)!=="body"),s=null;const i=mi(n).position==="fixed";let o=i?gc(n):n;for(;pi(o)&&!mp(o);){const a=mi(o),l=QA(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||_v(o)&&!l&&O2(n,o))?r=r.filter(u=>u!==o):s=a,o=gc(o)}return e.set(n,r),r}function gG(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?Eb(e)?[]:mG(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=oP(e,u,s);return c.top=Zr(f.top,c.top),c.right=mc(f.right,c.right),c.bottom=mc(f.bottom,c.bottom),c.left=Zr(f.left,c.left),c},oP(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yG(n){const{width:e,height:t}=D2(n);return{width:e,height:t}}function vG(n,e,t){const r=ho(e),s=go(e),i=t==="fixed",o=Cd(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=lo(0);function c(){l.x=t1(s)}if(r||!r&&!i)if((Np(e)!=="body"||_v(s))&&(a=Tb(e)),r){const y=Cd(e,!0,i,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?F2(s,a):lo(0),f=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function K_(n){return mi(n).position==="static"}function aP(n,e){if(!ho(n)||mi(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return go(n)===t&&(t=t.ownerDocument.body),t}function U2(n,e){const t=rs(n);if(Eb(n))return t;if(!ho(n)){let s=gc(n);for(;s&&!mp(s);){if(pi(s)&&!K_(s))return s;s=gc(s)}return t}let r=aP(n,e);for(;r&&oG(r)&&K_(r);)r=aP(r,e);return r&&mp(r)&&K_(r)&&!QA(r)?t:r||aG(n)||t}const wG=async function(n){const e=this.getOffsetParent||U2,t=this.getDimensions,r=await t(n.floating);return{reference:vG(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xG(n){return mi(n).direction==="rtl"}const bG={convertOffsetParentRelativeRectToViewportRelativeRect:uG,getDocumentElement:go,getClippingRect:gG,getOffsetParent:U2,getElementRects:wG,getClientRects:dG,getDimensions:yG,getScale:Oh,isElement:pi,isRTL:xG};function $2(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function _G(n,e){let t=null,r;const s=go(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=n.getBoundingClientRect(),{left:u,top:f,width:m,height:y}=c;if(a||e(),!m||!y)return;const w=l0(f),v=l0(s.clientWidth-(u+m)),b=l0(s.clientHeight-(f+y)),x=l0(u),_={rootMargin:-w+"px "+-v+"px "+-b+"px "+-x+"px",threshold:Zr(0,mc(1,l))||1};let T=!0;function A(P){const N=P[0].intersectionRatio;if(N!==l){if(!T)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!$2(c,n.getBoundingClientRect())&&o(),T=!1}try{t=new IntersectionObserver(A,{..._,root:s.ownerDocument})}catch{t=new IntersectionObserver(A,_)}t.observe(n)}return o(!0),i}function CG(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=e1(n),u=s||i?[...c?Sg(c):[],...Sg(e)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",t,{passive:!0}),i&&x.addEventListener("resize",t)});const f=c&&a?_G(c,t):null;let m=-1,y=null;o&&(y=new ResizeObserver(x=>{let[C]=x;C&&C.target===c&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=y)==null||_.observe(e)})),t()}),c&&!l&&y.observe(c),y.observe(e));let w,v=l?Cd(n):null;l&&b();function b(){const x=Cd(n);v&&!$2(v,x)&&t(),v=x,w=requestAnimationFrame(b)}return t(),()=>{var x;u.forEach(C=>{s&&C.removeEventListener("scroll",t),i&&C.removeEventListener("resize",t)}),f==null||f(),(x=y)==null||x.disconnect(),y=null,l&&cancelAnimationFrame(w)}}const SG=nG,EG=rG,TG=ZH,AG=iG,kG=eG,lP=QH,RG=sG,PG=(n,e,t)=>{const r=new Map,s={platform:bG,...t},i={...s.platform,_c:r};return XH(n,e,{...s,platform:i})};var NG=typeof document<"u",IG=function(){},z0=NG?S.useLayoutEffect:IG;function ix(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!ix(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!ix(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function j2(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function cP(n,e){const t=j2(n);return Math.round(e*t)/t}function Y_(n){const e=S.useRef(n);return z0(()=>{e.current=n}),e}function MG(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=S.useState(r);ix(m,r)||y(r);const[w,v]=S.useState(null),[b,x]=S.useState(null),C=S.useCallback(V=>{V!==P.current&&(P.current=V,v(V))},[]),_=S.useCallback(V=>{V!==N.current&&(N.current=V,x(V))},[]),T=i||w,A=o||b,P=S.useRef(null),N=S.useRef(null),I=S.useRef(u),M=l!=null,D=Y_(l),F=Y_(s),$=Y_(c),G=S.useCallback(()=>{if(!P.current||!N.current)return;const V={placement:e,strategy:t,middleware:m};F.current&&(V.platform=F.current),PG(P.current,N.current,V).then(U=>{const H={...U,isPositioned:$.current!==!1};O.current&&!ix(I.current,H)&&(I.current=H,Ud.flushSync(()=>{f(H)}))})},[m,e,t,F,$]);z0(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[c]);const O=S.useRef(!1);z0(()=>(O.current=!0,()=>{O.current=!1}),[]),z0(()=>{if(T&&(P.current=T),A&&(N.current=A),T&&A){if(D.current)return D.current(T,A,G);G()}},[T,A,G,D,M]);const W=S.useMemo(()=>({reference:P,floating:N,setReference:C,setFloating:_}),[C,_]),j=S.useMemo(()=>({reference:T,floating:A}),[T,A]),z=S.useMemo(()=>{const V={position:t,left:0,top:0};if(!j.floating)return V;const U=cP(j.floating,u.x),H=cP(j.floating,u.y);return a?{...V,transform:"translate("+U+"px, "+H+"px)",...j2(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:H}},[t,a,j.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:G,refs:W,elements:j,floatingStyles:z}),[u,G,W,j,z])}const DG=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?lP({element:r.current,padding:s}).fn(t):{}:r?lP({element:r,padding:s}).fn(t):{}}}},LG=(n,e)=>({...SG(n),options:[n,e]}),FG=(n,e)=>({...EG(n),options:[n,e]}),OG=(n,e)=>({...RG(n),options:[n,e]}),UG=(n,e)=>({...TG(n),options:[n,e]}),$G=(n,e)=>({...AG(n),options:[n,e]}),jG=(n,e)=>({...kG(n),options:[n,e]}),VG=(n,e)=>({...DG(n),options:[n,e]});var BG="Arrow",V2=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return g.jsx(we.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});V2.displayName=BG;var zG=V2;function Ab(n){const[e,t]=S.useState(void 0);return Dn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var n1="Popper",[B2,Ip]=hr(n1),[HG,z2]=B2(n1),H2=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return g.jsx(HG,{scope:e,anchor:r,onAnchorChange:s,children:t})};H2.displayName=n1;var G2="PopperAnchor",q2=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=z2(G2,t),o=S.useRef(null),a=Ue(e,o);return S.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.jsx(we.div,{...s,ref:a})});q2.displayName=G2;var r1="PopperContent",[GG,qG]=B2(r1),W2=S.forwardRef((n,e)=>{var Y,Se,se,xe,Te,ke;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:w,...v}=n,b=z2(r1,t),[x,C]=S.useState(null),_=Ue(e,Nt=>C(Nt)),[T,A]=S.useState(null),P=Ab(T),N=(P==null?void 0:P.width)??0,I=(P==null?void 0:P.height)??0,M=r+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(c)?c:[c],$=F.length>0,G={padding:D,boundary:F.filter(KG),altBoundary:$},{refs:O,floatingStyles:W,placement:j,isPositioned:z,middlewareData:V}=MG({strategy:"fixed",placement:M,whileElementsMounted:(...Nt)=>CG(...Nt,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[LG({mainAxis:s+I,alignmentAxis:o}),l&&FG({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?OG():void 0,...G}),l&&UG({...G}),$G({...G,apply:({elements:Nt,rects:bn,availableWidth:_i,availableHeight:Ci})=>{const{width:yo,height:qd}=bn.reference,vo=Nt.floating.style;vo.setProperty("--radix-popper-available-width",`${_i}px`),vo.setProperty("--radix-popper-available-height",`${Ci}px`),vo.setProperty("--radix-popper-anchor-width",`${yo}px`),vo.setProperty("--radix-popper-anchor-height",`${qd}px`)}}),T&&VG({element:T,padding:a}),YG({arrowWidth:N,arrowHeight:I}),m&&jG({strategy:"referenceHidden",...G})]}),[U,H]=J2(j),Q=Ir(w);Dn(()=>{z&&(Q==null||Q())},[z,Q]);const J=(Y=V.arrow)==null?void 0:Y.x,re=(Se=V.arrow)==null?void 0:Se.y,ye=((se=V.arrow)==null?void 0:se.centerOffset)!==0,[Me,De]=S.useState();return Dn(()=>{x&&De(window.getComputedStyle(x).zIndex)},[x]),g.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:z?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(xe=V.transformOrigin)==null?void 0:xe.x,(Te=V.transformOrigin)==null?void 0:Te.y].join(" "),...((ke=V.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:g.jsx(GG,{scope:t,placedSide:U,onArrowChange:A,arrowX:J,arrowY:re,shouldHideArrow:ye,children:g.jsx(we.div,{"data-side":U,"data-align":H,...v,ref:_,style:{...v.style,animation:z?void 0:"none"}})})})});W2.displayName=r1;var K2="PopperArrow",WG={top:"bottom",right:"left",bottom:"top",left:"right"},Y2=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=qG(K2,r),o=WG[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(zG,{...s,ref:t,style:{...s.style,display:"block"}})})});Y2.displayName=K2;function KG(n){return n!==null}var YG=n=>({name:"transformOrigin",options:n,fn(e){var b,x,C;const{placement:t,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=J2(t),f={start:"0%",center:"50%",end:"100%"}[u],m=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,y=(((C=s.arrow)==null?void 0:C.y)??0)+l/2;let w="",v="";return c==="bottom"?(w=o?f:`${m}px`,v=`${-l}px`):c==="top"?(w=o?f:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,v=o?f:`${y}px`):c==="left"&&(w=`${r.floating.width+l}px`,v=o?f:`${y}px`),{data:{x:w,y:v}}}});function J2(n){const[e,t="center"]=n.split("-");return[e,t]}var X2=H2,s1=q2,i1=W2,o1=Y2,[kb,jue]=hr("Tooltip",[Ip]),a1=Ip(),Q2="TooltipProvider",JG=700,uP="tooltip.open",[XG,Z2]=kb(Q2),eF=n=>{const{__scopeTooltip:e,delayDuration:t=JG,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),g.jsx(XG,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};eF.displayName=Q2;var tF="Tooltip",[Vue,Rb]=kb(tF),kS="TooltipTrigger",QG=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Rb(kS,t),i=Z2(kS,t),o=a1(t),a=S.useRef(null),l=Ue(e,a,s.onTriggerChange),c=S.useRef(!1),u=S.useRef(!1),f=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx(s1,{asChild:!0,...o,children:g.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:te(n.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:te(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:te(n.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:te(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:te(n.onBlur,s.onClose),onClick:te(n.onClick,s.onClose)})})});QG.displayName=kS;var ZG="TooltipPortal",[Bue,eq]=kb(ZG,{forceMount:void 0}),gp="TooltipContent",nF=S.forwardRef((n,e)=>{const t=eq(gp,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=Rb(gp,n.__scopeTooltip);return g.jsx(ls,{present:r||o.open,children:o.disableHoverableContent?g.jsx(rF,{side:s,...i,ref:e}):g.jsx(tq,{side:s,...i,ref:e})})}),tq=S.forwardRef((n,e)=>{const t=Rb(gp,n.__scopeTooltip),r=Z2(gp,n.__scopeTooltip),s=S.useRef(null),i=Ue(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:f}=r,m=S.useCallback(()=>{a(null),f(!1)},[f]),y=S.useCallback((w,v)=>{const b=w.currentTarget,x={x:w.clientX,y:w.clientY},C=oq(x,b.getBoundingClientRect()),_=aq(x,C),T=lq(v.getBoundingClientRect()),A=uq([..._,...T]);a(A),f(!0)},[f]);return S.useEffect(()=>()=>m(),[m]),S.useEffect(()=>{if(l&&u){const w=b=>y(b,u),v=b=>y(b,l);return l.addEventListener("pointerleave",w),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",v)}}},[l,u,y,m]),S.useEffect(()=>{if(o){const w=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},C=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),_=!cq(x,o);C?m():_&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,u,o,c,m]),g.jsx(rF,{...n,ref:i})}),[nq,rq]=kb(tF,{isInside:!1}),sq=bz("TooltipContent"),rF=S.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=Rb(gp,t),c=a1(t),{onClose:u}=l;return S.useEffect(()=>(document.addEventListener(uP,u),()=>document.removeEventListener(uP,u)),[u]),S.useEffect(()=>{if(l.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),g.jsx(kp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:g.jsxs(i1,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(sq,{children:r}),g.jsx(nq,{scope:t,isInside:!0,children:g.jsx(zz,{id:l.contentId,role:"tooltip",children:s||r})})]})})});nF.displayName=gp;var sF="TooltipArrow",iq=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=a1(t);return rq(sF,t).isInside?null:g.jsx(o1,{...s,...r,ref:e})});iq.displayName=sF;function oq(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function aq(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function lq(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function cq(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&t<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function uq(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),dq(e)}function dq(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var hq=eF,iF=nF;const fq=hq,pq=S.forwardRef(({className:n,sideOffset:e=4,...t},r)=>g.jsx(iF,{ref:r,sideOffset:e,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));pq.displayName=iF.displayName;var Mp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sd=typeof window>"u"||"Deno"in globalThis;function rr(){}function mq(n,e){return typeof n=="function"?n(e):n}function RS(n){return typeof n=="number"&&n>=0&&n!==1/0}function oF(n,e){return Math.max(n+(e||0)-Date.now(),0)}function cc(n,e){return typeof n=="function"?n(e):n}function oi(n,e){return typeof n=="function"?n(e):n}function dP(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==l1(o,e.options))return!1}else if(!Eg(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function hP(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Ed(e.options.mutationKey)!==Ed(i))return!1}else if(!Eg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function l1(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ed)(n)}function Ed(n){return JSON.stringify(n,(e,t)=>PS(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Eg(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Eg(n[t],e[t])):!1}function aF(n,e){if(n===e)return n;const t=fP(n)&&fP(e);if(t||PS(n)&&PS(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const f=t?u:i[u];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(a[f]=void 0,c++):(a[f]=aF(n[f],e[f]),a[f]===n[f]&&n[f]!==void 0&&c++)}return s===o&&c===s?n:a}return e}function ox(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function fP(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function PS(n){if(!pP(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!pP(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function pP(n){return Object.prototype.toString.call(n)==="[object Object]"}function gq(n){return new Promise(e=>{setTimeout(e,n)})}function NS(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?aF(n,e):e}function yq(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function vq(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var c1=Symbol();function lF(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===c1?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function cF(n,e){return typeof n=="function"?n(...e):!!n}var Xc,ol,Hh,gM,wq=(gM=class extends Mp{constructor(){super();k(this,Xc);k(this,ol);k(this,Hh);E(this,Hh,e=>{if(!Sd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,ol)||this.setEventListener(d(this,Hh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,ol))==null||e.call(this),E(this,ol,void 0))}setEventListener(e){var t;E(this,Hh,e),(t=d(this,ol))==null||t.call(this),E(this,ol,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){d(this,Xc)!==e&&(E(this,Xc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,Xc)=="boolean"?d(this,Xc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xc=new WeakMap,ol=new WeakMap,Hh=new WeakMap,gM),u1=new wq,Gh,al,qh,yM,xq=(yM=class extends Mp{constructor(){super();k(this,Gh,!0);k(this,al);k(this,qh);E(this,qh,e=>{if(!Sd&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){d(this,al)||this.setEventListener(d(this,qh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,al))==null||e.call(this),E(this,al,void 0))}setEventListener(e){var t;E(this,qh,e),(t=d(this,al))==null||t.call(this),E(this,al,e(this.setOnline.bind(this)))}setOnline(e){d(this,Gh)!==e&&(E(this,Gh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return d(this,Gh)}},Gh=new WeakMap,al=new WeakMap,qh=new WeakMap,yM),ax=new xq;function IS(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function bq(n){return Math.min(1e3*2**n,3e4)}function uF(n){return(n??"online")==="online"?ax.isOnline():!0}var dF=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function J_(n){return n instanceof dF}function hF(n){let e=!1,t=0,r=!1,s;const i=IS(),o=v=>{var b;r||(m(new dF(v)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>u1.isFocused()&&(n.networkMode==="always"||ax.isOnline())&&n.canRun(),u=()=>uF(n.networkMode)&&n.canRun(),f=v=>{var b;r||(r=!0,(b=n.onSuccess)==null||b.call(n,v),s==null||s(),i.resolve(v))},m=v=>{var b;r||(r=!0,(b=n.onError)==null||b.call(n,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var b;s=x=>{(r||c())&&v(x)},(b=n.onPause)==null||b.call(n)}).then(()=>{var v;s=void 0,r||(v=n.onContinue)==null||v.call(n)}),w=()=>{if(r)return;let v;const b=t===0?n.initialPromise:void 0;try{v=b??n.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var P;if(r)return;const C=n.retry??(Sd?0:3),_=n.retryDelay??bq,T=typeof _=="function"?_(t,x):_,A=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,x);if(e||!A){m(x);return}t++,(P=n.onFail)==null||P.call(n,t,x),gq(T).then(()=>c()?void 0:y()).then(()=>{e?m(x):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?w():y().then(w),i)}}var _q=n=>setTimeout(n,0);function Cq(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=_q;const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var an=Cq(),Qc,vM,fF=(vM=class{constructor(){k(this,Qc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RS(this.gcTime)&&E(this,Qc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Sd?1/0:5*60*1e3))}clearGcTimeout(){d(this,Qc)&&(clearTimeout(d(this,Qc)),E(this,Qc,void 0))}},Qc=new WeakMap,vM),Wh,Zc,us,eu,jn,Lg,tu,zs,Co,wM,Sq=(wM=class extends fF{constructor(e){super();k(this,zs);k(this,Wh);k(this,Zc);k(this,us);k(this,eu);k(this,jn);k(this,Lg);k(this,tu);E(this,tu,!1),E(this,Lg,e.defaultOptions),this.setOptions(e.options),this.observers=[],E(this,eu,e.client),E(this,us,d(this,eu).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,E(this,Wh,Eq(this.options)),this.state=e.state??d(this,Wh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,jn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Lg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,us).remove(this)}setData(e,t){const r=NS(this.state.data,e,this.options);return R(this,zs,Co).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){R(this,zs,Co).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=d(this,jn))==null?void 0:r.promise;return(s=d(this,jn))==null||s.cancel(e),t?t.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Wh))}isActive(){return this.observers.some(e=>oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===c1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!oF(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,jn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,jn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,us).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,jn)&&(d(this,tu)?d(this,jn).cancel({revert:!0}):d(this,jn).cancelRetry()),this.scheduleGc()),d(this,us).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||R(this,zs,Co).call(this,{type:"invalidate"})}fetch(e,t){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,jn))return d(this,jn).continueRetry(),d(this,jn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(E(this,tu,!0),r.signal)})},i=()=>{const m=lF(this.options,t),w=(()=>{const v={client:d(this,eu),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return E(this,tu,!1),this.options.persister?this.options.persister(m,w,this):m(w)},a=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,eu),state:this.state,fetchFn:i};return s(m),m})();(c=this.options.behavior)==null||c.onFetch(a,this),E(this,Zc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&R(this,zs,Co).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=m=>{var y,w,v,b;J_(m)&&m.silent||R(this,zs,Co).call(this,{type:"error",error:m}),J_(m)||((w=(y=d(this,us).config).onError)==null||w.call(y,m,this),(b=(v=d(this,us).config).onSettled)==null||b.call(v,this.state.data,m,this)),this.scheduleGc()};return E(this,jn,hF({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var y,w,v,b;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(w=(y=d(this,us).config).onSuccess)==null||w.call(y,m,this),(b=(v=d(this,us).config).onSettled)==null||b.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,y)=>{R(this,zs,Co).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{R(this,zs,Co).call(this,{type:"pause"})},onContinue:()=>{R(this,zs,Co).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,jn).start()}},Wh=new WeakMap,Zc=new WeakMap,us=new WeakMap,eu=new WeakMap,jn=new WeakMap,Lg=new WeakMap,tu=new WeakMap,zs=new WeakSet,Co=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pF(r.data,this.options),fetchMeta:e.meta??null};case"success":return E(this,Zc,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return J_(s)&&s.revert&&d(this,Zc)?{...d(this,Zc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),an.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),d(this,us).notify({query:this,type:"updated",action:e})})},wM);function pF(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uF(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Eq(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ni,xM,Tq=(xM=class extends Mp{constructor(e={}){super();k(this,Ni);this.config=e,E(this,Ni,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??l1(s,t);let o=this.get(i);return o||(o=new Sq({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){d(this,Ni).has(e.queryHash)||(d(this,Ni).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,Ni).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,Ni).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,Ni).get(e)}getAll(){return[...d(this,Ni).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>dP(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>dP(e,r)):t}notify(e){an.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){an.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ni=new WeakMap,xM),Ii,Yn,nu,Mi,Wa,bM,Aq=(bM=class extends fF{constructor(e){super();k(this,Mi);k(this,Ii);k(this,Yn);k(this,nu);this.mutationId=e.mutationId,E(this,Yn,e.mutationCache),E(this,Ii,[]),this.state=e.state||mF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,Ii).includes(e)||(d(this,Ii).push(e),this.clearGcTimeout(),d(this,Yn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){E(this,Ii,d(this,Ii).filter(t=>t!==e)),this.scheduleGc(),d(this,Yn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,Ii).length||(this.state.status==="pending"?this.scheduleGc():d(this,Yn).remove(this))}continue(){var e;return((e=d(this,nu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,c,u,f,m,y,w,v,b,x,C,_,T,A,P,N,I;const t=()=>{R(this,Mi,Wa).call(this,{type:"continue"})};E(this,nu,hF({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,D)=>{R(this,Mi,Wa).call(this,{type:"failed",failureCount:M,error:D})},onPause:()=>{R(this,Mi,Wa).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,Yn).canRun(this)}));const r=this.state.status==="pending",s=!d(this,nu).canStart();try{if(r)t();else{R(this,Mi,Wa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=d(this,Yn).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));D!==this.state.context&&R(this,Mi,Wa).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const M=await d(this,nu).start();return await((u=(c=d(this,Yn).config).onSuccess)==null?void 0:u.call(c,M,e,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,M,e,this.state.context)),await((w=(y=d(this,Yn).config).onSettled)==null?void 0:w.call(y,M,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,M,null,e,this.state.context)),R(this,Mi,Wa).call(this,{type:"success",data:M}),M}catch(M){try{throw await((C=(x=d(this,Yn).config).onError)==null?void 0:C.call(x,M,e,this.state.context,this)),await((T=(_=this.options).onError)==null?void 0:T.call(_,M,e,this.state.context)),await((P=(A=d(this,Yn).config).onSettled)==null?void 0:P.call(A,void 0,M,this.state.variables,this.state.context,this)),await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,M,e,this.state.context)),M}finally{R(this,Mi,Wa).call(this,{type:"error",error:M})}}finally{d(this,Yn).runNext(this)}}},Ii=new WeakMap,Yn=new WeakMap,nu=new WeakMap,Mi=new WeakSet,Wa=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),an.batch(()=>{d(this,Ii).forEach(r=>{r.onMutationUpdate(e)}),d(this,Yn).notify({mutation:this,type:"updated",action:e})})},bM);function mF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mo,Hs,Fg,_M,kq=(_M=class extends Mp{constructor(e={}){super();k(this,Mo);k(this,Hs);k(this,Fg);this.config=e,E(this,Mo,new Set),E(this,Hs,new Map),E(this,Fg,0)}build(e,t,r){const s=new Aq({mutationCache:this,mutationId:++un(this,Fg)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){d(this,Mo).add(e);const t=c0(e);if(typeof t=="string"){const r=d(this,Hs).get(t);r?r.push(e):d(this,Hs).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,Mo).delete(e)){const t=c0(e);if(typeof t=="string"){const r=d(this,Hs).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&d(this,Hs).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=c0(e);if(typeof t=="string"){const r=d(this,Hs).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=c0(e);if(typeof t=="string"){const s=(r=d(this,Hs).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){an.batch(()=>{d(this,Mo).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,Mo).clear(),d(this,Hs).clear()})}getAll(){return Array.from(d(this,Mo))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>hP(t,r))}findAll(e={}){return this.getAll().filter(t=>hP(e,t))}notify(e){an.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return an.batch(()=>Promise.all(e.map(t=>t.continue().catch(rr))))}},Mo=new WeakMap,Hs=new WeakMap,Fg=new WeakMap,_M);function c0(n){var e;return(e=n.options.scope)==null?void 0:e.id}function mP(n){return{onFetch:(e,t)=>{var u,f,m,y,w;const r=e.options,s=(m=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=lF(e.options,e.fetchOptions),C=async(_,T,A)=>{if(v)return Promise.reject();if(T==null&&_.pages.length)return Promise.resolve(_);const N=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:T,direction:A?"backward":"forward",meta:e.options.meta};return b(F),F})(),I=await x(N),{maxPages:M}=e.options,D=A?vq:yq;return{pages:D(_.pages,I,M),pageParams:D(_.pageParams,T,M)}};if(s&&i.length){const _=s==="backward",T=_?Rq:gP,A={pages:i,pageParams:o},P=T(r,A);a=await C(A,P,_)}else{const _=n??i.length;do{const T=l===0?o[0]??r.initialPageParam:gP(r,a);if(l>0&&T==null)break;a=await C(a,T),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function gP(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Rq(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ot,ll,cl,Kh,Yh,ul,Jh,Xh,CM,Pq=(CM=class{constructor(n={}){k(this,Ot);k(this,ll);k(this,cl);k(this,Kh);k(this,Yh);k(this,ul);k(this,Jh);k(this,Xh);E(this,Ot,n.queryCache||new Tq),E(this,ll,n.mutationCache||new kq),E(this,cl,n.defaultOptions||{}),E(this,Kh,new Map),E(this,Yh,new Map),E(this,ul,0)}mount(){un(this,ul)._++,d(this,ul)===1&&(E(this,Jh,u1.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,Ot).onFocus())})),E(this,Xh,ax.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,Ot).onOnline())})))}unmount(){var n,e;un(this,ul)._--,d(this,ul)===0&&((n=d(this,Jh))==null||n.call(this),E(this,Jh,void 0),(e=d(this,Xh))==null||e.call(this),E(this,Xh,void 0))}isFetching(n){return d(this,Ot).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,ll).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,Ot).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,Ot).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(cc(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return d(this,Ot).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=d(this,Ot).get(r.queryHash),i=s==null?void 0:s.state.data,o=mq(e,i);if(o!==void 0)return d(this,Ot).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return an.batch(()=>d(this,Ot).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,Ot).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,Ot);an.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,Ot);return an.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=an.batch(()=>d(this,Ot).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(rr).catch(rr)}invalidateQueries(n,e={}){return an.batch(()=>(d(this,Ot).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=an.batch(()=>d(this,Ot).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(rr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(rr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,Ot).build(this,e);return t.isStaleByTime(cc(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(rr).catch(rr)}fetchInfiniteQuery(n){return n.behavior=mP(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(rr).catch(rr)}ensureInfiniteQueryData(n){return n.behavior=mP(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return ax.isOnline()?d(this,ll).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,Ot)}getMutationCache(){return d(this,ll)}getDefaultOptions(){return d(this,cl)}setDefaultOptions(n){E(this,cl,n)}setQueryDefaults(n,e){d(this,Kh).set(Ed(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,Kh).values()],t={};return e.forEach(r=>{Eg(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){d(this,Yh).set(Ed(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,Yh).values()],t={};return e.forEach(r=>{Eg(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,cl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=l1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===c1&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,cl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,Ot).clear(),d(this,ll).clear()}},Ot=new WeakMap,ll=new WeakMap,cl=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,ul=new WeakMap,Jh=new WeakMap,Xh=new WeakMap,CM),vr,We,Og,Jn,ru,Qh,dl,hl,Ug,Zh,ef,su,iu,fl,tf,rt,gm,MS,DS,LS,FS,OS,US,$S,gF,SM,Nq=(SM=class extends Mp{constructor(e,t){super();k(this,rt);k(this,vr);k(this,We);k(this,Og);k(this,Jn);k(this,ru);k(this,Qh);k(this,dl);k(this,hl);k(this,Ug);k(this,Zh);k(this,ef);k(this,su);k(this,iu);k(this,fl);k(this,tf,new Set);this.options=t,E(this,vr,e),E(this,hl,null),E(this,dl,IS()),this.options.experimental_prefetchInRender||d(this,dl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,We).addObserver(this),yP(d(this,We),this.options)?R(this,rt,gm).call(this):this.updateResult(),R(this,rt,FS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jS(d(this,We),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jS(d(this,We),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,R(this,rt,OS).call(this),R(this,rt,US).call(this),d(this,We).removeObserver(this)}setOptions(e){const t=this.options,r=d(this,We);if(this.options=d(this,vr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof oi(this.options.enabled,d(this,We))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");R(this,rt,$S).call(this),d(this,We).setOptions(this.options),t._defaulted&&!ox(this.options,t)&&d(this,vr).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,We),observer:this});const s=this.hasListeners();s&&vP(d(this,We),r,this.options,t)&&R(this,rt,gm).call(this),this.updateResult(),s&&(d(this,We)!==r||oi(this.options.enabled,d(this,We))!==oi(t.enabled,d(this,We))||cc(this.options.staleTime,d(this,We))!==cc(t.staleTime,d(this,We)))&&R(this,rt,MS).call(this);const i=R(this,rt,DS).call(this);s&&(d(this,We)!==r||oi(this.options.enabled,d(this,We))!==oi(t.enabled,d(this,We))||i!==d(this,fl))&&R(this,rt,LS).call(this,i)}getOptimisticResult(e){const t=d(this,vr).getQueryCache().build(d(this,vr),e),r=this.createResult(t,e);return Mq(this,r)&&(E(this,Jn,r),E(this,Qh,this.options),E(this,ru,d(this,We).state)),r}getCurrentResult(){return d(this,Jn)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(r,s))})}trackProp(e){d(this,tf).add(e)}getCurrentQuery(){return d(this,We)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=d(this,vr).defaultQueryOptions(e),r=d(this,vr).getQueryCache().build(d(this,vr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return R(this,rt,gm).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,Jn)))}createResult(e,t){var M;const r=d(this,We),s=this.options,i=d(this,Jn),o=d(this,ru),a=d(this,Qh),c=e!==r?e.state:d(this,Og),{state:u}=e;let f={...u},m=!1,y;if(t._optimisticResults){const D=this.hasListeners(),F=!D&&yP(e,t),$=D&&vP(e,r,t,s);(F||$)&&(f={...f,...pF(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:b}=f;y=f.data;let x=!1;if(t.placeholderData!==void 0&&y===void 0&&b==="pending"){let D;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,x=!0):D=typeof t.placeholderData=="function"?t.placeholderData((M=d(this,ef))==null?void 0:M.state.data,d(this,ef)):t.placeholderData,D!==void 0&&(b="success",y=NS(i==null?void 0:i.data,D,t),m=!0)}if(t.select&&y!==void 0&&!x)if(i&&y===(o==null?void 0:o.data)&&t.select===d(this,Ug))y=d(this,Zh);else try{E(this,Ug,t.select),y=t.select(y),y=NS(i==null?void 0:i.data,y,t),E(this,Zh,y),E(this,hl,null)}catch(D){E(this,hl,D)}d(this,hl)&&(w=d(this,hl),y=d(this,Zh),v=Date.now(),b="error");const C=f.fetchStatus==="fetching",_=b==="pending",T=b==="error",A=_&&C,P=y!==void 0,I={status:b,fetchStatus:f.fetchStatus,isPending:_,isSuccess:b==="success",isError:T,isInitialLoading:A,isLoading:A,data:y,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:C,isRefetching:C&&!_,isLoadingError:T&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&P,isStale:d1(e,t),refetch:this.refetch,promise:d(this,dl)};if(this.options.experimental_prefetchInRender){const D=G=>{I.status==="error"?G.reject(I.error):I.data!==void 0&&G.resolve(I.data)},F=()=>{const G=E(this,dl,I.promise=IS());D(G)},$=d(this,dl);switch($.status){case"pending":e.queryHash===r.queryHash&&D($);break;case"fulfilled":(I.status==="error"||I.data!==$.value)&&F();break;case"rejected":(I.status!=="error"||I.error!==$.reason)&&F();break}}return I}updateResult(){const e=d(this,Jn),t=this.createResult(d(this,We),this.options);if(E(this,ru,d(this,We).state),E(this,Qh,this.options),d(this,ru).data!==void 0&&E(this,ef,d(this,We)),ox(t,e))return;E(this,Jn,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!d(this,tf).size)return!0;const o=new Set(i??d(this,tf));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,Jn)).some(a=>{const l=a;return d(this,Jn)[l]!==e[l]&&o.has(l)})};R(this,rt,gF).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&R(this,rt,FS).call(this)}},vr=new WeakMap,We=new WeakMap,Og=new WeakMap,Jn=new WeakMap,ru=new WeakMap,Qh=new WeakMap,dl=new WeakMap,hl=new WeakMap,Ug=new WeakMap,Zh=new WeakMap,ef=new WeakMap,su=new WeakMap,iu=new WeakMap,fl=new WeakMap,tf=new WeakMap,rt=new WeakSet,gm=function(e){R(this,rt,$S).call(this);let t=d(this,We).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(rr)),t},MS=function(){R(this,rt,OS).call(this);const e=cc(this.options.staleTime,d(this,We));if(Sd||d(this,Jn).isStale||!RS(e))return;const r=oF(d(this,Jn).dataUpdatedAt,e)+1;E(this,su,setTimeout(()=>{d(this,Jn).isStale||this.updateResult()},r))},DS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,We)):this.options.refetchInterval)??!1},LS=function(e){R(this,rt,US).call(this),E(this,fl,e),!(Sd||oi(this.options.enabled,d(this,We))===!1||!RS(d(this,fl))||d(this,fl)===0)&&E(this,iu,setInterval(()=>{(this.options.refetchIntervalInBackground||u1.isFocused())&&R(this,rt,gm).call(this)},d(this,fl)))},FS=function(){R(this,rt,MS).call(this),R(this,rt,LS).call(this,R(this,rt,DS).call(this))},OS=function(){d(this,su)&&(clearTimeout(d(this,su)),E(this,su,void 0))},US=function(){d(this,iu)&&(clearInterval(d(this,iu)),E(this,iu,void 0))},$S=function(){const e=d(this,vr).getQueryCache().build(d(this,vr),this.options);if(e===d(this,We))return;const t=d(this,We);E(this,We,e),E(this,Og,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},gF=function(e){an.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(d(this,Jn))}),d(this,vr).getQueryCache().notify({query:d(this,We),type:"observerResultsUpdated"})})},SM);function Iq(n,e){return oi(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function yP(n,e){return Iq(n,e)||n.state.data!==void 0&&jS(n,e,e.refetchOnMount)}function jS(n,e,t){if(oi(e.enabled,n)!==!1&&cc(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&d1(n,e)}return!1}function vP(n,e,t,r){return(n!==e||oi(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&d1(n,t)}function d1(n,e){return oi(e.enabled,n)!==!1&&n.isStaleByTime(cc(e.staleTime,n))}function Mq(n,e){return!ox(n.getCurrentResult(),e)}var pl,ml,wr,Do,Sa,H0,VS,EM,Dq=(EM=class extends Mp{constructor(t,r){super();k(this,Sa);k(this,pl);k(this,ml);k(this,wr);k(this,Do);E(this,pl,t),this.setOptions(r),this.bindMethods(),R(this,Sa,H0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=d(this,pl).defaultMutationOptions(t),ox(this.options,r)||d(this,pl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,wr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ed(r.mutationKey)!==Ed(this.options.mutationKey)?this.reset():((s=d(this,wr))==null?void 0:s.state.status)==="pending"&&d(this,wr).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=d(this,wr))==null||t.removeObserver(this)}onMutationUpdate(t){R(this,Sa,H0).call(this),R(this,Sa,VS).call(this,t)}getCurrentResult(){return d(this,ml)}reset(){var t;(t=d(this,wr))==null||t.removeObserver(this),E(this,wr,void 0),R(this,Sa,H0).call(this),R(this,Sa,VS).call(this)}mutate(t,r){var s;return E(this,Do,r),(s=d(this,wr))==null||s.removeObserver(this),E(this,wr,d(this,pl).getMutationCache().build(d(this,pl),this.options)),d(this,wr).addObserver(this),d(this,wr).execute(t)}},pl=new WeakMap,ml=new WeakMap,wr=new WeakMap,Do=new WeakMap,Sa=new WeakSet,H0=function(){var r;const t=((r=d(this,wr))==null?void 0:r.state)??mF();E(this,ml,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},VS=function(t){an.batch(()=>{var r,s,i,o,a,l,c,u;if(d(this,Do)&&this.hasListeners()){const f=d(this,ml).variables,m=d(this,ml).context;(t==null?void 0:t.type)==="success"?((s=(r=d(this,Do)).onSuccess)==null||s.call(r,t.data,f,m),(o=(i=d(this,Do)).onSettled)==null||o.call(i,t.data,null,f,m)):(t==null?void 0:t.type)==="error"&&((l=(a=d(this,Do)).onError)==null||l.call(a,t.error,f,m),(u=(c=d(this,Do)).onSettled)==null||u.call(c,void 0,t.error,f,m))}this.listeners.forEach(f=>{f(d(this,ml))})})},EM),yF=S.createContext(void 0),h1=n=>{const e=S.useContext(yF);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Lq=({client:n,children:e})=>(S.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),g.jsx(yF.Provider,{value:n,children:e})),vF=S.createContext(!1),Fq=()=>S.useContext(vF);vF.Provider;function Oq(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Uq=S.createContext(Oq()),$q=()=>S.useContext(Uq),jq=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Vq=n=>{S.useEffect(()=>{n.clearReset()},[n])},Bq=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||cF(t,[n.error,r])),zq=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},Hq=(n,e)=>n.isLoading&&n.isFetching&&!e,Gq=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,wP=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function qq(n,e,t){var f,m,y,w,v;const r=Fq(),s=$q(),i=h1(),o=i.defaultQueryOptions(n);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",zq(o),jq(o,s),Vq(s);const a=!i.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),u=!r&&n.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(b=>{const x=u?l.subscribe(an.batchCalls(b)):rr;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o)},[o,l]),Gq(o,c))throw wP(o,l,s);if(Bq({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,o,c),o.experimental_prefetchInRender&&!Sd&&Hq(c,r)){const b=a?wP(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;b==null||b.catch(rr).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function wF(n,e){return qq(n,Nq)}function xP(n,e){const t=h1(),[r]=S.useState(()=>new Dq(t,n));S.useEffect(()=>{r.setOptions(n)},[r,n]);const s=S.useSyncExternalStore(S.useCallback(o=>r.subscribe(an.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=S.useCallback((o,a)=>{r.mutate(o,a).catch(rr)},[r]);if(s.error&&cF(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var f1={};Object.defineProperty(f1,"__esModule",{value:!0});f1.parse=Zq;f1.serialize=eW;const Wq=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Kq=/^[\u0021-\u003A\u003C-\u007E]*$/,Yq=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Jq=/^[\u0020-\u003A\u003D-\u007E]*$/,Xq=Object.prototype.toString,Qq=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function Zq(n,e){const t=new Qq,r=n.length;if(r<2)return t;const s=(e==null?void 0:e.decode)||tW;let i=0;do{const o=n.indexOf("=",i);if(o===-1)break;const a=n.indexOf(";",i),l=a===-1?r:a;if(o>l){i=n.lastIndexOf(";",o-1)+1;continue}const c=bP(n,i,o),u=_P(n,o,c),f=n.slice(c,u);if(t[f]===void 0){let m=bP(n,o+1,l),y=_P(n,l,m);const w=s(n.slice(m,y));t[f]=w}i=l+1}while(i<r);return t}function bP(n,e,t){do{const r=n.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function _P(n,e,t){for(;e>t;){const r=n.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function eW(n,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!Wq.test(n))throw new TypeError(`argument name is invalid: ${n}`);const s=r(e);if(!Kq.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=n+"="+s;if(!t)return i;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);i+="; Max-Age="+t.maxAge}if(t.domain){if(!Yq.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);i+="; Domain="+t.domain}if(t.path){if(!Jq.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);i+="; Path="+t.path}if(t.expires){if(!nW(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);i+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(i+="; HttpOnly"),t.secure&&(i+="; Secure"),t.partitioned&&(i+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return i}function tW(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function nW(n){return Xq.call(n)==="[object Date]"}var CP="popstate";function rW(n={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return BS("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Tg(s)}return iW(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sW(){return Math.random().toString(36).substring(2,10)}function SP(n,e){return{usr:n.state,key:n.key,idx:e}}function BS(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dp(e):e,state:t,key:e&&e.key||r||sW()}}function Tg({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function iW(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function f(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:x})}function m(b,x){a="PUSH";let C=BS(v.location,b,x);c=u()+1;let _=SP(C,c),T=v.createHref(C);try{o.pushState(_,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(T)}i&&l&&l({action:a,location:v.location,delta:1})}function y(b,x){a="REPLACE";let C=BS(v.location,b,x);c=u();let _=SP(C,c),T=v.createHref(C);o.replaceState(_,"",T),i&&l&&l({action:a,location:v.location,delta:0})}function w(b){return oW(b)}let v={get action(){return a},get location(){return n(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(CP,f),l=b,()=>{s.removeEventListener(CP,f),l=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let x=w(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(b){return o.go(b)}};return v}function oW(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Tg(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function xF(n,e,t="/"){return aW(n,e,t,!1)}function aW(n,e,t,r){let s=typeof e=="string"?Dp(e):e,i=Ma(s.pathname||"/",t);if(i==null)return null;let o=bF(n);lW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=wW(i);a=yW(o[l],c,r)}return a}function bF(n,e=[],t=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Pt(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=wa([r,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(Pt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),bF(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:mW(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of _F(i.path))s(i,o,l)}),e}function _F(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_F(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function lW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gW(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var cW=/^:[\w-]+$/,uW=3,dW=2,hW=1,fW=10,pW=-2,EP=n=>n==="*";function mW(n,e){let t=n.split("/"),r=t.length;return t.some(EP)&&(r+=pW),e&&(r+=dW),t.filter(s=>!EP(s)).reduce((s,i)=>s+(cW.test(i)?uW:i===""?hW:fW),r)}function gW(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function yW(n,e,t=!1){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=lx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=lx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:wa([i,f.pathname]),pathnameBase:CW(wa([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=wa([i,f.pathnameBase]))}return o}function lx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=vW(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:f},m)=>{if(u==="*"){let w=a[m]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[m];return f&&!y?c[u]=void 0:c[u]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function vW(n,e=!1,t=!0){gi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ma(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function xW(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Dp(n):n;return{pathname:t?t.startsWith("/")?t:bW(t,e):e,search:SW(r),hash:EW(s)}}function bW(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function X_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _W(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function p1(n){let e=_W(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function m1(n,e,t,r=!1){let s;typeof n=="string"?s=Dp(n):(s={...n},Pt(!s.pathname||!s.pathname.includes("?"),X_("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),X_("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),X_("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=xW(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var wa=n=>n.join("/").replace(/\/\/+/g,"/"),CW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,EW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function TW(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var CF=["POST","PUT","PATCH","DELETE"];new Set(CF);var AW=["GET",...CF];new Set(AW);var Lp=S.createContext(null);Lp.displayName="DataRouter";var Pb=S.createContext(null);Pb.displayName="DataRouterState";var SF=S.createContext({isTransitioning:!1});SF.displayName="ViewTransition";var kW=S.createContext(new Map);kW.displayName="Fetchers";var RW=S.createContext(null);RW.displayName="Await";var wi=S.createContext(null);wi.displayName="Navigation";var Cv=S.createContext(null);Cv.displayName="Location";var Ns=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var g1=S.createContext(null);g1.displayName="RouteError";function PW(n,{relative:e}={}){Pt(Fp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=S.useContext(wi),{hash:s,pathname:i,search:o}=Sv(n,{relative:e}),a=i;return t!=="/"&&(a=i==="/"?t:wa([t,i])),r.createHref({pathname:a,search:o,hash:s})}function Fp(){return S.useContext(Cv)!=null}function Oa(){return Pt(Fp(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Cv).location}var EF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TF(n){S.useContext(wi).static||S.useLayoutEffect(n)}function $d(){let{isDataRoute:n}=S.useContext(Ns);return n?qW():NW()}function NW(){Pt(Fp(),"useNavigate() may be used only in the context of a <Router> component.");let n=S.useContext(Lp),{basename:e,navigator:t}=S.useContext(wi),{matches:r}=S.useContext(Ns),{pathname:s}=Oa(),i=JSON.stringify(p1(r)),o=S.useRef(!1);return TF(()=>{o.current=!0}),S.useCallback((l,c={})=>{if(gi(o.current,EF),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=m1(l,JSON.parse(i),s,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:wa([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,i,s,n])}var IW=S.createContext(null);function MW(n){let e=S.useContext(Ns).outlet;return e&&S.createElement(IW.Provider,{value:n},e)}function DW(){let{matches:n}=S.useContext(Ns),e=n[n.length-1];return e?e.params:{}}function Sv(n,{relative:e}={}){let{matches:t}=S.useContext(Ns),{pathname:r}=Oa(),s=JSON.stringify(p1(t));return S.useMemo(()=>m1(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function LW(n,e){return AF(n,e)}function AF(n,e,t,r){var x;Pt(Fp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=S.useContext(wi),{matches:i}=S.useContext(Ns),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let C=u&&u.path||"";kF(l,!u||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let f=Oa(),m;if(e){let C=typeof e=="string"?Dp(e):e;Pt(c==="/"||((x=C.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${C.pathname}" was given in the \`location\` prop.`),m=C}else m=f;let y=m.pathname||"/",w=y;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=xF(n,{pathname:w});gi(u||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),gi(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=jW(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:wa([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:wa([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,t,r);return e&&b?S.createElement(Cv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function FW(){let n=GW(),e=TW(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:s},t):null,o)}var OW=S.createElement(FW,null),UW=class extends S.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?S.createElement(Ns.Provider,{value:this.props.routeContext},S.createElement(g1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $W({routeContext:n,match:e,children:t}){let r=S.useContext(Lp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Ns.Provider,{value:n},t)}function jW(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,i=t==null?void 0:t.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Pt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:f}=t,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let f,m=!1,y=null,w=null;t&&(f=i&&c.route.id?i[c.route.id]:void 0,y=c.route.errorElement||OW,o&&(a<0&&u===0?(kF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):a===u&&(m=!0,w=c.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,u+1)),b=()=>{let x;return f?x=y:m?x=w:c.route.Component?x=S.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,S.createElement($W,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?S.createElement(UW,{location:t.location,revalidation:t.revalidation,component:y,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function y1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VW(n){let e=S.useContext(Lp);return Pt(e,y1(n)),e}function BW(n){let e=S.useContext(Pb);return Pt(e,y1(n)),e}function zW(n){let e=S.useContext(Ns);return Pt(e,y1(n)),e}function v1(n){let e=zW(n),t=e.matches[e.matches.length-1];return Pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function HW(){return v1("useRouteId")}function GW(){var r;let n=S.useContext(g1),e=BW("useRouteError"),t=v1("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function qW(){let{router:n}=VW("useNavigate"),e=v1("useNavigate"),t=S.useRef(!1);return TF(()=>{t.current=!0}),S.useCallback(async(s,i={})=>{gi(t.current,EF),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...i}))},[n,e])}var TP={};function kF(n,e,t){!e&&!TP[n]&&(TP[n]=!0,gi(!1,t))}S.memo(WW);function WW({routes:n,future:e,state:t}){return AF(n,void 0,t,e)}function KW({to:n,replace:e,state:t,relative:r}){Pt(Fp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(wi);gi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Ns),{pathname:o}=Oa(),a=$d(),l=m1(n,p1(i),o,r==="path"),c=JSON.stringify(l);return S.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:r})},[a,c,r,e,t]),null}function YW(n){return MW(n.context)}function Dc(n){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JW({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:i=!1}){Pt(!Fp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof t=="string"&&(t=Dp(t));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:m="default"}=t,y=S.useMemo(()=>{let w=Ma(l,o);return w==null?null:{location:{pathname:w,search:c,hash:u,state:f,key:m},navigationType:r}},[o,l,c,u,f,m,r]);return gi(y!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:S.createElement(wi.Provider,{value:a},S.createElement(Cv.Provider,{children:e,value:y}))}function XW({children:n,location:e}){return LW(zS(n),e)}function zS(n,e=[]){let t=[];return S.Children.forEach(n,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){t.push.apply(t,zS(r.props.children,i));return}Pt(r.type===Dc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zS(r.props.children,i)),t.push(o)}),t}var G0="get",q0="application/x-www-form-urlencoded";function Nb(n){return n!=null&&typeof n.tagName=="string"}function QW(n){return Nb(n)&&n.tagName.toLowerCase()==="button"}function ZW(n){return Nb(n)&&n.tagName.toLowerCase()==="form"}function e8(n){return Nb(n)&&n.tagName.toLowerCase()==="input"}function t8(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function n8(n,e){return n.button===0&&(!e||e==="_self")&&!t8(n)}var u0=null;function r8(){if(u0===null)try{new FormData(document.createElement("form"),0),u0=!1}catch{u0=!0}return u0}var s8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q_(n){return n!=null&&!s8.has(n)?(gi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${q0}"`),null):n}function i8(n,e){let t,r,s,i,o;if(ZW(n)){let a=n.getAttribute("action");r=a?Ma(a,e):null,t=n.getAttribute("method")||G0,s=Q_(n.getAttribute("enctype"))||q0,i=new FormData(n)}else if(QW(n)||e8(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ma(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||G0,s=Q_(n.getAttribute("formenctype"))||Q_(a.getAttribute("enctype"))||q0,i=new FormData(a,n),!r8()){let{name:c,type:u,value:f}=n;if(u==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,f)}}else{if(Nb(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=G0,r=null,s=q0,o=n}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:i,body:o}}function w1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function o8(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a8(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function l8(n,e,t){let r=await Promise.all(n.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await o8(i,t);return o.links?o.links():[]}return[]}));return h8(r.flat(1).filter(a8).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function AP(n,e,t,r,s,i){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var f;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function c8(n,e,{includeHydrateFallback:t}={}){return u8(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function u8(n){return[...new Set(n)]}function d8(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function h8(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let i=JSON.stringify(d8(s));return t.has(i)||(t.add(i),r.push({key:i,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f8=new Set([100,101,204,205]);function p8(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ma(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function RF(){let n=S.useContext(Lp);return w1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function m8(){let n=S.useContext(Pb);return w1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var x1=S.createContext(void 0);x1.displayName="FrameworkContext";function PF(){let n=S.useContext(x1);return w1(n,"You must render this element inside a <HydratedRouter> element"),n}function g8(n,e){let t=S.useContext(x1),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,m=S.useRef(null);S.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=x=>{x.forEach(C=>{o(C.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[n]),S.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let y=()=>{s(!0)},w=()=>{s(!1),o(!1)};return t?n!=="intent"?[i,m,{}]:[i,m,{onFocus:rm(a,y),onBlur:rm(l,w),onMouseEnter:rm(c,y),onMouseLeave:rm(u,w),onTouchStart:rm(f,y)}]:[!1,m,{}]}function rm(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function y8({page:n,...e}){let{router:t}=RF(),r=S.useMemo(()=>xF(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?S.createElement(w8,{page:n,matches:r,...e}):null}function v8(n){let{manifest:e,routeModules:t}=PF(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return l8(n,e,t).then(o=>{i||s(o)}),()=>{i=!0}},[n,e,t]),r}function w8({page:n,matches:e,...t}){let r=Oa(),{manifest:s,routeModules:i}=PF(),{basename:o}=RF(),{loaderData:a,matches:l}=m8(),c=S.useMemo(()=>AP(n,e,l,s,r,"data"),[n,e,l,s,r]),u=S.useMemo(()=>AP(n,e,l,s,r,"assets"),[n,e,l,s,r]),f=S.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,v=!1;if(e.forEach(x=>{var _;let C=s.routes[x.route.id];!C||!C.hasLoader||(!c.some(T=>T.route.id===x.route.id)&&x.route.id in a&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||C.hasClientLoader?v=!0:w.add(x.route.id))}),w.size===0)return[];let b=p8(n,o);return v&&w.size>0&&b.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,r,s,c,e,n,i]),m=S.useMemo(()=>c8(u,s),[u,s]),y=v8(u);return S.createElement(S.Fragment,null,f.map(w=>S.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>S.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),y.map(({key:w,link:v})=>S.createElement("link",{key:w,...v})))}function x8(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var NF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NF&&(window.__reactRouterVersion="7.6.3")}catch{}function b8({basename:n,children:e,window:t}){let r=S.useRef();r.current==null&&(r.current=rW({window:t,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(JW,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:s})}var IF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yp=S.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f,...m},y){let{basename:w}=S.useContext(wi),v=typeof c=="string"&&IF.test(c),b,x=!1;if(typeof c=="string"&&v&&(b=c,NF))try{let M=new URL(window.location.href),D=c.startsWith("//")?new URL(M.protocol+c):new URL(c),F=Ma(D.pathname,w);D.origin===M.origin&&F!=null?c=F+D.search+D.hash:x=!0}catch{gi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=PW(c,{relative:s}),[_,T,A]=g8(r,m),P=E8(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:f});function N(M){e&&e(M),M.defaultPrevented||P(M)}let I=S.createElement("a",{...m,...A,href:b||C,onClick:x||i?e:N,ref:x8(y,T),target:l,"data-discover":!v&&t==="render"?"true":void 0});return _&&!v?S.createElement(S.Fragment,null,I,S.createElement(y8,{page:C})):I});yp.displayName="Link";var _8=S.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let f=Sv(o,{relative:c.relative}),m=Oa(),y=S.useContext(Pb),{navigator:w,basename:v}=S.useContext(wi),b=y!=null&&P8(f)&&a===!0,x=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,C=m.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(C=C.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&v&&(_=Ma(_,v)||_);const T=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let A=C===x||!s&&C.startsWith(x)&&C.charAt(T)==="/",P=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),N={isActive:A,isPending:P,isTransitioning:b},I=A?e:void 0,M;typeof r=="function"?M=r(N):M=[r,A?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(N):i;return S.createElement(yp,{...c,"aria-current":I,className:M,ref:u,style:D,to:o,viewTransition:a},typeof l=="function"?l(N):l)});_8.displayName="NavLink";var C8=S.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:i,method:o=G0,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...m},y)=>{let w=k8(),v=R8(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&IF.test(a),C=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,A=(T==null?void 0:T.getAttribute("formmethod"))||o;w(T||_.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return S.createElement("form",{ref:y,method:b,action:v,onSubmit:r?l:C,...m,"data-discover":!x&&n==="render"?"true":void 0})});C8.displayName="Form";function S8(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MF(n){let e=S.useContext(Lp);return Pt(e,S8(n)),e}function E8(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=$d(),l=Oa(),c=Sv(n,{relative:i});return S.useCallback(u=>{if(n8(u,e)){u.preventDefault();let f=t!==void 0?t:Tg(l)===Tg(c);a(n,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,t,r,e,n,s,i,o])}var T8=0,A8=()=>`__${String(++T8)}__`;function k8(){let{router:n}=MF("useSubmit"),{basename:e}=S.useContext(wi),t=HW();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=i8(r,e);if(s.navigate===!1){let u=s.fetcherKey||A8();await n.fetch(u,t,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await n.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function R8(n,{relative:e}={}){let{basename:t}=S.useContext(wi),r=S.useContext(Ns);Pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Sv(n||".",{relative:e})},o=Oa();if(n==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let u=a.toString();i.search=u?`?${u}`:""}}return(!n||n===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:wa([t,i.pathname])),Tg(i)}function P8(n,e={}){let t=S.useContext(SF);Pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MF("useViewTransitionState"),s=Sv(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Ma(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ma(t.nextLocation.pathname,r)||t.nextLocation.pathname;return lx(s.pathname,o)!=null||lx(s.pathname,i)!=null}[...f8];const N8="modulepreload",I8=function(n){return"/"+n},kP={},Ev=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=I8(l),l in kP)return;kP[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":N8,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},M8=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ev(async()=>{const{default:r}=await Promise.resolve().then(()=>Op);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class b1 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class D8 extends b1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class RP extends b1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class PP extends b1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var HS;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(HS||(HS={}));var L8=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class F8{constructor(e,{headers:t={},customFetch:r,region:s=HS.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=M8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return L8(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(v=>{throw new D8(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new RP(f);if(!f.ok)throw new PP(f);let y=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield f.json():y==="application/octet-stream"?w=yield f.blob():y==="text/event-stream"?w=f:y==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof PP||s instanceof RP?s.context:void 0}}})}}var Ar={},_1={},Ib={},Tv={},Mb={},Db={},O8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vp=O8();const U8=vp.fetch,DF=vp.fetch.bind(vp),LF=vp.Headers,$8=vp.Request,j8=vp.Response,Op=Object.freeze(Object.defineProperty({__proto__:null,Headers:LF,Request:$8,Response:j8,default:DF,fetch:U8},Symbol.toStringTag,{value:"Module"})),V8=V4(Op);var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});let B8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Lb.default=B8;var FF=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Db,"__esModule",{value:!0});const z8=FF(V8),H8=FF(Lb);let G8=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=z8.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,f=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,y="OK")}catch{i.status===404&&v===""?(m=204,y="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,y="OK"),c&&this.shouldThrowOnError)throw new H8.default(c)}return{error:c,data:u,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Db.default=G8;var q8=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mb,"__esModule",{value:!0});const W8=q8(Db);let K8=class extends W8.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mb.default=K8;var Y8=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tv,"__esModule",{value:!0});const J8=Y8(Mb);let X8=class extends J8.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Tv.default=X8;var Q8=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ib,"__esModule",{value:!0});const sm=Q8(Tv);let Z8=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new sm.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new sm.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new sm.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new sm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new sm.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ib.default=Z8;var Fb={},Ob={};Object.defineProperty(Ob,"__esModule",{value:!0});Ob.version=void 0;Ob.version="0.0.0-automated";Object.defineProperty(Fb,"__esModule",{value:!0});Fb.DEFAULT_HEADERS=void 0;const e9=Ob;Fb.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e9.version}`};var OF=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_1,"__esModule",{value:!0});const t9=OF(Ib),n9=OF(Tv),r9=Fb;let s9=class UF{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},r9.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new t9.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new UF(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{a.searchParams.append(u,f)})):(o="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new n9.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};_1.default=s9;var Up=As&&As.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.PostgrestError=Ar.PostgrestBuilder=Ar.PostgrestTransformBuilder=Ar.PostgrestFilterBuilder=Ar.PostgrestQueryBuilder=Ar.PostgrestClient=void 0;const $F=Up(_1);Ar.PostgrestClient=$F.default;const jF=Up(Ib);Ar.PostgrestQueryBuilder=jF.default;const VF=Up(Tv);Ar.PostgrestFilterBuilder=VF.default;const BF=Up(Mb);Ar.PostgrestTransformBuilder=BF.default;const zF=Up(Db);Ar.PostgrestBuilder=zF.default;const HF=Up(Lb);Ar.PostgrestError=HF.default;var i9=Ar.default={PostgrestClient:$F.default,PostgrestQueryBuilder:jF.default,PostgrestFilterBuilder:VF.default,PostgrestTransformBuilder:BF.default,PostgrestBuilder:zF.default,PostgrestError:HF.default};const{PostgrestClient:o9,PostgrestQueryBuilder:Yue,PostgrestFilterBuilder:Jue,PostgrestTransformBuilder:Xue,PostgrestBuilder:Que,PostgrestError:Zue}=i9;function a9(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const l9=a9(),c9="2.11.15",u9=`realtime-js/${c9}`,d9="1.0.0",GF=1e4,h9=1e3;var Qm;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Qm||(Qm={}));var $n;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})($n||($n={}));var si;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(si||(si={}));var GS;(function(n){n.websocket="websocket"})(GS||(GS={}));var $c;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})($c||($c={}));class f9{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class qF{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(mt||(mt={}));const NP=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=p9(o,n,e,s),i),{})},p9=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?WF(i,o):qS(o)},WF=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return v9(e,t)}switch(n){case mt.bool:return m9(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return g9(e);case mt.json:case mt.jsonb:return y9(e);case mt.timestamp:return w9(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return qS(e);default:return qS(e)}},qS=n=>n,m9=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},g9=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},y9=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},v9=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>WF(e,a))}return n},w9=n=>typeof n=="string"?n.replace(" ","T"):n,KF=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Z_{constructor(e,t,r={},s=GF){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var IP;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(IP||(IP={}));class Zm{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zm.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Zm.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Zm.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const m=u.map(b=>b.presence_ref),y=f.map(b=>b.presence_ref),w=u.filter(b=>y.indexOf(b.presence_ref)<0),v=f.filter(b=>m.indexOf(b.presence_ref)<0);w.length>0&&(a[c]=w),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(y=>y.presence_ref),m=u.filter(y=>f.indexOf(y.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var MP;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(MP||(MP={}));var DP;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(DP||(DP={}));var Ro;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ro||(Ro={}));class C1{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=$n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Z_(this,si.join,this.params,this.timeout),this.rejoinTimer=new qF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$n.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=$n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$n.errored,this.rejoinTimer.scheduleTimeout())}),this._on(si.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Zm(this),this.broadcastEndpointURL=KF(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==$n.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ro.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ro.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(Ro.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,w=[];for(let v=0;v<y;v++){const b=m[v],{filter:{event:x,schema:C,table:_,filter:T}}=b,A=u&&u[v];if(A&&A.event===x&&A.schema===C&&A.table===_&&A.filter===T)w.push(Object.assign(Object.assign({},b),{id:A.id}));else{this.unsubscribe(),this.state=$n.errored,e==null||e(Ro.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Ro.SUBSCRIBED);return}}).receive("error",u=>{this.state=$n.errored,e==null||e(Ro.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ro.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$n.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(si.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Z_(this,si.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Z_(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=si;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var w,v,b;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(v=y.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var w,v,b,x,C,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const T=y.id,A=(w=y.filter)===null||w===void 0?void 0:w.event;return T&&((v=t.ids)===null||v===void 0?void 0:v.includes(T))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const T=(C=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return T==="*"||T===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:v,table:b,commit_timestamp:x,type:C,errors:_}=w;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:C,new:{},old:{},errors:_}),this._getPayloadRecords(w))}y.callback(m,r)})}_isClosed(){return this.state===$n.closed}_isJoined(){return this.state===$n.joined}_isJoining(){return this.state===$n.joining}_isLeaving(){return this.state===$n.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&C1.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(si.close,{},e)}_onError(e){this._on(si.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$n.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=NP(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=NP(e.columns,e.old_record)),t}}const LP=()=>{},x9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class b9{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=GF,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=LP,this.ref=0,this.logger=LP,this.conn=null,this.sendBuffer=[],this.serializer=new f9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ev(async()=>{const{default:l}=await Promise.resolve().then(()=>Op);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${GS.websocket}`,this.httpEndpoint=KF(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qF(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=l9),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:d9}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qm.connecting:return $c.Connecting;case Qm.open:return $c.Open;case Qm.closing:return $c.Closing;default:return $c.Closed}}isConnected(){return this.connectionState()===$c.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new C1(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:u9};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(si.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(h9,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(si.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([x9],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class S1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function vn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class _9 extends S1{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class WS extends S1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var C9=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const YF=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ev(async()=>{const{default:r}=await Promise.resolve().then(()=>Op);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},S9=()=>C9(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ev(()=>Promise.resolve().then(()=>Op),void 0)).Response:Response}),KS=n=>{if(Array.isArray(n))return n.map(t=>KS(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=KS(r)}),e};var jd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const eC=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),E9=(n,e,t)=>jd(void 0,void 0,void 0,function*(){const r=yield S9();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new _9(eC(s),n.status||500))}).catch(s=>{e(new WS(eC(s),s))}):e(new WS(eC(n),n))}),T9=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function Av(n,e,t,r,s,i){return jd(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,T9(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>E9(l,a,r))})})}function cx(n,e,t,r){return jd(this,void 0,void 0,function*(){return Av(n,"GET",e,t,r)})}function Za(n,e,t,r,s){return jd(this,void 0,void 0,function*(){return Av(n,"POST",e,r,s,t)})}function A9(n,e,t,r,s){return jd(this,void 0,void 0,function*(){return Av(n,"PUT",e,r,s,t)})}function k9(n,e,t,r){return jd(this,void 0,void 0,function*(){return Av(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function JF(n,e,t,r,s){return jd(this,void 0,void 0,function*(){return Av(n,"DELETE",e,r,s,t)})}var mr=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const R9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},FP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class P9{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=YF(s)}uploadOrUpdate(e,t,r,s){return mr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},FP),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(vn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return mr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:FP.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(vn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return mr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Za(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new S1("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}})}update(e,t,r){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return mr(this,void 0,void 0,function*(){try{return{data:yield Za(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(vn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return mr(this,void 0,void 0,function*(){try{return{data:{path:(yield Za(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(vn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return mr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Za(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(vn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return mr(this,void 0,void 0,function*(){try{const s=yield Za(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(vn(s))return{data:null,error:s};throw s}})}download(e,t){return mr(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield cx(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(vn(a))return{data:null,error:a};throw a}})}info(e){return mr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield cx(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:KS(r),error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}})}exists(e){return mr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield k9(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(vn(r)&&r instanceof WS){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return mr(this,void 0,void 0,function*(){try{return{data:yield JF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(vn(t))return{data:null,error:t};throw t}})}list(e,t,r){return mr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},R9),t),{prefix:e||""});return{data:yield Za(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(vn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const N9="2.7.1",I9={"X-Client-Info":`storage-js/${N9}`};var Kd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class M9{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},I9),t),this.fetch=YF(r)}listBuckets(){return Kd(this,void 0,void 0,function*(){try{return{data:yield cx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(vn(e))return{data:null,error:e};throw e}})}getBucket(e){return Kd(this,void 0,void 0,function*(){try{return{data:yield cx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(vn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Kd(this,void 0,void 0,function*(){try{return{data:yield Za(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Kd(this,void 0,void 0,function*(){try{return{data:yield A9(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Kd(this,void 0,void 0,function*(){try{return{data:yield Za(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(vn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kd(this,void 0,void 0,function*(){try{return{data:yield JF(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(vn(t))return{data:null,error:t};throw t}})}}class D9 extends M9{constructor(e,t={},r){super(e,t,r)}from(e){return new P9(this.url,this.headers,e,this.fetch)}}const L9="2.50.3";let ym="";typeof Deno<"u"?ym="deno":typeof document<"u"?ym="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ym="react-native":ym="node";const F9={"X-Client-Info":`supabase-js-${ym}/${L9}`},O9={headers:F9},U9={schema:"public"},$9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j9={};var V9=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const B9=n=>{let e;return n?e=n:typeof fetch>"u"?e=DF:e=fetch,(...t)=>e(...t)},z9=()=>typeof Headers>"u"?LF:Headers,H9=(n,e,t)=>{const r=B9(t),s=z9();return(i,o)=>V9(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var G9=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function q9(n){return n.endsWith("/")?n:n+"/"}function W9(n,e){var t,r;const{db:s,auth:i,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:f}=e,m={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>G9(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const XF="2.70.0",sh=30*1e3,YS=3,tC=YS*sh,K9="http://localhost:9999",Y9="supabase.auth.token",J9={"X-Client-Info":`gotrue-js/${XF}`},JS="X-Supabase-Api-Version",QF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},X9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q9=6e5;class E1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Fe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Z9 extends E1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function e7(n){return Fe(n)&&n.name==="AuthApiError"}class ZF extends E1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Tc extends E1{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Ka extends Tc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t7(n){return Fe(n)&&n.name==="AuthSessionMissingError"}class d0 extends Tc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class h0 extends Tc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class f0 extends Tc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n7(n){return Fe(n)&&n.name==="AuthImplicitGrantRedirectError"}class OP extends Tc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class XS extends Tc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function nC(n){return Fe(n)&&n.name==="AuthRetryableFetchError"}class UP extends Tc{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class eg extends Tc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ux="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$P=` 	
\r=`.split(""),r7=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<$P.length;e+=1)n[$P[e].charCodeAt(0)]=-2;for(let e=0;e<ux.length;e+=1)n[ux[e].charCodeAt(0)]=e;return n})();function jP(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ux[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ux[r]),e.queuedBits-=6}}function eO(n,e,t){const r=r7[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function VP(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{o7(o,r,t)};for(let o=0;o<n.length;o+=1)eO(n.charCodeAt(o),s,i);return e.join("")}function s7(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function i7(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}s7(r,e)}}function o7(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function a7(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)eO(n.charCodeAt(s),t,r);return new Uint8Array(e)}function l7(n){const e=[];return i7(n,t=>e.push(t)),new Uint8Array(e)}function c7(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>jP(s,t,r)),jP(null,t,r),e.join("")}function u7(n){return Math.round(Date.now()/1e3)+n}function d7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Us=()=>typeof window<"u"&&typeof document<"u",Nc={tested:!1,writable:!1},tg=()=>{if(!Us())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nc.tested)return Nc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Nc.tested=!0,Nc.writable=!0}catch{Nc.tested=!0,Nc.writable=!1}return Nc.writable};function h7(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const tO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ev(async()=>{const{default:r}=await Promise.resolve().then(()=>Op);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},f7=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",nO=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},p0=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},m0=async(n,e)=>{await n.removeItem(e)};class Ub{constructor(){this.promise=new Ub.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ub.promiseConstructor=Promise;function rC(n){const e=n.split(".");if(e.length!==3)throw new eg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!X9.test(e[r]))throw new eg("JWT not in base64url format");return{header:JSON.parse(VP(e[0])),payload:JSON.parse(VP(e[1])),signature:a7(e[2]),raw:{header:e[0],payload:e[1]}}}async function p7(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function m7(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function g7(n){return("0"+n.toString(16)).substr(-2)}function y7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,g7).join("")}async function v7(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w7(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await v7(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yd(n,e,t=!1){const r=y7();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await nO(n,`${e}-code-verifier`,s);const i=await w7(r);return[i,r===i?"plain":"s256"]}const x7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b7(n){const e=n.headers.get(JS);if(!e||!e.match(x7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _7(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function C7(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jd(n){if(!S7.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var E7=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Lc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),T7=[502,503,504];async function BP(n){var e;if(!f7(n))throw new XS(Lc(n),0);if(T7.includes(n.status))throw new XS(Lc(n),n.status);let t;try{t=await n.json()}catch(i){throw new ZF(Lc(i),i)}let r;const s=b7(n);if(s&&s.getTime()>=QF["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new UP(Lc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ka}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new UP(Lc(t),n.status,t.weak_password.reasons);throw new Z9(Lc(t),n.status||500,r)}const A7=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function ze(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[JS]||(i[JS]=QF["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await k7(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function k7(n,e,t,r,s,i){const o=A7(e,r,s,i);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new XS(Lc(l),0)}if(a.ok||await BP(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await BP(l)}}function So(n){var e;let t=null;I7(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=u7(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function zP(n){const e=So(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function rl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function R7(n){return{data:n,error:null}}function P7(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=E7(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function N7(n){return n}function I7(n){return n.access_token&&n.refresh_token&&n.expires_in}const sC=["global","local","others"];var M7=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class D7{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=tO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=sC[0]){if(sC.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sC.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=M7(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:P7,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rl})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:N7});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Fe(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Jd(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rl})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Jd(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Jd(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Jd(e.userId);try{const{data:t,error:r}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Jd(e.userId),Jd(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}}const L7={getItem:n=>tg()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{tg()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{tg()&&globalThis.localStorage.removeItem(n)}};function HP(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function F7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xd={debug:!!(globalThis&&tg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rO extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class O7 extends rO{}async function U7(n,e,t){Xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Xd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new O7(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}F7();const $7={url:K9,storageKey:Y9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:J9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function GP(n,e,t){return await t()}class Ag{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ag.nextInstanceID,Ag.nextInstanceID+=1,this.instanceID>0&&Us()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$7),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tO(s.fetch),this.lock=s.lock||GP,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Us()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=U7:this.lock=GP,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:tg()?this.storage=L7:(this.memoryStorage={},this.storage=HP(this.memoryStorage)):(this.memoryStorage={},this.storage=HP(this.memoryStorage)),Us()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${XF}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=h7(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Us()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),n7(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fe(t)?{error:t}:{error:new ZF("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:So}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:u,password:f,options:m}=e;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await Yd(this.storage,this.storageKey)),i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:w},xform:So})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:So})}else throw new h0("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zP})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zP})}else throw new h0("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new d0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,o,a,l,c,u,f,m,y;let w,v;if("message"in e)w=e.message,v=e.signature;else{const{chain:b,wallet:x,statement:C,options:_}=e;let T;if(Us())if(typeof x=="object")T=x;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=x}const A=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),C?{statement:C}:null));let N;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")N=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)N=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${A.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{const{data:b,error:x}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:c7(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:So});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new d0}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Fe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const t=await p0(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:o}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:So});if(await m0(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new d0}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,a=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:So}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new d0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Yd(this.storage,this.storageKey));const{error:f}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new h0("You must provide either an email or phone number.")}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:So});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Yd(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:R7})}catch(i){if(Fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ka;const{error:s}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new h0("You must provide either an email or phone number and a type")}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await p0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<tC:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rl}):await this._useSession(async t=>{var r,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ka}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rl})})}catch(t){if(Fe(t))return t7(t)&&(await this._removeSession(),await m0(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ka;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Yd(this.storage,this.storageKey));const{data:c,error:u}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:rl});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ka;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:o}=rC(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Fe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ka;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Us())throw new f0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new f0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new OP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new f0("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new OP("No code detected.");const{data:C,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new f0("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let m=u+f;l&&(m=parseInt(l));const y=m-u;y*1e3<=sh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const w=m-f;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,u);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await p0(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(e7(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await m0(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=d7(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Yd(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:f,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Us()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await m7(async s=>(s>0&&await p7(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:So})),(s,i)=>{const o=200*Math.pow(2,s);return i&&nC(i)&&Date.now()+o-r<sh})}catch(r){if(this._debug(t,"error",r),Fe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Us()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await p0(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<tC;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${tC}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),nC(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ka;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ub;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ka;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Fe(i)){const o={session:null,error:i};return nC(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nO(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await m0(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Us()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/sh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${sh}ms, refresh threshold is ${YS} ticks`),s<=YS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rO)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Us()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=rC(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Q9>Date.now()))return r;const{data:s,error:i}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new eg("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new eg("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=rC(r);if(_7(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const c=C7(s.alg),u=await this.fetchJwk(s.kid,t),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,l7(`${a}.${l}`)))throw new eg("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Ag.nextInstanceID=0;const j7=Ag;class V7 extends j7{constructor(e){super(e)}}var B7=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class z7{constructor(e,t,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=q9(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:U9,realtime:j9,auth:Object.assign(Object.assign({},$9),{storageKey:c}),global:O9},f=W9(r??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=H9(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new o9(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new F8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new D9(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return B7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new V7({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new b9(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const H7=(n,e,t)=>new z7(n,e,t),G7="https://rlmvnxhichzgxagpkqgc.supabase.co",q7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsbXZueGhpY2h6Z3hhZ3BrcWdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4ODYxNTUsImV4cCI6MjA2NjQ2MjE1NX0.yxFWrAWF_-0Fgr9EYi9HqWMK9tn4pb-91tY-J0n4iL4",_t=H7(G7,q7);class Qd{static async signUp(e){try{const{data:t,error:r}=await _t.auth.signUp({email:e.email,password:e.password});return r?{user:null,error:r.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign up failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signIn(e){try{const{data:t,error:r}=await _t.auth.signInWithPassword({email:e.email,password:e.password});return r?{user:null,error:r.message}:t.user?{user:{id:t.user.id,email:t.user.email,created_at:t.user.created_at},error:null}:{user:null,error:"Sign in failed"}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signInWithGoogle(){try{const{data:e,error:t}=await _t.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/sessions`}});return t?{user:null,error:t.message}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static async signOut(){try{const{error:e}=await _t.auth.signOut();return{error:(e==null?void 0:e.message)||null}}catch{return{error:"An unexpected error occurred"}}}static async getCurrentUser(){try{const{data:{user:e},error:t}=await _t.auth.getUser();return t?{user:null,error:t.message}:e?{user:{id:e.id,email:e.email,created_at:e.created_at},error:null}:{user:null,error:null}}catch{return{user:null,error:"An unexpected error occurred"}}}static onAuthStateChange(e){return _t.auth.onAuthStateChange(async(t,r)=>{if(t==="SIGNED_IN"&&(r!=null&&r.user)){const s={id:r.user.id,email:r.user.email,created_at:r.user.created_at};e(s)}else t==="SIGNED_OUT"&&e(null)})}}const sO=S.createContext(void 0);function W7({children:n}){const[e,t]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{(async()=>{try{const{user:m,error:y}=await Qd.getCurrentUser();y&&console.error("Auth error:",y),t(m)}catch(m){console.error("Error checking user:",m)}finally{s(!1)}})();const{data:{subscription:f}}=Qd.onAuthStateChange(m=>{t(m),s(!1)});return()=>{f==null||f.unsubscribe()}},[]);const c={user:e,loading:r,signIn:async(u,f)=>{try{const{user:m,error:y}=await Qd.signIn({email:u,password:f});return y?{success:!1,error:y}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signUp:async(u,f)=>{try{const{user:m,error:y}=await Qd.signUp({email:u,password:f});return y?{success:!1,error:y}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signInWithGoogle:async()=>{try{const{user:u,error:f}=await Qd.signInWithGoogle();return f?{success:!1,error:f}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},signOut:async()=>{try{await Qd.signOut()}catch(u){console.error("Error signing out:",u)}}};return g.jsx(sO.Provider,{value:c,children:n})}function xi(){const n=S.useContext(sO);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function K7({redirectTo:n="/"}){const{isAuthenticated:e,isLoading:t}=xi();return t?g.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e?g.jsx(YW,{}):g.jsx(KW,{to:n,replace:!0})}class iC{static async createCheckoutSession(e){try{const{data:{user:t}}=await _t.auth.getUser();if(!t)throw new Error("User not authenticated");const r=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e.priceId,userId:t.id,successUrl:e.successUrl,cancelUrl:e.cancelUrl})});if(!r.ok)throw new Error("Failed to create checkout session");const{sessionId:s}=await r.json();return{sessionId:s,error:null}}catch(t){return console.error("Error creating checkout session:",t),{sessionId:null,error:t instanceof Error?t.message:"Unknown error"}}}static async createPortalSession(e){try{const{data:{user:t}}=await _t.auth.getUser();if(!t)throw new Error("User not authenticated");const r=await fetch("/api/stripe/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,returnUrl:e.returnUrl})});if(!r.ok)throw new Error("Failed to create portal session");const{url:s}=await r.json();return{url:s,error:null}}catch(t){return console.error("Error creating portal session:",t),{url:null,error:t instanceof Error?t.message:"Unknown error"}}}static async getSubscriptionStatus(){try{const{data:{user:e}}=await _t.auth.getUser();if(!e)return{subscription:null,error:"User not authenticated"};const{data:t,error:r}=await _t.from("subscriptions").select("*").eq("user_id",e.id).single();return r&&r.code!=="PGRST116"?(console.error("Error fetching subscription from Supabase:",r),{subscription:null,error:r.message}):t?{subscription:{id:t.id,status:t.status,plan:t.plan,currentPeriodEnd:t.current_period_end,stripeCustomerId:t.stripe_customer_id,stripeSubscriptionId:t.stripe_subscription_id},error:null}:{subscription:{id:"free",status:"active",plan:"free",currentPeriodEnd:new Date().toISOString()},error:null}}catch(e){return console.error("Error getting subscription status:",e),{subscription:null,error:e instanceof Error?e.message:"Unknown error"}}}static async handleWebhook(e){try{const{data:{user:t}}=await _t.auth.getUser();if(!t)throw new Error("User not authenticated");switch(e.type){case"checkout.session.completed":await this.handleCheckoutCompleted(e.data.object);break;case"customer.subscription.updated":await this.handleSubscriptionUpdated(e.data.object);break;case"customer.subscription.deleted":await this.handleSubscriptionDeleted(e.data.object);break;default:console.log(`Unhandled event type: ${e.type}`)}}catch(t){throw console.error("Error handling webhook:",t),t}}static async handleCheckoutCompleted(e){var s,i,o,a;const{data:t,error:r}=await _t.from("subscriptions").upsert({user_id:e.customer,stripe_customer_id:e.customer,stripe_subscription_id:e.subscription,plan:"pro",status:"active",current_period_start:new Date(((i=(s=e.subscription_data)==null?void 0:s.subscription)==null?void 0:i.current_period_start)*1e3).toISOString(),current_period_end:new Date(((a=(o=e.subscription_data)==null?void 0:o.subscription)==null?void 0:a.current_period_end)*1e3).toISOString()});if(r)throw console.error("Error updating subscription:",r),r}static async handleSubscriptionUpdated(e){const{data:t,error:r}=await _t.from("subscriptions").update({status:e.status,current_period_start:new Date(e.current_period_start*1e3).toISOString(),current_period_end:new Date(e.current_period_end*1e3).toISOString()}).eq("stripe_subscription_id",e.id);if(r)throw console.error("Error updating subscription:",r),r}static async handleSubscriptionDeleted(e){const{data:t,error:r}=await _t.from("subscriptions").update({status:"canceled"}).eq("stripe_subscription_id",e.id);if(r)throw console.error("Error updating subscription:",r),r}}const iO=S.createContext(void 0);function Y7({children:n}){const[e,t]=S.useState(null),[r,s]=S.useState(!0),i=async()=>{try{s(!0);const{subscription:l,error:c}=await iC.getSubscriptionStatus();if(c){console.error("Error getting subscription status:",c);return}l&&t({id:l.id,status:l.status,plan:l.plan,currentPeriodEnd:l.currentPeriodEnd,stripeCustomerId:l.stripeCustomerId,stripeSubscriptionId:l.stripeSubscriptionId})}catch(l){console.error("Error getting subscription status:",l)}finally{s(!1)}},o=async l=>{try{const{sessionId:c,error:u}=await iC.createCheckoutSession({priceId:l,successUrl:`${window.location.origin}/sessions?success=true`,cancelUrl:`${window.location.origin}/pricing?canceled=true`});if(u){console.error("Error creating checkout session:",u);return}c&&(window.location.href=`https://checkout.stripe.com/pay/${c}`)}catch(c){console.error("Error creating checkout session:",c)}},a=async()=>{try{const{url:l,error:c}=await iC.createPortalSession({returnUrl:`${window.location.origin}/sessions`});if(c){console.error("Error creating portal session:",c);return}l&&(window.location.href=l)}catch(l){console.error("Error creating portal session:",l)}};return S.useEffect(()=>{i()},[]),g.jsx(iO.Provider,{value:{subscription:e,loading:r,createCheckoutSession:o,createPortalSession:a,getSubscriptionStatus:i},children:n})}function J7(){const n=S.useContext(iO);if(n===void 0)throw new Error("useSubscription must be used within a SubscriptionProvider");return n}const X7=Cb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ue=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?BL:"button";return g.jsx(o,{className:Ee(X7({variant:e,size:t,className:n})),ref:i,...s})});ue.displayName="Button";var kv=n=>n.type==="checkbox",Gc=n=>n instanceof Date,sr=n=>n==null;const oO=n=>typeof n=="object";var Ht=n=>!sr(n)&&!Array.isArray(n)&&oO(n)&&!Gc(n),aO=n=>Ht(n)&&n.target?kv(n.target)?n.target.checked:n.target.value:n,Q7=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,lO=(n,e)=>n.has(Q7(e)),Z7=n=>{const e=n.constructor&&n.constructor.prototype;return Ht(e)&&e.hasOwnProperty("isPrototypeOf")},T1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _n(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(T1&&(n instanceof Blob||r))&&(t||Ht(n)))if(e=t?[]:{},!t&&!Z7(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=_n(n[s]));else return n;return e}var $b=n=>/^\w*$/.test(n),Bt=n=>n===void 0,A1=n=>Array.isArray(n)?n.filter(Boolean):[],k1=n=>A1(n.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(n,e,t)=>{if(!e||!Ht(n))return t;const r=($b(e)?[e]:k1(e)).reduce((s,i)=>sr(s)?s:s[i],n);return Bt(r)||r===n?Bt(n[e])?t:n[e]:r},Jr=n=>typeof n=="boolean",nt=(n,e,t)=>{let r=-1;const s=$b(e)?[e]:k1(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=t;if(r!==o){const c=n[a];l=Ht(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}};const dx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},R1=K.createContext(null);R1.displayName="HookFormContext";const jb=()=>K.useContext(R1),eK=n=>{const{children:e,...t}=n;return K.createElement(R1.Provider,{value:t},e)};var cO=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==ai.all&&(e._proxyFormState[o]=!r||ai.all),t&&(t[o]=!0),n[o]}});return s};const P1=typeof window<"u"?S.useLayoutEffect:S.useEffect;function tK(n){const e=jb(),{control:t=e.control,disabled:r,name:s,exact:i}=n||{},[o,a]=K.useState(t._formState),l=K.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return P1(()=>t._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!r&&a({...t._formState,...c})}}),[s,r,i]),K.useEffect(()=>{l.current.isValid&&t._setValid(!0)},[t]),K.useMemo(()=>cO(o,t,l.current,!1),[o,t])}var no=n=>typeof n=="string",uO=(n,e,t,r,s)=>no(n)?(r&&e.watch.add(n),le(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),le(t,i))):(r&&(e.watchAll=!0),t);function nK(n){const e=jb(),{control:t=e.control,name:r,defaultValue:s,disabled:i,exact:o}=n||{},a=K.useRef(s),[l,c]=K.useState(t._getWatch(r,a.current));return P1(()=>t._subscribe({name:r,formState:{values:!0},exact:o,callback:u=>!i&&c(uO(r,t._names,u.values||t._formValues,!1,a.current))}),[r,t,i,o]),K.useEffect(()=>t._removeUnmounted()),l}function rK(n){const e=jb(),{name:t,disabled:r,control:s=e.control,shouldUnregister:i}=n,o=lO(s._names.array,t),a=nK({control:s,name:t,defaultValue:le(s._formValues,t,le(s._defaultValues,t,n.defaultValue)),exact:!0}),l=tK({control:s,name:t,exact:!0}),c=K.useRef(n),u=K.useRef(s.register(t,{...n.rules,value:a,...Jr(n.disabled)?{disabled:n.disabled}:{}})),f=K.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!le(l.errors,t)},isDirty:{enumerable:!0,get:()=>!!le(l.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!le(l.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!le(l.validatingFields,t)},error:{enumerable:!0,get:()=>le(l.errors,t)}}),[l,t]),m=K.useCallback(b=>u.current.onChange({target:{value:aO(b),name:t},type:dx.CHANGE}),[t]),y=K.useCallback(()=>u.current.onBlur({target:{value:le(s._formValues,t),name:t},type:dx.BLUR}),[t,s._formValues]),w=K.useCallback(b=>{const x=le(s._fields,t);x&&b&&(x._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:C=>b.setCustomValidity(C),reportValidity:()=>b.reportValidity()})},[s._fields,t]),v=K.useMemo(()=>({name:t,value:a,...Jr(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:m,onBlur:y,ref:w}),[t,r,l.disabled,m,y,w,a]);return K.useEffect(()=>{const b=s._options.shouldUnregister||i;s.register(t,{...c.current.rules,...Jr(c.current.disabled)?{disabled:c.current.disabled}:{}});const x=(C,_)=>{const T=le(s._fields,C);T&&T._f&&(T._f.mount=_)};if(x(t,!0),b){const C=_n(le(s._options.defaultValues,t));nt(s._defaultValues,t,C),Bt(le(s._formValues,t))&&nt(s._formValues,t,C)}return!o&&s.register(t),()=>{(o?b&&!s._state.action:b)?s.unregister(t):x(t,!1)}},[t,s,o,i]),K.useEffect(()=>{s._setDisabledField({disabled:r,name:t})},[r,t,s]),K.useMemo(()=>({field:v,formState:l,fieldState:f}),[v,l,f])}const sK=n=>n.render(rK(n));var dO=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},ng=n=>Array.isArray(n)?n:[n],qP=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}},QS=n=>sr(n)||!oO(n);function sl(n,e){if(QS(n)||QS(e))return n===e;if(Gc(n)&&Gc(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const s of t){const i=n[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Gc(i)&&Gc(o)||Ht(i)&&Ht(o)||Array.isArray(i)&&Array.isArray(o)?!sl(i,o):i!==o)return!1}}return!0}var Cr=n=>Ht(n)&&!Object.keys(n).length,N1=n=>n.type==="file",li=n=>typeof n=="function",hx=n=>{if(!T1)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},hO=n=>n.type==="select-multiple",I1=n=>n.type==="radio",iK=n=>I1(n)||kv(n),oC=n=>hx(n)&&n.isConnected;function oK(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Bt(n)?r++:n[e[r++]];return n}function aK(n){for(const e in n)if(n.hasOwnProperty(e)&&!Bt(n[e]))return!1;return!0}function Zt(n,e){const t=Array.isArray(e)?e:$b(e)?[e]:k1(e),r=t.length===1?n:oK(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(Ht(r)&&Cr(r)||Array.isArray(r)&&aK(r))&&Zt(n,t.slice(0,-1)),n}var fO=n=>{for(const e in n)if(li(n[e]))return!0;return!1};function fx(n,e={}){const t=Array.isArray(n);if(Ht(n)||t)for(const r in n)Array.isArray(n[r])||Ht(n[r])&&!fO(n[r])?(e[r]=Array.isArray(n[r])?[]:{},fx(n[r],e[r])):sr(n[r])||(e[r]=!0);return e}function pO(n,e,t){const r=Array.isArray(n);if(Ht(n)||r)for(const s in n)Array.isArray(n[s])||Ht(n[s])&&!fO(n[s])?Bt(e)||QS(t[s])?t[s]=Array.isArray(n[s])?fx(n[s],[]):{...fx(n[s])}:pO(n[s],sr(e)?{}:e[s],t[s]):t[s]=!sl(n[s],e[s]);return t}var im=(n,e)=>pO(n,e,fx(e));const WP={value:!1,isValid:!1},KP={value:!0,isValid:!0};var mO=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Bt(n[0].attributes.value)?Bt(n[0].value)||n[0].value===""?KP:{value:n[0].value,isValid:!0}:KP:WP}return WP},gO=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Bt(n)?n:e?n===""?NaN:n&&+n:t&&no(n)?new Date(n):r?r(n):n;const YP={isValid:!1,value:null};var yO=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,YP):YP;function JP(n){const e=n.ref;return N1(e)?e.files:I1(e)?yO(n.refs).value:hO(e)?[...e.selectedOptions].map(({value:t})=>t):kv(e)?mO(n.refs).value:gO(Bt(e.value)?n.ref.value:e.value,n)}var lK=(n,e,t,r)=>{const s={};for(const i of n){const o=le(e,i);o&&nt(s,i,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},px=n=>n instanceof RegExp,om=n=>Bt(n)?n:px(n)?n.source:Ht(n)?px(n.value)?n.value.source:n.value:n,XP=n=>({isOnSubmit:!n||n===ai.onSubmit,isOnBlur:n===ai.onBlur,isOnChange:n===ai.onChange,isOnAll:n===ai.all,isOnTouch:n===ai.onTouched});const QP="AsyncFunction";var cK=n=>!!n&&!!n.validate&&!!(li(n.validate)&&n.validate.constructor.name===QP||Ht(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===QP)),uK=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),ZP=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const rg=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=le(n,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(rg(a,e))break}else if(Ht(a)&&rg(a,e))break}}};function eN(n,e,t){const r=le(n,t);if(r||$b(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=le(e,i),a=le(n,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:t}}var dK=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return Cr(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||ai.all))},hK=(n,e,t)=>!n||!e||n===e||ng(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),fK=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,pK=(n,e)=>!A1(le(n,e)).length&&Zt(n,e),mK=(n,e,t)=>{const r=ng(le(n,t));return nt(r,"root",e[t]),nt(n,t,r),n},W0=n=>no(n);function tN(n,e,t="validate"){if(W0(n)||Array.isArray(n)&&n.every(W0)||Jr(n)&&!n)return{type:t,message:W0(n)?n:"",ref:e}}var Zd=n=>Ht(n)&&!px(n)?n:{value:n,message:""},nN=async(n,e,t,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:f,max:m,pattern:y,validate:w,name:v,valueAsNumber:b,mount:x}=n._f,C=le(t,v);if(!x||e.has(v))return{};const _=a?a[0]:o,T=$=>{s&&_.reportValidity&&(_.setCustomValidity(Jr($)?"":$||""),_.reportValidity())},A={},P=I1(o),N=kv(o),I=P||N,M=(b||N1(o))&&Bt(o.value)&&Bt(C)||hx(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,D=dO.bind(null,v,r,A),F=($,G,O,W=_o.maxLength,j=_o.minLength)=>{const z=$?G:O;A[v]={type:$?W:j,message:z,ref:o,...D($?W:j,z)}};if(i?!Array.isArray(C)||!C.length:l&&(!I&&(M||sr(C))||Jr(C)&&!C||N&&!mO(a).isValid||P&&!yO(a).isValid)){const{value:$,message:G}=W0(l)?{value:!!l,message:l}:Zd(l);if($&&(A[v]={type:_o.required,message:G,ref:_,...D(_o.required,G)},!r))return T(G),A}if(!M&&(!sr(f)||!sr(m))){let $,G;const O=Zd(m),W=Zd(f);if(!sr(C)&&!isNaN(C)){const j=o.valueAsNumber||C&&+C;sr(O.value)||($=j>O.value),sr(W.value)||(G=j<W.value)}else{const j=o.valueAsDate||new Date(C),z=H=>new Date(new Date().toDateString()+" "+H),V=o.type=="time",U=o.type=="week";no(O.value)&&C&&($=V?z(C)>z(O.value):U?C>O.value:j>new Date(O.value)),no(W.value)&&C&&(G=V?z(C)<z(W.value):U?C<W.value:j<new Date(W.value))}if(($||G)&&(F(!!$,O.message,W.message,_o.max,_o.min),!r))return T(A[v].message),A}if((c||u)&&!M&&(no(C)||i&&Array.isArray(C))){const $=Zd(c),G=Zd(u),O=!sr($.value)&&C.length>+$.value,W=!sr(G.value)&&C.length<+G.value;if((O||W)&&(F(O,$.message,G.message),!r))return T(A[v].message),A}if(y&&!M&&no(C)){const{value:$,message:G}=Zd(y);if(px($)&&!C.match($)&&(A[v]={type:_o.pattern,message:G,ref:o,...D(_o.pattern,G)},!r))return T(G),A}if(w){if(li(w)){const $=await w(C,t),G=tN($,_);if(G&&(A[v]={...G,...D(_o.validate,G.message)},!r))return T(G.message),A}else if(Ht(w)){let $={};for(const G in w){if(!Cr($)&&!r)break;const O=tN(await w[G](C,t),_,G);O&&($={...O,...D(G,O.message)},T(O.message),r&&(A[v]=$))}if(!Cr($)&&(A[v]={ref:_,...$},!r))return A}}return T(!0),A};const gK={mode:ai.onSubmit,reValidateMode:ai.onChange,shouldFocusError:!0};function yK(n={}){let e={...gK,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:li(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Ht(e.defaultValues)||Ht(e.values)?_n(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:_n(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:qP(),state:qP()},y=e.criteriaMode===ai.all,w=L=>B=>{clearTimeout(c),c=setTimeout(L,B)},v=async L=>{if(!e.disabled&&(u.isValid||f.isValid||L)){const B=e.resolver?Cr((await N()).errors):await M(r,!0);B!==t.isValid&&m.state.next({isValid:B})}},b=(L,B)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((L||Array.from(a.mount)).forEach(q=>{q&&(B?nt(t.validatingFields,q,B):Zt(t.validatingFields,q))}),m.state.next({validatingFields:t.validatingFields,isValidating:!Cr(t.validatingFields)}))},x=(L,B=[],q,oe,ie=!0,ne=!0)=>{if(oe&&q&&!e.disabled){if(o.action=!0,ne&&Array.isArray(le(r,L))){const he=q(le(r,L),oe.argA,oe.argB);ie&&nt(r,L,he)}if(ne&&Array.isArray(le(t.errors,L))){const he=q(le(t.errors,L),oe.argA,oe.argB);ie&&nt(t.errors,L,he),pK(t.errors,L)}if((u.touchedFields||f.touchedFields)&&ne&&Array.isArray(le(t.touchedFields,L))){const he=q(le(t.touchedFields,L),oe.argA,oe.argB);ie&&nt(t.touchedFields,L,he)}(u.dirtyFields||f.dirtyFields)&&(t.dirtyFields=im(s,i)),m.state.next({name:L,isDirty:F(L,B),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else nt(i,L,B)},C=(L,B)=>{nt(t.errors,L,B),m.state.next({errors:t.errors})},_=L=>{t.errors=L,m.state.next({errors:t.errors,isValid:!1})},T=(L,B,q,oe)=>{const ie=le(r,L);if(ie){const ne=le(i,L,Bt(q)?le(s,L):q);Bt(ne)||oe&&oe.defaultChecked||B?nt(i,L,B?ne:JP(ie._f)):O(L,ne),o.mount&&v()}},A=(L,B,q,oe,ie)=>{let ne=!1,he=!1;const Ge={name:L};if(!e.disabled){if(!q||oe){(u.isDirty||f.isDirty)&&(he=t.isDirty,t.isDirty=Ge.isDirty=F(),ne=he!==Ge.isDirty);const ct=sl(le(s,L),B);he=!!le(t.dirtyFields,L),ct?Zt(t.dirtyFields,L):nt(t.dirtyFields,L,!0),Ge.dirtyFields=t.dirtyFields,ne=ne||(u.dirtyFields||f.dirtyFields)&&he!==!ct}if(q){const ct=le(t.touchedFields,L);ct||(nt(t.touchedFields,L,q),Ge.touchedFields=t.touchedFields,ne=ne||(u.touchedFields||f.touchedFields)&&ct!==q)}ne&&ie&&m.state.next(Ge)}return ne?Ge:{}},P=(L,B,q,oe)=>{const ie=le(t.errors,L),ne=(u.isValid||f.isValid)&&Jr(B)&&t.isValid!==B;if(e.delayError&&q?(l=w(()=>C(L,q)),l(e.delayError)):(clearTimeout(c),l=null,q?nt(t.errors,L,q):Zt(t.errors,L)),(q?!sl(ie,q):ie)||!Cr(oe)||ne){const he={...oe,...ne&&Jr(B)?{isValid:B}:{},errors:t.errors,name:L};t={...t,...he},m.state.next(he)}},N=async L=>{b(L,!0);const B=await e.resolver(i,e.context,lK(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(L),B},I=async L=>{const{errors:B}=await N(L);if(L)for(const q of L){const oe=le(B,q);oe?nt(t.errors,q,oe):Zt(t.errors,q)}else t.errors=B;return B},M=async(L,B,q={valid:!0})=>{for(const oe in L){const ie=L[oe];if(ie){const{_f:ne,...he}=ie;if(ne){const Ge=a.array.has(ne.name),ct=ie._f&&cK(ie._f);ct&&u.validatingFields&&b([oe],!0);const pr=await nN(ie,a.disabled,i,y,e.shouldUseNativeValidation&&!B,Ge);if(ct&&u.validatingFields&&b([oe]),pr[ne.name]&&(q.valid=!1,B))break;!B&&(le(pr,ne.name)?Ge?mK(t.errors,pr,ne.name):nt(t.errors,ne.name,pr[ne.name]):Zt(t.errors,ne.name))}!Cr(he)&&await M(he,B,q)}}return q.valid},D=()=>{for(const L of a.unMount){const B=le(r,L);B&&(B._f.refs?B._f.refs.every(q=>!oC(q)):!oC(B._f.ref))&&Y(L)}a.unMount=new Set},F=(L,B)=>!e.disabled&&(L&&B&&nt(i,L,B),!sl(H(),s)),$=(L,B,q)=>uO(L,a,{...o.mount?i:Bt(B)?s:no(L)?{[L]:B}:B},q,B),G=L=>A1(le(o.mount?i:s,L,e.shouldUnregister?le(s,L,[]):[])),O=(L,B,q={})=>{const oe=le(r,L);let ie=B;if(oe){const ne=oe._f;ne&&(!ne.disabled&&nt(i,L,gO(B,ne)),ie=hx(ne.ref)&&sr(B)?"":B,hO(ne.ref)?[...ne.ref.options].forEach(he=>he.selected=ie.includes(he.value)):ne.refs?kv(ne.ref)?ne.refs.forEach(he=>{(!he.defaultChecked||!he.disabled)&&(Array.isArray(ie)?he.checked=!!ie.find(Ge=>Ge===he.value):he.checked=ie===he.value||!!ie)}):ne.refs.forEach(he=>he.checked=he.value===ie):N1(ne.ref)?ne.ref.value="":(ne.ref.value=ie,ne.ref.type||m.state.next({name:L,values:_n(i)})))}(q.shouldDirty||q.shouldTouch)&&A(L,ie,q.shouldTouch,q.shouldDirty,!0),q.shouldValidate&&U(L)},W=(L,B,q)=>{for(const oe in B){if(!B.hasOwnProperty(oe))return;const ie=B[oe],ne=L+"."+oe,he=le(r,ne);(a.array.has(L)||Ht(ie)||he&&!he._f)&&!Gc(ie)?W(ne,ie,q):O(ne,ie,q)}},j=(L,B,q={})=>{const oe=le(r,L),ie=a.array.has(L),ne=_n(B);nt(i,L,ne),ie?(m.array.next({name:L,values:_n(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&q.shouldDirty&&m.state.next({name:L,dirtyFields:im(s,i),isDirty:F(L,ne)})):oe&&!oe._f&&!sr(ne)?W(L,ne,q):O(L,ne,q),ZP(L,a)&&m.state.next({...t}),m.state.next({name:o.mount?L:void 0,values:_n(i)})},z=async L=>{o.mount=!0;const B=L.target;let q=B.name,oe=!0;const ie=le(r,q),ne=ct=>{oe=Number.isNaN(ct)||Gc(ct)&&isNaN(ct.getTime())||sl(ct,le(i,q,ct))},he=XP(e.mode),Ge=XP(e.reValidateMode);if(ie){let ct,pr;const wo=B.type?JP(ie._f):aO(L),Si=L.type===dx.BLUR||L.type===dx.FOCUS_OUT,$v=!uK(ie._f)&&!e.resolver&&!le(t.errors,q)&&!ie._f.deps||fK(Si,le(t.touchedFields,q),t.isSubmitted,Ge,he),Rc=ZP(q,a,Si);nt(i,q,wo),Si?(ie._f.onBlur&&ie._f.onBlur(L),l&&l(0)):ie._f.onChange&&ie._f.onChange(L);const Ei=A(q,wo,Si),jv=!Cr(Ei)||Rc;if(!Si&&m.state.next({name:q,type:L.type,values:_n(i)}),$v)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?Si&&v():Si||v()),jv&&m.state.next({name:q,...Rc?{}:Ei});if(!Si&&Rc&&m.state.next({...t}),e.resolver){const{errors:xo}=await N([q]);if(ne(wo),oe){const p_=eN(t.errors,r,q),Vv=eN(xo,r,p_.name||q);ct=Vv.error,q=Vv.name,pr=Cr(xo)}}else b([q],!0),ct=(await nN(ie,a.disabled,i,y,e.shouldUseNativeValidation))[q],b([q]),ne(wo),oe&&(ct?pr=!1:(u.isValid||f.isValid)&&(pr=await M(r,!0)));oe&&(ie._f.deps&&U(ie._f.deps),P(q,pr,ct,Ei))}},V=(L,B)=>{if(le(t.errors,B)&&L.focus)return L.focus(),1},U=async(L,B={})=>{let q,oe;const ie=ng(L);if(e.resolver){const ne=await I(Bt(L)?L:ie);q=Cr(ne),oe=L?!ie.some(he=>le(ne,he)):q}else L?(oe=(await Promise.all(ie.map(async ne=>{const he=le(r,ne);return await M(he&&he._f?{[ne]:he}:he)}))).every(Boolean),!(!oe&&!t.isValid)&&v()):oe=q=await M(r);return m.state.next({...!no(L)||(u.isValid||f.isValid)&&q!==t.isValid?{}:{name:L},...e.resolver||!L?{isValid:q}:{},errors:t.errors}),B.shouldFocus&&!oe&&rg(r,V,L?ie:a.mount),oe},H=L=>{const B={...o.mount?i:s};return Bt(L)?B:no(L)?le(B,L):L.map(q=>le(B,q))},Q=(L,B)=>({invalid:!!le((B||t).errors,L),isDirty:!!le((B||t).dirtyFields,L),error:le((B||t).errors,L),isValidating:!!le(t.validatingFields,L),isTouched:!!le((B||t).touchedFields,L)}),J=L=>{L&&ng(L).forEach(B=>Zt(t.errors,B)),m.state.next({errors:L?t.errors:{}})},re=(L,B,q)=>{const oe=(le(r,L,{_f:{}})._f||{}).ref,ie=le(t.errors,L)||{},{ref:ne,message:he,type:Ge,...ct}=ie;nt(t.errors,L,{...ct,...B,ref:oe}),m.state.next({name:L,errors:t.errors,isValid:!1}),q&&q.shouldFocus&&oe&&oe.focus&&oe.focus()},ye=(L,B)=>li(L)?m.state.subscribe({next:q=>L($(void 0,B),q)}):$(L,B,!0),Me=L=>m.state.subscribe({next:B=>{hK(L.name,B.name,L.exact)&&dK(B,L.formState||u,yo,L.reRenderRoot)&&L.callback({values:{...i},...t,...B})}}).unsubscribe,De=L=>(o.mount=!0,f={...f,...L.formState},Me({...L,formState:f})),Y=(L,B={})=>{for(const q of L?ng(L):a.mount)a.mount.delete(q),a.array.delete(q),B.keepValue||(Zt(r,q),Zt(i,q)),!B.keepError&&Zt(t.errors,q),!B.keepDirty&&Zt(t.dirtyFields,q),!B.keepTouched&&Zt(t.touchedFields,q),!B.keepIsValidating&&Zt(t.validatingFields,q),!e.shouldUnregister&&!B.keepDefaultValue&&Zt(s,q);m.state.next({values:_n(i)}),m.state.next({...t,...B.keepDirty?{isDirty:F()}:{}}),!B.keepIsValid&&v()},Se=({disabled:L,name:B})=>{(Jr(L)&&o.mount||L||a.disabled.has(B))&&(L?a.disabled.add(B):a.disabled.delete(B))},se=(L,B={})=>{let q=le(r,L);const oe=Jr(B.disabled)||Jr(e.disabled);return nt(r,L,{...q||{},_f:{...q&&q._f?q._f:{ref:{name:L}},name:L,mount:!0,...B}}),a.mount.add(L),q?Se({disabled:Jr(B.disabled)?B.disabled:e.disabled,name:L}):T(L,!0,B.value),{...oe?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:om(B.min),max:om(B.max),minLength:om(B.minLength),maxLength:om(B.maxLength),pattern:om(B.pattern)}:{},name:L,onChange:z,onBlur:z,ref:ie=>{if(ie){se(L,B),q=le(r,L);const ne=Bt(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,he=iK(ne),Ge=q._f.refs||[];if(he?Ge.find(ct=>ct===ne):ne===q._f.ref)return;nt(r,L,{_f:{...q._f,...he?{refs:[...Ge.filter(oC),ne,...Array.isArray(le(s,L))?[{}]:[]],ref:{type:ne.type,name:L}}:{ref:ne}}}),T(L,!1,void 0,ne)}else q=le(r,L,{}),q._f&&(q._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(lO(a.array,L)&&o.action)&&a.unMount.add(L)}}},xe=()=>e.shouldFocusError&&rg(r,V,a.mount),Te=L=>{Jr(L)&&(m.state.next({disabled:L}),rg(r,(B,q)=>{const oe=le(r,q);oe&&(B.disabled=oe._f.disabled||L,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(ie=>{ie.disabled=oe._f.disabled||L}))},0,!1))},ke=(L,B)=>async q=>{let oe;q&&(q.preventDefault&&q.preventDefault(),q.persist&&q.persist());let ie=_n(i);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:he}=await N();t.errors=ne,ie=he}else await M(r);if(a.disabled.size)for(const ne of a.disabled)nt(ie,ne,void 0);if(Zt(t.errors,"root"),Cr(t.errors)){m.state.next({errors:{}});try{await L(ie,q)}catch(ne){oe=ne}}else B&&await B({...t.errors},q),xe(),setTimeout(xe);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cr(t.errors)&&!oe,submitCount:t.submitCount+1,errors:t.errors}),oe)throw oe},Nt=(L,B={})=>{le(r,L)&&(Bt(B.defaultValue)?j(L,_n(le(s,L))):(j(L,B.defaultValue),nt(s,L,_n(B.defaultValue))),B.keepTouched||Zt(t.touchedFields,L),B.keepDirty||(Zt(t.dirtyFields,L),t.isDirty=B.defaultValue?F(L,_n(le(s,L))):F()),B.keepError||(Zt(t.errors,L),u.isValid&&v()),m.state.next({...t}))},bn=(L,B={})=>{const q=L?_n(L):s,oe=_n(q),ie=Cr(L),ne=ie?s:oe;if(B.keepDefaultValues||(s=q),!B.keepValues){if(B.keepDirtyValues){const he=new Set([...a.mount,...Object.keys(im(s,i))]);for(const Ge of Array.from(he))le(t.dirtyFields,Ge)?nt(ne,Ge,le(i,Ge)):j(Ge,le(ne,Ge))}else{if(T1&&Bt(L))for(const he of a.mount){const Ge=le(r,he);if(Ge&&Ge._f){const ct=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(hx(ct)){const pr=ct.closest("form");if(pr){pr.reset();break}}}}for(const he of a.mount)j(he,le(ne,he))}i=_n(ne),m.array.next({values:{...ne}}),m.state.next({values:{...ne}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:B.keepSubmitCount?t.submitCount:0,isDirty:ie?!1:B.keepDirty?t.isDirty:!!(B.keepDefaultValues&&!sl(L,s)),isSubmitted:B.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:ie?{}:B.keepDirtyValues?B.keepDefaultValues&&i?im(s,i):t.dirtyFields:B.keepDefaultValues&&L?im(s,L):B.keepDirty?t.dirtyFields:{},touchedFields:B.keepTouched?t.touchedFields:{},errors:B.keepErrors?t.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},_i=(L,B)=>bn(li(L)?L(i):L,B),Ci=(L,B={})=>{const q=le(r,L),oe=q&&q._f;if(oe){const ie=oe.refs?oe.refs[0]:oe.ref;ie.focus&&(ie.focus(),B.shouldSelect&&li(ie.select)&&ie.select())}},yo=L=>{t={...t,...L}},vo={control:{register:se,unregister:Y,getFieldState:Q,handleSubmit:ke,setError:re,_subscribe:Me,_runSchema:N,_focusError:xe,_getWatch:$,_getDirty:F,_setValid:v,_setFieldArray:x,_setDisabledField:Se,_setErrors:_,_getFieldArray:G,_reset:bn,_resetDefaultValues:()=>li(e.defaultValues)&&e.defaultValues().then(L=>{_i(L,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Te,_subjects:m,_proxyFormState:u,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(L){o=L},get _defaultValues(){return s},get _names(){return a},set _names(L){a=L},get _formState(){return t},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:De,trigger:U,register:se,handleSubmit:ke,watch:ye,setValue:j,getValues:H,reset:_i,resetField:Nt,clearErrors:J,unregister:Y,setError:re,setFocus:Ci,getFieldState:Q};return{...vo,formControl:vo}}function vO(n={}){const e=K.useRef(void 0),t=K.useRef(void 0),[r,s]=K.useState({isDirty:!1,isValidating:!1,isLoading:li(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:li(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:r},n.defaultValues&&!li(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=yK(n);e.current={...a,formState:r}}const i=e.current.control;return i._options=n,P1(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),K.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),K.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),K.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),K.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),K.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),K.useEffect(()=>{n.values&&!sl(n.values,t.current)?(i._reset(n.values,i._options.resetOptions),t.current=n.values,s(o=>({...o}))):i._resetDefaultValues()},[i,n.values]),K.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=cO(r,i),e.current}const rN=(n,e,t)=>{if(n&&"reportValidity"in n){const r=le(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},wO=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?rN(r.ref,t,n):r.refs&&r.refs.forEach(s=>rN(s,t,n))}},vK=(n,e)=>{e.shouldUseNativeValidation&&wO(n,e);const t={};for(const r in n){const s=le(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(wK(e.names||Object.keys(n),r)){const o=Object.assign({},le(t,r));nt(o,"root",i),nt(t,r,o)}else nt(t,r,i)}return t},wK=(n,e)=>n.some(t=>t.startsWith(e+"."));var xK=function(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return n.push(f)})}),e){var l=t[o].types,c=l&&l[r.code];t[o]=dO(o,e,t,s,c?[].concat(c,r.message):r.message)}n.shift()}return t},xO=function(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&wO({},i),{errors:{},values:t.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:vK(xK(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},et;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(et||(et={}));var sN;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(sN||(sN={}));const ge=et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),el=n=>{switch(typeof n){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return Number.isNaN(n)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(n)?ge.array:n===null?ge.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ge.promise:typeof Map<"u"&&n instanceof Map?ge.map:typeof Set<"u"&&n instanceof Set?ge.set:typeof Date<"u"&&n instanceof Date?ge.date:ge.object;default:return ge.unknown}},ee=et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Da extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Da))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Da.create=n=>new Da(n);const ZS=(n,e)=>{let t;switch(n.code){case ee.invalid_type:n.received===ge.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ee.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,et.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:t=`Unrecognized key(s) in object: ${et.joinValues(n.keys,", ")}`;break;case ee.invalid_union:t="Invalid input";break;case ee.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${et.joinValues(n.options)}`;break;case ee.invalid_enum_value:t=`Invalid enum value. Expected ${et.joinValues(n.options)}, received '${n.received}'`;break;case ee.invalid_arguments:t="Invalid function arguments";break;case ee.invalid_return_type:t="Invalid function return type";break;case ee.invalid_date:t="Invalid date";break;case ee.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:et.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ee.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ee.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ee.custom:t="Invalid input";break;case ee.invalid_intersection_types:t="Intersection results could not be merged";break;case ee.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ee.not_finite:t="Number must be finite";break;default:t=e.defaultError,et.assertNever(n)}return{message:t}};let bK=ZS;function _K(){return bK}const CK=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function ce(n,e){const t=_K(),r=CK({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ZS?void 0:ZS].filter(s=>!!s)});n.common.issues.push(r)}class cr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Pe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return cr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Pe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Pe=Object.freeze({status:"aborted"}),vm=n=>({status:"dirty",value:n}),Is=n=>({status:"valid",value:n}),iN=n=>n.status==="aborted",oN=n=>n.status==="dirty",wp=n=>n.status==="valid",mx=n=>typeof Promise<"u"&&n instanceof Promise;var ve;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));class fo{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const aN=(n,e)=>{if(wp(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Da(n.common.issues);return this._error=t,this._error}}};function Ve(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:s}}class Ye{get description(){return this._def.description}_getType(e){return el(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:el(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new cr,ctx:{common:e.parent.common,data:e.data,parsedType:el(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(mx(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:el(e)},s=this._parseSync({data:e,path:r.path,parent:r});return aN(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:el(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return wp(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>wp(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:el(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(mx(s)?s:Promise.resolve(s));return aN(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ee.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new _p({schema:this,typeName:Re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return uc.create(this,this._def)}nullable(){return Cp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return co.create(this)}promise(){return xx.create(this,this._def)}or(e){return yx.create([this,e],this._def)}and(e){return vx.create(this,e,this._def)}transform(e){return new _p({...Ve(this._def),schema:this,typeName:Re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new rE({...Ve(this._def),innerType:this,defaultValue:t,typeName:Re.ZodDefault})}brand(){return new qK({typeName:Re.ZodBranded,type:this,...Ve(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new sE({...Ve(this._def),innerType:this,catchValue:t,typeName:Re.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return M1.create(this,e)}readonly(){return iE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const SK=/^c[^\s-]{8,}$/i,EK=/^[0-9a-z]+$/,TK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,AK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kK=/^[a-z0-9_-]{21}$/i,RK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,NK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let aC;const MK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,LK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,OK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$K=new RegExp(`^${bO}$`);function _O(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function jK(n){return new RegExp(`^${_O(n)}$`)}function VK(n){let e=`${bO}T${_O(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function BK(n,e){return!!((e==="v4"||!e)&&MK.test(n)||(e==="v6"||!e)&&LK.test(n))}function zK(n,e){if(!RK.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function HK(n,e){return!!((e==="v4"||!e)&&DK.test(n)||(e==="v6"||!e)&&FK.test(n))}class ro extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.string,received:i.parsedType}),Pe}const r=new cr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ce(s,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ce(s,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")NK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"email",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")aC||(aC=new RegExp(IK,"u")),aC.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"emoji",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")AK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"uuid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")kK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"nanoid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")SK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")EK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid2",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")TK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ulid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ce(s,{validation:"url",code:ee.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"regex",code:ee.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?VK(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?$K.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?jK(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?PK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"duration",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?BK(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ip",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?zK(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"jwt",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?HK(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cidr",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?OK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"base64",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?UK.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"base64url",code:ee.invalid_string,message:i.message}),r.dirty()):et.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:ee.invalid_string,...ve.errToObj(r)})}_addCheck(e){return new ro({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ve.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ve.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ve.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ve.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ve.errToObj(t)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new ro({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ro({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ro({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ro.create=n=>new ro({checks:[],typeName:Re.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Ve(n)});function GK(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Td extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.number,received:i.parsedType}),Pe}let r;const s=new cr;for(const i of this._def.checks)i.kind==="int"?et.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?GK(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.not_finite,message:i.message}),s.dirty()):et.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,r,s){return new Td({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ve.toString(s)}]})}_addCheck(e){return new Td({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&et.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Td.create=n=>new Td({checks:[],typeName:Re.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ve(n)});class Ad extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ge.bigint)return this._getInvalidInput(e);let r;const s=new cr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):et.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ce(t,{code:ee.invalid_type,expected:ge.bigint,received:t.parsedType}),Pe}gte(e,t){return this.setLimit("min",e,!0,ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.toString(t))}setLimit(e,t,r,s){return new Ad({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ve.toString(s)}]})}_addCheck(e){return new Ad({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ad.create=n=>new Ad({checks:[],typeName:Re.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Ve(n)});class gx extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.boolean,received:r.parsedType}),Pe}return Is(e.data)}}gx.create=n=>new gx({typeName:Re.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ve(n)});class xp extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_type,expected:ge.date,received:i.parsedType}),Pe}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ce(i,{code:ee.invalid_date}),Pe}const r=new cr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):et.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xp({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}xp.create=n=>new xp({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Re.ZodDate,...Ve(n)});class lN extends Ye{_parse(e){if(this._getType(e)!==ge.symbol){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.symbol,received:r.parsedType}),Pe}return Is(e.data)}}lN.create=n=>new lN({typeName:Re.ZodSymbol,...Ve(n)});class cN extends Ye{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.undefined,received:r.parsedType}),Pe}return Is(e.data)}}cN.create=n=>new cN({typeName:Re.ZodUndefined,...Ve(n)});class uN extends Ye{_parse(e){if(this._getType(e)!==ge.null){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.null,received:r.parsedType}),Pe}return Is(e.data)}}uN.create=n=>new uN({typeName:Re.ZodNull,...Ve(n)});class dN extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return Is(e.data)}}dN.create=n=>new dN({typeName:Re.ZodAny,...Ve(n)});class eE extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Is(e.data)}}eE.create=n=>new eE({typeName:Re.ZodUnknown,...Ve(n)});class yc extends Ye{_parse(e){const t=this._getOrReturnCtx(e);return ce(t,{code:ee.invalid_type,expected:ge.never,received:t.parsedType}),Pe}}yc.create=n=>new yc({typeName:Re.ZodNever,...Ve(n)});class hN extends Ye{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.void,received:r.parsedType}),Pe}return Is(e.data)}}hN.create=n=>new hN({typeName:Re.ZodVoid,...Ve(n)});class co extends Ye{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==ge.array)return ce(t,{code:ee.invalid_type,expected:ge.array,received:t.parsedType}),Pe;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(ce(t,{code:o?ee.too_big:ee.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(ce(t,{code:ee.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(ce(t,{code:ee.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new fo(t,o,t.path,a)))).then(o=>cr.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new fo(t,o,t.path,a)));return cr.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new co({...this._def,minLength:{value:e,message:ve.toString(t)}})}max(e,t){return new co({...this._def,maxLength:{value:e,message:ve.toString(t)}})}length(e,t){return new co({...this._def,exactLength:{value:e,message:ve.toString(t)}})}nonempty(e){return this.min(1,e)}}co.create=(n,e)=>new co({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Re.ZodArray,...Ve(e)});function ih(n){if(n instanceof Kt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=uc.create(ih(r))}return new Kt({...n._def,shape:()=>e})}else return n instanceof co?new co({...n._def,type:ih(n.element)}):n instanceof uc?uc.create(ih(n.unwrap())):n instanceof Cp?Cp.create(ih(n.unwrap())):n instanceof kd?kd.create(n.items.map(e=>ih(e))):n}class Kt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=et.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ge.object){const c=this._getOrReturnCtx(e);return ce(c,{code:ee.invalid_type,expected:ge.object,received:c.parsedType}),Pe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof yc&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],f=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new fo(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof yc){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(ce(s,{code:ee.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new fo(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>cr.mergeObjectSync(r,c)):cr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new Kt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:ve.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Kt({...this._def,unknownKeys:"strip"})}passthrough(){return new Kt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Re.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Kt({...this._def,catchall:e})}pick(e){const t={};for(const r of et.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Kt({...this._def,shape:()=>t})}omit(e){const t={};for(const r of et.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Kt({...this._def,shape:()=>t})}deepPartial(){return ih(this)}partial(e){const t={};for(const r of et.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new Kt({...this._def,shape:()=>t})}required(e){const t={};for(const r of et.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof uc;)i=i._def.innerType;t[r]=i}return new Kt({...this._def,shape:()=>t})}keyof(){return CO(et.objectKeys(this.shape))}}Kt.create=(n,e)=>new Kt({shape:()=>n,unknownKeys:"strip",catchall:yc.create(),typeName:Re.ZodObject,...Ve(e)});Kt.strictCreate=(n,e)=>new Kt({shape:()=>n,unknownKeys:"strict",catchall:yc.create(),typeName:Re.ZodObject,...Ve(e)});Kt.lazycreate=(n,e)=>new Kt({shape:n,unknownKeys:"strip",catchall:yc.create(),typeName:Re.ZodObject,...Ve(e)});class yx extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Da(a.ctx.common.issues));return ce(t,{code:ee.invalid_union,unionErrors:o}),Pe}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Da(l));return ce(t,{code:ee.invalid_union,unionErrors:a}),Pe}}get options(){return this._def.options}}yx.create=(n,e)=>new yx({options:n,typeName:Re.ZodUnion,...Ve(e)});function tE(n,e){const t=el(n),r=el(e);if(n===e)return{valid:!0,data:n};if(t===ge.object&&r===ge.object){const s=et.objectKeys(e),i=et.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const l=tE(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===ge.array&&r===ge.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],l=tE(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===ge.date&&r===ge.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class vx extends Ye{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(iN(i)||iN(o))return Pe;const a=tE(i.value,o.value);return a.valid?((oN(i)||oN(o))&&t.dirty(),{status:t.value,value:a.data}):(ce(r,{code:ee.invalid_intersection_types}),Pe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}vx.create=(n,e,t)=>new vx({left:n,right:e,typeName:Re.ZodIntersection,...Ve(t)});class kd extends Ye{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.array)return ce(r,{code:ee.invalid_type,expected:ge.array,received:r.parsedType}),Pe;if(r.data.length<this._def.items.length)return ce(r,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pe;!this._def.rest&&r.data.length>this._def.items.length&&(ce(r,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new fo(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>cr.mergeArray(t,o)):cr.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new kd({...this._def,rest:e})}}kd.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new kd({items:n,typeName:Re.ZodTuple,rest:null,...Ve(e)})};class wx extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.object)return ce(r,{code:ee.invalid_type,expected:ge.object,received:r.parsedType}),Pe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new fo(r,a,r.path,a)),value:o._parse(new fo(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?cr.mergeObjectAsync(t,s):cr.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Ye?new wx({keyType:e,valueType:t,typeName:Re.ZodRecord,...Ve(r)}):new wx({keyType:ro.create(),valueType:e,typeName:Re.ZodRecord,...Ve(t)})}}class fN extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.map)return ce(r,{code:ee.invalid_type,expected:ge.map,received:r.parsedType}),Pe;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new fo(r,a,r.path,[c,"key"])),value:i._parse(new fo(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Pe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Pe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}fN.create=(n,e,t)=>new fN({valueType:e,keyType:n,typeName:Re.ZodMap,...Ve(t)});class kg extends Ye{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.set)return ce(r,{code:ee.invalid_type,expected:ge.set,received:r.parsedType}),Pe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ce(r,{code:ee.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ce(r,{code:ee.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Pe;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new fo(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new kg({...this._def,minSize:{value:e,message:ve.toString(t)}})}max(e,t){return new kg({...this._def,maxSize:{value:e,message:ve.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}kg.create=(n,e)=>new kg({valueType:n,minSize:null,maxSize:null,typeName:Re.ZodSet,...Ve(e)});class nE extends Ye{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}nE.create=(n,e)=>new nE({getter:n,typeName:Re.ZodLazy,...Ve(e)});class pN extends Ye{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ce(t,{received:t.data,code:ee.invalid_literal,expected:this._def.value}),Pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}pN.create=(n,e)=>new pN({value:n,typeName:Re.ZodLiteral,...Ve(e)});function CO(n,e){return new bp({values:n,typeName:Re.ZodEnum,...Ve(e)})}class bp extends Ye{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return ce(t,{expected:et.joinValues(r),received:t.parsedType,code:ee.invalid_type}),Pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return ce(t,{received:t.data,code:ee.invalid_enum_value,options:r}),Pe}return Is(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return bp.create(e,{...this._def,...t})}exclude(e,t=this._def){return bp.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}bp.create=CO;class mN extends Ye{_parse(e){const t=et.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ge.string&&r.parsedType!==ge.number){const s=et.objectValues(t);return ce(r,{expected:et.joinValues(s),received:r.parsedType,code:ee.invalid_type}),Pe}if(this._cache||(this._cache=new Set(et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=et.objectValues(t);return ce(r,{received:r.data,code:ee.invalid_enum_value,options:s}),Pe}return Is(e.data)}get enum(){return this._def.values}}mN.create=(n,e)=>new mN({values:n,typeName:Re.ZodNativeEnum,...Ve(e)});class xx extends Ye{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ge.promise&&t.common.async===!1)return ce(t,{code:ee.invalid_type,expected:ge.promise,received:t.parsedType}),Pe;const r=t.parsedType===ge.promise?t.data:Promise.resolve(t.data);return Is(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}xx.create=(n,e)=>new xx({type:n,typeName:Re.ZodPromise,...Ve(e)});class _p extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ce(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Pe;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Pe:l.status==="dirty"||t.value==="dirty"?vm(l.value):l});{if(t.value==="aborted")return Pe;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Pe:a.status==="dirty"||t.value==="dirty"?vm(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pe:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Pe:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wp(o))return Pe;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>wp(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):Pe);et.assertNever(s)}}_p.create=(n,e,t)=>new _p({schema:n,typeName:Re.ZodEffects,effect:e,...Ve(t)});_p.createWithPreprocess=(n,e,t)=>new _p({schema:e,effect:{type:"preprocess",transform:n},typeName:Re.ZodEffects,...Ve(t)});class uc extends Ye{_parse(e){return this._getType(e)===ge.undefined?Is(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}uc.create=(n,e)=>new uc({innerType:n,typeName:Re.ZodOptional,...Ve(e)});class Cp extends Ye{_parse(e){return this._getType(e)===ge.null?Is(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cp.create=(n,e)=>new Cp({innerType:n,typeName:Re.ZodNullable,...Ve(e)});class rE extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rE.create=(n,e)=>new rE({innerType:n,typeName:Re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ve(e)});class sE extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return mx(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Da(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Da(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}sE.create=(n,e)=>new sE({innerType:n,typeName:Re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ve(e)});class gN extends Ye{_parse(e){if(this._getType(e)!==ge.nan){const r=this._getOrReturnCtx(e);return ce(r,{code:ee.invalid_type,expected:ge.nan,received:r.parsedType}),Pe}return{status:"valid",value:e.data}}}gN.create=n=>new gN({typeName:Re.ZodNaN,...Ve(n)});class qK extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class M1 extends Ye{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pe:i.status==="dirty"?(t.dirty(),vm(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Pe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new M1({in:e,out:t,typeName:Re.ZodPipeline})}}class iE extends Ye{_parse(e){const t=this._def.innerType._parse(e),r=s=>(wp(s)&&(s.value=Object.freeze(s.value)),s);return mx(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}iE.create=(n,e)=>new iE({innerType:n,typeName:Re.ZodReadonly,...Ve(e)});var Re;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Re||(Re={}));const Xr=ro.create,yN=Td.create;Ad.create;const WK=gx.create;xp.create;const vN=eE.create;yc.create;const wm=co.create,D1=Kt.create,KK=yx.create;vx.create;kd.create;const YK=wx.create,JK=nE.create,XK=bp.create;xx.create;uc.create;Cp.create;const eh={string:n=>ro.create({...n,coerce:!0}),number:n=>Td.create({...n,coerce:!0}),boolean:n=>gx.create({...n,coerce:!0}),bigint:n=>Ad.create({...n,coerce:!0}),date:n=>xp.create({...n,coerce:!0})},_s=S.forwardRef(({className:n,type:e,...t},r)=>g.jsx("input",{type:e,className:Ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));_s.displayName="Input";var lC="focusScope.autoFocusOnMount",cC="focusScope.autoFocusOnUnmount",wN={bubbles:!1,cancelable:!0},QK="FocusScope",Vb=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,l]=S.useState(null),c=Ir(s),u=Ir(i),f=S.useRef(null),m=Ue(e,v=>l(v)),y=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let v=function(_){if(y.paused||!a)return;const T=_.target;a.contains(T)?f.current=T:Ya(f.current,{select:!0})},b=function(_){if(y.paused||!a)return;const T=_.relatedTarget;T!==null&&(a.contains(T)||Ya(f.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&Ya(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const C=new MutationObserver(x);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),C.disconnect()}}},[r,a,y.paused]),S.useEffect(()=>{if(a){bN.add(y);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(lC,wN);a.addEventListener(lC,c),a.dispatchEvent(x),x.defaultPrevented||(ZK(sY(SO(a)),{select:!0}),document.activeElement===v&&Ya(a))}return()=>{a.removeEventListener(lC,c),setTimeout(()=>{const x=new CustomEvent(cC,wN);a.addEventListener(cC,u),a.dispatchEvent(x),x.defaultPrevented||Ya(v??document.body,{select:!0}),a.removeEventListener(cC,u),bN.remove(y)},0)}}},[a,c,u,y]);const w=S.useCallback(v=>{if(!t&&!r||y.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const C=v.currentTarget,[_,T]=eY(C);_&&T?!v.shiftKey&&x===T?(v.preventDefault(),t&&Ya(_,{select:!0})):v.shiftKey&&x===_&&(v.preventDefault(),t&&Ya(T,{select:!0})):x===C&&v.preventDefault()}},[t,r,y.paused]);return g.jsx(we.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});Vb.displayName=QK;function ZK(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Ya(r,{select:e}),document.activeElement!==t)return}function eY(n){const e=SO(n),t=xN(e,n),r=xN(e.reverse(),n);return[t,r]}function SO(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function xN(n,e){for(const t of n)if(!tY(t,{upTo:e}))return t}function tY(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function nY(n){return n instanceof HTMLInputElement&&"select"in n}function Ya(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&nY(n)&&e&&n.select()}}var bN=rY();function rY(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=_N(n,e),n.unshift(e)},remove(e){var t;n=_N(n,e),(t=n[0])==null||t.resume()}}}function _N(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function sY(n){return n.filter(e=>e.tagName!=="A")}var uC=0;function L1(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??CN()),document.body.insertAdjacentElement("beforeend",n[1]??CN()),uC++,()=>{uC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uC--}},[])}function CN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Qi=function(){return Qi=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qi.apply(this,arguments)};function EO(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function iY(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var K0="right-scroll-bar-position",Y0="width-before-scroll-bar",oY="with-scroll-bars-hidden",aY="--removed-body-scroll-bar-size";function dC(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function lY(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var cY=typeof window<"u"?S.useLayoutEffect:S.useEffect,SN=new WeakMap;function uY(n,e){var t=lY(null,function(r){return n.forEach(function(s){return dC(s,r)})});return cY(function(){var r=SN.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||dC(a,null)}),i.forEach(function(a){s.has(a)||dC(a,o)})}SN.set(t,n)},[n]),t}function dY(n){return n}function hY(n,e){e===void 0&&(e=dY);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function fY(n){n===void 0&&(n={});var e=hY(null);return e.options=Qi({async:!0,ssr:!1},n),e}var TO=function(n){var e=n.sideCar,t=EO(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Qi({},t))};TO.isSideCarExport=!0;function pY(n,e){return n.useMedium(e),TO}var AO=fY(),hC=function(){},Bb=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:hC,onWheelCapture:hC,onTouchMoveCapture:hC}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,m=n.sideCar,y=n.noRelative,w=n.noIsolation,v=n.inert,b=n.allowPinchZoom,x=n.as,C=x===void 0?"div":x,_=n.gapMode,T=EO(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=m,P=uY([t,e]),N=Qi(Qi({},T),s);return S.createElement(S.Fragment,null,u&&S.createElement(A,{sideCar:AO,removeScrollBar:c,shards:f,noRelative:y,noIsolation:w,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:t,gapMode:_}),o?S.cloneElement(S.Children.only(a),Qi(Qi({},N),{ref:P})):S.createElement(C,Qi({},N,{className:l,ref:P}),a))});Bb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bb.classNames={fullWidth:Y0,zeroRight:K0};var mY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gY(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=mY();return e&&n.setAttribute("nonce",e),n}function yY(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function vY(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var wY=function(){var n=0,e=null;return{add:function(t){n==0&&(e=gY())&&(yY(e,t),vY(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xY=function(){var n=wY();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},kO=function(){var n=xY(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},bY={left:0,top:0,right:0,gap:0},fC=function(n){return parseInt(n||"",10)||0},_Y=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[fC(t),fC(r),fC(s)]},CY=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return bY;var e=_Y(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},SY=kO(),Uh="data-scroll-locked",EY=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(oY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Uh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(K0,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Y0,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(K0," .").concat(K0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Y0," .").concat(Y0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Uh,`] {
    `).concat(aY,": ").concat(a,`px;
  }
`)},EN=function(){var n=parseInt(document.body.getAttribute(Uh)||"0",10);return isFinite(n)?n:0},TY=function(){S.useEffect(function(){return document.body.setAttribute(Uh,(EN()+1).toString()),function(){var n=EN()-1;n<=0?document.body.removeAttribute(Uh):document.body.setAttribute(Uh,n.toString())}},[])},AY=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;TY();var i=S.useMemo(function(){return CY(s)},[s]);return S.createElement(SY,{styles:EY(i,!e,s,t?"":"!important")})},oE=!1;if(typeof window<"u")try{var g0=Object.defineProperty({},"passive",{get:function(){return oE=!0,!0}});window.addEventListener("test",g0,g0),window.removeEventListener("test",g0,g0)}catch{oE=!1}var th=oE?{passive:!1}:!1,kY=function(n){return n.tagName==="TEXTAREA"},RO=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!kY(n)&&t[e]==="visible")},RY=function(n){return RO(n,"overflowY")},PY=function(n){return RO(n,"overflowX")},TN=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=PO(n,r);if(s){var i=NO(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},NY=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},IY=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},PO=function(n,e){return n==="v"?RY(e):PY(e)},NO=function(n,e){return n==="v"?NY(e):IY(e)},MY=function(n,e){return n==="h"&&e==="rtl"?-1:1},DY=function(n,e,t,r,s){var i=MY(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,m=0;do{if(!a)break;var y=NO(n,a),w=y[0],v=y[1],b=y[2],x=v-b-i*w;(w||x)&&PO(n,a)&&(f+=x,m+=w);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},y0=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},AN=function(n){return[n.deltaX,n.deltaY]},kN=function(n){return n&&"current"in n?n.current:n},LY=function(n,e){return n[0]===e[0]&&n[1]===e[1]},FY=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},OY=0,nh=[];function UY(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(OY++)[0],i=S.useState(kO)[0],o=S.useRef(n);S.useEffect(function(){o.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var v=iY([n.lockRef.current],(n.shards||[]).map(kN),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=S.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=y0(v),C=t.current,_="deltaX"in v?v.deltaX:C[0]-x[0],T="deltaY"in v?v.deltaY:C[1]-x[1],A,P=v.target,N=Math.abs(_)>Math.abs(T)?"h":"v";if("touches"in v&&N==="h"&&P.type==="range")return!1;var I=TN(N,P);if(!I)return!0;if(I?A=N:(A=N==="v"?"h":"v",I=TN(N,P)),!I)return!1;if(!r.current&&"changedTouches"in v&&(_||T)&&(r.current=A),!A)return!0;var M=r.current||A;return DY(M,b,v,M==="h"?_:T)},[]),l=S.useCallback(function(v){var b=v;if(!(!nh.length||nh[nh.length-1]!==i)){var x="deltaY"in b?AN(b):y0(b),C=e.current.filter(function(A){return A.name===b.type&&(A.target===b.target||b.target===A.shadowParent)&&LY(A.delta,x)})[0];if(C&&C.should){b.cancelable&&b.preventDefault();return}if(!C){var _=(o.current.shards||[]).map(kN).filter(Boolean).filter(function(A){return A.contains(b.target)}),T=_.length>0?a(b,_[0]):!o.current.noIsolation;T&&b.cancelable&&b.preventDefault()}}},[]),c=S.useCallback(function(v,b,x,C){var _={name:v,delta:b,target:x,should:C,shadowParent:$Y(x)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(T){return T!==_})},1)},[]),u=S.useCallback(function(v){t.current=y0(v),r.current=void 0},[]),f=S.useCallback(function(v){c(v.type,AN(v),v.target,a(v,n.lockRef.current))},[]),m=S.useCallback(function(v){c(v.type,y0(v),v.target,a(v,n.lockRef.current))},[]);S.useEffect(function(){return nh.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,th),document.addEventListener("touchmove",l,th),document.addEventListener("touchstart",u,th),function(){nh=nh.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,th),document.removeEventListener("touchmove",l,th),document.removeEventListener("touchstart",u,th)}},[]);var y=n.removeScrollBar,w=n.inert;return S.createElement(S.Fragment,null,w?S.createElement(i,{styles:FY(s)}):null,y?S.createElement(AY,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function $Y(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const jY=pY(AO,UY);var zb=S.forwardRef(function(n,e){return S.createElement(Bb,Qi({},n,{ref:e,sideCar:jY}))});zb.classNames=Bb.classNames;var VY=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},rh=new WeakMap,v0=new WeakMap,w0={},pC=0,IO=function(n){return n&&(n.host||IO(n.parentNode))},BY=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=IO(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},zY=function(n,e,t,r){var s=BY(e,Array.isArray(n)?n:[n]);w0[t]||(w0[t]=new WeakMap);var i=w0[t],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var y=m.getAttribute(r),w=y!==null&&y!=="false",v=(rh.get(m)||0)+1,b=(i.get(m)||0)+1;rh.set(m,v),i.set(m,b),o.push(m),v===1&&w&&v0.set(m,!0),b===1&&m.setAttribute(t,"true"),w||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return u(e),a.clear(),pC++,function(){o.forEach(function(f){var m=rh.get(f)-1,y=i.get(f)-1;rh.set(f,m),i.set(f,y),m||(v0.has(f)||f.removeAttribute(r),v0.delete(f)),y||f.removeAttribute(t)}),pC--,pC||(rh=new WeakMap,rh=new WeakMap,v0=new WeakMap,w0={})}},F1=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=VY(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),zY(r,s,t,"aria-hidden")):function(){return null}},Hb="Dialog",[MO,ede]=hr(Hb),[HY,bi]=MO(Hb),DO=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=n,a=S.useRef(null),l=S.useRef(null),[c,u]=uo({prop:r,defaultProp:s??!1,onChange:i,caller:Hb});return g.jsx(HY,{scope:e,triggerRef:a,contentRef:l,contentId:ao(),titleId:ao(),descriptionId:ao(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(f=>!f),[u]),modal:o,children:t})};DO.displayName=Hb;var LO="DialogTrigger",FO=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=bi(LO,t),i=Ue(e,s.triggerRef);return g.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$1(s.open),...r,ref:i,onClick:te(n.onClick,s.onOpenToggle)})});FO.displayName=LO;var O1="DialogPortal",[GY,OO]=MO(O1,{forceMount:void 0}),UO=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=bi(O1,e);return g.jsx(GY,{scope:e,forceMount:t,children:S.Children.map(r,o=>g.jsx(ls,{present:t||i.open,children:g.jsx(wv,{asChild:!0,container:s,children:o})}))})};UO.displayName=O1;var bx="DialogOverlay",$O=S.forwardRef((n,e)=>{const t=OO(bx,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=bi(bx,n.__scopeDialog);return i.modal?g.jsx(ls,{present:r||i.open,children:g.jsx(WY,{...s,ref:e})}):null});$O.displayName=bx;var qY=_d("DialogOverlay.RemoveScroll"),WY=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=bi(bx,t);return g.jsx(zb,{as:qY,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(we.div,{"data-state":$1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Rd="DialogContent",jO=S.forwardRef((n,e)=>{const t=OO(Rd,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=bi(Rd,n.__scopeDialog);return g.jsx(ls,{present:r||i.open,children:i.modal?g.jsx(KY,{...s,ref:e}):g.jsx(YY,{...s,ref:e})})});jO.displayName=Rd;var KY=S.forwardRef((n,e)=>{const t=bi(Rd,n.__scopeDialog),r=S.useRef(null),s=Ue(e,t.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return F1(i)},[]),g.jsx(VO,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:te(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:te(n.onFocusOutside,i=>i.preventDefault())})}),YY=S.forwardRef((n,e)=>{const t=bi(Rd,n.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return g.jsx(VO,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),VO=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=n,a=bi(Rd,t),l=S.useRef(null),c=Ue(e,l);return L1(),g.jsxs(g.Fragment,{children:[g.jsx(Vb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:g.jsx(kp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":$1(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(JY,{titleId:a.titleId}),g.jsx(QY,{contentRef:l,descriptionId:a.descriptionId})]})]})}),U1="DialogTitle",BO=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=bi(U1,t);return g.jsx(we.h2,{id:s.titleId,...r,ref:e})});BO.displayName=U1;var zO="DialogDescription",HO=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=bi(zO,t);return g.jsx(we.p,{id:s.descriptionId,...r,ref:e})});HO.displayName=zO;var GO="DialogClose",qO=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=bi(GO,t);return g.jsx(we.button,{type:"button",...r,ref:e,onClick:te(n.onClick,()=>s.onOpenChange(!1))})});qO.displayName=GO;function $1(n){return n?"open":"closed"}var WO="DialogTitleWarning",[tde,KO]=vz(WO,{contentName:Rd,titleName:U1,docsSlug:"dialog"}),JY=({titleId:n})=>{const e=KO(WO),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},XY="DialogDescriptionWarning",QY=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KO(XY).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},ZY=DO,eJ=FO,tJ=UO,YO=$O,JO=jO,XO=BO,QO=HO,nJ=qO;const dc=ZY,Sp=eJ,rJ=tJ,ZO=S.forwardRef(({className:n,...e},t)=>g.jsx(YO,{ref:t,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));ZO.displayName=YO.displayName;const xa=S.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(rJ,{children:[g.jsx(ZO,{}),g.jsxs(JO,{ref:r,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),"aria-describedby":t["aria-describedby"],...t,children:[e,g.jsxs(nJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(bv,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xa.displayName=JO.displayName;const ba=({className:n,...e})=>g.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});ba.displayName="DialogHeader";const $h=({className:n,...e})=>g.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});$h.displayName="DialogFooter";const _a=S.forwardRef(({className:n,...e},t)=>g.jsx(XO,{ref:t,className:Ee("text-lg font-semibold leading-none tracking-tight",n),...e}));_a.displayName=XO.displayName;const Gb=S.forwardRef(({className:n,...e},t)=>g.jsx(QO,{ref:t,className:Ee("text-sm text-muted-foreground",n),...e}));Gb.displayName=QO.displayName;var sJ="Label",eU=S.forwardRef((n,e)=>g.jsx(we.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));eU.displayName=sJ;var tU=eU;const iJ=Cb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Je=S.forwardRef(({className:n,...e},t)=>g.jsx(tU,{ref:t,className:Ee(iJ(),n),...e}));Je.displayName=tU.displayName;const nU=eK,rU=S.createContext({}),Eh=({...n})=>g.jsx(rU.Provider,{value:{name:n.name},children:g.jsx(sK,{...n})}),qb=()=>{const n=S.useContext(rU),e=S.useContext(sU),{getFieldState:t,formState:r}=jb(),s=t(n.name,r);if(!n)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:n.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},sU=S.createContext({}),qc=S.forwardRef(({className:n,...e},t)=>{const r=S.useId();return g.jsx(sU.Provider,{value:{id:r},children:g.jsx("div",{ref:t,className:Ee("space-y-2",n),...e})})});qc.displayName="FormItem";const Wc=S.forwardRef(({className:n,...e},t)=>{const{error:r,formItemId:s}=qb();return g.jsx(Je,{ref:t,className:Ee(r&&"text-destructive",n),htmlFor:s,...e})});Wc.displayName="FormLabel";const Kc=S.forwardRef(({...n},e)=>{const{error:t,formItemId:r,formDescriptionId:s,formMessageId:i}=qb();return g.jsx(BL,{ref:e,id:r,"aria-describedby":t?`${s} ${i}`:`${s}`,"aria-invalid":!!t,...n})});Kc.displayName="FormControl";const oJ=S.forwardRef(({className:n,...e},t)=>{const{formDescriptionId:r}=qb();return g.jsx("p",{ref:t,id:r,className:Ee("text-sm text-muted-foreground",n),...e})});oJ.displayName="FormDescription";const Yc=S.forwardRef(({className:n,children:e,...t},r)=>{const{error:s,formMessageId:i}=qb(),o=s?String(s==null?void 0:s.message):e;return o?g.jsx("p",{ref:r,id:i,className:Ee("text-sm font-medium text-destructive",n),...t,children:o}):null});Yc.displayName="FormMessage";const aJ=D1({email:Xr().email("Please enter a valid email address"),password:Xr().min(6,"Password must be at least 6 characters")});function lJ({children:n}){const[e,t]=S.useState(!1),{signIn:r,signInWithGoogle:s,loading:i}=xi(),{toast:o}=Ps(),a=$d(),l=vO({resolver:xO(aJ),defaultValues:{email:"",password:""}}),c=async f=>{const m=await r(f.email,f.password);m.success?(o({title:"Login successful!",description:"Welcome back to Qzzly"}),t(!1),a("/sessions")):o({title:"Login failed",description:m.error||"Please check your email and password",variant:"destructive"})},u=async()=>{const f=await s();f.success?o({title:"Signing in with Google...",description:"You will be redirected shortly"}):o({title:"Google sign-in failed",description:f.error||"Please try again",variant:"destructive"})};return g.jsxs(dc,{open:e,onOpenChange:t,children:[g.jsx(Sp,{asChild:!0,children:n||g.jsx(ue,{variant:"outline",children:"Log in"})}),g.jsxs(xa,{className:"sm:max-w-[425px]",children:[g.jsxs(ba,{children:[g.jsx(_a,{className:"text-xl font-bold",children:"Log in to Qzzly"}),g.jsx(Gb,{children:"Enter your email and password to access your account."})]}),g.jsx(nU,{...l,children:g.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[g.jsx(Eh,{control:l.control,name:"email",render:({field:f})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Email"}),g.jsx(Kc,{children:g.jsx(_s,{placeholder:"you@example.com",...f})}),g.jsx(Yc,{})]})}),g.jsx(Eh,{control:l.control,name:"password",render:({field:f})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Password"}),g.jsx(Kc,{children:g.jsx(_s,{type:"password",placeholder:"******",...f})}),g.jsx(Yc,{})]})}),g.jsx("div",{className:"flex justify-end pt-2",children:g.jsx(ue,{type:"submit",className:"gradient-bg",disabled:i,children:i?"Logging in...":"Log in"})}),g.jsx(ue,{type:"button",variant:"outline",className:"w-full mt-2",onClick:u,disabled:i,children:"Continue with Google"})]})})]})]})}const cJ=D1({name:Xr().min(2,"Name must be at least 2 characters").optional(),email:Xr().email("Please enter a valid email address"),password:Xr().min(6,"Password must be at least 6 characters"),confirmPassword:Xr().min(6,"Please confirm your password")}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function j1({children:n,redirectPath:e="/sessions"}){const[t,r]=S.useState(!1),{signUp:s,signInWithGoogle:i,loading:o}=xi(),{toast:a}=Ps(),l=$d(),c=vO({resolver:xO(cJ),defaultValues:{name:"",email:"",password:"",confirmPassword:""}}),u=async m=>{const y=await s(m.email,m.password);y.success?(a({title:"Account created!",description:"Welcome to Qzzly"}),r(!1),l(e)):a({title:"Signup failed",description:y.error||"Please check your information and try again",variant:"destructive"})},f=async()=>{const m=await i();m.success?a({title:"Signing in with Google...",description:"You will be redirected shortly"}):a({title:"Google sign-in failed",description:m.error||"Please try again",variant:"destructive"})};return g.jsxs(dc,{open:t,onOpenChange:r,children:[g.jsx(Sp,{asChild:!0,children:n||g.jsx(ue,{children:"Sign up"})}),g.jsxs(xa,{className:"sm:max-w-[425px]",children:[g.jsxs(ba,{children:[g.jsx(_a,{className:"text-xl font-bold",children:"Create your account"}),g.jsx(Gb,{children:"Join Qzzly to start creating and studying with flashcards."})]}),g.jsx(nU,{...c,children:g.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[g.jsx(Eh,{control:c.control,name:"name",render:({field:m})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Name (optional)"}),g.jsx(Kc,{children:g.jsx(_s,{placeholder:"Your name",...m})}),g.jsx(Yc,{})]})}),g.jsx(Eh,{control:c.control,name:"email",render:({field:m})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Email"}),g.jsx(Kc,{children:g.jsx(_s,{placeholder:"you@example.com",...m})}),g.jsx(Yc,{})]})}),g.jsx(Eh,{control:c.control,name:"password",render:({field:m})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Password"}),g.jsx(Kc,{children:g.jsx(_s,{type:"password",placeholder:"******",...m})}),g.jsx(Yc,{})]})}),g.jsx(Eh,{control:c.control,name:"confirmPassword",render:({field:m})=>g.jsxs(qc,{children:[g.jsx(Wc,{children:"Confirm Password"}),g.jsx(Kc,{children:g.jsx(_s,{type:"password",placeholder:"******",...m})}),g.jsx(Yc,{})]})}),g.jsx("div",{className:"flex justify-end pt-2",children:g.jsx(ue,{type:"submit",className:"gradient-bg",disabled:o,children:o?"Creating account...":"Sign up"})}),g.jsx(ue,{type:"button",variant:"outline",className:"w-full mt-2",onClick:f,disabled:o,children:"Continue with Google"})]})})]})]})}var uJ=S.createContext(void 0);function $p(n){const e=S.useContext(uJ);return n||e||"ltr"}var mC="rovingFocusGroup.onEntryFocus",dJ={bubbles:!1,cancelable:!0},Rv="RovingFocusGroup",[aE,iU,hJ]=vv(Rv),[fJ,jp]=hr(Rv,[hJ]),[pJ,mJ]=fJ(Rv),oU=S.forwardRef((n,e)=>g.jsx(aE.Provider,{scope:n.__scopeRovingFocusGroup,children:g.jsx(aE.Slot,{scope:n.__scopeRovingFocusGroup,children:g.jsx(gJ,{...n,ref:e})})}));oU.displayName=Rv;var gJ=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,m=S.useRef(null),y=Ue(e,m),w=$p(i),[v,b]=uo({prop:o,defaultProp:a??null,onChange:l,caller:Rv}),[x,C]=S.useState(!1),_=Ir(c),T=iU(t),A=S.useRef(!1),[P,N]=S.useState(0);return S.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(mC,_),()=>I.removeEventListener(mC,_)},[_]),g.jsx(pJ,{scope:t,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:S.useCallback(I=>b(I),[b]),onItemShiftTab:S.useCallback(()=>C(!0),[]),onFocusableItemAdd:S.useCallback(()=>N(I=>I+1),[]),onFocusableItemRemove:S.useCallback(()=>N(I=>I-1),[]),children:g.jsx(we.div,{tabIndex:x||P===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...n.style},onMouseDown:te(n.onMouseDown,()=>{A.current=!0}),onFocus:te(n.onFocus,I=>{const M=!A.current;if(I.target===I.currentTarget&&M&&!x){const D=new CustomEvent(mC,dJ);if(I.currentTarget.dispatchEvent(D),!D.defaultPrevented){const F=T().filter(j=>j.focusable),$=F.find(j=>j.active),G=F.find(j=>j.id===v),W=[$,G,...F].filter(Boolean).map(j=>j.ref.current);cU(W,u)}}A.current=!1}),onBlur:te(n.onBlur,()=>C(!1))})})}),aU="RovingFocusGroupItem",lU=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=n,l=ao(),c=i||l,u=mJ(aU,t),f=u.currentTabStopId===c,m=iU(t),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:v}=u;return S.useEffect(()=>{if(r)return y(),()=>w()},[r,y,w]),g.jsx(aE.ItemSlot,{scope:t,id:c,focusable:r,active:s,children:g.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:te(n.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:te(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:te(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=wJ(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=m().filter(T=>T.focusable).map(T=>T.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const T=_.indexOf(b.currentTarget);_=u.loop?xJ(_,T+1):_.slice(T+1)}setTimeout(()=>cU(_))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});lU.displayName=aU;var yJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vJ(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function wJ(n,e,t){const r=vJ(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yJ[r]}function cU(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function xJ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var V1=oU,B1=lU,lE=["Enter"," "],bJ=["ArrowDown","PageUp","Home"],uU=["ArrowUp","PageDown","End"],_J=[...bJ,...uU],CJ={ltr:[...lE,"ArrowRight"],rtl:[...lE,"ArrowLeft"]},SJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pv="Menu",[Rg,EJ,TJ]=vv(Pv),[Vd,dU]=hr(Pv,[TJ,Ip,jp]),Wb=Ip(),hU=jp(),[AJ,Bd]=Vd(Pv),[kJ,Nv]=Vd(Pv),fU=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=Wb(e),[l,c]=S.useState(null),u=S.useRef(!1),f=Ir(i),m=$p(s);return S.useEffect(()=>{const y=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),g.jsx(X2,{...a,children:g.jsx(AJ,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:g.jsx(kJ,{scope:e,onClose:S.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:o,children:r})})})};fU.displayName=Pv;var RJ="MenuAnchor",z1=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Wb(t);return g.jsx(s1,{...s,...r,ref:e})});z1.displayName=RJ;var H1="MenuPortal",[PJ,pU]=Vd(H1,{forceMount:void 0}),mU=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Bd(H1,e);return g.jsx(PJ,{scope:e,forceMount:t,children:g.jsx(ls,{present:t||i.open,children:g.jsx(wv,{asChild:!0,container:s,children:r})})})};mU.displayName=H1;var Ss="MenuContent",[NJ,G1]=Vd(Ss),gU=S.forwardRef((n,e)=>{const t=pU(Ss,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Bd(Ss,n.__scopeMenu),o=Nv(Ss,n.__scopeMenu);return g.jsx(Rg.Provider,{scope:n.__scopeMenu,children:g.jsx(ls,{present:r||i.open,children:g.jsx(Rg.Slot,{scope:n.__scopeMenu,children:o.modal?g.jsx(IJ,{...s,ref:e}):g.jsx(MJ,{...s,ref:e})})})})}),IJ=S.forwardRef((n,e)=>{const t=Bd(Ss,n.__scopeMenu),r=S.useRef(null),s=Ue(e,r);return S.useEffect(()=>{const i=r.current;if(i)return F1(i)},[]),g.jsx(q1,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:te(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),MJ=S.forwardRef((n,e)=>{const t=Bd(Ss,n.__scopeMenu);return g.jsx(q1,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),DJ=_d("MenuContent.ScrollLock"),q1=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:y,disableOutsideScroll:w,...v}=n,b=Bd(Ss,t),x=Nv(Ss,t),C=Wb(t),_=hU(t),T=EJ(t),[A,P]=S.useState(null),N=S.useRef(null),I=Ue(e,N,b.onContentChange),M=S.useRef(0),D=S.useRef(""),F=S.useRef(0),$=S.useRef(null),G=S.useRef("right"),O=S.useRef(0),W=w?zb:S.Fragment,j=w?{as:DJ,allowPinchZoom:!0}:void 0,z=U=>{var Y,Se;const H=D.current+U,Q=T().filter(se=>!se.disabled),J=document.activeElement,re=(Y=Q.find(se=>se.ref.current===J))==null?void 0:Y.textValue,ye=Q.map(se=>se.textValue),Me=qJ(ye,H,re),De=(Se=Q.find(se=>se.textValue===Me))==null?void 0:Se.ref.current;(function se(xe){D.current=xe,window.clearTimeout(M.current),xe!==""&&(M.current=window.setTimeout(()=>se(""),1e3))})(H),De&&setTimeout(()=>De.focus())};S.useEffect(()=>()=>window.clearTimeout(M.current),[]),L1();const V=S.useCallback(U=>{var Q,J;return G.current===((Q=$.current)==null?void 0:Q.side)&&KJ(U,(J=$.current)==null?void 0:J.area)},[]);return g.jsx(NJ,{scope:t,searchRef:D,onItemEnter:S.useCallback(U=>{V(U)&&U.preventDefault()},[V]),onItemLeave:S.useCallback(U=>{var H;V(U)||((H=N.current)==null||H.focus(),P(null))},[V]),onTriggerLeave:S.useCallback(U=>{V(U)&&U.preventDefault()},[V]),pointerGraceTimerRef:F,onPointerGraceIntentChange:S.useCallback(U=>{$.current=U},[]),children:g.jsx(W,{...j,children:g.jsx(Vb,{asChild:!0,trapped:s,onMountAutoFocus:te(i,U=>{var H;U.preventDefault(),(H=N.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(kp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:y,children:g.jsx(V1,{asChild:!0,..._,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:P,onEntryFocus:te(l,U=>{x.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(i1,{role:"menu","aria-orientation":"vertical","data-state":IU(b.open),"data-radix-menu-content":"",dir:x.dir,...C,...v,ref:I,style:{outline:"none",...v.style},onKeyDown:te(v.onKeyDown,U=>{const Q=U.target.closest("[data-radix-menu-content]")===U.currentTarget,J=U.ctrlKey||U.altKey||U.metaKey,re=U.key.length===1;Q&&(U.key==="Tab"&&U.preventDefault(),!J&&re&&z(U.key));const ye=N.current;if(U.target!==ye||!_J.includes(U.key))return;U.preventDefault();const De=T().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);uU.includes(U.key)&&De.reverse(),HJ(De)}),onBlur:te(n.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(M.current),D.current="")}),onPointerMove:te(n.onPointerMove,Pg(U=>{const H=U.target,Q=O.current!==U.clientX;if(U.currentTarget.contains(H)&&Q){const J=U.clientX>O.current?"right":"left";G.current=J,O.current=U.clientX}}))})})})})})})});gU.displayName=Ss;var LJ="MenuGroup",W1=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(we.div,{role:"group",...r,ref:e})});W1.displayName=LJ;var FJ="MenuLabel",yU=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(we.div,{...r,ref:e})});yU.displayName=FJ;var _x="MenuItem",RN="menu.itemSelect",Kb=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=S.useRef(null),o=Nv(_x,n.__scopeMenu),a=G1(_x,n.__scopeMenu),l=Ue(e,i),c=S.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const m=new CustomEvent(RN,{bubbles:!0,cancelable:!0});f.addEventListener(RN,y=>r==null?void 0:r(y),{once:!0}),zA(f,m),m.defaultPrevented?c.current=!1:o.onClose()}};return g.jsx(vU,{...s,ref:l,disabled:t,onClick:te(n.onClick,u),onPointerDown:f=>{var m;(m=n.onPointerDown)==null||m.call(n,f),c.current=!0},onPointerUp:te(n.onPointerUp,f=>{var m;c.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:te(n.onKeyDown,f=>{const m=a.searchRef.current!=="";t||m&&f.key===" "||lE.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Kb.displayName=_x;var vU=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=G1(_x,t),a=hU(t),l=S.useRef(null),c=Ue(e,l),[u,f]=S.useState(!1),[m,y]=S.useState("");return S.useEffect(()=>{const w=l.current;w&&y((w.textContent??"").trim())},[i.children]),g.jsx(Rg.ItemSlot,{scope:t,disabled:r,textValue:s??m,children:g.jsx(B1,{asChild:!0,...a,focusable:!r,children:g.jsx(we.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:te(n.onPointerMove,Pg(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(n.onPointerLeave,Pg(w=>o.onItemLeave(w))),onFocus:te(n.onFocus,()=>f(!0)),onBlur:te(n.onBlur,()=>f(!1))})})})}),OJ="MenuCheckboxItem",wU=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return g.jsx(SU,{scope:n.__scopeMenu,checked:t,children:g.jsx(Kb,{role:"menuitemcheckbox","aria-checked":Cx(t)?"mixed":t,...s,ref:e,"data-state":Y1(t),onSelect:te(s.onSelect,()=>r==null?void 0:r(Cx(t)?!0:!t),{checkForDefaultPrevented:!1})})})});wU.displayName=OJ;var xU="MenuRadioGroup",[UJ,$J]=Vd(xU,{value:void 0,onValueChange:()=>{}}),bU=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Ir(r);return g.jsx(UJ,{scope:n.__scopeMenu,value:t,onValueChange:i,children:g.jsx(W1,{...s,ref:e})})});bU.displayName=xU;var _U="MenuRadioItem",CU=S.forwardRef((n,e)=>{const{value:t,...r}=n,s=$J(_U,n.__scopeMenu),i=t===s.value;return g.jsx(SU,{scope:n.__scopeMenu,checked:i,children:g.jsx(Kb,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Y1(i),onSelect:te(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});CU.displayName=_U;var K1="MenuItemIndicator",[SU,jJ]=Vd(K1,{checked:!1}),EU=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=jJ(K1,t);return g.jsx(ls,{present:r||Cx(i.checked)||i.checked===!0,children:g.jsx(we.span,{...s,ref:e,"data-state":Y1(i.checked)})})});EU.displayName=K1;var VJ="MenuSeparator",TU=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});TU.displayName=VJ;var BJ="MenuArrow",AU=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Wb(t);return g.jsx(o1,{...s,...r,ref:e})});AU.displayName=BJ;var zJ="MenuSub",[nde,kU]=Vd(zJ),xm="MenuSubTrigger",RU=S.forwardRef((n,e)=>{const t=Bd(xm,n.__scopeMenu),r=Nv(xm,n.__scopeMenu),s=kU(xm,n.__scopeMenu),i=G1(xm,n.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>u,[u]),S.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),g.jsx(z1,{asChild:!0,...c,children:g.jsx(vU,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":IU(t.open),...n,ref:xb(e,s.onTriggerChange),onClick:f=>{var m;(m=n.onClick)==null||m.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:te(n.onPointerMove,Pg(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:te(n.onPointerLeave,Pg(f=>{var y,w;u();const m=(y=t.content)==null?void 0:y.getBoundingClientRect();if(m){const v=(w=t.content)==null?void 0:w.dataset.side,b=v==="right",x=b?-5:5,C=m[b?"left":"right"],_=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:C,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:C,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:te(n.onKeyDown,f=>{var y;const m=i.searchRef.current!=="";n.disabled||m&&f.key===" "||CJ[r.dir].includes(f.key)&&(t.onOpenChange(!0),(y=t.content)==null||y.focus(),f.preventDefault())})})})});RU.displayName=xm;var PU="MenuSubContent",NU=S.forwardRef((n,e)=>{const t=pU(Ss,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Bd(Ss,n.__scopeMenu),o=Nv(Ss,n.__scopeMenu),a=kU(PU,n.__scopeMenu),l=S.useRef(null),c=Ue(e,l);return g.jsx(Rg.Provider,{scope:n.__scopeMenu,children:g.jsx(ls,{present:r||i.open,children:g.jsx(Rg.Slot,{scope:n.__scopeMenu,children:g.jsx(q1,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:te(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:te(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:te(n.onKeyDown,u=>{var y;const f=u.currentTarget.contains(u.target),m=SJ[o.dir].includes(u.key);f&&m&&(i.onOpenChange(!1),(y=a.trigger)==null||y.focus(),u.preventDefault())})})})})})});NU.displayName=PU;function IU(n){return n?"open":"closed"}function Cx(n){return n==="indeterminate"}function Y1(n){return Cx(n)?"indeterminate":n?"checked":"unchecked"}function HJ(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function GJ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function qJ(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=GJ(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function WJ(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&t<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function KJ(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return WJ(t,e)}function Pg(n){return e=>e.pointerType==="mouse"?n(e):void 0}var YJ=fU,JJ=z1,XJ=mU,QJ=gU,ZJ=W1,eX=yU,tX=Kb,nX=wU,rX=bU,sX=CU,iX=EU,oX=TU,aX=AU,lX=RU,cX=NU,Yb="DropdownMenu",[uX,rde]=hr(Yb,[dU]),fr=dU(),[dX,MU]=uX(Yb),DU=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,l=fr(e),c=S.useRef(null),[u,f]=uo({prop:s,defaultProp:i??!1,onChange:o,caller:Yb});return g.jsx(dX,{scope:e,triggerId:ao(),triggerRef:c,contentId:ao(),open:u,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(m=>!m),[f]),modal:a,children:g.jsx(YJ,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:t})})};DU.displayName=Yb;var LU="DropdownMenuTrigger",FU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=MU(LU,t),o=fr(t);return g.jsx(JJ,{asChild:!0,...o,children:g.jsx(we.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:xb(e,i.triggerRef),onPointerDown:te(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:te(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});FU.displayName=LU;var hX="DropdownMenuPortal",OU=n=>{const{__scopeDropdownMenu:e,...t}=n,r=fr(e);return g.jsx(XJ,{...r,...t})};OU.displayName=hX;var UU="DropdownMenuContent",$U=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=MU(UU,t),i=fr(t),o=S.useRef(!1);return g.jsx(QJ,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:te(n.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:te(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$U.displayName=UU;var fX="DropdownMenuGroup",pX=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(ZJ,{...s,...r,ref:e})});pX.displayName=fX;var mX="DropdownMenuLabel",jU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(eX,{...s,...r,ref:e})});jU.displayName=mX;var gX="DropdownMenuItem",VU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(tX,{...s,...r,ref:e})});VU.displayName=gX;var yX="DropdownMenuCheckboxItem",BU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(nX,{...s,...r,ref:e})});BU.displayName=yX;var vX="DropdownMenuRadioGroup",wX=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(rX,{...s,...r,ref:e})});wX.displayName=vX;var xX="DropdownMenuRadioItem",zU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(sX,{...s,...r,ref:e})});zU.displayName=xX;var bX="DropdownMenuItemIndicator",HU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(iX,{...s,...r,ref:e})});HU.displayName=bX;var _X="DropdownMenuSeparator",GU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(oX,{...s,...r,ref:e})});GU.displayName=_X;var CX="DropdownMenuArrow",SX=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(aX,{...s,...r,ref:e})});SX.displayName=CX;var EX="DropdownMenuSubTrigger",qU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(lX,{...s,...r,ref:e})});qU.displayName=EX;var TX="DropdownMenuSubContent",WU=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=fr(t);return g.jsx(cX,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WU.displayName=TX;var AX=DU,kX=FU,RX=OU,KU=$U,YU=jU,JU=VU,XU=BU,QU=zU,ZU=HU,e$=GU,t$=qU,n$=WU;const PX=AX,NX=kX,IX=S.forwardRef(({className:n,inset:e,children:t,...r},s)=>g.jsxs(t$,{ref:s,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,g.jsx(p6,{className:"ml-auto h-4 w-4"})]}));IX.displayName=t$.displayName;const MX=S.forwardRef(({className:n,...e},t)=>g.jsx(n$,{ref:t,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));MX.displayName=n$.displayName;const r$=S.forwardRef(({className:n,sideOffset:e=4,...t},r)=>g.jsx(RX,{children:g.jsx(KU,{ref:r,sideOffset:e,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));r$.displayName=KU.displayName;const cE=S.forwardRef(({className:n,inset:e,...t},r)=>g.jsx(JU,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));cE.displayName=JU.displayName;const DX=S.forwardRef(({className:n,children:e,checked:t,...r},s)=>g.jsxs(XU,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(ZU,{children:g.jsx(sn,{className:"h-4 w-4"})})}),e]}));DX.displayName=XU.displayName;const LX=S.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(QU,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(ZU,{children:g.jsx(y6,{className:"h-2 w-2 fill-current"})})}),e]}));LX.displayName=QU.displayName;const s$=S.forwardRef(({className:n,inset:e,...t},r)=>g.jsx(YU,{ref:r,className:Ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));s$.displayName=YU.displayName;const uE=S.forwardRef(({className:n,...e},t)=>g.jsx(e$,{ref:t,className:Ee("-mx-1 my-1 h-px bg-muted",n),...e}));uE.displayName=e$.displayName;function FX(){const{user:n,logout:e}=xi();return g.jsxs(PX,{children:[g.jsx(NX,{asChild:!0,children:g.jsxs(ue,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:[g.jsx("span",{className:"hidden md:block mr-2",children:(n==null?void 0:n.name)||(n==null?void 0:n.email.split("@")[0])}),g.jsx("div",{className:"size-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-600",children:g.jsx(T6,{className:"size-4"})})]})}),g.jsxs(r$,{align:"end",className:"w-56",children:[g.jsxs(s$,{children:[g.jsx("div",{className:"font-medium",children:(n==null?void 0:n.name)||"My Account"}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:n==null?void 0:n.email})]}),g.jsx(uE,{}),g.jsx(cE,{asChild:!0,children:g.jsx(yp,{to:"/sessions",className:"cursor-pointer",children:"My Study Sessions"})}),g.jsx(uE,{}),g.jsxs(cE,{className:"text-red-600 focus:text-red-600 cursor-pointer",onClick:e,children:[g.jsx(_6,{className:"mr-2 size-4"}),"Logout"]})]})]})}function Ua(){const n=S.useRef(null);return S.useEffect(()=>{const e=n.current;if(!e)return;e.classList.add("opacity-0");const t=new IntersectionObserver(([r])=>{r.isIntersecting&&(e.classList.remove("opacity-0"),e.classList.add("animate-fade-in"),t.unobserve(e))},{threshold:.1});return t.observe(e),()=>t.disconnect()},[]),n}const jh=()=>{const{isAuthenticated:n}=xi(),e=Ua();return g.jsx("header",{ref:e,className:"bg-white py-5 border-b border-gray-100 sticky top-0 z-50 shadow-sm backdrop-blur-lg bg-white/90",children:g.jsx("div",{className:"container mx-auto px-4 md:px-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center",children:g.jsxs(yp,{to:"/",className:"text-2xl font-bold flex items-center",children:[g.jsx("div",{className:"w-9 h-9 mr-2 gradient-bg rounded-md flex items-center justify-center",children:g.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),g.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),g.jsx("span",{className:"font-extrabold tracking-tighter",children:"Qzzly"})]})}),g.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[g.jsx("a",{href:"/#features",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Features"}),g.jsx("a",{href:"/#how-it-works",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"How it Works"}),g.jsx("a",{href:"/#pricing",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Pricing"}),g.jsx(yp,{to:"/sessions",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"My Sessions"})]}),g.jsx("div",{className:"flex items-center space-x-4",children:n?g.jsx(FX,{}):g.jsxs(g.Fragment,{children:[g.jsx(lJ,{children:g.jsx(ue,{variant:"outline",className:"hidden md:flex border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:"Log in"})}),g.jsx(j1,{children:g.jsx(ue,{className:"gradient-bg font-medium shadow-md shadow-purple-200",children:"Sign up"})})]})})]})})})};class Ca{static async getCurrentUser(){const{data:{user:e}}=await _t.auth.getUser();return e}static async createSession(e){try{const t=await this.getCurrentUser();if(!t)return{session:null,error:"User not authenticated"};const{data:r,error:s}=await _t.from("sessions").insert({user_id:t.id,title:e.title,description:e.description}).select().single();return s?{session:null,error:s.message}:{session:r,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async getSessions(){try{const e=await this.getCurrentUser();if(!e)return{sessions:null,error:"User not authenticated"};const{data:t,error:r}=await _t.from("sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return r?{sessions:null,error:r.message}:{sessions:t,error:null}}catch{return{sessions:null,error:"An unexpected error occurred"}}}static async getSession(e){try{const{data:t,error:r}=await _t.from("sessions").select("*").eq("id",e).single();return r?{session:null,error:r.message}:{session:t,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async updateSession(e,t){try{const{data:r,error:s}=await _t.from("sessions").update(t).eq("id",e).select().single();return s?{session:null,error:s.message}:{session:r,error:null}}catch{return{session:null,error:"An unexpected error occurred"}}}static async deleteSession(e){try{const{error:t}=await _t.from("sessions").delete().eq("id",e);return t?{error:t.message}:{error:null}}catch{return{error:"An unexpected error occurred"}}}static async addFile(e,t){try{const{data:r,error:s}=await _t.from("files").insert({session_id:e,name:t.name,type:t.type,content:t.content}).select().single();return s?{file:null,error:s.message}:{file:r,error:null}}catch{return{file:null,error:"An unexpected error occurred"}}}static async getFiles(e){try{const{data:t,error:r}=await _t.from("files").select("*").eq("session_id",e).order("created_at",{ascending:!0});return r?{files:null,error:r.message}:{files:t,error:null}}catch{return{files:null,error:"An unexpected error occurred"}}}static async saveStudyContent(e,t,r){try{const{data:s,error:i}=await _t.from("study_content").upsert({session_id:e,type:t,content:r}).select().single();return i?{studyContent:null,error:i.message}:{studyContent:s,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async getStudyContent(e,t){try{const{data:r,error:s}=await _t.from("study_content").select("*").eq("session_id",e).eq("type",t).single();return s?{studyContent:null,error:s.message}:{studyContent:r,error:null}}catch{return{studyContent:null,error:"An unexpected error occurred"}}}static async addFlashcards(e,t){const{data:r,error:s}=await _t.from("flashcards").insert(t.map(i=>({session_id:e,front:i.front,back:i.back,mastered:i.mastered}))).select();if(s)throw new Error(s.message);return r}}const OX=()=>{const[n,e]=S.useState(!1),[t,r]=S.useState(!1),s=S.useRef(null),i=$d(),{toast:o}=Ps(),{user:a}=xi(),l=async m=>{if(!a){o({title:"Authentication required",description:"Please sign up or log in to upload files"});return}if(!(!m||m.length===0)){r(!0);try{const y=m[0];if(y.type!=="application/pdf"){o({title:"Unsupported file format",description:"Please upload PDF files only",variant:"destructive"});return}const w=y.name.replace(/\.pdf$/,""),v=await Ca.createSession({title:w});if(v.error||!v.session){o({title:"Session creation failed",description:v.error||"Unknown error",variant:"destructive"});return}o({title:"Files uploaded successfully",description:`Created new study session: ${w}`}),i(`/session/${v.session.id}`)}catch{o({title:"Upload failed",description:"There was an error uploading your files",variant:"destructive"})}finally{r(!1)}}},c=m=>{m.preventDefault(),e(!1),m.dataTransfer.files&&m.dataTransfer.files.length>0&&l(m.dataTransfer.files)},u=()=>{var m;(m=s.current)==null||m.click()},f=()=>{a?i("/sessions"):o({title:"Authentication required",description:"Please sign up to get started"})};return g.jsx("section",{className:"py-20 md:py-28 container mx-auto px-4 md:px-6",children:g.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[g.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0",children:[g.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-8 leading-tight animate-fade-in",children:["Transform Your ",g.jsx("span",{className:"gradient-text",children:"Study Material"})," Into Interactive Quizzes"]}),g.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed animate-fade-in max-w-lg",style:{animationDelay:"0.2s"},children:"Upload your PDFs and explore our demo features to see how AI-powered study tools can accelerate your learning journey."}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 animate-fade-in",style:{animationDelay:"0.4s"},children:[a?g.jsx(ue,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",onClick:f,children:"Go to Study Sessions"}):g.jsx(j1,{children:g.jsx(ue,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",children:"Get Started Free"})}),g.jsxs(ue,{variant:"outline",className:"bg-white border border-gray-300 px-8 py-7 rounded-lg text-lg font-medium hover:bg-gray-50 transition-colors",children:[g.jsx(w2,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]}),g.jsx("div",{className:"md:w-1/2 animate-fade-in animate-float",style:{animationDelay:"0.6s"},children:g.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[g.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Try it now"}),g.jsxs("div",{id:"upload-container",className:`upload-area rounded-xl p-10 text-center cursor-pointer mb-6 border-2 border-dashed border-gray-300 ${n?"border-purple-500 bg-purple-50":""}`,onDragOver:m=>{m.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:c,onClick:u,children:[t?g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-purple-500 mb-4"}),g.jsx("p",{className:"text-gray-600",children:"Creating study session..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-500 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),g.jsx("p",{className:"text-gray-600 mb-3 text-lg",children:"Drag & drop your PDF files here"}),g.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"or"}),g.jsx(ue,{variant:"outline",className:"px-6 py-3 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50 font-medium",onClick:u,children:"Browse files"})]}),g.jsx("input",{type:"file",ref:s,className:"hidden",accept:".pdf",multiple:!0,onChange:m=>{m.target.files&&m.target.files.length>0&&l(m.target.files)}})]}),g.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Supported formats: PDF (Max size: 25MB per file)"})]})})]})})},UX=()=>{const n=Ua();return g.jsx("section",{ref:n,id:"features",className:"py-20 bg-white",children:g.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Features"}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Supercharge Your Learning"}),g.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Our AI analyzes your study materials and creates personalized learning resources to help you master any subject."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[g.jsx("div",{className:"feature-icon",children:g.jsx(w6,{className:"w-6 h-6"})}),g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Smart Quizzes"}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI-generated quizzes that adapt to your knowledge gaps and learning style for maximum retention."})]}),g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[g.jsx("div",{className:"feature-icon",children:g.jsx(ex,{className:"w-6 h-6"})}),g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Interactive Flashcards"}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Turn complex concepts into easy-to-review flashcards with spaced repetition for better memorization."})]}),g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[g.jsx("div",{className:"feature-icon",children:g.jsx(g6,{className:"w-6 h-6"})}),g.jsx("h3",{className:"text-xl font-bold mb-4",children:"Mock Tests"}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Simulate real exam conditions with comprehensive mock tests that prepare you for the real thing."})]})]})]})})},$X=()=>{const n=Ua();return g.jsx("section",{ref:n,id:"how-it-works",className:"py-24 bg-gray-50",children:g.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[g.jsxs("div",{className:"text-center mb-20",children:[g.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Process"}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"How Qzzly Works"}),g.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Three simple steps to transform your study materials into effective learning tools."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl mx-auto relative",children:[g.jsx("div",{className:"hidden md:block absolute top-24 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-600"}),g.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.2s"},children:[g.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"1"}),g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Upload Your PDFs"}),g.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Simply drag and drop your study materials, lecture notes, or textbook PDFs."})]}),g.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.4s"},children:[g.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"2"}),g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI Analysis"}),g.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Our advanced AI reads and understands your content, identifying key concepts and knowledge points."})]}),g.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.6s"},children:[g.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"3"}),g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Study Smarter"}),g.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Access your personalized quizzes, flashcards, and mock tests anytime, anywhere."})]})]})]})})},jX=()=>{const n=Ua();return g.jsx("section",{ref:n,className:"py-24 bg-white",children:g.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Testimonials"}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"What Our Users Say"}),g.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Join thousands of students who have transformed their study habits with Qzzly."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"testimonial-card",children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:g.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"JD"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:"Jamie Davis"}),g.jsx("p",{className:"text-gray-500 text-sm",children:"Medical Student"})]})]}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"Qzzly helped me prepare for my anatomy exams in half the time. The AI-generated questions were spot-on and covered exactly what I needed to know."'}),g.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>g.jsx(q_,{className:"w-5 h-5 fill-current"},e))})]}),g.jsxs("div",{className:"testimonial-card",children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:g.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"MK"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:"Michael Kim"}),g.jsx("p",{className:"text-gray-500 text-sm",children:"Law Student"})]})]}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The flashcards generated from my case law notes were incredibly helpful. I could study on the go and the spaced repetition system helped me memorize key precedents."'}),g.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>g.jsx(q_,{className:"w-5 h-5 fill-current"},e))})]}),g.jsxs("div",{className:"testimonial-card",children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mr-4",children:g.jsx("span",{className:"text-green-600 font-bold text-lg",children:"SP"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:"Sarah Patel"}),g.jsx("p",{className:"text-gray-500 text-sm",children:"Computer Science Major"})]})]}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:'"The mock tests generated from my programming textbooks were challenging and comprehensive. I aced my final exams thanks to Qzzly!"'}),g.jsx("div",{className:"mt-4 flex text-yellow-400",children:[1,2,3,4,5].map(e=>g.jsx(q_,{className:"w-5 h-5 fill-current"},e))})]})]})]})})},VX=()=>{const n=Ua(),{user:e,updateSubscription:t}=xi(),[r,s]=S.useState(!1),[i,o]=S.useState(""),[a,l]=S.useState(!1),{toast:c}=Ps(),u=async(f=!1)=>{if(!e){c({title:"Authentication Required",description:"Please log in to upgrade your subscription.",variant:"destructive"});return}l(!0);try{await t("pro",f?i:void 0)?(c({title:"Upgrade Successful!",description:f?"Your pro subscription has been activated with the promo code!":"Your pro subscription has been activated!"}),s(!1),o("")):c({title:"Upgrade Failed",description:"Please try again or contact support.",variant:"destructive"})}catch{c({title:"Error",description:"An error occurred while upgrading. Please try again.",variant:"destructive"})}finally{l(!1)}};return g.jsx("section",{ref:n,id:"pricing",className:"py-24 bg-gray-50",children:g.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Pricing"}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Simple, Transparent Pricing"}),g.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Choose the plan that works best for your study needs."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[g.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-md relative transition-all duration-300 hover:shadow-xl",children:[g.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Free"}),g.jsx("p",{className:"text-gray-500 mb-6",children:"Perfect for getting started"}),g.jsxs("div",{className:"text-4xl font-bold mb-6",children:["$0",g.jsx("span",{className:"text-lg text-gray-500 font-normal",children:"/month"})]}),g.jsxs("ul",{className:"mb-10 space-y-4",children:[g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"3 study sessions"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"PDF uploads"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Basic AI features"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Flashcards & quizzes"})]})]}),g.jsx(ue,{variant:"outline",className:"w-full py-6 border-2 border-purple-600 text-purple-600 hover:bg-purple-50 font-medium text-lg",onClick:()=>window.location.href="/sessions",children:e?"Current Plan":"Get Started"})]}),g.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-xl transform md:scale-105 border-2 border-purple-500 relative",children:[g.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-1.5 rounded-full text-sm font-bold",children:"Most Popular"}),g.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pro"}),g.jsx("p",{className:"text-gray-500 mb-6",children:"For serious learners"}),g.jsxs("div",{className:"text-4xl font-bold mb-6",children:["$9.99",g.jsx("span",{className:"text-lg text-gray-500 font-normal",children:"/month"})]}),g.jsxs("ul",{className:"mb-10 space-y-4",children:[g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Unlimited study sessions"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Advanced AI features"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Priority support"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Export capabilities"})]}),g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-600",children:"Custom study plans"})]})]}),g.jsx(ue,{className:"w-full py-6 gradient-bg text-white text-lg font-medium shadow-lg shadow-purple-200",onClick:()=>s(!0),disabled:(e==null?void 0:e.subscription.plan)==="pro",children:(e==null?void 0:e.subscription.plan)==="pro"?"Current Plan":"Upgrade to Pro"})]})]}),g.jsx(dc,{open:r,onOpenChange:s,children:g.jsxs(xa,{className:"sm:max-w-md",children:[g.jsx(ba,{children:g.jsx(_a,{children:"Upgrade to Pro"})}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(Je,{htmlFor:"promo-code",children:"Promo Code"}),g.jsx(_s,{id:"promo-code",placeholder:"Enter promo code",value:i,onChange:f=>o(f.target.value)})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx(ue,{onClick:()=>u(!1),disabled:a,className:"flex-1",children:a?"Processing...":"Pay $9.99/month"}),i&&g.jsx(ue,{onClick:()=>u(!0),disabled:a,variant:"outline",className:"flex-1",children:a?"Processing...":"Use Promo Code"})]}),g.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By upgrading, you agree to our terms of service and privacy policy."})]})]})})]})})},BX=()=>{const{isAuthenticated:n}=xi(),e=Ua();return g.jsx("section",{ref:e,className:"py-24 bg-white",children:g.jsx("div",{className:"container mx-auto px-4 md:px-6",children:g.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-10 md:p-16 shadow-2xl overflow-hidden relative",children:[g.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -mr-20 -mt-20"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-purple-500/10 rounded-full -ml-20 -mb-20"}),g.jsxs("div",{className:"max-w-3xl mx-auto text-center relative",children:[g.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-8 leading-tight",children:"Ready to Transform Your Study Habits?"}),g.jsx("p",{className:"text-xl text-purple-100 mb-10 leading-relaxed",children:"Join thousands of students who are studying smarter, not harder. Try Qzzly today and see the difference."}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5",children:[n?g.jsx(ue,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",asChild:!0,children:g.jsx(yp,{to:"/sessions",children:"Go to Study Sessions"})}):g.jsx(j1,{redirectPath:"/sessions",children:g.jsx(ue,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",children:"Get Started Free"})}),g.jsxs(ue,{size:"lg",variant:"outline",className:"bg-transparent text-white border-2 border-white px-10 py-7 hover:bg-white/10 text-lg font-bold rounded-xl",children:[g.jsx(w2,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]})]})})})},i$=()=>{const n=Ua();return g.jsx("footer",{ref:n,className:"bg-gray-900 text-white pt-20 pb-10",children:g.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-10 h-10 gradient-bg rounded-lg flex items-center justify-center mr-3",children:g.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"white"}),g.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"white",fillOpacity:"0.8"})]})}),g.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Qzzly"})]}),g.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"AI-powered study tools to help you learn faster and remember more."}),g.jsxs("div",{className:"flex space-x-5",children:[g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:g.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:g.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:g.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold mb-5",children:"Product"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Features"})}),g.jsx("li",{children:g.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Pricing"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Testimonials"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"FAQ"})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold mb-5",children:"Resources"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Blog"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Help Center"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Tutorials"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Contact"})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold mb-5",children:"Company"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"About Us"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Careers"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"})}),g.jsx("li",{children:g.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})})]})]})]}),g.jsx("div",{className:"border-t border-gray-800 mt-16 pt-8 text-center text-gray-400",children:g.jsxs("p",{children:[" ",new Date().getFullYear()," Qzzly. All rights reserved."]})})]})})},zX=()=>g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(jh,{}),g.jsxs("main",{className:"flex-grow",children:[g.jsx(OX,{}),g.jsx(UX,{}),g.jsx($X,{}),g.jsx(jX,{}),g.jsx(VX,{}),g.jsx(BX,{})]}),g.jsx(i$,{})]}),HX=()=>{const n=Oa();return S.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),g.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",children:[g.jsx(jh,{}),g.jsx("main",{className:"flex flex-1 flex-col items-center justify-center py-16",children:g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mb-6 animate-float",children:[g.jsx("ellipse",{cx:"60",cy:"60",rx:"55",ry:"55",fill:"#ede9fe"}),g.jsx("ellipse",{cx:"60",cy:"60",rx:"40",ry:"40",fill:"#a5b4fc"}),g.jsx("path",{d:"M60 80c-10 0-18-8-18-18s8-18 18-18 18 8 18 18-8 18-18 18zm0-8a10 10 0 100-20 10 10 0 000 20z",fill:"#7c3aed"}),g.jsx("circle",{cx:"50",cy:"55",r:"3",fill:"#fff"}),g.jsx("circle",{cx:"70",cy:"55",r:"3",fill:"#fff"}),g.jsx("ellipse",{cx:"60",cy:"70",rx:"6",ry:"3",fill:"#fff"})]}),g.jsx("h1",{className:"text-5xl font-extrabold text-purple-700 mb-2",children:"404"}),g.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Sorry, we couldn't find that page."}),g.jsx(ue,{className:"gradient-bg px-8 py-3 text-lg font-semibold shadow-md",asChild:!0,children:g.jsx("a",{href:"/sessions",children:"Go to My Sessions"})}),g.jsx(ue,{variant:"ghost",className:"mt-2 text-purple-600 hover:underline",asChild:!0,children:g.jsx("a",{href:"/",children:"Back to Home"})})]})}),g.jsx(i$,{})]})},ci=S.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ci.displayName="Card";const Zi=S.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ee("flex flex-col space-y-1.5 p-6",n),...e}));Zi.displayName="CardHeader";const da=S.forwardRef(({className:n,...e},t)=>g.jsx("h3",{ref:t,className:Ee("text-2xl font-semibold leading-none tracking-tight",n),...e}));da.displayName="CardTitle";const o$=S.forwardRef(({className:n,...e},t)=>g.jsx("p",{ref:t,className:Ee("text-sm text-muted-foreground",n),...e}));o$.displayName="CardDescription";const eo=S.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ee("p-6 pt-0",n),...e}));eo.displayName="CardContent";const Sx=S.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ee("flex items-center p-6 pt-0",n),...e}));Sx.displayName="CardFooter";const Jc=S.forwardRef(({className:n,...e},t)=>g.jsx("textarea",{className:Ee("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Jc.displayName="Textarea";const a$=({isOpen:n,onClose:e,action:t,currentUsage:r,limit:s})=>{const{updateSubscription:i}=xi();if(!n)return null;const o=()=>{switch(t){case"session":return"create a new study session";case"file":return"upload another file";case"chat":return"use chat mode";default:return"perform this action"}},a=()=>{switch(t){case"session":return"1 session per month";case"file":return"1 file per session";case"chat":return"chat mode not available";default:return"limited"}},l=async()=>{try{await i("pro")&&e()}catch(c){console.error("Upgrade failed:",c)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Free Plan Limit Reached"}),g.jsxs("p",{className:"text-gray-600 mb-4",children:["You've reached your free plan limit and cannot ",o(),"."]})]}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-sm text-gray-600",children:"Current Usage:"}),g.jsxs("span",{className:"text-sm font-medium",children:[r," / ",s]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:g.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${Math.min(r/s*100,100)}%`}})}),g.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Free plan: ",a()]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[g.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro"}),g.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[g.jsx("li",{children:" Unlimited study sessions"}),g.jsx("li",{children:" Unlimited file uploads"}),g.jsx("li",{children:" Full chat mode access"}),g.jsx("li",{children:" File deletion and management"}),g.jsx("li",{children:" Priority support"})]})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:"$9.99/month"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Cancel anytime"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:l,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Upgrade Now"}),g.jsx("button",{onClick:e,className:"w-full text-gray-600 py-2 px-6 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Maybe Later"})]})]})]})})})};function GX(){const{user:n}=xi(),e=h1(),{data:t,isLoading:r}=wF({queryKey:["sessions"],queryFn:Ca.getSessions}),s=(t==null?void 0:t.sessions)||[],[i,o]=S.useState(""),[a,l]=S.useState(""),[c,u]=S.useState(!1),f=$d(),{toast:m}=Ps(),y=xP({mutationFn:_=>Ca.createSession({title:_.title,description:_.description}),onSuccess:async _=>{if(_.error||!_.session){m({title:"Error",description:_.error||"Failed to create session",variant:"destructive"});return}e.invalidateQueries({queryKey:["sessions"]}),o(""),l(""),u(!1),m({title:"Success",description:`"${_.session.title}" has been created successfully.`}),setTimeout(()=>{f(`/session/${_.session.id}`)},100)},onError:()=>{m({title:"Error",description:"Failed to create session",variant:"destructive"})}}),w=()=>{if(!i.trim()){m({title:"Error",description:"Session title is required",variant:"destructive"});return}y.mutate({title:i,description:a})},v=xP({mutationFn:_=>Ca.deleteSession(_),onSuccess:(_,T)=>{if(_.error){m({title:"Error",description:_.error,variant:"destructive"});return}e.setQueryData(["sessions"],(A=[])=>A.filter(P=>P.id!==T)),m({title:"Success",description:"Session has been deleted successfully."})},onError:()=>{m({title:"Error",description:"Failed to delete session",variant:"destructive"})}}),b=(_,T)=>{T.stopPropagation(),v.mutate(_)},x=_=>{if(!_)return"Unknown";const T=new Date(_);return isNaN(T.getTime())?"Unknown":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(T)},C=Ua();return g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(jh,{}),g.jsxs("main",{ref:C,className:"container mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Your Study Sessions"}),g.jsxs(dc,{open:c,onOpenChange:u,children:[g.jsx(Sp,{asChild:!0,children:g.jsx(ue,{className:"gradient-bg",children:"Create New Session"})}),g.jsxs(xa,{children:[g.jsxs(ba,{children:[g.jsx(_a,{children:"Create New Study Session"}),g.jsx(Gb,{children:"Create a new study session to organize your learning materials."})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"title",children:"Session Title"}),g.jsx(_s,{id:"title",placeholder:"Enter a title for your study session",value:i,onChange:_=>o(_.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"description",children:"Description (Optional)"}),g.jsx(Jc,{id:"description",placeholder:"Describe what you'll be studying",value:a,onChange:_=>l(_.target.value)})]})]}),g.jsxs($h,{children:[g.jsx(ue,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),g.jsx(ue,{className:"gradient-bg",onClick:w,children:"Create Session"})]})]})]})]}),r?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(_=>g.jsxs(ci,{className:"border shadow-sm animate-pulse",children:[g.jsx(Zi,{className:"bg-gray-100 h-16"}),g.jsxs(eo,{className:"pt-4",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),g.jsx(Sx,{className:"h-10 bg-gray-50"})]},_))}):s.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(_=>g.jsxs(ci,{className:"border shadow-md hover:shadow-lg transition-shadow cursor-pointer card-hover",onClick:()=>f(`/session/${_.id}`),children:[g.jsx(Zi,{className:"pb-2",children:g.jsxs(da,{className:"flex justify-between items-start",children:[g.jsx("span",{className:"text-xl",children:_.title}),g.jsx(ue,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-500 hover:bg-red-50",onClick:T=>b(_.id,T),children:g.jsx(E6,{className:"h-4 w-4"})})]})}),g.jsxs(eo,{className:"pb-2",children:[g.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:_.description||"No description"}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(f6,{className:"h-3.5 w-3.5"}),g.jsxs("span",{children:["Created: ",x(_.created_at)]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(v6,{className:"h-3.5 w-3.5"}),g.jsxs("span",{children:["Updated: ",x(_.updated_at)]})]})]})]}),g.jsx(Sx,{className:"pt-3 border-t flex justify-between",children:g.jsx("div",{})})]},_.id))}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"w-16 h-16 gradient-bg rounded-full mx-auto mb-4 flex items-center justify-center",children:g.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),g.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),g.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Study Sessions Yet"}),g.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first study session to upload PDFs and start generating flashcards, quizzes, and more."}),g.jsx(ue,{className:"gradient-bg",onClick:()=>u(!0),children:"Create Your First Session"})]})]}),g.jsx(a$,{isOpen:!1,onClose:()=>{},action:"session",currentUsage:0,limit:1})]})}var Jb="Tabs",[qX,sde]=hr(Jb,[jp]),l$=jp(),[WX,J1]=qX(Jb),c$=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=$p(a),[f,m]=uo({prop:r,onChange:s,defaultProp:i??"",caller:Jb});return g.jsx(WX,{scope:t,baseId:ao(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:l,children:g.jsx(we.div,{dir:u,"data-orientation":o,...c,ref:e})})});c$.displayName=Jb;var u$="TabsList",d$=S.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=J1(u$,t),o=l$(t);return g.jsx(V1,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:g.jsx(we.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});d$.displayName=u$;var h$="TabsTrigger",f$=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,o=J1(h$,t),a=l$(t),l=g$(o.baseId,r),c=y$(o.baseId,r),u=r===o.value;return g.jsx(B1,{asChild:!0,...a,focusable:!s,active:u,children:g.jsx(we.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:te(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:te(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:te(n.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!s&&f&&o.onValueChange(r)})})})});f$.displayName=h$;var p$="TabsContent",m$=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...o}=n,a=J1(p$,t),l=g$(a.baseId,r),c=y$(a.baseId,r),u=r===a.value,f=S.useRef(u);return S.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),g.jsx(ls,{present:s||u,children:({present:m})=>g.jsx(we.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});m$.displayName=p$;function g$(n,e){return`${n}-trigger-${e}`}function y$(n,e){return`${n}-content-${e}`}var KX=c$,v$=d$,w$=f$,x$=m$;const b$=KX,X1=S.forwardRef(({className:n,...e},t)=>g.jsx(v$,{ref:t,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));X1.displayName=v$.displayName;const ha=S.forwardRef(({className:n,...e},t)=>g.jsx(w$,{ref:t,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));ha.displayName=w$.displayName;const fa=S.forwardRef(({className:n,...e},t)=>g.jsx(x$,{ref:t,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));fa.displayName=x$.displayName;async function YX(n,e=5,t="medium",r,s){return await new Promise(o=>setTimeout(o,1500)),[{front:"What is the main topic of this study material?",back:"The document covers educational concepts and learning strategies for effective study.",mastered:!1},{front:"What are the three key study techniques mentioned?",back:"Regular review, active practice, and concept application are the three main techniques.",mastered:!1},{front:"How should you approach difficult concepts?",back:"Break them down into smaller, manageable parts and practice regularly.",mastered:!1},{front:"What is the best way to retain information?",back:"Spaced repetition and active recall are the most effective retention methods.",mastered:!1},{front:"Why is understanding better than memorization?",back:"Understanding allows you to apply knowledge to new situations and solve problems creatively.",mastered:!1}].slice(0,e)}async function JX(n,e=5,t="medium",r="",s=!0,i=["multiple-choice"],o,a){await new Promise(c=>setTimeout(c,2e3));const l=[{text:"What is the primary focus of effective studying?",options:["Memorizing facts quickly","Understanding and applying concepts","Reading as fast as possible","Avoiding difficult topics"],correctAnswer:1,explanation:"Understanding and applying concepts is more effective than rote memorization because it helps you retain information longer and use it in new situations."},{text:"Which study technique is most effective for long-term retention?",options:["Cramming the night before","Spaced repetition","Reading once","Highlighting everything"],correctAnswer:1,explanation:"Spaced repetition involves reviewing material at increasing intervals, which is scientifically proven to improve long-term retention."},{text:"What should you do when you encounter a difficult concept?",options:["Skip it entirely","Break it down into smaller parts","Memorize it without understanding","Ask someone else to explain it"],correctAnswer:1,explanation:"Breaking difficult concepts into smaller, manageable parts makes them easier to understand and remember."},{text:"How often should you review your study materials?",options:["Only before exams","Once a week","Regularly, with increasing intervals","Never, just read once"],correctAnswer:2,explanation:"Regular review with increasing intervals (spaced repetition) is the most effective way to retain information."},{text:"What is the best way to test your understanding?",options:["Rereading the material","Taking practice quizzes","Highlighting key points","Summarizing in your own words"],correctAnswer:3,explanation:"Summarizing in your own words forces you to process and understand the material, making it more likely to stick."}];return{title:`Sample Quiz on ${r||"Study Materials"}`,questions:l.slice(0,e)}}async function XX(n,e="notes",t="medium",r,s){return await new Promise(i=>setTimeout(i,1500)),e==="outline"?`# Study Material Outline

## 1. Introduction to Effective Studying
   - Understanding vs. memorization
   - Active learning techniques
   - Goal setting and planning

## 2. Core Study Strategies
   - Spaced repetition
   - Active recall
   - Interleaving practice
   - Elaboration techniques

## 3. Time Management
   - Pomodoro technique
   - Priority setting
   - Break scheduling
   - Review planning

## 4. Note-Taking Methods
   - Cornell method
   - Mind mapping
   - Flow notes
   - Digital tools

## 5. Test Preparation
   - Practice testing
   - Self-assessment
   - Stress management
   - Review strategies`:e==="summary"?`Study Material Summary

This comprehensive guide covers effective study techniques and learning strategies. The material emphasizes understanding over memorization, active engagement with content, and regular review for optimal retention.

Key concepts include spaced repetition, active recall, and practical application of knowledge. The guide also covers time management, note-taking methods, and test preparation strategies.

Main takeaways:
- Focus on understanding rather than memorization
- Use active learning techniques
- Implement regular review schedules
- Practice applying knowledge to new situations
- Develop effective time management skills`:`Study Notes

Effective studying requires more than just reading and memorizing. Here are the key principles:

1. Understanding Over Memorization
   - Focus on grasping concepts rather than memorizing facts
   - Ask "why" and "how" questions
   - Connect new information to what you already know

2. Active Learning Techniques
   - Summarize information in your own words
   - Teach concepts to others
   - Create examples and analogies
   - Practice applying knowledge to new situations

3. Spaced Repetition
   - Review material at increasing intervals
   - Use flashcards or apps for regular practice
   - Schedule review sessions in advance

4. Time Management
   - Use the Pomodoro technique (25-minute focused sessions)
   - Prioritize difficult topics
   - Take regular breaks to maintain focus

5. Note-Taking Strategies
   - Use the Cornell method for structured notes
   - Create mind maps for visual learners
   - Review and revise notes regularly

Remember: The goal is not just to pass tests, but to truly understand and retain the material for long-term use.`}async function dE(n,e="medium",t,r){return await new Promise(s=>setTimeout(s,2e3)),`Here's a comprehensive answer to your question about study techniques and learning strategies:

Understanding Effective Study Methods

The most effective study techniques are those that engage your brain actively rather than passively. Research shows that active learning methods lead to better retention and understanding compared to passive reading or memorization.

Key Active Learning Strategies:

1. Spaced Repetition
   This technique involves reviewing information at increasing intervals over time. Instead of cramming all at once, you review material after 1 day, then 3 days, then 1 week, and so on. This approach takes advantage of the brain's natural forgetting curve and helps move information from short-term to long-term memory.

2. Active Recall
   Rather than simply re-reading material, actively test yourself on what you've learned. This could involve creating flashcards, taking practice quizzes, or explaining concepts to others. The act of retrieving information from memory strengthens neural pathways and improves retention.

3. Interleaving
   Instead of studying one topic completely before moving to the next, mix different subjects or types of problems. This approach helps you learn to distinguish between different concepts and apply the right strategy to each situation.

4. Elaboration
   Connect new information to what you already know. Create analogies, examples, or explanations that help you understand the material more deeply. The more connections you make, the easier it is to remember and apply the information.

Practical Implementation:

Start by identifying your learning goals and the specific material you need to master. Break down complex topics into smaller, manageable chunks. Create a study schedule that incorporates regular review sessions using spaced repetition.

Use active recall techniques during your study sessions. Instead of just reading, ask yourself questions about the material, create summaries in your own words, or teach the concepts to someone else.

Remember that effective studying is not about the amount of time spent, but about the quality of your engagement with the material. Focus on understanding rather than memorization, and practice applying your knowledge to new situations.`}function Ex(n,[e,t]){return Math.min(t,Math.max(e,n))}function Xb(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var _$=["PageUp","PageDown"],C$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Vp="Slider",[hE,QX,ZX]=vv(Vp),[E$,ide]=hr(Vp,[ZX]),[eQ,Qb]=E$(Vp),T$=S.forwardRef((n,e)=>{const{name:t,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:w,...v}=n,b=S.useRef(new Set),x=S.useRef(0),_=o==="horizontal"?tQ:nQ,[T=[],A]=uo({prop:u,defaultProp:c,onChange:F=>{var G;(G=[...b.current][x.current])==null||G.focus(),f(F)}}),P=S.useRef(T);function N(F){const $=aQ(T,F);D(F,$)}function I(F){D(F,x.current)}function M(){const F=P.current[x.current];T[x.current]!==F&&m(T)}function D(F,$,{commit:G}={commit:!1}){const O=dQ(i),W=hQ(Math.round((F-r)/i)*i+r,O),j=Ex(W,[r,s]);A((z=[])=>{const V=iQ(z,j,$);if(uQ(V,l*i)){x.current=V.indexOf(j);const U=String(V)!==String(z);return U&&G&&m(V),U?V:z}else return z})}return g.jsx(eQ,{scope:n.__scopeSlider,name:t,disabled:a,min:r,max:s,valueIndexToChangeRef:x,thumbs:b.current,values:T,orientation:o,form:w,children:g.jsx(hE.Provider,{scope:n.__scopeSlider,children:g.jsx(hE.Slot,{scope:n.__scopeSlider,children:g.jsx(_,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:te(v.onPointerDown,()=>{a||(P.current=T)}),min:r,max:s,inverted:y,onSlideStart:a?void 0:N,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&D(r,0,{commit:!0}),onEndKeyDown:()=>!a&&D(s,T.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:$})=>{if(!a){const W=_$.includes(F.key)||F.shiftKey&&C$.includes(F.key)?10:1,j=x.current,z=T[j],V=i*W*$;D(z+V,j,{commit:!0})}}})})})})});T$.displayName=Vp;var[A$,k$]=E$(Vp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tQ=S.forwardRef((n,e)=>{const{min:t,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[f,m]=S.useState(null),y=Ue(e,_=>m(_)),w=S.useRef(void 0),v=$p(s),b=v==="ltr",x=b&&!i||!b&&i;function C(_){const T=w.current||f.getBoundingClientRect(),A=[0,T.width],N=Q1(A,x?[t,r]:[r,t]);return w.current=T,N(_-T.left)}return g.jsx(A$,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:g.jsx(R$,{dir:v,"data-orientation":"horizontal",...u,ref:y,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const T=C(_.clientX);o==null||o(T)},onSlideMove:_=>{const T=C(_.clientX);a==null||a(T)},onSlideEnd:()=>{w.current=void 0,l==null||l()},onStepKeyDown:_=>{const A=S$[x?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:A?-1:1})}})})}),nQ=S.forwardRef((n,e)=>{const{min:t,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=S.useRef(null),f=Ue(e,u),m=S.useRef(void 0),y=!s;function w(v){const b=m.current||u.current.getBoundingClientRect(),x=[0,b.height],_=Q1(x,y?[r,t]:[t,r]);return m.current=b,_(v-b.top)}return g.jsx(A$,{scope:n.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:g.jsx(R$,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=w(v.clientY);i==null||i(b)},onSlideMove:v=>{const b=w(v.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:v=>{const x=S$[y?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:x?-1:1})}})})}),R$=S.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=Qb(Vp,t);return g.jsx(we.span,{...c,ref:e,onKeyDown:te(n.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):_$.concat(C$).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:te(n.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(m)?m.focus():r(f)}),onPointerMove:te(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:te(n.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),P$="SliderTrack",N$=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=Qb(P$,t);return g.jsx(we.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});N$.displayName=P$;var fE="SliderRange",I$=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=Qb(fE,t),i=k$(fE,t),o=S.useRef(null),a=Ue(e,o),l=s.values.length,c=s.values.map(m=>L$(m,s.min,s.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return g.jsx(we.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...n.style,[i.startEdge]:u+"%",[i.endEdge]:f+"%"}})});I$.displayName=fE;var pE="SliderThumb",M$=S.forwardRef((n,e)=>{const t=QX(n.__scopeSlider),[r,s]=S.useState(null),i=Ue(e,a=>s(a)),o=S.useMemo(()=>r?t().findIndex(a=>a.ref.current===r):-1,[t,r]);return g.jsx(rQ,{...n,ref:i,index:o})}),rQ=S.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:s,...i}=n,o=Qb(pE,t),a=k$(pE,t),[l,c]=S.useState(null),u=Ue(e,C=>c(C)),f=l?o.form||!!l.closest("form"):!0,m=Ab(l),y=o.values[r],w=y===void 0?0:L$(y,o.min,o.max),v=oQ(r,o.values.length),b=m==null?void 0:m[a.size],x=b?lQ(b,w,a.direction):0;return S.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${w}% + ${x}px)`},children:[g.jsx(hE.ItemSlot,{scope:n.__scopeSlider,children:g.jsx(we.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:y===void 0?{display:"none"}:n.style,onFocus:te(n.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&g.jsx(D$,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},r)]})});M$.displayName=pE;var sQ="RadioBubbleInput",D$=S.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const s=S.useRef(null),i=Ue(s,r),o=Xb(e);return S.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),g.jsx(we.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});D$.displayName=sQ;function iQ(n=[],e,t){const r=[...n];return r[t]=e,r.sort((s,i)=>s-i)}function L$(n,e,t){const i=100/(t-e)*(n-e);return Ex(i,[0,100])}function oQ(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function aQ(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),r=Math.min(...t);return t.indexOf(r)}function lQ(n,e,t){const r=n/2,i=Q1([0,50],[0,r]);return(r-i(e)*t)*t}function cQ(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function uQ(n,e){if(e>0){const t=cQ(n);return Math.min(...t)>=e}return!0}function Q1(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function dQ(n){return(String(n).split(".")[1]||"").length}function hQ(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var F$=T$,fQ=N$,pQ=I$,mQ=M$;const Z1=S.forwardRef(({className:n,...e},t)=>g.jsxs(F$,{ref:t,className:Ee("relative flex w-full touch-none select-none items-center",n),...e,children:[g.jsx(fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:g.jsx(pQ,{className:"absolute h-full bg-primary"})}),g.jsx(mQ,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Z1.displayName=F$.displayName;var gQ=[" ","Enter","ArrowUp","ArrowDown"],yQ=[" ","Enter"],Pd="Select",[Zb,e_,vQ]=vv(Pd),[Bp,ode]=hr(Pd,[vQ,Ip]),t_=Ip(),[wQ,Ac]=Bp(Pd),[xQ,bQ]=Bp(Pd),O$=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:y,form:w}=n,v=t_(e),[b,x]=S.useState(null),[C,_]=S.useState(null),[T,A]=S.useState(!1),P=$p(c),[N,I]=uo({prop:r,defaultProp:s??!1,onChange:i,caller:Pd}),[M,D]=uo({prop:o,defaultProp:a,onChange:l,caller:Pd}),F=S.useRef(null),$=b?w||!!b.closest("form"):!0,[G,O]=S.useState(new Set),W=Array.from(G).map(j=>j.props.value).join(";");return g.jsx(X2,{...v,children:g.jsxs(wQ,{required:y,scope:e,trigger:b,onTriggerChange:x,valueNode:C,onValueNodeChange:_,valueNodeHasChildren:T,onValueNodeHasChildrenChange:A,contentId:ao(),value:M,onValueChange:D,open:N,onOpenChange:I,dir:P,triggerPointerDownPosRef:F,disabled:m,children:[g.jsx(Zb.Provider,{scope:e,children:g.jsx(xQ,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(j=>{O(z=>new Set(z).add(j))},[]),onNativeOptionRemove:S.useCallback(j=>{O(z=>{const V=new Set(z);return V.delete(j),V})},[]),children:t})}),$?g.jsxs(aj,{"aria-hidden":!0,required:y,tabIndex:-1,name:u,autoComplete:f,value:M,onChange:j=>D(j.target.value),disabled:m,form:w,children:[M===void 0?g.jsx("option",{value:""}):null,Array.from(G)]},W):null]})})};O$.displayName=Pd;var U$="SelectTrigger",$$=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=t_(t),o=Ac(U$,t),a=o.disabled||r,l=Ue(e,o.onTriggerChange),c=e_(t),u=S.useRef("touch"),[f,m,y]=cj(v=>{const b=c().filter(_=>!_.disabled),x=b.find(_=>_.value===o.value),C=uj(b,v,x);C!==void 0&&o.onValueChange(C.value)}),w=v=>{a||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return g.jsx(s1,{asChild:!0,...i,children:g.jsx(we.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":lj(o.value)?"":void 0,...s,ref:l,onClick:te(s.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:te(s.onPointerDown,v=>{u.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:te(s.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&gQ.includes(v.key)&&(w(),v.preventDefault())})})})});$$.displayName=U$;var j$="SelectValue",V$=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...a}=n,l=Ac(j$,t),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,f=Ue(e,l.onValueNodeChange);return Dn(()=>{c(u)},[c,u]),g.jsx(we.span,{...a,ref:f,style:{pointerEvents:"none"},children:lj(l.value)?g.jsx(g.Fragment,{children:o}):i})});V$.displayName=j$;var _Q="SelectIcon",B$=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return g.jsx(we.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});B$.displayName=_Q;var CQ="SelectPortal",z$=n=>g.jsx(wv,{asChild:!0,...n});z$.displayName=CQ;var Nd="SelectContent",H$=S.forwardRef((n,e)=>{const t=Ac(Nd,n.__scopeSelect),[r,s]=S.useState();if(Dn(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?Ud.createPortal(g.jsx(G$,{scope:n.__scopeSelect,children:g.jsx(Zb.Slot,{scope:n.__scopeSelect,children:g.jsx("div",{children:n.children})})}),i):null}return g.jsx(q$,{...n,ref:e})});H$.displayName=Nd;var $s=10,[G$,kc]=Bp(Nd),SQ="SelectContentImpl",EQ=_d("SelectContent.RemoveScroll"),q$=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:b,...x}=n,C=Ac(Nd,t),[_,T]=S.useState(null),[A,P]=S.useState(null),N=Ue(e,Y=>T(Y)),[I,M]=S.useState(null),[D,F]=S.useState(null),$=e_(t),[G,O]=S.useState(!1),W=S.useRef(!1);S.useEffect(()=>{if(_)return F1(_)},[_]),L1();const j=S.useCallback(Y=>{const[Se,...se]=$().map(ke=>ke.ref.current),[xe]=se.slice(-1),Te=document.activeElement;for(const ke of Y)if(ke===Te||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===Se&&A&&(A.scrollTop=0),ke===xe&&A&&(A.scrollTop=A.scrollHeight),ke==null||ke.focus(),document.activeElement!==Te))return},[$,A]),z=S.useCallback(()=>j([I,_]),[j,I,_]);S.useEffect(()=>{G&&z()},[G,z]);const{onOpenChange:V,triggerPointerDownPosRef:U}=C;S.useEffect(()=>{if(_){let Y={x:0,y:0};const Se=xe=>{var Te,ke;Y={x:Math.abs(Math.round(xe.pageX)-(((Te=U.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((ke=U.current)==null?void 0:ke.y)??0))}},se=xe=>{Y.x<=10&&Y.y<=10?xe.preventDefault():_.contains(xe.target)||V(!1),document.removeEventListener("pointermove",Se),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",se,{capture:!0})}}},[_,V,U]),S.useEffect(()=>{const Y=()=>V(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[V]);const[H,Q]=cj(Y=>{const Se=$().filter(Te=>!Te.disabled),se=Se.find(Te=>Te.ref.current===document.activeElement),xe=uj(Se,Y,se);xe&&setTimeout(()=>xe.ref.current.focus())}),J=S.useCallback((Y,Se,se)=>{const xe=!W.current&&!se;(C.value!==void 0&&C.value===Se||xe)&&(M(Y),xe&&(W.current=!0))},[C.value]),re=S.useCallback(()=>_==null?void 0:_.focus(),[_]),ye=S.useCallback((Y,Se,se)=>{const xe=!W.current&&!se;(C.value!==void 0&&C.value===Se||xe)&&F(Y)},[C.value]),Me=r==="popper"?mE:W$,De=Me===mE?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:b}:{};return g.jsx(G$,{scope:t,content:_,viewport:A,onViewportChange:P,itemRefCallback:J,selectedItem:I,onItemLeave:re,itemTextRefCallback:ye,focusSelectedItem:z,selectedItemText:D,position:r,isPositioned:G,searchRef:H,children:g.jsx(zb,{as:EQ,allowPinchZoom:!0,children:g.jsx(Vb,{asChild:!0,trapped:C.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:te(s,Y=>{var Se;(Se=C.trigger)==null||Se.focus({preventScroll:!0}),Y.preventDefault()}),children:g.jsx(kp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:g.jsx(Me,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:Y=>Y.preventDefault(),...x,...De,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:te(x.onKeyDown,Y=>{const Se=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!Se&&Y.key.length===1&&Q(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let xe=$().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const Te=Y.target,ke=xe.indexOf(Te);xe=xe.slice(ke+1)}setTimeout(()=>j(xe)),Y.preventDefault()}})})})})})})});q$.displayName=SQ;var TQ="SelectItemAlignedPosition",W$=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Ac(Nd,t),o=kc(Nd,t),[a,l]=S.useState(null),[c,u]=S.useState(null),f=Ue(e,N=>u(N)),m=e_(t),y=S.useRef(!1),w=S.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:x,focusSelectedItem:C}=o,_=S.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&b&&x){const N=i.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),D=x.getBoundingClientRect();if(i.dir!=="rtl"){const Te=D.left-I.left,ke=M.left-Te,Nt=N.left-ke,bn=N.width+Nt,_i=Math.max(bn,I.width),Ci=window.innerWidth-$s,yo=Ex(ke,[$s,Math.max($s,Ci-_i)]);a.style.minWidth=bn+"px",a.style.left=yo+"px"}else{const Te=I.right-D.right,ke=window.innerWidth-M.right-Te,Nt=window.innerWidth-N.right-ke,bn=N.width+Nt,_i=Math.max(bn,I.width),Ci=window.innerWidth-$s,yo=Ex(ke,[$s,Math.max($s,Ci-_i)]);a.style.minWidth=bn+"px",a.style.right=yo+"px"}const F=m(),$=window.innerHeight-$s*2,G=v.scrollHeight,O=window.getComputedStyle(c),W=parseInt(O.borderTopWidth,10),j=parseInt(O.paddingTop,10),z=parseInt(O.borderBottomWidth,10),V=parseInt(O.paddingBottom,10),U=W+j+G+V+z,H=Math.min(b.offsetHeight*5,U),Q=window.getComputedStyle(v),J=parseInt(Q.paddingTop,10),re=parseInt(Q.paddingBottom,10),ye=N.top+N.height/2-$s,Me=$-ye,De=b.offsetHeight/2,Y=b.offsetTop+De,Se=W+j+Y,se=U-Se;if(Se<=ye){const Te=F.length>0&&b===F[F.length-1].ref.current;a.style.bottom="0px";const ke=c.clientHeight-v.offsetTop-v.offsetHeight,Nt=Math.max(Me,De+(Te?re:0)+ke+z),bn=Se+Nt;a.style.height=bn+"px"}else{const Te=F.length>0&&b===F[0].ref.current;a.style.top="0px";const Nt=Math.max(ye,W+v.offsetTop+(Te?J:0)+De)+se;a.style.height=Nt+"px",v.scrollTop=Se-ye+v.offsetTop}a.style.margin=`${$s}px 0`,a.style.minHeight=H+"px",a.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,a,c,v,b,x,i.dir,r]);Dn(()=>_(),[_]);const[T,A]=S.useState();Dn(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const P=S.useCallback(N=>{N&&w.current===!0&&(_(),C==null||C(),w.current=!1)},[_,C]);return g.jsx(kQ,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:P,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:g.jsx(we.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});W$.displayName=TQ;var AQ="SelectPopperPosition",mE=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=$s,...i}=n,o=t_(t);return g.jsx(i1,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mE.displayName=AQ;var[kQ,ek]=Bp(Nd,{}),gE="SelectViewport",K$=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=kc(gE,t),o=ek(gE,t),a=Ue(e,i.onViewportChange),l=S.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),g.jsx(Zb.Slot,{scope:t,children:g.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:te(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(l.current-u.scrollTop);if(y>0){const w=window.innerHeight-$s*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(v,b);if(x<w){const C=x+y,_=Math.min(w,C),T=C-_;f.style.height=_+"px",f.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});K$.displayName=gE;var Y$="SelectGroup",[RQ,PQ]=Bp(Y$),NQ=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=ao();return g.jsx(RQ,{scope:t,id:s,children:g.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:e})})});NQ.displayName=Y$;var J$="SelectLabel",X$=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=PQ(J$,t);return g.jsx(we.div,{id:s.id,...r,ref:e})});X$.displayName=J$;var Tx="SelectItem",[IQ,Q$]=Bp(Tx),Z$=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,a=Ac(Tx,t),l=kc(Tx,t),c=a.value===r,[u,f]=S.useState(i??""),[m,y]=S.useState(!1),w=Ue(e,C=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,C,r,s)}),v=ao(),b=S.useRef("touch"),x=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(IQ,{scope:t,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:S.useCallback(C=>{f(_=>_||((C==null?void 0:C.textContent)??"").trim())},[]),children:g.jsx(Zb.ItemSlot,{scope:t,value:r,disabled:s,textValue:u,children:g.jsx(we.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:te(o.onFocus,()=>y(!0)),onBlur:te(o.onBlur,()=>y(!1)),onClick:te(o.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:te(o.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:te(o.onPointerDown,C=>{b.current=C.pointerType}),onPointerMove:te(o.onPointerMove,C=>{var _;b.current=C.pointerType,s?(_=l.onItemLeave)==null||_.call(l):b.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:te(o.onPointerLeave,C=>{var _;C.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:te(o.onKeyDown,C=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&C.key===" "||(yQ.includes(C.key)&&x(),C.key===" "&&C.preventDefault())})})})})});Z$.displayName=Tx;var bm="SelectItemText",ej=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=Ac(bm,t),a=kc(bm,t),l=Q$(bm,t),c=bQ(bm,t),[u,f]=S.useState(null),m=Ue(e,x=>f(x),l.onItemTextChange,x=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,x,l.value,l.disabled)}),y=u==null?void 0:u.textContent,w=S.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=c;return Dn(()=>(v(w),()=>b(w)),[v,b,w]),g.jsxs(g.Fragment,{children:[g.jsx(we.span,{id:l.textId,...i,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ud.createPortal(i.children,o.valueNode):null]})});ej.displayName=bm;var tj="SelectItemIndicator",nj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return Q$(tj,t).isSelected?g.jsx(we.span,{"aria-hidden":!0,...r,ref:e}):null});nj.displayName=tj;var yE="SelectScrollUpButton",rj=S.forwardRef((n,e)=>{const t=kc(yE,n.__scopeSelect),r=ek(yE,n.__scopeSelect),[s,i]=S.useState(!1),o=Ue(e,r.onScrollButtonChange);return Dn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(ij,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});rj.displayName=yE;var vE="SelectScrollDownButton",sj=S.forwardRef((n,e)=>{const t=kc(vE,n.__scopeSelect),r=ek(vE,n.__scopeSelect),[s,i]=S.useState(!1),o=Ue(e,r.onScrollButtonChange);return Dn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(ij,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});sj.displayName=vE;var ij=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=kc("SelectScrollButton",t),o=S.useRef(null),a=e_(t),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Dn(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),g.jsx(we.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:te(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:te(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:te(s.onPointerLeave,()=>{l()})})}),MQ="SelectSeparator",oj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return g.jsx(we.div,{"aria-hidden":!0,...r,ref:e})});oj.displayName=MQ;var wE="SelectArrow",DQ=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=t_(t),i=Ac(wE,t),o=kc(wE,t);return i.open&&o.position==="popper"?g.jsx(o1,{...s,...r,ref:e}):null});DQ.displayName=wE;var LQ="SelectBubbleInput",aj=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),i=Ue(r,s),o=Xb(e);return S.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),g.jsx(we.select,{...t,style:{...WL,...t.style},ref:i,defaultValue:e})});aj.displayName=LQ;function lj(n){return n===""||n===void 0}function cj(n){const e=Ir(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function uj(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=FQ(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function FQ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var OQ=O$,dj=$$,UQ=V$,$Q=B$,jQ=z$,hj=H$,VQ=K$,fj=X$,pj=Z$,BQ=ej,zQ=nj,mj=rj,gj=sj,yj=oj;const vj=OQ,wj=UQ,tk=S.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(dj,{ref:r,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,g.jsx($Q,{asChild:!0,children:g.jsx(v2,{className:"h-4 w-4 opacity-50"})})]}));tk.displayName=dj.displayName;const xj=S.forwardRef(({className:n,...e},t)=>g.jsx(mj,{ref:t,className:Ee("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(m6,{className:"h-4 w-4"})}));xj.displayName=mj.displayName;const bj=S.forwardRef(({className:n,...e},t)=>g.jsx(gj,{ref:t,className:Ee("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(v2,{className:"h-4 w-4"})}));bj.displayName=gj.displayName;const nk=S.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>g.jsx(jQ,{children:g.jsxs(hj,{ref:s,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[g.jsx(xj,{}),g.jsx(VQ,{className:Ee("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(bj,{})]})}));nk.displayName=hj.displayName;const HQ=S.forwardRef(({className:n,...e},t)=>g.jsx(fj,{ref:t,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));HQ.displayName=fj.displayName;const gd=S.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(pj,{ref:r,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(zQ,{children:g.jsx(sn,{className:"h-4 w-4"})})}),g.jsx(BQ,{children:e})]}));gd.displayName=pj.displayName;const GQ=S.forwardRef(({className:n,...e},t)=>g.jsx(yj,{ref:t,className:Ee("-mx-1 my-1 h-px bg-muted",n),...e}));GQ.displayName=yj.displayName;function qQ({sessionId:n,flashcards:e,files:t=[],onFlashcardAdded:r,onFlashcardsAdded:s,onMasteryToggled:i}){var V,U;const[o,a]=S.useState(""),[l,c]=S.useState(""),[u,f]=S.useState(0),[m,y]=S.useState(!1),[w,v]=S.useState(!1),[b,x]=S.useState(!1),[C,_]=S.useState(!1),[T,A]=S.useState(null),[P,N]=S.useState(!1),{toast:I}=Ps(),[M,D]=S.useState({count:5,complexity:"medium"}),F=async()=>{if(!o.trim()||!l.trim()){I({title:"Error",description:"Both sides of the flashcard must be filled in",variant:"destructive"});return}try{const H=await Ca.addFlashcards(n,[{front:o,back:l,mastered:!1}]),Q=H[H.length-1];r(Q),a(""),c(""),v(!1),I({title:"Success",description:"New flashcard added"})}catch{I({title:"Error",description:"Failed to add flashcard",variant:"destructive"})}},$=async()=>{if(!T||!T.front.trim()||!T.back.trim()){I({title:"Error",description:"Both sides of the flashcard must be filled in",variant:"destructive"});return}try{_(!1),A(null),I({title:"Success",description:"Flashcard updated"})}catch{I({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},G=async H=>{var Q;e.map(J=>J.id===H?{...J,mastered:!J.mastered}:J);try{i(H,!((Q=e.find(J=>J.id===H))!=null&&Q.mastered)),u<e.length-1&&O()}catch{I({title:"Error",description:"Failed to update flashcard status",variant:"destructive"})}},O=()=>{y(!1),f((u+1)%e.length)},W=()=>{y(!1),f((u-1+e.length)%e.length)},j=()=>{e.length>0&&(A({...e[u]}),_(!0))},z=async()=>{x(!0);try{let H="";const Q=M.count,J=M.complexity;let re=t;if(t.length>0&&t[0].textChunks&&t[0].textChunks.length>0&&(re=t),re.length>0){const Se=re.map(se=>se.name.replace(".pdf","")).join(", ");H=`Generate ${Q} educational flashcards about ${Se}`}else if(e.length>0){const Se=e.map(se=>se.front).join(", ");H=`Generate ${Q} educational flashcards about topics similar to these: ${Se.substring(0,300)}`}else H=`Generate ${Q} educational flashcards about general study skills and learning strategies`;const ye=t.length>0?t.map(Se=>Se.content).join(`
`):H,De=(await YX(ye,M.count,M.complexity,t,n)).map(Se=>({front:Se.front,back:Se.back,mastered:!1})),Y=await Ca.addFlashcards(n,De);s&&Y.length>0?s(Y):Y.forEach(Se=>{r(Se)}),I({title:"Success",description:`${Y.length} flashcards generated`})}catch(H){console.error("Error generating flashcards:",H),I({title:"Error",description:H instanceof Error?H.message:"Failed to generate flashcards",variant:"destructive"})}finally{x(!1)}};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcards"}),g.jsx("p",{className:"text-gray-600",children:"Review and memorize key concepts with flashcards"})]}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsxs(dc,{open:P,onOpenChange:N,children:[g.jsx(Sp,{asChild:!0,children:g.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",children:[g.jsx(_S,{className:"h-4 w-4"}),"Options"]})}),g.jsxs(xa,{children:[g.jsx(ba,{children:g.jsx(_a,{children:"Generation Settings"})}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Number of flashcards to generate"}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(Z1,{value:[M.count],min:1,max:20,step:1,onValueChange:H=>D({...M,count:H[0]}),className:"flex-grow"}),g.jsx("span",{className:"w-8 text-center font-medium",children:M.count})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Complexity level"}),g.jsxs(vj,{value:M.complexity,onValueChange:H=>D({...M,complexity:H}),children:[g.jsx(tk,{children:g.jsx(wj,{placeholder:"Select complexity"})}),g.jsxs(nk,{children:[g.jsx(gd,{value:"simple",children:"Simple"}),g.jsx(gd,{value:"medium",children:"Medium"}),g.jsx(gd,{value:"advanced",children:"Advanced"})]})]})]})]}),g.jsx($h,{children:g.jsx(ue,{onClick:()=>N(!1),children:"Save Settings"})})]})]}),g.jsxs(ue,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:z,disabled:b,children:[b?g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):g.jsx(tx,{className:"h-4 w-4"}),"Generate with AI"]}),g.jsxs(dc,{open:w,onOpenChange:v,children:[g.jsx(Sp,{asChild:!0,children:g.jsxs(ue,{className:"gradient-bg",children:[g.jsx(XR,{className:"mr-2 h-4 w-4"}),"Add Flashcard"]})}),g.jsxs(xa,{children:[g.jsx(ba,{children:g.jsx(_a,{children:"Create New Flashcard"})}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"front",children:"Front"}),g.jsx(Jc,{id:"front",placeholder:"Question or term",rows:3,value:o,onChange:H=>a(H.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"back",children:"Back"}),g.jsx(Jc,{id:"back",placeholder:"Answer or definition",rows:5,value:l,onChange:H=>c(H.target.value)})]})]}),g.jsxs($h,{children:[g.jsx(ue,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),g.jsx(ue,{className:"gradient-bg",onClick:F,children:"Create Flashcard"})]})]})]})]})]}),e.length>0?g.jsxs("div",{children:[g.jsxs("div",{className:"bg-gray-100 py-4 px-6 rounded-lg mb-6 flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-gray-600",children:[g.jsx("span",{className:"font-medium",children:u+1})," of ",e.length," flashcards"]}),g.jsxs("div",{className:"text-sm",children:[g.jsx("span",{className:"text-green-600 font-medium",children:e.filter(H=>H.mastered).length})," mastered"]})]}),g.jsx("div",{className:"flex justify-center mb-8",children:g.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>y(!m),children:g.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${m?"rotate-y-180":""}`,children:[g.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:g.jsx("span",{className:"text-purple-600 font-semibold",children:u+1})}),g.jsx("p",{className:"text-center text-xl font-medium",children:(V=e[u])==null?void 0:V.front}),g.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),g.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[g.jsx("p",{className:"text-center text-lg",children:(U=e[u])==null?void 0:U.back}),g.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx(ue,{variant:"outline",onClick:W,disabled:e.length<=1,children:"Previous"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs(ue,{variant:"outline",className:"border-blue-300 text-blue-600 hover:bg-blue-50",onClick:j,children:[g.jsx(S6,{className:"mr-2 h-4 w-4"}),"Edit"]}),g.jsxs(ue,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>G(e[u].id),disabled:e[u].mastered,children:[g.jsx(bv,{className:"mr-2 h-4 w-4"}),"Still Learning"]}),g.jsxs(ue,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50",onClick:()=>G(e[u].id),disabled:e[u].mastered,children:[g.jsx(sn,{className:"mr-2 h-4 w-4"}),"Mastered"]})]}),g.jsx(ue,{variant:"outline",onClick:O,disabled:e.length<=1,children:"Next"})]})]}):g.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[g.jsx(y2,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards yet"}),g.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create your first flashcard or let AI generate some for you"}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsxs(ue,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50",onClick:z,disabled:b,children:[b?g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500 mr-2"}):g.jsx(tx,{className:"mr-2 h-4 w-4"}),"Generate with AI"]}),g.jsxs(ue,{className:"gradient-bg",onClick:()=>v(!0),children:[g.jsx(XR,{className:"mr-2 h-4 w-4"}),"Add Manually"]})]})]}),g.jsx(dc,{open:C,onOpenChange:_,children:g.jsxs(xa,{children:[g.jsx(ba,{children:g.jsx(_a,{children:"Edit Flashcard"})}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"edit-front",children:"Front"}),g.jsx(Jc,{id:"edit-front",placeholder:"Question or term",rows:3,value:(T==null?void 0:T.front)||"",onChange:H=>A(Q=>Q?{...Q,front:H.target.value}:null)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{htmlFor:"edit-back",children:"Back"}),g.jsx(Jc,{id:"edit-back",placeholder:"Answer or definition",rows:5,value:(T==null?void 0:T.back)||"",onChange:H=>A(Q=>Q?{...Q,back:H.target.value}:null)})]})]}),g.jsxs($h,{children:[g.jsx(ue,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),g.jsx(ue,{className:"gradient-bg",onClick:$,children:"Update Flashcard"})]})]})}),g.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}var n_="Checkbox",[WQ,ade]=hr(n_),[KQ,rk]=WQ(n_);function YQ(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:f}=n,[m,y]=uo({prop:t,defaultProp:s??!1,onChange:l,caller:n_}),[w,v]=S.useState(null),[b,x]=S.useState(null),C=S.useRef(!1),_=w?!!o||!!w.closest("form"):!0,T={checked:m,disabled:i,setChecked:y,control:w,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:C,required:c,defaultChecked:hc(s)?!1:s,isFormControl:_,bubbleInput:b,setBubbleInput:x};return g.jsx(KQ,{scope:e,...T,children:JQ(f)?f(T):r})}var _j="CheckboxTrigger",Cj=S.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:y,bubbleInput:w}=rk(_j,n),v=Ue(s,u),b=S.useRef(l);return S.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const C=()=>f(b.current);return x.addEventListener("reset",C),()=>x.removeEventListener("reset",C)}},[i,f]),g.jsx(we.button,{type:"button",role:"checkbox","aria-checked":hc(l)?"mixed":l,"aria-required":c,"data-state":kj(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:v,onKeyDown:te(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:te(t,x=>{f(C=>hc(C)?!0:!C),w&&y&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});Cj.displayName=_j;var sk=S.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...f}=n;return g.jsx(YQ,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>g.jsxs(g.Fragment,{children:[g.jsx(Cj,{...f,ref:e,__scopeCheckbox:t}),m&&g.jsx(Aj,{__scopeCheckbox:t})]})})});sk.displayName=n_;var Sj="CheckboxIndicator",Ej=S.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=rk(Sj,t);return g.jsx(ls,{present:r||hc(i.checked)||i.checked===!0,children:g.jsx(we.span,{"data-state":kj(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});Ej.displayName=Sj;var Tj="CheckboxBubbleInput",Aj=S.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:f,bubbleInput:m,setBubbleInput:y}=rk(Tj,n),w=Ue(t,y),v=Xb(i),b=Ab(r);S.useEffect(()=>{const C=m;if(!C)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"checked").set,P=!s.current;if(v!==i&&A){const N=new Event("click",{bubbles:P});C.indeterminate=hc(i),A.call(C,hc(i)?!1:i),C.dispatchEvent(N)}},[m,v,i,s]);const x=S.useRef(hc(i)?!1:i);return g.jsx(we.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:f,...e,tabIndex:-1,ref:w,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Aj.displayName=Tj;function JQ(n){return typeof n=="function"}function hc(n){return n==="indeterminate"}function kj(n){return hc(n)?"indeterminate":n?"checked":"unchecked"}const _m=S.forwardRef(({className:n,...e},t)=>g.jsx(sk,{ref:t,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:g.jsx(Ej,{className:Ee("flex items-center justify-center text-current"),children:g.jsx(sn,{className:"h-4 w-4"})})}));_m.displayName=sk.displayName;function XQ(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var QQ=["color"],ZQ=S.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=XQ(n,QQ);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),S.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ik="Radio",[eZ,Rj]=hr(ik),[tZ,nZ]=eZ(ik),Pj=S.forwardRef((n,e)=>{const{__scopeRadio:t,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:l,form:c,...u}=n,[f,m]=S.useState(null),y=Ue(e,b=>m(b)),w=S.useRef(!1),v=f?c||!!f.closest("form"):!0;return g.jsxs(tZ,{scope:t,checked:s,disabled:o,children:[g.jsx(we.button,{type:"button",role:"radio","aria-checked":s,"data-state":Dj(s),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:y,onClick:te(n.onClick,b=>{s||l==null||l(),v&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),v&&g.jsx(Mj,{control:f,bubbles:!w.current,name:r,value:a,checked:s,required:i,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});Pj.displayName=ik;var Nj="RadioIndicator",Ij=S.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:r,...s}=n,i=nZ(Nj,t);return g.jsx(ls,{present:r||i.checked,children:g.jsx(we.span,{"data-state":Dj(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});Ij.displayName=Nj;var rZ="RadioBubbleInput",Mj=S.forwardRef(({__scopeRadio:n,control:e,checked:t,bubbles:r=!0,...s},i)=>{const o=S.useRef(null),a=Ue(o,i),l=Xb(t),c=Ab(e);return S.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==t&&y){const w=new Event("click",{bubbles:r});y.call(u,t),u.dispatchEvent(w)}},[l,t,r]),g.jsx(we.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Mj.displayName=rZ;function Dj(n){return n?"checked":"unchecked"}var sZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],r_="RadioGroup",[iZ,lde]=hr(r_,[jp,Rj]),Lj=jp(),Fj=Rj(),[oZ,aZ]=iZ(r_),Oj=S.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...m}=n,y=Lj(t),w=$p(c),[v,b]=uo({prop:i,defaultProp:s??null,onChange:f,caller:r_});return g.jsx(oZ,{scope:t,name:r,required:o,disabled:a,value:v,onValueChange:b,children:g.jsx(V1,{asChild:!0,...y,orientation:l,dir:w,loop:u,children:g.jsx(we.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:w,...m,ref:e})})})});Oj.displayName=r_;var Uj="RadioGroupItem",$j=S.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:r,...s}=n,i=aZ(Uj,t),o=i.disabled||r,a=Lj(t),l=Fj(t),c=S.useRef(null),u=Ue(e,c),f=i.value===s.value,m=S.useRef(!1);return S.useEffect(()=>{const y=v=>{sZ.includes(v.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",w)}},[]),g.jsx(B1,{asChild:!0,...a,focusable:!o,active:f,children:g.jsx(Pj,{disabled:o,required:i.required,checked:f,...l,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:te(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:te(s.onFocus,()=>{var y;m.current&&((y=c.current)==null||y.click())})})})});$j.displayName=Uj;var lZ="RadioGroupIndicator",jj=S.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...r}=n,s=Fj(t);return g.jsx(Ij,{...s,...r,ref:e})});jj.displayName=lZ;var Vj=Oj,Bj=$j,cZ=jj;const sg=S.forwardRef(({className:n,...e},t)=>g.jsx(Vj,{className:Ee("grid gap-2",n),...e,ref:t}));sg.displayName=Vj.displayName;const js=S.forwardRef(({className:n,...e},t)=>g.jsx(Bj,{ref:t,className:Ee("aspect-square h-5 w-5 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:g.jsx(cZ,{className:"flex items-center justify-center",children:g.jsx(ZQ,{className:"h-3.5 w-3.5 fill-primary"})})}));js.displayName=Bj.displayName;function uZ({sessionId:n,quizzes:e,onQuizAdded:t}){const[r,s]=S.useState(null),[i,o]=S.useState(0),[a,l]=S.useState(null),[c,u]=S.useState(!1),[f,m]=S.useState(0),[y,w]=S.useState(!1),[v,b]=S.useState(!1),[x,C]=S.useState(!1),[_,T]=S.useState(!1),[A,P]=S.useState({questionCount:5,difficulty:"medium",topic:"",showExplanations:!0,questionTypes:["multiple-choice"]}),{toast:N}=Ps(),I=O=>{s(O),o(0),l(null),u(!1),m(0),w(!1)},M=O=>{c||l(O)},D=()=>{a===null||!r||(u(!0),a===r.questions[i].correctAnswer&&m(f+1))},F=()=>{r&&(i<r.questions.length-1?(o(i+1),l(null),u(!1)):w(!0))},$=()=>{!r||i===0||(o(i-1),l(null),u(!1))},G=async()=>{C(!0);try{const{session:O}=await Ca.getSession(n),{files:W}=await Ca.getFiles(n);if(!O||!W||W.length===0){N({title:"No study materials",description:"Please upload PDF files first to generate quiz questions from your content",variant:"destructive"}),C(!1);return}const j=W.map(J=>J.name.replace(".pdf","")).join(", "),z=A.topic.trim()?A.topic:j;let V=`Generate a quiz about ${z} with ${A.questionCount} questions`;switch(A.difficulty){case"easy":V+=" at a beginner level";break;case"medium":V+=" at an intermediate level";break;case"hard":V+=" at an advanced level with challenging questions";break}A.showExplanations&&(V+=" with detailed explanations for each correct answer");const U=await JX(V,A.questionCount,A.difficulty,z,A.showExplanations,A.questionTypes,W,n),H=U.questions.slice(0,A.questionCount),Q={id:`quiz_${Date.now()}`,title:U.title,questions:H.map((J,re)=>({id:`q_${Date.now()}_${re}`,...J}))};t(Q),N({title:"Success",description:"New quiz generated successfully"})}catch(O){console.error("Error generating quiz:",O),N({title:"Error",description:"Failed to generate quiz",variant:"destructive"})}finally{C(!1)}};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Quizzes"}),g.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes"})]}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsxs(dc,{open:_,onOpenChange:T,children:[g.jsx(Sp,{asChild:!0,children:g.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",children:[g.jsx(_S,{className:"h-4 w-4"}),"Quiz Options"]})}),g.jsxs(xa,{children:[g.jsx(ba,{children:g.jsx(_a,{children:"Quiz Generation Settings"})}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Number of questions"}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(Z1,{value:[A.questionCount],min:3,max:15,step:1,onValueChange:O=>P({...A,questionCount:O[0]}),className:"flex-grow"}),g.jsx("span",{className:"w-8 text-center font-medium",children:A.questionCount})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Difficulty level"}),g.jsxs(vj,{value:A.difficulty,onValueChange:O=>P({...A,difficulty:O}),children:[g.jsx(tk,{children:g.jsx(wj,{placeholder:"Select difficulty"})}),g.jsxs(nk,{children:[g.jsx(gd,{value:"easy",children:"Easy"}),g.jsx(gd,{value:"medium",children:"Medium"}),g.jsx(gd,{value:"hard",children:"Hard"})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Specific Topic (optional)"}),g.jsx(_s,{id:"topic",placeholder:"Leave blank to generate from uploaded files",value:A.topic,onChange:O=>P({...A,topic:O.target.value})}),g.jsx("p",{className:"text-xs text-gray-500",children:"If left blank, quiz will be generated based on your study materials"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Je,{children:"Question Types"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_m,{id:"multiple-choice",checked:A.questionTypes.includes("multiple-choice"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"multiple-choice"]:A.questionTypes.filter(j=>j!=="multiple-choice");P({...A,questionTypes:W.length>0?W:["multiple-choice"]})}}),g.jsx(Je,{htmlFor:"multiple-choice",children:"Multiple Choice"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_m,{id:"true-false",checked:A.questionTypes.includes("true-false"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"true-false"]:A.questionTypes.filter(j=>j!=="true-false");P({...A,questionTypes:W})}}),g.jsx(Je,{htmlFor:"true-false",children:"True/False"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_m,{id:"short-answer",checked:A.questionTypes.includes("short-answer"),onCheckedChange:O=>{const W=O?[...A.questionTypes,"short-answer"]:A.questionTypes.filter(j=>j!=="short-answer");P({...A,questionTypes:W})}}),g.jsx(Je,{htmlFor:"short-answer",children:"Short Answer"})]})]}),g.jsx("p",{className:"text-xs text-gray-500",children:"Select the types of questions you want in your quiz"})]}),g.jsxs("div",{className:"flex items-start space-x-2",children:[g.jsx(_m,{id:"explanations",checked:A.showExplanations,onCheckedChange:O=>P({...A,showExplanations:O===!0})}),g.jsxs("div",{className:"grid gap-1.5 leading-none",children:[g.jsx(Je,{htmlFor:"explanations",children:"Include answer explanations"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Show detailed explanations after answering each question"})]})]})]}),g.jsx($h,{children:g.jsx(ue,{onClick:()=>T(!1),children:"Save Settings"})})]})]}),g.jsxs(ue,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:G,disabled:x,children:[x?g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):g.jsx(tx,{className:"h-4 w-4"}),"Generate with AI"]})]})]}),r?y?g.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[g.jsx("div",{className:"w-16 h-16 rounded-full gradient-bg mx-auto flex items-center justify-center mb-4",children:g.jsx(sn,{className:"h-8 w-8 text-white"})}),g.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Completed!"}),g.jsxs("p",{className:"text-gray-600 mb-2",children:["Your score: ",f," out of ",r.questions.length]}),g.jsxs("p",{className:"text-gray-600 mb-6",children:[Math.round(f/r.questions.length*100),"% correct"]}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx(ue,{variant:"outline",onClick:()=>I(r),children:"Retry Quiz"}),g.jsx(ue,{className:"gradient-bg",onClick:()=>s(null),children:"Back to Quizzes"})]})]}):g.jsxs("div",{className:"bg-white rounded-lg border",children:[g.jsxs("div",{className:"border-b p-6",children:[g.jsx("h3",{className:"text-xl font-semibold",children:r.title}),g.jsxs("div",{className:"flex justify-between items-center mt-2",children:[g.jsxs("span",{className:"text-gray-600",children:["Question ",i+1," of ",r.questions.length]}),g.jsx(ue,{variant:"ghost",onClick:()=>s(null),children:"Exit Quiz"})]})]}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h4",{className:"text-lg font-medium mb-4",children:r.questions[i].text}),g.jsx(sg,{value:a==null?void 0:a.toString(),onValueChange:O=>M(parseInt(O)),className:"space-y-3",disabled:c,children:r.questions[i].options.map((O,W)=>{const j=W===r.questions[i].correctAnswer,z=a===W,V=c&&z&&!j,U=c&&j;let H="flex items-center space-x-3 p-4 rounded-md border ";return c?U?H+="border-green-500 bg-green-50":V?H+="border-red-500 bg-red-50":H+="border-gray-200":z?H+="border-purple-500 bg-purple-50":H+="border-gray-200 hover:border-gray-300",g.jsxs("div",{className:H,children:[g.jsx(js,{value:W.toString(),id:`option-${W}`}),g.jsx(Je,{htmlFor:`option-${W}`,className:"flex-grow cursor-pointer",children:O}),c&&j&&g.jsx(sn,{className:"h-5 w-5 text-green-600"}),c&&V&&g.jsx(bv,{className:"h-5 w-5 text-red-600"})]},W)})})]}),c&&g.jsxs("div",{className:`p-4 rounded-md ${a===r.questions[i].correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} mb-6`,children:[g.jsx("p",{className:`font-medium mb-1 ${a===r.questions[i].correctAnswer?"text-green-600":"text-red-600"}`,children:a===r.questions[i].correctAnswer?"Correct!":"Incorrect"}),g.jsx("p",{className:"text-gray-700",children:r.questions[i].explanation||"No explanation available."})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx(ue,{variant:"outline",disabled:i===0||!c,onClick:$,children:"Previous"}),c?g.jsx(ue,{className:"gradient-bg",onClick:F,children:i<r.questions.length-1?"Next Question":"Finish Quiz"}):g.jsx(ue,{className:"gradient-bg",onClick:D,disabled:a===null,children:"Check Answer"})]})]})]}):g.jsx("div",{children:e.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(O=>g.jsxs(ci,{className:"card-hover",children:[g.jsx(Zi,{children:g.jsx(da,{children:O.title})}),g.jsx(eo,{children:g.jsxs("p",{className:"text-sm text-gray-500",children:[O.questions.length," questions"]})}),g.jsx(Sx,{children:g.jsx(ue,{className:"gradient-bg w-full",onClick:()=>I(O),children:"Start Quiz"})})]},O.id))}):g.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[g.jsx("svg",{className:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes yet"}),g.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate a quiz with AI based on your study materials"}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[g.jsxs(ue,{variant:"outline",onClick:()=>T(!0),children:[g.jsx(_S,{className:"mr-2 h-4 w-4"}),"Quiz Options"]}),g.jsxs(ue,{className:"gradient-bg",onClick:G,disabled:x,children:[x?g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white mr-2"}):g.jsx(tx,{className:"mr-2 h-4 w-4"}),"Generate Quiz with AI"]})]})]})})]})}function dZ({sessionId:n,files:e,onFileUploaded:t}){const[r,s]=S.useState([]),[i,o]=S.useState(""),[a,l]=S.useState(!1),[c,u]=S.useState(!1),f=S.useRef(null),m=S.useRef(null),{toast:y}=Ps(),{user:w}=xi();S.useEffect(()=>{(async()=>{l(!0);try{s([])}catch{y({title:"Error",description:"Failed to load chat messages",variant:"destructive"})}finally{l(!1)}})()},[n,y]),S.useEffect(()=>{v()},[r]);const v=()=>{var _;(_=f.current)==null||_.scrollIntoView({behavior:"smooth"})},b=async()=>{if(!i.trim())return;const _=i;o("");try{const T={id:Date.now().toString(),role:"user",content:_,timestamp:new Date().toISOString()};s(A=>[...A,T]),u(!0);try{const A=await dE(_,"medium",e,n),P={id:(Date.now()+1).toString(),role:"assistant",content:A,timestamp:new Date().toISOString()};s(N=>[...N,P])}catch(A){console.error("Error generating response:",A);const P={id:(Date.now()+2).toString(),role:"assistant",content:"I'm sorry, I encountered an error processing your request. Please try again.",timestamp:new Date().toISOString()};s(N=>[...N,P]),y({title:"Error",description:"Failed to generate a response",variant:"destructive"})}}catch{y({title:"Error",description:"Failed to send message",variant:"destructive"})}finally{u(!1)}},x=async _=>{if(!_.target.files||_.target.files.length===0)return;const T=Array.from(_.target.files),A=[];try{for(const P of T){if(P.type!=="application/pdf"){y({title:"Error",description:"Only PDF files are supported",variant:"destructive"});continue}const N=await P.arrayBuffer(),I=btoa(new Uint8Array(N).reduce((F,$)=>F+String.fromCharCode($),"")),D={...{name:P.name,url:URL.createObjectURL(P),type:P.type,uploadedAt:new Date().toISOString(),content:I},id:Date.now().toString()};t(D),A.push(P.name)}if(A.length>0){const P=A.length===1?`I've uploaded a file: ${A[0]}`:`I've uploaded ${A.length} files: ${A.join(", ")}`,N={id:(Date.now()+3).toString(),role:"user",content:P,timestamp:new Date().toISOString()};s(I=>[...I,N]),u(!0);try{const I=await dE(`I've uploaded ${A.length>1?"some files":"a file"} to this session.`,"medium",e,n),M={id:(Date.now()+4).toString(),role:"assistant",content:I,timestamp:new Date().toISOString()};s(D=>[...D,M])}catch(I){console.error("Error generating response about files:",I);const M={id:(Date.now()+5).toString(),role:"assistant",content:"I've received your files and am processing them in the background. You can ask me questions about them shortly.",timestamp:new Date().toISOString()};s(D=>[...D,M])}y({title:"Files uploaded",description:`${A.length} file(s) have been uploaded and are being processed`})}}catch{y({title:"Error",description:"Failed to upload file(s)",variant:"destructive"})}finally{u(!1),m.current&&(m.current.value="")}},C=_=>new Date(_).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-2xl font-semibold",children:"Chat Assistant"}),e.length>0&&g.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[g.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),g.jsxs("span",{children:[e.length," file",e.length>1?"s":""," available"]})]})]}),g.jsxs(ue,{variant:"outline",onClick:()=>{var _;return(_=m.current)==null?void 0:_.click()},className:"flex items-center gap-2",children:[g.jsx(x2,{className:"h-4 w-4"}),"Upload PDF"]})]}),g.jsx("input",{type:"file",ref:m,className:"hidden",accept:".pdf",multiple:!0,onChange:x}),g.jsx(ci,{className:"border mb-4",children:g.jsxs("div",{className:"h-[500px] flex flex-col",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a?g.jsx("div",{className:"flex justify-center items-center h-full",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-purple-500"})}):r.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[g.jsx(WA,{className:"h-12 w-12 text-purple-300 mb-2"}),g.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Your AI Study Assistant"}),g.jsx("p",{className:"text-gray-500 mt-2 max-w-sm",children:"Ask questions about your study materials or upload PDFs to get help with your studies."})]}):r.map(_=>g.jsx("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start"}`,children:g.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${_.role==="user"?"bg-purple-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:[g.jsx("p",{className:"whitespace-pre-wrap",children:_.content}),g.jsx("p",{className:`text-xs mt-1 ${_.role==="user"?"text-purple-200":"text-gray-500"}`,children:C(_.timestamp)})]})},_.id)),c&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-[80%]",children:g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse"}),g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"0.2s"}}),g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"0.4s"}})]})})}),g.jsx("div",{ref:f})]}),g.jsx("div",{className:"border-t p-4",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx(_s,{placeholder:"Ask a question about your study materials...",value:i,onChange:_=>o(_.target.value),onKeyPress:_=>{_.key==="Enter"&&!_.shiftKey&&!c&&(_.preventDefault(),b())},disabled:c}),g.jsx(ue,{className:"gradient-bg",onClick:b,disabled:!i.trim()||c,children:g.jsx(C6,{className:"h-4 w-4"})})]})})]})}),g.jsx("div",{className:"text-sm text-gray-500 text-center",children:g.jsx("p",{children:"The AI can help you understand concepts, generate study materials, and answer questions about your uploaded PDFs."})}),g.jsx(a$,{isOpen:!1,onClose:()=>{},action:"chat",currentUsage:0,limit:0})]})}const er=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),xE=[.001,0,0,.001,0,0],gC=1.35,Kr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},il={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},zj="pdfjs_internal_editor_",Ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},hZ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},On={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},J0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},oh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},s_={ERRORS:0,WARNINGS:1,INFOS:5},Ax={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},x0={moveTo:0,lineTo:1,curveTo:2,closePath:3},fZ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let i_=s_.WARNINGS;function pZ(n){Number.isInteger(n)&&(i_=n)}function mZ(){return i_}function o_(n){i_>=s_.INFOS&&console.log(`Info: ${n}`)}function Ie(n){i_>=s_.WARNINGS&&console.log(`Warning: ${n}`)}function ft(n){throw new Error(n)}function Xt(n,e){n||ft(e)}function gZ(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Hj(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=bZ(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return gZ(r)?r:null}function Gj(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&Hj(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function qe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const zd=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class PN extends zd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class yC extends zd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class bE extends zd{constructor(e){super(e,"InvalidPDFException")}}class kx extends zd{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class yZ extends zd{constructor(e){super(e,"FormatError")}}class vc extends zd{constructor(e){super(e,"AbortException")}}function qj(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ft("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Iv(n){typeof n!="string"&&ft("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function vZ(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function wZ(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function xZ(){try{return new Function(""),!0}catch{return!1}}class In{static get isLittleEndian(){return qe(this,"isLittleEndian",wZ())}static get isEvalSupported(){return qe(this,"isEvalSupported",xZ())}static get isOffscreenCanvasSupported(){return qe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return qe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return qe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return qe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const vC=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ea,X0,_E;class Ce{static makeHexColor(e,t,r){return`#${vC[e]}${vC[t]}${vC[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const f=e[r+u],m=e[r+u+1];e[r+u]=f*s+m*o+l,e[r+u+1]=f*i+m*a+c}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],f=e[1],m=e[2],y=e[3];let w=s*u+l,v=w,b=s*m+l,x=b,C=a*f+c,_=C,T=a*y+c,A=T;if(i!==0||o!==0){const P=i*u,N=i*m,I=o*f,M=o*y;w+=I,x+=I,b+=M,v+=M,C+=P,A+=P,T+=N,_+=N}r[0]=Math.min(r[0],w,b,v,x),r[1]=Math.min(r[1],C,T,_,A),r[2]=Math.max(r[2],w,b,v,x),r[3]=Math.max(r[3],C,T,_,A)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],a=r**2+s**2,l=r*i+s*o,c=i**2+o**2,u=(a+c)/2,f=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+f||1),t[1]=Math.sqrt(u-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),R(this,Ea,_E).call(this,e,r,i,a,t,s,o,l,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),c),R(this,Ea,_E).call(this,e,r,i,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c)}}Ea=new WeakSet,X0=function(e,t,r,s,i,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,m=c*c,y=m*c,w=f*(f*(f*e+3*c*t)+3*m*r)+y*s,v=f*(f*(f*i+3*c*o)+3*m*a)+y*l;u[0]=Math.min(u[0],w),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],w),u[3]=Math.max(u[3],v)},_E=function(e,t,r,s,i,o,a,l,c,u,f,m){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&R(this,Ea,X0).call(this,e,t,r,s,i,o,a,l,-f/u,m);return}const y=u**2-4*f*c;if(y<0)return;const w=Math.sqrt(y),v=2*c;R(this,Ea,X0).call(this,e,t,r,s,i,o,a,l,(-u+w)/v,m),R(this,Ea,X0).call(this,e,t,r,s,i,o,a,l,(-u-w)/v,m)},k(Ce,Ea);function bZ(n){return decodeURIComponent(escape(n))}let wC=null,NN=null;function _Z(n){return wC||(wC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NN=new Map([["","t"]])),n.replaceAll(wC,(e,t,r)=>t?t.normalize("NFKC"):NN.get(r))}function Wj(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),qj(n)}const ok="pdfjs_internal_id_";function CZ(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const o=i.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function tr(n,e,t){return Math.min(Math.max(n,e),t)}function Kj(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(qj(n))}function SZ(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Iv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Eo="http://www.w3.org/2000/svg",jc=class jc{};Z(jc,"CSS",96),Z(jc,"PDF",72),Z(jc,"PDF_TO_CSS_UNITS",jc.CSS/jc.PDF);let wc=jc;async function Mv(n,e="text"){if(Cm(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Dv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=o,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,f,m,y;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,f=0,m=0,y=1;break;case 90:u=0,f=1,m=1,y=0;break;case 270:u=0,f=-1,m=-1,y=0;break;case 0:u=1,f=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,y=-y);let w,v,b,x;u===0?(w=Math.abs(c-e[1])*r+i,v=Math.abs(l-e[0])*r+o,b=(e[3]-e[1])*r,x=(e[2]-e[0])*r):(w=Math.abs(l-e[0])*r+i,v=Math.abs(c-e[1])*r+o,b=(e[2]-e[0])*r,x=(e[3]-e[1])*r),this.transform=[u*r,f*r,m*r,y*r,w-u*r*l-m*r*c,v-f*r*l-y*r*c],this.width=b,this.height=x}get rawDims(){const e=this.viewBox;return qe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Dv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return Ce.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Ce.applyTransform(t,this.transform);const r=[e[2],e[3]];return Ce.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Ce.applyInverseTransform(r,this.transform),r}}class ak extends zd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function a_(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function lk(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function EZ(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function TZ(n,e="document.pdf"){if(typeof n!="string")return e;if(a_(n))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return s(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const c of a)if(i.test(c))return s(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(i.test(c))return s(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return s(l[0])}return e}class IN{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Cm(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function yi(n){n.preventDefault()}function Yt(n){n.preventDefault(),n.stopPropagation()}function AZ(n){console.log("Deprecated API usage: "+n)}var $g;class ck{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,$g)||E(this,$g,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,$g).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(r,s,i,o,a,l))}}$g=new WeakMap,k(ck,$g);function kZ(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Dv({viewBox:i,userUnit:1,scale:e,rotation:t})}function uk(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${n}"`),[0,0,0])}function RZ(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,uk(r))}e.remove()}function Mt(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function Ai(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function Id(n,e,t=!1,r=!0){if(e instanceof Dv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=In.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,c=`var(--total-scale-factor) * ${i}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}class po{constructor(){const{pixelRatio:e}=po;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let o=1/0,a=1/0,l=1/0;r=po.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*t))),s!==-1&&(a=s/e,l=s/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const CE=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var gl,ou,ds,yl,jg,nf,Vg,$x,Yj,ir,Jj,Xj,Sm,Q0;const Po=class Po{constructor(e){k(this,ir);k(this,gl,null);k(this,ou,null);k(this,ds);k(this,yl,null);k(this,jg,null);k(this,nf,null);E(this,ds,e),d(Po,Vg)||E(Po,Vg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,gl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,ds)._uiManager._signal;e.addEventListener("contextmenu",yi,{signal:t}),e.addEventListener("pointerdown",R(Po,$x,Yj),{signal:t});const r=E(this,yl,document.createElement("div"));r.className="buttons",e.append(r);const s=d(this,ds).toolbarPosition;if(s){const{style:i}=e,o=d(this,ds)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,gl)}hide(){var e;d(this,gl).classList.add("hidden"),(e=d(this,ou))==null||e.hideDropdown()}show(){var e;d(this,gl).classList.remove("hidden"),(e=d(this,jg))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,ds),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",d(Po,Vg)[e]),R(this,ir,Sm).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),d(this,yl).append(r)}async addAltText(e){const t=await e.render();R(this,ir,Sm).call(this,t),d(this,yl).append(t,d(this,ir,Q0)),E(this,jg,e)}addColorPicker(e){E(this,ou,e);const t=e.renderButton();R(this,ir,Sm).call(this,t),d(this,yl).append(t,d(this,ir,Q0))}async addEditSignatureButton(e){const t=E(this,nf,await e.renderEditButton(d(this,ds)));R(this,ir,Sm).call(this,t),d(this,yl).append(t,d(this,ir,Q0))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){d(this,nf)&&(d(this,nf).title=e)}remove(){var e;d(this,gl).remove(),(e=d(this,ou))==null||e.destroy(),E(this,ou,null)}};gl=new WeakMap,ou=new WeakMap,ds=new WeakMap,yl=new WeakMap,jg=new WeakMap,nf=new WeakMap,Vg=new WeakMap,$x=new WeakSet,Yj=function(e){e.stopPropagation()},ir=new WeakSet,Jj=function(e){d(this,ds)._focusEventsAllowed=!1,Yt(e)},Xj=function(e){d(this,ds)._focusEventsAllowed=!0,Yt(e)},Sm=function(e){const t=d(this,ds)._uiManager._signal;e.addEventListener("focusin",R(this,ir,Jj).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,ir,Xj).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",yi,{signal:t})},Q0=function(){const e=document.createElement("div");return e.className="divider",e},k(Po,$x),k(Po,Vg,null);let SE=Po;var Bg,au,lu,xc,Qj,Zj,eV;class PZ{constructor(e){k(this,xc);k(this,Bg,null);k(this,au,null);k(this,lu);E(this,lu,e)}show(e,t,r){const[s,i]=R(this,xc,Zj).call(this,t,r),{style:o}=d(this,au)||E(this,au,R(this,xc,Qj).call(this));e.append(d(this,au)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,au).remove()}}Bg=new WeakMap,au=new WeakMap,lu=new WeakMap,xc=new WeakSet,Qj=function(){const e=E(this,au,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",yi,{signal:d(this,lu)._signal});const t=E(this,Bg,document.createElement("div"));return t.className="buttons",e.append(t),R(this,xc,eV).call(this),e},Zj=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},eV=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=d(this,lu)._signal;e.addEventListener("contextmenu",yi,{signal:r}),e.addEventListener("click",()=>{d(this,lu).highlightSelection("floating_button")},{signal:r}),d(this,Bg).append(e)};function tV(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var jx;class NZ{constructor(){k(this,jx,0)}get id(){return`${zj}${un(this,jx)._++}`}}jx=new WeakMap;var rf,zg,Vn,sf,Z0;const Tk=class Tk{constructor(){k(this,sf);k(this,rf,Wj());k(this,zg,0);k(this,Vn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return qe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return R(this,sf,Z0).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return R(this,sf,Z0).call(this,e,e)}async getFromBlob(e,t){const r=await t;return R(this,sf,Z0).call(this,e,r)}async getFromId(e){d(this,Vn)||E(this,Vn,new Map);const t=d(this,Vn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Vn)||E(this,Vn,new Map);let r=d(this,Vn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${d(this,rf)}_${un(this,zg)._++}`,refCounter:1,isSvg:!1},d(this,Vn).set(e,r),d(this,Vn).set(r.id,r),r}getSvgUrl(e){const t=d(this,Vn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;d(this,Vn)||E(this,Vn,new Map);const t=d(this,Vn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,rf)}_`)}};rf=new WeakMap,zg=new WeakMap,Vn=new WeakMap,sf=new WeakSet,Z0=async function(e,t){d(this,Vn)||E(this,Vn,new Map);let r=d(this,Vn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${d(this,rf)}_${un(this,zg)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Mv(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=Tk._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const f=r.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){Ie(s),r=null}return d(this,Vn).set(e,r),r&&d(this,Vn).set(r.id,r),r};let EE=Tk;var jt,vl,Hg,It;class IZ{constructor(e=128){k(this,jt,[]);k(this,vl,!1);k(this,Hg);k(this,It,-1);E(this,Hg,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),d(this,vl))return;const l={cmd:e,undo:t,post:r,type:i};if(d(this,It)===-1){d(this,jt).length>0&&(d(this,jt).length=0),E(this,It,0),d(this,jt).push(l);return}if(o&&d(this,jt)[d(this,It)].type===i){a&&(l.undo=d(this,jt)[d(this,It)].undo),d(this,jt)[d(this,It)]=l;return}const c=d(this,It)+1;c===d(this,Hg)?d(this,jt).splice(0,1):(E(this,It,c),c<d(this,jt).length&&d(this,jt).splice(c)),d(this,jt).push(l)}undo(){if(d(this,It)===-1)return;E(this,vl,!0);const{undo:e,post:t}=d(this,jt)[d(this,It)];e(),t==null||t(),E(this,vl,!1),E(this,It,d(this,It)-1)}redo(){if(d(this,It)<d(this,jt).length-1){E(this,It,d(this,It)+1),E(this,vl,!0);const{cmd:e,post:t}=d(this,jt)[d(this,It)];e(),t==null||t(),E(this,vl,!1)}}hasSomethingToUndo(){return d(this,It)!==-1}hasSomethingToRedo(){return d(this,It)<d(this,jt).length-1}cleanType(e){if(d(this,It)!==-1){for(let t=d(this,It);t>=0;t--)if(d(this,jt)[t].type!==e){d(this,jt).splice(t+1,d(this,It)-t),E(this,It,t);return}d(this,jt).length=0,E(this,It,-1)}}destroy(){E(this,jt,null)}}jt=new WeakMap,vl=new WeakMap,Hg=new WeakMap,It=new WeakMap;var Vx,nV;class Lv{constructor(e){k(this,Vx);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=In.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(R(this,Vx,nV).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||Yt(t))}}Vx=new WeakSet,nV=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Bx=class Bx{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return RZ(e),qe(this,"_colors",e)}convert(e){const t=uk(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return Bx._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ce.makeHexColor(...t):e}};Z(Bx,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let TE=Bx;var of,Dr,nn,Cn,af,Lo,lf,hs,wl,xl,cf,cu,Di,Gs,uu,Gg,qg,uf,Wg,Li,bl,df,_l,Fi,zx,Cl,Kg,Sl,du,hu,El,Yg,dn,ot,Fo,Tl,fu,Jg,Xg,Al,Oi,Oo,Qg,Zg,fs,ae,ew,AE,rV,sV,tw,iV,oV,aV,kE,lV,RE,PE,cV,Wn,To,uV,dV,NE,hV,Em,IE;const kh=class kh{constructor(e,t,r,s,i,o,a,l,c,u,f,m,y,w,v){k(this,ae);k(this,of,new AbortController);k(this,Dr,null);k(this,nn,new Map);k(this,Cn,new Map);k(this,af,null);k(this,Lo,null);k(this,lf,null);k(this,hs,new IZ);k(this,wl,null);k(this,xl,null);k(this,cf,0);k(this,cu,new Set);k(this,Di,null);k(this,Gs,null);k(this,uu,new Set);Z(this,"_editorUndoBar",null);k(this,Gg,!1);k(this,qg,!1);k(this,uf,!1);k(this,Wg,null);k(this,Li,null);k(this,bl,null);k(this,df,null);k(this,_l,!1);k(this,Fi,null);k(this,zx,new NZ);k(this,Cl,!1);k(this,Kg,!1);k(this,Sl,null);k(this,du,null);k(this,hu,null);k(this,El,null);k(this,Yg,null);k(this,dn,Ne.NONE);k(this,ot,new Set);k(this,Fo,null);k(this,Tl,null);k(this,fu,null);k(this,Jg,null);k(this,Xg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Al,[0,0]);k(this,Oi,null);k(this,Oo,null);k(this,Qg,null);k(this,Zg,null);k(this,fs,null);const b=this._signal=d(this,of).signal;E(this,Oo,e),E(this,Qg,t),E(this,Zg,r),E(this,af,s),E(this,Tl,i),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:b}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),o._on("setpreference",this.onSetPreference.bind(this),{signal:b}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:b}),R(this,ae,iV).call(this),R(this,ae,cV).call(this),R(this,ae,kE).call(this),E(this,Lo,a.annotationStorage),E(this,Wg,a.filterFactory),E(this,fu,l),E(this,df,c||null),E(this,Gg,u),E(this,qg,f),E(this,uf,m),E(this,Yg,y||null),this.viewParameters={realScale:wc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=kh.prototype,t=o=>d(o,Oo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return qe(this,"_keyboardManager",new Lv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Oo).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,Oo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,o,a,l;(e=d(this,fs))==null||e.resolve(),E(this,fs,null),(t=d(this,of))==null||t.abort(),E(this,of,null),this._signal=null;for(const c of d(this,Cn).values())c.destroy();d(this,Cn).clear(),d(this,nn).clear(),d(this,uu).clear(),(r=d(this,El))==null||r.clear(),E(this,Dr,null),d(this,ot).clear(),d(this,hs).destroy(),(s=d(this,af))==null||s.destroy(),(i=d(this,Tl))==null||i.destroy(),(o=d(this,Fi))==null||o.hide(),E(this,Fi,null),(a=d(this,hu))==null||a.destroy(),E(this,hu,null),d(this,Li)&&(clearTimeout(d(this,Li)),E(this,Li,null)),d(this,Oi)&&(clearTimeout(d(this,Oi)),E(this,Oi,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,Yg)}get useNewAltTextFlow(){return d(this,qg)}get useNewAltTextWhenAddingImage(){return d(this,uf)}get hcmFilter(){return qe(this,"hcmFilter",d(this,fu)?d(this,Wg).addHCMFilter(d(this,fu).foreground,d(this,fu).background):"none")}get direction(){return qe(this,"direction",getComputedStyle(d(this,Oo)).direction)}get highlightColors(){return qe(this,"highlightColors",d(this,df)?new Map(d(this,df).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return qe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,xl,e)}setMainHighlightColorPicker(e){E(this,hu,e)}editAltText(e,t=!1){var r;(r=d(this,af))==null||r.editAltText(this,e,t)}getSignature(e){var t;(t=d(this,Tl))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Tl)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,uf,t);break}}onPageChanging({pageNumber:e}){E(this,cf,e-1)}focusMainContainer(){d(this,Oo).focus()}findParent(e,t){for(const r of d(this,Cn).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){d(this,Qg).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,uu).add(e)}removeShouldRescale(e){d(this,uu).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*wc.PDF_TO_CSS_UNITS;for(const r of d(this,uu))r.onScaleChanging();(t=d(this,xl))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=t,a=t.toString(),c=R(this,ae,ew).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const f=R(this,ae,AE).call(this,c),m=d(this,dn)===Ne.NONE,y=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Ne.HIGHLIGHT,y);return}y()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,Lo)&&!d(this,Lo).has(e.id)&&d(this,Lo).setValue(e.id,e)}a11yAlert(e,t=null){const r=d(this,Zg);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,_l)&&(E(this,_l,!1),R(this,ae,tw).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,ot))if(t.div.contains(e)){E(this,du,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,du))return;const[e,t]=d(this,du);E(this,du,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,ae,kE).call(this),R(this,ae,RE).call(this)}removeEditListeners(){R(this,ae,lV).call(this),R(this,ae,PE).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of d(this,Gs))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of d(this,Gs))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=d(this,Dr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of d(this,ot)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of d(this,Gs))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){Ie(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=await s.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)R(this,ae,NE).call(this,l);R(this,ae,IE).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){Ie(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,dn)!==Ne.NONE&&!this.isEditorHandlingKeyboard&&kh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,_l)&&(E(this,_l,!1),R(this,ae,tw).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,ae,oV).call(this),R(this,ae,RE).call(this),R(this,ae,Wn).call(this,{isEditing:d(this,dn)!==Ne.NONE,isEmpty:R(this,ae,Em).call(this),hasSomethingToUndo:d(this,hs).hasSomethingToUndo(),hasSomethingToRedo:d(this,hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,ae,aV).call(this),R(this,ae,PE).call(this),R(this,ae,Wn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Gs)){E(this,Gs,e);for(const t of d(this,Gs))R(this,ae,To).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,zx).id}get currentLayer(){return d(this,Cn).get(d(this,cf))}getLayer(e){return d(this,Cn).get(e)}get currentPageIndex(){return d(this,cf)}addLayer(e){d(this,Cn).set(e.pageIndex,e),d(this,Cl)?e.enable():e.disable()}removeLayer(e){d(this,Cn).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1){var i,o,a;if(d(this,dn)!==e&&!(d(this,fs)&&(await d(this,fs).promise,!d(this,fs)))){if(E(this,fs,Promise.withResolvers()),(i=d(this,xl))==null||i.commitOrRemove(),E(this,dn,e),e===Ne.NONE){this.setEditingState(!1),R(this,ae,dV).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,fs).resolve();return}e===Ne.SIGNATURE&&await((a=d(this,Tl))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await R(this,ae,uV).call(this),this.unselectAll();for(const l of d(this,Cn).values())l.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),d(this,fs).resolve();return}for(const l of d(this,nn).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),s&&l.enterInEditMode()):l.unselect();d(this,fs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,dn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var r;if(d(this,Gs)){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor(t);return;case Ke.HIGHLIGHT_DEFAULT_COLOR:(r=d(this,hu))==null||r.updateColor(t);break;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,Jg)||E(this,Jg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of d(this,ot))s.updateParams(e,t);for(const s of d(this,Gs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of d(this,nn).values())o.editorType===e&&o.show(t);(((i=d(this,Jg))==null?void 0:i.get(Ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,ae,To).call(this,[[Ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,Kg)!==e){E(this,Kg,e);for(const t of d(this,Cn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of d(this,nn).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return d(this,nn).get(e)}addEditor(e){d(this,nn).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(d(this,Li)&&clearTimeout(d(this,Li)),E(this,Li,setTimeout(()=>{this.focusMainContainer(),E(this,Li,null)},0))),d(this,nn).delete(e.id),e.annotationElementId&&((t=d(this,El))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,cu).has(e.annotationElementId))&&((r=d(this,Lo))==null||r.remove(e.id))}addDeletedAnnotationElement(e){d(this,cu).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,cu).has(e)}removeDeletedAnnotationElement(e){d(this,cu).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,Dr)!==e&&(E(this,Dr,e),e&&R(this,ae,To).call(this,e.propertiesToUpdate))}updateUI(e){d(this,ae,hV)===e&&R(this,ae,To).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){R(this,ae,To).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,ot).has(e)){d(this,ot).delete(e),e.unselect(),R(this,ae,Wn).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,ot).add(e),e.select(),R(this,ae,To).call(this,e.propertiesToUpdate),R(this,ae,Wn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,xl))==null||t.commitOrRemove();for(const r of d(this,ot))r!==e&&r.unselect();d(this,ot).clear(),d(this,ot).add(e),e.select(),R(this,ae,To).call(this,e.propertiesToUpdate),R(this,ae,Wn).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,ot).has(e)}get firstSelectedEditor(){return d(this,ot).values().next().value}unselect(e){e.unselect(),d(this,ot).delete(e),R(this,ae,Wn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,ot).size!==0}get isEnterHandled(){return d(this,ot).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,hs).undo(),R(this,ae,Wn).call(this,{hasSomethingToUndo:d(this,hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,ae,Em).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,hs).redo(),R(this,ae,Wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,hs).hasSomethingToRedo(),isEmpty:R(this,ae,Em).call(this)})}addCommands(e){d(this,hs).add(e),R(this,ae,Wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,ae,Em).call(this)})}cleanUndoStack(e){d(this,hs).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,ot)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},s=()=>{for(const o of t)R(this,ae,NE).call(this,o)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=d(this,Dr))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,Dr)||this.hasSelection}selectAll(){for(const e of d(this,ot))e.commit();R(this,ae,IE).call(this,d(this,nn).values())}unselectAll(){var e;if(!(d(this,Dr)&&(d(this,Dr).commitOrRemove(),d(this,dn)!==Ne.NONE))&&!((e=d(this,xl))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,ot))t.unselect();d(this,ot).clear(),R(this,ae,Wn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;d(this,Al)[0]+=e,d(this,Al)[1]+=t;const[s,i]=d(this,Al),o=[...d(this,ot)],a=1e3;d(this,Oi)&&clearTimeout(d(this,Oi)),E(this,Oi,setTimeout(()=>{E(this,Oi,null),d(this,Al)[0]=d(this,Al)[1]=0,this.addCommands({cmd:()=>{for(const l of o)d(this,nn).has(l.id)&&(l.translateInPage(s,i),l.translationDone())},undo:()=>{for(const l of o)d(this,nn).has(l.id)&&(l.translateInPage(-s,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Di,new Map);for(const e of d(this,ot))d(this,Di).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Di))return!1;this.disableUserSelect(!1);const e=d(this,Di);E(this,Di,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(d(this,nn).has(s.id)){const l=d(this,Cn).get(a);l?s._setParentAndPosition(l,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,Di))for(const r of d(this,Di).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,ot).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,Dr)===e}getActive(){return d(this,Dr)}getMode(){return d(this,dn)}get imageManager(){return qe(this,"imageManager",new EE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,m)=>({x:(u-s)/o,y:1-(c+f-r)/i,width:m/o,height:f/i});break;case"180":a=(c,u,f,m)=>({x:1-(c+f-r)/i,y:1-(u+m-s)/o,width:f/i,height:m/o});break;case"270":a=(c,u,f,m)=>({x:1-(u+m-s)/o,y:(c-r)/i,width:m/o,height:f/i});break;default:a=(c,u,f,m)=>({x:(c-r)/i,y:(u-s)/o,width:f/i,height:m/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:m,y,width:w,height:v}of f.getClientRects())w===0||v===0||l.push(a(m,y,w,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,lf)||E(this,lf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,lf))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=d(this,lf))==null?void 0:s.get(e.data.id);if(!t)return;const r=d(this,Lo).getRawValue(t);r&&(d(this,dn)===Ne.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=d(this,El))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),d(this,El).delete(e))}addMissingCanvas(e,t){(d(this,El)||E(this,El,new Map)).set(e,t)}};of=new WeakMap,Dr=new WeakMap,nn=new WeakMap,Cn=new WeakMap,af=new WeakMap,Lo=new WeakMap,lf=new WeakMap,hs=new WeakMap,wl=new WeakMap,xl=new WeakMap,cf=new WeakMap,cu=new WeakMap,Di=new WeakMap,Gs=new WeakMap,uu=new WeakMap,Gg=new WeakMap,qg=new WeakMap,uf=new WeakMap,Wg=new WeakMap,Li=new WeakMap,bl=new WeakMap,df=new WeakMap,_l=new WeakMap,Fi=new WeakMap,zx=new WeakMap,Cl=new WeakMap,Kg=new WeakMap,Sl=new WeakMap,du=new WeakMap,hu=new WeakMap,El=new WeakMap,Yg=new WeakMap,dn=new WeakMap,ot=new WeakMap,Fo=new WeakMap,Tl=new WeakMap,fu=new WeakMap,Jg=new WeakMap,Xg=new WeakMap,Al=new WeakMap,Oi=new WeakMap,Oo=new WeakMap,Qg=new WeakMap,Zg=new WeakMap,fs=new WeakMap,ae=new WeakSet,ew=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},AE=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of d(this,Cn).values())if(r.hasTextLayer(e))return r;return null},rV=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=R(this,ae,ew).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(d(this,Fi)||E(this,Fi,new PZ(this)),d(this,Fi).show(r,s,this.direction==="ltr"))},sV=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Fo)&&((i=d(this,Fi))==null||i.hide(),E(this,Fo,null),R(this,ae,Wn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Fo))return;const s=R(this,ae,ew).call(this,e).closest(".textLayer");if(!s){d(this,Fo)&&((o=d(this,Fi))==null||o.hide(),E(this,Fo,null),R(this,ae,Wn).call(this,{hasSelectedText:!1}));return}if((a=d(this,Fi))==null||a.hide(),E(this,Fo,t),R(this,ae,Wn).call(this,{hasSelectedText:!0}),!(d(this,dn)!==Ne.HIGHLIGHT&&d(this,dn)!==Ne.NONE)&&(d(this,dn)===Ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,_l,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,dn)===Ne.HIGHLIGHT?R(this,ae,AE).call(this,s):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),f=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),m.type==="pointerup"&&R(this,ae,tw).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},tw=function(e=""){d(this,dn)===Ne.HIGHLIGHT?this.highlightSelection(e):d(this,Gg)&&R(this,ae,rV).call(this)},iV=function(){document.addEventListener("selectionchange",R(this,ae,sV).bind(this),{signal:this._signal})},oV=function(){if(d(this,bl))return;E(this,bl,new AbortController);const e=this.combinedSignal(d(this,bl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},aV=function(){var e;(e=d(this,bl))==null||e.abort(),E(this,bl,null)},kE=function(){if(d(this,Sl))return;E(this,Sl,new AbortController);const e=this.combinedSignal(d(this,Sl));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},lV=function(){var e;(e=d(this,Sl))==null||e.abort(),E(this,Sl,null)},RE=function(){if(d(this,wl))return;E(this,wl,new AbortController);const e=this.combinedSignal(d(this,wl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},PE=function(){var e;(e=d(this,wl))==null||e.abort(),E(this,wl,null)},cV=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Wn=function(e){Object.entries(e).some(([r,s])=>d(this,Xg)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Xg),e)}),d(this,dn)===Ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,ae,To).call(this,[[Ke.HIGHLIGHT_FREE,!0]]))},To=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},uV=async function(){if(!d(this,Cl)){E(this,Cl,!0);const e=[];for(const t of d(this,Cn).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,nn).values())t.enable()}},dV=function(){if(this.unselectAll(),d(this,Cl)){E(this,Cl,!1);for(const e of d(this,Cn).values())e.disable();for(const e of d(this,nn).values())e.disable()}},NE=function(e){const t=d(this,Cn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},hV=function(){let e=null;for(e of d(this,ot));return e},Em=function(){if(d(this,nn).size===0)return!0;if(d(this,nn).size===1)for(const e of d(this,nn).values())return e.isEmpty();return!1},IE=function(e){for(const t of d(this,ot))t.unselect();d(this,ot).clear();for(const t of e)t.isEmpty()||(d(this,ot).add(t),t.select());R(this,ae,Wn).call(this,{hasSelectedEditor:this.hasSelection})},Z(kh,"TRANSLATE_SMALL",1),Z(kh,"TRANSLATE_BIG",10);let Md=kh;var hn,Ui,qs,hf,$i,Lr,ff,ji,xr,Uo,pu,Vi,kl,ui,Tm,nw;const Kn=class Kn{constructor(e){k(this,ui);k(this,hn,null);k(this,Ui,!1);k(this,qs,null);k(this,hf,null);k(this,$i,null);k(this,Lr,null);k(this,ff,!1);k(this,ji,null);k(this,xr,null);k(this,Uo,null);k(this,pu,null);k(this,Vi,!1);E(this,xr,e),E(this,Vi,e._uiManager.useNewAltTextFlow),d(Kn,kl)||E(Kn,kl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Kn._l10n??(Kn._l10n=e)}async render(){const e=E(this,qs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,hf,document.createElement("span"));e.append(t),d(this,Vi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Kn,kl).missing),t.setAttribute("data-l10n-id",d(Kn,kl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=d(this,xr)._uiManager._signal;e.addEventListener("contextmenu",yi,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),d(this,xr)._uiManager.editAltText(d(this,xr)),d(this,Vi)&&d(this,xr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,ui,Tm)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(E(this,ff,!0),s(i))},{signal:r}),await R(this,ui,nw).call(this),e}finish(){d(this,qs)&&(d(this,qs).focus({focusVisible:d(this,ff)}),E(this,ff,!1))}isEmpty(){return d(this,Vi)?d(this,hn)===null:!d(this,hn)&&!d(this,Ui)}hasData(){return d(this,Vi)?d(this,hn)!==null||!!d(this,Uo):this.isEmpty()}get guessedText(){return d(this,Uo)}async setGuessedText(e){d(this,hn)===null&&(E(this,Uo,e),E(this,pu,await Kn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,ui,nw).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,Vi)||d(this,hn)){(t=d(this,ji))==null||t.remove(),E(this,ji,null);return}if(!d(this,ji)){const r=E(this,ji,document.createElement("div"));r.className="noAltTextBadge",d(this,xr).div.append(r)}d(this,ji).classList.toggle("hidden",!e)}serialize(e){let t=d(this,hn);return!e&&d(this,Uo)===t&&(t=d(this,pu)),{altText:t,decorative:d(this,Ui),guessedText:d(this,Uo),textWithDisclaimer:d(this,pu)}}get data(){return{altText:d(this,hn),decorative:d(this,Ui)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(E(this,Uo,r),E(this,pu,s)),!(d(this,hn)===e&&d(this,Ui)===t)&&(i||(E(this,hn,e),E(this,Ui,t)),R(this,ui,nw).call(this))}toggle(e=!1){d(this,qs)&&(!e&&d(this,Lr)&&(clearTimeout(d(this,Lr)),E(this,Lr,null)),d(this,qs).disabled=!e)}shown(){d(this,xr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,ui,Tm)}})}destroy(){var e,t;(e=d(this,qs))==null||e.remove(),E(this,qs,null),E(this,hf,null),E(this,$i,null),(t=d(this,ji))==null||t.remove(),E(this,ji,null)}};hn=new WeakMap,Ui=new WeakMap,qs=new WeakMap,hf=new WeakMap,$i=new WeakMap,Lr=new WeakMap,ff=new WeakMap,ji=new WeakMap,xr=new WeakMap,Uo=new WeakMap,pu=new WeakMap,Vi=new WeakMap,kl=new WeakMap,ui=new WeakSet,Tm=function(){return d(this,hn)&&"added"||d(this,hn)===null&&this.guessedText&&"review"||"missing"},nw=async function(){var s,i,o;const e=d(this,qs);if(!e)return;if(d(this,Vi)){if(e.classList.toggle("done",!!d(this,hn)),e.setAttribute("data-l10n-id",d(Kn,kl)[d(this,ui,Tm)]),(s=d(this,hf))==null||s.setAttribute("data-l10n-id",d(Kn,kl)[`${d(this,ui,Tm)}-label`]),!d(this,hn)){(i=d(this,$i))==null||i.remove();return}}else{if(!d(this,hn)&&!d(this,Ui)){e.classList.remove("done"),(o=d(this,$i))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,$i);if(!t){E(this,$i,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,xr).id}`;const a=100,l=d(this,xr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,Lr)),E(this,Lr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,Lr,setTimeout(()=>{E(this,Lr,null),d(this,$i).classList.add("show"),d(this,xr)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,Lr)&&(clearTimeout(d(this,Lr)),E(this,Lr,null)),(c=d(this,$i))==null||c.classList.remove("show")},{signal:l})}d(this,Ui)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,hn)),t.parentNode||e.append(t);const r=d(this,xr).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},k(Kn,kl,null),Z(Kn,"_l10n",null);let Rx=Kn;var pf,mu,ey,ty,ny,ry,sy,$o,gu,jo,yu,Vo,bc,fV,pV,mV;const Ak=class Ak{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){k(this,bc);k(this,pf);k(this,mu,!1);k(this,ey,null);k(this,ty);k(this,ny);k(this,ry);k(this,sy);k(this,$o,null);k(this,gu);k(this,jo,null);k(this,yu);k(this,Vo,null);E(this,pf,e),E(this,ey,r),E(this,ty,t),E(this,ny,s),E(this,ry,i),E(this,sy,o),E(this,yu,new AbortController),E(this,gu,AbortSignal.any([a,d(this,yu).signal])),e.addEventListener("touchstart",R(this,bc,fV).bind(this),{passive:!1,signal:d(this,gu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/po.pixelRatio}destroy(){var e,t;(e=d(this,yu))==null||e.abort(),E(this,yu,null),(t=d(this,$o))==null||t.abort(),E(this,$o,null)}};pf=new WeakMap,mu=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,ry=new WeakMap,sy=new WeakMap,$o=new WeakMap,gu=new WeakMap,jo=new WeakMap,yu=new WeakMap,Vo=new WeakMap,bc=new WeakSet,fV=function(e){var s,i,o;if((s=d(this,ty))!=null&&s.call(this))return;if(e.touches.length===1){if(d(this,$o))return;const a=E(this,$o,new AbortController),l=AbortSignal.any([d(this,gu),a.signal]),c=d(this,pf),u={capture:!0,signal:l,passive:!1},f=m=>{var y;m.pointerType==="touch"&&((y=d(this,$o))==null||y.abort(),E(this,$o,null))};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Yt(m),f(m))},u),c.addEventListener("pointerup",f,u),c.addEventListener("pointercancel",f,u);return}if(!d(this,Vo)){E(this,Vo,new AbortController);const a=AbortSignal.any([d(this,gu),d(this,Vo).signal]),l=d(this,pf),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",R(this,bc,pV).bind(this),c);const u=R(this,bc,mV).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Yt,c),l.addEventListener("pointermove",Yt,c),l.addEventListener("pointercancel",Yt,c),l.addEventListener("pointerup",Yt,c),(i=d(this,ny))==null||i.call(this)}if(Yt(e),e.touches.length!==2||(o=d(this,ey))!=null&&o.call(this)){E(this,jo,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),E(this,jo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},pV=function(e){var T;if(!d(this,jo)||e.touches.length!==2)return;Yt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:o,screenY:a}=r,l=d(this,jo),{touch0X:c,touch0Y:u,touch1X:f,touch1Y:m}=l,y=f-c,w=m-u,v=o-s,b=a-i,x=Math.hypot(v,b)||1,C=Math.hypot(y,w)||1;if(!d(this,mu)&&Math.abs(C-x)<=Ak.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!d(this,mu)){E(this,mu,!0);return}const _=[(s+o)/2,(i+a)/2];(T=d(this,ry))==null||T.call(this,_,C,x)},mV=function(e){var t;e.touches.length>=2||(d(this,Vo)&&(d(this,Vo).abort(),E(this,Vo,null),(t=d(this,sy))==null||t.call(this)),d(this,jo)&&(Yt(e),E(this,jo,null),E(this,mu,!1)))};let Px=Ak;var vu,Ws,Tt,mf,Rl,iy,wu,Sn,xu,Bo,Pl,oy,bu,Fr,ay,_u,zo,Bi,gf,yf,ps,Cu,ly,Hx,Ae,ME,cy,DE,rw,gV,yV,LE,sw,FE,vV,wV,xV,OE,bV,UE,_V,CV,SV,$E,Am;const je=class je{constructor(e){k(this,Ae);k(this,vu,null);k(this,Ws,null);k(this,Tt,null);k(this,mf,!1);k(this,Rl,null);k(this,iy,"");k(this,wu,!1);k(this,Sn,null);k(this,xu,null);k(this,Bo,null);k(this,Pl,null);k(this,oy,"");k(this,bu,!1);k(this,Fr,null);k(this,ay,!1);k(this,_u,!1);k(this,zo,!1);k(this,Bi,null);k(this,gf,0);k(this,yf,0);k(this,ps,null);k(this,Cu,null);Z(this,"isSelected",!1);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);k(this,ly,!1);k(this,Hx,je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=je.prototype._resizeWithKeyboard,t=Md.TRANSLATE_SMALL,r=Md.TRANSLATE_BIG;return qe(this,"_resizerKeyboardManager",new Lv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],je.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return qe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new MZ({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(je._l10n??(je._l10n=e),je._l10nResizer||(je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),je._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);je._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ft("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,ly)}set _isDraggable(e){var t;E(this,ly,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Hx)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,Ae,Am).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,bu)?E(this,bu,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){R(this,Ae,ME).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,Fr)||E(this,Fr,[this.x,this.y,this.width,this.height]),R(this,Ae,ME).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,Fr)||E(this,Fr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=r;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,Fr)&&(d(this,Fr)[0]!==this.x||d(this,Fr)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Fr)&&(d(this,Fr)[2]!==this.width||d(this,Fr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=je,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=r,l*=s,i*=r,o*=s,this._mustFixPosition)switch(e){case 0:i=tr(i,0,r-a),o=tr(o,0,s-l);break;case 90:i=tr(i,0,r-l),o=tr(o,a,s);break;case 180:i=tr(i,a,r),o=tr(o,l,s);break;case 270:i=tr(i,l,r),o=tr(o,0,s-a);break}this.x=i/=r,this.y=o/=s;const[c,u]=this.getBaseTranslation();i+=c,o+=u,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return R(r=je,cy,DE).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return R(r=je,cy,DE).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,d(this,wu)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!d(this,wu)&&t.endsWith("%");if(s&&i)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!d(this,wu)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,Tt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,_u))return this._editToolbar;this._editToolbar=new SE(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,Tt))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,Tt)||(Rx.initialize(je._l10n),E(this,Tt,new Rx(this)),d(this,vu)&&(d(this,Tt).data=d(this,vu),E(this,vu,null))),d(this,Tt)}get altTextData(){var e;return(e=d(this,Tt))==null?void 0:e.data}set altTextData(e){d(this,Tt)&&(d(this,Tt).data=e)}get guessedAltText(){var e;return(e=d(this,Tt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,Tt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,Tt))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,Tt)&&!d(this,Tt).isEmpty()}hasAltTextData(){var e;return((e=d(this,Tt))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,mf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),R(this,Ae,UE).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),tV(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Cu)||E(this,Cu,new Px({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,Ae,vV).bind(this),onPinching:R(this,Ae,wV).bind(this),onPinchEnd:R(this,Ae,xV).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,bu,!0),this._isDraggable){R(this,Ae,bV).call(this,e);return}R(this,Ae,OE).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Bi)&&clearTimeout(d(this,Bi)),E(this,Bi,setTimeout(()=>{var e;E(this,Bi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,u=t/s,f=this.x*i,m=this.y*o,y=this.width*i,w=this.height*o;switch(r){case 0:return[f+c+a,o-m-u-w+l,f+c+y+a,o-m-u+l];case 90:return[f+u+a,o-m+c+l,f+u+w+a,o-m+c+y+l];case 180:return[f-c-y+a,o-m+u+l,f-c+a,o-m+u+w+l];case 270:return[f-u-w+a,o-m-c-y+l,f-u+a,o-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,l=o-s;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-s,l,a];case 180:return[i,t-s,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,_u,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,_u,!1),!0):!1}isInEditMode(){return d(this,_u)}shouldGetKeyboardEvents(){return d(this,zo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&s>0&&e<i&&r>0}rebuild(){R(this,Ae,UE).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ft("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,E(s,vu,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=l/o,s.width=c/i,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Pl))==null||e.abort(),E(this,Pl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,Bi)&&(clearTimeout(d(this,Bi)),E(this,Bi,null)),R(this,Ae,Am).call(this),this.removeEditToolbar(),d(this,ps)){for(const r of d(this,ps).values())clearTimeout(r);E(this,ps,null)}this.parent=null,(t=d(this,Cu))==null||t.destroy(),E(this,Cu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,Ae,gV).call(this),d(this,Sn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,Sn).children;if(!d(this,Ws)){E(this,Ws,Array.from(t));const o=R(this,Ae,_V).bind(this),a=R(this,Ae,CV).bind(this),l=this._uiManager._signal;for(const c of d(this,Ws)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",R(this,Ae,SV).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",je._l10nResizer[u])}}const r=d(this,Ws)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(d(this,Ws).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)d(this,Sn).append(d(this,Sn).firstChild);else if(i>s)for(let a=0;a<i-s;a++)d(this,Sn).firstChild.before(d(this,Sn).lastChild);let o=0;for(const a of t){const c=d(this,Ws)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",je._l10nResizer[c])}}R(this,Ae,$E).call(this,0),E(this,zo,!0),d(this,Sn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,zo)&&R(this,Ae,FE).call(this,d(this,oy),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,Ae,Am).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=d(this,Tt))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=d(this,Sn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=d(this,Tt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,ay)}set isEditing(e){E(this,ay,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,wu,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,ps)||E(this,ps,new Map);const{action:r}=e;let s=d(this,ps).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),d(this,ps).delete(r),d(this,ps).size===0&&E(this,ps,null)},je._telemetryTimeout),d(this,ps).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,mf,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,mf,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vu=new WeakMap,Ws=new WeakMap,Tt=new WeakMap,mf=new WeakMap,Rl=new WeakMap,iy=new WeakMap,wu=new WeakMap,Sn=new WeakMap,xu=new WeakMap,Bo=new WeakMap,Pl=new WeakMap,oy=new WeakMap,bu=new WeakMap,Fr=new WeakMap,ay=new WeakMap,_u=new WeakMap,zo=new WeakMap,Bi=new WeakMap,gf=new WeakMap,yf=new WeakMap,ps=new WeakMap,Cu=new WeakMap,ly=new WeakMap,Hx=new WeakMap,Ae=new WeakSet,ME=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cy=new WeakSet,DE=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},rw=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},gV=function(){if(d(this,Sn))return;E(this,Sn,document.createElement("div")),d(this,Sn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");d(this,Sn).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",R(this,Ae,yV).bind(this,r),{signal:t}),s.addEventListener("contextmenu",yi,{signal:t}),s.tabIndex=-1}this.div.prepend(d(this,Sn))},yV=function(e,t){var u;t.preventDefault();const{isMac:r}=In.platform;if(t.button!==0||t.ctrlKey&&r)return;(u=d(this,Tt))==null||u.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,E(this,xu,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,Ae,FE).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Yt,{passive:!1,signal:o}),window.addEventListener("contextmenu",yi,{signal:o}),E(this,Bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=d(this,Tt))==null||f.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,R(this,Ae,sw).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},LE=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*r,o*s),this.fixAndSetPosition(),this._onResized()},sw=function(){if(!d(this,Bo))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=d(this,Bo);E(this,Bo,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===r&&l===s||this.addCommands({cmd:R(this,Ae,LE).bind(this,i,o,a,l),undo:R(this,Ae,LE).bind(this,e,t,r,s),mustExec:!0})},FE=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=je.MIN_SIZE/r,u=je.MIN_SIZE/s,f=R(this,Ae,rw).call(this,this.rotation),m=(j,z)=>[f[0]*j+f[2]*z,f[1]*j+f[3]*z],y=R(this,Ae,rw).call(this,360-this.rotation),w=(j,z)=>[y[0]*j+y[2]*z,y[1]*j+y[3]*z];let v,b,x=!1,C=!1;switch(e){case"topLeft":x=!0,v=(j,z)=>[0,0],b=(j,z)=>[j,z];break;case"topMiddle":v=(j,z)=>[j/2,0],b=(j,z)=>[j/2,z];break;case"topRight":x=!0,v=(j,z)=>[j,0],b=(j,z)=>[0,z];break;case"middleRight":C=!0,v=(j,z)=>[j,z/2],b=(j,z)=>[0,z/2];break;case"bottomRight":x=!0,v=(j,z)=>[j,z],b=(j,z)=>[0,0];break;case"bottomMiddle":v=(j,z)=>[j/2,z],b=(j,z)=>[j/2,0];break;case"bottomLeft":x=!0,v=(j,z)=>[0,z],b=(j,z)=>[j,0];break;case"middleLeft":C=!0,v=(j,z)=>[0,z/2],b=(j,z)=>[j,z/2];break}const _=v(a,l),T=b(a,l);let A=m(...T);const P=je._round(i+A[0]),N=je._round(o+A[1]);let I=1,M=1,D,F;if(t.fromKeyboard)({deltaX:D,deltaY:F}=t);else{const{screenX:j,screenY:z}=t,[V,U]=d(this,xu);[D,F]=this.screenToPageTranslation(j-V,z-U),d(this,xu)[0]=j,d(this,xu)[1]=z}if([D,F]=w(D/r,F/s),x){const j=Math.hypot(a,l);I=M=Math.max(Math.min(Math.hypot(T[0]-_[0]-D,T[1]-_[1]-F)/j,1/a,1/l),c/a,u/l)}else C?I=tr(Math.abs(T[0]-_[0]-D),c,1)/a:M=tr(Math.abs(T[1]-_[1]-F),u,1)/l;const $=je._round(a*I),G=je._round(l*M);A=m(...b($,G));const O=P-A[0],W=N-A[1];d(this,Fr)||E(this,Fr,[this.x,this.y,this.width,this.height]),this.width=$,this.height=G,this.x=O,this.y=W,this.setDims(r*$,s*G),this.fixAndSetPosition(),this._onResizing()},vV=function(){var e;E(this,Bo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,Tt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},wV=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const o=R(this,Ae,rw).call(this,this.rotation),a=(P,N)=>[o[0]*P+o[2]*N,o[1]*P+o[3]*N],[l,c]=this.parentDimensions,u=this.x,f=this.y,m=this.width,y=this.height,w=je.MIN_SIZE/l,v=je.MIN_SIZE/c;i=Math.max(Math.min(i,1/m,1/y),w/m,v/y);const b=je._round(m*i),x=je._round(y*i);if(b===m&&x===y)return;d(this,Fr)||E(this,Fr,[u,f,m,y]);const C=a(m/2,y/2),_=je._round(u+C[0]),T=je._round(f+C[1]),A=a(b/2,x/2);this.x=_-A[0],this.y=T-A[1],this.width=b,this.height=x,this.setDims(l*b,c*x),this.fixAndSetPosition(),this._onResizing()},xV=function(){var e;(e=d(this,Tt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),R(this,Ae,sw).call(this)},OE=function(e){const{isMac:t}=In.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},bV=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},a=c=>{s.abort(),E(this,Rl,null),E(this,bu,!1),this._uiManager.endDragSession()||R(this,Ae,OE).call(this,c),r&&this._onStopDragging()};t&&(E(this,gf,e.clientX),E(this,yf,e.clientY),E(this,Rl,e.pointerId),E(this,iy,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:m}=c;if(m!==d(this,Rl)){Yt(c);return}const[y,w]=this.screenToPageTranslation(u-d(this,gf),f-d(this,yf));E(this,gf,u),E(this,yf,f),this._uiManager.dragSelectedEditors(y,w)},o),window.addEventListener("touchmove",Yt,o),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,iy)&&(d(this,Cu)||c.isPrimary)&&a(c),Yt(c)},o));const l=c=>{if(!d(this,Rl)||d(this,Rl)===c.pointerId){a(c);return}Yt(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},UE=function(){if(d(this,Pl)||!this.div)return;E(this,Pl,new AbortController);const e=this._uiManager.combinedSignal(d(this,Pl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},_V=function(e){je._resizerKeyboardManager.exec(this,e)},CV=function(e){var t;d(this,zo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,Sn)&&R(this,Ae,Am).call(this)},SV=function(e){E(this,oy,d(this,zo)?e:"")},$E=function(e){if(d(this,Ws))for(const t of d(this,Ws))t.tabIndex=e},Am=function(){E(this,zo,!1),R(this,Ae,$E).call(this,-1),R(this,Ae,sw).call(this)},k(je,cy),Z(je,"_l10n",null),Z(je,"_l10nResizer",null),Z(je,"_borderLineWidth",-1),Z(je,"_colorManager",new TE),Z(je,"_zIndex",1),Z(je,"_telemetryTimeout",1e3);let vt=je;class MZ extends vt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const MN=3285377520,cs=4294901760,ki=65535;class EV{constructor(e){this.h1=e?e&4294967295:MN,this.h2=e?e&4294967295:MN}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let v=0,b=e.length;v<b;v++){const x=e.charCodeAt(v);x<=255?t[r++]=x:(t[r++]=x>>>8,t[r++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,m=461845907,y=f&ki,w=m&ki;for(let v=0;v<s;v++)v&1?(a=o[v],a=a*f&cs|a*y&ki,a=a<<15|a>>>17,a=a*m&cs|a*w&ki,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*f&cs|l*y&ki,l=l<<15|l>>>17,l=l*m&cs|l*w&ki,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*f&cs|a*y&ki,a=a<<15|a>>>17,a=a*m&cs|a*w&ki,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&cs|e*36045&ki,t=t*4283543511&cs|((t<<16|e>>>16)*2950163797&cs)>>>16,e^=t>>>1,e=e*444984403&cs|e*60499&ki,t=t*3301882366&cs|((t<<16|e>>>16)*3120437893&cs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const jE=Object.freeze({map:null,hash:"",transfer:void 0});var Su,Eu,En,Gx,TV;class dk{constructor(){k(this,Gx);k(this,Su,!1);k(this,Eu,null);k(this,En,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=d(this,En).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return d(this,En).get(e)}remove(e){if(d(this,En).delete(e),d(this,En).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,En).values())if(t instanceof vt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=d(this,En).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,d(this,En).set(e,t);s&&R(this,Gx,TV).call(this),t instanceof vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,En).has(e)}get size(){return d(this,En).size}resetModified(){d(this,Su)&&(E(this,Su,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new AV(this)}get serializable(){if(d(this,En).size===0)return jE;const e=new Map,t=new EV,r=[],s=Object.create(null);let i=!1;for(const[o,a]of d(this,En)){const l=a instanceof vt?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:jE}get editorStats(){let e=null;const t=new Map;for(const r of d(this,En).values()){if(!(r instanceof vt))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){E(this,Eu,null)}get modifiedIds(){if(d(this,Eu))return d(this,Eu);const e=[];for(const t of d(this,En).values())!(t instanceof vt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,Eu,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,En).entries()}}Su=new WeakMap,Eu=new WeakMap,En=new WeakMap,Gx=new WeakSet,TV=function(){d(this,Su)||(E(this,Su,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var uy;class AV extends dk{constructor(t){super();k(this,uy);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);E(this,uy,{map:o,hash:s,transfer:i})}get print(){ft("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,uy)}get modifiedIds(){return qe(this,"modifiedIds",{ids:new Set,hash:""})}}uy=new WeakMap;var vf;class DZ{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,vf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,vf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||d(this,vf).has(e.loadedName))){if(Xt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=e,a=new FontFace(s,i,o);this.addNativeFontFace(a);try{await a.load(),d(this,vf).add(s),r==null||r(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ft("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw Ie(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return qe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return qe(this,"isSyncFontLoadingSupported",er||In.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return qe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(T,A){return T.charCodeAt(A)<<24|T.charCodeAt(A+1)<<16|T.charCodeAt(A+2)<<8|T.charCodeAt(A+3)&255}function s(T,A,P,N){const I=T.substring(0,A),M=T.substring(A+P);return I+N+M}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(T,A){if(++c>30){Ie("Load test font never loaded."),A();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(u.bind(null,T,A))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,f.length,f);const w=16,v=1482184792;let b=r(m,w);for(i=0,o=f.length-3;i<o;i+=4)b=b-v+r(f,i)|0;i<f.length&&(b=b-v+r(f+"XXX",i)|0),m=s(m,w,4,vZ(b));const x=`url(data:font/opentype;base64,${btoa(m)});`,C=`@font-face {font-family:"${f}";src:${x}}`;this.insertRule(C);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const T of[e.loadedName,f]){const A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=T,_.append(A)}this._document.body.append(_),u(f,()=>{_.remove(),t.complete()})}}vf=new WeakMap;class LZ{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Kj(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(o){Ie(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function FZ(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(er)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function OZ(n){if(er&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Iv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function b0(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const VE=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,UZ=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",$Z=CZ.bind(null,VE,UZ);var Ho,qx;class jZ{constructor(){k(this,Ho,new Map);k(this,qx,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};d(this,qx).then(()=>{for(const[s]of d(this,Ho))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}d(this,Ho).set(t,s)}removeEventListener(e,t){const r=d(this,Ho).get(t);r==null||r(),d(this,Ho).delete(t)}terminate(){for(const[,e]of d(this,Ho))e==null||e();d(this,Ho).clear()}}Ho=new WeakMap,qx=new WeakMap;const _0={DATA:1,ERROR:2},qt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function DN(){}function gr(n){if(n instanceof vc||n instanceof bE||n instanceof PN||n instanceof kx||n instanceof yC)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ft('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new vc(n.message);case"InvalidPDFException":return new bE(n.message);case"PasswordException":return new PN(n.message,n.code);case"ResponseException":return new kx(n.message,n.status,n.missing);case"UnknownErrorException":return new yC(n.message,n.details)}return new yC(n.message,n.toString())}var wf,Ts,kV,RV,PV,iw;class km{constructor(e,t,r){k(this,Ts);k(this,wf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",R(this,Ts,kV).bind(this),{signal:d(this,wf).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:qt.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Xt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:qt.CANCEL,streamId:i,reason:gr(c)}),u.promise}},r)}destroy(){var e;(e=d(this,wf))==null||e.abort(),E(this,wf,null)}}wf=new WeakMap,Ts=new WeakSet,kV=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,Ts,PV).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===_0.DATA)s.resolve(e.data);else if(e.callback===_0.ERROR)s.reject(gr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:r,targetName:s,callback:_0.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:s,callback:_0.ERROR,callbackId:e.callbackId,reason:gr(o)})});return}if(e.streamId){R(this,Ts,RV).call(this,e);return}t(e.data)},RV=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=u,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:qt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:qt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Xt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:qt.ERROR,streamId:t,reason:gr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:qt.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:qt.START_COMPLETE,streamId:t,reason:gr(c)})})},PV=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case qt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(gr(e.reason));break;case qt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(gr(e.reason));break;case qt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:qt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||DN).then(function(){i.postMessage({sourceName:r,targetName:s,stream:qt.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:qt.PULL_COMPLETE,streamId:t,reason:gr(c)})});break;case qt.ENQUEUE:if(Xt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case qt.CLOSE:if(Xt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),R(this,Ts,iw).call(this,o,t);break;case qt.ERROR:Xt(o,"error should have stream controller"),o.controller.error(gr(e.reason)),R(this,Ts,iw).call(this,o,t);break;case qt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(gr(e.reason)),R(this,Ts,iw).call(this,o,t);break;case qt.CANCEL:if(!a)break;const l=gr(e.reason);Promise.try(a.onCancel||DN,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:qt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:qt.CANCEL_COMPLETE,streamId:t,reason:gr(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},iw=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var dy;class NV{constructor({enableHWA:e=!1}){k(this,dy,!1);E(this,dy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!d(this,dy)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ft("Abstract method `_createCanvas` called.")}}dy=new WeakMap;class VZ extends NV{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class IV{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class LN extends IV{async _fetch(e){const t=await Mv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Iv(t)}}class MV{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Tu,xf,Go,qo,Bn,Au,ku,de,Un,Rm,ah,ow,lh,DV,BE,ch,Pm,Nm,zE,Im;class BZ extends MV{constructor({docId:t,ownerDocument:r=globalThis.document}){super();k(this,de);k(this,Tu);k(this,xf);k(this,Go);k(this,qo);k(this,Bn);k(this,Au);k(this,ku,0);E(this,qo,t),E(this,Bn,r)}addFilter(t){if(!t)return"none";let r=d(this,de,Un).get(t);if(r)return r;const[s,i,o]=R(this,de,ow).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=d(this,de,Un).get(a),r)return d(this,de,Un).set(t,r),r;const l=`g_${d(this,qo)}_transfer_map_${un(this,ku)._++}`,c=R(this,de,lh).call(this,l);d(this,de,Un).set(t,c),d(this,de,Un).set(a,c);const u=R(this,de,ch).call(this,l);return R(this,de,Nm).call(this,s,i,o,u),c}addHCMFilter(t,r){var w;const s=`${t}-${r}`,i="base";let o=d(this,de,Rm).get(i);if((o==null?void 0:o.key)===s||(o?((w=o.filter)==null||w.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},d(this,de,Rm).set(i,o)),!t||!r))return o.url;const a=R(this,de,Im).call(this,t);t=Ce.makeHexColor(...a);const l=R(this,de,Im).call(this,r);if(r=Ce.makeHexColor(...l),d(this,de,ah).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const b=v/255;c[v]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const u=c.join(","),f=`g_${d(this,qo)}_hcm_filter`,m=o.filter=R(this,de,ch).call(this,f);R(this,de,Nm).call(this,u,u,u,m),R(this,de,BE).call(this,m);const y=(v,b)=>{const x=a[v]/255,C=l[v]/255,_=new Array(b+1);for(let T=0;T<=b;T++)_[T]=x+T/b*(C-x);return _.join(",")};return R(this,de,Nm).call(this,y(0,5),y(1,5),y(2,5),m),o.url=R(this,de,lh).call(this,f),o.url}addAlphaFilter(t){let r=d(this,de,Un).get(t);if(r)return r;const[s]=R(this,de,ow).call(this,[t]),i=`alpha_${s}`;if(r=d(this,de,Un).get(i),r)return d(this,de,Un).set(t,r),r;const o=`g_${d(this,qo)}_alpha_map_${un(this,ku)._++}`,a=R(this,de,lh).call(this,o);d(this,de,Un).set(t,a),d(this,de,Un).set(i,a);const l=R(this,de,ch).call(this,o);return R(this,de,zE).call(this,s,l),a}addLuminosityFilter(t){let r=d(this,de,Un).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=R(this,de,ow).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=d(this,de,Un).get(i),r)return d(this,de,Un).set(t,r),r;const o=`g_${d(this,qo)}_luminosity_map_${un(this,ku)._++}`,a=R(this,de,lh).call(this,o);d(this,de,Un).set(t,a),d(this,de,Un).set(i,a);const l=R(this,de,ch).call(this,o);return R(this,de,DV).call(this,l),t&&R(this,de,zE).call(this,s,l),a}addHighlightHCMFilter(t,r,s,i,o){var C;const a=`${r}-${s}-${i}-${o}`;let l=d(this,de,Rm).get(t);if((l==null?void 0:l.key)===a||(l?((C=l.filter)==null||C.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,de,Rm).set(t,l)),!r||!s))return l.url;const[c,u]=[r,s].map(R(this,de,Im).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),m=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[y,w]=[i,o].map(R(this,de,Im).bind(this));m<f&&([f,m,y,w]=[m,f,w,y]),d(this,de,ah).style.color="";const v=(_,T,A)=>{const P=new Array(256),N=(m-f)/A,I=_/255,M=(T-_)/(255*A);let D=0;for(let F=0;F<=A;F++){const $=Math.round(f+F*N),G=I+F*M;for(let O=D;O<=$;O++)P[O]=G;D=$+1}for(let F=D;F<256;F++)P[F]=P[D-1];return P.join(",")},b=`g_${d(this,qo)}_hcm_${t}_filter`,x=l.filter=R(this,de,ch).call(this,b);return R(this,de,BE).call(this,x),R(this,de,Nm).call(this,v(y[0],w[0],5),v(y[1],w[1],5),v(y[2],w[2],5),x),l.url=R(this,de,lh).call(this,b),l.url}destroy(t=!1){var r,s,i,o;t&&((r=d(this,Au))!=null&&r.size)||((s=d(this,Go))==null||s.parentNode.parentNode.remove(),E(this,Go,null),(i=d(this,xf))==null||i.clear(),E(this,xf,null),(o=d(this,Au))==null||o.clear(),E(this,Au,null),E(this,ku,0))}}Tu=new WeakMap,xf=new WeakMap,Go=new WeakMap,qo=new WeakMap,Bn=new WeakMap,Au=new WeakMap,ku=new WeakMap,de=new WeakSet,Un=function(){return d(this,xf)||E(this,xf,new Map)},Rm=function(){return d(this,Au)||E(this,Au,new Map)},ah=function(){if(!d(this,Go)){const t=d(this,Bn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=d(this,Bn).createElementNS(Eo,"svg");s.setAttribute("width",0),s.setAttribute("height",0),E(this,Go,d(this,Bn).createElementNS(Eo,"defs")),t.append(s),s.append(d(this,Go)),d(this,Bn).body.append(t)}return d(this,Go)},ow=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let m=0;m<256;m++)u[m]=c[m]/255;const f=u.join(",");return[f,f,f]}const[r,s,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=s[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},lh=function(t){if(d(this,Tu)===void 0){E(this,Tu,"");const r=d(this,Bn).URL;r!==d(this,Bn).baseURI&&(a_(r)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Tu,Gj(r,"")))}return`url(${d(this,Tu)}#${t})`},DV=function(t){const r=d(this,Bn).createElementNS(Eo,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},BE=function(t){const r=d(this,Bn).createElementNS(Eo,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},ch=function(t){const r=d(this,Bn).createElementNS(Eo,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),d(this,de,ah).append(r),r},Pm=function(t,r,s){const i=d(this,Bn).createElementNS(Eo,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Nm=function(t,r,s,i){const o=d(this,Bn).createElementNS(Eo,"feComponentTransfer");i.append(o),R(this,de,Pm).call(this,o,"feFuncR",t),R(this,de,Pm).call(this,o,"feFuncG",r),R(this,de,Pm).call(this,o,"feFuncB",s)},zE=function(t,r){const s=d(this,Bn).createElementNS(Eo,"feComponentTransfer");r.append(s),R(this,de,Pm).call(this,s,"feFuncA",t)},Im=function(t){return d(this,de,ah).style.color=t,uk(getComputedStyle(d(this,de,ah)).getPropertyValue("color"))};class LV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class FN extends LV{async _fetch(e){const t=await Mv(e,"arraybuffer");return new Uint8Array(t)}}class FV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class ON extends FV{async _fetch(e){const t=await Mv(e,"arraybuffer");return new Uint8Array(t)}}er&&Ie("Please use the `legacy` build in Node.js environments.");async function hk(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class zZ extends MV{}class HZ extends NV{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class GZ extends IV{async _fetch(e){return hk(e)}}class qZ extends LV{async _fetch(e){return hk(e)}}class WZ extends FV{async _fetch(e){return hk(e)}}const Rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function HE(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class fk{isModifyingCurrentTransform(){return!1}getPattern(){ft("Abstract method `getPattern` called.")}}class KZ extends fk{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Rn.STROKE||s===Rn.FILL){const o=t.current.getClippedPathBoundingBox(s,Mt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=Ce.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),HE(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else HE(e,this._bbox),i=this._createGradient(e);return i}}function xC(n,e,t,r,s,i,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let m;l[t+1]>l[r+1]&&(m=t,t=r,r=m,m=i,i=o,o=m),l[r+1]>l[s+1]&&(m=r,r=s,s=m,m=o,o=a,a=m),l[t+1]>l[r+1]&&(m=t,t=r,r=m,m=i,i=o,o=m);const y=(l[t]+e.offsetX)*e.scaleX,w=(l[t+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY,x=(l[s]+e.offsetX)*e.scaleX,C=(l[s+1]+e.offsetY)*e.scaleY;if(w>=C)return;const _=c[i],T=c[i+1],A=c[i+2],P=c[o],N=c[o+1],I=c[o+2],M=c[a],D=c[a+1],F=c[a+2],$=Math.round(w),G=Math.round(C);let O,W,j,z,V,U,H,Q;for(let J=$;J<=G;J++){if(J<b){const Y=J<w?0:(w-J)/(w-b);O=y-(y-v)*Y,W=_-(_-P)*Y,j=T-(T-N)*Y,z=A-(A-I)*Y}else{let Y;J>C?Y=1:b===C?Y=0:Y=(b-J)/(b-C),O=v-(v-x)*Y,W=P-(P-M)*Y,j=N-(N-D)*Y,z=I-(I-F)*Y}let re;J<w?re=0:J>C?re=1:re=(w-J)/(w-C),V=y-(y-x)*re,U=_-(_-M)*re,H=T-(T-D)*re,Q=A-(A-F)*re;const ye=Math.round(Math.min(O,V)),Me=Math.round(Math.max(O,V));let De=f*J+ye*4;for(let Y=ye;Y<=Me;Y++)re=(O-Y)/(O-V),re<0?re=0:re>1&&(re=1),u[De++]=W-(W-U)*re|0,u[De++]=j-(j-H)*re|0,u[De++]=z-(z-Q)*re|0,u[De++]=255}}function YZ(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let f=0;f<c;f++,u++)xC(n,t,r[u],r[u+1],r[u+a],s[u],s[u+1],s[u+a]),xC(n,t,r[u+a+1],r[u+1],r[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)xC(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class JZ extends fk{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),y=c/f,w=u/m,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/y,scaleY:1/w},b=f+2*2,x=m+2*2,C=r.getCanvas("mesh",b,x),_=C.context,T=_.createImageData(f,m);if(t){const P=T.data;for(let N=0,I=P.length;N<I;N+=4)P[N]=t[0],P[N+1]=t[1],P[N+2]=t[2],P[N+3]=255}for(const P of this._figures)YZ(T,P,v);return _.putImageData(T,2,2),{canvas:C.canvas,offsetX:a-2*y,offsetY:l-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){HE(e,this._bbox);const i=new Float32Array(2);if(s===Rn.SHADING)Ce.singularValueDecompose2dScale(Mt(e),i);else if(this.matrix){Ce.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;Ce.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=l}else Ce.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,s===Rn.SHADING?null:this._background,t.cachedCanvases);return s!==Rn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class XZ extends fk{getPattern(){return"hotpink"}}function QZ(n){switch(n[0]){case"RadialAxial":return new KZ(n);case"Mesh":return new JZ(n);case"Dummy":return new XZ}throw new Error(`Unknown IR type: ${n[0]}`)}const UN={COLORED:1,UNCOLORED:2},Wx=class Wx{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),o_("TilingType: "+i);const u=t[0],f=t[1],m=t[2],y=t[3],w=m-u,v=y-f,b=new Float32Array(2);Ce.singularValueDecompose2dScale(this.matrix,b);const[x,C]=b;Ce.singularValueDecompose2dScale(this.baseTransform,b);const _=x*b[0],T=C*b[1];let A=w,P=v,N=!1,I=!1;const M=Math.ceil(l*_),D=Math.ceil(c*T),F=Math.ceil(w*_),$=Math.ceil(v*T);M>=F?A=l:N=!0,D>=$?P=c:I=!0;const G=this.getSizeAndScale(A,this.ctx.canvas.width,_),O=this.getSizeAndScale(P,this.ctx.canvas.height,T),W=e.cachedCanvases.getCanvas("pattern",G.size,O.size),j=W.context,z=a.createCanvasGraphics(j);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,s,o),j.translate(-G.scale*u,-O.scale*f),z.transform(G.scale,0,0,O.scale,0,0),j.save(),this.clipBbox(z,u,f,m,y),z.baseTransform=Mt(z.ctx),z.executeOperatorList(r),z.endDrawing(),j.restore(),N||I){const V=W.canvas;N&&(A=l),I&&(P=c);const U=this.getSizeAndScale(A,this.ctx.canvas.width,_),H=this.getSizeAndScale(P,this.ctx.canvas.height,T),Q=U.size,J=H.size,re=e.cachedCanvases.getCanvas("pattern-workaround",Q,J),ye=re.context,Me=N?Math.floor(w/l):0,De=I?Math.floor(v/c):0;for(let Y=0;Y<=Me;Y++)for(let Se=0;Se<=De;Se++)ye.drawImage(V,Q*Y,J*Se,Q,J,0,0,Q,J);return{canvas:re.canvas,scaleX:U.scale,scaleY:H.scale,offsetX:u,offsetY:f}}return{canvas:W.canvas,scaleX:G.scale,scaleY:O.scale,offsetX:u,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(Wx.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),Ce.axialAlignedBoundingBox([t,r,s,i],Mt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case UN.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=a;break;case UN.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new yZ(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==Rn.SHADING&&(i=Ce.transform(i,t.baseTransform),this.matrix&&(i=Ce.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};Z(Wx,"MAX_PATTERN_SIZE",3e3);let GE=Wx;function ZZ({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=In.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=r>>3,f=r&7,m=n.length;t=new Uint32Array(t.buffer);let y=0;for(let w=0;w<s;w++){for(const b=e+u;e<b;e++){const x=e<m?n[e]:255;t[y++]=x&128?c:l,t[y++]=x&64?c:l,t[y++]=x&32?c:l,t[y++]=x&16?c:l,t[y++]=x&8?c:l,t[y++]=x&4?c:l,t[y++]=x&2?c:l,t[y++]=x&1?c:l}if(f===0)continue;const v=e<m?n[e++]:255;for(let b=0;b<f;b++)t[y++]=v&1<<7-b?c:l}return{srcPos:e,destPos:y}}const $N=16,jN=100,eee=15,VN=10,Er=16,bC=new DOMMatrix,Qr=new Float32Array(2),Th=new Float32Array([1/0,1/0,-1/0,-1/0]);function tee(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,o,a){e.transform(t,r,s,i,o,a),this.__originalTransform(t,r,s,i,o,a)},n.setTransform=function(t,r,s,i,o,a){e.setTransform(t,r,s,i,o,a),this.__originalSetTransform(t,r,s,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class nee{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function C0(n,e,t,r,s,i,o,a,l,c){const[u,f,m,y,w,v]=Mt(n);if(f===0&&m===0){const C=o*u+w,_=Math.round(C),T=a*y+v,A=Math.round(T),P=(o+l)*u+w,N=Math.abs(Math.round(P)-_)||1,I=(a+c)*y+v,M=Math.abs(Math.round(I)-A)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(y),_,A),n.drawImage(e,t,r,s,i,0,0,N,M),n.setTransform(u,f,m,y,w,v),[N,M]}if(u===0&&y===0){const C=a*m+w,_=Math.round(C),T=o*f+v,A=Math.round(T),P=(a+c)*m+w,N=Math.abs(Math.round(P)-_)||1,I=(o+l)*f+v,M=Math.abs(Math.round(I)-A)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,_,A),n.drawImage(e,t,r,s,i,0,0,M,N),n.setTransform(u,f,m,y,w,v),[M,N]}n.drawImage(e,t,r,s,i,o,a,l,c);const b=Math.hypot(u,f),x=Math.hypot(m,y);return[b*l,x*c]}class BN{constructor(e,t){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",xE);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",On.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Th.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Rn.FILL,t=null){const r=this.minMax.slice();if(e===Rn.STROKE){t||ft("Stroke bounding box must include transform."),Ce.singularValueDecompose2dScale(t,Qr);const s=Qr[0]*this.lineWidth/2,i=Qr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=Ce.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Th,0)}getClippedPathBoundingBox(e=Rn.FILL,t=null){return Ce.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function zN(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Er,i=(t-s)/Er,o=s===0?i:i+1,a=n.createImageData(r,Er);let l=0,c;const u=e.data,f=a.data;let m,y,w,v;if(e.kind===J0.GRAYSCALE_1BPP){const b=u.byteLength,x=new Uint32Array(f.buffer,0,f.byteLength>>2),C=x.length,_=r+7>>3,T=4294967295,A=In.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<i?Er:s,c=0,y=0;y<w;y++){const P=b-l;let N=0;const I=P>_?r:P*8-7,M=I&-8;let D=0,F=0;for(;N<M;N+=8)F=u[l++],x[c++]=F&128?T:A,x[c++]=F&64?T:A,x[c++]=F&32?T:A,x[c++]=F&16?T:A,x[c++]=F&8?T:A,x[c++]=F&4?T:A,x[c++]=F&2?T:A,x[c++]=F&1?T:A;for(;N<I;N++)D===0&&(F=u[l++],D=128),x[c++]=F&D?T:A,D>>=1}for(;c<C;)x[c++]=0;n.putImageData(a,0,m*Er)}}else if(e.kind===J0.RGBA_32BPP){for(y=0,v=r*Er*4,m=0;m<i;m++)f.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,y),y+=Er;m<o&&(v=r*s*4,f.set(u.subarray(l,l+v)),n.putImageData(a,0,y))}else if(e.kind===J0.RGB_24BPP)for(w=Er,v=r*w,m=0;m<o;m++){for(m>=i&&(w=s,v=r*w),c=0,y=v;y--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,m*Er)}else throw new Error(`bad image kind: ${e.kind}`)}function HN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Er,i=(t-s)/Er,o=s===0?i:i+1,a=n.createImageData(r,Er);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const m=f<i?Er:s;({srcPos:l}=ZZ({src:c,srcPos:l,dest:u,width:r,height:m,nonBlackColor:0})),n.putImageData(a,0,f*Er)}}function am(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function S0(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function GN(n,e){if(e)return!0;Ce.singularValueDecompose2dScale(n,Qr);const t=Math.fround(po.pixelRatio*wc.PDF_TO_CSS_UNITS);return Qr[0]<=t&&Qr[1]<=t}const ree=["butt","round","square"],see=["miter","round","bevel"],iee={},qN={};var vi,qE,WE,KE;const kk=class kk{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){k(this,vi);this.ctx=e,this.current=new BN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new nee(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Mt(this.compositeCtx))}this.ctx.save(),S0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Mt(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const c=l-a>VN&&typeof r=="function",u=c?Date.now()+eee:0;let f=0;const m=this.commonObjs,y=this.objs;let w;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,r),a;if(w=o[a],w!==Ax.dependency)this[w].apply(this,i[a]);else for(const v of i[a]){const b=v.startsWith("g_")?m:y;if(!b.has(v))return b.get(v,r),a}if(a++,a===l)return a;if(c&&++f>VN){if(Date.now()>u)return r(),a;f=0}}}endDrawing(){R(this,vi,qE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,vi,WE).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=s,c="prescale1",u,f;for(;i>2&&a>1||o>2&&l>1;){let m=a,y=l;i>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/m),o>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/y),u=this.cachedCanvases.getCanvas(c,m,y),f=u.context,f.clearRect(0,0,m,y),f.drawImage(e,0,0,a,l,0,0,m,y),e=u.canvas,a=m,l=y,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,o=this.current.patternFill,a=Mt(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const M=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(M),l||(l=new Map,this._cachedBitmapsMap.set(M,l));const D=l.get(c);if(D&&!o){const F=Math.round(Math.min(a[0],a[2])+a[4]),$=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:D,offsetX:F,offsetY:$}}u=D}u||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),HN(f.context,e));let m=Ce.transform(a,[1/r,0,0,-1/s,0,0]);m=Ce.transform(m,[1,0,0,1,0,-s]);const y=Th.slice();Ce.axialAlignedBoundingBox([0,0,r,s],m,y);const[w,v,b,x]=y,C=Math.round(b-w)||1,_=Math.round(x-v)||1,T=this.cachedCanvases.getCanvas("fillCanvas",C,_),A=T.context,P=w,N=v;A.translate(-P,-N),A.transform(...m),u||(u=this._scaleImage(f.canvas,Ai(A)),u=u.img,l&&o&&l.set(c,u)),A.imageSmoothingEnabled=GN(Mt(A),e.interpolate),C0(A,u,0,0,u.width,u.height,0,0,r,s),A.globalCompositeOperation="source-in";const I=Ce.transform(Ai(A),[1,0,0,1,-P,-N]);return A.fillStyle=o?i.getPattern(t,this,I,Rn.FILL):i,A.fillRect(0,0,r,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(N)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ree[e]}setLineJoin(e){this.ctx.lineJoin=see[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),am(this.suspendedCtx,i),tee(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),am(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,l,c,u,f){let m=e.canvas,y=l-u,w=c-f;if(o)if(y<0||w<0||y+r>m.width||w+s>m.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,s),x=b.context;x.drawImage(m,-y,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,r,s),x.globalCompositeOperation="source-over",m=b.canvas,y=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(y,w,r,s),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(y,w,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,r,s),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,y,w,r,s,l,c,r,s),t.restore()}save(){this.inSMaskMode&&am(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&am(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,o){this.ctx.transform(e,t,r,s,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[s]=t;if(!r){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,a=s.length;o<a;)switch(s[o++]){case x0.moveTo:i.moveTo(s[o++],s[o++]);break;case x0.lineTo:i.lineTo(s[o++],s[o++]);break;case x0.curveTo:i.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case x0.closePath:i.closePath();break;default:Ie(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=i}Ce.axialAlignedBoundingBox(r,Mt(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const i=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Ai(r),Rn.STROKE),i){const o=new Path2D;o.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(Rn.STROKE,Mt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const l=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=s.getPattern(r,this,Ai(r),Rn.FILL),l){const c=new Path2D;c.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),o&&r.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=iee}eoClip(){this.pendingClip=qN}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:o,y:a,fontSize:l,path:c}of e)r.addPath(c,new DOMMatrix(i).preMultiplySelf(s).translate(o,a).scale(l,-l));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||xE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<$N?c=$N:t>jN&&(c=jN),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,f=c&On.FILL_STROKE_MASK,m=!!(c&On.ADD_TO_PATH_FLAG),y=a.patternFill&&!l.missingFile,w=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||m||y||w)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||y||w){o.save(),o.translate(t,r),o.scale(u,-u);let b;if((f===On.FILL||f===On.FILL_STROKE)&&(s?(b=o.getTransform(),o.setTransform(...s),o.fill(R(this,vi,KE).call(this,v,b,s))):o.fill(v)),f===On.STROKE||f===On.FILL_STROKE)if(i){b||(b=o.getTransform()),o.setTransform(...i);const{a:x,b:C,c:_,d:T}=b,A=Ce.inverseTransform(i),P=Ce.transform([x,C,_,T,0,0],A);Ce.singularValueDecompose2dScale(P,Qr),o.lineWidth*=Math.max(Qr[0],Qr[1])/u,o.stroke(R(this,vi,KE).call(this,v,b,i))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(f===On.FILL||f===On.FILL_STROKE)&&o.fillText(e,t,r),(f===On.STROKE||f===On.FILL_STROKE)&&o.strokeText(e,t,r);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Mt(o),x:t,y:r,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return qe(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,m=r.vertical,y=m?1:-1,w=r.defaultVMetrics,v=s*t.fontMatrix[0],b=t.textRenderingMode===On.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let x,C;if(t.patternFill){i.save();const N=t.fillColor.getPattern(i,this,Ai(i),Rn.FILL);x=Mt(i),i.restore(),i.fillStyle=N}if(t.patternStroke){i.save();const N=t.strokeColor.getPattern(i,this,Ai(i),Rn.STROKE);C=Mt(i),i.restore(),i.strokeStyle=N}let _=t.lineWidth;const T=t.textMatrixScale;if(T===0||_===0){const N=t.textRenderingMode&On.FILL_STROKE_MASK;(N===On.STROKE||N===On.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=T;if(o!==1&&(i.scale(o,o),_/=o),i.lineWidth=_,r.isInvalidPDFjsFont){const N=[];let I=0;for(const M of e)N.push(M.unicode),I+=M.width;i.fillText(N.join(""),0,0),t.x+=I*v*u,i.restore(),this.compose();return}let A=0,P;for(P=0;P<f;++P){const N=e[P];if(typeof N=="number"){A+=y*N*s/1e3;continue}let I=!1;const M=(N.isSpace?l:0)+a,D=N.fontChar,F=N.accent;let $,G,O=N.width;if(m){const j=N.vmetric||w,z=-(N.vmetric?j[1]:O*.5)*v,V=j[2]*v;O=j?-j[0]:O,$=z/o,G=(A+V)/o}else $=A/o,G=0;if(r.remeasure&&O>0){const j=i.measureText(D).width*1e3/s*o;if(O<j&&this.isFontSubpixelAAEnabled){const z=O/j;I=!0,i.save(),i.scale(z,1),$/=z}else O!==j&&($+=(O-j)/2e3*s/o)}if(this.contentVisible&&(N.isInFont||r.missingFile)){if(b&&!F)i.fillText(D,$,G);else if(this.paintChar(D,$,G,x,C),F){const j=$+s*F.offset.x/o,z=G-s*F.offset.y/o;this.paintChar(F.fontChar,j,z,x,C)}}const W=m?O*v-M*c:O*v+M*c;A+=W,I&&i.restore()}m?t.y-=A:t.x+=A*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,o=r.fontDirection,a=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,f=r.fontMatrix||xE,m=e.length,y=r.textRenderingMode===On.INVISIBLE;let w,v,b,x;if(!(y||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(u,o),w=0;w<m;++w){if(v=e[w],typeof v=="number"){x=a*v*i/1e3,this.ctx.translate(x,0),r.x+=x*u;continue}const C=(v.isSpace?c:0)+l,_=s.charProcOperatorList[v.operatorListId];_?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(_),this.restore()):Ie(`Type3 character "${v.operatorListId}" is not available.`);const T=[v.width,0];Ce.applyTransform(T,f),b=T[0]*i+C,t.translate(b,0),r.x+=b*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,o){const a=new Path2D;a.rect(r,s,i-r,o-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||Mt(this.ctx),s={createCanvasGraphics:i=>new kk(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new GE(e,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=QZ(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Ai(t),Rn.SHADING);const s=Ai(t);if(s){const{width:i,height:o}=t.canvas,a=Th.slice();Ce.axialAlignedBoundingBox([0,0,i,o],s,a);const[l,c,u,f]=a;this.ctx.fillRect(l,c,u-l,f-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ft("Should not call beginInlineImage")}beginImageData(){ft("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Mt(this.ctx),t)){Ce.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,s,i,o]=t,a=new Path2D;a.rect(r,s,i-r,o-s),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||o_("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const r=Mt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Th.slice();Ce.axialAlignedBoundingBox(e.bbox,Mt(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=Ce.intersect(s,i)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),m=f.context;m.translate(-o,-a),m.transform(...r);let y=new Path2D;const[w,v,b,x]=e.bbox;if(y.rect(w,v,b-w,x-v),e.matrix){const C=new Path2D;C.addPath(y,new DOMMatrix(e.matrix)),y=C}m.clip(y),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),am(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Mt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Th.slice();Ce.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(R(this,vi,qE).call(this),S0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,Ce.singularValueDecompose2dScale(Mt(this.ctx),Qr);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Qr[0],0,0,-Qr[1],0,a*Qr[1]),S0(this.ctx)}else{S0(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new BN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,vi,WE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Mt(a);a.transform(t,r,s,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const m=Ce.transform(l,[t,r,s,i,o[u],o[u+1]]);a.drawImage(c.canvas,m[4],m[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const m=this.getObject(o,i);HN(f,m),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,Ai(t),Rn.FILL):r,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),C0(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Ie("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,r,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;this.save();const{filter:i}=s;i!=="none"&&i!==""&&(s.filter="none"),s.scale(1/t,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,r).context;zN(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,Ai(s));s.imageSmoothingEnabled=GN(Mt(s),e.interpolate),C0(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;zN(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),C0(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(r||(this.pendingClip===qN?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Mt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),u=Math.hypot(s,i);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(s||1)*i,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(i,o),bC.a=1/i,bC.d=1/o;const l=new Path2D;if(l.addPath(e,bC),a.length>0){const c=Math.max(i,o);r.setLineDash(a.map(u=>u/c)),r.lineDashOffset/=c}r.lineWidth=s||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};vi=new WeakSet,qE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},WE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},KE=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Vh=kk;for(const n in Ax)Vh.prototype[n]!==void 0&&(Vh.prototype[Ax[n]]=Vh.prototype[n]);var hy,fy;class pa{static get workerPort(){return d(this,hy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,hy,e)}static get workerSrc(){return d(this,fy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,fy,e)}}hy=new WeakMap,fy=new WeakMap,k(pa,hy,null),k(pa,fy,"");var bf,py;class oee{constructor({parsedData:e,rawData:t}){k(this,bf);k(this,py);E(this,bf,e),E(this,py,t)}getRaw(){return d(this,py)}get(e){return d(this,bf).get(e)??null}[Symbol.iterator](){return d(this,bf).entries()}}bf=new WeakMap,py=new WeakMap;const uh=Symbol("INTERNAL");var my,gy,yy,_f;class aee{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){k(this,my,!1);k(this,gy,!1);k(this,yy,!1);k(this,_f,!0);E(this,my,!!(e&Kr.DISPLAY)),E(this,gy,!!(e&Kr.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(d(this,yy))return d(this,_f);if(!d(this,_f))return!1;const{print:e,view:t}=this.usage;return d(this,my)?(t==null?void 0:t.viewState)!=="OFF":d(this,gy)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==uh&&ft("Internal method `_setVisible` called."),E(this,yy,r),E(this,_f,t)}}my=new WeakMap,gy=new WeakMap,yy=new WeakMap,_f=new WeakMap;var Nl,dt,Cf,Sf,vy,YE;class lee{constructor(e,t=Kr.DISPLAY){k(this,vy);k(this,Nl,null);k(this,dt,new Map);k(this,Cf,null);k(this,Sf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,Sf,e.order);for(const r of e.groups)d(this,dt).set(r.id,new aee(t,r));if(e.baseState==="OFF")for(const r of d(this,dt).values())r._setVisible(uh,!1);for(const r of e.on)d(this,dt).get(r)._setVisible(uh,!0);for(const r of e.off)d(this,dt).get(r)._setVisible(uh,!1);E(this,Cf,this.getHash())}}isVisible(e){if(d(this,dt).size===0)return!0;if(!e)return o_("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,dt).has(e.id)?d(this,dt).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,vy,YE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,dt).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(d(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,dt).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!d(this,dt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,dt).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!d(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,dt).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(d(this,dt).get(t).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=d(this,dt).get(e);if(!s){Ie(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((i=d(this,dt).get(a))==null||i._setVisible(uh,!1,!0));s._setVisible(uh,!!t,!0),E(this,Nl,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=d(this,dt).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}E(this,Nl,null)}get hasInitialVisibility(){return d(this,Cf)===null||this.getHash()===d(this,Cf)}getOrder(){return d(this,dt).size?d(this,Sf)?d(this,Sf).slice():[...d(this,dt).keys()]:null}getGroup(e){return d(this,dt).get(e)||null}getHash(){if(d(this,Nl)!==null)return d(this,Nl);const e=new EV;for(const[t,r]of d(this,dt))e.update(`${t}:${r.visible}`);return E(this,Nl,e.hexdigest())}[Symbol.iterator](){return d(this,dt).entries()}}Nl=new WeakMap,dt=new WeakMap,Cf=new WeakMap,Sf=new WeakMap,vy=new WeakSet,YE=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=R(this,vy,YE).call(this,i);else if(d(this,dt).has(i))o=d(this,dt).get(i).visible;else return Ie(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class cee{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Xt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new uee(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new dee(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class uee{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=lk(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dee{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hee(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=o(n),t){const u=c(t);return i(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),i(u)}function r(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(u,{fatal:!0}),y=Iv(f);f=m.decode(y),e=!1}catch{}}return f}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function o(u){const f=[];let m;const y=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(u))!==null;){let[,v,b,x]=m;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[b,x]}const w=[];for(let v=0;v<f.length&&v in f;++v){let[b,x]=f[v];x=a(x),b&&(x=unescape(x),v===0&&(x=l(x))),w.push(x)}return w.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let m=0;m<f.length;++m){const y=f[m].indexOf('"');y!==-1&&(f[m]=f[m].slice(0,y),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const m=u.slice(0,f),w=u.slice(f+1).replace(/^[^']*'/,"");return s(m,w)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,b){return String.fromCharCode(parseInt(b,16))}),s(m,w);try{w=atob(w)}catch{}return s(m,w)})}return""}function OV(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function l_(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function UV({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function $V(n){const e=n.get("Content-Disposition");if(e){let t=hee(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(lk(t))return t}return null}function Fv(n,e){return new kx(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function jV(n){return n===200||n===206}function VV(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function BV(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ie(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class fee{constructor(e){Z(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=OV(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new pee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new mee(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class pee{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,VV(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=l_(i.url),!jV(i.status))throw Fv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=UV({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=$V(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:BV(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class mee{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const o=s.url;fetch(o,VV(i,this._withCredentials,this._abortController)).then(a=>{const l=l_(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!jV(a.status))throw Fv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:BV(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const _C=200,CC=206;function gee(n){const e=n.response;return typeof e!="string"?e:Iv(e).buffer}class yee{constructor({url:e,httpHeaders:t,withCredentials:r}){Z(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=OV(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=CC):s.expectedStatus=_C,t.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||_C;if(!(i===_C&&r.expectedStatus===CC)&&i!==r.expectedStatus){r.onError(s.status);return}const a=gee(s);if(i===CC){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:a}):(Ie('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class vee{constructor(e){this._source=e,this._manager=new yee(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new wee(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new xee(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class wee{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=l_(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=UV({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=$V(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Fv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xee{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=l_((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Fv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bee=/^[a-z][a-z0-9\-+.]+:/i;function _ee(n){if(bee.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Cee{constructor(e){this.source=e,this.url=_ee(e.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new See(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Eee(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class See{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Fv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Eee{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lm=Symbol("INITIAL_DATA");var Or,wy,JE;class zV{constructor(){k(this,wy);k(this,Or,Object.create(null))}get(e,t=null){if(t){const s=R(this,wy,JE).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=d(this,Or)[e];if(!r||r.data===lm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=d(this,Or)[e];return!!t&&t.data!==lm}delete(e){const t=d(this,Or)[e];return!t||t.data===lm?!1:(delete d(this,Or)[e],!0)}resolve(e,t=null){const r=R(this,wy,JE).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in d(this,Or)){const{data:r}=d(this,Or)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}E(this,Or,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,Or)){const{data:t}=d(this,Or)[e];t!==lm&&(yield[e,t])}}}Or=new WeakMap,wy=new WeakSet,JE=function(e){var t;return(t=d(this,Or))[e]||(t[e]={...Promise.withResolvers(),data:lm})};const Tee=1e5,WN=30;var TM,Il,br,xy,by,Ru,Wo,_y,Cy,Pu,Ef,Tf,Ml,Af,Sy,kf,Nu,Ey,Ty,Rf,Iu,Ay,Dl,Pf,La,HV,GV,XE,ss,aw,QE,qV,WV;const en=class en{constructor({textContentSource:e,container:t,viewport:r}){k(this,La);k(this,Il,Promise.withResolvers());k(this,br,null);k(this,xy,!1);k(this,by,!!((TM=globalThis.FontInspector)!=null&&TM.enabled));k(this,Ru,null);k(this,Wo,null);k(this,_y,0);k(this,Cy,0);k(this,Pu,null);k(this,Ef,null);k(this,Tf,0);k(this,Ml,0);k(this,Af,Object.create(null));k(this,Sy,[]);k(this,kf,null);k(this,Nu,[]);k(this,Ey,new WeakMap);k(this,Ty,null);var l;if(e instanceof ReadableStream)E(this,kf,e);else if(typeof e=="object")E(this,kf,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,br,E(this,Ef,t)),E(this,Ml,r.scale*po.pixelRatio),E(this,Tf,r.rotation),E(this,Wo,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;E(this,Ty,[1,0,0,-1,-o,a+i]),E(this,Cy,s),E(this,_y,i),R(l=en,ss,qV).call(l),Id(t,r),d(this,Il).promise.finally(()=>{d(en,Pf).delete(this),E(this,Wo,null),E(this,Af,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=In.platform;return qe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Pu).read().then(({value:t,done:r})=>{if(r){d(this,Il).resolve();return}d(this,Ru)??E(this,Ru,t.lang),Object.assign(d(this,Af),t.styles),R(this,La,HV).call(this,t.items),e()},d(this,Il).reject)};return E(this,Pu,d(this,kf).getReader()),d(en,Pf).add(this),e(),d(this,Il).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*po.pixelRatio,s=e.rotation;if(s!==d(this,Tf)&&(t==null||t(),E(this,Tf,s),Id(d(this,Ef),{rotation:s})),r!==d(this,Ml)){t==null||t(),E(this,Ml,r);const o={div:null,properties:null,ctx:R(i=en,ss,aw).call(i,d(this,Ru))};for(const a of d(this,Nu))o.properties=d(this,Ey).get(a),o.div=a,R(this,La,XE).call(this,o)}}cancel(){var t;const e=new vc("TextLayer task cancelled.");(t=d(this,Pu))==null||t.cancel(e).catch(()=>{}),E(this,Pu,null),d(this,Il).reject(e)}get textDivs(){return d(this,Nu)}get textContentItemsStr(){return d(this,Sy)}static cleanup(){if(!(d(this,Pf).size>0)){d(this,Rf).clear();for(const{canvas:e}of d(this,Iu).values())e.remove();d(this,Iu).clear()}}};Il=new WeakMap,br=new WeakMap,xy=new WeakMap,by=new WeakMap,Ru=new WeakMap,Wo=new WeakMap,_y=new WeakMap,Cy=new WeakMap,Pu=new WeakMap,Ef=new WeakMap,Tf=new WeakMap,Ml=new WeakMap,Af=new WeakMap,Sy=new WeakMap,kf=new WeakMap,Nu=new WeakMap,Ey=new WeakMap,Ty=new WeakMap,Rf=new WeakMap,Iu=new WeakMap,Ay=new WeakMap,Dl=new WeakMap,Pf=new WeakMap,La=new WeakSet,HV=function(e){var s,i;if(d(this,xy))return;(i=d(this,Wo)).ctx??(i.ctx=R(s=en,ss,aw).call(s,d(this,Ru)));const t=d(this,Nu),r=d(this,Sy);for(const o of e){if(t.length>Tee){Ie("Ignoring additional textDivs for performance reasons."),E(this,xy,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,br);E(this,br,document.createElement("span")),d(this,br).classList.add("markedContent"),o.id!==null&&d(this,br).setAttribute("id",`${o.id}`),a.append(d(this,br))}else o.type==="endMarkedContent"&&E(this,br,d(this,br).parentNode);continue}r.push(o.str),R(this,La,GV).call(this,o)}},GV=function(e){var v;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Nu).push(t);const s=Ce.transform(d(this,Ty),e.transform);let i=Math.atan2(s[1],s[0]);const o=d(this,Af)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=d(this,by)&&o.fontSubstitution||o.fontFamily;a=en.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),c=l*R(v=en,ss,WV).call(v,a,o,d(this,Ru));let u,f;i===0?(u=s[4],f=s[5]-c):(u=s[4]+c*Math.sin(i),f=s[5]-c*Math.cos(i));const m="calc(var(--total-scale-factor) *",y=t.style;d(this,br)===d(this,Ef)?(y.left=`${(100*u/d(this,Cy)).toFixed(2)}%`,y.top=`${(100*f/d(this,_y)).toFixed(2)}%`):(y.left=`${m}${u.toFixed(2)}px)`,y.top=`${m}${f.toFixed(2)}px)`),y.fontSize=`${m}${(d(en,Dl)*l).toFixed(2)}px)`,y.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,by)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);b!==x&&Math.max(b,x)/Math.min(b,x)>1.5&&(w=!0)}if(w&&(r.canvasWidth=o.vertical?e.height:e.width),d(this,Ey).set(t,r),d(this,Wo).div=t,d(this,Wo).properties=r,R(this,La,XE).call(this,d(this,Wo)),r.hasText&&d(this,br).append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),d(this,br).append(b)}},XE=function(e){var a;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let o="";if(d(en,Dl)>1&&(o=`scale(${1/d(en,Dl)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:u}=r;R(a=en,ss,QE).call(a,s,u*d(this,Ml),l);const{width:f}=s.measureText(t.textContent);f>0&&(o=`scaleX(${c*d(this,Ml)/f}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(i.transform=o)},ss=new WeakSet,aw=function(e=null){let t=d(this,Iu).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Iu).set(e,t),d(this,Ay).set(t,{size:0,family:""})}return t},QE=function(e,t,r){const s=d(this,Ay).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},qV=function(){if(d(this,Dl)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,Dl,e.getBoundingClientRect().height),e.remove()},WV=function(e,t,r){const s=d(this,Rf).get(e);if(s)return s;const i=R(this,ss,aw).call(this,r);i.canvas.width=i.canvas.height=WN,R(this,ss,QE).call(this,i,WN,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return a?c=a/(a+l):(In.platform.isFirefox&&Ie("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),d(this,Rf).set(e,c),c},k(en,ss),k(en,Rf,new Map),k(en,Iu,new Map),k(en,Ay,new WeakMap),k(en,Dl,null),k(en,Pf,new Set);let Ng=en;class Ig{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(Ig.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Aee=100;function KV(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ZE,{docId:t}=e,r=n.url?FZ(n.url):null,s=n.data?OZ(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof YV?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof Mg?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!a_(n.docBaseUrl)?n.docBaseUrl:null,y=b0(n.cMapUrl),w=n.cMapPacked!==!1,v=n.CMapReaderFactory||(er?GZ:LN),b=b0(n.iccUrl),x=b0(n.standardFontDataUrl),C=n.StandardFontDataFactory||(er?qZ:FN),_=b0(n.wasmUrl),T=n.WasmFactory||(er?WZ:ON),A=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,I=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!er,M=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!er&&(In.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:er,$=n.fontExtraProperties===!0,G=n.enableXfa===!0,O=n.ownerDocument||globalThis.document,W=n.disableRange===!0,j=n.disableStream===!0,z=n.disableAutoFetch===!0,V=n.pdfBug===!0,U=n.CanvasFactory||(er?HZ:VZ),H=n.FilterFactory||(er?zZ:BZ),Q=n.enableHWA===!0,J=n.useWasm!==!1,re=l?l.length:n.length??NaN,ye=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!er&&!F,Me=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===LN&&C===FN&&T===ON&&y&&x&&_&&Cm(y,document.baseURI)&&Cm(x,document.baseURI)&&Cm(_,document.baseURI)),De=null;pZ(f);const Y={canvasFactory:new U({ownerDocument:O,enableHWA:Q}),filterFactory:new H({docId:t,ownerDocument:O}),cMapReaderFactory:Me?null:new v({baseUrl:y,isCompressed:w}),standardFontDataFactory:Me?null:new C({baseUrl:x}),wasmFactory:Me?null:new T({baseUrl:_})};u||(u=Mg.create({verbosity:f,port:pa.workerPort}),e._worker=u);const Se={docId:t,apiVersion:"5.3.93",data:s,password:a,disableAutoFetch:z,rangeChunkSize:c,length:re,docBaseUrl:m,enableXfa:G,evaluatorOptions:{maxImageSize:P,disableFontFace:F,ignoreErrors:A,isEvalSupported:N,isOffscreenCanvasSupported:I,isImageDecoderSupported:M,canvasMaxAreaInBytes:D,fontExtraProperties:$,useSystemFonts:ye,useWasm:J,useWorkerFetch:Me,cMapUrl:y,iccUrl:b,standardFontDataUrl:x,wasmUrl:_}},se={ownerDocument:O,pdfBug:V,styleElement:De,loadingParams:{disableAutoFetch:z,enableXfa:G}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const xe=u.messageHandler.sendWithPromise("GetDocRequest",Se,s?[s.buffer]:null);let Te;if(l)Te=new cee(l,{disableRange:W,disableStream:j});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ke=Cm(r)?fee:er?Cee:vee;Te=new ke({url:r,length:re,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:W,disableStream:j})}return xe.then(ke=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Nt=new km(t,ke,u.port),bn=new Pee(Nt,e,Te,se,Y);e._transport=bn,Nt.send("Ready",null)})}).catch(e._capability.reject),e}var Kx;const Yx=class Yx{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${un(Yx,Kx)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Kx=new WeakMap,k(Yx,Kx,0);let ZE=Yx;var Mu,ky,Ry,Py,Ny;class YV{constructor(e,t,r=!1,s=null){k(this,Mu,Promise.withResolvers());k(this,ky,[]);k(this,Ry,[]);k(this,Py,[]);k(this,Ny,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){d(this,Ny).push(e)}addProgressListener(e){d(this,Py).push(e)}addProgressiveReadListener(e){d(this,Ry).push(e)}addProgressiveDoneListener(e){d(this,ky).push(e)}onDataRange(e,t){for(const r of d(this,Ny))r(e,t)}onDataProgress(e,t){d(this,Mu).promise.then(()=>{for(const r of d(this,Py))r(e,t)})}onDataProgressiveRead(e){d(this,Mu).promise.then(()=>{for(const t of d(this,Ry))t(e)})}onDataProgressiveDone(){d(this,Mu).promise.then(()=>{for(const e of d(this,ky))e()})}transportReady(){d(this,Mu).resolve()}requestDataRange(e,t){ft("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Mu=new WeakMap,ky=new WeakMap,Ry=new WeakMap,Py=new WeakMap,Ny=new WeakMap;class kee{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return qe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ko,Du,Mm;class Ree{constructor(e,t,r,s=!1){k(this,Du);k(this,Ko,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new IN:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new zV,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Dv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return qe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=il.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:f=!1}){var T,A;(T=this._stats)==null||T.time("Overall");const m=this._transport.getRenderingIntent(r,s,u,f),{renderingIntent:y,cacheKey:w}=m;E(this,Ko,!1),a||(a=this._transport.getOptionalContentConfig(y));let v=this._intentStates.get(w);v||(v=Object.create(null),this._intentStates.set(w,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(y&Kr.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(m));const x=P=>{var N;v.renderTasks.delete(C),b&&E(this,Ko,!0),R(this,Du,Mm).call(this),P?(C.capability.reject(P),this._abortOperatorList({intentState:v,reason:P instanceof Error?P:new Error(P)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new eT({callback:x,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(C);const _=C.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([P,N])=>{var I;if(this.destroyed){x();return}if((I=this._stats)==null||I.time("Rendering"),!(N.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:P,optionalContentConfig:N}),C.operatorListChanged()}).catch(x),_}getOperatorList({intent:e="display",annotationMode:t=il.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var c;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,r,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Ig.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),E(this,Ko,!1),Promise.all(e)}cleanup(e=!1){E(this,Ko,!0);const t=R(this,Du,Mm).call(this);return e&&t&&this._stats&&(this._stats=new IN),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&R(this,Du,Mm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:f,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),u())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();R(this,Du,Mm).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ak){let s=Aee;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new vc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ko=new WeakMap,Du=new WeakSet,Mm=function(){if(!d(this,Ko)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Ko,!1),!0};var Ll,Ks,Yo,Lu,Jx,Fu,Ou,or,lw,JV,XV,Dm,Nf,cw;const Et=class Et{constructor({name:e=null,port:t=null,verbosity:r=mZ()}={}){k(this,or);k(this,Ll,Promise.withResolvers());k(this,Ks,null);k(this,Yo,null);k(this,Lu,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(d(Et,Ou).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(Et,Ou).set(t,this),R(this,or,JV).call(this,t)}else R(this,or,XV).call(this)}get promise(){return d(this,Ll).promise}get port(){return d(this,Yo)}get messageHandler(){return d(this,Ks)}destroy(){var e,t;this.destroyed=!0,(e=d(this,Lu))==null||e.terminate(),E(this,Lu,null),d(Et,Ou).delete(d(this,Yo)),E(this,Yo,null),(t=d(this,Ks))==null||t.destroy(),E(this,Ks,null)}static create(e){const t=d(this,Ou).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Et(e)}static get workerSrc(){if(pa.workerSrc)return pa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return qe(this,"_setupFakeWorkerGlobal",(async()=>d(this,Nf,cw)?d(this,Nf,cw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ll=new WeakMap,Ks=new WeakMap,Yo=new WeakMap,Lu=new WeakMap,Jx=new WeakMap,Fu=new WeakMap,Ou=new WeakMap,or=new WeakSet,lw=function(){d(this,Ll).resolve(),d(this,Ks).send("configure",{verbosity:this.verbosity})},JV=function(e){E(this,Yo,e),E(this,Ks,new km("main","worker",e)),d(this,Ks).on("ready",()=>{}),R(this,or,lw).call(this)},XV=function(){if(d(Et,Fu)||d(Et,Nf,cw)){R(this,or,Dm).call(this);return}let{workerSrc:e}=Et;try{Et._isSameOrigin(window.location,e)||(e=Et._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new km("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?d(this,Ll).reject(new Error("Worker was destroyed")):R(this,or,Dm).call(this)},i=new AbortController;t.addEventListener("error",()=>{d(this,Lu)||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}E(this,Ks,r),E(this,Yo,t),E(this,Lu,t),R(this,or,lw).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{R(this,or,Dm).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{o_("The worker has been disabled.")}R(this,or,Dm).call(this)},Dm=function(){d(Et,Fu)||(Ie("Setting up fake worker."),E(Et,Fu,!0)),Et._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Ll).reject(new Error("Worker was destroyed"));return}const t=new jZ;E(this,Yo,t);const r=`fake${un(Et,Jx)._++}`,s=new km(r+"_worker",r,t);e.setup(s,t),E(this,Ks,new km(r,r+"_worker",t)),R(this,or,lw).call(this)}).catch(e=>{d(this,Ll).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Nf=new WeakSet,cw=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Et,Nf),k(Et,Jx,0),k(Et,Fu,!1),k(Et,Ou,new WeakMap),er&&(E(Et,Fu,!0),pa.workerSrc||(pa.workerSrc="./pdf.worker.mjs")),Et._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},Et._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Et.fromPort=e=>{if(AZ("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Et.create(e)};let Mg=Et;var Jo,zi,If,Mf,Xo,Uu,Lm;class Pee{constructor(e,t,r,s,i){k(this,Uu);k(this,Jo,new Map);k(this,zi,new Map);k(this,If,new Map);k(this,Mf,new Map);k(this,Xo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new zV,this.fontLoader=new DZ({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return qe(this,"annotationStorage",new dk)}getRenderingIntent(e,t=il.ENABLE,r=null,s=!1,i=!1){let o=Kr.DISPLAY,a=jE;switch(e){case"any":o=Kr.ANY;break;case"display":break;case"print":o=Kr.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Kr.PRINT&&r instanceof AV?r:this.annotationStorage;switch(t){case il.DISABLE:o+=Kr.ANNOTATIONS_DISABLE;break;case il.ENABLE:break;case il.ENABLE_FORMS:o+=Kr.ANNOTATIONS_FORMS;break;case il.ENABLE_STORAGE:o+=Kr.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=Kr.IS_EDITING),i&&(o+=Kr.OPLIST);const{ids:c,hash:u}=l.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=d(this,Xo))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of d(this,zi).values())e.push(s._destroy());d(this,zi).clear(),d(this,If).clear(),d(this,Mf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Jo).clear(),this.filterFactory.destroy(),Ng.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new vc("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Xt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{Xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}Xt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new kee(r,this))}),e.on("DocException",r=>{t._capability.reject(gr(r))}),e.on("PasswordRequest",r=>{E(this,Xo,Promise.withResolvers());try{if(!t.onPassword)throw gr(r);const s=i=>{i instanceof Error?d(this,Xo).reject(i):d(this,Xo).resolve({password:i})};t.onPassword(s,r.code)}catch(s){d(this,Xo).reject(s)}return d(this,Xo).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;d(this,zi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const u=i.error;Ie(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,l=new LZ(i,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"CopyLocalImage":const{imageRef:c}=i;Xt(c,"The imageRef must be defined.");for(const u of d(this,zi).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var l;if(this.destroyed)return;const a=d(this,zi).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=d(this,If).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&d(this,Mf).set(i.refStr,e);const o=new Ree(t,i,this,this._params.pdfBug);return d(this,zi).set(t,o),o});return d(this,If).set(t,s),s}getPageIndex(e){return VE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,Uu,Lm).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Uu,Lm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,Uu,Lm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,Uu,Lm).call(this,"GetOptionalContentConfig").then(t=>new lee(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,Jo).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new oee(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,Jo).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,zi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Jo).clear(),this.filterFactory.destroy(!0),Ng.cleanup()}}cachedPageNumber(e){if(!VE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Mf).get(t)??null}}Jo=new WeakMap,zi=new WeakMap,If=new WeakMap,Mf=new WeakMap,Xo=new WeakMap,Uu=new WeakSet,Lm=function(e,t=null){const r=d(this,Jo).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return d(this,Jo).set(e,s),s};var Fl;class Nee{constructor(e){k(this,Fl,null);Z(this,"onContinue",null);Z(this,"onError",null);E(this,Fl,e)}get promise(){return d(this,Fl).capability.promise}cancel(e=0){d(this,Fl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,Fl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,Fl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Fl=new WeakMap;var Ol,$u;const Vc=class Vc{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:m=null}){k(this,Ol,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Nee(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(Vc,$u).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Vc,$u).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:o}=this.params;this.gfx=new Vh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),d(this,Ol)&&(window.cancelAnimationFrame(d(this,Ol)),E(this,Ol,null)),d(Vc,$u).delete(this._canvas),e||(e=new ak(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Ol,window.requestAnimationFrame(()=>{E(this,Ol,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Vc,$u).delete(this._canvas),this.callback())))}};Ol=new WeakMap,$u=new WeakMap,k(Vc,$u,new WeakSet);let eT=Vc;const Iee="5.3.93",Mee="cbeef3233";function KN(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function cm(n){return Math.max(0,Math.min(255,255*n))}class YN{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=cm(e),[e,e,e]}static G_HTML([e]){const t=KN(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(cm)}static RGB_HTML(e){return`#${e.map(KN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[cm(1-Math.min(1,e+s)),cm(1-Math.min(1,r+s)),cm(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class Dee{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ft("Abstract method `_createSVG` called.")}}class Nx extends Dee{_createSVG(e){return document.createElementNS(Eo,e)}}class QV{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var f,m;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=y}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const y=document.createTextNode(s.value);o.append(y),a&&Ig.shouldBuildText(s.name)&&c.push(y)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[y,w,v]=u.at(-1);if(w+1===y.children.length){u.pop();continue}const b=y.children[++u.at(-1)[1]];if(b===null)continue;const{name:x}=b;if(x==="#text"){const _=document.createTextNode(b.value);c.push(_),v.append(_);continue}const C=(f=b==null?void 0:b.attributes)!=null&&f.xmlns?document.createElementNS(b.attributes.xmlns,x):document.createElement(x);if(v.append(C),b.attributes&&this.setAttributes({html:C,element:b,storage:t,intent:i,linkService:r}),((m=b.children)==null?void 0:m.length)>0)u.push([b,-1,C]);else if(b.value){const _=document.createTextNode(b.value);a&&Ig.shouldBuildText(x)&&c.push(_),C.append(_)}}for(const y of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Lee=9,Dd=new WeakSet;class JN{static create(e){switch(e.data.annotationType){case Wt.LINK:return new ZV(e);case Wt.TEXT:return new Fee(e);case Wt.WIDGET:switch(e.data.fieldType){case"Tx":return new Oee(e);case"Btn":return e.data.radioButton?new nB(e):e.data.checkBox?new $ee(e):new jee(e);case"Ch":return new Vee(e);case"Sig":return new Uee(e)}return new Hd(e);case Wt.POPUP:return new nT(e);case Wt.FREETEXT:return new aB(e);case Wt.LINE:return new zee(e);case Wt.SQUARE:return new Hee(e);case Wt.CIRCLE:return new Gee(e);case Wt.POLYLINE:return new lB(e);case Wt.CARET:return new Wee(e);case Wt.INK:return new pk(e);case Wt.POLYGON:return new qee(e);case Wt.HIGHLIGHT:return new cB(e);case Wt.UNDERLINE:return new Kee(e);case Wt.SQUIGGLY:return new Yee(e);case Wt.STRIKEOUT:return new Jee(e);case Wt.STAMP:return new uB(e);case Wt.FILEATTACHMENT:return new Xee(e);default:return new Gt(e)}}}var ju,Df,Lf,Iy,tT;const Rk=class Rk{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){k(this,Iy);k(this,ju,null);k(this,Df,!1);k(this,Lf,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Rk._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;d(this,ju)||E(this,ju,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,Iy,tT).call(this,t),(r=d(this,Lf))==null||r.popup.updateEdited(e)}resetEdited(){var e;d(this,ju)&&(R(this,Iy,tT).call(this,d(this,ju).rect),(e=d(this,Lf))==null||e.popup.resetEdited(),E(this,ju,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Hd||(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof nT){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(v>0||b>0){const C=`calc(${v}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof nB){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=C}switch(t.borderStyle.style){case oh.SOLID:o.borderStyle="solid";break;case oh.DASHED:o.borderStyle="dashed";break;case oh.BEVELED:Ie("Unimplemented border style: beveled");break;case oh.INSET:Ie("Unimplemented border style: inset");break;case oh.UNDERLINE:o.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(E(this,Df,!0),o.borderColor=Ce.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const c=Ce.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:f,pageX:m,pageY:y}=s.rawDims;o.left=`${100*(c[0]-m)/u}%`,o.top=`${100*(c[1]-y)/f}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(w,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=YN[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:YN[`${o}_rgb`](a)})};return qe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,b,x,C]=e.subarray(2,6);if(s===v&&i===b&&t===x&&r===C)return}const{style:o}=this.container;let a;if(d(this,Df)){const{borderColor:v,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=u.createElement("defs");f.append(m);const y=u.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let v=2,b=e.length;v<b;v+=8){const x=e[v],C=e[v+1],_=e[v+2],T=e[v+3],A=u.createElement("rect"),P=(_-t)/l,N=(i-C)/c,I=(x-_)/l,M=(C-T)/c;A.setAttribute("x",P),A.setAttribute("y",N),A.setAttribute("width",I),A.setAttribute("height",M),y.append(A),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${N}" width="${I}" height="${M}"/>`)}d(this,Df)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=E(this,Lf,new nT({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ft("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Dd.has(c)){Ie(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Dd.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ju=new WeakMap,Df=new WeakMap,Lf=new WeakMap,Iy=new WeakSet,tT=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let Gt=Rk;var es,Fc,eB,tB;class ZV extends Gt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});k(this,es);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(R(this,es,eB).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(R(this,es,tB).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&R(this,es,Fc).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),R(this,es,Fc).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,es,Fc).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),R(this,es,Fc).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:o,include:a}=r,l=[];if(i.length!==0||o.length!==0){const m=new Set(o);for(const y of i){const w=this._fieldObjects[y]||[];for(const{id:v}of w)m.add(v)}for(const y of Object.values(this._fieldObjects))for(const w of y)m.has(w.id)===a&&l.push(w)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,u=[];for(const m of l){const{id:y}=m;switch(u.push(y),m.type){case"text":{const v=m.defaultValue||"";c.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;c.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";c.setValue(y,{value:v});break}default:continue}const w=document.querySelector(`[data-element-id="${y}"]`);if(w){if(!Dd.has(w)){Ie(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}es=new WeakSet,Fc=function(){this.container.setAttribute("data-internal-link","")},eB=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},R(this,es,Fc).call(this)},tB=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),R(this,es,Fc).call(this)};class Fee extends Gt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Hd extends Gt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return In.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ce.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Lee,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(gC*s))||1,f=c/u;o=Math.min(s,l(f/gC))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/gC))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=Ce.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Oee extends Hd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Dd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const f=this.data.dateFormat||this.data.timeFormat;f&&(r.title=f),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(r,"value",y.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",y=>{const w=this.data.defaultFieldValue??"";r.value=u.userValue=w,u.formattedValue=null});let m=y=>{const{formattedValue:w}=u;w!=null&&(y.target.value=w),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",w=>{var b;if(u.focused)return;const{target:v}=w;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const v={value(b){u.userValue=b.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),b.target.value=u.userValue},formattedValue(b){const{formattedValue:x}=b.detail;u.formattedValue=x,x!=null&&b.target!==document.activeElement&&(b.target.value=x),e.setValue(t,{formattedValue:x})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var T;const{charLimit:x}=b.detail,{target:C}=b;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let _=u.userValue;!_||_.length<=x||(_=_.slice(0,x),C.value=u.userValue=_,e.setValue(t,{value:_}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(v,w)}),r.addEventListener("keydown",w=>{var x;u.commitKey=1;let v=-1;if(w.key==="Escape"?v=0:w.key==="Enter"&&!this.data.multiLine?v=2:w.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:b}=w.target;u.lastCommittedValue!==b&&(u.lastCommittedValue=b,u.userValue=b,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const y=m;m=null,r.addEventListener("blur",w=>{var b,x;if(!u.focused||!w.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(u.focused=!1);const{value:v}=w.target;u.userValue=v,u.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),y(w)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",w=>{var P;u.lastCommittedValue=null;const{data:v,target:b}=w,{value:x,selectionStart:C,selectionEnd:_}=b;let T=C,A=_;switch(w.inputType){case"deleteWordBackward":{const N=x.substring(0,C).match(/\w*[^\w]*$/);N&&(T-=N[0].length);break}case"deleteWordForward":{const N=x.substring(C).match(/^[^\w]*\w*/);N&&(A+=N[0].length);break}case"deleteContentBackward":C===_&&(T-=1);break;case"deleteContentForward":C===_&&(A+=1);break}w.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:T,selEnd:A}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Uee extends Hd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $ee extends Hd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Dd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nB extends Hd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Dd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const m=u&&f.id===r;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class jee extends ZV{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Vee extends Hd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Dd.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,r.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:m,multiple:y}=s;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const f={value(m){o==null||o();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const v of s.options)v.selected=w.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(m){s.multiple=!0},remove(m){const y=s.options,w=m.detail.remove;y[w].selected=!1,s.remove(w),y.length>0&&Array.prototype.findIndex.call(y,b=>b.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},clear(m){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(m){const{index:y,displayValue:w,exportValue:v}=m.detail.insert,b=s.children[y],x=document.createElement("option");x.textContent=w,x.value=v,b?b.before(x):s.append(x),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},items(m){const{items:y}=m.detail;for(;s.length!==0;)s.remove(0);for(const w of y){const{displayValue:v,exportValue:b}=w,x=document.createElement("option");x.textContent=v,x.value=b,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,u)}),s.addEventListener("input",u=>{var y;const f=a(!0),m=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class nT extends Gt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Gt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Bee({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${ok}${s}`).join(",")),this.container}}var Ff,Xx,Qx,Of,Uf,Ut,Qo,Vu,My,Dy,$f,Zo,Ys,ea,Ly,ta,Fy,Bu,zu,pt,uw,rT,rB,sB,iB,oB,dw,hw,sT;class Bee{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){k(this,pt);k(this,Ff,R(this,pt,iB).bind(this));k(this,Xx,R(this,pt,sT).bind(this));k(this,Qx,R(this,pt,hw).bind(this));k(this,Of,R(this,pt,dw).bind(this));k(this,Uf,null);k(this,Ut,null);k(this,Qo,null);k(this,Vu,null);k(this,My,null);k(this,Dy,null);k(this,$f,null);k(this,Zo,!1);k(this,Ys,null);k(this,ea,null);k(this,Ly,null);k(this,ta,null);k(this,Fy,null);k(this,Bu,null);k(this,zu,!1);var m;E(this,Ut,e),E(this,Fy,s),E(this,Qo,o),E(this,ta,a),E(this,Dy,l),E(this,Uf,t),E(this,Ly,c),E(this,$f,u),E(this,My,r),E(this,Vu,ck.toDateObject(i)),this.trigger=r.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",d(this,Of)),y.addEventListener("mouseenter",d(this,Qx)),y.addEventListener("mouseleave",d(this,Xx)),y.classList.add("popupTriggerArea");for(const y of r)(m=y.container)==null||m.addEventListener("keydown",d(this,Ff));d(this,Ut).hidden=!0,f&&R(this,pt,dw).call(this)}render(){if(d(this,Ys))return;const e=E(this,Ys,document.createElement("div"));if(e.className="popup",d(this,Uf)){const i=e.style.outlineColor=Ce.makeHexColor(...d(this,Uf));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=d(this,Fy),e.append(t),d(this,Vu)){const i=document.createElement("time");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Vu).valueOf()})),i.dateTime=d(this,Vu).toISOString(),t.append(i)}const s=d(this,pt,uw);if(s)QV.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(d(this,Qo));e.append(i)}d(this,Ut).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,o=s.length;i<o;++i){const a=s[i];r.append(document.createTextNode(a)),i<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;d(this,Bu)||E(this,Bu,{contentsObj:d(this,Qo),richText:d(this,ta)}),e&&E(this,ea,null),t&&(E(this,ta,R(this,pt,sB).call(this,t)),E(this,Qo,null)),(r=d(this,Ys))==null||r.remove(),E(this,Ys,null)}resetEdited(){var e;d(this,Bu)&&({contentsObj:un(this,Qo)._,richText:un(this,ta)._}=d(this,Bu),E(this,Bu,null),(e=d(this,Ys))==null||e.remove(),E(this,Ys,null),E(this,ea,null))}forceHide(){E(this,zu,this.isVisible),d(this,zu)&&(d(this,Ut).hidden=!0)}maybeShow(){d(this,zu)&&(d(this,Ys)||R(this,pt,hw).call(this),E(this,zu,!1),d(this,Ut).hidden=!1)}get isVisible(){return d(this,Ut).hidden===!1}}Ff=new WeakMap,Xx=new WeakMap,Qx=new WeakMap,Of=new WeakMap,Uf=new WeakMap,Ut=new WeakMap,Qo=new WeakMap,Vu=new WeakMap,My=new WeakMap,Dy=new WeakMap,$f=new WeakMap,Zo=new WeakMap,Ys=new WeakMap,ea=new WeakMap,Ly=new WeakMap,ta=new WeakMap,Fy=new WeakMap,Bu=new WeakMap,zu=new WeakMap,pt=new WeakSet,uw=function(){const e=d(this,ta),t=d(this,Qo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,ta).html||null},rT=function(){var e,t,r;return((r=(t=(e=d(this,pt,uw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},rB=function(){var e,t,r;return((r=(t=(e=d(this,pt,uw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},sB=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:d(this,pt,rB),fontSize:d(this,pt,rT)?`calc(${d(this,pt,rT)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},iB=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,Zo))&&R(this,pt,dw).call(this)},oB=function(){if(d(this,ea)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=d(this,Dy);let o=!!d(this,$f),a=o?d(this,$f):d(this,Ly);for(const w of d(this,My))if(!a||Ce.intersect(w.data.rect,a)!==null){a=w.data.rect,o=!0;break}const l=Ce.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,m=l[1];E(this,ea,[100*(f-s)/t,100*(m-i)/r]);const{style:y}=d(this,Ut);y.left=`${d(this,ea)[0]}%`,y.top=`${d(this,ea)[1]}%`},dw=function(){E(this,Zo,!d(this,Zo)),d(this,Zo)?(R(this,pt,hw).call(this),d(this,Ut).addEventListener("click",d(this,Of)),d(this,Ut).addEventListener("keydown",d(this,Ff))):(R(this,pt,sT).call(this),d(this,Ut).removeEventListener("click",d(this,Of)),d(this,Ut).removeEventListener("keydown",d(this,Ff)))},hw=function(){d(this,Ys)||this.render(),this.isVisible?d(this,Zo)&&d(this,Ut).classList.add("focused"):(R(this,pt,oB).call(this),d(this,Ut).hidden=!1,d(this,Ut).style.zIndex=parseInt(d(this,Ut).style.zIndex)+1e3)},sT=function(){d(this,Ut).classList.remove("focused"),!(d(this,Zo)||!this.isVisible)&&(d(this,Ut).hidden=!0,d(this,Ut).style.zIndex=parseInt(d(this,Ut).style.zIndex)-1e3)};class aB extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Oy;class zee extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Oy,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=E(this,Oy,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Oy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oy=new WeakMap;var Uy;class Hee extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Uy,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=E(this,Uy,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Uy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uy=new WeakMap;var $y;class Gee extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,$y,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=E(this,$y,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}}$y=new WeakMap;var jy;class lB extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,jy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:o,height:a}=this;if(!r)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,m=r.length;f<m;f+=2){const y=r[f]-t[0],w=t[3]-r[f+1];c.push(`${y},${w}`)}c=c.join(" ");const u=E(this,jy,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,jy)}addHighlightArea(){this.container.classList.add("highlightArea")}}jy=new WeakMap;class qee extends lB{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wee extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Vy,Hu,By,iT;class pk extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,By);k(this,Vy,null);k(this,Hu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ne.HIGHLIGHT:Ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:c}=R(this,By,iT).call(this,r,t),u=this.svgFactory.create(l,c,!0),f=E(this,Vy,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let m=0,y=s.length;m<y;m++){const w=this.svgFactory.createElement(this.svgElementName);d(this,Hu).push(w),w.setAttribute("points",s[m].join(",")),f.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,o=d(this,Vy);if(r>=0&&o.setAttribute("stroke-width",r||1),s)for(let a=0,l=d(this,Hu).length;a<l;a++)d(this,Hu)[a].setAttribute("points",s[a].join(","));if(i){const{transform:a,width:l,height:c}=R(this,By,iT).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Hu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vy=new WeakMap,Hu=new WeakMap,By=new WeakSet,iT=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class cB extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ne.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Kee extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Yee extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Jee extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class uB extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zy,Hy,oT;class Xee extends Gt{constructor(t){var s;super(t,{isRenderable:!0});k(this,Hy);k(this,zy,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",R(this,Hy,oT).bind(this)),E(this,zy,s);const{isMac:i}=In.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&R(this,Hy,oT).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return d(this,zy)}addHighlightArea(){this.container.classList.add("highlightArea")}}zy=new WeakMap,Hy=new WeakSet,oT=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Gy,Gu,Ul,qy,_c,lT,cT;const Pk=class Pk{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:a}){k(this,_c);k(this,Gy,null);k(this,Gu,null);k(this,Ul,new Map);k(this,qy,null);this.div=e,E(this,Gy,t),E(this,Gu,r),E(this,qy,a||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return d(this,Ul).size>0}async render(e){var o;const{annotations:t}=e,r=this.div;Id(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Nx,annotationStorage:e.annotationStorage||new dk,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Wt.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const c=JN.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await R(this,_c,lT).call(this,u,a.id,i.elements),c._isEditable&&(d(this,Ul).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}R(this,_c,cT).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new Nx,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=Pk._defaultBorderStyle),r.data=s;const i=JN.create(r);if(!i.isRenderable)continue;const o=i.render();await R(this,_c,lT).call(this,o,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Id(t,{rotation:e.rotation}),R(this,_c,cT).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Ul).values())}getEditableAnnotation(e){return d(this,Ul).get(e)}static get _defaultBorderStyle(){return qe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:oh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Gy=new WeakMap,Gu=new WeakMap,Ul=new WeakMap,qy=new WeakMap,_c=new WeakSet,lT=async function(e,t,r){var a,l;const s=e.firstChild||e,i=s.id=`${ok}${t}`,o=await((a=d(this,qy))==null?void 0:a.getAriaAttributes(i));if(o)for(const[c,u]of o)s.setAttribute(c,u);r?r.at(-1).container.after(e):(this.div.append(e),(l=d(this,Gy))==null||l.moveElementInDOM(this.div,e,s,!1))},cT=function(){var t;if(!d(this,Gu))return;const e=this.div;for(const[r,s]of d(this,Gu)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const a=d(this,Ul).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),a._hasNoCanvas=!1):a.canvas=s)}d(this,Gu).clear()};let aT=Pk;const E0=/\r\n?|\n/g;var Js,Ur,Wy,qu,$r,Qt,dB,hB,fB,fw,Ta,pw,mw,pB,dT,mB;const gt=class gt extends vt{constructor(t){super({...t,name:"freeTextEditor"});k(this,Qt);k(this,Js);k(this,Ur,"");k(this,Wy,`${this.id}-editor`);k(this,qu,null);k(this,$r);E(this,Js,t.color||gt._defaultColor||vt._defaultLineColor),E(this,$r,t.fontSize||gt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=gt.prototype,r=o=>o.isEmpty(),s=Md.TRANSLATE_SMALL,i=Md.TRANSLATE_BIG;return qe(this,"_keyboardManager",new Lv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){vt.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Ke.FREETEXT_SIZE:gt._defaultFontSize=r;break;case Ke.FREETEXT_COLOR:gt._defaultColor=r;break}}updateParams(t,r){switch(t){case Ke.FREETEXT_SIZE:R(this,Qt,dB).call(this,r);break;case Ke.FREETEXT_COLOR:R(this,Qt,hB).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,gt._defaultFontSize],[Ke.FREETEXT_COLOR,gt._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,d(this,$r)],[Ke.FREETEXT_COLOR,d(this,Js)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-gt._internalPadding*t,-(gt._internalPadding+d(this,$r))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,qu,new AbortController);const t=this._uiManager.combinedSignal(d(this,qu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,Wy)),this._isDraggable=!0,(t=d(this,qu))==null||t.abort(),E(this,qu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,Ur),r=E(this,Ur,R(this,Qt,fB).call(this).trimEnd());if(t===r)return;const s=i=>{if(E(this,Ur,i),!i){this.remove();return}R(this,Qt,mw).call(this),this._uiManager.rebuild(this),R(this,Qt,fw).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),R(this,Qt,fw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){gt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,Wy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,$r)}px * var(--total-scale-factor))`,s.color=d(this,Js),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[m,y]=this.pageTranslation;let w,v;switch(this.rotation){case 0:w=t+(a[0]-m)/u,v=r+this.height-(a[1]-y)/f;break;case 90:w=t+(a[0]-m)/u,v=r-(a[1]-y)/f,[l,c]=[c,-l];break;case 180:w=t-this.width+(a[0]-m)/u,v=r-(a[1]-y)/f,[l,c]=[-l,-c];break;case 270:w=t+(a[0]-m-this.height*f)/u,v=r+(a[1]-y-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(w*i,v*o,l,c)}else this._moveAfterPaste(t,r);R(this,Qt,mw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,v,b;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=R(w=gt,Ta,dT).call(w,r.getData("text")||"").replaceAll(E0,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const x=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(E0,"")),x!==this.editorDiv){let C=u;for(const _ of this.editorDiv.childNodes){if(_===x){C=f;continue}C.push(R(v=gt,Ta,pw).call(v,_))}}u.push(l.nodeValue.slice(0,c).replaceAll(E0,""))}else if(l===this.editorDiv){let x=u,C=0;for(const _ of this.editorDiv.childNodes)C++===c&&(x=f),x.push(R(b=gt,Ta,pw).call(b,_))}E(this,Ur,`${u.join(`
`)}${i}${f.join(`
`)}`),R(this,Qt,mw).call(this);const m=new Range;let y=Math.sumPrecise(u.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const C=x.nodeValue.length;if(y<=C){m.setStart(x,y),m.setEnd(x,y);break}y-=C}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var a;let i=null;if(t instanceof aB){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:m,popupRef:y},textContent:w,textPosition:v,parent:{page:{pageNumber:b}}}=t;if(!w||w.length===0)return null;i=t={annotationType:Ne.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:v,pageIndex:b-1,rect:u.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:y}}const o=await super.deserialize(t,r,s);return E(o,$r,t.fontSize),E(o,Js,Ce.makeHexColor(...t.color)),E(o,Ur,R(a=gt,Ta,dT).call(a,t.value)),o._initialData=i,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=gt._internalPadding*this.parentScale,s=this.getRect(r,r),i=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,Js)),o={annotationType:Ne.FREETEXT,color:i,fontSize:d(this,$r),value:R(this,Qt,pB).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!R(this,Qt,mB).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${d(this,$r)}px * var(--total-scale-factor))`,s.color=d(this,Js),r.replaceChildren();for(const o of d(this,Ur).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const i=gt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:d(this,Ur)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Js=new WeakMap,Ur=new WeakMap,Wy=new WeakMap,qu=new WeakMap,$r=new WeakMap,Qt=new WeakSet,dB=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-d(this,$r))*this.parentScale),E(this,$r,i),R(this,Qt,fw).call(this)},s=d(this,$r);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},hB=function(t){const r=i=>{E(this,Js,this.editorDiv.style.color=i)},s=d(this,Js);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fB=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(R(s=gt,Ta,pw).call(s,i)),r=i);return t.join(`
`)},fw=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Ta=new WeakSet,pw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(E0,"")},mw=function(){if(this.editorDiv.replaceChildren(),!!d(this,Ur))for(const t of d(this,Ur).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},pB=function(){return d(this,Ur).replaceAll(""," ")},dT=function(t){return t.replaceAll(" ","")},mB=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},k(gt,Ta),Z(gt,"_freeTextDefaultContent",""),Z(gt,"_internalPadding",0),Z(gt,"_defaultColor",null),Z(gt,"_defaultFontSize",10),Z(gt,"_type","freetext"),Z(gt,"_editorType",Ne.FREETEXT);let uT=gt;class fe{toSVGPath(){ft("Abstract method `toSVGPath` must be implemented.")}get box(){ft("Abstract getter `box` must be implemented.")}serialize(e,t){ft("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*s,o[a+1]=r+e[a+1]*i;return o}static _rescaleAndSwap(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*s,o[a+1]=r+e[a]*i;return o}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,o){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+o)/6,(r+i)/2,(s+o)/2]}}Z(fe,"PRECISION",1e-4);var jr,Xs,jf,Vf,Hi,Be,Wu,Ku,Ky,Yy,Bf,zf,$l,Jy,Zx,eb,cn,Fm,gB,yB,vB,wB,xB,bB;const No=class No{constructor({x:e,y:t},r,s,i,o,a=0){k(this,cn);k(this,jr);k(this,Xs,[]);k(this,jf);k(this,Vf);k(this,Hi,[]);k(this,Be,new Float32Array(18));k(this,Wu);k(this,Ku);k(this,Ky);k(this,Yy);k(this,Bf);k(this,zf);k(this,$l,[]);E(this,jr,r),E(this,zf,i*s),E(this,Vf,o),d(this,Be).set([NaN,NaN,NaN,NaN,e,t],6),E(this,jf,a),E(this,Yy,d(No,Jy)*s),E(this,Ky,d(No,eb)*s),E(this,Bf,s),d(this,$l).push(e,t)}isEmpty(){return isNaN(d(this,Be)[8])}add({x:e,y:t}){var M;E(this,Wu,e),E(this,Ku,t);const[r,s,i,o]=d(this,jr);let[a,l,c,u]=d(this,Be).subarray(8,12);const f=e-c,m=t-u,y=Math.hypot(f,m);if(y<d(this,Ky))return!1;const w=y-d(this,Yy),v=w/y,b=v*f,x=v*m;let C=a,_=l;a=c,l=u,c+=b,u+=x,(M=d(this,$l))==null||M.push(e,t);const T=-x/w,A=b/w,P=T*d(this,zf),N=A*d(this,zf);return d(this,Be).set(d(this,Be).subarray(2,8),0),d(this,Be).set([c+P,u+N],4),d(this,Be).set(d(this,Be).subarray(14,18),12),d(this,Be).set([c-P,u-N],16),isNaN(d(this,Be)[6])?(d(this,Hi).length===0&&(d(this,Be).set([a+P,l+N],2),d(this,Hi).push(NaN,NaN,NaN,NaN,(a+P-r)/i,(l+N-s)/o),d(this,Be).set([a-P,l-N],14),d(this,Xs).push(NaN,NaN,NaN,NaN,(a-P-r)/i,(l-N-s)/o)),d(this,Be).set([C,_,a,l,c,u],6),!this.isEmpty()):(d(this,Be).set([C,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,C-a)-Math.atan2(x,b))<Math.PI/2?([a,l,c,u]=d(this,Be).subarray(2,6),d(this,Hi).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/i,((l+u)/2-s)/o),[a,l,C,_]=d(this,Be).subarray(14,18),d(this,Xs).push(NaN,NaN,NaN,NaN,((C+a)/2-r)/i,((_+l)/2-s)/o),!0):([C,_,a,l,c,u]=d(this,Be).subarray(0,6),d(this,Hi).push(((C+5*a)/6-r)/i,((_+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),[c,u,a,l,C,_]=d(this,Be).subarray(12,18),d(this,Xs).push(((C+5*a)/6-r)/i,((_+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,Hi),t=d(this,Xs);if(isNaN(d(this,Be)[6])&&!this.isEmpty())return R(this,cn,gB).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);R(this,cn,vB).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return R(this,cn,yB).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,o){return new _B(e,t,r,s,i,o)}getOutlines(){var f;const e=d(this,Hi),t=d(this,Xs),r=d(this,Be),[s,i,o,a]=d(this,jr),l=new Float32Array((((f=d(this,$l))==null?void 0:f.length)??0)+2);for(let m=0,y=l.length-2;m<y;m+=2)l[m]=(d(this,$l)[m]-s)/o,l[m+1]=(d(this,$l)[m+1]-i)/a;if(l[l.length-2]=(d(this,Wu)-s)/o,l[l.length-1]=(d(this,Ku)-i)/a,isNaN(r[6])&&!this.isEmpty())return R(this,cn,wB).call(this,l);const c=new Float32Array(d(this,Hi).length+24+d(this,Xs).length);let u=e.length;for(let m=0;m<u;m+=2){if(isNaN(e[m])){c[m]=c[m+1]=NaN;continue}c[m]=e[m],c[m+1]=e[m+1]}u=R(this,cn,bB).call(this,c,u);for(let m=t.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(t[m+y])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[m+y],c[u+1]=t[m+y+1],u+=2}return R(this,cn,xB).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,jr),d(this,Bf),d(this,jf),d(this,Vf))}};jr=new WeakMap,Xs=new WeakMap,jf=new WeakMap,Vf=new WeakMap,Hi=new WeakMap,Be=new WeakMap,Wu=new WeakMap,Ku=new WeakMap,Ky=new WeakMap,Yy=new WeakMap,Bf=new WeakMap,zf=new WeakMap,$l=new WeakMap,Jy=new WeakMap,Zx=new WeakMap,eb=new WeakMap,cn=new WeakSet,Fm=function(){const e=d(this,Be).subarray(4,6),t=d(this,Be).subarray(16,18),[r,s,i,o]=d(this,jr);return[(d(this,Wu)+(e[0]-t[0])/2-r)/i,(d(this,Ku)+(e[1]-t[1])/2-s)/o,(d(this,Wu)+(t[0]-e[0])/2-r)/i,(d(this,Ku)+(t[1]-e[1])/2-s)/o]},gB=function(){const[e,t,r,s]=d(this,jr),[i,o,a,l]=R(this,cn,Fm).call(this);return`M${(d(this,Be)[2]-e)/r} ${(d(this,Be)[3]-t)/s} L${(d(this,Be)[4]-e)/r} ${(d(this,Be)[5]-t)/s} L${i} ${o} L${a} ${l} L${(d(this,Be)[16]-e)/r} ${(d(this,Be)[17]-t)/s} L${(d(this,Be)[14]-e)/r} ${(d(this,Be)[15]-t)/s} Z`},yB=function(e){const t=d(this,Xs);e.push(`L${t[4]} ${t[5]} Z`)},vB=function(e){const[t,r,s,i]=d(this,jr),o=d(this,Be).subarray(4,6),a=d(this,Be).subarray(16,18),[l,c,u,f]=R(this,cn,Fm).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-r)/i} L${l} ${c} L${u} ${f} L${(a[0]-t)/s} ${(a[1]-r)/i}`)},wB=function(e){const t=d(this,Be),[r,s,i,o]=d(this,jr),[a,l,c,u]=R(this,cn,Fm).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/o],0),this.newFreeDrawOutline(f,e,d(this,jr),d(this,Bf),d(this,jf),d(this,Vf))},xB=function(e,t){const r=d(this,Xs);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},bB=function(e,t){const r=d(this,Be).subarray(4,6),s=d(this,Be).subarray(16,18),[i,o,a,l]=d(this,jr),[c,u,f,m]=R(this,cn,Fm).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l],t),t+=24},k(No,Jy,8),k(No,Zx,2),k(No,eb,d(No,Jy)+d(No,Zx));let Ix=No;var Hf,Yu,na,Xy,Vr,Qy,Vt,tb,CB;class _B extends fe{constructor(t,r,s,i,o,a){super();k(this,tb);k(this,Hf);k(this,Yu,new Float32Array(4));k(this,na);k(this,Xy);k(this,Vr);k(this,Qy);k(this,Vt);E(this,Vt,t),E(this,Vr,r),E(this,Hf,s),E(this,Qy,i),E(this,na,o),E(this,Xy,a),this.lastPoint=[NaN,NaN],R(this,tb,CB).call(this,a);const[l,c,u,f]=d(this,Yu);for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-l)/u,t[m+1]=(t[m+1]-c)/f;for(let m=0,y=r.length;m<y;m+=2)r[m]=(r[m]-l)/u,r[m+1]=(r[m+1]-c)/f}toSVGPath(){const t=[`M${d(this,Vt)[4]} ${d(this,Vt)[5]}`];for(let r=6,s=d(this,Vt).length;r<s;r+=6){if(isNaN(d(this,Vt)[r])){t.push(`L${d(this,Vt)[r+4]} ${d(this,Vt)[r+5]}`);continue}t.push(`C${d(this,Vt)[r]} ${d(this,Vt)[r+1]} ${d(this,Vt)[r+2]} ${d(this,Vt)[r+3]} ${d(this,Vt)[r+4]} ${d(this,Vt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,l=i-r;let c,u;switch(o){case 0:c=fe._rescale(d(this,Vt),t,i,a,-l),u=fe._rescale(d(this,Vr),t,i,a,-l);break;case 90:c=fe._rescaleAndSwap(d(this,Vt),t,r,a,l),u=fe._rescaleAndSwap(d(this,Vr),t,r,a,l);break;case 180:c=fe._rescale(d(this,Vt),s,r,-a,l),u=fe._rescale(d(this,Vr),s,r,-a,l);break;case 270:c=fe._rescaleAndSwap(d(this,Vt),s,i,-a,-l),u=fe._rescaleAndSwap(d(this,Vr),s,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,Yu)}newOutliner(t,r,s,i,o,a=0){return new Ix(t,r,s,i,o,a)}getNewOutline(t,r){const[s,i,o,a]=d(this,Yu),[l,c,u,f]=d(this,Hf),m=o*u,y=a*f,w=s*u+l,v=i*f+c,b=this.newOutliner({x:d(this,Vr)[0]*m+w,y:d(this,Vr)[1]*y+v},d(this,Hf),d(this,Qy),t,d(this,Xy),r??d(this,na));for(let x=2;x<d(this,Vr).length;x+=2)b.add({x:d(this,Vr)[x]*m+w,y:d(this,Vr)[x+1]*y+v});return b.getOutlines()}}Hf=new WeakMap,Yu=new WeakMap,na=new WeakMap,Xy=new WeakMap,Vr=new WeakMap,Qy=new WeakMap,Vt=new WeakMap,tb=new WeakSet,CB=function(t){const r=d(this,Vt);let s=r[4],i=r[5];const o=[s,i,s,i];let a=s,l=i;const c=t?Math.max:Math.min;for(let f=6,m=r.length;f<m;f+=6){const y=r[f+4],w=r[f+5];if(isNaN(r[f]))Ce.pointBoundingBox(y,w,o),l<w?(a=y,l=w):l===w&&(a=c(a,y));else{const v=[1/0,1/0,-1/0,-1/0];Ce.bezierBoundingBox(s,i,...r.slice(f,f+6),v),Ce.rectBoundingBox(...v,o),l<v[3]?(a=v[2],l=v[3]):l===v[3]&&(a=c(a,v[2]))}s=y,i=w}const u=d(this,Yu);u[0]=o[0]-d(this,na),u[1]=o[1]-d(this,na),u[2]=o[2]-o[0]+2*d(this,na),u[3]=o[3]-o[1]+2*d(this,na),this.lastPoint=[a,l]};var Zy,ev,jl,Qs,lr,SB,gw,EB,TB,fT;class hT{constructor(e,t=0,r=0,s=!0){k(this,lr);k(this,Zy);k(this,ev);k(this,jl,[]);k(this,Qs,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:w,width:v,height:b}of e){const x=Math.floor((y-t)/o)*o,C=Math.ceil((y+v+t)/o)*o,_=Math.floor((w-t)/o)*o,T=Math.ceil((w+b+t)/o)*o,A=[x,_,T,!0],P=[C,_,T,!1];d(this,jl).push(A,P),Ce.rectBoundingBox(x,_,C,T,i)}const a=i[2]-i[0]+2*r,l=i[3]-i[1]+2*r,c=i[0]-r,u=i[1]-r,f=d(this,jl).at(s?-1:-2),m=[f[0],f[2]];for(const y of d(this,jl)){const[w,v,b]=y;y[0]=(w-c)/a,y[1]=(v-u)/l,y[2]=(b-u)/l}E(this,Zy,new Float32Array([c,u,a,l])),E(this,ev,m)}getOutlines(){d(this,jl).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of d(this,jl))t[3]?(e.push(...R(this,lr,fT).call(this,t)),R(this,lr,EB).call(this,t)):(R(this,lr,TB).call(this,t),e.push(...R(this,lr,fT).call(this,t)));return R(this,lr,SB).call(this,e)}}Zy=new WeakMap,ev=new WeakMap,jl=new WeakMap,Qs=new WeakMap,lr=new WeakSet,SB=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,f]=o;r.delete(o);let m=a,y=l;for(i=[a,c],s.push(i);;){let w;if(r.has(u))w=u;else if(r.has(f))w=f;else break;r.delete(w),[a,l,c,u,f]=w,m!==a&&(i.push(m,y,a,y===l?l:c),m=a),y=y===l?c:l}i.push(m,y)}return new Qee(s,d(this,Zy),d(this,ev))},gw=function(e){const t=d(this,Qs);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},EB=function([,e,t]){const r=R(this,lr,gw).call(this,e);d(this,Qs).splice(r,0,[e,t])},TB=function([,e,t]){const r=R(this,lr,gw).call(this,e);for(let s=r;s<d(this,Qs).length;s++){const[i,o]=d(this,Qs)[s];if(i!==e)break;if(i===e&&o===t){d(this,Qs).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=d(this,Qs)[s];if(i!==e)break;if(i===e&&o===t){d(this,Qs).splice(s,1);return}}},fT=function(e){const[t,r,s]=e,i=[[t,r,s]],o=R(this,lr,gw).call(this,s);for(let a=0;a<o;a++){const[l,c]=d(this,Qs)[a];for(let u=0,f=i.length;u<f;u++){const[,m,y]=i[u];if(!(c<=m||y<=l)){if(m>=l){if(y>c)i[u][1]=c;else{if(f===1)return[];i.splice(u,1),u--,f--}continue}i[u][2]=l,y>c&&i.push([t,c,y])}}}return i};var tv,Gf;class Qee extends fe{constructor(t,r,s){super();k(this,tv);k(this,Gf);E(this,Gf,t),E(this,tv,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of d(this,Gf)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],l=s-t,c=i-r;for(const u of d(this,Gf)){const f=new Array(u.length);for(let m=0;m<u.length;m+=2)f[m]=t+u[m]*l,f[m+1]=i-u[m+1]*c;a.push(f)}return a}get box(){return d(this,tv)}get classNamesForOutlining(){return["highlightOutline"]}}tv=new WeakMap,Gf=new WeakMap;class pT extends Ix{newFreeDrawOutline(e,t,r,s,i,o){return new Zee(e,t,r,s,i,o)}}class Zee extends _B{newOutliner(e,t,r,s,i,o=0){return new pT(e,t,r,s,i,o)}}var Br,Ju,qf,rn,nv,Wf,ra,rv,Vl,Zs,Kf,sv,ht,mT,gT,yT,Oc,AB,Ja;const yr=class yr{constructor({editor:e=null,uiManager:t=null}){k(this,ht);k(this,Br,null);k(this,Ju,null);k(this,qf);k(this,rn,null);k(this,nv,!1);k(this,Wf,!1);k(this,ra,null);k(this,rv);k(this,Vl,null);k(this,Zs,null);k(this,Kf);var r,s;e?(E(this,Wf,!1),E(this,Kf,Ke.HIGHLIGHT_COLOR),E(this,ra,e)):(E(this,Wf,!0),E(this,Kf,Ke.HIGHLIGHT_DEFAULT_COLOR)),E(this,Zs,(e==null?void 0:e._uiManager)||t),E(this,rv,d(this,Zs)._eventBus),E(this,qf,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=d(this,Zs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(yr,sv)||E(yr,sv,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return qe(this,"_keyboardManager",new Lv([[["Escape","mac+Escape"],yr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yr.prototype._moveToPrevious],[["Home","mac+Home"],yr.prototype._moveToBeginning],[["End","mac+End"],yr.prototype._moveToEnd]]))}renderButton(){const e=E(this,Br,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,ra)&&(e.ariaControls=`${d(this,ra).id}_colorpicker_dropdown`);const t=d(this,Zs)._signal;e.addEventListener("click",R(this,ht,Oc).bind(this),{signal:t}),e.addEventListener("keydown",R(this,ht,yT).bind(this),{signal:t});const r=E(this,Ju,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=d(this,qf),e.append(r),e}renderMainDropdown(){const e=E(this,rn,R(this,ht,mT).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,Br)){R(this,ht,Oc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,ht,gT).call(this,t,e)}_moveToNext(e){var t,r;if(!d(this,ht,Ja)){R(this,ht,Oc).call(this,e);return}if(e.target===d(this,Br)){(t=d(this,rn).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=d(this,rn))==null?void 0:t.firstChild)||e.target===d(this,Br)){d(this,ht,Ja)&&this._hideDropdownFromKeyboard();return}d(this,ht,Ja)||R(this,ht,Oc).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!d(this,ht,Ja)){R(this,ht,Oc).call(this,e);return}(t=d(this,rn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,ht,Ja)){R(this,ht,Oc).call(this,e);return}(t=d(this,rn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,rn))==null||e.classList.add("hidden"),d(this,Br).ariaExpanded="false",(t=d(this,Vl))==null||t.abort(),E(this,Vl,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Wf)){if(!d(this,ht,Ja)){(e=d(this,ra))==null||e.unselect();return}this.hideDropdown(),d(this,Br).focus({preventScroll:!0,focusVisible:d(this,nv)})}}updateColor(e){if(d(this,Ju)&&(d(this,Ju).style.backgroundColor=e),!d(this,rn))return;const t=d(this,Zs).highlightColors.values();for(const r of d(this,rn).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,Br))==null||e.remove(),E(this,Br,null),E(this,Ju,null),(t=d(this,rn))==null||t.remove(),E(this,rn,null)}};Br=new WeakMap,Ju=new WeakMap,qf=new WeakMap,rn=new WeakMap,nv=new WeakMap,Wf=new WeakMap,ra=new WeakMap,rv=new WeakMap,Vl=new WeakMap,Zs=new WeakMap,Kf=new WeakMap,sv=new WeakMap,ht=new WeakSet,mT=function(){const e=document.createElement("div"),t=d(this,Zs)._signal;e.addEventListener("contextmenu",yi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,ra)&&(e.id=`${d(this,ra).id}_colorpicker_dropdown`);for(const[r,s]of d(this,Zs).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",d(yr,sv)[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===d(this,qf),i.addEventListener("click",R(this,ht,gT).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",R(this,ht,yT).bind(this),{signal:t}),e},gT=function(e,t){t.stopPropagation(),d(this,rv).dispatch("switchannotationeditorparams",{source:this,type:d(this,Kf),value:e})},yT=function(e){yr._keyboardManager.exec(this,e)},Oc=function(e){if(d(this,ht,Ja)){this.hideDropdown();return}if(E(this,nv,e.detail===0),d(this,Vl)||(E(this,Vl,new AbortController),window.addEventListener("pointerdown",R(this,ht,AB).bind(this),{signal:d(this,Zs).combinedSignal(d(this,Vl))})),d(this,Br).ariaExpanded="true",d(this,rn)){d(this,rn).classList.remove("hidden");return}const t=E(this,rn,R(this,ht,mT).call(this));d(this,Br).append(t)},AB=function(e){var t;(t=d(this,rn))!=null&&t.contains(e.target)||this.hideDropdown()},Ja=function(){return d(this,rn)&&!d(this,rn).classList.contains("hidden")},k(yr,sv,null);let Mx=yr;var Yf,iv,sa,Xu,ov,_r,av,lv,Qu,ms,zr,Tn,Jf,ia,zn,Xf,gs,cv,Oe,vT,yw,kB,RB,PB,wT,Uc,xs,dh,NB,vw,Om,IB,MB,DB,LB,FB;const tt=class tt extends vt{constructor(t){super({...t,name:"highlightEditor"});k(this,Oe);k(this,Yf,null);k(this,iv,0);k(this,sa);k(this,Xu,null);k(this,ov,null);k(this,_r,null);k(this,av,null);k(this,lv,0);k(this,Qu,null);k(this,ms,null);k(this,zr,null);k(this,Tn,!1);k(this,Jf,null);k(this,ia);k(this,zn,null);k(this,Xf,"");k(this,gs);k(this,cv,"");this.color=t.color||tt._defaultColor,E(this,gs,t.thickness||tt._defaultThickness),E(this,ia,t.opacity||tt._defaultOpacity),E(this,sa,t.boxes||null),E(this,cv,t.methodOfCreation||""),E(this,Xf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(E(this,Tn,!0),R(this,Oe,yw).call(this,t),R(this,Oe,Uc).call(this)):d(this,sa)&&(E(this,Yf,t.anchorNode),E(this,iv,t.anchorOffset),E(this,av,t.focusNode),E(this,lv,t.focusOffset),R(this,Oe,vT).call(this),R(this,Oe,Uc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=tt.prototype;return qe(this,"_keyboardManager",new Lv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Tn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,gs),methodOfCreation:d(this,cv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;vt.initialize(t,r),tt._defaultColor||(tt._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Ke.HIGHLIGHT_DEFAULT_COLOR:tt._defaultColor=r;break;case Ke.HIGHLIGHT_THICKNESS:tt._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return d(this,Jf)}updateParams(t,r){switch(t){case Ke.HIGHLIGHT_COLOR:R(this,Oe,kB).call(this,r);break;case Ke.HIGHLIGHT_THICKNESS:R(this,Oe,RB).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_DEFAULT_COLOR,tt._defaultColor],[Ke.HIGHLIGHT_THICKNESS,tt._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||tt._defaultColor],[Ke.HIGHLIGHT_THICKNESS,d(this,gs)||tt._defaultThickness],[Ke.HIGHLIGHT_FREE,d(this,Tn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,ov,new Mx({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Oe,Om).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,R(this,Oe,Om).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){R(this,Oe,wT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Oe,Uc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?R(this,Oe,wT).call(this):t&&(R(this,Oe,Uc).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;d(this,Tn)?(t=(t-this.rotation+360)%360,s=R(i=tt,xs,dh).call(i,d(this,ms).box,t)):s=R(o=tt,xs,dh).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(d(this,zr),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(d(this,zn),{bbox:R(a=tt,xs,dh).call(a,d(this,_r).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,Xf)&&(t.setAttribute("aria-label",d(this,Xf)),t.setAttribute("role","mark")),d(this,Tn)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,Oe,NB).bind(this),{signal:this._uiManager._signal});const r=E(this,Qu,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=d(this,Xu);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),tV(this,d(this,Qu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,zn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,zn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,Oe,vw).call(this,!0);break;case 1:case 3:R(this,Oe,vw).call(this,!1);break}}select(){var t;super.select(),d(this,zn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,zn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,zn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,zn),{rootClass:{selected:!1}}),d(this,Tn)||R(this,Oe,vw).call(this,!1))}get _mustFixPosition(){return!d(this,Tn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,zr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,zn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),y=w=>{f.abort(),R(this,xs,LB).call(this,t,w)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Yt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",yi,{signal:m}),s.addEventListener("pointermove",R(this,xs,DB).bind(this,t),{signal:m}),this._freeHighlight=new pT({x:i,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var v,b,x,C;let i=null;if(t instanceof cB){const{data:{quadPoints:_,rect:T,rotation:A,id:P,color:N,opacity:I,popupRef:M},parent:{page:{pageNumber:D}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(N),opacity:I,quadPoints:_,boxes:null,pageIndex:D-1,rect:T.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:M}}else if(t instanceof pk){const{data:{inkLists:_,rect:T,rotation:A,id:P,color:N,borderStyle:{rawWidth:I},popupRef:M},parent:{page:{pageNumber:D}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(N),thickness:I,inkLists:_,boxes:null,pageIndex:D-1,rect:T.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,r,s);u.color=Ce.makeHexColor(...o),E(u,ia,c||1),l&&E(u,gs,t.thickness),u._initialData=i;const[f,m]=u.pageDimensions,[y,w]=u.pageTranslation;if(a){const _=E(u,sa,[]);for(let T=0;T<a.length;T+=8)_.push({x:(a[T]-y)/f,y:1-(a[T+1]-w)/m,width:(a[T+2]-a[T])/f,height:(a[T+1]-a[T+5])/m});R(v=u,Oe,vT).call(v),R(b=u,Oe,Uc).call(b),u.rotate(u.rotation)}else if(l){E(u,Tn,!0);const _=l[0],T={x:_[0]-y,y:m-(_[1]-w)},A=new pT(T,[0,0,f,m],1,d(u,gs)/2,!0,.001);for(let I=0,M=_.length;I<M;I+=2)T.x=_[I]-y,T.y=m-(_[I+1]-w),A.add(T);const{id:P,clipPathId:N}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);R(x=u,Oe,yw).call(x,{highlightOutlines:A.getOutlines(),highlightId:P,clipPathId:N}),R(C=u,Oe,Uc).call(C),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=vt._colorManager.convert(this.color),i={annotationType:Ne.HIGHLIGHT,color:s,opacity:d(this,ia),thickness:d(this,gs),quadPoints:R(this,Oe,IB).call(this),outlines:R(this,Oe,MB).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:R(this,Oe,Om).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,Oe,FB).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Yf=new WeakMap,iv=new WeakMap,sa=new WeakMap,Xu=new WeakMap,ov=new WeakMap,_r=new WeakMap,av=new WeakMap,lv=new WeakMap,Qu=new WeakMap,ms=new WeakMap,zr=new WeakMap,Tn=new WeakMap,Jf=new WeakMap,ia=new WeakMap,zn=new WeakMap,Xf=new WeakMap,gs=new WeakMap,cv=new WeakMap,Oe=new WeakSet,vT=function(){const t=new hT(d(this,sa),.001);E(this,ms,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,ms).box;const r=new hT(d(this,sa),.0025,.001,this._uiManager.direction==="ltr");E(this,_r,r.getOutlines());const{lastPoint:s}=d(this,_r);E(this,Jf,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},yw=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,m;if(E(this,ms,t),E(this,_r,t.getNewOutline(d(this,gs)/2+1.5,.0025)),r>=0)E(this,zr,r),E(this,Xu,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,zn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,_r).box,path:{d:d(this,_r).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,zr),{bbox:R(f=tt,xs,dh).call(f,d(this,ms).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,zn),{bbox:R(m=tt,xs,dh).call(m,d(this,_r).box,y),path:{d:d(this,_r).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[y,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*w/y,this.height=c*y/w;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*w/y,this.height=c*y/w;break}}const{lastPoint:u}=d(this,_r);E(this,Jf,[(u[0]-o)/l,(u[1]-a)/c])},kB=function(t){const r=(o,a)=>{var l,c;this.color=o,E(this,ia,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,zr),{root:{fill:o,"fill-opacity":a}}),(c=d(this,ov))==null||c.updateColor(o)},s=this.color,i=d(this,ia);this.addCommands({cmd:r.bind(this,t,tt._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},RB=function(t){const r=d(this,gs),s=i=>{E(this,gs,i),R(this,Oe,PB).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},PB=function(t){if(!d(this,Tn))return;R(this,Oe,yw).call(this,{highlightOutlines:d(this,ms).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},wT=function(){d(this,zr)===null||!this.parent||(this.parent.drawLayer.remove(d(this,zr)),E(this,zr,null),this.parent.drawLayer.remove(d(this,zn)),E(this,zn,null))},Uc=function(t=this.parent){d(this,zr)===null&&({id:un(this,zr)._,clipPathId:un(this,Xu)._}=t.drawLayer.draw({bbox:d(this,ms).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,ia)},rootClass:{highlight:!0,free:d(this,Tn)},path:{d:d(this,ms).toSVGPath()}},!1,!0),E(this,zn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Tn)},bbox:d(this,_r).box,path:{d:d(this,_r).toSVGPath()}},d(this,Tn))),d(this,Qu)&&(d(this,Qu).style.clipPath=d(this,Xu)))},xs=new WeakSet,dh=function([t,r,s,i],o){switch(o){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},NB=function(t){tt._keyboardManager.exec(this,t)},vw=function(t){if(!d(this,Yf))return;const r=window.getSelection();t?r.setPosition(d(this,Yf),d(this,iv)):r.setPosition(d(this,av),d(this,lv))},Om=function(){return d(this,Tn)?this.rotation:0},IB=function(){if(d(this,Tn))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,o=d(this,sa),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:f,height:m}of o){const y=c*t+s,w=(1-u)*r+i;a[l]=a[l+4]=y,a[l+1]=a[l+3]=w,a[l+2]=a[l+6]=y+f*t,a[l+5]=a[l+7]=w-m*r,l+=8}return a},MB=function(t){return d(this,ms).serialize(t,R(this,Oe,Om).call(this))},DB=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},LB=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},FB=function(t){const{color:r}=this._initialData;return t.color.some((s,i)=>s!==r[i])},k(tt,xs),Z(tt,"_defaultColor",null),Z(tt,"_defaultOpacity",1),Z(tt,"_defaultThickness",12),Z(tt,"_type","highlight"),Z(tt,"_editorType",Ne.HIGHLIGHT),Z(tt,"_freeHighlightId",-1),Z(tt,"_freeHighlight",null),Z(tt,"_freeHighlightClipId","");let Dx=tt;var Zu;class OB{constructor(){k(this,Zu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){d(this,Zu)[e]=t}toSVGProperties(){const e=d(this,Zu);return E(this,Zu,Object.create(null)),{root:e}}reset(){E(this,Zu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ft("Not implemented")}}Zu=new WeakMap;var Hr,Qf,fn,ed,td,Bl,zl,Hl,nd,Qe,xT,bT,_T,Um,UB,ww,$m,hh;const me=class me extends vt{constructor(t){super(t);k(this,Qe);k(this,Hr,null);k(this,Qf);Z(this,"_drawId",null);E(this,Qf,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(R(this,Qe,xT).call(this,t),R(this,Qe,Um).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,o]of Object.entries(r))s.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){ft("Not implemented")}static get typesMap(){ft("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(d(me,fn).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,o=i[r],a=l=>{var u;i.updateProperty(r,l);const c=d(this,Hr).updateProperty(r,l);c&&R(this,Qe,$m).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Hr).getPathResizingSVGProperties(R(this,Qe,ww).call(this)),{bbox:R(this,Qe,hh).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Hr).getPathResizedSVGProperties(R(this,Qe,ww).call(this)),{bbox:R(this,Qe,hh).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:R(this,Qe,hh).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(d(this,Hr).getPathTranslatedSVGProperties(R(this,Qe,ww).call(this),this.parentDimensions),{bbox:R(this,Qe,hh).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Qf)&&(E(this,Qf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){R(this,Qe,_T).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Qe,Um).call(this),R(this,Qe,$m).call(this,d(this,Hr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),R(this,Qe,_T).call(this)):t&&(this._uiManager.addShouldRescale(this),R(this,Qe,Um).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties({bbox:R(this,Qe,hh).call(this)},d(this,Hr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,Qe,$m).call(this,d(this,Hr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,o){ft("Not implemented")}static startDrawing(t,r,s,i){var b;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=i;if(d(me,zl)&&d(me,zl)!==u)return;const{viewport:{rotation:f}}=t,{width:m,height:y}=o.getBoundingClientRect(),w=E(me,ed,new AbortController),v=t.combinedSignal(w);if(d(me,Bl)||E(me,Bl,c),d(me,zl)??E(me,zl,u),window.addEventListener("pointerup",x=>{var C;d(me,Bl)===x.pointerId?this._endDraw(x):(C=d(me,Hl))==null||C.delete(x.pointerId)},{signal:v}),window.addEventListener("pointercancel",x=>{var C;d(me,Bl)===x.pointerId?this._currentParent.endDrawingSession():(C=d(me,Hl))==null||C.delete(x.pointerId)},{signal:v}),window.addEventListener("pointerdown",x=>{d(me,zl)===x.pointerType&&((d(me,Hl)||E(me,Hl,new Set)).add(x.pointerId),d(me,fn).isCancellable()&&(d(me,fn).removeLastElement(),d(me,fn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",yi,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",x=>{x.timeStamp===d(me,nd)&&Yt(x)},{signal:v}),t.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),d(me,fn)){t.drawLayer.updateProperties(this._currentDrawId,d(me,fn).startNew(a,l,m,y,f));return}r.updateUIForDefaultProperties(this),E(me,fn,this.createDrawerInstance(a,l,m,y,f)),E(me,td,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(me,td).toSVGProperties(),d(me,fn).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(E(me,nd,-1),!d(me,fn))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(d(me,Bl)===i){if(((o=d(me,Hl))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(me,fn).add(r,s)),E(me,nd,t.timeStamp),Yt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(me,fn,null),E(me,td,null),E(me,zl,null),E(me,nd,NaN)),d(me,ed)&&(d(me,ed).abort(),E(me,ed,null),E(me,Bl,NaN),E(me,Hl,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,d(me,fn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=d(me,fn),i=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Ke.DRAW_STEP),!d(me,fn).isEmpty()){const{pageDimensions:[s,i],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(me,fn).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:d(me,td),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,o,a){ft("Not implemented")}static async deserialize(t,r,s){var f,m;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=r.viewport,c=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,t),u=await super.deserialize(t,r,s);return u.createDrawingOptions(t),R(f=u,Qe,xT).call(f,{drawOutlines:c}),R(m=u,Qe,Um).call(m),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[r,s]=this.pageTranslation,[i,o]=this.pageDimensions;return d(this,Hr).serialize([r,s,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Hr=new WeakMap,Qf=new WeakMap,fn=new WeakMap,ed=new WeakMap,td=new WeakMap,Bl=new WeakMap,zl=new WeakMap,Hl=new WeakMap,nd=new WeakMap,Qe=new WeakSet,xT=function({drawOutlines:t,drawId:r,drawingOptions:s}){E(this,Hr,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=R(this,Qe,bT).call(this,t,this.parent),R(this,Qe,$m).call(this,t.box)},bT=function(t,r){const{id:s}=r.drawLayer.draw(me._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},_T=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Um=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,Qe,bT).call(this,d(this,Hr),t)}},UB=function([t,r,s,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},ww=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},$m=function(t){if([this.x,this.y,this.width,this.height]=R(this,Qe,UB).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},hh=function(){const{x:t,y:r,width:s,height:i,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(l/c),i*(c/l),s*(l/c)];case 5:return[1-r,t,s*(l/c),i*(c/l)];case 6:return[1-t-i*(c/l),1-r,i*(c/l),s*(l/c)];case 7:return[r-s*(l/c),1-t-i*(c/l),s*(l/c),i*(c/l)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(c/l),r,i*(c/l),s*(l/c)];case 13:return[1-r-s*(l/c),t-i*(c/l),s*(l/c),i*(c/l)];case 14:return[1-t,1-r-s*(l/c),i*(c/l),s*(l/c)];case 15:return[r,1-t,s*(l/c),i*(c/l)];default:return[t,r,s,i]}},Z(me,"_currentDrawId",-1),Z(me,"_currentParent",null),k(me,fn,null),k(me,ed,null),k(me,td,null),k(me,Bl,NaN),k(me,zl,null),k(me,Hl,null),k(me,nd,NaN),Z(me,"_INNER_MARGIN",3);let Lx=me;var Gi,pn,mn,rd,Zf,Xn,An,ys,sd,id,od,ep,xw;class ete{constructor(e,t,r,s,i,o){k(this,ep);k(this,Gi,new Float64Array(6));k(this,pn);k(this,mn);k(this,rd);k(this,Zf);k(this,Xn);k(this,An,"");k(this,ys,0);k(this,sd,new Ov);k(this,id);k(this,od);E(this,id,r),E(this,od,s),E(this,rd,i),E(this,Zf,o),[e,t]=R(this,ep,xw).call(this,e,t);const a=E(this,pn,[NaN,NaN,NaN,NaN,e,t]);E(this,Xn,[e,t]),E(this,mn,[{line:a,points:d(this,Xn)}]),d(this,Gi).set(a,0)}updateProperty(e,t){e==="stroke-width"&&E(this,Zf,t)}isEmpty(){return!d(this,mn)||d(this,mn).length===0}isCancellable(){return d(this,Xn).length<=10}add(e,t){[e,t]=R(this,ep,xw).call(this,e,t);const[r,s,i,o]=d(this,Gi).subarray(2,6),a=e-i,l=t-o;return Math.hypot(d(this,id)*a,d(this,od)*l)<=2?null:(d(this,Xn).push(e,t),isNaN(r)?(d(this,Gi).set([i,o,e,t],2),d(this,pn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,Gi)[0])&&d(this,pn).splice(6,6),d(this,Gi).set([r,s,i,o,e,t],0),d(this,pn).push(...fe.createBezierPoints(r,s,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(d(this,Xn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){E(this,id,r),E(this,od,s),E(this,rd,i),[e,t]=R(this,ep,xw).call(this,e,t);const o=E(this,pn,[NaN,NaN,NaN,NaN,e,t]);E(this,Xn,[e,t]);const a=d(this,mn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,mn).push({line:o,points:d(this,Xn)}),d(this,Gi).set(o,0),E(this,ys,0),this.toSVGPath(),null}getLastElement(){return d(this,mn).at(-1)}setLastElement(e){return d(this,mn)?(d(this,mn).push(e),E(this,pn,e.line),E(this,Xn,e.points),E(this,ys,0),{path:{d:this.toSVGPath()}}):d(this,sd).setLastElement(e)}removeLastElement(){if(!d(this,mn))return d(this,sd).removeLastElement();d(this,mn).pop(),E(this,An,"");for(let e=0,t=d(this,mn).length;e<t;e++){const{line:r,points:s}=d(this,mn)[e];E(this,pn,r),E(this,Xn,s),E(this,ys,0),this.toSVGPath()}return{path:{d:d(this,An)}}}toSVGPath(){const e=fe.svgRound(d(this,pn)[4]),t=fe.svgRound(d(this,pn)[5]);if(d(this,Xn).length===2)return E(this,An,`${d(this,An)} M ${e} ${t} Z`),d(this,An);if(d(this,Xn).length<=6){const s=d(this,An).lastIndexOf("M");E(this,An,`${d(this,An).slice(0,s)} M ${e} ${t}`),E(this,ys,6)}if(d(this,Xn).length===4){const s=fe.svgRound(d(this,pn)[10]),i=fe.svgRound(d(this,pn)[11]);return E(this,An,`${d(this,An)} L ${s} ${i}`),E(this,ys,12),d(this,An)}const r=[];d(this,ys)===0&&(r.push(`M ${e} ${t}`),E(this,ys,6));for(let s=d(this,ys),i=d(this,pn).length;s<i;s+=6){const[o,a,l,c,u,f]=d(this,pn).slice(s,s+6).map(fe.svgRound);r.push(`C${o} ${a} ${l} ${c} ${u} ${f}`)}return E(this,An,d(this,An)+r.join(" ")),E(this,ys,d(this,pn).length),d(this,An)}getOutlines(e,t,r,s){const i=d(this,mn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),d(this,sd).build(d(this,mn),e,t,r,d(this,rd),d(this,Zf),s),E(this,Gi,null),E(this,pn,null),E(this,mn,null),E(this,An,null),d(this,sd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Gi=new WeakMap,pn=new WeakMap,mn=new WeakMap,rd=new WeakMap,Zf=new WeakMap,Xn=new WeakMap,An=new WeakMap,ys=new WeakMap,sd=new WeakMap,id=new WeakMap,od=new WeakMap,ep=new WeakSet,xw=function(e,t){return fe._normalizePoint(e,t,d(this,id),d(this,od),d(this,rd))};var Qn,uv,dv,Gr,qi,Wi,tp,np,ad,Pn,Ao,$B,jB,VB;class Ov extends fe{constructor(){super(...arguments);k(this,Pn);k(this,Qn);k(this,uv,0);k(this,dv);k(this,Gr);k(this,qi);k(this,Wi);k(this,tp);k(this,np);k(this,ad)}build(t,r,s,i,o,a,l){E(this,qi,r),E(this,Wi,s),E(this,tp,i),E(this,np,o),E(this,ad,a),E(this,dv,l??0),E(this,Gr,t),R(this,Pn,jB).call(this)}get thickness(){return d(this,ad)}setLastElement(t){return d(this,Gr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Gr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of d(this,Gr)){if(t.push(`M${fe.svgRound(r[4])} ${fe.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${fe.svgRound(r[10])} ${fe.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[o,a,l,c,u,f]=r.subarray(s,s+6).map(fe.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${f}`)}}return t.join("")}serialize([t,r,s,i],o){const a=[],l=[],[c,u,f,m]=R(this,Pn,$B).call(this);let y,w,v,b,x,C,_,T,A;switch(d(this,np)){case 0:A=fe._rescale,y=t,w=r+i,v=s,b=-i,x=t+c*s,C=r+(1-u-m)*i,_=t+(c+f)*s,T=r+(1-u)*i;break;case 90:A=fe._rescaleAndSwap,y=t,w=r,v=s,b=i,x=t+u*s,C=r+c*i,_=t+(u+m)*s,T=r+(c+f)*i;break;case 180:A=fe._rescale,y=t+s,w=r,v=-s,b=i,x=t+(1-c-f)*s,C=r+u*i,_=t+(1-c)*s,T=r+(u+m)*i;break;case 270:A=fe._rescaleAndSwap,y=t+s,w=r+i,v=-s,b=-i,x=t+(1-u-m)*s,C=r+(1-c-f)*i,_=t+(1-u)*s,T=r+(1-c)*i;break}for(const{line:P,points:N}of d(this,Gr))a.push(A(P,y,w,v,b,o?new Array(P.length):null)),l.push(A(N,y,w,v,b,o?new Array(N.length):null));return{lines:a,points:l,rect:[x,C,_,T]}}static deserialize(t,r,s,i,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const f=[];let m,y,w,v,b;switch(c){case 0:b=fe._rescale,m=-t/s,y=r/i+1,w=1/s,v=-1/i;break;case 90:b=fe._rescaleAndSwap,m=-r/i,y=-t/s,w=1/i,v=1/s;break;case 180:b=fe._rescale,m=t/s+1,y=-r/i,w=-1/s,v=1/i;break;case 270:b=fe._rescaleAndSwap,m=r/i+1,y=t/s+1,w=-1/i,v=-1/s;break}if(!a){a=[];for(const C of l){const _=C.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const T=new Float32Array(3*(_-2));a.push(T);let[A,P,N,I]=C.subarray(0,4);T.set([NaN,NaN,NaN,NaN,A,P],0);for(let M=4;M<_;M+=2){const D=C[M],F=C[M+1];T.set(fe.createBezierPoints(A,P,N,I,D,F),(M-2)*3),[A,P,N,I]=[N,I,D,F]}}}for(let C=0,_=a.length;C<_;C++)f.push({line:b(a[C].map(T=>T??NaN),m,y,w,v),points:b(l[C].map(T=>T??NaN),m,y,w,v)});const x=new this.prototype.constructor;return x.build(f,s,i,1,c,u,o),x}get box(){return d(this,Qn)}updateProperty(t,r){return t==="stroke-width"?R(this,Pn,VB).call(this,r):null}updateParentDimensions([t,r],s){const[i,o]=R(this,Pn,Ao).call(this);E(this,qi,t),E(this,Wi,r),E(this,tp,s);const[a,l]=R(this,Pn,Ao).call(this),c=a-i,u=l-o,f=d(this,Qn);return f[0]-=c,f[1]-=u,f[2]+=2*c,f[3]+=2*u,f}updateRotation(t){return E(this,uv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Qn).map(fe.svgRound).join(" ")}get defaultProperties(){const[t,r]=d(this,Qn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(t)} ${fe.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=d(this,Qn);let s=0,i=0,o=0,a=0,l=0,c=0;switch(d(this,uv)){case 90:i=r/t,o=-t/r,l=t;break;case 180:s=-1,a=-1,l=t,c=r;break;case 270:i=-r/t,o=t/r,c=r;break;default:return""}return`matrix(${s} ${i} ${o} ${a} ${fe.svgRound(l)} ${fe.svgRound(c)})`}getPathResizingSVGProperties([t,r,s,i]){const[o,a]=R(this,Pn,Ao).call(this),[l,c,u,f]=d(this,Qn);if(Math.abs(u-o)<=fe.PRECISION||Math.abs(f-a)<=fe.PRECISION){const b=t+s/2-(l+u/2),x=r+i/2-(c+f/2);return{path:{"transform-origin":`${fe.svgRound(t)} ${fe.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${x})`}}}const m=(s-2*o)/(u-2*o),y=(i-2*a)/(f-2*a),w=u/s,v=f/i;return{path:{"transform-origin":`${fe.svgRound(l)} ${fe.svgRound(c)}`,transform:`${this.rotationTransform} scale(${w} ${v}) translate(${fe.svgRound(o)} ${fe.svgRound(a)}) scale(${m} ${y}) translate(${fe.svgRound(-o)} ${fe.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[o,a]=R(this,Pn,Ao).call(this),l=d(this,Qn),[c,u,f,m]=l;if(l[0]=t,l[1]=r,l[2]=s,l[3]=i,Math.abs(f-o)<=fe.PRECISION||Math.abs(m-a)<=fe.PRECISION){const x=t+s/2-(c+f/2),C=r+i/2-(u+m/2);for(const{line:_,points:T}of d(this,Gr))fe._translate(_,x,C,_),fe._translate(T,x,C,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(t)} ${fe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(f-2*o),w=(i-2*a)/(m-2*a),v=-y*(c+o)+t+o,b=-w*(u+a)+r+a;if(y!==1||w!==1||v!==0||b!==0)for(const{line:x,points:C}of d(this,Gr))fe._rescale(x,v,b,y,w,x),fe._rescale(C,v,b,y,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(t)} ${fe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,o]=s,a=d(this,Qn),l=t-a[0],c=r-a[1];if(d(this,qi)===i&&d(this,Wi)===o)for(const{line:u,points:f}of d(this,Gr))fe._translate(u,l,c,u),fe._translate(f,l,c,f);else{const u=d(this,qi)/i,f=d(this,Wi)/o;E(this,qi,i),E(this,Wi,o);for(const{line:m,points:y}of d(this,Gr))fe._rescale(m,l,c,u,f,m),fe._rescale(y,l,c,u,f,y);a[2]*=u,a[3]*=f}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(t)} ${fe.svgRound(r)}`}}}get defaultSVGProperties(){const t=d(this,Qn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(t[0])} ${fe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Qn=new WeakMap,uv=new WeakMap,dv=new WeakMap,Gr=new WeakMap,qi=new WeakMap,Wi=new WeakMap,tp=new WeakMap,np=new WeakMap,ad=new WeakMap,Pn=new WeakSet,Ao=function(t=d(this,ad)){const r=d(this,dv)+t/2*d(this,tp);return d(this,np)%180===0?[r/d(this,qi),r/d(this,Wi)]:[r/d(this,Wi),r/d(this,qi)]},$B=function(){const[t,r,s,i]=d(this,Qn),[o,a]=R(this,Pn,Ao).call(this,0);return[t+o,r+a,s-2*o,i-2*a]},jB=function(){const t=E(this,Qn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of d(this,Gr)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)Ce.pointBoundingBox(i[l],i[l+1],t);continue}let o=i[4],a=i[5];for(let l=6,c=i.length;l<c;l+=6){const[u,f,m,y,w,v]=i.subarray(l,l+6);Ce.bezierBoundingBox(o,a,u,f,m,y,w,v,t),o=w,a=v}}const[r,s]=R(this,Pn,Ao).call(this);t[0]=tr(t[0]-r,0,1),t[1]=tr(t[1]-s,0,1),t[2]=tr(t[2]+r,0,1),t[3]=tr(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},VB=function(t){const[r,s]=R(this,Pn,Ao).call(this);E(this,ad,t);const[i,o]=R(this,Pn,Ao).call(this),[a,l]=[i-r,o-s],c=d(this,Qn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class c_ extends OB{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new c_(this._viewParameters);return e.updateAll(this),e}}var nb,BB;const Rh=class Rh extends Lx{constructor(t){super({...t,name:"inkEditor"});k(this,nb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){vt.initialize(t,r),this._defaultDrawingOptions=new c_(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return qe(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,o){return new ete(t,r,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,o,a){return Ov.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){let i=null;if(t instanceof pk){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:f,opacity:m,borderStyle:{rawWidth:y},popupRef:w},parent:{page:{pageNumber:v}}}=t;i=t={annotationType:Ne.INK,color:Array.from(f),thickness:y,opacity:m,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:w}}const o=await super.deserialize(t,r,s);return o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Rh.getDefaultDrawingOptions({stroke:Ce.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:Ne.INK,color:vt._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!R(this,nb,BB).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r}),null}};nb=new WeakSet,BB=function(t){const{color:r,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==r[l])||t.thickness!==s||t.opacity!==i||t.pageIndex!==o},Z(Rh,"_type","ink"),Z(Rh,"_editorType",Ne.INK),Z(Rh,"_defaultDrawingOptions",null);let CT=Rh;class ST extends Ov{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const T0=8,um=3;var ld,st,ET,ei,zB,HB,TT,bw,GB,qB,WB,AT,kT,KB;class ma{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const f=200,m=u.font=`${r} ${s} ${f}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:b,fontBoundingBoxAscent:x,fontBoundingBoxDescent:C,width:_}=u.measureText(e),T=1.5,A=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,_)*T),P=Math.ceil(Math.max(Math.abs(v)+Math.abs(b)||f,Math.abs(x)+Math.abs(C)||f)*T);c=new OffscreenCanvas(A,P),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=m,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,A,P),u.fillStyle="black",u.fillText(e,A*(T-1)/2,P*(3-T)/2);const N=R(this,st,AT).call(this,u.getImageData(0,0,A,P).data),I=R(this,st,WB).call(this,N),M=R(this,st,kT).call(this,I),D=R(this,st,TT).call(this,N,A,P,M);return this.processDrawnLines({lines:{curves:D,width:A,height:P},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[o,a,l]=R(this,st,KB).call(this,e),[c,u]=R(this,st,qB).call(this,o,a,l,Math.hypot(a,l)*d(this,ld).sigmaSFactor,d(this,ld).sigmaR,d(this,ld).kernelSize),f=R(this,st,kT).call(this,u),m=R(this,st,TT).call(this,c,a,l,f);return this.processDrawnLines({lines:{curves:m,width:a,height:l},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:o,areContours:a}){s%180!==0&&([t,r]=[r,t]);const{curves:l,width:c,height:u}=e,f=e.thickness??0,m=[],y=Math.min(t/c,r/u),w=y/t,v=y/r,b=[];for(const{points:C}of l){const _=o?R(this,st,GB).call(this,C):C;if(!_)continue;b.push(_);const T=_.length,A=new Float32Array(T),P=new Float32Array(3*(T===2?2:T-2));if(m.push({line:P,points:A}),T===2){A[0]=_[0]*w,A[1]=_[1]*v,P.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[N,I,M,D]=_;N*=w,I*=v,M*=w,D*=v,A.set([N,I,M,D],0),P.set([NaN,NaN,NaN,NaN,N,I],0);for(let F=4;F<T;F+=2){const $=A[F]=_[F]*w,G=A[F+1]=_[F+1]*v;P.set(fe.createBezierPoints(N,I,M,D,$,G),(F-2)*3),[N,I,M,D]=[M,D,$,G]}}if(m.length===0)return null;const x=a?new ST:new Ov;return x.build(m,t,r,1,s,a?0:f,i),{outline:x,newCurves:b,areContours:a,thickness:f,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let o=1/0,a=-1/0,l=0;for(const _ of e){l+=_.length;for(let T=2,A=_.length;T<A;T++){const P=_[T]-_[T-2];o=Math.min(o,P),a=Math.max(a,P)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,f=T0+um*u,m=new Uint32Array(f);let y=0;m[y++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,m[y++]=0,m[y++]=s,m[y++]=i,m[y++]=t?0:1,m[y++]=Math.max(0,Math.floor(r??0)),m[y++]=u,m[y++]=c.BYTES_PER_ELEMENT;for(const _ of e)m[y++]=_.length-2,m[y++]=_[0],m[y++]=_[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const b=c.prototype.constructor;for(const _ of e){const T=new b(_.length-2);for(let A=2,P=_.length;A<P;A++)T[A-2]=_[A]-_[A-2];v.write(T)}v.close();const x=await new Response(w.readable).arrayBuffer(),C=new Uint8Array(x);return Kj(C)}static async decompressSignature(e){try{const t=SZ(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const _ of r)o||(o=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),o.set(_,a),a+=_.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],f=l[3],m=l[4]===0,y=l[5],w=l[6],v=l[7],b=[],x=(T0+um*w)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(v){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,x);break}a=0;for(let _=0;_<w;_++){const T=l[um*_+T0],A=new Float32Array(T+2);b.push(A);for(let P=0;P<um-1;P++)A[P]=l[um*_+T0+P+1];for(let P=0;P<T;P++)A[P+2]=A[P]+C[a++]}return{areContours:m,thickness:y,outlines:b,width:u,height:f}}catch(t){return Ie(`decompressSignature: ${t}`),null}}}ld=new WeakMap,st=new WeakSet,ET=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},ei=new WeakMap,zB=function(e,t,r,s,i,o,a){const l=R(this,st,ET).call(this,r,s,i,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,f=d(this,ei)[2*u],m=d(this,ei)[2*u+1];if(e[(r+f)*t+(s+m)]!==0)return u}return-1},HB=function(e,t,r,s,i,o,a){const l=R(this,st,ET).call(this,r,s,i,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,f=d(this,ei)[2*u],m=d(this,ei)[2*u+1];if(e[(r+f)*t+(s+m)]!==0)return u}return-1},TT=function(e,t,r,s){const i=e.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=e[u]<=s?1:0;for(let u=1;u<r-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*r-1-u]=0;let a=1,l;const c=[];for(let u=1;u<r-1;u++){l=1;for(let f=1;f<t-1;f++){const m=u*t+f,y=o[m];if(y===0)continue;let w=u,v=f;if(y===1&&o[m-1]===0)a+=1,v-=1;else if(y>=1&&o[m+1]===0)a+=1,v+=1,y>1&&(l=y);else{y!==1&&(l=Math.abs(y));continue}const b=[f,u],x=v===f+1,C={isHole:x,points:b,id:a,parent:0};c.push(C);let _;for(const F of c)if(F.id===l){_=F;break}_?_.isHole?C.parent=x?_.parent:l:C.parent=x?l:_.parent:C.parent=x?l:0;const T=R(this,st,zB).call(this,o,t,u,f,w,v,0);if(T===-1){o[m]=-a,o[m]!==1&&(l=Math.abs(o[m]));continue}let A=d(this,ei)[2*T],P=d(this,ei)[2*T+1];const N=u+A,I=f+P;w=N,v=I;let M=u,D=f;for(;;){const F=R(this,st,HB).call(this,o,t,M,D,w,v,1);A=d(this,ei)[2*F],P=d(this,ei)[2*F+1];const $=M+A,G=D+P;b.push(G,$);const O=M*t+D;if(o[O+1]===0?o[O]=-a:o[O]===1&&(o[O]=a),$===u&&G===f&&M===N&&D===I){o[m]!==1&&(l=Math.abs(o[m]));break}else w=M,v=D,M=$,D=G}}}return c},bw=function(e,t,r,s){if(r-t<=4){for(let N=t;N<r-2;N+=2)s.push(e[N],e[N+1]);return}const i=e[t],o=e[t+1],a=e[r-4]-i,l=e[r-3]-o,c=Math.hypot(a,l),u=a/c,f=l/c,m=u*o-f*i,y=l/a,w=1/c,v=Math.atan(y),b=Math.cos(v),x=Math.sin(v),C=w*(Math.abs(b)+Math.abs(x)),_=w*(1-C+C**2),T=Math.max(Math.atan(Math.abs(x+b)*_),Math.atan(Math.abs(x-b)*_));let A=0,P=t;for(let N=t+2;N<r-2;N+=2){const I=Math.abs(m-u*e[N+1]+f*e[N]);I>A&&(P=N,A=I)}A>(c*T)**2?(R(this,st,bw).call(this,e,t,P+2,s),R(this,st,bw).call(this,e,P,r,s)):s.push(i,o)},GB=function(e){const t=[],r=e.length;return R(this,st,bw).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},qB=function(e,t,r,s,i,o){const a=new Float32Array(o**2),l=-2*s**2,c=o>>1;for(let v=0;v<o;v++){const b=(v-c)**2;for(let x=0;x<o;x++)a[v*o+x]=Math.exp((b+(x-c)**2)/l)}const u=new Float32Array(256),f=-2*i**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/f);const m=e.length,y=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<r;v++)for(let b=0;b<t;b++){const x=v*t+b,C=e[x];let _=0,T=0;for(let P=0;P<o;P++){const N=v+P-c;if(!(N<0||N>=r))for(let I=0;I<o;I++){const M=b+I-c;if(M<0||M>=t)continue;const D=e[N*t+M],F=a[P*o+I]*u[Math.abs(D-C)];_+=D*F,T+=F}}const A=y[x]=Math.round(_/T);w[A]++}return[y,w]},WB=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},AT=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let a=0,l=r.length;a<l;a++){if(e[(a<<2)+3]===0){s=r[a]=255;continue}const u=r[a]=e[a<<2];u>s&&(s=u),u<i&&(i=u)}const o=255/(s-i);for(let a=0;a<t;a++)r[a]=(r[a]-i)*o;return r},kT=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(t=i;t<256;t++){const l=e[t];l>r&&(t-o>s&&(s=t-o,a=t-1),r=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},KB=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=d(this,ld);let o=r,a=s;if(r>i||s>i){let m=r,y=s,w=Math.log2(Math.max(r,s)/i);const v=Math.floor(w);w=w===v?v-1:v;for(let x=0;x<w;x++){o=Math.ceil(m/2),a=Math.ceil(y/2);const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(e,0,0,m,y,0,0,o,a),m=o,y=a,e!==t&&e.close(),e=C.transferToImageBitmap()}const b=Math.min(i/o,i/a);o=Math.round(o*b),a=Math.round(a*b)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[R(this,st,AT).call(this,u),o,a]},k(ma,st),k(ma,ld,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(ma,ei,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class mk extends OB{constructor(){super(),super.updateProperties({fill:vt._defaultLineColor,"stroke-width":0})}clone(){const e=new mk;return e.updateAll(this),e}}class gk extends c_{constructor(e){super(e),super.updateProperties({stroke:vt._defaultLineColor,"stroke-width":1})}clone(){const e=new gk(this._viewParameters);return e.updateAll(this),e}}var Gl,Ki,ql,cd;const Mr=class Mr extends Lx{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,Gl,!1);k(this,Ki,null);k(this,ql,null);k(this,cd,null);this._willKeepAspectRatio=!0,E(this,ql,t.signatureData||null),E(this,Ki,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){vt.initialize(t,r),this._defaultDrawingOptions=new mk,this._defaultDrawnSignatureOptions=new gk(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return qe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Ki)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(d(this,ql)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=d(this,ql),{rawDims:{pageWidth:f,pageHeight:m},rotation:y}=this.parent.viewport,w=ma.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:y,innerMargin:Mr._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(w,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){E(this,cd,t),this.addEditToolbar()}getUuid(){return d(this,cd)}get description(){return d(this,Ki)}set description(t){E(this,Ki,t),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:o}=d(this,ql),a=Math.max(i,o),l=ma.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:s,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:o,y:a}=this,{outline:l}=E(this,ql,t);E(this,Gl,l instanceof ST),this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let c;d(this,Gl)?c=Mr.getDefaultDrawingOptions():(c=Mr._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,f]=this.parentDimensions,[,m]=this.pageDimensions;let y=r/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(u*this.width,f*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return ma.process(t,r,s,i,Mr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return ma.extractContoursFromText(t,r,s,i,o,Mr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return ma.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:Mr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Mr.getDefaultDrawingOptions():(this._drawingOptions=Mr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Ne.SIGNATURE,isSignature:!0,areContours:d(this,Gl),color:[0,0,0],thickness:d(this,Gl)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:r,points:s},a.uuid=d(this,cd),a.isCopy=!0):a.lines=r,d(this,Ki)&&(a.accessibilityData={type:"Figure",alt:d(this,Ki)}),a}static deserializeDraw(t,r,s,i,o,a){return a.areContours?ST.deserialize(t,r,s,i,o,a):Ov.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){var o;const i=await super.deserialize(t,r,s);return E(i,Gl,t.areContours),E(i,Ki,((o=t.accessibilityData)==null?void 0:o.alt)||""),E(i,cd,t.uuid),i}};Gl=new WeakMap,Ki=new WeakMap,ql=new WeakMap,cd=new WeakMap,Z(Mr,"_type","signature"),Z(Mr,"_editorType",Ne.SIGNATURE),Z(Mr,"_defaultDrawingOptions",null);let RT=Mr;var At,gn,Wl,oa,Kl,rp,aa,ud,Yi,qr,sp,Ze,jm,Vm,_w,Cw,Sw,NT,Ew,YB;class PT extends vt{constructor(t){super({...t,name:"stampEditor"});k(this,Ze);k(this,At,null);k(this,gn,null);k(this,Wl,null);k(this,oa,null);k(this,Kl,null);k(this,rp,"");k(this,aa,null);k(this,ud,!1);k(this,Yi,null);k(this,qr,!1);k(this,sp,!1);E(this,oa,t.bitmapUrl),E(this,Kl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){vt.initialize(t,r)}static isHandlingMimeForPasting(t){return CE.includes(t)}static paste(t,r){r.pasteEditor({mode:Ne.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;d(this,gn)&&(E(this,At,null),this._uiManager.imageManager.deleteId(d(this,gn)),(t=d(this,aa))==null||t.remove(),E(this,aa,null),d(this,Yi)&&(clearTimeout(d(this,Yi)),E(this,Yi,null))),super.remove()}rebuild(){if(!this.parent){d(this,gn)&&R(this,Ze,_w).call(this);return}super.rebuild(),this.div!==null&&(d(this,gn)&&d(this,aa)===null&&R(this,Ze,_w).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,Wl)||d(this,At)||d(this,oa)||d(this,Kl)||d(this,gn)||d(this,ud))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,ud)||(d(this,At)?R(this,Ze,Cw).call(this):R(this,Ze,_w).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(E(this,gn,s),i&&E(this,At,i),E(this,ud,!1),R(this,Ze,Cw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Yi)!==null&&clearTimeout(d(this,Yi)),E(this,Yi,setTimeout(()=>{E(this,Yi,null),R(this,Ze,NT).call(this)},200))}copyCanvas(t,r,s=!1){var y;t||(t=224);const{width:i,height:o}=d(this,At),a=new po;let l=d(this,At),c=i,u=o,f=null;if(r){if(i>r||o>r){const I=Math.min(r/i,r/o);c=Math.floor(i*I),u=Math.floor(o*I)}f=document.createElement("canvas");const w=f.width=Math.ceil(c*a.sx),v=f.height=Math.ceil(u*a.sy);d(this,qr)||(l=R(this,Ze,Sw).call(this,w,v));const b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let x="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(y=window.matchMedia)!=null&&y.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",C="#42414d");const _=15,T=_*a.sx,A=_*a.sy,P=new OffscreenCanvas(T*2,A*2),N=P.getContext("2d");N.fillStyle=x,N.fillRect(0,0,T*2,A*2),N.fillStyle=C,N.fillRect(0,0,T,A),N.fillRect(T,A,T,A),b.fillStyle=b.createPattern(P,"repeat"),b.fillRect(0,0,w,v),b.drawImage(l,0,0,l.width,l.height,0,0,w,v)}let m=null;if(s){let w,v;if(a.symmetric&&l.width<t&&l.height<t)w=l.width,v=l.height;else if(l=d(this,At),i>t||o>t){const C=Math.min(t/i,t/o);w=Math.floor(i*C),v=Math.floor(o*C),d(this,qr)||(l=R(this,Ze,Sw).call(this,w,v))}const x=new OffscreenCanvas(w,v).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,w,v),m={width:w,height:v,data:x.getImageData(0,0,w,v).data}}return{canvas:f,width:c,height:u,imageData:m}}static async deserialize(t,r,s){var b;let i=null,o=!1;if(t instanceof uB){const{data:{rect:x,rotation:C,id:_,structParent:T,popupRef:A},container:P,parent:{page:{pageNumber:N}},canvas:I}=t;let M,D;I?(delete t.canvas,{id:M,bitmap:D}=s.imageManager.getFromCanvas(P.id,I),I.remove()):(o=!0,t._hasNoCanvas=!0);const F=((b=await r._structTree.getAriaAttributes(`${ok}${_}`))==null?void 0:b.get("aria-label"))||"";i=t={annotationType:Ne.STAMP,bitmapId:M,bitmap:D,pageIndex:N-1,rect:x.slice(0),rotation:C,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:T,popupRef:A}}const a=await super.deserialize(t,r,s),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:f,isSvg:m,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,a),E(a,ud,!0)):f&&s.imageManager.isValidId(f)?(E(a,gn,f),c&&E(a,At,c)):E(a,oa,u),E(a,qr,m);const[w,v]=a.pageDimensions;return a.width=(l[2]-l[0])/w,a.height=(l[3]-l[1])/v,y&&(a.altTextData=y),a._initialData=i,E(a,sp,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Ne.STAMP,bitmapId:d(this,gn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,qr),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=R(this,Ze,Ew).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=R(this,Ze,YB).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const a=d(this,qr)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(d(this,gn)))r.stamps.set(d(this,gn),{area:a,serialized:s}),s.bitmap=R(this,Ze,Ew).call(this,!1);else if(d(this,qr)){const l=r.stamps.get(d(this,gn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=R(this,Ze,Ew).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}At=new WeakMap,gn=new WeakMap,Wl=new WeakMap,oa=new WeakMap,Kl=new WeakMap,rp=new WeakMap,aa=new WeakMap,ud=new WeakMap,Yi=new WeakMap,qr=new WeakMap,sp=new WeakMap,Ze=new WeakSet,jm=function(t,r=!1){if(!t){this.remove();return}E(this,At,t.bitmap),r||(E(this,gn,t.id),E(this,qr,t.isSvg)),t.file&&E(this,rp,t.file.name),R(this,Ze,Cw).call(this)},Vm=function(){if(E(this,Wl,null),this._uiManager.enableWaiting(!1),!!d(this,aa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,At)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,At)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},_w=function(){if(d(this,gn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,gn)).then(s=>R(this,Ze,jm).call(this,s,!0)).finally(()=>R(this,Ze,Vm).call(this));return}if(d(this,oa)){const s=d(this,oa);E(this,oa,null),this._uiManager.enableWaiting(!0),E(this,Wl,this._uiManager.imageManager.getFromUrl(s).then(i=>R(this,Ze,jm).call(this,i)).finally(()=>R(this,Ze,Vm).call(this)));return}if(d(this,Kl)){const s=d(this,Kl);E(this,Kl,null),this._uiManager.enableWaiting(!0),E(this,Wl,this._uiManager.imageManager.getFromFile(s).then(i=>R(this,Ze,jm).call(this,i)).finally(()=>R(this,Ze,Vm).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=CE.join(",");const r=this._uiManager._signal;E(this,Wl,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,Ze,jm).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>R(this,Ze,Vm).call(this))),t.click()},Cw=function(){var f;const{div:t}=this;let{width:r,height:s}=d(this,At);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const m=Math.min(a*i/r,a*o/s);r*=m,s*=m}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/o),this._uiManager.enableWaiting(!1);const u=E(this,aa,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=r/i,this.height=s/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,Ze,NT).call(this),d(this,sp)||(this.parent.addUndoableEditor(this),E(this,sp,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,rp)&&this.div.setAttribute("aria-description",d(this,rp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Sw=function(t,r){const{width:s,height:i}=d(this,At);let o=s,a=i,l=d(this,At);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},NT=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,o=new po,a=Math.ceil(s*t*o.sx),l=Math.ceil(i*r*o.sy),c=d(this,aa);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=d(this,qr)?d(this,At):R(this,Ze,Sw).call(this,a,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,l)},Ew=function(t){if(t){if(d(this,qr)){const i=this._uiManager.imageManager.getSvgUrl(d(this,gn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=d(this,At),r.getContext("2d").drawImage(d(this,At),0,0),r.toDataURL()}if(d(this,qr)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*wc.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*wc.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(d(this,At),0,0,d(this,At).width,d(this,At).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(d(this,At))},YB=function(t){var a;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},Z(PT,"_type","stamp"),Z(PT,"_editorType",Ne.STAMP);var dd,ip,Ji,Yl,la,Wr,Jl,op,hd,ti,ca,yn,ua,Xl,ap,be,Ql,kt,JB,Ri,MT,DT,Tw;const Vs=class Vs{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){k(this,kt);k(this,dd);k(this,ip,!1);k(this,Ji,null);k(this,Yl,null);k(this,la,null);k(this,Wr,new Map);k(this,Jl,!1);k(this,op,!1);k(this,hd,!1);k(this,ti,null);k(this,ca,null);k(this,yn,null);k(this,ua,null);k(this,Xl,null);k(this,ap,-1);k(this,be);const f=[...d(Vs,Ql).values()];if(!Vs._initialized){Vs._initialized=!0;for(const m of f)m.initialize(u,e)}e.registerEditorTypes(f),E(this,be,e),this.pageIndex=t,this.div=r,E(this,dd,i),E(this,Ji,o),this.viewport=c,E(this,yn,l),this.drawLayer=a,this._structTree=s,d(this,be).addLayer(this)}get isEmpty(){return d(this,Wr).size===0}get isInvisible(){return this.isEmpty&&d(this,be).getMode()===Ne.NONE}updateToolbar(e){d(this,be).updateToolbar(e)}updateMode(e=d(this,be).getMode()){switch(R(this,kt,Tw).call(this),e){case Ne.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of d(Vs,Ql).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,yn))==null?void 0:t.div)}setEditingState(e){d(this,be).setEditingState(e)}addCommands(e){d(this,be).addCommands(e)}cleanUndoStack(e){d(this,be).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,Ji))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;E(this,hd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=d(this,Xl))==null||r.abort(),E(this,Xl,null);const e=new Set;for(const s of d(this,Wr).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,be).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!d(this,Ji)){E(this,hd,!1);return}const t=d(this,Ji).getEditableAnnotations();for(const s of t){if(s.hide(),d(this,be).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}E(this,hd,!1)}disable(){var s;if(E(this,op,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,yn)&&!d(this,Xl)){E(this,Xl,new AbortController);const i=d(this,be).combinedSignal(d(this,Xl));d(this,yn).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,f=d(this,ap);if(u-f>500){E(this,ap,u);return}E(this,ap,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(l,c);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let w;const v=new RegExp(`^${zj}[0-9]+$`);for(const x of y)if(v.test(x.id)){w=x.id;break}if(!w)return;const b=d(this,Wr).get(w);(b==null?void 0:b.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of d(this,Wr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(d(this,Ji)){const i=d(this,Ji).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(d(this,be).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(d(this,be).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}R(this,kt,Tw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of d(Vs,Ql).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,op,!1)}getEditableAnnotation(e){var t;return((t=d(this,Ji))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,be).getActive()!==e&&d(this,be).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,yn))!=null&&e.div&&!d(this,ua)){E(this,ua,new AbortController);const t=d(this,be).combinedSignal(d(this,ua));d(this,yn).div.addEventListener("pointerdown",R(this,kt,JB).bind(this),{signal:t}),d(this,yn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,yn))!=null&&e.div&&d(this,ua)&&(d(this,ua).abort(),E(this,ua,null),d(this,yn).div.classList.remove("highlighting"))}enableClick(){if(d(this,Yl))return;E(this,Yl,new AbortController);const e=d(this,be).combinedSignal(d(this,Yl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,Yl))==null||e.abort(),E(this,Yl,null)}attach(e){d(this,Wr).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,be).isDeletedAnnotationElement(t)&&d(this,be).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,Wr).delete(e.id),(t=d(this,dd))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,op)&&e.annotationElementId&&d(this,be).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,be).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,be).addDeletedAnnotationElement(e.annotationElementId),vt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,be).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,hd)),d(this,be).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,la)&&(e._focusEventsAllowed=!1,E(this,la,setTimeout(()=>{E(this,la,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,be)._signal}),t.focus())},0))),e._structTreeParentId=(r=d(this,dd))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return d(this,be).getId()}combinedSignal(e){return d(this,be).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,kt,Ri))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,be).updateMode(e.mode);const{offsetX:r,offsetY:s}=R(this,kt,DT).call(this),i=this.getNextId(),o=R(this,kt,MT).call(this,{parent:this,id:i,x:r,y:s,uiManager:d(this,be),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=d(Vs,Ql).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,be)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=R(this,kt,MT).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:d(this,be),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(R(this,kt,DT).call(this),!0,e)}setSelected(e){d(this,be).setSelected(e)}toggleSelected(e){d(this,be).toggleSelected(e)}unselect(e){d(this,be).unselect(e)}pointerup(e){var s;const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,Jl)||(E(this,Jl,!1),(s=d(this,kt,Ri))!=null&&s.isDrawer&&d(this,kt,Ri).supportMultipleDrawings))return;if(!d(this,ip)){E(this,ip,!0);return}const r=d(this,be).getMode();if(r===Ne.STAMP||r===Ne.SIGNATURE){d(this,be).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(d(this,be).getMode()===Ne.HIGHLIGHT&&this.enableTextSelection(),d(this,Jl)){E(this,Jl,!1);return}const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,Jl,!0),(s=d(this,kt,Ri))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=d(this,be).getActive();E(this,ip,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,ti)){d(this,kt,Ri).startDrawing(this,d(this,be),!1,e);return}d(this,be).setCurrentDrawingSession(this),E(this,ti,new AbortController);const t=d(this,be).combinedSignal(d(this,ti));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(E(this,ca,null),this.commitOrRemove())},{signal:t}),d(this,kt,Ri).startDrawing(this,d(this,be),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,ca,t);return}d(this,ca)&&setTimeout(()=>{var t;(t=d(this,ca))==null||t.focus(),E(this,ca,null)},0)}endDrawingSession(e=!1){return d(this,ti)?(d(this,be).setCurrentDrawingSession(null),d(this,ti).abort(),E(this,ti,null),E(this,ca,null),d(this,kt,Ri).endDrawing(e)):null}findNewParent(e,t,r){const s=d(this,be).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return d(this,ti)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,ti)&&d(this,kt,Ri).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,be).getActive())==null?void 0:e.parent)===this&&(d(this,be).commitOrRemove(),d(this,be).setActiveEditor(null)),d(this,la)&&(clearTimeout(d(this,la)),E(this,la,null));for(const r of d(this,Wr).values())(t=d(this,dd))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,d(this,Wr).clear(),d(this,be).removeLayer(this)}render({viewport:e}){this.viewport=e,Id(this.div,e);for(const t of d(this,be).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,be).commitOrRemove(),R(this,kt,Tw).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Id(this.div,{rotation:r}),t!==r)for(const s of d(this,Wr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,be).viewParameters.realScale}};dd=new WeakMap,ip=new WeakMap,Ji=new WeakMap,Yl=new WeakMap,la=new WeakMap,Wr=new WeakMap,Jl=new WeakMap,op=new WeakMap,hd=new WeakMap,ti=new WeakMap,ca=new WeakMap,yn=new WeakMap,ua=new WeakMap,Xl=new WeakMap,ap=new WeakMap,be=new WeakMap,Ql=new WeakMap,kt=new WeakSet,JB=function(e){d(this,be).unselectAll();const{target:t}=e;if(t===d(this,yn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,yn).div.contains(t)){const{isMac:r}=In.platform;if(e.button!==0||e.ctrlKey&&r)return;d(this,be).showAllEditors("highlight",!0,!0),d(this,yn).div.classList.add("free"),this.toggleDrawing(),Dx.startHighlighting(this,d(this,be).direction==="ltr",{target:d(this,yn).div,x:e.x,y:e.y}),d(this,yn).div.addEventListener("pointerup",()=>{d(this,yn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,be)._signal}),e.preventDefault()}},Ri=function(){return d(Vs,Ql).get(d(this,be).getMode())},MT=function(e){const t=d(this,kt,Ri);return t?new t.prototype.constructor(e):null},DT=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+a)/2-e,u=(o+l)/2-t,[f,m]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:m}},Tw=function(){for(const e of d(this,Wr).values())e.isEmpty()&&e.remove()},Z(Vs,"_initialized",!1),k(Vs,Ql,new Map([uT,CT,PT,Dx,RT].map(e=>[e._editorType,e])));let IT=Vs;var ni,Zn,fd,hv,rb,XB,mo,FT,QB,OT;const tn=class tn{constructor({pageIndex:e}){k(this,mo);k(this,ni,null);k(this,Zn,new Map);k(this,fd,new Map);this.pageIndex=e}setParent(e){if(!d(this,ni)){E(this,ni,e);return}if(d(this,ni)!==e){if(d(this,Zn).size>0)for(const t of d(this,Zn).values())t.remove(),e.append(t);E(this,ni,e)}}static get _svgFactory(){return qe(this,"_svgFactory",new Nx)}draw(e,t=!1,r=!1){const s=un(tn,hv)._++,i=R(this,mo,FT).call(this),o=tn._svgFactory.createElement("defs");i.append(o);const a=tn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,fd).set(s,a);const c=r?R(this,mo,QB).call(this,o,l):null,u=tn._svgFactory.createElement("use");return i.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(i,e),d(this,Zn).set(s,i),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=un(tn,hv)._++,s=R(this,mo,FT).call(this),i=tn._svgFactory.createElement("defs");s.append(i);const o=tn._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=tn._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const m=tn._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=tn._svgFactory.createElement("use");f.append(y),y.setAttribute("href",`#${a}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const c=tn._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,e),d(this,Zn).set(r,s),r}finalizeDraw(e,t){d(this,fd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:s,rootClass:i,path:o}=t,a=typeof e=="number"?d(this,Zn).get(e):e;if(a){if(r&&R(this,mo,OT).call(this,a,r),s&&R(l=tn,rb,XB).call(l,a,s),i){const{classList:c}=a;for(const[u,f]of Object.entries(i))c.toggle(u,f)}if(o){const u=a.firstChild.firstChild;R(this,mo,OT).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const r=d(this,Zn).get(e);r&&(d(t,ni).append(r),d(this,Zn).delete(e),d(t,Zn).set(e,r))}remove(e){d(this,fd).delete(e),d(this,ni)!==null&&(d(this,Zn).get(e).remove(),d(this,Zn).delete(e))}destroy(){E(this,ni,null);for(const e of d(this,Zn).values())e.remove();d(this,Zn).clear(),d(this,fd).clear()}};ni=new WeakMap,Zn=new WeakMap,fd=new WeakMap,hv=new WeakMap,rb=new WeakSet,XB=function(e,[t,r,s,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},mo=new WeakSet,FT=function(){const e=tn._svgFactory.create(1,1,!0);return d(this,ni).append(e),e.setAttribute("aria-hidden",!0),e},QB=function(e,t){const r=tn._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=tn._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},OT=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},k(tn,rb),k(tn,hv,0);let LT=tn;globalThis._pdfjsTestingUtils={HighlightOutliner:hT};globalThis.pdfjsLib={AbortException:vc,AnnotationEditorLayer:IT,AnnotationEditorParamsType:Ke,AnnotationEditorType:Ne,AnnotationEditorUIManager:Md,AnnotationLayer:aT,AnnotationMode:il,AnnotationType:Wt,build:Mee,ColorPicker:Mx,createValidAbsoluteUrl:Hj,DOMSVGFactory:Nx,DrawLayer:LT,FeatureTest:In,fetchData:Mv,getDocument:KV,getFilenameFromUrl:EZ,getPdfFilenameFromUrl:TZ,getUuid:Wj,getXfaPageViewport:kZ,GlobalWorkerOptions:pa,ImageKind:J0,InvalidPDFException:bE,isDataScheme:a_,isPdfFile:lk,isValidExplicitDest:$Z,MathClamp:tr,noContextMenu:yi,normalizeUnicode:_Z,OPS:Ax,OutputScale:po,PasswordResponses:fZ,PDFDataRangeTransport:YV,PDFDateString:ck,PDFWorker:Mg,PermissionFlag:hZ,PixelsPerInch:wc,RenderingCancelledException:ak,ResponseException:kx,setLayerDimensions:Id,shadow:qe,SignatureExtractor:ma,stopEvent:Yt,SupportedImageMimeTypes:CE,TextLayer:Ng,TouchManager:Px,updateUrlHash:Gj,Util:Ce,VerbosityLevel:s_,version:Iee,XfaLayer:QV};const tte=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result.split(",")[1];e(s)},r.onerror=s=>t(s),r.readAsDataURL(n)}),nte=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=async s=>{var i;if((i=s.target)!=null&&i.result)try{const o=new Uint8Array(s.target.result),a=await KV(o).promise;let l="";for(let c=1;c<=a.numPages;c++){const f=await(await a.getPage(c)).getTextContent();l+=f.items.map(m=>"str"in m?m.str:"").join(" ")+`
`}e(l)}catch(o){t(o)}},r.onerror=()=>t(new Error(`Failed to read ${n.name}.`)),r.readAsArrayBuffer(n)}),rte=async n=>{const e=["application/pdf","image/png","image/jpeg"],t=Array.from(n).filter(r=>e.includes(r.type)).map(async r=>{let s;return r.type==="application/pdf"?s=await nte(r):s=await tte(r),{id:crypto.randomUUID(),name:r.name,type:r.type,content:s,url:URL.createObjectURL(r),uploadedAt:new Date().toISOString()}});return Promise.all(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ste,ite;function ote(){return{geminiUrl:ste,vertexUrl:ite}}function ate(n,e,t){var r,s,i;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const o=ote();return n.vertexai?(s=o.vertexUrl)!==null&&s!==void 0?s:e:(i=o.geminiUrl)!==null&&i!==void 0?i:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gd{}function _e(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const u=l[c];p(u,e.slice(i+1),t[c])}else for(const c of l)p(c,e.slice(i+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];p(l[0],e.slice(i+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const r=e[e.length-1],s=n[r];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function h(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in n){const i=n[s];return Array.isArray(i)?i.map(o=>h(o,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XN;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(XN||(XN={}));var QN;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(QN||(QN={}));var so;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(so||(so={}));var ZN;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ZN||(ZN={}));var eI;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(eI||(eI={}));var tI;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(tI||(tI={}));var nI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(nI||(nI={}));var rI;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(rI||(rI={}));var sI;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sI||(sI={}));var iI;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iI||(iI={}));var oI;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(oI||(oI={}));var aI;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(aI||(aI={}));var lI;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(lI||(lI={}));var cI;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cI||(cI={}));var uI;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(uI||(uI={}));var dI;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dI||(dI={}));var Fx;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Fx||(Fx={}));var hI;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hI||(hI={}));var UT;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(UT||(UT={}));var fI;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fI||(fI={}));var pI;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(pI||(pI={}));var mI;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(mI||(mI={}));var gI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gI||(gI={}));var yI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(yI||(yI={}));var vI;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vI||(vI={}));var wI;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(wI||(wI={}));var xI;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(xI||(xI={}));var bI;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bI||(bI={}));var _I;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_I||(_I={}));var CI;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(CI||(CI={}));var SI;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(SI||(SI={}));var EI;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(EI||(EI={}));var TI;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(TI||(TI={}));var AI;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(AI||(AI={}));var kI;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(kI||(kI={}));var RI;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(RI||(RI={}));var PI;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PI||(PI={}));var NI;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(NI||(NI={}));var II;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(II||(II={}));var MI;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(MI||(MI={}));var DI;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(DI||(DI={}));var Ah;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ah||(Ah={}));class $T{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class dm{get text(){var e,t,r,s,i,o,a,l;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,w]of Object.entries(m))y!=="text"&&y!=="thought"&&(w!==null||w!==void 0)&&f.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,t,r,s,i,o,a,l;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,y]of Object.entries(f))m!=="inlineData"&&(y!==null||y!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,r,s,i,o,a,l;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,r,s,i,o,a,l,c;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,r,s,i,o,a,l,c;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class LI{}class FI{}class lte{}class cte{}class OI{}class UI{}class $I{}class ute{}class jI{}class VI{}class BI{}class dte{}class hte{}class fte{}class zI{}class pte{get text(){var e,t,r;let s="",i=!1;const o=[];for(const a of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,t,r;let s="";const i=[];for(const o of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mte{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ZB(n,e){const t=lt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function e4(n){return Array.isArray(n)?n.map(e=>Ox(e)):[Ox(n)]}function Ox(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function t4(n){const e=Ox(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function n4(n){const e=Ox(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function HI(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function r4(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>HI(e)):[HI(n)]}function jT(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function GI(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function qI(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Gn(n){if(n==null)throw new Error("ContentUnion is required");return jT(n)?n:{role:"user",parts:r4(n)}}function s4(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Gn(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Gn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Gn(t)):[Gn(e)]}function Es(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(GI(n)||qI(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gn(n)]}const e=[],t=[],r=jT(n[0]);for(const s of n){const i=jT(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(GI(s)||qI(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return r||e.push({role:"user",parts:r4(t)}),e}const gte=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),WI=XK(["string","number","integer","object","array","boolean","null"]),yte=KK([WI,wm(WI)]);function vte(n=!0){const e=JK(()=>{const t=D1({type:yte.optional(),format:Xr().optional(),title:Xr().optional(),description:Xr().optional(),default:vN().optional(),items:e.optional(),minItems:eh.string().optional(),maxItems:eh.string().optional(),enum:wm(vN()).optional(),properties:YK(Xr(),e).optional(),required:wm(Xr()).optional(),minProperties:eh.string().optional(),maxProperties:eh.string().optional(),propertyOrdering:wm(Xr()).optional(),minimum:yN().optional(),maximum:yN().optional(),minLength:eh.string().optional(),maxLength:eh.string().optional(),pattern:Xr().optional(),anyOf:wm(e).optional(),additionalProperties:WK().optional()});return n?t.strict():t});return e}function wte(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(so).includes(t[0].toUpperCase())?t[0].toUpperCase():so.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(so).includes(r.toUpperCase())?r.toUpperCase():so.TYPE_UNSPECIFIED})}}function Bh(n){const e={},t=["items"],r=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&wte(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(so).includes(a.toUpperCase())?a.toUpperCase():so.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Bh(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Bh(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=Bh(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Dg(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=vte().parse(n);return Bh(e)}else return Bh(n)}function yk(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function vk(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function zp(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=Dg(e.parameters)),e.response&&(e.response=Dg(e.response));return n}function Hp(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function xte(n,e,t,r=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function $a(n,e){if(typeof e!="string")throw new Error("name must be a string");return xte(n,e,"cachedContents")}function i4(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ja(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function bte(n){return n!=null&&typeof n=="object"&&"name"in n}function _te(n){return n!=null&&typeof n=="object"&&"video"in n}function Cte(n){return n!=null&&typeof n=="object"&&"uri"in n}function o4(n){var e;let t;if(bte(n)&&(t=n.name),!(Cte(n)&&(t=n.uri,t===void 0))&&!(_te(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function a4(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function l4(n){for(const e of["models","tunedModels","publisherModels"])if(Ste(n,e))return n[e];return[]}function Ste(n,e){return n!==null&&typeof n=="object"&&e in n}function Ete(n,e={}){const t=n,r={name:t.name,description:t.description,parameters:Bh(u_(t.inputSchema))};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Tte(n,e={}){const t=[],r=new Set;for(const s of n){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=Ete(s,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function Ate(n){const e=[];for(const t of n)e.push(u_(t));return e}function kte(n){const e={};for(const[t,r]of Object.entries(n)){const s=r;e[t]=u_(s)}return e}function u_(n){const e=new Set(["items"]),t=new Set(["anyOf"]),r=new Set(["properties"]),s={};for(const[i,o]of Object.entries(n))if(e.has(i))s[i]=u_(o);else if(t.has(i))s[i]=Ate(o);else if(r.has(i))s[i]=kte(o);else if(i==="type"){const a=o.toUpperCase();s[i]=Object.values(so).includes(a)?a:so.TYPE_UNSPECIFIED}else gte.has(i)&&(s[i]=o);return s}function c4(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Rte(n){const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Gp(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function u4(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pte(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function Nte(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Ite(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Mte(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Pte(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],Nte(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Ite(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function d4(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Mte(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function Dte(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const r=h(n,["default"]);r!=null&&p(e,["default"],r);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const y=h(n,["minItems"]);y!=null&&p(e,["minItems"],y);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const b=h(n,["minimum"]);b!=null&&p(e,["minimum"],b);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const C=h(n,["pattern"]);C!=null&&p(e,["pattern"],C);const _=h(n,["properties"]);_!=null&&p(e,["properties"],_);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const A=h(n,["required"]);A!=null&&p(e,["required"],A);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const N=h(n,["type"]);return N!=null&&p(e,["type"],N),e}function Lte(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&p(e,["category"],t);const r=h(n,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function Fte(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function Ote(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Ute(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],Ote(t)),e}function $te(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function jte(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],$te(t)),e}function Vte(){return{}}function Bte(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Fte(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],Ute(r));const s=h(n,["googleSearchRetrieval"]);if(s!=null&&p(e,["googleSearchRetrieval"],jte(s)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],Vte());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function zte(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Hte(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const r=h(n,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function Gte(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],Hte(t));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function qte(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],zte(t));const r=h(n,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],Gte(r)),e}function Wte(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function h4(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],Wte(t)),e}function Kte(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const r=h(n,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],h4(r)),e}function Yte(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Kte(s))),p(e,["speakerVoiceConfigs"],r)}return e}function Jte(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],h4(t));const r=h(n,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],Yte(r));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function Xte(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const r=h(n,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function Qte(n,e,t){const r={},s=h(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],d4(Gn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(r,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(r,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(r,["seed"],v);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const x=h(e,["responseSchema"]);x!=null&&p(r,["responseSchema"],Dte(Dg(x)));const C=h(e,["responseJsonSchema"]);if(C!=null&&p(r,["responseJsonSchema"],C),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=h(e,["safetySettings"]);if(t!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map($=>Lte($))),p(t,["safetySettings"],F)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let F=Hp(T);Array.isArray(F)&&(F=F.map($=>Bte(zp($)))),p(t,["tools"],F)}const A=h(e,["toolConfig"]);if(t!==void 0&&A!=null&&p(t,["toolConfig"],qte(A)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&p(t,["cachedContent"],$a(n,P));const N=h(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const M=h(e,["speechConfig"]);if(M!=null&&p(r,["speechConfig"],Jte(yk(M))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=h(e,["thinkingConfig"]);return D!=null&&p(r,["thinkingConfig"],Xte(D)),r}function Zte(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["request","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>d4(a))),p(t,["request","contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["request","generationConfig"],Qte(n,i,t)),t}function ene(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(t,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Zte(n,o))),p(t,["requests","requests"],i)}return t}function tne(n,e){const t={},r=h(n,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function nne(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["src"]);s!=null&&p(t,["batch","inputConfig"],ene(n,c4(n,s)));const i=h(e,["config"]);return i!=null&&p(t,["config"],tne(i,t)),t}function rne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function sne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function ine(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function one(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],ine(t,e)),e}function ane(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function lne(n){const e={},t=h(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const r=h(n,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cne(n){const e={},t=h(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const r=h(n,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function une(n,e){const t={},r=h(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],cne(Rte(s))),t}function dne(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["model"],lt(n,r));const s=h(e,["src"]);s!=null&&p(t,["inputConfig"],lne(c4(n,s)));const i=h(e,["config"]);return i!=null&&p(t,["config"],une(i,t)),t}function hne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function fne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function pne(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function mne(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],pne(t,e)),e}function gne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],Gp(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function f4(){return{}}function yne(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function vne(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function wne(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function xne(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],yne(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],vne(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],wne(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function bne(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>xne(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function _ne(n){const e={},t=h(n,["citationSources"]);return t!=null&&p(e,["citations"],t),e}function Cne(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const r=h(n,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function Sne(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Cne(s))),p(e,["urlMetadata"],r)}return e}function Ene(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],bne(t));const r=h(n,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],_ne(r));const s=h(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],Sne(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function Tne(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Ene(a))),p(e,["candidates"],o)}const r=h(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const s=h(n,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const i=h(n,["usageMetadata"]);return i!=null&&p(e,["usageMetadata"],i),e}function Ane(n){const e={},t=h(n,["response"]);return t!=null&&p(e,["response"],Tne(t)),h(n,["error"])!=null&&p(e,["error"],f4()),e}function kne(n){const e={},t=h(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const r=h(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ane(i))),p(e,["inlinedResponses"],s)}return e}function VT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["metadata","state"]);s!=null&&p(e,["state"],u4(s));const i=h(n,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["metadata","model"]);l!=null&&p(e,["model"],l);const c=h(n,["metadata","output"]);return c!=null&&p(e,["dest"],kne(c)),e}function Rne(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>VT(i))),p(e,["batchJobs"],s)}return e}function Pne(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["done"]);return r!=null&&p(e,["done"],r),h(n,["error"])!=null&&p(e,["error"],f4()),e}function p4(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const r=h(n,["code"]);r!=null&&p(e,["code"],r);const s=h(n,["message"]);return s!=null&&p(e,["message"],s),e}function Nne(n){const e={},t=h(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const r=h(n,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function Ine(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const r=h(n,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function BT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["state"]);s!=null&&p(e,["state"],u4(s));const i=h(n,["error"]);i!=null&&p(e,["error"],p4(i));const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(n,["endTime"]);l!=null&&p(e,["endTime"],l);const c=h(n,["updateTime"]);c!=null&&p(e,["updateTime"],c);const u=h(n,["model"]);u!=null&&p(e,["model"],u);const f=h(n,["inputConfig"]);f!=null&&p(e,["src"],Nne(f));const m=h(n,["outputConfig"]);return m!=null&&p(e,["dest"],Ine(m)),e}function Mne(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>BT(i))),p(e,["batchJobs"],s)}return e}function Dne(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["done"]);r!=null&&p(e,["done"],r);const s=h(n,["error"]);return s!=null&&p(e,["error"],p4(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ld;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ld||(Ld={}));class Uv{constructor(e,t,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,s)}init(e,t,r){var s,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};r?typeof r=="object"?o=Object.assign({},r):o=r:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lne extends Gd{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${s}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new Uv(Ld.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t)}async createInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dne(this.apiClient,e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>BT(u))}else{const c=nne(this.apiClient,e);return a=_e("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>VT(u))}}async get(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hne(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>BT(u))}else{const c=rne(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>VT(u))}}async cancel(e){var t,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=fne(this.apiClient,e);o=_e("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=sne(this.apiClient,e);o=_e("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=mne(e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Mne(u),m=new zI;return Object.assign(m,f),m})}else{const c=one(e);return a=_e("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Rne(u),m=new zI;return Object.assign(m,f),m})}}async delete(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=gne(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>Dne(u))}else{const c=ane(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Pne(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fne(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function One(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Une(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function $ne(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Fne(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],One(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Une(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function KI(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>$ne(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function jne(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function Vne(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Bne(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],Vne(t)),e}function zne(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Hne(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],zne(t)),e}function Gne(){return{}}function qne(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>jne(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],Bne(r));const s=h(n,["googleSearchRetrieval"]);if(s!=null&&p(e,["googleSearchRetrieval"],Hne(s)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],Gne());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function Wne(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Kne(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const r=h(n,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function Yne(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],Kne(t));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function Jne(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Wne(t));const r=h(n,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],Yne(r)),e}function Xne(n,e){const t={},r=h(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let u=Es(o);Array.isArray(u)&&(u=u.map(f=>KI(f))),p(e,["contents"],u)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],KI(Gn(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>qne(f))),p(e,["tools"],u)}const c=h(n,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],Jne(c)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Qne(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["model"],ZB(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],Xne(s,t)),t}function Zne(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function ere(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function tre(n,e){const t={},r=h(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function nre(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],tre(s,t)),t}function rre(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function sre(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],rre(t,e)),e}function ire(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function ore(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["data"]);r!=null&&p(e,["data"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function are(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["fileUri"]);r!=null&&p(e,["fileUri"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function lre(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],ire(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],ore(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],are(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function YI(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>lre(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function cre(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const s=h(n,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function ure(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function dre(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],ure(t)),e}function hre(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function fre(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],hre(t)),e}function pre(){return{}}function mre(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function gre(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],mre(t));const r=h(n,["authType"]);r!=null&&p(e,["authType"],r);const s=h(n,["googleServiceAccountConfig"]);s!=null&&p(e,["googleServiceAccountConfig"],s);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function yre(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],gre(t)),e}function vre(){return{}}function wre(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>cre(m))),p(e,["functionDeclarations"],f)}const r=h(n,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],dre(s));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],fre(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],pre());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],yre(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],vre());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function xre(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function bre(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const r=h(n,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function _re(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],bre(t));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function Cre(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],xre(t));const r=h(n,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],_re(r)),e}function Sre(n,e){const t={},r=h(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(n,["contents"]);if(e!==void 0&&o!=null){let f=Es(o);Array.isArray(f)&&(f=f.map(m=>YI(m))),p(e,["contents"],f)}const a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],YI(Gn(a)));const l=h(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>wre(m))),p(e,["tools"],f)}const c=h(n,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],Cre(c));const u=h(n,["kmsKeyName"]);return e!==void 0&&u!=null&&p(e,["encryption_spec","kmsKeyName"],u),t}function Ere(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["model"],ZB(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],Sre(s,t)),t}function Tre(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function Are(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function kre(n,e){const t={},r=h(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function Rre(n,e){const t={},r=h(e,["name"]);r!=null&&p(t,["_url","name"],$a(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],kre(s,t)),t}function Pre(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function Nre(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Pre(t,e)),e}function Aw(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["model"]);s!=null&&p(e,["model"],s);const i=h(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["updateTime"]);o!=null&&p(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&p(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function Ire(){return{}}function Mre(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Aw(i))),p(e,["cachedContents"],s)}return e}function kw(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["model"]);s!=null&&p(e,["model"],s);const i=h(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=h(n,["updateTime"]);o!=null&&p(e,["updateTime"],o);const a=h(n,["expireTime"]);a!=null&&p(e,["expireTime"],a);const l=h(n,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function Dre(){return{}}function Lre(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>kw(i))),p(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fre extends Gd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uv(Ld.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ere(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>kw(u))}else{const c=Qne(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Aw(u))}}async get(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Tre(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>kw(u))}else{const c=Zne(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Aw(u))}}async delete(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Are(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Dre(),f=new VI;return Object.assign(f,u),f})}else{const c=ere(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Ire(),f=new VI;return Object.assign(f,u),f})}}async update(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Rre(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>kw(u))}else{const c=nre(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Aw(u))}}async listInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Nre(e);return a=_e("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Lre(u),m=new BI;return Object.assign(m,f),m})}else{const c=sre(e);return a=_e("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Mre(u),m=new BI;return Object.assign(m,f),m})}}}function JI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bt(n){return this instanceof bt?(this.v=n,this):new bt(n)}function zh(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,f)}}function a(y,w){r[y]&&(s[y]=function(v){return new Promise(function(b,x){i.push([y,v,b,x])>1||l(y,v)})},w&&(s[y]=w(s[y])))}function l(y,w){try{c(r[y](w))}catch(v){m(i[0][3],v)}}function c(y){y.value instanceof bt?Promise.resolve(y.value.v).then(u,f):m(i[0][2],y)}function u(y){l("next",y)}function f(y){l("throw",y)}function m(y,w){y(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function ig(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof JI=="function"?JI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(a,l){o=n[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ore(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:m4(t)}function m4(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Ure(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function XI(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const s=[];let i=!0;for(;r<t&&n[r].role==="model";)s.push(n[r]),i&&!m4(n[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class $re{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new jre(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jre{constructor(e,t,r,s={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),Ure(i)}async sendMessage(e){var t;await this.sendPromise;const r=Gn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const r=Gn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const t=e?XI(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,s;return zh(this,arguments,function*(){var o,a,l,c;const u=[];try{for(var f=!0,m=ig(e),y;y=yield bt(m.next()),o=y.done,!o;f=!0){c=y.value,f=!1;const w=c;if(Ore(w)){const v=(s=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;v!==void 0&&u.push(v)}yield yield bt(w)}}catch(w){a={error:w}}finally{try{!f&&!o&&(l=m.return)&&(yield bt(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,u)})}recordHistory(e,t,r){let s=[];t.length>0&&t.every(i=>i.role!==void 0)?s=t:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...XI(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d_ extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,d_.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vre(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function Bre(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Vre(t,e)),e}function zre(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const r=h(n,["message"]);r!=null&&p(e,["message"],r);const s=h(n,["code"]);return s!=null&&p(e,["code"],s),e}function Hre(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["mimeType"]);s!=null&&p(e,["mimeType"],s);const i=h(n,["sizeBytes"]);i!=null&&p(e,["sizeBytes"],i);const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&p(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&p(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&p(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&p(e,["uri"],u);const f=h(n,["downloadUri"]);f!=null&&p(e,["downloadUri"],f);const m=h(n,["state"]);m!=null&&p(e,["state"],m);const y=h(n,["source"]);y!=null&&p(e,["source"],y);const w=h(n,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&p(e,["error"],zre(v)),e}function Gre(n){const e={},t=h(n,["file"]);t!=null&&p(e,["file"],Hre(t));const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function qre(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","file"],o4(t));const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Wre(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","file"],o4(t));const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Kre(n){const e={},t=h(n,["details"]);t!=null&&p(e,["details"],t);const r=h(n,["message"]);r!=null&&p(e,["message"],r);const s=h(n,["code"]);return s!=null&&p(e,["code"],s),e}function zT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["mimeType"]);s!=null&&p(e,["mimeType"],s);const i=h(n,["sizeBytes"]);i!=null&&p(e,["sizeBytes"],i);const o=h(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(n,["expirationTime"]);a!=null&&p(e,["expirationTime"],a);const l=h(n,["updateTime"]);l!=null&&p(e,["updateTime"],l);const c=h(n,["sha256Hash"]);c!=null&&p(e,["sha256Hash"],c);const u=h(n,["uri"]);u!=null&&p(e,["uri"],u);const f=h(n,["downloadUri"]);f!=null&&p(e,["downloadUri"],f);const m=h(n,["state"]);m!=null&&p(e,["state"],m);const y=h(n,["source"]);y!=null&&p(e,["source"],y);const w=h(n,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const v=h(n,["error"]);return v!=null&&p(e,["error"],Kre(v)),e}function Yre(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>zT(i))),p(e,["files"],s)}return e}function Jre(){return{}}function Xre(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qre extends Gd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uv(Ld.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>zT(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Bre(e);return i=_e("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Yre(l),u=new dte;return Object.assign(u,c),u})}}async createInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Gre(e);return i=_e("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=Jre(),c=new hte;return Object.assign(c,l),c})}}async get(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qre(e);return i=_e("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>zT(l))}}async delete(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Wre(e);return i=_e("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=Xre(),c=new fte;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zre(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function ese(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function g4(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],Zre(t)),e}function tse(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],ese(t)),e}function nse(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const r=h(n,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],g4(r)),e}function rse(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>nse(s))),p(e,["speakerVoiceConfigs"],r)}return e}function sse(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],g4(t));const r=h(n,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],rse(r));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function ise(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&p(e,["voiceConfig"],tse(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function ose(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function ase(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function lse(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function cse(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["data"]);r!=null&&p(e,["data"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function use(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function dse(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["fileUri"]);r!=null&&p(e,["fileUri"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function hse(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],ose(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],lse(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],use(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function fse(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],ase(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],cse(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],dse(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function pse(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>hse(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function mse(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>fse(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function gse(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function yse(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const s=h(n,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function vse(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function wse(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function xse(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],vse(t)),e}function bse(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],wse(t)),e}function _se(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Cse(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Sse(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],_se(t)),e}function Ese(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],Cse(t)),e}function Tse(){return{}}function Ase(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function kse(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],Ase(t));const r=h(n,["authType"]);r!=null&&p(e,["authType"],r);const s=h(n,["googleServiceAccountConfig"]);s!=null&&p(e,["googleServiceAccountConfig"],s);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function Rse(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],kse(t)),e}function Pse(){return{}}function Nse(){return{}}function Ise(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>gse(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],xse(r));const s=h(n,["googleSearchRetrieval"]);if(s!=null&&p(e,["googleSearchRetrieval"],Sse(s)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],Pse());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function Mse(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>yse(m))),p(e,["functionDeclarations"],f)}const r=h(n,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],bse(s));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],Ese(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],Tse());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],Rse(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],Nse());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function Dse(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Lse(n){const e={},t=h(n,["handle"]);t!=null&&p(e,["handle"],t);const r=h(n,["transparent"]);return r!=null&&p(e,["transparent"],r),e}function QI(){return{}}function ZI(){return{}}function Fse(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const r=h(n,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const s=h(n,["endOfSpeechSensitivity"]);s!=null&&p(e,["endOfSpeechSensitivity"],s);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function Ose(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const r=h(n,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const s=h(n,["endOfSpeechSensitivity"]);s!=null&&p(e,["endOfSpeechSensitivity"],s);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function Use(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],Fse(t));const r=h(n,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const s=h(n,["turnCoverage"]);return s!=null&&p(e,["turnCoverage"],s),e}function $se(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],Ose(t));const r=h(n,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const s=h(n,["turnCoverage"]);return s!=null&&p(e,["turnCoverage"],s),e}function jse(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function Vse(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function Bse(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const r=h(n,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],jse(r)),e}function zse(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const r=h(n,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],Vse(r)),e}function Hse(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function Gse(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function qse(n,e){const t={},r=h(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],sse(vk(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=h(n,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],pse(Gn(y)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let A=Hp(w);Array.isArray(A)&&(A=A.map(P=>Ise(zp(P)))),p(e,["setup","tools"],A)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],Dse(v));const b=h(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],QI());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],QI());const C=h(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&p(e,["setup","realtimeInputConfig"],Use(C));const _=h(n,["contextWindowCompression"]);e!==void 0&&_!=null&&p(e,["setup","contextWindowCompression"],Bse(_));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],Hse(T)),t}function Wse(n,e){const t={},r=h(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],ise(vk(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=h(n,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],mse(Gn(y)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let A=Hp(w);Array.isArray(A)&&(A=A.map(P=>Mse(zp(P)))),p(e,["setup","tools"],A)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],Lse(v));const b=h(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],ZI());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],ZI());const C=h(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&p(e,["setup","realtimeInputConfig"],$se(C));const _=h(n,["contextWindowCompression"]);e!==void 0&&_!=null&&p(e,["setup","contextWindowCompression"],zse(_));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],Gse(T)),t}function Kse(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["setup","model"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],qse(s,t)),t}function Yse(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["setup","model"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],Wse(s,t)),t}function Jse(){return{}}function Xse(){return{}}function Qse(){return{}}function Zse(){return{}}function eie(n){const e={},t=h(n,["media"]);t!=null&&p(e,["mediaChunks"],e4(t));const r=h(n,["audio"]);r!=null&&p(e,["audio"],n4(r));const s=h(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(n,["video"]);i!=null&&p(e,["video"],t4(i));const o=h(n,["text"]);return o!=null&&p(e,["text"],o),h(n,["activityStart"])!=null&&p(e,["activityStart"],Jse()),h(n,["activityEnd"])!=null&&p(e,["activityEnd"],Qse()),e}function tie(n){const e={},t=h(n,["media"]);t!=null&&p(e,["mediaChunks"],e4(t));const r=h(n,["audio"]);r!=null&&p(e,["audio"],n4(r));const s=h(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(n,["video"]);i!=null&&p(e,["video"],t4(i));const o=h(n,["text"]);return o!=null&&p(e,["text"],o),h(n,["activityStart"])!=null&&p(e,["activityStart"],Xse()),h(n,["activityEnd"])!=null&&p(e,["activityEnd"],Zse()),e}function y4(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const r=h(n,["weight"]);return r!=null&&p(e,["weight"],r),e}function nie(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>y4(s))),p(e,["weightedPrompts"],r)}return e}function v4(n){const e={},t=h(n,["temperature"]);t!=null&&p(e,["temperature"],t);const r=h(n,["topK"]);r!=null&&p(e,["topK"],r);const s=h(n,["seed"]);s!=null&&p(e,["seed"],s);const i=h(n,["guidance"]);i!=null&&p(e,["guidance"],i);const o=h(n,["bpm"]);o!=null&&p(e,["bpm"],o);const a=h(n,["density"]);a!=null&&p(e,["density"],a);const l=h(n,["brightness"]);l!=null&&p(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&p(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&p(e,["muteBass"],u);const f=h(n,["muteDrums"]);f!=null&&p(e,["muteDrums"],f);const m=h(n,["onlyBassAndDrums"]);return m!=null&&p(e,["onlyBassAndDrums"],m),e}function rie(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],v4(t)),e}function w4(n){const e={},t=h(n,["model"]);return t!=null&&p(e,["model"],t),e}function x4(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>y4(s))),p(e,["weightedPrompts"],r)}return e}function HT(n){const e={},t=h(n,["setup"]);t!=null&&p(e,["setup"],w4(t));const r=h(n,["clientContent"]);r!=null&&p(e,["clientContent"],x4(r));const s=h(n,["musicGenerationConfig"]);s!=null&&p(e,["musicGenerationConfig"],v4(s));const i=h(n,["playbackControl"]);return i!=null&&p(e,["playbackControl"],i),e}function sie(){return{}}function iie(n){const e={},t=h(n,["sessionId"]);return t!=null&&p(e,["sessionId"],t),e}function oie(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function aie(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function lie(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function cie(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["data"]);r!=null&&p(e,["data"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function uie(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function die(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["fileUri"]);r!=null&&p(e,["fileUri"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function hie(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],oie(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],lie(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],uie(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function fie(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],aie(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],cie(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],die(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function pie(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>hie(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function mie(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>fie(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function eM(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const r=h(n,["finished"]);return r!=null&&p(e,["finished"],r),e}function tM(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const r=h(n,["finished"]);return r!=null&&p(e,["finished"],r),e}function gie(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const r=h(n,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function yie(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>gie(s))),p(e,["urlMetadata"],r)}return e}function vie(n){const e={},t=h(n,["modelTurn"]);t!=null&&p(e,["modelTurn"],pie(t));const r=h(n,["turnComplete"]);r!=null&&p(e,["turnComplete"],r);const s=h(n,["interrupted"]);s!=null&&p(e,["interrupted"],s);const i=h(n,["groundingMetadata"]);i!=null&&p(e,["groundingMetadata"],i);const o=h(n,["generationComplete"]);o!=null&&p(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&p(e,["inputTranscription"],eM(a));const l=h(n,["outputTranscription"]);l!=null&&p(e,["outputTranscription"],eM(l));const c=h(n,["urlContextMetadata"]);return c!=null&&p(e,["urlContextMetadata"],yie(c)),e}function wie(n){const e={},t=h(n,["modelTurn"]);t!=null&&p(e,["modelTurn"],mie(t));const r=h(n,["turnComplete"]);r!=null&&p(e,["turnComplete"],r);const s=h(n,["interrupted"]);s!=null&&p(e,["interrupted"],s);const i=h(n,["groundingMetadata"]);i!=null&&p(e,["groundingMetadata"],i);const o=h(n,["generationComplete"]);o!=null&&p(e,["generationComplete"],o);const a=h(n,["inputTranscription"]);a!=null&&p(e,["inputTranscription"],tM(a));const l=h(n,["outputTranscription"]);return l!=null&&p(e,["outputTranscription"],tM(l)),e}function xie(n){const e={},t=h(n,["id"]);t!=null&&p(e,["id"],t);const r=h(n,["args"]);r!=null&&p(e,["args"],r);const s=h(n,["name"]);return s!=null&&p(e,["name"],s),e}function bie(n){const e={},t=h(n,["args"]);t!=null&&p(e,["args"],t);const r=h(n,["name"]);return r!=null&&p(e,["name"],r),e}function _ie(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>xie(s))),p(e,["functionCalls"],r)}return e}function Cie(n){const e={},t=h(n,["functionCalls"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>bie(s))),p(e,["functionCalls"],r)}return e}function Sie(n){const e={},t=h(n,["ids"]);return t!=null&&p(e,["ids"],t),e}function Eie(n){const e={},t=h(n,["ids"]);return t!=null&&p(e,["ids"],t),e}function A0(n){const e={},t=h(n,["modality"]);t!=null&&p(e,["modality"],t);const r=h(n,["tokenCount"]);return r!=null&&p(e,["tokenCount"],r),e}function k0(n){const e={},t=h(n,["modality"]);t!=null&&p(e,["modality"],t);const r=h(n,["tokenCount"]);return r!=null&&p(e,["tokenCount"],r),e}function Tie(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const r=h(n,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(n,["responseTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(n,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(n,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>A0(y))),p(e,["promptTokensDetails"],m)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>A0(y))),p(e,["cacheTokensDetails"],m)}const u=h(n,["responseTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(y=>A0(y))),p(e,["responseTokensDetails"],m)}const f=h(n,["toolUsePromptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>A0(y))),p(e,["toolUsePromptTokensDetails"],m)}return e}function Aie(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const r=h(n,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(n,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(n,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(n,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(n,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>k0(w))),p(e,["promptTokensDetails"],y)}const c=h(n,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>k0(w))),p(e,["cacheTokensDetails"],y)}const u=h(n,["candidatesTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(w=>k0(w))),p(e,["responseTokensDetails"],y)}const f=h(n,["toolUsePromptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>k0(w))),p(e,["toolUsePromptTokensDetails"],y)}const m=h(n,["trafficType"]);return m!=null&&p(e,["trafficType"],m),e}function kie(n){const e={},t=h(n,["timeLeft"]);return t!=null&&p(e,["timeLeft"],t),e}function Rie(n){const e={},t=h(n,["timeLeft"]);return t!=null&&p(e,["timeLeft"],t),e}function Pie(n){const e={},t=h(n,["newHandle"]);t!=null&&p(e,["newHandle"],t);const r=h(n,["resumable"]);r!=null&&p(e,["resumable"],r);const s=h(n,["lastConsumedClientMessageIndex"]);return s!=null&&p(e,["lastConsumedClientMessageIndex"],s),e}function Nie(n){const e={},t=h(n,["newHandle"]);t!=null&&p(e,["newHandle"],t);const r=h(n,["resumable"]);r!=null&&p(e,["resumable"],r);const s=h(n,["lastConsumedClientMessageIndex"]);return s!=null&&p(e,["lastConsumedClientMessageIndex"],s),e}function Iie(n){const e={};h(n,["setupComplete"])!=null&&p(e,["setupComplete"],sie());const r=h(n,["serverContent"]);r!=null&&p(e,["serverContent"],vie(r));const s=h(n,["toolCall"]);s!=null&&p(e,["toolCall"],_ie(s));const i=h(n,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],Sie(i));const o=h(n,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],Tie(o));const a=h(n,["goAway"]);a!=null&&p(e,["goAway"],kie(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&p(e,["sessionResumptionUpdate"],Pie(l)),e}function Mie(n){const e={},t=h(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],iie(t));const r=h(n,["serverContent"]);r!=null&&p(e,["serverContent"],wie(r));const s=h(n,["toolCall"]);s!=null&&p(e,["toolCall"],Cie(s));const i=h(n,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],Eie(i));const o=h(n,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],Aie(o));const a=h(n,["goAway"]);a!=null&&p(e,["goAway"],Rie(a));const l=h(n,["sessionResumptionUpdate"]);return l!=null&&p(e,["sessionResumptionUpdate"],Nie(l)),e}function Die(){return{}}function Lie(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const r=h(n,["weight"]);return r!=null&&p(e,["weight"],r),e}function Fie(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Lie(s))),p(e,["weightedPrompts"],r)}return e}function Oie(n){const e={},t=h(n,["temperature"]);t!=null&&p(e,["temperature"],t);const r=h(n,["topK"]);r!=null&&p(e,["topK"],r);const s=h(n,["seed"]);s!=null&&p(e,["seed"],s);const i=h(n,["guidance"]);i!=null&&p(e,["guidance"],i);const o=h(n,["bpm"]);o!=null&&p(e,["bpm"],o);const a=h(n,["density"]);a!=null&&p(e,["density"],a);const l=h(n,["brightness"]);l!=null&&p(e,["brightness"],l);const c=h(n,["scale"]);c!=null&&p(e,["scale"],c);const u=h(n,["muteBass"]);u!=null&&p(e,["muteBass"],u);const f=h(n,["muteDrums"]);f!=null&&p(e,["muteDrums"],f);const m=h(n,["onlyBassAndDrums"]);return m!=null&&p(e,["onlyBassAndDrums"],m),e}function Uie(n){const e={},t=h(n,["clientContent"]);t!=null&&p(e,["clientContent"],Fie(t));const r=h(n,["musicGenerationConfig"]);return r!=null&&p(e,["musicGenerationConfig"],Oie(r)),e}function $ie(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);r!=null&&p(e,["mimeType"],r);const s=h(n,["sourceMetadata"]);return s!=null&&p(e,["sourceMetadata"],Uie(s)),e}function jie(n){const e={},t=h(n,["audioChunks"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>$ie(s))),p(e,["audioChunks"],r)}return e}function Vie(n){const e={},t=h(n,["text"]);t!=null&&p(e,["text"],t);const r=h(n,["filteredReason"]);return r!=null&&p(e,["filteredReason"],r),e}function Bie(n){const e={};h(n,["setupComplete"])!=null&&p(e,["setupComplete"],Die());const r=h(n,["serverContent"]);r!=null&&p(e,["serverContent"],jie(r));const s=h(n,["filteredPrompt"]);return s!=null&&p(e,["filteredPrompt"],Vie(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zie(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function Hie(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Gie(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qie(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],zie(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],Hie(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Gie(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function h_(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>qie(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function Wie(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const r=h(n,["default"]);r!=null&&p(e,["default"],r);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const y=h(n,["minItems"]);y!=null&&p(e,["minItems"],y);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const b=h(n,["minimum"]);b!=null&&p(e,["minimum"],b);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const C=h(n,["pattern"]);C!=null&&p(e,["pattern"],C);const _=h(n,["properties"]);_!=null&&p(e,["properties"],_);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const A=h(n,["required"]);A!=null&&p(e,["required"],A);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const N=h(n,["type"]);return N!=null&&p(e,["type"],N),e}function Kie(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=h(n,["category"]);t!=null&&p(e,["category"],t);const r=h(n,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function Yie(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function Jie(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Xie(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],Jie(t)),e}function Qie(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Zie(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],Qie(t)),e}function eoe(){return{}}function toe(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Yie(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],Xie(r));const s=h(n,["googleSearchRetrieval"]);if(s!=null&&p(e,["googleSearchRetrieval"],Zie(s)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],eoe());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function noe(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function roe(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const r=h(n,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function soe(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],roe(t));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function ioe(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],noe(t));const r=h(n,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],soe(r)),e}function ooe(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function b4(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],ooe(t)),e}function aoe(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const r=h(n,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],b4(r)),e}function loe(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>aoe(s))),p(e,["speakerVoiceConfigs"],r)}return e}function coe(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],b4(t));const r=h(n,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],loe(r));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function uoe(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const r=h(n,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function doe(n,e,t){const r={},s=h(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],h_(Gn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(r,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(r,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(r,["seed"],v);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const x=h(e,["responseSchema"]);x!=null&&p(r,["responseSchema"],Wie(Dg(x)));const C=h(e,["responseJsonSchema"]);if(C!=null&&p(r,["responseJsonSchema"],C),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=h(e,["safetySettings"]);if(t!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map($=>Kie($))),p(t,["safetySettings"],F)}const T=h(e,["tools"]);if(t!==void 0&&T!=null){let F=Hp(T);Array.isArray(F)&&(F=F.map($=>toe(zp($)))),p(t,["tools"],F)}const A=h(e,["toolConfig"]);if(t!==void 0&&A!=null&&p(t,["toolConfig"],ioe(A)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=h(e,["cachedContent"]);t!==void 0&&P!=null&&p(t,["cachedContent"],$a(n,P));const N=h(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const M=h(e,["speechConfig"]);if(M!=null&&p(r,["speechConfig"],coe(yk(M))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=h(e,["thinkingConfig"]);return D!=null&&p(r,["thinkingConfig"],uoe(D)),r}function nM(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>h_(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["generationConfig"],doe(n,i,t)),t}function hoe(n,e){const t={},r=h(n,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function foe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);s!=null&&p(t,["requests[]","content"],s4(n,s));const i=h(e,["config"]);i!=null&&p(t,["config"],hoe(i,t));const o=h(e,["model"]);return o!==void 0&&p(t,["requests[]","model"],lt(n,o)),t}function poe(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(n,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(n,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=h(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const u=h(n,["language"]);e!==void 0&&u!=null&&p(e,["parameters","language"],u);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const m=h(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function moe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&p(t,["config"],poe(i,t)),t}function goe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","name"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function yoe(n,e,t){const r={},s=h(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);t!==void 0&&o!=null&&p(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],a4(n,a)),r}function voe(n,e){const t={},r=h(e,["config"]);return r!=null&&p(t,["config"],yoe(n,r,t)),t}function woe(n,e){const t={},r=h(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),t}function xoe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","name"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],woe(s,t)),t}function boe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","name"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function _oe(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Coe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>h_(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],_oe(i)),t}function Soe(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],ja(t));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Eoe(n,e){const t={},r=h(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(n,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(n,["aspectRatio"]);if(e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i),h(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=h(n,["personGeneration"]);if(e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const l=h(n,["enhancePrompt"]);if(e!==void 0&&l!=null&&p(e,["parameters","enhancePrompt"],l),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Toe(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const i=h(e,["image"]);if(i!=null&&p(t,["instances[0]","image"],Soe(i)),h(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=h(e,["config"]);return o!=null&&p(t,["config"],Eoe(o,t)),t}function Aoe(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function koe(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["data"]);r!=null&&p(e,["data"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Roe(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["fileUri"]);r!=null&&p(e,["fileUri"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Poe(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Aoe(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],koe(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Roe(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function qp(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Poe(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function Noe(n){const e={},t=h(n,["anyOf"]);t!=null&&p(e,["anyOf"],t);const r=h(n,["default"]);r!=null&&p(e,["default"],r);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const i=h(n,["enum"]);i!=null&&p(e,["enum"],i);const o=h(n,["example"]);o!=null&&p(e,["example"],o);const a=h(n,["format"]);a!=null&&p(e,["format"],a);const l=h(n,["items"]);l!=null&&p(e,["items"],l);const c=h(n,["maxItems"]);c!=null&&p(e,["maxItems"],c);const u=h(n,["maxLength"]);u!=null&&p(e,["maxLength"],u);const f=h(n,["maxProperties"]);f!=null&&p(e,["maxProperties"],f);const m=h(n,["maximum"]);m!=null&&p(e,["maximum"],m);const y=h(n,["minItems"]);y!=null&&p(e,["minItems"],y);const w=h(n,["minLength"]);w!=null&&p(e,["minLength"],w);const v=h(n,["minProperties"]);v!=null&&p(e,["minProperties"],v);const b=h(n,["minimum"]);b!=null&&p(e,["minimum"],b);const x=h(n,["nullable"]);x!=null&&p(e,["nullable"],x);const C=h(n,["pattern"]);C!=null&&p(e,["pattern"],C);const _=h(n,["properties"]);_!=null&&p(e,["properties"],_);const T=h(n,["propertyOrdering"]);T!=null&&p(e,["propertyOrdering"],T);const A=h(n,["required"]);A!=null&&p(e,["required"],A);const P=h(n,["title"]);P!=null&&p(e,["title"],P);const N=h(n,["type"]);return N!=null&&p(e,["type"],N),e}function Ioe(n){const e={},t=h(n,["featureSelectionPreference"]);return t!=null&&p(e,["featureSelectionPreference"],t),e}function Moe(n){const e={},t=h(n,["method"]);t!=null&&p(e,["method"],t);const r=h(n,["category"]);r!=null&&p(e,["category"],r);const s=h(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function Doe(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=h(n,["description"]);t!=null&&p(e,["description"],t);const r=h(n,["name"]);r!=null&&p(e,["name"],r);const s=h(n,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(n,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(n,["response"]);o!=null&&p(e,["response"],o);const a=h(n,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function Loe(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Foe(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],Loe(t)),e}function Ooe(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Uoe(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],Ooe(t)),e}function $oe(){return{}}function joe(n){const e={},t=h(n,["apiKeyString"]);return t!=null&&p(e,["apiKeyString"],t),e}function Voe(n){const e={},t=h(n,["apiKeyConfig"]);t!=null&&p(e,["apiKeyConfig"],joe(t));const r=h(n,["authType"]);r!=null&&p(e,["authType"],r);const s=h(n,["googleServiceAccountConfig"]);s!=null&&p(e,["googleServiceAccountConfig"],s);const i=h(n,["httpBasicAuthConfig"]);i!=null&&p(e,["httpBasicAuthConfig"],i);const o=h(n,["oauthConfig"]);o!=null&&p(e,["oauthConfig"],o);const a=h(n,["oidcConfig"]);return a!=null&&p(e,["oidcConfig"],a),e}function Boe(n){const e={},t=h(n,["authConfig"]);return t!=null&&p(e,["authConfig"],Voe(t)),e}function zoe(){return{}}function _4(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>Doe(m))),p(e,["functionDeclarations"],f)}const r=h(n,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(n,["googleSearch"]);s!=null&&p(e,["googleSearch"],Foe(s));const i=h(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],Uoe(i)),h(n,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],$oe());const a=h(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],Boe(a)),h(n,["urlContext"])!=null&&p(e,["urlContext"],zoe());const c=h(n,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const u=h(n,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function Hoe(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Goe(n){const e={},t=h(n,["latitude"]);t!=null&&p(e,["latitude"],t);const r=h(n,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function qoe(n){const e={},t=h(n,["latLng"]);t!=null&&p(e,["latLng"],Goe(t));const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function Woe(n){const e={},t=h(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Hoe(t));const r=h(n,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],qoe(r)),e}function Koe(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function Yoe(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],Koe(t)),e}function Joe(n){const e={},t=h(n,["voiceConfig"]);if(t!=null&&p(e,["voiceConfig"],Yoe(t)),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=h(n,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function Xoe(n){const e={},t=h(n,["includeThoughts"]);t!=null&&p(e,["includeThoughts"],t);const r=h(n,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function Qoe(n,e,t){const r={},s=h(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],qp(Gn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const u=h(e,["stopSequences"]);u!=null&&p(r,["stopSequences"],u);const f=h(e,["responseLogprobs"]);f!=null&&p(r,["responseLogprobs"],f);const m=h(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const v=h(e,["seed"]);v!=null&&p(r,["seed"],v);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const x=h(e,["responseSchema"]);x!=null&&p(r,["responseSchema"],Noe(Dg(x)));const C=h(e,["responseJsonSchema"]);C!=null&&p(r,["responseJsonSchema"],C);const _=h(e,["routingConfig"]);_!=null&&p(r,["routingConfig"],_);const T=h(e,["modelSelectionConfig"]);T!=null&&p(r,["modelConfig"],Ioe(T));const A=h(e,["safetySettings"]);if(t!==void 0&&A!=null){let W=A;Array.isArray(W)&&(W=W.map(j=>Moe(j))),p(t,["safetySettings"],W)}const P=h(e,["tools"]);if(t!==void 0&&P!=null){let W=Hp(P);Array.isArray(W)&&(W=W.map(j=>_4(zp(j)))),p(t,["tools"],W)}const N=h(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],Woe(N));const I=h(e,["labels"]);t!==void 0&&I!=null&&p(t,["labels"],I);const M=h(e,["cachedContent"]);t!==void 0&&M!=null&&p(t,["cachedContent"],$a(n,M));const D=h(e,["responseModalities"]);D!=null&&p(r,["responseModalities"],D);const F=h(e,["mediaResolution"]);F!=null&&p(r,["mediaResolution"],F);const $=h(e,["speechConfig"]);$!=null&&p(r,["speechConfig"],Joe(yk($)));const G=h(e,["audioTimestamp"]);G!=null&&p(r,["audioTimestamp"],G);const O=h(e,["thinkingConfig"]);return O!=null&&p(r,["thinkingConfig"],Xoe(O)),r}function rM(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>qp(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["generationConfig"],Qoe(n,i,t)),t}function Zoe(n,e){const t={},r=h(n,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(n,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(n,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(n,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(n,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),t}function eae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);s!=null&&p(t,["instances[]","content"],s4(n,s));const i=h(e,["config"]);return i!=null&&p(t,["config"],Zoe(i,t)),t}function tae(n,e){const t={},r=h(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const y=h(n,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const b=h(n,["addWatermark"]);e!==void 0&&b!=null&&p(e,["parameters","addWatermark"],b);const x=h(n,["enhancePrompt"]);return e!==void 0&&x!=null&&p(e,["parameters","enhancePrompt"],x),t}function nae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&p(t,["config"],tae(i,t)),t}function f_(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const r=h(n,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],ja(r));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function rae(n){const e={},t=h(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const r=h(n,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(n,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function sae(n){const e={},t=h(n,["controlType"]);t!=null&&p(e,["controlType"],t);const r=h(n,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function iae(n){const e={},t=h(n,["styleDescription"]);return t!=null&&p(e,["styleDescription"],t),e}function oae(n){const e={},t=h(n,["subjectType"]);t!=null&&p(e,["subjectType"],t);const r=h(n,["subjectDescription"]);return r!=null&&p(e,["subjectDescription"],r),e}function aae(n){const e={},t=h(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],f_(t));const r=h(n,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(n,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(n,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],rae(i));const o=h(n,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],sae(o));const a=h(n,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],iae(a));const l=h(n,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],oae(l)),e}function lae(n,e){const t={},r=h(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const y=h(n,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const v=h(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const b=h(n,["editMode"]);e!==void 0&&b!=null&&p(e,["parameters","editMode"],b);const x=h(n,["baseSteps"]);return e!==void 0&&x!=null&&p(e,["parameters","editConfig","baseSteps"],x),t}function cae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>aae(l))),p(t,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&p(t,["config"],lae(o,t)),t}function uae(n,e){const t={},r=h(n,["includeRaiReason"]);e!==void 0&&r!=null&&p(e,["parameters","includeRaiReason"],r);const s=h(n,["outputMimeType"]);e!==void 0&&s!=null&&p(e,["parameters","outputOptions","mimeType"],s);const i=h(n,["outputCompressionQuality"]);e!==void 0&&i!=null&&p(e,["parameters","outputOptions","compressionQuality"],i);const o=h(n,["enhanceInputImage"]);e!==void 0&&o!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=h(n,["imagePreservationFactor"]);e!==void 0&&a!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=h(n,["mode"]);return e!==void 0&&c!=null&&p(e,["parameters","mode"],c),t}function dae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["image"]);s!=null&&p(t,["instances[0]","image"],f_(s));const i=h(e,["upscaleFactor"]);i!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&p(t,["config"],uae(o,t)),t}function hae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","name"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function fae(n,e,t){const r={},s=h(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);t!==void 0&&o!=null&&p(t,["_query","filter"],o);const a=h(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],a4(n,a)),r}function pae(n,e){const t={},r=h(e,["config"]);return r!=null&&p(t,["config"],fae(n,r,t)),t}function mae(n,e){const t={},r=h(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),t}function gae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],mae(s,t)),t}function yae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","name"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],s),t}function vae(n,e){const t={},r=h(n,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],qp(Gn(r)));const s=h(n,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>_4(a))),p(e,["tools"],o)}const i=h(n,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],i),t}function wae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>qp(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],vae(i,t)),t}function xae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["contents"]);if(s!=null){let o=Es(s);Array.isArray(o)&&(o=o.map(a=>qp(a))),p(t,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(t,["config"],i),t}function bae(n){const e={},t=h(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const r=h(n,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],ja(r));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function _ae(n,e){const t={},r=h(n,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(n,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(n,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(n,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=h(n,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const u=h(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=h(n,["pubsubTopic"]);e!==void 0&&f!=null&&p(e,["parameters","pubsubTopic"],f);const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const y=h(n,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(n,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],f_(v));const b=h(n,["compressionQuality"]);return e!==void 0&&b!=null&&p(e,["parameters","compressionQuality"],b),t}function Cae(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["_url","model"],lt(n,r));const s=h(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(t,["instances[0]","image"],f_(i));const o=h(e,["video"]);o!=null&&p(t,["instances[0]","video"],bae(o));const a=h(e,["config"]);return a!=null&&p(t,["config"],_ae(a,t)),t}function Sae(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function Eae(n){const e={},t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Tae(n){const e={},t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Aae(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Sae(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],Eae(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Tae(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function kae(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Aae(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function Rae(n){const e={},t=h(n,["citationSources"]);return t!=null&&p(e,["citations"],t),e}function Pae(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const r=h(n,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function Nae(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Pae(s))),p(e,["urlMetadata"],r)}return e}function Iae(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],kae(t));const r=h(n,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],Rae(r));const s=h(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],Nae(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function sM(n){const e={},t=h(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Iae(a))),p(e,["candidates"],o)}const r=h(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const s=h(n,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const i=h(n,["usageMetadata"]);return i!=null&&p(e,["usageMetadata"],i),e}function Mae(n){const e={},t=h(n,["values"]);return t!=null&&p(e,["values"],t),e}function Dae(){return{}}function Lae(n){const e={},t=h(n,["embeddings"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Mae(i))),p(e,["embeddings"],s)}return h(n,["metadata"])!=null&&p(e,["metadata"],Dae()),e}function Fae(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],ja(t));const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function C4(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const r=h(n,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function Oae(n){const e={},t=h(n,["_self"]);t!=null&&p(e,["image"],Fae(t));const r=h(n,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(n,["_self"]);return s!=null&&p(e,["safetyAttributes"],C4(s)),e}function Uae(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Oae(i))),p(e,["generatedImages"],s)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],C4(r)),e}function $ae(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const r=h(n,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function GT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const i=h(n,["version"]);i!=null&&p(e,["version"],i);const o=h(n,["_self"]);o!=null&&p(e,["tunedModelInfo"],$ae(o));const a=h(n,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=h(n,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=h(n,["supportedGenerationMethods"]);return c!=null&&p(e,["supportedActions"],c),e}function jae(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["_self"]);if(r!=null){let s=l4(r);Array.isArray(s)&&(s=s.map(i=>GT(i))),p(e,["models"],s)}return e}function Vae(){return{}}function Bae(n){const e={},t=h(n,["totalTokens"]);t!=null&&p(e,["totalTokens"],t);const r=h(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function zae(n){const e={},t=h(n,["video","uri"]);t!=null&&p(e,["uri"],t);const r=h(n,["video","encodedVideo"]);r!=null&&p(e,["videoBytes"],ja(r));const s=h(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function Hae(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],zae(t)),e}function Gae(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Hae(o))),p(e,["generatedVideos"],i)}const r=h(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function qae(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Gae(o)),e}function Wae(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function Kae(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["data"]);r!=null&&p(e,["data"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Yae(n){const e={},t=h(n,["displayName"]);t!=null&&p(e,["displayName"],t);const r=h(n,["fileUri"]);r!=null&&p(e,["fileUri"],r);const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Jae(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],Wae(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],Kae(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],Yae(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function Xae(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>Jae(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function Qae(n){const e={},t=h(n,["citations"]);return t!=null&&p(e,["citations"],t),e}function Zae(n){const e={},t=h(n,["retrievedUrl"]);t!=null&&p(e,["retrievedUrl"],t);const r=h(n,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function ele(n){const e={},t=h(n,["urlMetadata"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Zae(s))),p(e,["urlMetadata"],r)}return e}function tle(n){const e={},t=h(n,["content"]);t!=null&&p(e,["content"],Xae(t));const r=h(n,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],Qae(r));const s=h(n,["finishMessage"]);s!=null&&p(e,["finishMessage"],s);const i=h(n,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(n,["urlContextMetadata"]);o!=null&&p(e,["urlContextMetadata"],ele(o));const a=h(n,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const l=h(n,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(n,["index"]);c!=null&&p(e,["index"],c);const u=h(n,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const f=h(n,["safetyRatings"]);return f!=null&&p(e,["safetyRatings"],f),e}function iM(n){const e={},t=h(n,["candidates"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>tle(c))),p(e,["candidates"],l)}const r=h(n,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(n,["responseId"]);s!=null&&p(e,["responseId"],s);const i=h(n,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(n,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function nle(n){const e={},t=h(n,["truncated"]);t!=null&&p(e,["truncated"],t);const r=h(n,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function rle(n){const e={},t=h(n,["values"]);t!=null&&p(e,["values"],t);const r=h(n,["statistics"]);return r!=null&&p(e,["statistics"],nle(r)),e}function sle(n){const e={},t=h(n,["billableCharacterCount"]);return t!=null&&p(e,["billableCharacterCount"],t),e}function ile(n){const e={},t=h(n,["predictions[]","embeddings"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>rle(i))),p(e,["embeddings"],s)}const r=h(n,["metadata"]);return r!=null&&p(e,["metadata"],sle(r)),e}function ole(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const r=h(n,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],ja(r));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function S4(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const r=h(n,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function wk(n){const e={},t=h(n,["_self"]);t!=null&&p(e,["image"],ole(t));const r=h(n,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(n,["_self"]);s!=null&&p(e,["safetyAttributes"],S4(s));const i=h(n,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function ale(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>wk(i))),p(e,["generatedImages"],s)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],S4(r)),e}function lle(n){const e={},t=h(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>wk(s))),p(e,["generatedImages"],r)}return e}function cle(n){const e={},t=h(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>wk(s))),p(e,["generatedImages"],r)}return e}function ule(n){const e={},t=h(n,["endpoint"]);t!=null&&p(e,["name"],t);const r=h(n,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function dle(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const r=h(n,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function hle(n){const e={},t=h(n,["checkpointId"]);t!=null&&p(e,["checkpointId"],t);const r=h(n,["epoch"]);r!=null&&p(e,["epoch"],r);const s=h(n,["step"]);return s!=null&&p(e,["step"],s),e}function qT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(n,["description"]);s!=null&&p(e,["description"],s);const i=h(n,["versionId"]);i!=null&&p(e,["version"],i);const o=h(n,["deployedModels"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>ule(m))),p(e,["endpoints"],f)}const a=h(n,["labels"]);a!=null&&p(e,["labels"],a);const l=h(n,["_self"]);l!=null&&p(e,["tunedModelInfo"],dle(l));const c=h(n,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const u=h(n,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>hle(m))),p(e,["checkpoints"],f)}return e}function fle(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["_self"]);if(r!=null){let s=l4(r);Array.isArray(s)&&(s=s.map(i=>qT(i))),p(e,["models"],s)}return e}function ple(){return{}}function mle(n){const e={},t=h(n,["totalTokens"]);return t!=null&&p(e,["totalTokens"],t),e}function gle(n){const e={},t=h(n,["tokensInfo"]);return t!=null&&p(e,["tokensInfo"],t),e}function yle(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const r=h(n,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],ja(r));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function vle(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],yle(t)),e}function wle(n){const e={},t=h(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>vle(o))),p(e,["generatedVideos"],i)}const r=h(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function xle(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response"]);return o!=null&&p(e,["response"],wle(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ble="Content-Type",_le="X-Server-Timeout",Cle="User-Agent",WT="x-goog-api-client",Sle="1.8.0",Ele=`google-genai-sdk/${Sle}`,Tle="v1beta1",Ale="v1beta",oM=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class kle{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Tle,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ale,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const s=[this.getRequestUrlInternal(t)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(t))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const s=new AbortController,i=s.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>s.abort(),t.timeout),r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=i}return t&&t.extraBody!==null&&Rle(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async s=>(await aM(s),new $T(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async s=>(await aM(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return zh(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield bt(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l);try{const f=JSON.parse(c);if("error"in f){const m=JSON.parse(JSON.stringify(f.error)),y=m.status,w=m.code,v=`got status: ${y}. ${JSON.stringify(f)}`;if(w>=400&&w<600)throw new d_({message:v,status:w})}}catch(f){if(f.name==="ApiError")throw f}o+=c;let u=o.match(oM);for(;u;){const f=u[1];try{const m=new Response(f,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield bt(new $T(m)),o=o.slice(u[0].length),u=o.match(oM)}catch(m){throw new Error(`exception parsing stream chunk ${f}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=Ele+" "+this.clientOptions.userAgentExtra;return e[Cle]=t,e[WT]=t,e[ble]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))t.append(r,s);e.timeout&&e.timeout>0&&t.append(_le,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,t);return i.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var r;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},o=await this.request({path:_e("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:s});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function aM(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(r);throw t>=400&&t<600?new d_({message:s,status:t}):new Error(s)}}function Rle(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const i=JSON.parse(n.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))t=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ple="mcp_used/unknown";function E4(n){for(const e of n)if(xk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function T4(n){var e;const t=(e=n[WT])!==null&&e!==void 0?e:"";n[WT]=(t+` ${Ple}`).trimStart()}function Nle(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>xk(s)))!==null&&r!==void 0?r:!1}function Ile(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!xk(s)))!==null&&r!==void 0?r:!1}function xk(n){return n!==null&&typeof n=="object"&&n instanceof bk}function Mle(n,e=100){return zh(this,arguments,function*(){let r,s=0;for(;s<e;){const i=yield bt(n.listTools({cursor:r}));for(const o of i.tools)yield yield bt(o),s++;if(!i.nextCursor)break;r=i.nextCursor}})}class bk{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new bk(e,t)}async initialize(){var e,t,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(t=void 0,ig(Mle(u))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const f=s;o.push(f);const m=f.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=u}}catch(f){t={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Tte(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);t.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dle(n,e,t){const r=new mte;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const i=Bie(s);Object.assign(r,i),e(r)}class Lle{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=Ule(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(_=>{c=_}),f=e.callbacks,m=function(){c({})},y=this.apiClient,w={onopen:m,onmessage:_=>{Dle(y,f.onmessage,_)},onerror:(t=f==null?void 0:f.onerror)!==null&&t!==void 0?t:function(_){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(_){}},v=this.webSocketFactory.create(l,Ole(o),w);v.connect(),await u;const b=lt(this.apiClient,e.model),x=w4({model:b}),C=HT({setup:x});return v.send(JSON.stringify(C)),new Fle(v,this.apiClient)}}class Fle{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=nie(e),r=x4(t);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=rie(e),r=HT(t);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const t=HT({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ah.PLAY)}pause(){this.sendPlaybackControl(Ah.PAUSE)}stop(){this.sendPlaybackControl(Ah.STOP)}resetContext(){this.sendPlaybackControl(Ah.RESET_CONTEXT)}close(){this.conn.close()}}function Ole(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function Ule(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $le="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jle(n,e,t){const r=new pte;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const i=JSON.parse(s);if(n.isVertexAI()){const o=Mie(i);Object.assign(r,o)}else{const o=Iie(i);Object.assign(r,o)}e(r)}class Vle{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new Lle(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,s,i,o,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&E4(e.config.tools)&&T4(f);const m=Gle(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const M=this.apiClient.getApiKey();let D="BidiGenerateContent",F="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),D="BidiGenerateContentConstrained",F="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${D}?${F}=${M}`}let y=()=>{};const w=new Promise(M=>{y=M}),v=e.callbacks,b=function(){var M;(M=v==null?void 0:v.onopen)===null||M===void 0||M.call(v),y({})},x=this.apiClient,C={onopen:b,onmessage:M=>{jle(x,v.onmessage,M)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(M){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(M){}},_=this.webSocketFactory.create(u,Hle(m),C);_.connect(),await w;let T=lt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const M=this.apiClient.getProject(),D=this.apiClient.getLocation();T=`projects/${M}/locations/${D}/`+T}let A={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fx.AUDIO]}:e.config.responseModalities=[Fx.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],N=[];for(const M of P)if(this.isCallableTool(M)){const D=M;N.push(await D.tool())}else N.push(M);N.length>0&&(e.config.tools=N);const I={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=Yse(this.apiClient,I):A=Kse(this.apiClient,I),delete A.config,_.send(JSON.stringify(A)),new zle(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ble={turnComplete:!0};class zle{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Es(t.turns),e.isVertexAI()?r=r.map(s=>qp(s)):r=r.map(s=>h_(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error($le)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Ble),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tie(e)}:t={realtimeInput:eie(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Hle(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function Gle(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lM=10;function cM(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Rw(o)){s=!0;break}if(!s)return!0;const i=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Rw(n){return"callTool"in n&&typeof n.callTool=="function"}function uM(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qle extends Gd{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,s,i,o,a;const l=await this.processParamsForMcpUsage(t);if(!Nle(t)||cM(t.config))return await this.generateContentInternal(l);if(Ile(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const f=Es(l.contents),m=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:lM;let y=0;for(;y<m&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const w=c.candidates[0].content,v=[];for(const b of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Rw(b)){const C=await b.callTool(c.functionCalls);v.push(...C)}y++,u={role:"user",parts:v},l.contents=Es(l.contents),l.contents.push(w),l.contents.push(u),uM(l.config)&&(f.push(w),f.push(u))}return uM(l.config)&&(c.automaticFunctionCallingHistory=f),c},this.generateContentStream=async t=>{if(cM(t.config)){const r=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i}:a={generatedImages:o},a}),this.list=async t=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Uv(Ld.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var t,r,s;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>Rw(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&E4(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),T4(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,r,s;const i=new Map;for(const o of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Rw(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var t,r,s;const i=(s=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:lM;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,f){var m,y;return zh(this,arguments,function*(){for(var w,v,b,x;a<i;){o&&(a++,o=!1);const A=yield bt(c.processParamsForMcpUsage(f)),P=yield bt(c.generateContentStreamInternal(A)),N=[],I=[];try{for(var C=!0,_=(v=void 0,ig(P)),T;T=yield bt(_.next()),w=T.done,!w;C=!0){x=T.value,C=!1;const M=x;if(yield yield bt(M),M.candidates&&(!((m=M.candidates[0])===null||m===void 0)&&m.content)){I.push(M.candidates[0].content);for(const D of(y=M.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<i&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(D.functionCall.name)){const F=yield bt(u.get(D.functionCall.name).callTool([D.functionCall]));N.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(M){v={error:M}}finally{try{!C&&!w&&(b=_.return)&&(yield bt(b.call(_)))}finally{if(v)throw v.error}}if(N.length>0){o=!0;const M=new dm;M.candidates=[{content:{role:"user",parts:N}}],yield yield bt(M);const D=[];D.push(...I),D.push({role:"user",parts:N});const F=Es(f.contents).concat(D);f.contents=F}else break}})}(this,l,e)}async generateContentInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=rM(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=iM(u),m=new dm;return Object.assign(m,f),m})}else{const c=nM(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=sM(u),m=new dm;return Object.assign(m,f),m})}}async generateContentStreamInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=rM(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(f){return zh(this,arguments,function*(){var m,y,w,v;try{for(var b=!0,x=ig(f),C;C=yield bt(x.next()),m=C.done,!m;b=!0){v=C.value,b=!1;const T=iM(yield bt(v.json())),A=new dm;Object.assign(A,T),yield yield bt(A)}}catch(_){y={error:_}}finally{try{!b&&!m&&(w=x.return)&&(yield bt(w.call(x)))}finally{if(y)throw y.error}}})})}else{const c=nM(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(f){return zh(this,arguments,function*(){var m,y,w,v;try{for(var b=!0,x=ig(f),C;C=yield bt(x.next()),m=C.done,!m;b=!0){v=C.value,b=!1;const T=sM(yield bt(v.json())),A=new dm;Object.assign(A,T),yield yield bt(A)}}catch(_){y={error:_}}finally{try{!b&&!m&&(w=x.return)&&(yield bt(w.call(x)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=eae(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=ile(u),m=new LI;return Object.assign(m,f),m})}else{const c=foe(this.apiClient,e);return a=_e("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Lae(u),m=new LI;return Object.assign(m,f),m})}}async generateImagesInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nae(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=ale(u),m=new FI;return Object.assign(m,f),m})}else{const c=moe(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Uae(u),m=new FI;return Object.assign(m,f),m})}}async editImageInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=cae(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=lle(l),u=new lte;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=dae(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=cle(l),u=new cte;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hae(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qT(u))}else{const c=goe(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>GT(u))}}async listInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pae(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=fle(u),m=new OI;return Object.assign(m,f),m})}else{const c=voe(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=jae(u),m=new OI;return Object.assign(m,f),m})}}async update(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=gae(this.apiClient,e);return a=_e("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qT(u))}else{const c=xoe(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>GT(u))}}async delete(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=yae(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=ple(),f=new UI;return Object.assign(f,u),f})}else{const c=boe(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=Vae(),f=new UI;return Object.assign(f,u),f})}}async countTokens(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wae(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=mle(u),m=new $I;return Object.assign(m,f),m})}else{const c=Coe(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Bae(u),m=new $I;return Object.assign(m,f),m})}}async computeTokens(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=xae(this.apiClient,e);return i=_e("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=gle(l),u=new ute;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Cae(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>xle(u))}else{const c=Toe(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>qae(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wle(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["_url","operationName"],t);const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Kle(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["_url","operationName"],t);const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Yle(n){const e={},t=h(n,["operationName"]);t!=null&&p(e,["operationName"],t);const r=h(n,["resourceName"]);r!=null&&p(e,["_url","resourceName"],r);const s=h(n,["config"]);return s!=null&&p(e,["config"],s),e}function Jle(n){const e={},t=h(n,["video","uri"]);t!=null&&p(e,["uri"],t);const r=h(n,["video","encodedVideo"]);r!=null&&p(e,["videoBytes"],ja(r));const s=h(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function Xle(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],Jle(t)),e}function Qle(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Xle(o))),p(e,["generatedVideos"],i)}const r=h(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Zle(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Qle(o)),e}function ece(n){const e={},t=h(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const r=h(n,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],ja(r));const s=h(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function tce(n){const e={},t=h(n,["_self"]);return t!=null&&p(e,["video"],ece(t)),e}function nce(n){const e={},t=h(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>tce(o))),p(e,["generatedVideos"],i)}const r=h(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function dM(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const i=h(n,["error"]);i!=null&&p(e,["error"],i);const o=h(n,["response"]);return o!=null&&p(e,["response"],nce(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rce extends Gd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let i;return r&&"httpOptions"in r&&(i=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:i}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Kle(e);return a=_e("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>dM(u))}else{const c=Wle(e);return a=_e("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Zle(u))}}async fetchPredictVideosOperationInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Yle(e);return i=_e("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>dM(l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sce(n){const e={},t=h(n,["voiceName"]);return t!=null&&p(e,["voiceName"],t),e}function A4(n){const e={},t=h(n,["prebuiltVoiceConfig"]);return t!=null&&p(e,["prebuiltVoiceConfig"],sce(t)),e}function ice(n){const e={},t=h(n,["speaker"]);t!=null&&p(e,["speaker"],t);const r=h(n,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],A4(r)),e}function oce(n){const e={},t=h(n,["speakerVoiceConfigs"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>ice(s))),p(e,["speakerVoiceConfigs"],r)}return e}function ace(n){const e={},t=h(n,["voiceConfig"]);t!=null&&p(e,["voiceConfig"],A4(t));const r=h(n,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],oce(r));const s=h(n,["languageCode"]);return s!=null&&p(e,["languageCode"],s),e}function lce(n){const e={},t=h(n,["fps"]);t!=null&&p(e,["fps"],t);const r=h(n,["endOffset"]);r!=null&&p(e,["endOffset"],r);const s=h(n,["startOffset"]);return s!=null&&p(e,["startOffset"],s),e}function cce(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["data"]);t!=null&&p(e,["data"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function uce(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=h(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function dce(n){const e={},t=h(n,["videoMetadata"]);t!=null&&p(e,["videoMetadata"],lce(t));const r=h(n,["thought"]);r!=null&&p(e,["thought"],r);const s=h(n,["inlineData"]);s!=null&&p(e,["inlineData"],cce(s));const i=h(n,["fileData"]);i!=null&&p(e,["fileData"],uce(i));const o=h(n,["thoughtSignature"]);o!=null&&p(e,["thoughtSignature"],o);const a=h(n,["codeExecutionResult"]);a!=null&&p(e,["codeExecutionResult"],a);const l=h(n,["executableCode"]);l!=null&&p(e,["executableCode"],l);const c=h(n,["functionCall"]);c!=null&&p(e,["functionCall"],c);const u=h(n,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const f=h(n,["text"]);return f!=null&&p(e,["text"],f),e}function hce(n){const e={},t=h(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>dce(i))),p(e,["parts"],s)}const r=h(n,["role"]);return r!=null&&p(e,["role"],r),e}function fce(n){const e={},t=h(n,["behavior"]);t!=null&&p(e,["behavior"],t);const r=h(n,["description"]);r!=null&&p(e,["description"],r);const s=h(n,["name"]);s!=null&&p(e,["name"],s);const i=h(n,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=h(n,["response"]);a!=null&&p(e,["response"],a);const l=h(n,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function pce(n){const e={},t=h(n,["startTime"]);t!=null&&p(e,["startTime"],t);const r=h(n,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function mce(n){const e={},t=h(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],pce(t)),e}function gce(n){const e={},t=h(n,["mode"]);t!=null&&p(e,["mode"],t);const r=h(n,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function yce(n){const e={},t=h(n,["dynamicRetrievalConfig"]);return t!=null&&p(e,["dynamicRetrievalConfig"],gce(t)),e}function vce(){return{}}function wce(n){const e={},t=h(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>fce(c))),p(e,["functionDeclarations"],l)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(n,["googleSearch"]);r!=null&&p(e,["googleSearch"],mce(r));const s=h(n,["googleSearchRetrieval"]);if(s!=null&&p(e,["googleSearchRetrieval"],yce(s)),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(n,["urlContext"])!=null&&p(e,["urlContext"],vce());const o=h(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(n,["computerUse"]);return a!=null&&p(e,["computerUse"],a),e}function xce(n){const e={},t=h(n,["handle"]);if(t!=null&&p(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hM(){return{}}function bce(n){const e={},t=h(n,["disabled"]);t!=null&&p(e,["disabled"],t);const r=h(n,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const s=h(n,["endOfSpeechSensitivity"]);s!=null&&p(e,["endOfSpeechSensitivity"],s);const i=h(n,["prefixPaddingMs"]);i!=null&&p(e,["prefixPaddingMs"],i);const o=h(n,["silenceDurationMs"]);return o!=null&&p(e,["silenceDurationMs"],o),e}function _ce(n){const e={},t=h(n,["automaticActivityDetection"]);t!=null&&p(e,["automaticActivityDetection"],bce(t));const r=h(n,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const s=h(n,["turnCoverage"]);return s!=null&&p(e,["turnCoverage"],s),e}function Cce(n){const e={},t=h(n,["targetTokens"]);return t!=null&&p(e,["targetTokens"],t),e}function Sce(n){const e={},t=h(n,["triggerTokens"]);t!=null&&p(e,["triggerTokens"],t);const r=h(n,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],Cce(r)),e}function Ece(n){const e={},t=h(n,["proactiveAudio"]);return t!=null&&p(e,["proactiveAudio"],t),e}function Tce(n,e){const t={},r=h(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(n,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(n,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(n,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const u=h(n,["seed"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","seed"],u);const f=h(n,["speechConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","speechConfig"],ace(vk(f)));const m=h(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=h(n,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],hce(Gn(y)));const w=h(n,["tools"]);if(e!==void 0&&w!=null){let A=Hp(w);Array.isArray(A)&&(A=A.map(P=>wce(zp(P)))),p(e,["setup","tools"],A)}const v=h(n,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],xce(v));const b=h(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],hM());const x=h(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","outputAudioTranscription"],hM());const C=h(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&p(e,["setup","realtimeInputConfig"],_ce(C));const _=h(n,["contextWindowCompression"]);e!==void 0&&_!=null&&p(e,["setup","contextWindowCompression"],Sce(_));const T=h(n,["proactivity"]);return e!==void 0&&T!=null&&p(e,["setup","proactivity"],Ece(T)),t}function Ace(n,e){const t={},r=h(e,["model"]);r!=null&&p(t,["setup","model"],lt(n,r));const s=h(e,["config"]);return s!=null&&p(t,["config"],Tce(s,t)),t}function kce(n,e,t){const r={},s=h(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&p(t,["newSessionExpireTime"],i);const o=h(e,["uses"]);t!==void 0&&o!=null&&p(t,["uses"],o);const a=h(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&p(t,["bidiGenerateContentSetup"],Ace(n,a));const l=h(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&p(t,["fieldMask"],l),r}function Rce(n,e){const t={},r=h(e,["config"]);return r!=null&&p(t,["config"],kce(n,r,t)),t}function Pce(n){const e={},t=h(n,["name"]);return t!=null&&p(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nce(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${t}.${i}`);e.push(...s)}else e.push(t)}return e.join(",")}function Ice(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const i=Nce(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class Mce extends Gd{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Rce(this.apiClient,e);i=_e("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Ice(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>Pce(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dce(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Lce(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function Fce(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Lce(t,e)),e}function Oce(n){const e={},t=h(n,["textInput"]);t!=null&&p(e,["textInput"],t);const r=h(n,["output"]);return r!=null&&p(e,["output"],r),e}function Uce(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=h(n,["examples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Oce(s))),p(e,["examples","examples"],r)}return e}function $ce(n,e){const t={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=h(n,["epochCount"]);e!==void 0&&s!=null&&p(e,["tuningTask","hyperparameters","epochCount"],s);const i=h(n,["learningRateMultiplier"]);if(i!=null&&p(t,["tuningTask","hyperparameters","learningRateMultiplier"],i),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=h(n,["batchSize"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","batchSize"],o);const a=h(n,["learningRate"]);return e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","learningRate"],a),t}function jce(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const r=h(n,["trainingDataset"]);r!=null&&p(e,["tuningTask","trainingData"],Uce(r));const s=h(n,["config"]);return s!=null&&p(e,["config"],$ce(s,e)),e}function Vce(n){const e={},t=h(n,["name"]);t!=null&&p(e,["_url","name"],t);const r=h(n,["config"]);return r!=null&&p(e,["config"],r),e}function Bce(n,e){const t={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(n,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),t}function zce(n){const e={},t=h(n,["config"]);return t!=null&&p(e,["config"],Bce(t,e)),e}function Hce(n,e){const t={},r=h(n,["gcsUri"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=h(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s),h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Gce(n,e){const t={},r=h(n,["gcsUri"]);r!=null&&p(t,["validationDatasetUri"],r);const s=h(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function qce(n,e){const t={},r=h(n,["validationDataset"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec"],Gce(r,t));const s=h(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&p(e,["tunedModelDisplayName"],s);const i=h(n,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=h(n,["epochCount"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=h(n,["learningRateMultiplier"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=h(n,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=h(n,["adapterSize"]);if(e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function Wce(n){const e={},t=h(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const r=h(n,["trainingDataset"]);r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],Hce(r,e));const s=h(n,["config"]);return s!=null&&p(e,["config"],qce(s,e)),e}function Kce(n){const e={},t=h(n,["name"]);t!=null&&p(e,["model"],t);const r=h(n,["name"]);return r!=null&&p(e,["endpoint"],r),e}function k4(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["state"]);r!=null&&p(e,["state"],i4(r));const s=h(n,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(n,["tuningTask","startTime"]);i!=null&&p(e,["startTime"],i);const o=h(n,["tuningTask","completeTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["description"]);l!=null&&p(e,["description"],l);const c=h(n,["baseModel"]);c!=null&&p(e,["baseModel"],c);const u=h(n,["_self"]);u!=null&&p(e,["tunedModel"],Kce(u));const f=h(n,["distillationSpec"]);f!=null&&p(e,["distillationSpec"],f);const m=h(n,["experiment"]);m!=null&&p(e,["experiment"],m);const y=h(n,["labels"]);y!=null&&p(e,["labels"],y);const w=h(n,["pipelineJob"]);w!=null&&p(e,["pipelineJob"],w);const v=h(n,["satisfiesPzi"]);v!=null&&p(e,["satisfiesPzi"],v);const b=h(n,["satisfiesPzs"]);b!=null&&p(e,["satisfiesPzs"],b);const x=h(n,["serviceAccount"]);x!=null&&p(e,["serviceAccount"],x);const C=h(n,["tunedModelDisplayName"]);return C!=null&&p(e,["tunedModelDisplayName"],C),e}function Yce(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>k4(i))),p(e,["tuningJobs"],s)}return e}function Jce(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(n,["done"]);s!=null&&p(e,["done"],s);const i=h(n,["error"]);return i!=null&&p(e,["error"],i),e}function Xce(n){const e={},t=h(n,["checkpointId"]);t!=null&&p(e,["checkpointId"],t);const r=h(n,["epoch"]);r!=null&&p(e,["epoch"],r);const s=h(n,["step"]);s!=null&&p(e,["step"],s);const i=h(n,["endpoint"]);return i!=null&&p(e,["endpoint"],i),e}function Qce(n){const e={},t=h(n,["model"]);t!=null&&p(e,["model"],t);const r=h(n,["endpoint"]);r!=null&&p(e,["endpoint"],r);const s=h(n,["checkpoints"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Xce(o))),p(e,["checkpoints"],i)}return e}function KT(n){const e={},t=h(n,["name"]);t!=null&&p(e,["name"],t);const r=h(n,["state"]);r!=null&&p(e,["state"],i4(r));const s=h(n,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(n,["startTime"]);i!=null&&p(e,["startTime"],i);const o=h(n,["endTime"]);o!=null&&p(e,["endTime"],o);const a=h(n,["updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(n,["error"]);l!=null&&p(e,["error"],l);const c=h(n,["description"]);c!=null&&p(e,["description"],c);const u=h(n,["baseModel"]);u!=null&&p(e,["baseModel"],u);const f=h(n,["tunedModel"]);f!=null&&p(e,["tunedModel"],Qce(f));const m=h(n,["supervisedTuningSpec"]);m!=null&&p(e,["supervisedTuningSpec"],m);const y=h(n,["tuningDataStats"]);y!=null&&p(e,["tuningDataStats"],y);const w=h(n,["encryptionSpec"]);w!=null&&p(e,["encryptionSpec"],w);const v=h(n,["partnerModelTuningSpec"]);v!=null&&p(e,["partnerModelTuningSpec"],v);const b=h(n,["distillationSpec"]);b!=null&&p(e,["distillationSpec"],b);const x=h(n,["experiment"]);x!=null&&p(e,["experiment"],x);const C=h(n,["labels"]);C!=null&&p(e,["labels"],C);const _=h(n,["pipelineJob"]);_!=null&&p(e,["pipelineJob"],_);const T=h(n,["satisfiesPzi"]);T!=null&&p(e,["satisfiesPzi"],T);const A=h(n,["satisfiesPzs"]);A!=null&&p(e,["satisfiesPzs"],A);const P=h(n,["serviceAccount"]);P!=null&&p(e,["serviceAccount"],P);const N=h(n,["tunedModelDisplayName"]);return N!=null&&p(e,["tunedModelDisplayName"],N),e}function Zce(n){const e={},t=h(n,["nextPageToken"]);t!=null&&p(e,["nextPageToken"],t);const r=h(n,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>KT(i))),p(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eue extends Gd{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Uv(Ld.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const r=await this.tuneMldevInternal(t);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:UT.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Vce(e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>KT(u))}else{const c=Dce(e);return a=_e("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>k4(u))}}async listInternal(e){var t,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=zce(e);return a=_e("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Zce(u),m=new jI;return Object.assign(m,f),m})}else{const c=Fce(e);return a=_e("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const f=Yce(u),m=new jI;return Object.assign(m,f),m})}}async tuneInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Wce(e);return i=_e("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>KT(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jce(e);return i=_e("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>Jce(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tue{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nue=1024*1024*8,rue=3,sue=1e3,iue=2,SC="x-goog-upload-status";async function oue(n,e,t){var r,s,i;let o=0,a=0,l=new $T(new Response),c="upload";for(o=n.size;a<o;){const f=Math.min(nue,o-a),m=n.slice(a,a+f);a+f>=o&&(c+=", finalize");let y=0,w=sue;for(;y<rue&&(l=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[SC]));)y++,await lue(w),w=w*iue;if(a+=f,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[SC])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[SC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function aue(n){return{size:n.size,type:n.type}}function lue(n){return new Promise(e=>setTimeout(e,n))}class cue{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oue(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aue(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uue{create(e,t,r){return new due(e,t,r)}}class due{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fM="x-goog-api-key";class hue{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(fM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fue="gl-node/";class pue{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=ate(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new hue(this.apiKey);this.apiClient=new kle({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fue+"web",uploader:new cue,downloader:new tue}),this.models=new qle(this.apiClient),this.live=new Vle(this.apiClient,s,new uue),this.batches=new Lne(this.apiClient),this.chats=new $re(this.models,this.apiClient),this.caches=new Fre(this.apiClient),this.files=new Qre(this.apiClient),this.operations=new rce(this.apiClient),this.authTokens=new Mce(this.apiClient),this.tunings=new eue(this.apiClient)}}const mue="AIzaSyCxykzmAuWfh4MMe3K8FliQ8uNcvqoWb2c",gue=new pue({apiKey:mue}),yue="gemini-2.5-flash-preview-04-17",R4=n=>{let e=n.trim();const t=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,r=e.match(t);r&&r[2]&&(e=r[2].trim());try{return JSON.parse(e)}catch(s){return console.error("Failed to parse JSON response:",s),console.error("Original string:",n),null}},vue=n=>{const e=[];let t="";return n.forEach(r=>{r.type==="application/pdf"?t+=`

--- Content from ${r.name} ---
${r.content}`:r.type.startsWith("image/")&&e.push({inlineData:{mimeType:r.type,data:r.content}})}),t&&e.unshift({text:t}),e},_k=async(n,e,t=!1)=>{const r=vue(n);r.unshift({text:e});try{return await gue.models.generateContent({model:yue,contents:{parts:r},config:t?{responseMimeType:"application/json"}:{}})}catch(s){throw console.error("Gemini API error:",s),new Error("Failed to generate content. Please check your API key and try again.")}},Ck=n=>({id:n.id,name:n.name,type:n.type,content:n.content||""}),wue=async n=>{const e=n.map(Ck);return(await _k(e,"Provide a concise, easy-to-understand summary of the following document(s). Focus on the key points, main arguments, and conclusions. If there are images, describe their relevance to the text.")).text},xue=async n=>{const e=n.map(Ck),r=await _k(e,'Based on the following document(s), generate 15-20 key terms and their definitions for a set of flashcards. The output must be a valid JSON array of objects, where each object has a "term" and a "definition" key. Do not include any text outside of the JSON array.',!0);return R4(r.text)||[]},bue=async n=>{const e=n.map(Ck),r=await _k(e,'Create a multiple-choice quiz with 10 questions based on the following document(s). For each question, provide 4 distinct options and indicate the correct answer. The output must be a valid JSON array of objects. Each object should have a "question" (string), "options" (array of 4 strings), and "answer" (string, the full text of the correct option). Do not include any text outside of the JSON array.',!0);return R4(r.text)||[]};function _ue({sessionId:n,files:e,onFileAdded:t}){const[r,s]=S.useState(!1),[i,o]=S.useState(!1),[a,l]=S.useState(null),[c,u]=S.useState(""),f=S.useRef(null),{toast:m}=Ps(),y=x=>{x.preventDefault(),s(!1),x.dataTransfer.files&&x.dataTransfer.files.length>0&&w(x.dataTransfer.files)},w=async x=>{if(x.length!==0){o(!0);try{const C=await rte(x);for(const _ of C){t(_);try{const T=await wue([_]),A=await xue([_]),P=await bue([_]);l({summary:T,flashcards:A,quiz:P}),m({title:"File processed successfully",description:`Generated summary, ${A.length} flashcards, and ${P.length} quiz questions for ${_.name}`})}catch(T){console.error("Error generating AI content:",T),m({title:"File uploaded",description:`${_.name} was uploaded successfully, but AI processing failed.`,variant:"destructive"})}}}catch(C){console.error("Error uploading files:",C),m({title:"Upload failed",description:"There was an error uploading your files.",variant:"destructive"})}finally{o(!1)}}},v=()=>{var x;(x=f.current)==null||x.click()},b=x=>{x.target.files&&x.target.files.length>0&&w(x.target.files)};return g.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Study Materials"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload PDFs, images, or other documents to generate study materials"})]}),g.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${r?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:x=>{x.preventDefault(),s(!0)},onDragLeave:()=>s(!1),onDrop:y,children:[g.jsx(x2,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),g.jsx("p",{className:"text-lg font-medium mb-2",children:r?"Drop files here":"Drag and drop files here"}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF, PNG, JPG files"}),g.jsx(ue,{onClick:v,disabled:i,children:i?"Processing...":"Browse Files"}),g.jsx("input",{ref:f,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:b,className:"hidden"})]}),e.length>0&&g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Files"}),g.jsx("div",{className:"space-y-2",children:e.map(x=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[g.jsx("span",{className:"font-medium",children:x.name}),g.jsx("span",{className:"text-sm text-gray-500",children:x.type})]},x.id))})]}),a&&g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Generated Content"}),g.jsxs("div",{className:"space-y-4",children:[a.summary&&g.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[g.jsx("h4",{className:"font-medium mb-2",children:"Summary"}),g.jsx("p",{className:"text-sm",children:a.summary})]}),a.flashcards&&a.flashcards.length>0&&g.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[g.jsxs("h4",{className:"font-medium mb-2",children:["Flashcards (",a.flashcards.length,")"]}),g.jsx("div",{className:"space-y-2",children:a.flashcards.slice(0,3).map((x,C)=>g.jsxs("div",{className:"text-sm",children:[g.jsxs("strong",{children:[x.term,":"]})," ",x.definition]},C))})]}),a.quiz&&a.quiz.length>0&&g.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[g.jsxs("h4",{className:"font-medium mb-2",children:["Quiz Questions (",a.quiz.length,")"]}),g.jsx("div",{className:"space-y-2",children:a.quiz.slice(0,2).map((x,C)=>g.jsxs("div",{className:"text-sm",children:[g.jsxs("strong",{children:["Q",C+1,":"]})," ",x.question]},C))})]})]})]})]})}var Sk="Progress",Ek=100,[Cue,cde]=hr(Sk),[Sue,Eue]=Cue(Sk),P4=S.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=Tue,...o}=n;(s||s===0)&&!pM(s)&&console.error(Aue(`${s}`,"Progress"));const a=pM(s)?s:Ek;r!==null&&!mM(r,a)&&console.error(kue(`${r}`,"Progress"));const l=mM(r,a)?r:null,c=Ux(l)?i(l,a):void 0;return g.jsx(Sue,{scope:t,value:l,max:a,children:g.jsx(we.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Ux(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":M4(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});P4.displayName=Sk;var N4="ProgressIndicator",I4=S.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=Eue(N4,t);return g.jsx(we.div,{"data-state":M4(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});I4.displayName=N4;function Tue(n,e){return`${Math.round(n/e*100)}%`}function M4(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Ux(n){return typeof n=="number"}function pM(n){return Ux(n)&&!isNaN(n)&&n>0}function mM(n,e){return Ux(n)&&!isNaN(n)&&n<=e&&n>=0}function Aue(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ek}\`.`}function kue(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ek} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var D4=P4,Rue=I4;const L4=S.forwardRef(({className:n,value:e,...t},r)=>g.jsx(D4,{ref:r,className:Ee("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...t,children:g.jsx(Rue,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));L4.displayName=D4.displayName;function Pue({sessionId:n,flashcards:e,studyMaterials:t=[],files:r=[]}){var Y,Se;const[s,i]=S.useState([]),[o,a]=S.useState(0),[l,c]=S.useState(!1),[u,f]=S.useState(0),[m,y]=S.useState(0),[w,v]=S.useState(0),{toast:b}=Ps(),[x,C]=S.useState(!1),[_,T]=S.useState(""),[A,P]=S.useState("notes"),[N,I]=S.useState("medium"),[M,D]=S.useState(null),[F,$]=S.useState(""),[G,O]=S.useState("medium"),[W,j]=S.useState(!1),[z,V]=S.useState("");S.useEffect(()=>{const se=e.filter(ke=>!ke.mastered);i(U([...se])),a(0),c(!1),y(se.length),v(e.length-se.length);const xe=e.length,Te=xe>0?Math.round(e.filter(ke=>ke.mastered).length/xe*100):0;f(Te)},[e]);const U=se=>{const xe=[...se];for(let Te=xe.length-1;Te>0;Te--){const ke=Math.floor(Math.random()*(Te+1));[xe[Te],xe[ke]]=[xe[ke],xe[Te]]}return xe},H=async()=>{if(s.length===0)return;const se=s[o];try{const xe=s.filter(Nt=>Nt.id!==se.id);i(xe),y(xe.length),v(w+1);const Te=e.length,ke=Te>0?Math.round((w+1)/Te*100):0;f(ke),c(!1),a(o>=xe.length?0:o),b({title:"Marked as mastered",description:"You've mastered this flashcard!"})}catch{b({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},Q=()=>{if(s.length===0)return;const se=[...s],xe=se.splice(o,1)[0];se.push(xe),i(se),c(!1),a(o>=se.length-1?0:o)},J=()=>{c(!1),a((o+1)%s.length)},re=()=>{c(!1),a((o-1+s.length)%s.length)},ye=()=>{const se=U([...e]);i(se),a(0),c(!1),y(se.length),v(0),f(0)},Me=async()=>{if(!_){b({title:"Topic required",description:"Please enter a topic for your study material",variant:"destructive"});return}C(!0),D(null);try{const se=await XX(_,A,N,r,n),xe={id:`sm-${Date.now()}`,title:_,content:se,format:A,complexity:N,createdat:new Date().toISOString()};D(xe),b({title:"Study material generated",description:"Your study material has been created successfully"})}catch(se){b({title:"Error",description:se instanceof Error?se.message:"Failed to generate study material",variant:"destructive"})}finally{C(!1)}},De=async()=>{if(!F){b({title:"Question required",description:"Please enter a question to generate an answer",variant:"destructive"});return}j(!0),V("");try{const se=await dE(F,G,r,n);V(se),b({title:"Answer generated",description:"Long-form answer has been generated successfully"})}catch(se){b({title:"Error",description:se instanceof Error?se.message:"Failed to generate answer",variant:"destructive"})}finally{j(!1)}};return g.jsxs("div",{children:[g.jsxs(b$,{defaultValue:"longAnswer",className:"w-full",children:[g.jsxs(X1,{className:"w-full mb-6",children:[g.jsxs(ha,{value:"flashcards",className:"flex-1",children:[g.jsx(ex,{className:"h-4 w-4 mr-2"}),"Flashcards"]}),g.jsxs(ha,{value:"longAnswer",className:"flex-1",children:[g.jsx(h6,{className:"h-4 w-4 mr-2"}),"Ask Questions"]}),g.jsxs(ha,{value:"material",className:"flex-1",children:[g.jsx(JR,{className:"h-4 w-4 mr-2"}),"Study Materials"]})]}),g.jsxs(fa,{value:"flashcards",children:[g.jsx("div",{className:"flex justify-between items-center mb-6",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcard Review"}),g.jsx("p",{className:"text-gray-600",children:"Practice your flashcards until you master them"})]})}),g.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-sm font-medium",children:"Mastery Progress"}),g.jsxs("span",{className:"text-sm font-medium",children:[u,"%"]})]}),g.jsx(L4,{value:u,className:"h-2"}),g.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-purple-600",children:w})," mastered"]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-purple-600",children:m})," remaining"]})]})]}),s.length>0?g.jsxs("div",{children:[g.jsx("div",{className:"flex justify-center mb-8",children:g.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>c(!l),children:g.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${l?"rotate-y-180":""}`,children:[g.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:g.jsx("span",{className:"text-purple-600 font-semibold",children:o+1})}),g.jsx("p",{className:"text-center text-xl font-medium",children:(Y=s[o])==null?void 0:Y.front}),g.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),g.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[g.jsx("p",{className:"text-center text-lg",children:(Se=s[o])==null?void 0:Se.back}),g.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs(ue,{variant:"outline",onClick:re,disabled:s.length<=1,className:"flex items-center",children:[g.jsx(g2,{className:"mr-2 h-4 w-4"}),"Previous"]}),g.jsxs(ue,{variant:"outline",onClick:J,disabled:s.length<=1,className:"flex items-center",children:["Next",g.jsx(d6,{className:"ml-2 h-4 w-4"})]})]}),g.jsxs("div",{className:"flex gap-4 justify-center",children:[g.jsxs(ue,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 flex-1 md:flex-none",onClick:Q,children:[g.jsx(bv,{className:"mr-2 h-4 w-4"}),"Need More Practice"]}),g.jsxs(ue,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 flex-1 md:flex-none",onClick:H,children:[g.jsx(sn,{className:"mr-2 h-4 w-4"}),"Mark as Mastered"]})]})]}):e.length===0?g.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[g.jsx(ex,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards to learn"}),g.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create flashcards first in the Flashcards tab"})]}):g.jsxs("div",{className:"text-center py-16 border rounded-lg bg-purple-50",children:[g.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:g.jsx(sn,{className:"h-8 w-8 text-purple-600"})}),g.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All cards mastered!"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"Congratulations! You've mastered all your flashcards."}),g.jsx(ue,{className:"gradient-bg",onClick:ye,children:"Restart All Cards"})]})]}),g.jsxs(fa,{value:"longAnswer",children:[g.jsx("div",{className:"flex justify-between items-center mb-6",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Ask Deep Questions"}),g.jsx("p",{className:"text-gray-600",children:"Get comprehensive answers to complex questions about your study materials"}),r.length>0&&g.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),g.jsxs("span",{className:"text-sm text-green-600 font-medium",children:[r.length," file",r.length>1?"s":""," available for context"]})]})]})}),g.jsxs(ci,{className:"mb-6",children:[g.jsx(Zi,{children:g.jsx(da,{children:"Ask a Question"})}),g.jsx(eo,{children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(Je,{htmlFor:"question",children:"Your Question"}),g.jsx(Jc,{id:"question",placeholder:"Enter a detailed question (e.g., 'Explain how the Holocaust impacted international law and human rights frameworks')",value:F,onChange:se=>$(se.target.value),className:"h-32"})]}),g.jsxs("div",{children:[g.jsx(Je,{children:"Answer Complexity"}),g.jsxs(sg,{value:G,onValueChange:O,className:"flex mt-2",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(js,{value:"simple",id:"simple-answer"}),g.jsx(Je,{htmlFor:"simple-answer",children:"Simple"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"medium",id:"medium-answer"}),g.jsx(Je,{htmlFor:"medium-answer",children:"Medium"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"advanced",id:"advanced-answer"}),g.jsx(Je,{htmlFor:"advanced-answer",children:"Advanced"})]})]})]}),g.jsx(ue,{onClick:De,disabled:W,className:"w-full",children:W?"Generating...":g.jsxs(g.Fragment,{children:[g.jsx(WA,{className:"mr-2 h-4 w-4"}),"Generate Answer"]})})]})})]}),z&&g.jsxs(ci,{children:[g.jsx(Zi,{children:g.jsx(da,{children:"Detailed Answer"})}),g.jsx(eo,{children:g.jsx("div",{className:"prose max-w-none",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:z.replace(/\n/g,"<br>")}})})})]})]}),g.jsxs(fa,{value:"material",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-2xl font-semibold",children:"Study Materials"}),r.length>0&&g.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[g.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),g.jsxs("span",{children:[r.length," file",r.length>1?"s":""," available"]})]})]}),g.jsx("p",{className:"text-gray-600",children:"Generate study materials and practice with flashcards"})]}),t.length>0||M?g.jsxs("div",{className:"mb-6",children:[M&&g.jsxs(ci,{className:"mb-6",children:[g.jsx(Zi,{children:g.jsx(da,{children:M.title})}),g.jsx(eo,{children:g.jsx("div",{className:"prose max-w-none",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:M.content.replace(/\n/g,"<br>")}})})})]}),t.map(se=>g.jsxs(ci,{className:"mb-6",children:[g.jsx(Zi,{children:g.jsx(da,{children:se.title})}),g.jsx(eo,{children:g.jsx("div",{className:"prose max-w-none",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:se.content.replace(/\n/g,"<br>")}})})})]},se.id))]}):g.jsxs("div",{className:"text-center py-10 border rounded-lg bg-gray-50 mb-6",children:[g.jsx(JR,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No study materials yet"}),g.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate comprehensive study materials below"})]}),g.jsxs(ci,{children:[g.jsx(Zi,{children:g.jsx(da,{children:"Generate New Study Material"})}),g.jsx(eo,{children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(Je,{htmlFor:"topic",children:"Topic"}),g.jsx(_s,{id:"topic",placeholder:"Enter topic (e.g., 'The Holocaust and World War II')",value:_,onChange:se=>T(se.target.value)})]}),g.jsxs("div",{children:[g.jsx(Je,{children:"Format"}),g.jsxs(sg,{value:A,onValueChange:se=>P(se),className:"flex mt-2",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(js,{value:"notes",id:"notes"}),g.jsx(Je,{htmlFor:"notes",children:"Notes"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"outline",id:"outline"}),g.jsx(Je,{htmlFor:"outline",children:"Outline"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"summary",id:"summary"}),g.jsx(Je,{htmlFor:"summary",children:"Summary"})]})]})]}),g.jsxs("div",{children:[g.jsx(Je,{children:"Complexity"}),g.jsxs(sg,{value:N,onValueChange:I,className:"flex mt-2",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(js,{value:"simple",id:"simple"}),g.jsx(Je,{htmlFor:"simple",children:"Simple"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"medium",id:"medium"}),g.jsx(Je,{htmlFor:"medium",children:"Medium"})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(js,{value:"advanced",id:"advanced"}),g.jsx(Je,{htmlFor:"advanced",children:"Advanced"})]})]})]}),g.jsx(ue,{onClick:Me,disabled:x,className:"w-full",children:x?"Generating...":g.jsxs(g.Fragment,{children:[g.jsx(b6,{className:"mr-2 h-4 w-4"}),"Generate Study Material"]})})]})})]})]})]}),g.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}function Nue(){const{id:n}=DW(),e=$d(),{toast:t}=Ps(),[r,s]=S.useState(null),[i,o]=S.useState("files"),a=Ua(),{isLoading:l,error:c,data:u}=wF({queryKey:["session",n],queryFn:async()=>{const f=await Ca.getSession(n??"");if(f.error||!f.session)throw new Error(f.error||"Session not found");return{id:f.session.id,title:f.session.title,description:f.session.description||"",createdat:f.session.created_at,updatedat:f.session.updated_at,files:[],flashcards:[],quizzes:[],studyMaterials:[]}},enabled:!!n,retry:1,retryDelay:1e3});return S.useEffect(()=>{u?(console.log("Session query success:",{id:n,data:u}),s(u)):c?(console.error("Session query error:",{id:n,error:c}),t({title:"Error",description:"Failed to load study session",variant:"destructive"}),e("/sessions")):!l&&!u&&(console.log("Session not found for ID:",n),t({title:"Error",description:"Study session not found",variant:"destructive"}),e("/sessions"))},[u,c,l,n,e,t]),l?g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(jh,{}),g.jsx("div",{className:"container mx-auto px-4 py-12",children:g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})]}):r?g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(jh,{}),g.jsxs("div",{ref:a,className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"mb-6",children:[g.jsxs(ue,{variant:"outline",className:"mb-4",onClick:()=>e("/sessions"),children:[g.jsx(g2,{className:"mr-2 h-4 w-4"}),"Back to Sessions"]}),g.jsx("h1",{className:"text-3xl font-bold",children:r.title}),g.jsx("p",{className:"text-gray-600 mt-1",children:r.description})]}),g.jsxs(b$,{value:i,onValueChange:o,children:[g.jsxs(X1,{className:"grid grid-cols-5 mb-8",children:[g.jsxs(ha,{value:"files",className:"flex items-center",children:[g.jsx(x6,{className:"mr-2 h-4 w-4"}),"Files"]}),g.jsxs(ha,{value:"flashcards",className:"flex items-center",children:[g.jsx(y2,{className:"mr-2 h-4 w-4"}),"Flashcards"]}),g.jsxs(ha,{value:"quiz",className:"flex items-center",children:[g.jsx(sn,{className:"mr-2 h-4 w-4"}),"Quiz"]}),g.jsxs(ha,{value:"learn",className:"flex items-center",children:[g.jsx(ex,{className:"mr-2 h-4 w-4"}),"Learn"]}),g.jsxs(ha,{value:"chat",className:"flex items-center",children:[g.jsx(WA,{className:"mr-2 h-4 w-4"}),"Chat"]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[g.jsx(fa,{value:"files",children:g.jsx(_ue,{sessionId:r.id,files:r.files,onFileAdded:f=>{s({...r,files:[...r.files,f]})}})}),g.jsx(fa,{value:"flashcards",children:g.jsx(qQ,{sessionId:r.id,flashcards:r.flashcards,files:r.files,onFlashcardAdded:f=>{s(m=>({...m,flashcards:[...m.flashcards,f]}))},onFlashcardsAdded:f=>{s(m=>({...m,flashcards:[...m.flashcards,...f]}))},onMasteryToggled:(f,m)=>{s(y=>({...y,flashcards:y.flashcards.map(w=>w.id===f?{...w,mastered:!w.mastered}:w)}))}})}),g.jsx(fa,{value:"quiz",children:g.jsx(uZ,{sessionId:r.id,quizzes:r.quizzes,files:r.files,flashcards:r.flashcards,onQuizAdded:f=>{s({...r,quizzes:[...r.quizzes,{...f,id:`quiz_${Date.now()}`}]})}})}),g.jsx(fa,{value:"learn",children:g.jsx(Pue,{sessionId:r.id,flashcards:r.flashcards,studyMaterials:r.studyMaterials||[],files:r.files})}),g.jsx(fa,{value:"chat",children:g.jsx(dZ,{sessionId:r.id,files:r.files,onFileUploaded:f=>{s({...r,files:[...r.files,f]})}})})]})]})]})]}):g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(jh,{}),g.jsx("div",{className:"container mx-auto px-4 py-12",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:"Session not found"}),g.jsx(ue,{variant:"outline",className:"mt-4",onClick:()=>e("/sessions"),children:"Go back to sessions"})]})})]})}const Iue=Cb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Mue({className:n,variant:e,...t}){return g.jsx("div",{className:Ee(Iue({variant:e}),n),...t})}const Due=[{id:"free",name:"Free",price:"$0",period:"forever",description:"Perfect for trying out Quiz.io",features:["1 study session per month","All AI features within session","PDF upload (up to 10MB)","Basic support"],priceId:null,popular:!1},{id:"pro",name:"Pro",price:"$9.99",period:"per month",description:"For serious students",features:["Unlimited study sessions","All AI features","Unlimited PDF uploads","Priority support","Export to PDF/Word","Advanced analytics"],priceId:"price_pro_monthly",popular:!0}];function Lue(){const{subscription:n,createCheckoutSession:e,createPortalSession:t}=J7(),r=async(o,a)=>{if(!o){alert("This plan is not available for purchase.");return}try{await e(o)}catch(l){console.error("Error creating checkout session:",l),alert("Failed to start checkout process. Please try again.")}},s=async()=>{try{await t()}catch(o){console.error("Error creating portal session:",o),alert("Failed to open billing portal. Please try again.")}},i=o=>(n==null?void 0:n.plan)===o;return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100 py-12",children:g.jsxs("div",{className:"container mx-auto px-4",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),g.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Start with our free plan and upgrade when you need more sessions."})]}),g.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:Due.map(o=>g.jsxs(ci,{className:`relative ${o.popular?"border-purple-500 shadow-lg scale-105":"border-gray-200"}`,children:[o.popular&&g.jsx(Mue,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-purple-500 text-white",children:"Most Popular"}),g.jsxs(Zi,{className:"text-center",children:[g.jsx(da,{className:"text-2xl font-bold",children:o.name}),g.jsx(o$,{children:o.description}),g.jsxs("div",{className:"mt-4",children:[g.jsx("span",{className:"text-4xl font-bold text-gray-900",children:o.price}),g.jsx("span",{className:"text-gray-600 ml-2",children:o.period})]})]}),g.jsxs(eo,{children:[g.jsx("ul",{className:"space-y-3 mb-6",children:o.features.map((a,l)=>g.jsxs("li",{className:"flex items-center",children:[g.jsx(sn,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),g.jsx("span",{className:"text-gray-700",children:a})]},l))}),i(o.id)?g.jsxs("div",{className:"space-y-2",children:[g.jsx(ue,{className:"w-full",variant:"outline",disabled:!0,children:"Current Plan"}),o.id!=="free"&&g.jsx(ue,{className:"w-full",variant:"outline",onClick:s,children:"Manage Subscription"})]}):g.jsx(ue,{className:"w-full",onClick:()=>r(o.priceId,o.name),disabled:!o.priceId,children:o.priceId?"Get Started":"Current Plan"})]})]},o.id))}),g.jsx("div",{className:"mt-12 text-center",children:g.jsx("p",{className:"text-gray-600",children:"All plans include a 14-day free trial. Cancel anytime."})})]})})}const Fue=new Pq,Oue=()=>g.jsx(Lq,{client:Fue,children:g.jsxs(fq,{children:[g.jsx(lH,{}),g.jsx(jH,{}),g.jsx(W7,{children:g.jsx(Y7,{children:g.jsx(b8,{children:g.jsxs(XW,{children:[g.jsx(Dc,{path:"/",element:g.jsx(zX,{})}),g.jsx(Dc,{path:"/pricing",element:g.jsx(Lue,{})}),g.jsxs(Dc,{element:g.jsx(K7,{redirectTo:"/"}),children:[g.jsx(Dc,{path:"/sessions",element:g.jsx(GX,{})}),g.jsx(Dc,{path:"/session/:id",element:g.jsx(Nue,{})})]}),g.jsx(Dc,{path:"*",element:g.jsx(HX,{})})]})})})})]})});localStorage.removeItem("quiz_io_current_user");EC.createRoot(document.getElementById("root")).render(g.jsx(K.StrictMode,{children:g.jsx(Oue,{})}));
