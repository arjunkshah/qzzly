var F$=Object.defineProperty;var tb=n=>{throw TypeError(n)};var O$=(n,e,t)=>e in n?F$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var W=(n,e,t)=>O$(n,typeof e!="symbol"?e+"":e,t),mw=(n,e,t)=>e.has(n)||tb("Cannot "+t);var d=(n,e,t)=>(mw(n,e,"read from private field"),t?t.call(n):e.get(n)),b=(n,e,t)=>e.has(n)?tb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,i)=>(mw(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),R=(n,e,t)=>(mw(n,e,"access private method"),t);var zt=(n,e,t,i)=>({set _(s){T(n,e,s,t)},get _(){return d(n,e,i)}});function U$(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function vM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xM={exports:{}},cx={},wM={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=Symbol.for("react.element"),$$=Symbol.for("react.portal"),V$=Symbol.for("react.fragment"),B$=Symbol.for("react.strict_mode"),H$=Symbol.for("react.profiler"),z$=Symbol.for("react.provider"),j$=Symbol.for("react.context"),G$=Symbol.for("react.forward_ref"),q$=Symbol.for("react.suspense"),W$=Symbol.for("react.memo"),K$=Symbol.for("react.lazy"),nb=Symbol.iterator;function Y$(n){return n===null||typeof n!="object"?null:(n=nb&&n[nb]||n["@@iterator"],typeof n=="function"?n:null)}var CM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SM=Object.assign,EM={};function sh(n,e,t){this.props=n,this.context=e,this.refs=EM,this.updater=t||CM}sh.prototype.isReactComponent={};sh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};sh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _M(){}_M.prototype=sh.prototype;function A_(n,e,t){this.props=n,this.context=e,this.refs=EM,this.updater=t||CM}var b_=A_.prototype=new _M;b_.constructor=A_;SM(b_,sh.prototype);b_.isPureReactComponent=!0;var ib=Array.isArray,TM=Object.prototype.hasOwnProperty,R_={current:null},AM={key:!0,ref:!0,__self:!0,__source:!0};function bM(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)TM.call(e,i)&&!AM.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Lg,type:n,key:r,ref:o,props:s,_owner:R_.current}}function J$(n,e){return{$$typeof:Lg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function P_(n){return typeof n=="object"&&n!==null&&n.$$typeof===Lg}function X$(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var sb=/\/+/g;function gw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?X$(""+n.key):e.toString(36)}function Hy(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Lg:case $$:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+gw(o,0):i,ib(s)?(t="",n!=null&&(t=n.replace(sb,"$&/")+"/"),Hy(s,e,t,"",function(c){return c})):s!=null&&(P_(s)&&(s=J$(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sb,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",ib(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+gw(r,a);o+=Hy(r,e,t,l,s)}else if(l=Y$(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+gw(r,a++),o+=Hy(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oy(n,e,t){if(n==null)return n;var i=[],s=0;return Hy(n,i,"","",function(r){return e.call(t,r,s++)}),i}function Q$(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $n={current:null},zy={transition:null},Z$={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:zy,ReactCurrentOwner:R_};function RM(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:oy,forEach:function(n,e,t){oy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return oy(n,function(){e++}),e},toArray:function(n){return oy(n,function(e){return e})||[]},only:function(n){if(!P_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ke.Component=sh;ke.Fragment=V$;ke.Profiler=H$;ke.PureComponent=A_;ke.StrictMode=B$;ke.Suspense=q$;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z$;ke.act=RM;ke.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=SM({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=R_.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)TM.call(e,l)&&!AM.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Lg,type:n.type,key:s,ref:r,props:i,_owner:o}};ke.createContext=function(n){return n={$$typeof:j$,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:z$,_context:n},n.Consumer=n};ke.createElement=bM;ke.createFactory=function(n){var e=bM.bind(null,n);return e.type=n,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(n){return{$$typeof:G$,render:n}};ke.isValidElement=P_;ke.lazy=function(n){return{$$typeof:K$,_payload:{_status:-1,_result:n},_init:Q$}};ke.memo=function(n,e){return{$$typeof:W$,type:n,compare:e===void 0?null:e}};ke.startTransition=function(n){var e=zy.transition;zy.transition={};try{n()}finally{zy.transition=e}};ke.unstable_act=RM;ke.useCallback=function(n,e){return $n.current.useCallback(n,e)};ke.useContext=function(n){return $n.current.useContext(n)};ke.useDebugValue=function(){};ke.useDeferredValue=function(n){return $n.current.useDeferredValue(n)};ke.useEffect=function(n,e){return $n.current.useEffect(n,e)};ke.useId=function(){return $n.current.useId()};ke.useImperativeHandle=function(n,e,t){return $n.current.useImperativeHandle(n,e,t)};ke.useInsertionEffect=function(n,e){return $n.current.useInsertionEffect(n,e)};ke.useLayoutEffect=function(n,e){return $n.current.useLayoutEffect(n,e)};ke.useMemo=function(n,e){return $n.current.useMemo(n,e)};ke.useReducer=function(n,e,t){return $n.current.useReducer(n,e,t)};ke.useRef=function(n){return $n.current.useRef(n)};ke.useState=function(n){return $n.current.useState(n)};ke.useSyncExternalStore=function(n,e,t){return $n.current.useSyncExternalStore(n,e,t)};ke.useTransition=function(){return $n.current.useTransition()};ke.version="18.3.1";wM.exports=ke;var E=wM.exports;const X=vM(E),PM=U$({__proto__:null,default:X},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=E,t4=Symbol.for("react.element"),n4=Symbol.for("react.fragment"),i4=Object.prototype.hasOwnProperty,s4=e4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r4={key:!0,ref:!0,__self:!0,__source:!0};function MM(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)i4.call(e,i)&&!r4.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:t4,type:n,key:r,ref:o,props:s,_owner:s4.current}}cx.Fragment=n4;cx.jsx=MM;cx.jsxs=MM;xM.exports=cx;var y=xM.exports,pC={},NM={exports:{}},Pi={},IM={exports:{}},kM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,F){var z=U.length;U.push(F);e:for(;0<z;){var te=z-1>>>1,Y=U[te];if(0<s(Y,F))U[te]=F,U[z]=Y,z=te;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var F=U[0],z=U.pop();if(z!==F){U[0]=z;e:for(var te=0,Y=U.length,ie=Y>>>1;te<ie;){var he=2*(te+1)-1,Re=U[he],Pe=he+1,G=U[Pe];if(0>s(Re,z))Pe<Y&&0>s(G,Re)?(U[te]=G,U[Pe]=z,te=Pe):(U[te]=Re,U[he]=z,te=he);else if(Pe<Y&&0>s(G,z))U[te]=G,U[Pe]=z,te=Pe;else break e}}return F}function s(U,F){var z=U.sortIndex-F.sortIndex;return z!==0?z:U.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,w=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var F=t(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=U)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=t(c)}}function A(U){if(v=!1,_(U),!w)if(t(l)!==null)w=!0,O(P);else{var F=t(c);F!==null&&B(A,F.startTime-U)}}function P(U,F){w=!1,v&&(v=!1,x(I),I=-1),g=!0;var z=m;try{for(_(F),p=t(l);p!==null&&(!(p.expirationTime>F)||U&&!L());){var te=p.callback;if(typeof te=="function"){p.callback=null,m=p.priorityLevel;var Y=te(p.expirationTime<=F);F=n.unstable_now(),typeof Y=="function"?p.callback=Y:p===t(l)&&i(l),_(F)}else i(l);p=t(l)}if(p!==null)var ie=!0;else{var he=t(c);he!==null&&B(A,he.startTime-F),ie=!1}return ie}finally{p=null,m=z,g=!1}}var M=!1,N=null,I=-1,k=5,D=-1;function L(){return!(n.unstable_now()-D<k)}function $(){if(N!==null){var U=n.unstable_now();D=U;var F=!0;try{F=N(!0,U)}finally{F?j():(M=!1,N=null)}}else M=!1}var j;if(typeof C=="function")j=function(){C($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=$,j=function(){H.postMessage(null)}}else j=function(){S($,0)};function O(U){N=U,M||(M=!0,j())}function B(U,F){I=S(function(){U(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){w||g||(w=!0,O(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return U()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=m;m=U;try{return F()}finally{m=z}},n.unstable_scheduleCallback=function(U,F,z){var te=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,U={id:u++,callback:F,priorityLevel:U,startTime:z,expirationTime:Y,sortIndex:-1},z>te?(U.sortIndex=z,e(c,U),t(l)===null&&U===t(c)&&(v?(x(I),I=-1):v=!0,B(A,z-te))):(U.sortIndex=Y,e(l,U),w||g||(w=!0,O(P))),U},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(U){var F=m;return function(){var z=m;m=F;try{return U.apply(this,arguments)}finally{m=z}}}})(kM);IM.exports=kM;var o4=IM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4=E,Ri=o4;function q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DM=new Set,Rp={};function Cu(n,e){jf(n,e),jf(n+"Capture",e)}function jf(n,e){for(Rp[n]=e,n=0;n<e.length;n++)DM.add(e[n])}var _o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mC=Object.prototype.hasOwnProperty,l4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rb={},ob={};function c4(n){return mC.call(ob,n)?!0:mC.call(rb,n)?!1:l4.test(n)?ob[n]=!0:(rb[n]=!0,!1)}function u4(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function d4(n,e,t,i){if(e===null||typeof e>"u"||u4(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){un[n]=new Vn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];un[e]=new Vn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){un[n]=new Vn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){un[n]=new Vn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){un[n]=new Vn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){un[n]=new Vn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){un[n]=new Vn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){un[n]=new Vn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){un[n]=new Vn(n,5,!1,n.toLowerCase(),null,!1,!1)});var M_=/[\-:]([a-z])/g;function N_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(M_,N_);un[e]=new Vn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(M_,N_);un[e]=new Vn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(M_,N_);un[e]=new Vn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){un[n]=new Vn(n,1,!1,n.toLowerCase(),null,!1,!1)});un.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){un[n]=new Vn(n,1,!1,n.toLowerCase(),null,!0,!0)});function I_(n,e,t,i){var s=un.hasOwnProperty(e)?un[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d4(e,t,s,i)&&(t=null),i||s===null?c4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ko=a4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ay=Symbol.for("react.element"),Ku=Symbol.for("react.portal"),Yu=Symbol.for("react.fragment"),k_=Symbol.for("react.strict_mode"),gC=Symbol.for("react.profiler"),LM=Symbol.for("react.provider"),FM=Symbol.for("react.context"),D_=Symbol.for("react.forward_ref"),yC=Symbol.for("react.suspense"),vC=Symbol.for("react.suspense_list"),L_=Symbol.for("react.memo"),qo=Symbol.for("react.lazy"),OM=Symbol.for("react.offscreen"),ab=Symbol.iterator;function bh(n){return n===null||typeof n!="object"?null:(n=ab&&n[ab]||n["@@iterator"],typeof n=="function"?n:null)}var wt=Object.assign,yw;function Bh(n){if(yw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);yw=e&&e[1]||""}return`
`+yw+n}var vw=!1;function xw(n,e){if(!n||vw)return"";vw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{vw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Bh(n):""}function f4(n){switch(n.tag){case 5:return Bh(n.type);case 16:return Bh("Lazy");case 13:return Bh("Suspense");case 19:return Bh("SuspenseList");case 0:case 2:case 15:return n=xw(n.type,!1),n;case 11:return n=xw(n.type.render,!1),n;case 1:return n=xw(n.type,!0),n;default:return""}}function xC(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Yu:return"Fragment";case Ku:return"Portal";case gC:return"Profiler";case k_:return"StrictMode";case yC:return"Suspense";case vC:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case FM:return(n.displayName||"Context")+".Consumer";case LM:return(n._context.displayName||"Context")+".Provider";case D_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L_:return e=n.displayName||null,e!==null?e:xC(n.type)||"Memo";case qo:e=n._payload,n=n._init;try{return xC(n(e))}catch{}}return null}function h4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xC(e);case 8:return e===k_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UM(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p4(n){var e=UM(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ly(n){n._valueTracker||(n._valueTracker=p4(n))}function $M(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=UM(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Hv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function wC(n,e){var t=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function lb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=rl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function VM(n,e){e=e.checked,e!=null&&I_(n,"checked",e,!1)}function CC(n,e){VM(n,e);var t=rl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?SC(n,e.type,t):e.hasOwnProperty("defaultValue")&&SC(n,e.type,rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function cb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function SC(n,e,t){(e!=="number"||Hv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hh=Array.isArray;function ud(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+rl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function EC(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ub(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(Hh(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:rl(t)}}function BM(n,e){var t=rl(e.value),i=rl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function db(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function HM(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _C(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?HM(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cy,zM=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(cy=cy||document.createElement("div"),cy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Pp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var yp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m4=["Webkit","ms","Moz","O"];Object.keys(yp).forEach(function(n){m4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),yp[e]=yp[n]})});function jM(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||yp.hasOwnProperty(n)&&yp[n]?(""+e).trim():e+"px"}function GM(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=jM(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var g4=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function TC(n,e){if(e){if(g4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function AC(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bC=null;function F_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var RC=null,dd=null,fd=null;function fb(n){if(n=Ug(n)){if(typeof RC!="function")throw Error(q(280));var e=n.stateNode;e&&(e=px(e),RC(n.stateNode,n.type,e))}}function qM(n){dd?fd?fd.push(n):fd=[n]:dd=n}function WM(){if(dd){var n=dd,e=fd;if(fd=dd=null,fb(n),e)for(n=0;n<e.length;n++)fb(e[n])}}function KM(n,e){return n(e)}function YM(){}var ww=!1;function JM(n,e,t){if(ww)return n(e,t);ww=!0;try{return KM(n,e,t)}finally{ww=!1,(dd!==null||fd!==null)&&(YM(),WM())}}function Mp(n,e){var t=n.stateNode;if(t===null)return null;var i=px(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var PC=!1;if(_o)try{var Rh={};Object.defineProperty(Rh,"passive",{get:function(){PC=!0}}),window.addEventListener("test",Rh,Rh),window.removeEventListener("test",Rh,Rh)}catch{PC=!1}function y4(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var vp=!1,zv=null,jv=!1,MC=null,v4={onError:function(n){vp=!0,zv=n}};function x4(n,e,t,i,s,r,o,a,l){vp=!1,zv=null,y4.apply(v4,arguments)}function w4(n,e,t,i,s,r,o,a,l){if(x4.apply(this,arguments),vp){if(vp){var c=zv;vp=!1,zv=null}else throw Error(q(198));jv||(jv=!0,MC=c)}}function Su(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function XM(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function hb(n){if(Su(n)!==n)throw Error(q(188))}function C4(n){var e=n.alternate;if(!e){if(e=Su(n),e===null)throw Error(q(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return hb(s),n;if(r===i)return hb(s),e;r=r.sibling}throw Error(q(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(t.alternate!==i)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?n:e}function QM(n){return n=C4(n),n!==null?ZM(n):null}function ZM(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ZM(n);if(e!==null)return e;n=n.sibling}return null}var eN=Ri.unstable_scheduleCallback,pb=Ri.unstable_cancelCallback,S4=Ri.unstable_shouldYield,E4=Ri.unstable_requestPaint,At=Ri.unstable_now,_4=Ri.unstable_getCurrentPriorityLevel,O_=Ri.unstable_ImmediatePriority,tN=Ri.unstable_UserBlockingPriority,Gv=Ri.unstable_NormalPriority,T4=Ri.unstable_LowPriority,nN=Ri.unstable_IdlePriority,ux=null,hr=null;function A4(n){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(ux,n,void 0,(n.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:P4,b4=Math.log,R4=Math.LN2;function P4(n){return n>>>=0,n===0?32:31-(b4(n)/R4|0)|0}var uy=64,dy=4194304;function zh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=zh(a):(r&=o,r!==0&&(i=zh(r)))}else o=t&~s,o!==0?i=zh(o):r!==0&&(i=zh(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-As(e),s=1<<t,i|=n[t],e&=~s;return i}function M4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N4(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-As(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=M4(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function NC(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function iN(){var n=uy;return uy<<=1,!(uy&4194240)&&(uy=64),n}function Cw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Fg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-As(e),n[e]=t}function I4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-As(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function U_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-As(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var We=0;function sN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var rN,$_,oN,aN,lN,IC=!1,fy=[],Ka=null,Ya=null,Ja=null,Np=new Map,Ip=new Map,Jo=[],k4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mb(n,e){switch(n){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Np.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ip.delete(e.pointerId)}}function Ph(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Ug(e),e!==null&&$_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function D4(n,e,t,i,s){switch(e){case"focusin":return Ka=Ph(Ka,n,e,t,i,s),!0;case"dragenter":return Ya=Ph(Ya,n,e,t,i,s),!0;case"mouseover":return Ja=Ph(Ja,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Np.set(r,Ph(Np.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ip.set(r,Ph(Ip.get(r)||null,n,e,t,i,s)),!0}return!1}function cN(n){var e=kl(n.target);if(e!==null){var t=Su(e);if(t!==null){if(e=t.tag,e===13){if(e=XM(t),e!==null){n.blockedOn=e,lN(n.priority,function(){oN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=kC(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);bC=i,t.target.dispatchEvent(i),bC=null}else return e=Ug(t),e!==null&&$_(e),n.blockedOn=t,!1;e.shift()}return!0}function gb(n,e,t){jy(n)&&t.delete(e)}function L4(){IC=!1,Ka!==null&&jy(Ka)&&(Ka=null),Ya!==null&&jy(Ya)&&(Ya=null),Ja!==null&&jy(Ja)&&(Ja=null),Np.forEach(gb),Ip.forEach(gb)}function Mh(n,e){n.blockedOn===e&&(n.blockedOn=null,IC||(IC=!0,Ri.unstable_scheduleCallback(Ri.unstable_NormalPriority,L4)))}function kp(n){function e(s){return Mh(s,n)}if(0<fy.length){Mh(fy[0],n);for(var t=1;t<fy.length;t++){var i=fy[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ka!==null&&Mh(Ka,n),Ya!==null&&Mh(Ya,n),Ja!==null&&Mh(Ja,n),Np.forEach(e),Ip.forEach(e),t=0;t<Jo.length;t++)i=Jo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Jo.length&&(t=Jo[0],t.blockedOn===null);)cN(t),t.blockedOn===null&&Jo.shift()}var hd=ko.ReactCurrentBatchConfig,Wv=!0;function F4(n,e,t,i){var s=We,r=hd.transition;hd.transition=null;try{We=1,V_(n,e,t,i)}finally{We=s,hd.transition=r}}function O4(n,e,t,i){var s=We,r=hd.transition;hd.transition=null;try{We=4,V_(n,e,t,i)}finally{We=s,hd.transition=r}}function V_(n,e,t,i){if(Wv){var s=kC(n,e,t,i);if(s===null)Nw(n,e,i,Kv,t),mb(n,i);else if(D4(s,n,e,t,i))i.stopPropagation();else if(mb(n,i),e&4&&-1<k4.indexOf(n)){for(;s!==null;){var r=Ug(s);if(r!==null&&rN(r),r=kC(n,e,t,i),r===null&&Nw(n,e,i,Kv,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Nw(n,e,i,null,t)}}var Kv=null;function kC(n,e,t,i){if(Kv=null,n=F_(i),n=kl(n),n!==null)if(e=Su(n),e===null)n=null;else if(t=e.tag,t===13){if(n=XM(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Kv=n,null}function uN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_4()){case O_:return 1;case tN:return 4;case Gv:case T4:return 16;case nN:return 536870912;default:return 16}default:return 16}}var qa=null,B_=null,Gy=null;function dN(){if(Gy)return Gy;var n,e=B_,t=e.length,i,s="value"in qa?qa.value:qa.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return Gy=s.slice(n,1<i?1-i:void 0)}function qy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function hy(){return!0}function yb(){return!1}function Mi(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?hy:yb,this.isPropagationStopped=yb,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hy)},persist:function(){},isPersistent:hy}),e}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H_=Mi(rh),Og=wt({},rh,{view:0,detail:0}),U4=Mi(Og),Sw,Ew,Nh,dx=wt({},Og,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nh&&(Nh&&n.type==="mousemove"?(Sw=n.screenX-Nh.screenX,Ew=n.screenY-Nh.screenY):Ew=Sw=0,Nh=n),Sw)},movementY:function(n){return"movementY"in n?n.movementY:Ew}}),vb=Mi(dx),$4=wt({},dx,{dataTransfer:0}),V4=Mi($4),B4=wt({},Og,{relatedTarget:0}),_w=Mi(B4),H4=wt({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),z4=Mi(H4),j4=wt({},rh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),G4=Mi(j4),q4=wt({},rh,{data:0}),xb=Mi(q4),W4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Y4[n])?!!e[n]:!1}function z_(){return J4}var X4=wt({},Og,{key:function(n){if(n.key){var e=W4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?K4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z_,charCode:function(n){return n.type==="keypress"?qy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Q4=Mi(X4),Z4=wt({},dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=Mi(Z4),eV=wt({},Og,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z_}),tV=Mi(eV),nV=wt({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),iV=Mi(nV),sV=wt({},dx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rV=Mi(sV),oV=[9,13,27,32],j_=_o&&"CompositionEvent"in window,xp=null;_o&&"documentMode"in document&&(xp=document.documentMode);var aV=_o&&"TextEvent"in window&&!xp,fN=_o&&(!j_||xp&&8<xp&&11>=xp),Cb=" ",Sb=!1;function hN(n,e){switch(n){case"keyup":return oV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pN(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ju=!1;function lV(n,e){switch(n){case"compositionend":return pN(e);case"keypress":return e.which!==32?null:(Sb=!0,Cb);case"textInput":return n=e.data,n===Cb&&Sb?null:n;default:return null}}function cV(n,e){if(Ju)return n==="compositionend"||!j_&&hN(n,e)?(n=dN(),Gy=B_=qa=null,Ju=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fN&&e.locale!=="ko"?null:e.data;default:return null}}var uV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!uV[n.type]:e==="textarea"}function mN(n,e,t,i){qM(i),e=Yv(e,"onChange"),0<e.length&&(t=new H_("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var wp=null,Dp=null;function dV(n){AN(n,0)}function fx(n){var e=Zu(n);if($M(e))return n}function fV(n,e){if(n==="change")return e}var gN=!1;if(_o){var Tw;if(_o){var Aw="oninput"in document;if(!Aw){var _b=document.createElement("div");_b.setAttribute("oninput","return;"),Aw=typeof _b.oninput=="function"}Tw=Aw}else Tw=!1;gN=Tw&&(!document.documentMode||9<document.documentMode)}function Tb(){wp&&(wp.detachEvent("onpropertychange",yN),Dp=wp=null)}function yN(n){if(n.propertyName==="value"&&fx(Dp)){var e=[];mN(e,Dp,n,F_(n)),JM(dV,e)}}function hV(n,e,t){n==="focusin"?(Tb(),wp=e,Dp=t,wp.attachEvent("onpropertychange",yN)):n==="focusout"&&Tb()}function pV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fx(Dp)}function mV(n,e){if(n==="click")return fx(e)}function gV(n,e){if(n==="input"||n==="change")return fx(e)}function yV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Rs=typeof Object.is=="function"?Object.is:yV;function Lp(n,e){if(Rs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!mC.call(e,s)||!Rs(n[s],e[s]))return!1}return!0}function Ab(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bb(n,e){var t=Ab(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ab(t)}}function vN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?vN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function xN(){for(var n=window,e=Hv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Hv(n.document)}return e}function G_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vV(n){var e=xN(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&vN(t.ownerDocument.documentElement,t)){if(i!==null&&G_(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=bb(t,r);var o=bb(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xV=_o&&"documentMode"in document&&11>=document.documentMode,Xu=null,DC=null,Cp=null,LC=!1;function Rb(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;LC||Xu==null||Xu!==Hv(i)||(i=Xu,"selectionStart"in i&&G_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cp&&Lp(Cp,i)||(Cp=i,i=Yv(DC,"onSelect"),0<i.length&&(e=new H_("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Xu)))}function py(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Qu={animationend:py("Animation","AnimationEnd"),animationiteration:py("Animation","AnimationIteration"),animationstart:py("Animation","AnimationStart"),transitionend:py("Transition","TransitionEnd")},bw={},wN={};_o&&(wN=document.createElement("div").style,"AnimationEvent"in window||(delete Qu.animationend.animation,delete Qu.animationiteration.animation,delete Qu.animationstart.animation),"TransitionEvent"in window||delete Qu.transitionend.transition);function hx(n){if(bw[n])return bw[n];if(!Qu[n])return n;var e=Qu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in wN)return bw[n]=e[t];return n}var CN=hx("animationend"),SN=hx("animationiteration"),EN=hx("animationstart"),_N=hx("transitionend"),TN=new Map,Pb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gl(n,e){TN.set(n,e),Cu(e,[n])}for(var Rw=0;Rw<Pb.length;Rw++){var Pw=Pb[Rw],wV=Pw.toLowerCase(),CV=Pw[0].toUpperCase()+Pw.slice(1);gl(wV,"on"+CV)}gl(CN,"onAnimationEnd");gl(SN,"onAnimationIteration");gl(EN,"onAnimationStart");gl("dblclick","onDoubleClick");gl("focusin","onFocus");gl("focusout","onBlur");gl(_N,"onTransitionEnd");jf("onMouseEnter",["mouseout","mouseover"]);jf("onMouseLeave",["mouseout","mouseover"]);jf("onPointerEnter",["pointerout","pointerover"]);jf("onPointerLeave",["pointerout","pointerover"]);Cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SV=new Set("cancel close invalid load scroll toggle".split(" ").concat(jh));function Mb(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,w4(i,e,void 0,n),n.currentTarget=null}function AN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Mb(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Mb(s,a,c),r=l}}}if(jv)throw n=MC,jv=!1,MC=null,n}function st(n,e){var t=e[VC];t===void 0&&(t=e[VC]=new Set);var i=n+"__bubble";t.has(i)||(bN(e,n,2,!1),t.add(i))}function Mw(n,e,t){var i=0;e&&(i|=4),bN(t,n,i,e)}var my="_reactListening"+Math.random().toString(36).slice(2);function Fp(n){if(!n[my]){n[my]=!0,DM.forEach(function(t){t!=="selectionchange"&&(SV.has(t)||Mw(t,!1,n),Mw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[my]||(e[my]=!0,Mw("selectionchange",!1,e))}}function bN(n,e,t,i){switch(uN(e)){case 1:var s=F4;break;case 4:s=O4;break;default:s=V_}t=s.bind(null,e,t,n),s=void 0,!PC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Nw(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=kl(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}JM(function(){var c=r,u=F_(t),p=[];e:{var m=TN.get(n);if(m!==void 0){var g=H_,w=n;switch(n){case"keypress":if(qy(t)===0)break e;case"keydown":case"keyup":g=Q4;break;case"focusin":w="focus",g=_w;break;case"focusout":w="blur",g=_w;break;case"beforeblur":case"afterblur":g=_w;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=V4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=tV;break;case CN:case SN:case EN:g=z4;break;case _N:g=iV;break;case"scroll":g=U4;break;case"wheel":g=rV;break;case"copy":case"cut":case"paste":g=G4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wb}var v=(e&4)!==0,S=!v&&n==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var C=c,_;C!==null;){_=C;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,x!==null&&(A=Mp(C,x),A!=null&&v.push(Op(C,A,_)))),S)break;C=C.return}0<v.length&&(m=new g(m,w,null,t,u),p.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==bC&&(w=t.relatedTarget||t.fromElement)&&(kl(w)||w[To]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=t.relatedTarget||t.toElement,g=c,w=w?kl(w):null,w!==null&&(S=Su(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(v=vb,A="onMouseLeave",x="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(v=wb,A="onPointerLeave",x="onPointerEnter",C="pointer"),S=g==null?m:Zu(g),_=w==null?m:Zu(w),m=new v(A,C+"leave",g,t,u),m.target=S,m.relatedTarget=_,A=null,kl(u)===c&&(v=new v(x,C+"enter",w,t,u),v.target=_,v.relatedTarget=S,A=v),S=A,g&&w)t:{for(v=g,x=w,C=0,_=v;_;_=Du(_))C++;for(_=0,A=x;A;A=Du(A))_++;for(;0<C-_;)v=Du(v),C--;for(;0<_-C;)x=Du(x),_--;for(;C--;){if(v===x||x!==null&&v===x.alternate)break t;v=Du(v),x=Du(x)}v=null}else v=null;g!==null&&Nb(p,m,g,v,!1),w!==null&&S!==null&&Nb(p,S,w,v,!0)}}e:{if(m=c?Zu(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var P=fV;else if(Eb(m))if(gN)P=gV;else{P=pV;var M=hV}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=mV);if(P&&(P=P(n,c))){mN(p,P,t,u);break e}M&&M(n,m,c),n==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&SC(m,"number",m.value)}switch(M=c?Zu(c):window,n){case"focusin":(Eb(M)||M.contentEditable==="true")&&(Xu=M,DC=c,Cp=null);break;case"focusout":Cp=DC=Xu=null;break;case"mousedown":LC=!0;break;case"contextmenu":case"mouseup":case"dragend":LC=!1,Rb(p,t,u);break;case"selectionchange":if(xV)break;case"keydown":case"keyup":Rb(p,t,u)}var N;if(j_)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ju?hN(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(fN&&t.locale!=="ko"&&(Ju||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ju&&(N=dN()):(qa=u,B_="value"in qa?qa.value:qa.textContent,Ju=!0)),M=Yv(c,I),0<M.length&&(I=new xb(I,n,null,t,u),p.push({event:I,listeners:M}),N?I.data=N:(N=pN(t),N!==null&&(I.data=N)))),(N=aV?lV(n,t):cV(n,t))&&(c=Yv(c,"onBeforeInput"),0<c.length&&(u=new xb("onBeforeInput","beforeinput",null,t,u),p.push({event:u,listeners:c}),u.data=N))}AN(p,e)})}function Op(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Yv(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Mp(n,t),r!=null&&i.unshift(Op(n,r,s)),r=Mp(n,e),r!=null&&i.push(Op(n,r,s))),n=n.return}return i}function Du(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nb(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Mp(t,r),l!=null&&o.unshift(Op(t,l,a))):s||(l=Mp(t,r),l!=null&&o.push(Op(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var EV=/\r\n?/g,_V=/\u0000|\uFFFD/g;function Ib(n){return(typeof n=="string"?n:""+n).replace(EV,`
`).replace(_V,"")}function gy(n,e,t){if(e=Ib(e),Ib(n)!==e&&t)throw Error(q(425))}function Jv(){}var FC=null,OC=null;function UC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $C=typeof setTimeout=="function"?setTimeout:void 0,TV=typeof clearTimeout=="function"?clearTimeout:void 0,kb=typeof Promise=="function"?Promise:void 0,AV=typeof queueMicrotask=="function"?queueMicrotask:typeof kb<"u"?function(n){return kb.resolve(null).then(n).catch(bV)}:$C;function bV(n){setTimeout(function(){throw n})}function Iw(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),kp(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);kp(e)}function Xa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Db(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var oh=Math.random().toString(36).slice(2),ar="__reactFiber$"+oh,Up="__reactProps$"+oh,To="__reactContainer$"+oh,VC="__reactEvents$"+oh,RV="__reactListeners$"+oh,PV="__reactHandles$"+oh;function kl(n){var e=n[ar];if(e)return e;for(var t=n.parentNode;t;){if(e=t[To]||t[ar]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Db(n);n!==null;){if(t=n[ar])return t;n=Db(n)}return e}n=t,t=n.parentNode}return null}function Ug(n){return n=n[ar]||n[To],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(q(33))}function px(n){return n[Up]||null}var BC=[],ed=-1;function yl(n){return{current:n}}function ot(n){0>ed||(n.current=BC[ed],BC[ed]=null,ed--)}function tt(n,e){ed++,BC[ed]=n.current,n.current=e}var ol={},Sn=yl(ol),ei=yl(!1),tu=ol;function Gf(n,e){var t=n.type.contextTypes;if(!t)return ol;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ti(n){return n=n.childContextTypes,n!=null}function Xv(){ot(ei),ot(Sn)}function Lb(n,e,t){if(Sn.current!==ol)throw Error(q(168));tt(Sn,e),tt(ei,t)}function RN(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(q(108,h4(n)||"Unknown",s));return wt({},t,i)}function Qv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ol,tu=Sn.current,tt(Sn,n),tt(ei,ei.current),!0}function Fb(n,e,t){var i=n.stateNode;if(!i)throw Error(q(169));t?(n=RN(n,e,tu),i.__reactInternalMemoizedMergedChildContext=n,ot(ei),ot(Sn),tt(Sn,n)):ot(ei),tt(ei,t)}var Dr=null,mx=!1,kw=!1;function PN(n){Dr===null?Dr=[n]:Dr.push(n)}function MV(n){mx=!0,PN(n)}function vl(){if(!kw&&Dr!==null){kw=!0;var n=0,e=We;try{var t=Dr;for(We=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Dr=null,mx=!1}catch(s){throw Dr!==null&&(Dr=Dr.slice(n+1)),eN(O_,vl),s}finally{We=e,kw=!1}}return null}var td=[],nd=0,Zv=null,e0=0,Hi=[],zi=0,nu=null,yo=1,vo="";function Al(n,e){td[nd++]=e0,td[nd++]=Zv,Zv=n,e0=e}function MN(n,e,t){Hi[zi++]=yo,Hi[zi++]=vo,Hi[zi++]=nu,nu=n;var i=yo;n=vo;var s=32-As(i)-1;i&=~(1<<s),t+=1;var r=32-As(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,yo=1<<32-As(e)+s|t<<s|i,vo=r+n}else yo=1<<r|t<<s|i,vo=n}function q_(n){n.return!==null&&(Al(n,1),MN(n,1,0))}function W_(n){for(;n===Zv;)Zv=td[--nd],td[nd]=null,e0=td[--nd],td[nd]=null;for(;n===nu;)nu=Hi[--zi],Hi[zi]=null,vo=Hi[--zi],Hi[zi]=null,yo=Hi[--zi],Hi[zi]=null}var Ti=null,_i=null,ft=!1,Es=null;function NN(n,e){var t=Gi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Ob(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ti=n,_i=Xa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ti=n,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=nu!==null?{id:yo,overflow:vo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ti=n,_i=null,!0):!1;default:return!1}}function HC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function zC(n){if(ft){var e=_i;if(e){var t=e;if(!Ob(n,e)){if(HC(n))throw Error(q(418));e=Xa(t.nextSibling);var i=Ti;e&&Ob(n,e)?NN(i,t):(n.flags=n.flags&-4097|2,ft=!1,Ti=n)}}else{if(HC(n))throw Error(q(418));n.flags=n.flags&-4097|2,ft=!1,Ti=n}}}function Ub(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ti=n}function yy(n){if(n!==Ti)return!1;if(!ft)return Ub(n),ft=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!UC(n.type,n.memoizedProps)),e&&(e=_i)){if(HC(n))throw IN(),Error(q(418));for(;e;)NN(n,e),e=Xa(e.nextSibling)}if(Ub(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){_i=Xa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}_i=null}}else _i=Ti?Xa(n.stateNode.nextSibling):null;return!0}function IN(){for(var n=_i;n;)n=Xa(n.nextSibling)}function qf(){_i=Ti=null,ft=!1}function K_(n){Es===null?Es=[n]:Es.push(n)}var NV=ko.ReactCurrentBatchConfig;function Ih(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var i=t.stateNode}if(!i)throw Error(q(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,n))}return n}function vy(n,e){throw n=Object.prototype.toString.call(e),Error(q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $b(n){var e=n._init;return e(n._payload)}function kN(n){function e(x,C){if(n){var _=x.deletions;_===null?(x.deletions=[C],x.flags|=16):_.push(C)}}function t(x,C){if(!n)return null;for(;C!==null;)e(x,C),C=C.sibling;return null}function i(x,C){for(x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function s(x,C){return x=tl(x,C),x.index=0,x.sibling=null,x}function r(x,C,_){return x.index=_,n?(_=x.alternate,_!==null?(_=_.index,_<C?(x.flags|=2,C):_):(x.flags|=2,C)):(x.flags|=1048576,C)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,C,_,A){return C===null||C.tag!==6?(C=Vw(_,x.mode,A),C.return=x,C):(C=s(C,_),C.return=x,C)}function l(x,C,_,A){var P=_.type;return P===Yu?u(x,C,_.props.children,A,_.key):C!==null&&(C.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===qo&&$b(P)===C.type)?(A=s(C,_.props),A.ref=Ih(x,C,_),A.return=x,A):(A=Zy(_.type,_.key,_.props,null,x.mode,A),A.ref=Ih(x,C,_),A.return=x,A)}function c(x,C,_,A){return C===null||C.tag!==4||C.stateNode.containerInfo!==_.containerInfo||C.stateNode.implementation!==_.implementation?(C=Bw(_,x.mode,A),C.return=x,C):(C=s(C,_.children||[]),C.return=x,C)}function u(x,C,_,A,P){return C===null||C.tag!==7?(C=eu(_,x.mode,A,P),C.return=x,C):(C=s(C,_),C.return=x,C)}function p(x,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Vw(""+C,x.mode,_),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ay:return _=Zy(C.type,C.key,C.props,null,x.mode,_),_.ref=Ih(x,null,C),_.return=x,_;case Ku:return C=Bw(C,x.mode,_),C.return=x,C;case qo:var A=C._init;return p(x,A(C._payload),_)}if(Hh(C)||bh(C))return C=eu(C,x.mode,_,null),C.return=x,C;vy(x,C)}return null}function m(x,C,_,A){var P=C!==null?C.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return P!==null?null:a(x,C,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ay:return _.key===P?l(x,C,_,A):null;case Ku:return _.key===P?c(x,C,_,A):null;case qo:return P=_._init,m(x,C,P(_._payload),A)}if(Hh(_)||bh(_))return P!==null?null:u(x,C,_,A,null);vy(x,_)}return null}function g(x,C,_,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(_)||null,a(C,x,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ay:return x=x.get(A.key===null?_:A.key)||null,l(C,x,A,P);case Ku:return x=x.get(A.key===null?_:A.key)||null,c(C,x,A,P);case qo:var M=A._init;return g(x,C,_,M(A._payload),P)}if(Hh(A)||bh(A))return x=x.get(_)||null,u(C,x,A,P,null);vy(C,A)}return null}function w(x,C,_,A){for(var P=null,M=null,N=C,I=C=0,k=null;N!==null&&I<_.length;I++){N.index>I?(k=N,N=null):k=N.sibling;var D=m(x,N,_[I],A);if(D===null){N===null&&(N=k);break}n&&N&&D.alternate===null&&e(x,N),C=r(D,C,I),M===null?P=D:M.sibling=D,M=D,N=k}if(I===_.length)return t(x,N),ft&&Al(x,I),P;if(N===null){for(;I<_.length;I++)N=p(x,_[I],A),N!==null&&(C=r(N,C,I),M===null?P=N:M.sibling=N,M=N);return ft&&Al(x,I),P}for(N=i(x,N);I<_.length;I++)k=g(N,x,I,_[I],A),k!==null&&(n&&k.alternate!==null&&N.delete(k.key===null?I:k.key),C=r(k,C,I),M===null?P=k:M.sibling=k,M=k);return n&&N.forEach(function(L){return e(x,L)}),ft&&Al(x,I),P}function v(x,C,_,A){var P=bh(_);if(typeof P!="function")throw Error(q(150));if(_=P.call(_),_==null)throw Error(q(151));for(var M=P=null,N=C,I=C=0,k=null,D=_.next();N!==null&&!D.done;I++,D=_.next()){N.index>I?(k=N,N=null):k=N.sibling;var L=m(x,N,D.value,A);if(L===null){N===null&&(N=k);break}n&&N&&L.alternate===null&&e(x,N),C=r(L,C,I),M===null?P=L:M.sibling=L,M=L,N=k}if(D.done)return t(x,N),ft&&Al(x,I),P;if(N===null){for(;!D.done;I++,D=_.next())D=p(x,D.value,A),D!==null&&(C=r(D,C,I),M===null?P=D:M.sibling=D,M=D);return ft&&Al(x,I),P}for(N=i(x,N);!D.done;I++,D=_.next())D=g(N,x,I,D.value,A),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?I:D.key),C=r(D,C,I),M===null?P=D:M.sibling=D,M=D);return n&&N.forEach(function($){return e(x,$)}),ft&&Al(x,I),P}function S(x,C,_,A){if(typeof _=="object"&&_!==null&&_.type===Yu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ay:e:{for(var P=_.key,M=C;M!==null;){if(M.key===P){if(P=_.type,P===Yu){if(M.tag===7){t(x,M.sibling),C=s(M,_.props.children),C.return=x,x=C;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===qo&&$b(P)===M.type){t(x,M.sibling),C=s(M,_.props),C.ref=Ih(x,M,_),C.return=x,x=C;break e}t(x,M);break}else e(x,M);M=M.sibling}_.type===Yu?(C=eu(_.props.children,x.mode,A,_.key),C.return=x,x=C):(A=Zy(_.type,_.key,_.props,null,x.mode,A),A.ref=Ih(x,C,_),A.return=x,x=A)}return o(x);case Ku:e:{for(M=_.key;C!==null;){if(C.key===M)if(C.tag===4&&C.stateNode.containerInfo===_.containerInfo&&C.stateNode.implementation===_.implementation){t(x,C.sibling),C=s(C,_.children||[]),C.return=x,x=C;break e}else{t(x,C);break}else e(x,C);C=C.sibling}C=Bw(_,x.mode,A),C.return=x,x=C}return o(x);case qo:return M=_._init,S(x,C,M(_._payload),A)}if(Hh(_))return w(x,C,_,A);if(bh(_))return v(x,C,_,A);vy(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,C!==null&&C.tag===6?(t(x,C.sibling),C=s(C,_),C.return=x,x=C):(t(x,C),C=Vw(_,x.mode,A),C.return=x,x=C),o(x)):t(x,C)}return S}var Wf=kN(!0),DN=kN(!1),t0=yl(null),n0=null,id=null,Y_=null;function J_(){Y_=id=n0=null}function X_(n){var e=t0.current;ot(t0),n._currentValue=e}function jC(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function pd(n,e){n0=n,Y_=id=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Zn=!0),n.firstContext=null)}function Ji(n){var e=n._currentValue;if(Y_!==n)if(n={context:n,memoizedValue:e,next:null},id===null){if(n0===null)throw Error(q(308));id=n,n0.dependencies={lanes:0,firstContext:n}}else id=id.next=n;return e}var Dl=null;function Q_(n){Dl===null?Dl=[n]:Dl.push(n)}function LN(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,Q_(e)):(t.next=s.next,s.next=t),e.interleaved=t,Ao(n,i)}function Ao(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Wo=!1;function Z_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ao(n,t)}return s=i.interleaved,s===null?(e.next=e,Q_(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ao(n,t)}function Wy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,U_(n,t)}}function Vb(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function i0(n,e,t,i){var s=n.updateQueue;Wo=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var p=s.baseState;o=0,u=c=l=null,a=r;do{var m=a.lane,g=a.eventTime;if((i&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,v=a;switch(m=e,g=t,v.tag){case 1:if(w=v.payload,typeof w=="function"){p=w.call(g,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(g,p,m):w,m==null)break e;p=wt({},p,m);break e;case 2:Wo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=p):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);su|=o,n.lanes=o,n.memoizedState=p}}function Bb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(q(191,s));s.call(i)}}}var $g={},pr=yl($g),$p=yl($g),Vp=yl($g);function Ll(n){if(n===$g)throw Error(q(174));return n}function eT(n,e){switch(tt(Vp,e),tt($p,n),tt(pr,$g),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_C(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=_C(e,n)}ot(pr),tt(pr,e)}function Kf(){ot(pr),ot($p),ot(Vp)}function ON(n){Ll(Vp.current);var e=Ll(pr.current),t=_C(e,n.type);e!==t&&(tt($p,n),tt(pr,t))}function tT(n){$p.current===n&&(ot(pr),ot($p))}var vt=yl(0);function s0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dw=[];function nT(){for(var n=0;n<Dw.length;n++)Dw[n]._workInProgressVersionPrimary=null;Dw.length=0}var Ky=ko.ReactCurrentDispatcher,Lw=ko.ReactCurrentBatchConfig,iu=0,xt=null,$t=null,Xt=null,r0=!1,Sp=!1,Bp=0,IV=0;function fn(){throw Error(q(321))}function iT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Rs(n[t],e[t]))return!1;return!0}function sT(n,e,t,i,s,r){if(iu=r,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ky.current=n===null||n.memoizedState===null?FV:OV,n=t(i,s),Sp){r=0;do{if(Sp=!1,Bp=0,25<=r)throw Error(q(301));r+=1,Xt=$t=null,e.updateQueue=null,Ky.current=UV,n=t(i,s)}while(Sp)}if(Ky.current=o0,e=$t!==null&&$t.next!==null,iu=0,Xt=$t=xt=null,r0=!1,e)throw Error(q(300));return n}function rT(){var n=Bp!==0;return Bp=0,n}function Vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?xt.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function Xi(){if($t===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var e=Xt===null?xt.memoizedState:Xt.next;if(e!==null)Xt=e,$t=n;else{if(n===null)throw Error(q(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Xt===null?xt.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function Hp(n,e){return typeof e=="function"?e(n):e}function Fw(n){var e=Xi(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var i=$t,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((iu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=i):l=l.next=p,xt.lanes|=u,su|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Rs(i,e.memoizedState)||(Zn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,xt.lanes|=r,su|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ow(n){var e=Xi(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Rs(r,e.memoizedState)||(Zn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function UN(){}function $N(n,e){var t=xt,i=Xi(),s=e(),r=!Rs(i.memoizedState,s);if(r&&(i.memoizedState=s,Zn=!0),i=i.queue,oT(HN.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||Xt!==null&&Xt.memoizedState.tag&1){if(t.flags|=2048,zp(9,BN.bind(null,t,i,s,e),void 0,null),Qt===null)throw Error(q(349));iu&30||VN(t,e,s)}return s}function VN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function BN(n,e,t,i){e.value=t,e.getSnapshot=i,zN(e)&&jN(n)}function HN(n,e,t){return t(function(){zN(e)&&jN(n)})}function zN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Rs(n,t)}catch{return!0}}function jN(n){var e=Ao(n,1);e!==null&&bs(e,n,1,-1)}function Hb(n){var e=Vs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hp,lastRenderedState:n},e.queue=n,n=n.dispatch=LV.bind(null,xt,n),[e.memoizedState,n]}function zp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function GN(){return Xi().memoizedState}function Yy(n,e,t,i){var s=Vs();xt.flags|=n,s.memoizedState=zp(1|e,t,void 0,i===void 0?null:i)}function gx(n,e,t,i){var s=Xi();i=i===void 0?null:i;var r=void 0;if($t!==null){var o=$t.memoizedState;if(r=o.destroy,i!==null&&iT(i,o.deps)){s.memoizedState=zp(e,t,r,i);return}}xt.flags|=n,s.memoizedState=zp(1|e,t,r,i)}function zb(n,e){return Yy(8390656,8,n,e)}function oT(n,e){return gx(2048,8,n,e)}function qN(n,e){return gx(4,2,n,e)}function WN(n,e){return gx(4,4,n,e)}function KN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function YN(n,e,t){return t=t!=null?t.concat([n]):null,gx(4,4,KN.bind(null,e,n),t)}function aT(){}function JN(n,e){var t=Xi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&iT(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function XN(n,e){var t=Xi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&iT(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function QN(n,e,t){return iu&21?(Rs(t,e)||(t=iN(),xt.lanes|=t,su|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Zn=!0),n.memoizedState=t)}function kV(n,e){var t=We;We=t!==0&&4>t?t:4,n(!0);var i=Lw.transition;Lw.transition={};try{n(!1),e()}finally{We=t,Lw.transition=i}}function ZN(){return Xi().memoizedState}function DV(n,e,t){var i=el(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},eI(n))tI(e,t);else if(t=LN(n,e,t,i),t!==null){var s=Fn();bs(t,n,i,s),nI(t,e,i)}}function LV(n,e,t){var i=el(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(eI(n))tI(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Rs(a,o)){var l=e.interleaved;l===null?(s.next=s,Q_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=LN(n,e,s,i),t!==null&&(s=Fn(),bs(t,n,i,s),nI(t,e,i))}}function eI(n){var e=n.alternate;return n===xt||e!==null&&e===xt}function tI(n,e){Sp=r0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function nI(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,U_(n,t)}}var o0={readContext:Ji,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},FV={readContext:Ji,useCallback:function(n,e){return Vs().memoizedState=[n,e===void 0?null:e],n},useContext:Ji,useEffect:zb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Yy(4194308,4,KN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Yy(4194308,4,n,e)},useInsertionEffect:function(n,e){return Yy(4,2,n,e)},useMemo:function(n,e){var t=Vs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Vs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=DV.bind(null,xt,n),[i.memoizedState,n]},useRef:function(n){var e=Vs();return n={current:n},e.memoizedState=n},useState:Hb,useDebugValue:aT,useDeferredValue:function(n){return Vs().memoizedState=n},useTransition:function(){var n=Hb(!1),e=n[0];return n=kV.bind(null,n[1]),Vs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=xt,s=Vs();if(ft){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),Qt===null)throw Error(q(349));iu&30||VN(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,zb(HN.bind(null,i,r,n),[n]),i.flags|=2048,zp(9,BN.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=Vs(),e=Qt.identifierPrefix;if(ft){var t=vo,i=yo;t=(i&~(1<<32-As(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Bp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=IV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},OV={readContext:Ji,useCallback:JN,useContext:Ji,useEffect:oT,useImperativeHandle:YN,useInsertionEffect:qN,useLayoutEffect:WN,useMemo:XN,useReducer:Fw,useRef:GN,useState:function(){return Fw(Hp)},useDebugValue:aT,useDeferredValue:function(n){var e=Xi();return QN(e,$t.memoizedState,n)},useTransition:function(){var n=Fw(Hp)[0],e=Xi().memoizedState;return[n,e]},useMutableSource:UN,useSyncExternalStore:$N,useId:ZN,unstable_isNewReconciler:!1},UV={readContext:Ji,useCallback:JN,useContext:Ji,useEffect:oT,useImperativeHandle:YN,useInsertionEffect:qN,useLayoutEffect:WN,useMemo:XN,useReducer:Ow,useRef:GN,useState:function(){return Ow(Hp)},useDebugValue:aT,useDeferredValue:function(n){var e=Xi();return $t===null?e.memoizedState=n:QN(e,$t.memoizedState,n)},useTransition:function(){var n=Ow(Hp)[0],e=Xi().memoizedState;return[n,e]},useMutableSource:UN,useSyncExternalStore:$N,useId:ZN,unstable_isNewReconciler:!1};function as(n,e){if(n&&n.defaultProps){e=wt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function GC(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:wt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var yx={isMounted:function(n){return(n=n._reactInternals)?Su(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Fn(),s=el(n),r=xo(i,s);r.payload=e,t!=null&&(r.callback=t),e=Qa(n,r,s),e!==null&&(bs(e,n,s,i),Wy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Fn(),s=el(n),r=xo(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Qa(n,r,s),e!==null&&(bs(e,n,s,i),Wy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Fn(),i=el(n),s=xo(t,i);s.tag=2,e!=null&&(s.callback=e),e=Qa(n,s,i),e!==null&&(bs(e,n,i,t),Wy(e,n,i))}};function jb(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Lp(t,i)||!Lp(s,r):!0}function iI(n,e,t){var i=!1,s=ol,r=e.contextType;return typeof r=="object"&&r!==null?r=Ji(r):(s=ti(e)?tu:Sn.current,i=e.contextTypes,r=(i=i!=null)?Gf(n,s):ol),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function Gb(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&yx.enqueueReplaceState(e,e.state,null)}function qC(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Z_(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Ji(r):(r=ti(e)?tu:Sn.current,s.context=Gf(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(GC(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yx.enqueueReplaceState(s,s.state,null),i0(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Yf(n,e){try{var t="",i=e;do t+=f4(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function Uw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function WC(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var $V=typeof WeakMap=="function"?WeakMap:Map;function sI(n,e,t){t=xo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){l0||(l0=!0,iS=i),WC(n,e)},t}function rI(n,e,t){t=xo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){WC(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){WC(n,e),typeof i!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new $V;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=ZV.bind(null,n,e,t),e.then(n,n))}function Wb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Kb(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=xo(-1,1),e.tag=2,Qa(t,e,1))),t.lanes|=1),n)}var VV=ko.ReactCurrentOwner,Zn=!1;function In(n,e,t,i){e.child=n===null?DN(e,null,t,i):Wf(e,n.child,t,i)}function Yb(n,e,t,i,s){t=t.render;var r=e.ref;return pd(e,s),i=sT(n,e,t,i,r,s),t=rT(),n!==null&&!Zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,bo(n,e,s)):(ft&&t&&q_(e),e.flags|=1,In(n,e,i,s),e.child)}function Jb(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!mT(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,oI(n,e,r,i,s)):(n=Zy(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Lp,t(o,i)&&n.ref===e.ref)return bo(n,e,s)}return e.flags|=1,n=tl(r,i),n.ref=e.ref,n.return=e,e.child=n}function oI(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Lp(r,i)&&n.ref===e.ref)if(Zn=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Zn=!0);else return e.lanes=n.lanes,bo(n,e,s)}return KC(n,e,t,i,s)}function aI(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(rd,wi),wi|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,tt(rd,wi),wi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,tt(rd,wi),wi|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,tt(rd,wi),wi|=i;return In(n,e,s,t),e.child}function lI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function KC(n,e,t,i,s){var r=ti(t)?tu:Sn.current;return r=Gf(e,r),pd(e,s),t=sT(n,e,t,i,r,s),i=rT(),n!==null&&!Zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,bo(n,e,s)):(ft&&i&&q_(e),e.flags|=1,In(n,e,t,s),e.child)}function Xb(n,e,t,i,s){if(ti(t)){var r=!0;Qv(e)}else r=!1;if(pd(e,s),e.stateNode===null)Jy(n,e),iI(e,t,i),qC(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ji(c):(c=ti(t)?tu:Sn.current,c=Gf(e,c));var u=t.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Gb(e,o,i,c),Wo=!1;var m=e.memoizedState;o.state=m,i0(e,i,o,s),l=e.memoizedState,a!==i||m!==l||ei.current||Wo?(typeof u=="function"&&(GC(e,t,u,i),l=e.memoizedState),(a=Wo||jb(e,t,a,i,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,FN(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:as(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=ti(t)?tu:Sn.current,l=Gf(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Gb(e,o,i,l),Wo=!1,m=e.memoizedState,o.state=m,i0(e,i,o,s);var w=e.memoizedState;a!==p||m!==w||ei.current||Wo?(typeof g=="function"&&(GC(e,t,g,i),w=e.memoizedState),(c=Wo||jb(e,t,c,i,m,w,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),o.props=i,o.state=w,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return YC(n,e,t,i,r,s)}function YC(n,e,t,i,s,r){lI(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Fb(e,t,!1),bo(n,e,r);i=e.stateNode,VV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Wf(e,n.child,null,r),e.child=Wf(e,null,a,r)):In(n,e,a,r),e.memoizedState=i.state,s&&Fb(e,t,!0),e.child}function cI(n){var e=n.stateNode;e.pendingContext?Lb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Lb(n,e.context,!1),eT(n,e.containerInfo)}function Qb(n,e,t,i,s){return qf(),K_(s),e.flags|=256,In(n,e,t,i),e.child}var JC={dehydrated:null,treeContext:null,retryLane:0};function XC(n){return{baseLanes:n,cachePool:null,transitions:null}}function uI(n,e,t){var i=e.pendingProps,s=vt.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),tt(vt,s&1),n===null)return zC(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=wx(o,i,0,null),n=eu(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=XC(t),e.memoizedState=JC,n):lT(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return BV(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=tl(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=tl(a,r):(r=eu(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?XC(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=JC,i}return r=n.child,n=r.sibling,i=tl(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function lT(n,e){return e=wx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xy(n,e,t,i){return i!==null&&K_(i),Wf(e,n.child,null,t),n=lT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function BV(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=Uw(Error(q(422))),xy(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=wx({mode:"visible",children:i.children},s,0,null),r=eu(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Wf(e,n.child,null,o),e.child.memoizedState=XC(o),e.memoizedState=JC,r);if(!(e.mode&1))return xy(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(q(419)),i=Uw(r,i,void 0),xy(n,e,o,i)}if(a=(o&n.childLanes)!==0,Zn||a){if(i=Qt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Ao(n,s),bs(i,n,s,-1))}return pT(),i=Uw(Error(q(421))),xy(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=eB.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,_i=Xa(s.nextSibling),Ti=e,ft=!0,Es=null,n!==null&&(Hi[zi++]=yo,Hi[zi++]=vo,Hi[zi++]=nu,yo=n.id,vo=n.overflow,nu=e),e=lT(e,i.children),e.flags|=4096,e)}function Zb(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),jC(n.return,e,t)}function $w(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function dI(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(In(n,e,i.children,t),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zb(n,t,e);else if(n.tag===19)Zb(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(tt(vt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&s0(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),$w(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&s0(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}$w(e,!0,t,null,r);break;case"together":$w(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function bo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),su|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(q(153));if(e.child!==null){for(n=e.child,t=tl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=tl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function HV(n,e,t){switch(e.tag){case 3:cI(e),qf();break;case 5:ON(e);break;case 1:ti(e.type)&&Qv(e);break;case 4:eT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;tt(t0,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(tt(vt,vt.current&1),e.flags|=128,null):t&e.child.childLanes?uI(n,e,t):(tt(vt,vt.current&1),n=bo(n,e,t),n!==null?n.sibling:null);tt(vt,vt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return dI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tt(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,aI(n,e,t)}return bo(n,e,t)}var fI,QC,hI,pI;fI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};QC=function(){};hI=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Ll(pr.current);var r=null;switch(t){case"input":s=wC(n,s),i=wC(n,i),r=[];break;case"select":s=wt({},s,{value:void 0}),i=wt({},i,{value:void 0}),r=[];break;case"textarea":s=EC(n,s),i=EC(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Jv)}TC(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rp.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&st("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};pI=function(n,e,t,i){t!==i&&(e.flags|=4)};function kh(n,e){if(!ft)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function hn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function zV(n,e,t){var i=e.pendingProps;switch(W_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return ti(e.type)&&Xv(),hn(e),null;case 3:return i=e.stateNode,Kf(),ot(ei),ot(Sn),nT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(yy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(oS(Es),Es=null))),QC(n,e),hn(e),null;case 5:tT(e);var s=Ll(Vp.current);if(t=e.type,n!==null&&e.stateNode!=null)hI(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(q(166));return hn(e),null}if(n=Ll(pr.current),yy(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[ar]=e,i[Up]=r,n=(e.mode&1)!==0,t){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(s=0;s<jh.length;s++)st(jh[s],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":lb(i,r),st("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},st("invalid",i);break;case"textarea":ub(i,r),st("invalid",i)}TC(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&gy(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&gy(i.textContent,a,n),s=["children",""+a]):Rp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&st("scroll",i)}switch(t){case"input":ly(i),cb(i,r,!0);break;case"textarea":ly(i),db(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Jv)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=HM(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ar]=e,n[Up]=i,fI(n,e,!1,!1),e.stateNode=n;e:{switch(o=AC(t,i),t){case"dialog":st("cancel",n),st("close",n),s=i;break;case"iframe":case"object":case"embed":st("load",n),s=i;break;case"video":case"audio":for(s=0;s<jh.length;s++)st(jh[s],n);s=i;break;case"source":st("error",n),s=i;break;case"img":case"image":case"link":st("error",n),st("load",n),s=i;break;case"details":st("toggle",n),s=i;break;case"input":lb(n,i),s=wC(n,i),st("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=wt({},i,{value:void 0}),st("invalid",n);break;case"textarea":ub(n,i),s=EC(n,i),st("invalid",n);break;default:s=i}TC(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?GM(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zM(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Pp(n,l):typeof l=="number"&&Pp(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Rp.hasOwnProperty(r)?l!=null&&r==="onScroll"&&st("scroll",n):l!=null&&I_(n,r,l,o))}switch(t){case"input":ly(n),cb(n,i,!1);break;case"textarea":ly(n),db(n);break;case"option":i.value!=null&&n.setAttribute("value",""+rl(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ud(n,!!i.multiple,r,!1):i.defaultValue!=null&&ud(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Jv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(n&&e.stateNode!=null)pI(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(q(166));if(t=Ll(Vp.current),Ll(pr.current),yy(e)){if(i=e.stateNode,t=e.memoizedProps,i[ar]=e,(r=i.nodeValue!==t)&&(n=Ti,n!==null))switch(n.tag){case 3:gy(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gy(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ar]=e,e.stateNode=i}return hn(e),null;case 13:if(ot(vt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ft&&_i!==null&&e.mode&1&&!(e.flags&128))IN(),qf(),e.flags|=98560,r=!1;else if(r=yy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(q(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(q(317));r[ar]=e}else qf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),r=!1}else Es!==null&&(oS(Es),Es=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||vt.current&1?Bt===0&&(Bt=3):pT())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return Kf(),QC(n,e),n===null&&Fp(e.stateNode.containerInfo),hn(e),null;case 10:return X_(e.type._context),hn(e),null;case 17:return ti(e.type)&&Xv(),hn(e),null;case 19:if(ot(vt),r=e.memoizedState,r===null)return hn(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)kh(r,!1);else{if(Bt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=s0(n),o!==null){for(e.flags|=128,kh(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return tt(vt,vt.current&1|2),e.child}n=n.sibling}r.tail!==null&&At()>Jf&&(e.flags|=128,i=!0,kh(r,!1),e.lanes=4194304)}else{if(!i)if(n=s0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),kh(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ft)return hn(e),null}else 2*At()-r.renderingStartTime>Jf&&t!==1073741824&&(e.flags|=128,i=!0,kh(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=At(),e.sibling=null,t=vt.current,tt(vt,i?t&1|2:t&1),e):(hn(e),null);case 22:case 23:return hT(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?wi&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function jV(n,e){switch(W_(e),e.tag){case 1:return ti(e.type)&&Xv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Kf(),ot(ei),ot(Sn),nT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return tT(e),null;case 13:if(ot(vt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(q(340));qf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ot(vt),null;case 4:return Kf(),null;case 10:return X_(e.type._context),null;case 22:case 23:return hT(),null;case 24:return null;default:return null}}var wy=!1,wn=!1,GV=typeof WeakSet=="function"?WeakSet:Set,oe=null;function sd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Et(n,e,i)}else t.current=null}function ZC(n,e,t){try{t()}catch(i){Et(n,e,i)}}var e1=!1;function qV(n,e){if(FC=Wv,n=xN(),G_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,p=n,m=null;t:for(;;){for(var g;p!==t||s!==0&&p.nodeType!==3||(a=o+s),p!==r||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++c===s&&(a=o),m===r&&++u===i&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(OC={focusedElem:n,selectionRange:t},Wv=!1,oe=e;oe!==null;)if(e=oe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,oe=n;else for(;oe!==null;){e=oe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,S=w.memoizedState,x=e.stateNode,C=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:as(e.type,v),S);x.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(A){Et(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}return w=e1,e1=!1,w}function Ep(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ZC(e,t,r)}s=s.next}while(s!==i)}}function vx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function eS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mI(n){var e=n.alternate;e!==null&&(n.alternate=null,mI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ar],delete e[Up],delete e[VC],delete e[RV],delete e[PV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gI(n){return n.tag===5||n.tag===3||n.tag===4}function t1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tS(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Jv));else if(i!==4&&(n=n.child,n!==null))for(tS(n,e,t),n=n.sibling;n!==null;)tS(n,e,t),n=n.sibling}function nS(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(nS(n,e,t),n=n.sibling;n!==null;)nS(n,e,t),n=n.sibling}var rn=null,Ss=!1;function Ho(n,e,t){for(t=t.child;t!==null;)yI(n,e,t),t=t.sibling}function yI(n,e,t){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(ux,t)}catch{}switch(t.tag){case 5:wn||sd(t,e);case 6:var i=rn,s=Ss;rn=null,Ho(n,e,t),rn=i,Ss=s,rn!==null&&(Ss?(n=rn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):rn.removeChild(t.stateNode));break;case 18:rn!==null&&(Ss?(n=rn,t=t.stateNode,n.nodeType===8?Iw(n.parentNode,t):n.nodeType===1&&Iw(n,t),kp(n)):Iw(rn,t.stateNode));break;case 4:i=rn,s=Ss,rn=t.stateNode.containerInfo,Ss=!0,Ho(n,e,t),rn=i,Ss=s;break;case 0:case 11:case 14:case 15:if(!wn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ZC(t,e,o),s=s.next}while(s!==i)}Ho(n,e,t);break;case 1:if(!wn&&(sd(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Et(t,e,a)}Ho(n,e,t);break;case 21:Ho(n,e,t);break;case 22:t.mode&1?(wn=(i=wn)||t.memoizedState!==null,Ho(n,e,t),wn=i):Ho(n,e,t);break;default:Ho(n,e,t)}}function n1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new GV),e.forEach(function(i){var s=tB.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function is(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rn=a.stateNode,Ss=!1;break e;case 3:rn=a.stateNode.containerInfo,Ss=!0;break e;case 4:rn=a.stateNode.containerInfo,Ss=!0;break e}a=a.return}if(rn===null)throw Error(q(160));yI(r,o,s),rn=null,Ss=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vI(e,n),e=e.sibling}function vI(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(is(e,n),Fs(n),i&4){try{Ep(3,n,n.return),vx(3,n)}catch(v){Et(n,n.return,v)}try{Ep(5,n,n.return)}catch(v){Et(n,n.return,v)}}break;case 1:is(e,n),Fs(n),i&512&&t!==null&&sd(t,t.return);break;case 5:if(is(e,n),Fs(n),i&512&&t!==null&&sd(t,t.return),n.flags&32){var s=n.stateNode;try{Pp(s,"")}catch(v){Et(n,n.return,v)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&VM(s,r),AC(a,o);var c=AC(a,r);for(o=0;o<l.length;o+=2){var u=l[o],p=l[o+1];u==="style"?GM(s,p):u==="dangerouslySetInnerHTML"?zM(s,p):u==="children"?Pp(s,p):I_(s,u,p,c)}switch(a){case"input":CC(s,r);break;case"textarea":BM(s,r);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?ud(s,!!r.multiple,g,!1):m!==!!r.multiple&&(r.defaultValue!=null?ud(s,!!r.multiple,r.defaultValue,!0):ud(s,!!r.multiple,r.multiple?[]:"",!1))}s[Up]=r}catch(v){Et(n,n.return,v)}}break;case 6:if(is(e,n),Fs(n),i&4){if(n.stateNode===null)throw Error(q(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(v){Et(n,n.return,v)}}break;case 3:if(is(e,n),Fs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{kp(e.containerInfo)}catch(v){Et(n,n.return,v)}break;case 4:is(e,n),Fs(n);break;case 13:is(e,n),Fs(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(dT=At())),i&4&&n1(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(wn=(c=wn)||u,is(e,n),wn=c):is(e,n),Fs(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(oe=n,u=n.child;u!==null;){for(p=oe=u;oe!==null;){switch(m=oe,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ep(4,m,m.return);break;case 1:sd(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){Et(i,t,v)}}break;case 5:sd(m,m.return);break;case 22:if(m.memoizedState!==null){s1(p);continue}}g!==null?(g.return=m,oe=g):s1(p)}u=u.sibling}e:for(u=null,p=n;;){if(p.tag===5){if(u===null){u=p;try{s=p.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jM("display",o))}catch(v){Et(n,n.return,v)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){Et(n,n.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:is(e,n),Fs(n),i&4&&n1(n);break;case 21:break;default:is(e,n),Fs(n)}}function Fs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gI(t)){var i=t;break e}t=t.return}throw Error(q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Pp(s,""),i.flags&=-33);var r=t1(n);nS(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=t1(n);tS(n,a,o);break;default:throw Error(q(161))}}catch(l){Et(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function WV(n,e,t){oe=n,xI(n)}function xI(n,e,t){for(var i=(n.mode&1)!==0;oe!==null;){var s=oe,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||wy;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||wn;a=wy;var c=wn;if(wy=o,(wn=l)&&!c)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?r1(s):l!==null?(l.return=o,oe=l):r1(s);for(;r!==null;)oe=r,xI(r),r=r.sibling;oe=s,wy=a,wn=c}i1(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,oe=r):i1(n)}}function i1(n){for(;oe!==null;){var e=oe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wn||vx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wn)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:as(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Bb(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Bb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&kp(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}wn||e.flags&512&&eS(e)}catch(m){Et(e,e.return,m)}}if(e===n){oe=null;break}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}}function s1(n){for(;oe!==null;){var e=oe;if(e===n){oe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,oe=t;break}oe=e.return}}function r1(n){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{vx(4,e)}catch(l){Et(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Et(e,s,l)}}var r=e.return;try{eS(e)}catch(l){Et(e,r,l)}break;case 5:var o=e.return;try{eS(e)}catch(l){Et(e,o,l)}}}catch(l){Et(e,e.return,l)}if(e===n){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var KV=Math.ceil,a0=ko.ReactCurrentDispatcher,cT=ko.ReactCurrentOwner,qi=ko.ReactCurrentBatchConfig,$e=0,Qt=null,It=null,ln=0,wi=0,rd=yl(0),Bt=0,jp=null,su=0,xx=0,uT=0,_p=null,Qn=null,dT=0,Jf=1/0,Nr=null,l0=!1,iS=null,Za=null,Cy=!1,Wa=null,c0=0,Tp=0,sS=null,Xy=-1,Qy=0;function Fn(){return $e&6?At():Xy!==-1?Xy:Xy=At()}function el(n){return n.mode&1?$e&2&&ln!==0?ln&-ln:NV.transition!==null?(Qy===0&&(Qy=iN()),Qy):(n=We,n!==0||(n=window.event,n=n===void 0?16:uN(n.type)),n):1}function bs(n,e,t,i){if(50<Tp)throw Tp=0,sS=null,Error(q(185));Fg(n,t,i),(!($e&2)||n!==Qt)&&(n===Qt&&(!($e&2)&&(xx|=t),Bt===4&&Xo(n,ln)),ni(n,i),t===1&&$e===0&&!(e.mode&1)&&(Jf=At()+500,mx&&vl()))}function ni(n,e){var t=n.callbackNode;N4(n,e);var i=qv(n,n===Qt?ln:0);if(i===0)t!==null&&pb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&pb(t),e===1)n.tag===0?MV(o1.bind(null,n)):PN(o1.bind(null,n)),AV(function(){!($e&6)&&vl()}),t=null;else{switch(sN(i)){case 1:t=O_;break;case 4:t=tN;break;case 16:t=Gv;break;case 536870912:t=nN;break;default:t=Gv}t=bI(t,wI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function wI(n,e){if(Xy=-1,Qy=0,$e&6)throw Error(q(327));var t=n.callbackNode;if(md()&&n.callbackNode!==t)return null;var i=qv(n,n===Qt?ln:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=u0(n,i);else{e=i;var s=$e;$e|=2;var r=SI();(Qt!==n||ln!==e)&&(Nr=null,Jf=At()+500,Zc(n,e));do try{XV();break}catch(a){CI(n,a)}while(!0);J_(),a0.current=r,$e=s,It!==null?e=0:(Qt=null,ln=0,e=Bt)}if(e!==0){if(e===2&&(s=NC(n),s!==0&&(i=s,e=rS(n,s))),e===1)throw t=jp,Zc(n,0),Xo(n,i),ni(n,At()),t;if(e===6)Xo(n,i);else{if(s=n.current.alternate,!(i&30)&&!YV(s)&&(e=u0(n,i),e===2&&(r=NC(n),r!==0&&(i=r,e=rS(n,r))),e===1))throw t=jp,Zc(n,0),Xo(n,i),ni(n,At()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(q(345));case 2:bl(n,Qn,Nr);break;case 3:if(Xo(n,i),(i&130023424)===i&&(e=dT+500-At(),10<e)){if(qv(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Fn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=$C(bl.bind(null,n,Qn,Nr),e);break}bl(n,Qn,Nr);break;case 4:if(Xo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-As(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=At()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*KV(i/1960))-i,10<i){n.timeoutHandle=$C(bl.bind(null,n,Qn,Nr),i);break}bl(n,Qn,Nr);break;case 5:bl(n,Qn,Nr);break;default:throw Error(q(329))}}}return ni(n,At()),n.callbackNode===t?wI.bind(null,n):null}function rS(n,e){var t=_p;return n.current.memoizedState.isDehydrated&&(Zc(n,e).flags|=256),n=u0(n,e),n!==2&&(e=Qn,Qn=t,e!==null&&oS(e)),n}function oS(n){Qn===null?Qn=n:Qn.push.apply(Qn,n)}function YV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Rs(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xo(n,e){for(e&=~uT,e&=~xx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-As(e),i=1<<t;n[t]=-1,e&=~i}}function o1(n){if($e&6)throw Error(q(327));md();var e=qv(n,0);if(!(e&1))return ni(n,At()),null;var t=u0(n,e);if(n.tag!==0&&t===2){var i=NC(n);i!==0&&(e=i,t=rS(n,i))}if(t===1)throw t=jp,Zc(n,0),Xo(n,e),ni(n,At()),t;if(t===6)throw Error(q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,bl(n,Qn,Nr),ni(n,At()),null}function fT(n,e){var t=$e;$e|=1;try{return n(e)}finally{$e=t,$e===0&&(Jf=At()+500,mx&&vl())}}function ru(n){Wa!==null&&Wa.tag===0&&!($e&6)&&md();var e=$e;$e|=1;var t=qi.transition,i=We;try{if(qi.transition=null,We=1,n)return n()}finally{We=i,qi.transition=t,$e=e,!($e&6)&&vl()}}function hT(){wi=rd.current,ot(rd)}function Zc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,TV(t)),It!==null)for(t=It.return;t!==null;){var i=t;switch(W_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xv();break;case 3:Kf(),ot(ei),ot(Sn),nT();break;case 5:tT(i);break;case 4:Kf();break;case 13:ot(vt);break;case 19:ot(vt);break;case 10:X_(i.type._context);break;case 22:case 23:hT()}t=t.return}if(Qt=n,It=n=tl(n.current,null),ln=wi=e,Bt=0,jp=null,uT=xx=su=0,Qn=_p=null,Dl!==null){for(e=0;e<Dl.length;e++)if(t=Dl[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Dl=null}return n}function CI(n,e){do{var t=It;try{if(J_(),Ky.current=o0,r0){for(var i=xt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}r0=!1}if(iu=0,Xt=$t=xt=null,Sp=!1,Bp=0,cT.current=null,t===null||t.return===null){Bt=1,jp=e,It=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=ln,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Wb(o);if(g!==null){g.flags&=-257,Kb(g,o,a,r,e),g.mode&1&&qb(r,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){qb(r,c,e),pT();break e}l=Error(q(426))}}else if(ft&&a.mode&1){var S=Wb(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Kb(S,o,a,r,e),K_(Yf(l,a));break e}}r=l=Yf(l,a),Bt!==4&&(Bt=2),_p===null?_p=[r]:_p.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var x=sI(r,l,e);Vb(r,x);break e;case 1:a=l;var C=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof C.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Za===null||!Za.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var A=rI(r,a,e);Vb(r,A);break e}}r=r.return}while(r!==null)}_I(t)}catch(P){e=P,It===t&&t!==null&&(It=t=t.return);continue}break}while(!0)}function SI(){var n=a0.current;return a0.current=o0,n===null?o0:n}function pT(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Qt===null||!(su&268435455)&&!(xx&268435455)||Xo(Qt,ln)}function u0(n,e){var t=$e;$e|=2;var i=SI();(Qt!==n||ln!==e)&&(Nr=null,Zc(n,e));do try{JV();break}catch(s){CI(n,s)}while(!0);if(J_(),$e=t,a0.current=i,It!==null)throw Error(q(261));return Qt=null,ln=0,Bt}function JV(){for(;It!==null;)EI(It)}function XV(){for(;It!==null&&!S4();)EI(It)}function EI(n){var e=AI(n.alternate,n,wi);n.memoizedProps=n.pendingProps,e===null?_I(n):It=e,cT.current=null}function _I(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=jV(t,e),t!==null){t.flags&=32767,It=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Bt=6,It=null;return}}else if(t=zV(t,e,wi),t!==null){It=t;return}if(e=e.sibling,e!==null){It=e;return}It=e=n}while(e!==null);Bt===0&&(Bt=5)}function bl(n,e,t){var i=We,s=qi.transition;try{qi.transition=null,We=1,QV(n,e,t,i)}finally{qi.transition=s,We=i}return null}function QV(n,e,t,i){do md();while(Wa!==null);if($e&6)throw Error(q(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(q(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(I4(n,r),n===Qt&&(It=Qt=null,ln=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Cy||(Cy=!0,bI(Gv,function(){return md(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=qi.transition,qi.transition=null;var o=We;We=1;var a=$e;$e|=4,cT.current=null,qV(n,t),vI(t,n),vV(OC),Wv=!!FC,OC=FC=null,n.current=t,WV(t),E4(),$e=a,We=o,qi.transition=r}else n.current=t;if(Cy&&(Cy=!1,Wa=n,c0=s),r=n.pendingLanes,r===0&&(Za=null),A4(t.stateNode),ni(n,At()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(l0)throw l0=!1,n=iS,iS=null,n;return c0&1&&n.tag!==0&&md(),r=n.pendingLanes,r&1?n===sS?Tp++:(Tp=0,sS=n):Tp=0,vl(),null}function md(){if(Wa!==null){var n=sN(c0),e=qi.transition,t=We;try{if(qi.transition=null,We=16>n?16:n,Wa===null)var i=!1;else{if(n=Wa,Wa=null,c0=0,$e&6)throw Error(q(331));var s=$e;for($e|=4,oe=n.current;oe!==null;){var r=oe,o=r.child;if(oe.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:Ep(8,u,r)}var p=u.child;if(p!==null)p.return=u,oe=p;else for(;oe!==null;){u=oe;var m=u.sibling,g=u.return;if(mI(u),u===c){oe=null;break}if(m!==null){m.return=g,oe=m;break}oe=g}}}var w=r.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}oe=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,oe=o;else e:for(;oe!==null;){if(r=oe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Ep(9,r,r.return)}var x=r.sibling;if(x!==null){x.return=r.return,oe=x;break e}oe=r.return}}var C=n.current;for(oe=C;oe!==null;){o=oe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,oe=_;else e:for(o=C;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vx(9,a)}}catch(P){Et(a,a.return,P)}if(a===o){oe=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,oe=A;break e}oe=a.return}}if($e=s,vl(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(ux,n)}catch{}i=!0}return i}finally{We=t,qi.transition=e}}return!1}function a1(n,e,t){e=Yf(t,e),e=sI(n,e,1),n=Qa(n,e,1),e=Fn(),n!==null&&(Fg(n,1,e),ni(n,e))}function Et(n,e,t){if(n.tag===3)a1(n,n,t);else for(;e!==null;){if(e.tag===3){a1(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Za===null||!Za.has(i))){n=Yf(t,n),n=rI(e,n,1),e=Qa(e,n,1),n=Fn(),e!==null&&(Fg(e,1,n),ni(e,n));break}}e=e.return}}function ZV(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Fn(),n.pingedLanes|=n.suspendedLanes&t,Qt===n&&(ln&t)===t&&(Bt===4||Bt===3&&(ln&130023424)===ln&&500>At()-dT?Zc(n,0):uT|=t),ni(n,e)}function TI(n,e){e===0&&(n.mode&1?(e=dy,dy<<=1,!(dy&130023424)&&(dy=4194304)):e=1);var t=Fn();n=Ao(n,e),n!==null&&(Fg(n,e,t),ni(n,t))}function eB(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),TI(n,t)}function tB(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(q(314))}i!==null&&i.delete(e),TI(n,t)}var AI;AI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ei.current)Zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Zn=!1,HV(n,e,t);Zn=!!(n.flags&131072)}else Zn=!1,ft&&e.flags&1048576&&MN(e,e0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Jy(n,e),n=e.pendingProps;var s=Gf(e,Sn.current);pd(e,t),s=sT(null,e,i,n,s,t);var r=rT();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ti(i)?(r=!0,Qv(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Z_(e),s.updater=yx,e.stateNode=s,s._reactInternals=e,qC(e,i,n,t),e=YC(null,e,i,!0,r,t)):(e.tag=0,ft&&r&&q_(e),In(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Jy(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=iB(i),n=as(i,n),s){case 0:e=KC(null,e,i,n,t);break e;case 1:e=Xb(null,e,i,n,t);break e;case 11:e=Yb(null,e,i,n,t);break e;case 14:e=Jb(null,e,i,as(i.type,n),t);break e}throw Error(q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:as(i,s),KC(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:as(i,s),Xb(n,e,i,s,t);case 3:e:{if(cI(e),n===null)throw Error(q(387));i=e.pendingProps,r=e.memoizedState,s=r.element,FN(n,e),i0(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Yf(Error(q(423)),e),e=Qb(n,e,i,t,s);break e}else if(i!==s){s=Yf(Error(q(424)),e),e=Qb(n,e,i,t,s);break e}else for(_i=Xa(e.stateNode.containerInfo.firstChild),Ti=e,ft=!0,Es=null,t=DN(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(qf(),i===s){e=bo(n,e,t);break e}In(n,e,i,t)}e=e.child}return e;case 5:return ON(e),n===null&&zC(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,UC(i,s)?o=null:r!==null&&UC(i,r)&&(e.flags|=32),lI(n,e),In(n,e,o,t),e.child;case 6:return n===null&&zC(e),null;case 13:return uI(n,e,t);case 4:return eT(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Wf(e,null,i,t):In(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:as(i,s),Yb(n,e,i,s,t);case 7:return In(n,e,e.pendingProps,t),e.child;case 8:return In(n,e,e.pendingProps.children,t),e.child;case 12:return In(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,tt(t0,i._currentValue),i._currentValue=o,r!==null)if(Rs(r.value,o)){if(r.children===s.children&&!ei.current){e=bo(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=xo(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),jC(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),jC(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}In(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,pd(e,t),s=Ji(s),i=i(s),e.flags|=1,In(n,e,i,t),e.child;case 14:return i=e.type,s=as(i,e.pendingProps),s=as(i.type,s),Jb(n,e,i,s,t);case 15:return oI(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:as(i,s),Jy(n,e),e.tag=1,ti(i)?(n=!0,Qv(e)):n=!1,pd(e,t),iI(e,i,s),qC(e,i,s,t),YC(null,e,i,!0,n,t);case 19:return dI(n,e,t);case 22:return aI(n,e,t)}throw Error(q(156,e.tag))};function bI(n,e){return eN(n,e)}function nB(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(n,e,t,i){return new nB(n,e,t,i)}function mT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iB(n){if(typeof n=="function")return mT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D_)return 11;if(n===L_)return 14}return 2}function tl(n,e){var t=n.alternate;return t===null?(t=Gi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Zy(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")mT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Yu:return eu(t.children,s,r,e);case k_:o=8,s|=8;break;case gC:return n=Gi(12,t,e,s|2),n.elementType=gC,n.lanes=r,n;case yC:return n=Gi(13,t,e,s),n.elementType=yC,n.lanes=r,n;case vC:return n=Gi(19,t,e,s),n.elementType=vC,n.lanes=r,n;case OM:return wx(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case LM:o=10;break e;case FM:o=9;break e;case D_:o=11;break e;case L_:o=14;break e;case qo:o=16,i=null;break e}throw Error(q(130,n==null?n:typeof n,""))}return e=Gi(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function eu(n,e,t,i){return n=Gi(7,n,i,e),n.lanes=t,n}function wx(n,e,t,i){return n=Gi(22,n,i,e),n.elementType=OM,n.lanes=t,n.stateNode={isHidden:!1},n}function Vw(n,e,t){return n=Gi(6,n,null,e),n.lanes=t,n}function Bw(n,e,t){return e=Gi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sB(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cw(0),this.expirationTimes=Cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cw(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gT(n,e,t,i,s,r,o,a,l){return n=new sB(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Gi(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z_(r),n}function rB(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ku,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function RI(n){if(!n)return ol;n=n._reactInternals;e:{if(Su(n)!==n||n.tag!==1)throw Error(q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(n.tag===1){var t=n.type;if(ti(t))return RN(n,t,e)}return e}function PI(n,e,t,i,s,r,o,a,l){return n=gT(t,i,!0,n,s,r,o,a,l),n.context=RI(null),t=n.current,i=Fn(),s=el(t),r=xo(i,s),r.callback=e??null,Qa(t,r,s),n.current.lanes=s,Fg(n,s,i),ni(n,i),n}function Cx(n,e,t,i){var s=e.current,r=Fn(),o=el(s);return t=RI(t),e.context===null?e.context=t:e.pendingContext=t,e=xo(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Qa(s,e,o),n!==null&&(bs(n,s,o,r),Wy(n,s,o)),o}function d0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function l1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function yT(n,e){l1(n,e),(n=n.alternate)&&l1(n,e)}function oB(){return null}var MI=typeof reportError=="function"?reportError:function(n){console.error(n)};function vT(n){this._internalRoot=n}Sx.prototype.render=vT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(q(409));Cx(n,e,null,null)};Sx.prototype.unmount=vT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ru(function(){Cx(null,n,null,null)}),e[To]=null}};function Sx(n){this._internalRoot=n}Sx.prototype.unstable_scheduleHydration=function(n){if(n){var e=aN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Jo.length&&e!==0&&e<Jo[t].priority;t++);Jo.splice(t,0,n),t===0&&cN(n)}};function xT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ex(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function c1(){}function aB(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=d0(o);r.call(c)}}var o=PI(e,i,n,0,null,!1,!1,"",c1);return n._reactRootContainer=o,n[To]=o.current,Fp(n.nodeType===8?n.parentNode:n),ru(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=d0(l);a.call(c)}}var l=gT(n,0,!1,null,null,!1,!1,"",c1);return n._reactRootContainer=l,n[To]=l.current,Fp(n.nodeType===8?n.parentNode:n),ru(function(){Cx(e,l,t,i)}),l}function _x(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=d0(o);a.call(l)}}Cx(e,o,n,s)}else o=aB(t,e,n,s,i);return d0(o)}rN=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=zh(e.pendingLanes);t!==0&&(U_(e,t|1),ni(e,At()),!($e&6)&&(Jf=At()+500,vl()))}break;case 13:ru(function(){var i=Ao(n,1);if(i!==null){var s=Fn();bs(i,n,1,s)}}),yT(n,1)}};$_=function(n){if(n.tag===13){var e=Ao(n,134217728);if(e!==null){var t=Fn();bs(e,n,134217728,t)}yT(n,134217728)}};oN=function(n){if(n.tag===13){var e=el(n),t=Ao(n,e);if(t!==null){var i=Fn();bs(t,n,e,i)}yT(n,e)}};aN=function(){return We};lN=function(n,e){var t=We;try{return We=n,e()}finally{We=t}};RC=function(n,e,t){switch(e){case"input":if(CC(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=px(i);if(!s)throw Error(q(90));$M(i),CC(i,s)}}}break;case"textarea":BM(n,t);break;case"select":e=t.value,e!=null&&ud(n,!!t.multiple,e,!1)}};KM=fT;YM=ru;var lB={usingClientEntryPoint:!1,Events:[Ug,Zu,px,qM,WM,fT]},Dh={findFiberByHostInstance:kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cB={bundleType:Dh.bundleType,version:Dh.version,rendererPackageName:Dh.rendererPackageName,rendererConfig:Dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=QM(n),n===null?null:n.stateNode},findFiberByHostInstance:Dh.findFiberByHostInstance||oB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sy.isDisabled&&Sy.supportsFiber)try{ux=Sy.inject(cB),hr=Sy}catch{}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lB;Pi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xT(e))throw Error(q(200));return rB(n,e,null,t)};Pi.createRoot=function(n,e){if(!xT(n))throw Error(q(299));var t=!1,i="",s=MI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gT(n,1,!1,null,null,t,!1,i,s),n[To]=e.current,Fp(n.nodeType===8?n.parentNode:n),new vT(e)};Pi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(q(188)):(n=Object.keys(n).join(","),Error(q(268,n)));return n=QM(e),n=n===null?null:n.stateNode,n};Pi.flushSync=function(n){return ru(n)};Pi.hydrate=function(n,e,t){if(!Ex(e))throw Error(q(200));return _x(null,n,e,!0,t)};Pi.hydrateRoot=function(n,e,t){if(!xT(n))throw Error(q(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=MI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=PI(e,null,n,1,t??null,s,!1,r,o),n[To]=e.current,Fp(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Sx(e)};Pi.render=function(n,e,t){if(!Ex(e))throw Error(q(200));return _x(null,n,e,!1,t)};Pi.unmountComponentAtNode=function(n){if(!Ex(n))throw Error(q(40));return n._reactRootContainer?(ru(function(){_x(null,null,n,!1,function(){n._reactRootContainer=null,n[To]=null})}),!0):!1};Pi.unstable_batchedUpdates=fT;Pi.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ex(t))throw Error(q(200));if(n==null||n._reactInternals===void 0)throw Error(q(38));return _x(n,e,t,!1,i)};Pi.version="18.3.1-next-f1338f8080-20240426";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(n){console.error(n)}}NI(),NM.exports=Pi;var Eu=NM.exports;const II=vM(Eu);var u1=Eu;pC.createRoot=u1.createRoot,pC.hydrateRoot=u1.hydrateRoot;const uB=1,dB=1e6;let Hw=0;function fB(){return Hw=(Hw+1)%Number.MAX_SAFE_INTEGER,Hw.toString()}const zw=new Map,d1=n=>{if(zw.has(n))return;const e=setTimeout(()=>{zw.delete(n),Ap({type:"REMOVE_TOAST",toastId:n})},dB);zw.set(n,e)},hB=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,uB)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?d1(t):n.toasts.forEach(i=>{d1(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},ev=[];let tv={toasts:[]};function Ap(n){tv=hB(tv,n),ev.forEach(e=>{e(tv)})}function pB({...n}){const e=fB(),t=s=>Ap({type:"UPDATE_TOAST",toast:{...s,id:e}}),i=()=>Ap({type:"DISMISS_TOAST",toastId:e});return Ap({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||i()}}}),{id:e,dismiss:i,update:t}}function Do(){const[n,e]=E.useState(tv);return E.useEffect(()=>(ev.push(e),()=>{const t=ev.indexOf(e);t>-1&&ev.splice(t,1)}),[n]),{...n,toast:pB,dismiss:t=>Ap({type:"DISMISS_TOAST",toastId:t})}}function J(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function f1(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Tx(...n){return e=>{let t=!1;const i=n.map(s=>{const r=f1(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():f1(n[s],null)}}}}function _e(...n){return E.useCallback(Tx(...n),n)}function mB(n,e){const t=E.createContext(e),i=r=>{const{children:o,...a}=r,l=E.useMemo(()=>a,Object.values(a));return y.jsx(t.Provider,{value:l,children:o})};i.displayName=n+"Provider";function s(r){const o=E.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[i,s]}function Bn(n,e=[]){let t=[];function i(r,o){const a=E.createContext(o),l=t.length;t=[...t,o];const c=p=>{var x;const{scope:m,children:g,...w}=p,v=((x=m==null?void 0:m[n])==null?void 0:x[l])||a,S=E.useMemo(()=>w,Object.values(w));return y.jsx(v.Provider,{value:S,children:g})};c.displayName=r+"Provider";function u(p,m){var v;const g=((v=m==null?void 0:m[n])==null?void 0:v[l])||a,w=E.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${r}\``)}return[c,u]}const s=()=>{const r=t.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return E.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,gB(s,...e)]}function gB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const p=l(r)[`__scope${c}`];return{...a,...p}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ou(n){const e=vB(n),t=E.forwardRef((i,s)=>{const{children:r,...o}=i,a=E.Children.toArray(r),l=a.find(wB);if(l){const c=l.props.children,u=a.map(p=>p===l?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:p);return y.jsx(e,{...o,ref:s,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return y.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}var yB=ou("Slot");function vB(n){const e=E.forwardRef((t,i)=>{const{children:s,...r}=t;if(E.isValidElement(s)){const o=SB(s),a=CB(r,s.props);return s.type!==E.Fragment&&(a.ref=i?Tx(i,o):o),E.cloneElement(s,a)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var kI=Symbol("radix.slottable");function xB(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=kI,e}function wB(n){return E.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===kI}function CB(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const l=r(...a);return s(...a),l}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function SB(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Vg(n){const e=n+"CollectionProvider",[t,i]=Bn(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:S,children:x}=v,C=X.useRef(null),_=X.useRef(new Map).current;return y.jsx(s,{scope:S,itemMap:_,collectionRef:C,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=ou(a),c=X.forwardRef((v,S)=>{const{scope:x,children:C}=v,_=r(a,x),A=_e(S,_.collectionRef);return y.jsx(l,{ref:A,children:C})});c.displayName=a;const u=n+"CollectionItemSlot",p="data-radix-collection-item",m=ou(u),g=X.forwardRef((v,S)=>{const{scope:x,children:C,..._}=v,A=X.useRef(null),P=_e(S,A),M=r(u,x);return X.useEffect(()=>(M.itemMap.set(A,{ref:A,..._}),()=>void M.itemMap.delete(A))),y.jsx(m,{[p]:"",ref:P,children:C})});g.displayName=u;function w(v){const S=r(n+"CollectionConsumer",v);return X.useCallback(()=>{const C=S.collectionRef.current;if(!C)return[];const _=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((M,N)=>_.indexOf(M.ref.current)-_.indexOf(N.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,i]}var EB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ue=EB.reduce((n,e)=>{const t=ou(`Primitive.${e}`),i=E.forwardRef((s,r)=>{const{asChild:o,...a}=s,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...a,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function wT(n,e){n&&Eu.flushSync(()=>n.dispatchEvent(e))}function ii(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function _B(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n);E.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var TB="DismissableLayer",aS="dismissableLayer.update",AB="dismissableLayer.pointerDownOutside",bB="dismissableLayer.focusOutside",h1,DI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ah=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=n,c=E.useContext(DI),[u,p]=E.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=E.useState({}),w=_e(e,N=>p(N)),v=Array.from(c.layers),[S]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(S),C=u?v.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,A=C>=x,P=PB(N=>{const I=N.target,k=[...c.branches].some(D=>D.contains(I));!A||k||(s==null||s(N),o==null||o(N),N.defaultPrevented||a==null||a())},m),M=MB(N=>{const I=N.target;[...c.branches].some(D=>D.contains(I))||(r==null||r(N),o==null||o(N),N.defaultPrevented||a==null||a())},m);return _B(N=>{C===c.layers.size-1&&(i==null||i(N),!N.defaultPrevented&&a&&(N.preventDefault(),a()))},m),E.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(h1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),p1(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=h1)}},[u,m,t,c]),E.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),p1())},[u,c]),E.useEffect(()=>{const N=()=>g({});return document.addEventListener(aS,N),()=>document.removeEventListener(aS,N)},[]),y.jsx(ue.div,{...l,ref:w,style:{pointerEvents:_?A?"auto":"none":void 0,...n.style},onFocusCapture:J(n.onFocusCapture,M.onFocusCapture),onBlurCapture:J(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:J(n.onPointerDownCapture,P.onPointerDownCapture)})});ah.displayName=TB;var RB="DismissableLayerBranch",LI=E.forwardRef((n,e)=>{const t=E.useContext(DI),i=E.useRef(null),s=_e(e,i);return E.useEffect(()=>{const r=i.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),y.jsx(ue.div,{...n,ref:s})});LI.displayName=RB;function PB(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n),i=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const r=a=>{if(a.target&&!i.current){let l=function(){FI(AB,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function MB(n,e=globalThis==null?void 0:globalThis.document){const t=ii(n),i=E.useRef(!1);return E.useEffect(()=>{const s=r=>{r.target&&!i.current&&FI(bB,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function p1(){const n=new CustomEvent(aS);document.dispatchEvent(n)}function FI(n,e,t,{discrete:i}){const s=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?wT(s,r):s.dispatchEvent(r)}var NB=ah,IB=LI,dn=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},kB="Portal",Bg=E.forwardRef((n,e)=>{var a;const{container:t,...i}=n,[s,r]=E.useState(!1);dn(()=>r(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?II.createPortal(y.jsx(ue.div,{...i,ref:e}),o):null});Bg.displayName=kB;function DB(n,e){return E.useReducer((t,i)=>e[t][i]??t,n)}var Ni=n=>{const{present:e,children:t}=n,i=LB(e),s=typeof t=="function"?t({present:i.isPresent}):E.Children.only(t),r=_e(i.ref,FB(s));return typeof t=="function"||i.isPresent?E.cloneElement(s,{ref:r}):null};Ni.displayName="Presence";function LB(n){const[e,t]=E.useState(),i=E.useRef(null),s=E.useRef(n),r=E.useRef("none"),o=n?"mounted":"unmounted",[a,l]=DB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=Ey(i.current);r.current=a==="mounted"?c:"none"},[a]),dn(()=>{const c=i.current,u=s.current;if(u!==n){const m=r.current,g=Ey(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),dn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,p=g=>{const v=Ey(i.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},m=g=>{g.target===e&&(r.current=Ey(i.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{i.current=c?getComputedStyle(c):null,t(c)},[])}}function Ey(n){return(n==null?void 0:n.animationName)||"none"}function FB(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var OB=PM[" useInsertionEffect ".trim().toString()]||dn;function xr({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[s,r,o]=UB({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:s;{const u=E.useRef(n!==void 0);E.useEffect(()=>{const p=u.current;p!==a&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=E.useCallback(u=>{var p;if(a){const m=$B(u)?u(n):u;m!==n&&((p=o.current)==null||p.call(o,m))}else r(u)},[a,n,r,o]);return[l,c]}function UB({defaultProp:n,onChange:e}){const[t,i]=E.useState(n),s=E.useRef(t),r=E.useRef(e);return OB(()=>{r.current=e},[e]),E.useEffect(()=>{var o;s.current!==t&&((o=r.current)==null||o.call(r,t),s.current=t)},[t,s]),[t,i,r]}function $B(n){return typeof n=="function"}var OI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VB="VisuallyHidden",Ax=E.forwardRef((n,e)=>y.jsx(ue.span,{...n,ref:e,style:{...OI,...n.style}}));Ax.displayName=VB;var BB=Ax,CT="ToastProvider",[ST,HB,zB]=Vg("Toast"),[UI,Eie]=Bn("Toast",[zB]),[jB,bx]=UI(CT),$I=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:r=50,children:o}=n,[a,l]=E.useState(null),[c,u]=E.useState(0),p=E.useRef(!1),m=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${CT}\`. Expected non-empty \`string\`.`),y.jsx(ST.Provider,{scope:e,children:y.jsx(jB,{scope:e,label:t,duration:i,swipeDirection:s,swipeThreshold:r,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:E.useCallback(()=>u(g=>g+1),[]),onToastRemove:E.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:o})})};$I.displayName=CT;var VI="ToastViewport",GB=["F8"],lS="toast.viewportPause",cS="toast.viewportResume",BI=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=GB,label:s="Notifications ({hotkey})",...r}=n,o=bx(VI,t),a=HB(t),l=E.useRef(null),c=E.useRef(null),u=E.useRef(null),p=E.useRef(null),m=_e(e,p,o.onViewportChange),g=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;E.useEffect(()=>{const S=x=>{var _;i.length!==0&&i.every(A=>x[A]||x.code===A)&&((_=p.current)==null||_.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i]),E.useEffect(()=>{const S=l.current,x=p.current;if(w&&S&&x){const C=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(lS);x.dispatchEvent(M),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(cS);x.dispatchEvent(M),o.isClosePausedRef.current=!1}},A=M=>{!S.contains(M.relatedTarget)&&_()},P=()=>{S.contains(document.activeElement)||_()};return S.addEventListener("focusin",C),S.addEventListener("focusout",A),S.addEventListener("pointermove",C),S.addEventListener("pointerleave",P),window.addEventListener("blur",C),window.addEventListener("focus",_),()=>{S.removeEventListener("focusin",C),S.removeEventListener("focusout",A),S.removeEventListener("pointermove",C),S.removeEventListener("pointerleave",P),window.removeEventListener("blur",C),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const v=E.useCallback(({tabbingDirection:S})=>{const C=a().map(_=>{const A=_.ref.current,P=[A,...s3(A)];return S==="forwards"?P:P.reverse()});return(S==="forwards"?C.reverse():C).flat()},[a]);return E.useEffect(()=>{const S=p.current;if(S){const x=C=>{var P,M,N;const _=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!_){const I=document.activeElement,k=C.shiftKey;if(C.target===S&&k){(P=c.current)==null||P.focus();return}const $=v({tabbingDirection:k?"backwards":"forwards"}),j=$.findIndex(V=>V===I);jw($.slice(j+1))?C.preventDefault():k?(M=c.current)==null||M.focus():(N=u.current)==null||N.focus()}};return S.addEventListener("keydown",x),()=>S.removeEventListener("keydown",x)}},[a,v]),y.jsxs(IB,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&y.jsx(uS,{ref:c,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"forwards"});jw(S)}}),y.jsx(ST.Slot,{scope:t,children:y.jsx(ue.ol,{tabIndex:-1,...r,ref:m})}),w&&y.jsx(uS,{ref:u,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"backwards"});jw(S)}})]})});BI.displayName=VI;var HI="ToastFocusProxy",uS=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...s}=n,r=bx(HI,t);return y.jsx(Ax,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=r.viewport)!=null&&c.contains(a))&&i()}})});uS.displayName=HI;var Hg="Toast",qB="toast.swipeStart",WB="toast.swipeMove",KB="toast.swipeCancel",YB="toast.swipeEnd",zI=E.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:s,onOpenChange:r,...o}=n,[a,l]=xr({prop:i,defaultProp:s??!0,onChange:r,caller:Hg});return y.jsx(Ni,{present:t||a,children:y.jsx(QB,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ii(n.onPause),onResume:ii(n.onResume),onSwipeStart:J(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:J(n.onSwipeMove,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:J(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:J(n.onSwipeEnd,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});zI.displayName=Hg;var[JB,XB]=UI(Hg,{onClose(){}}),QB=E.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:s,open:r,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:g,...w}=n,v=bx(Hg,t),[S,x]=E.useState(null),C=_e(e,V=>x(V)),_=E.useRef(null),A=E.useRef(null),P=s||v.duration,M=E.useRef(0),N=E.useRef(P),I=E.useRef(0),{onToastAdd:k,onToastRemove:D}=v,L=ii(()=>{var H;(S==null?void 0:S.contains(document.activeElement))&&((H=v.viewport)==null||H.focus()),o()}),$=E.useCallback(V=>{!V||V===1/0||(window.clearTimeout(I.current),M.current=new Date().getTime(),I.current=window.setTimeout(L,V))},[L]);E.useEffect(()=>{const V=v.viewport;if(V){const H=()=>{$(N.current),c==null||c()},O=()=>{const B=new Date().getTime()-M.current;N.current=N.current-B,window.clearTimeout(I.current),l==null||l()};return V.addEventListener(lS,O),V.addEventListener(cS,H),()=>{V.removeEventListener(lS,O),V.removeEventListener(cS,H)}}},[v.viewport,P,l,c,$]),E.useEffect(()=>{r&&!v.isClosePausedRef.current&&$(P)},[r,P,v.isClosePausedRef,$]),E.useEffect(()=>(k(),()=>D()),[k,D]);const j=E.useMemo(()=>S?JI(S):null,[S]);return v.viewport?y.jsxs(y.Fragment,{children:[j&&y.jsx(ZB,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),y.jsx(JB,{scope:t,onClose:L,children:Eu.createPortal(y.jsx(ST.ItemSlot,{scope:t,children:y.jsx(NB,{asChild:!0,onEscapeKeyDown:J(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||L(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:C,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:J(n.onKeyDown,V=>{V.key==="Escape"&&(a==null||a(V.nativeEvent),V.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:J(n.onPointerDown,V=>{V.button===0&&(_.current={x:V.clientX,y:V.clientY})}),onPointerMove:J(n.onPointerMove,V=>{if(!_.current)return;const H=V.clientX-_.current.x,O=V.clientY-_.current.y,B=!!A.current,U=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=U?F(0,H):0,te=U?0:F(0,O),Y=V.pointerType==="touch"?10:2,ie={x:z,y:te},he={originalEvent:V,delta:ie};B?(A.current=ie,_y(WB,p,he,{discrete:!1})):m1(ie,v.swipeDirection,Y)?(A.current=ie,_y(qB,u,he,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(H)>Y||Math.abs(O)>Y)&&(_.current=null)}),onPointerUp:J(n.onPointerUp,V=>{const H=A.current,O=V.target;if(O.hasPointerCapture(V.pointerId)&&O.releasePointerCapture(V.pointerId),A.current=null,_.current=null,H){const B=V.currentTarget,U={originalEvent:V,delta:H};m1(H,v.swipeDirection,v.swipeThreshold)?_y(YB,g,U,{discrete:!0}):_y(KB,m,U,{discrete:!0}),B.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),ZB=n=>{const{__scopeToast:e,children:t,...i}=n,s=bx(Hg,e),[r,o]=E.useState(!1),[a,l]=E.useState(!1);return n3(()=>o(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:y.jsx(Bg,{asChild:!0,children:y.jsx(Ax,{...i,children:r&&y.jsxs(y.Fragment,{children:[s.label," ",t]})})})},e3="ToastTitle",jI=E.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return y.jsx(ue.div,{...i,ref:e})});jI.displayName=e3;var t3="ToastDescription",GI=E.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return y.jsx(ue.div,{...i,ref:e})});GI.displayName=t3;var qI="ToastAction",WI=E.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?y.jsx(YI,{altText:t,asChild:!0,children:y.jsx(ET,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${qI}\`. Expected non-empty \`string\`.`),null)});WI.displayName=qI;var KI="ToastClose",ET=E.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,s=XB(KI,t);return y.jsx(YI,{asChild:!0,children:y.jsx(ue.button,{type:"button",...i,ref:e,onClick:J(n.onClick,s.onClose)})})});ET.displayName=KI;var YI=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...s}=n;return y.jsx(ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...s,ref:e})});function JI(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),i3(i)){const s=i.ariaHidden||i.hidden||i.style.display==="none",r=i.dataset.radixToastAnnounceExclude==="";if(!s)if(r){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...JI(i))}}),e}function _y(n,e,t,{discrete:i}){const s=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?wT(s,r):s.dispatchEvent(r)}var m1=(n,e,t=0)=>{const i=Math.abs(n.x),s=Math.abs(n.y),r=i>s;return e==="left"||e==="right"?r&&i>t:!r&&s>t};function n3(n=()=>{}){const e=ii(n);dn(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function i3(n){return n.nodeType===n.ELEMENT_NODE}function s3(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jw(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var r3=$I,XI=BI,QI=zI,ZI=jI,ek=GI,tk=WI,nk=ET;function ik(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=ik(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function o3(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=ik(n))&&(i&&(i+=" "),i+=e);return i}const g1=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,y1=o3,_T=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return y1(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:r}=e,o=Object.keys(s).map(c=>{const u=t==null?void 0:t[c],p=r==null?void 0:r[c];if(u===null)return null;const m=g1(u)||g1(p);return s[c][m]}),a=t&&Object.entries(t).reduce((c,u)=>{let[p,m]=u;return m===void 0||(c[p]=m),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,u)=>{let{class:p,className:m,...g}=u;return Object.entries(g).every(w=>{let[v,S]=w;return Array.isArray(S)?S.includes({...r,...a}[v]):{...r,...a}[v]===S})?[...c,p,m]:c},[]);return y1(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sk=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:o,...a},l)=>E.createElement("svg",{ref:l,...l3,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:sk("lucide",s),...a},[...o.map(([c,u])=>E.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(n,e)=>{const t=E.forwardRef(({className:i,...s},r)=>E.createElement(c3,{ref:r,iconNode:e,className:sk(`lucide-${a3(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=it("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=it("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=it("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=it("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=it("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=it("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=it("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=it("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=it("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=it("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=it("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=it("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=it("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ye(...n){return n.filter(Boolean).join(" ")}const b3=r3,lk=E.forwardRef(({className:n,...e},t)=>y.jsx(XI,{ref:t,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));lk.displayName=XI.displayName;const R3=_T("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ck=E.forwardRef(({className:n,variant:e,...t},i)=>y.jsx(QI,{ref:i,className:ye(R3({variant:e}),n),...t}));ck.displayName=QI.displayName;const P3=E.forwardRef(({className:n,...e},t)=>y.jsx(tk,{ref:t,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));P3.displayName=tk.displayName;const uk=E.forwardRef(({className:n,...e},t)=>y.jsx(nk,{ref:t,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(Rx,{className:"h-4 w-4"})}));uk.displayName=nk.displayName;const dk=E.forwardRef(({className:n,...e},t)=>y.jsx(ZI,{ref:t,className:ye("text-sm font-semibold",n),...e}));dk.displayName=ZI.displayName;const fk=E.forwardRef(({className:n,...e},t)=>y.jsx(ek,{ref:t,className:ye("text-sm opacity-90",n),...e}));fk.displayName=ek.displayName;function M3(){const{toasts:n}=Do();return y.jsxs(b3,{children:[n.map(function({id:e,title:t,description:i,action:s,...r}){return y.jsxs(ck,{...r,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(dk,{children:t}),i&&y.jsx(fk,{children:i})]}),s,y.jsx(uk,{})]},e)}),y.jsx(lk,{})]})}var N3=(n,e,t,i,s,r,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(g){(Array.isArray(n)?n:[n]).forEach(w=>{let v=w==="class",S=v&&r?s.map(x=>r[x]||x):s;v?(l.classList.remove(...S),l.classList.add(r&&r[g]?r[g]:g)):l.setAttribute(w,g)}),p(g)}function p(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)u(i);else try{let g=localStorage.getItem(e)||t,w=o&&g==="system"?m():g;u(w)}catch{}},I3=E.createContext(void 0),k3={setTheme:n=>{},themes:[]},D3=()=>{var n;return(n=E.useContext(I3))!=null?n:k3};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:i,enableColorScheme:s,defaultTheme:r,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([t,e,r,n,a,o,i,s]).slice(1,-1);return E.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${N3.toString()})(${u})`}})});var L3=n=>{switch(n){case"success":return U3;case"info":return V3;case"warning":return $3;case"error":return B3;default:return null}},F3=Array(12).fill(0),O3=({visible:n,className:e})=>X.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},X.createElement("div",{className:"sonner-spinner"},F3.map((t,i)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),U3=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$3=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V3=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B3=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),H3=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),z3=()=>{let[n,e]=X.useState(document.hidden);return X.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},dS=1,j3=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...i}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:dS++,r=this.toasts.find(a=>a.id===s),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),r?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...i,dismissible:o,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=n instanceof Promise?n:n(),s=t!==void 0,r,o=i.then(async l=>{if(r=["resolve",l],X.isValidElement(l))s=!1,this.create({id:t,type:"default",message:l});else if(q3(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:u})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:u})}}).catch(async l=>{if(r=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:u})}}).finally(()=>{var l;s&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>r[0]==="reject"?c(r[1]):l(r[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||dS++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jn=new j3,G3=(n,e)=>{let t=(e==null?void 0:e.id)||dS++;return Jn.addToast({title:n,...e,id:t}),t},q3=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",W3=G3,K3=()=>Jn.toasts,Y3=()=>Jn.getActiveToasts();Object.assign(W3,{success:Jn.success,info:Jn.info,warning:Jn.warning,error:Jn.error,custom:Jn.custom,message:Jn.message,promise:Jn.promise,dismiss:Jn.dismiss,loading:Jn.loading},{getHistory:K3,getToasts:Y3});function J3(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}J3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ty(n){return n.label!==void 0}var X3=3,Q3="32px",Z3="16px",C1=4e3,e5=356,t5=14,n5=20,i5=200;function ss(...n){return n.filter(Boolean).join(" ")}function s5(n){let[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}var r5=n=>{var e,t,i,s,r,o,a,l,c,u,p;let{invert:m,toast:g,unstyled:w,interacting:v,setHeights:S,visibleToasts:x,heights:C,index:_,toasts:A,expanded:P,removeToast:M,defaultRichColors:N,closeButton:I,style:k,cancelButtonStyle:D,actionButtonStyle:L,className:$="",descriptionClassName:j="",duration:V,position:H,gap:O,loadingIcon:B,expandByDefault:U,classNames:F,icons:z,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:Y}=n,[ie,he]=X.useState(null),[Re,Pe]=X.useState(null),[G,Te]=X.useState(!1),[Ie,Me]=X.useState(!1),[Z,ne]=X.useState(!1),[Le,pt]=X.useState(!1),[Tr,Uo]=X.useState(!1),[Sl,Th]=X.useState(0),[Mu,YA]=X.useState(0),Ah=X.useRef(g.duration||V||C1),JA=X.useRef(null),El=X.useRef(null),b$=_===0,R$=_+1<=x,Ii=g.type,Nu=g.dismissible!==!1,P$=g.className||"",M$=g.descriptionClassName||"",ry=X.useMemo(()=>C.findIndex(Se=>Se.toastId===g.id)||0,[C,g.id]),N$=X.useMemo(()=>{var Se;return(Se=g.closeButton)!=null?Se:I},[g.closeButton,I]),XA=X.useMemo(()=>g.duration||V||C1,[g.duration,V]),hw=X.useRef(0),Iu=X.useRef(0),QA=X.useRef(0),ku=X.useRef(null),[I$,k$]=H.split("-"),ZA=X.useMemo(()=>C.reduce((Se,Ye,at)=>at>=ry?Se:Se+Ye.height,0),[C,ry]),eb=z3(),D$=g.invert||m,pw=Ii==="loading";Iu.current=X.useMemo(()=>ry*O+ZA,[ry,ZA]),X.useEffect(()=>{Ah.current=XA},[XA]),X.useEffect(()=>{Te(!0)},[]),X.useEffect(()=>{let Se=El.current;if(Se){let Ye=Se.getBoundingClientRect().height;return YA(Ye),S(at=>[{toastId:g.id,height:Ye,position:g.position},...at]),()=>S(at=>at.filter(es=>es.toastId!==g.id))}},[S,g.id]),X.useLayoutEffect(()=>{if(!G)return;let Se=El.current,Ye=Se.style.height;Se.style.height="auto";let at=Se.getBoundingClientRect().height;Se.style.height=Ye,YA(at),S(es=>es.find(ts=>ts.toastId===g.id)?es.map(ts=>ts.toastId===g.id?{...ts,height:at}:ts):[{toastId:g.id,height:at,position:g.position},...es])},[G,g.title,g.description,S,g.id]);let $o=X.useCallback(()=>{Me(!0),Th(Iu.current),S(Se=>Se.filter(Ye=>Ye.toastId!==g.id)),setTimeout(()=>{M(g)},i5)},[g,M,S,Iu]);X.useEffect(()=>{if(g.promise&&Ii==="loading"||g.duration===1/0||g.type==="loading")return;let Se;return P||v||Y&&eb?(()=>{if(QA.current<hw.current){let Ye=new Date().getTime()-hw.current;Ah.current=Ah.current-Ye}QA.current=new Date().getTime()})():Ah.current!==1/0&&(hw.current=new Date().getTime(),Se=setTimeout(()=>{var Ye;(Ye=g.onAutoClose)==null||Ye.call(g,g),$o()},Ah.current)),()=>clearTimeout(Se)},[P,v,g,Ii,Y,eb,$o]),X.useEffect(()=>{g.delete&&$o()},[$o,g.delete]);function L$(){var Se,Ye,at;return z!=null&&z.loading?X.createElement("div",{className:ss(F==null?void 0:F.loader,(Se=g==null?void 0:g.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":Ii==="loading"},z.loading):B?X.createElement("div",{className:ss(F==null?void 0:F.loader,(Ye=g==null?void 0:g.classNames)==null?void 0:Ye.loader,"sonner-loader"),"data-visible":Ii==="loading"},B):X.createElement(O3,{className:ss(F==null?void 0:F.loader,(at=g==null?void 0:g.classNames)==null?void 0:at.loader),visible:Ii==="loading"})}return X.createElement("li",{tabIndex:0,ref:El,className:ss($,P$,F==null?void 0:F.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Ii],(t=g==null?void 0:g.classNames)==null?void 0:t[Ii]),"data-sonner-toast":"","data-rich-colors":(i=g.richColors)!=null?i:N,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":G,"data-promise":!!g.promise,"data-swiped":Tr,"data-removed":Ie,"data-visible":R$,"data-y-position":I$,"data-x-position":k$,"data-index":_,"data-front":b$,"data-swiping":Z,"data-dismissible":Nu,"data-type":Ii,"data-invert":D$,"data-swipe-out":Le,"data-swipe-direction":Re,"data-expanded":!!(P||U&&G),style:{"--index":_,"--toasts-before":_,"--z-index":A.length-_,"--offset":`${Ie?Sl:Iu.current}px`,"--initial-height":U?"auto":`${Mu}px`,...k,...g.style},onDragEnd:()=>{ne(!1),he(null),ku.current=null},onPointerDown:Se=>{pw||!Nu||(JA.current=new Date,Th(Iu.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(ne(!0),ku.current={x:Se.clientX,y:Se.clientY}))},onPointerUp:()=>{var Se,Ye,at,es;if(Le||!Nu)return;ku.current=null;let ts=Number(((Se=El.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Vo=Number(((Ye=El.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_l=new Date().getTime()-((at=JA.current)==null?void 0:at.getTime()),ns=ie==="x"?ts:Vo,Bo=Math.abs(ns)/_l;if(Math.abs(ns)>=n5||Bo>.11){Th(Iu.current),(es=g.onDismiss)==null||es.call(g,g),Pe(ie==="x"?ts>0?"right":"left":Vo>0?"down":"up"),$o(),pt(!0),Uo(!1);return}ne(!1),he(null)},onPointerMove:Se=>{var Ye,at,es,ts;if(!ku.current||!Nu||((Ye=window.getSelection())==null?void 0:Ye.toString().length)>0)return;let Vo=Se.clientY-ku.current.y,_l=Se.clientX-ku.current.x,ns=(at=n.swipeDirections)!=null?at:s5(H);!ie&&(Math.abs(_l)>1||Math.abs(Vo)>1)&&he(Math.abs(_l)>Math.abs(Vo)?"x":"y");let Bo={x:0,y:0};ie==="y"?(ns.includes("top")||ns.includes("bottom"))&&(ns.includes("top")&&Vo<0||ns.includes("bottom")&&Vo>0)&&(Bo.y=Vo):ie==="x"&&(ns.includes("left")||ns.includes("right"))&&(ns.includes("left")&&_l<0||ns.includes("right")&&_l>0)&&(Bo.x=_l),(Math.abs(Bo.x)>0||Math.abs(Bo.y)>0)&&Uo(!0),(es=El.current)==null||es.style.setProperty("--swipe-amount-x",`${Bo.x}px`),(ts=El.current)==null||ts.style.setProperty("--swipe-amount-y",`${Bo.y}px`)}},N$&&!g.jsx?X.createElement("button",{"aria-label":te,"data-disabled":pw,"data-close-button":!0,onClick:pw||!Nu?()=>{}:()=>{var Se;$o(),(Se=g.onDismiss)==null||Se.call(g,g)},className:ss(F==null?void 0:F.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(r=z==null?void 0:z.close)!=null?r:H3):null,g.jsx||E.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:X.createElement(X.Fragment,null,Ii||g.icon||g.promise?X.createElement("div",{"data-icon":"",className:ss(F==null?void 0:F.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||L$():null,g.type!=="loading"?g.icon||(z==null?void 0:z[Ii])||L3(Ii):null):null,X.createElement("div",{"data-content":"",className:ss(F==null?void 0:F.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},X.createElement("div",{"data-title":"",className:ss(F==null?void 0:F.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?X.createElement("div",{"data-description":"",className:ss(j,M$,F==null?void 0:F.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),E.isValidElement(g.cancel)?g.cancel:g.cancel&&Ty(g.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||D,onClick:Se=>{var Ye,at;Ty(g.cancel)&&Nu&&((at=(Ye=g.cancel).onClick)==null||at.call(Ye,Se),$o())},className:ss(F==null?void 0:F.cancelButton,(u=g==null?void 0:g.classNames)==null?void 0:u.cancelButton)},g.cancel.label):null,E.isValidElement(g.action)?g.action:g.action&&Ty(g.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||L,onClick:Se=>{var Ye,at;Ty(g.action)&&((at=(Ye=g.action).onClick)==null||at.call(Ye,Se),!Se.defaultPrevented&&$o())},className:ss(F==null?void 0:F.actionButton,(p=g==null?void 0:g.classNames)==null?void 0:p.actionButton)},g.action.label):null))};function S1(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function o5(n,e){let t={};return[n,e].forEach((i,s)=>{let r=s===1,o=r?"--mobile-offset":"--offset",a=r?Z3:Q3;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof i=="number"||typeof i=="string"?l(i):typeof i=="object"?["top","right","bottom","left"].forEach(c=>{i[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof i[c]=="number"?`${i[c]}px`:i[c]}):l(a)}),t}var a5=E.forwardRef(function(n,e){let{invert:t,position:i="bottom-right",hotkey:s=["altKey","KeyT"],expand:r,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:p,duration:m,style:g,visibleToasts:w=X3,toastOptions:v,dir:S=S1(),gap:x=t5,loadingIcon:C,icons:_,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:P}=n,[M,N]=X.useState([]),I=X.useMemo(()=>Array.from(new Set([i].concat(M.filter(Y=>Y.position).map(Y=>Y.position)))),[M,i]),[k,D]=X.useState([]),[L,$]=X.useState(!1),[j,V]=X.useState(!1),[H,O]=X.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=X.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=X.useRef(null),z=X.useRef(!1),te=X.useCallback(Y=>{N(ie=>{var he;return(he=ie.find(Re=>Re.id===Y.id))!=null&&he.delete||Jn.dismiss(Y.id),ie.filter(({id:Re})=>Re!==Y.id)})},[]);return X.useEffect(()=>Jn.subscribe(Y=>{if(Y.dismiss){N(ie=>ie.map(he=>he.id===Y.id?{...he,delete:!0}:he));return}setTimeout(()=>{II.flushSync(()=>{N(ie=>{let he=ie.findIndex(Re=>Re.id===Y.id);return he!==-1?[...ie.slice(0,he),{...ie[he],...Y},...ie.slice(he+1)]:[Y,...ie]})})})}),[]),X.useEffect(()=>{if(u!=="system"){O(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:ie})=>{O(ie?"dark":"light")})}catch{Y.addListener(({matches:he})=>{try{O(he?"dark":"light")}catch(Re){console.error(Re)}})}},[u]),X.useEffect(()=>{M.length<=1&&$(!1)},[M]),X.useEffect(()=>{let Y=ie=>{var he,Re;s.every(Pe=>ie[Pe]||ie.code===Pe)&&($(!0),(he=B.current)==null||he.focus()),ie.code==="Escape"&&(document.activeElement===B.current||(Re=B.current)!=null&&Re.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),X.useEffect(()=>{if(B.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,z.current=!1)}},[B.current]),X.createElement("section",{ref:e,"aria-label":`${A} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Y,ie)=>{var he;let[Re,Pe]=Y.split("-");return M.length?X.createElement("ol",{key:Y,dir:S==="auto"?S1():S,tabIndex:-1,ref:B,className:a,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":Re,"data-lifted":L&&M.length>1&&!r,"data-x-position":Pe,style:{"--front-toast-height":`${((he=k[0])==null?void 0:he.height)||0}px`,"--width":`${e5}px`,"--gap":`${x}px`,...g,...o5(l,c)},onBlur:G=>{z.current&&!G.currentTarget.contains(G.relatedTarget)&&(z.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||z.current||(z.current=!0,F.current=G.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{j||$(!1)},onDragEnd:()=>$(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},M.filter(G=>!G.position&&ie===0||G.position===Y).map((G,Te)=>{var Ie,Me;return X.createElement(r5,{key:G.id,icons:_,index:Te,toast:G,defaultRichColors:p,duration:(Ie=v==null?void 0:v.duration)!=null?Ie:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:w,closeButton:(Me=v==null?void 0:v.closeButton)!=null?Me:o,interacting:j,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:te,toasts:M.filter(Z=>Z.position==G.position),heights:k.filter(Z=>Z.position==G.position),setHeights:D,expandByDefault:r,gap:x,loadingIcon:C,expanded:L,pauseWhenPageIsHidden:P,swipeDirections:n.swipeDirections})})):null}))});const l5=({...n})=>{const{theme:e="system"}=D3();return y.jsx(a5,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var c5=PM[" useId ".trim().toString()]||(()=>{}),u5=0;function mr(n){const[e,t]=E.useState(c5());return dn(()=>{t(i=>i??String(u5++))},[n]),e?`radix-${e}`:""}const d5=["top","right","bottom","left"],ll=Math.min,Si=Math.max,h0=Math.round,Ay=Math.floor,gr=n=>({x:n,y:n}),f5={left:"right",right:"left",bottom:"top",top:"bottom"},h5={start:"end",end:"start"};function fS(n,e,t){return Si(n,ll(e,t))}function Ro(n,e){return typeof n=="function"?n(e):n}function Po(n){return n.split("-")[0]}function lh(n){return n.split("-")[1]}function TT(n){return n==="x"?"y":"x"}function AT(n){return n==="y"?"height":"width"}function ur(n){return["top","bottom"].includes(Po(n))?"y":"x"}function bT(n){return TT(ur(n))}function p5(n,e,t){t===void 0&&(t=!1);const i=lh(n),s=bT(n),r=AT(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=p0(o)),[o,p0(o)]}function m5(n){const e=p0(n);return[hS(n),e,hS(e)]}function hS(n){return n.replace(/start|end/g,e=>h5[e])}function g5(n,e,t){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?r:o;default:return[]}}function y5(n,e,t,i){const s=lh(n);let r=g5(Po(n),t==="start",i);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map(hS)))),r}function p0(n){return n.replace(/left|right|bottom|top/g,e=>f5[e])}function v5(n){return{top:0,right:0,bottom:0,left:0,...n}}function hk(n){return typeof n!="number"?v5(n):{top:n,right:n,bottom:n,left:n}}function m0(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function E1(n,e,t){let{reference:i,floating:s}=n;const r=ur(e),o=bT(e),a=AT(o),l=Po(e),c=r==="y",u=i.x+i.width/2-s.width/2,p=i.y+i.height/2-s.height/2,m=i[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:i.y-s.height};break;case"bottom":g={x:u,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:p};break;case"left":g={x:i.x-s.width,y:p};break;default:g={x:i.x,y:i.y}}switch(lh(e)){case"start":g[o]-=m*(t&&c?-1:1);break;case"end":g[o]+=m*(t&&c?-1:1);break}return g}const x5=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:p}=E1(c,i,l),m=i,g={},w=0;for(let v=0;v<a.length;v++){const{name:S,fn:x}=a[v],{x:C,y:_,data:A,reset:P}=await x({x:u,y:p,initialPlacement:i,placement:m,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=C??u,p=_??p,g={...g,[S]:{...g[S],...A}},P&&w<=50&&(w++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):P.rects),{x:u,y:p}=E1(c,m,l)),v=-1)}return{x:u,y:p,placement:m,strategy:s,middlewareData:g}};async function Gp(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=Ro(e,n),w=hk(g),S=a[m?p==="floating"?"reference":"floating":p],x=m0(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(S)))==null||t?S:S.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),C=p==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),A=await(r.isElement==null?void 0:r.isElement(_))?await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1}:{x:1,y:1},P=m0(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:_,strategy:l}):C);return{top:(x.top-P.top+w.top)/A.y,bottom:(P.bottom-x.bottom+w.bottom)/A.y,left:(x.left-P.left+w.left)/A.x,right:(P.right-x.right+w.right)/A.x}}const w5=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ro(n,e)||{};if(c==null)return{};const p=hk(u),m={x:t,y:i},g=bT(s),w=AT(g),v=await o.getDimensions(c),S=g==="y",x=S?"top":"left",C=S?"bottom":"right",_=S?"clientHeight":"clientWidth",A=r.reference[w]+r.reference[g]-m[g]-r.floating[w],P=m[g]-r.reference[g],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=M?M[_]:0;(!N||!await(o.isElement==null?void 0:o.isElement(M)))&&(N=a.floating[_]||r.floating[w]);const I=A/2-P/2,k=N/2-v[w]/2-1,D=ll(p[x],k),L=ll(p[C],k),$=D,j=N-v[w]-L,V=N/2-v[w]/2+I,H=fS($,V,j),O=!l.arrow&&lh(s)!=null&&V!==H&&r.reference[w]/2-(V<$?D:L)-v[w]/2<0,B=O?V<$?V-$:V-j:0;return{[g]:m[g]+B,data:{[g]:H,centerOffset:V-H-B,...O&&{alignmentOffset:B}},reset:O}}}),C5=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...S}=Ro(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const x=Po(s),C=ur(a),_=Po(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=m||(_||!v?[p0(a)]:m5(a)),M=w!=="none";!m&&M&&P.push(...y5(a,v,w,A));const N=[a,...P],I=await Gp(e,S),k=[];let D=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&k.push(I[x]),p){const V=p5(s,o,A);k.push(I[V[0]],I[V[1]])}if(D=[...D,{placement:s,overflows:k}],!k.every(V=>V<=0)){var L,$;const V=(((L=r.flip)==null?void 0:L.index)||0)+1,H=N[V];if(H&&(!(p==="alignment"?C!==ur(H):!1)||D.every(U=>U.overflows[0]>0&&ur(U.placement)===C)))return{data:{index:V,overflows:D},reset:{placement:H}};let O=($=D.filter(B=>B.overflows[0]<=0).sort((B,U)=>B.overflows[1]-U.overflows[1])[0])==null?void 0:$.placement;if(!O)switch(g){case"bestFit":{var j;const B=(j=D.filter(U=>{if(M){const F=ur(U.placement);return F===C||F==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort((U,F)=>U[1]-F[1])[0])==null?void 0:j[0];B&&(O=B);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function _1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function T1(n){return d5.some(e=>n[e]>=0)}const S5=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=Ro(n,e);switch(i){case"referenceHidden":{const r=await Gp(e,{...s,elementContext:"reference"}),o=_1(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:T1(o)}}}case"escaped":{const r=await Gp(e,{...s,altBoundary:!0}),o=_1(r,t.floating);return{data:{escapedOffsets:o,escaped:T1(o)}}}default:return{}}}}};async function E5(n,e){const{placement:t,platform:i,elements:s}=n,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=Po(t),a=lh(t),l=ur(t)==="y",c=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,p=Ro(e,n);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof w=="number"&&(g=a==="end"?w*-1:w),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const _5=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:r,placement:o,middlewareData:a}=e,l=await E5(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},T5=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x,y:C}=S;return{x,y:C}}},...l}=Ro(n,e),c={x:t,y:i},u=await Gp(e,l),p=ur(Po(s)),m=TT(p);let g=c[m],w=c[p];if(r){const S=m==="y"?"top":"left",x=m==="y"?"bottom":"right",C=g+u[S],_=g-u[x];g=fS(C,g,_)}if(o){const S=p==="y"?"top":"left",x=p==="y"?"bottom":"right",C=w+u[S],_=w-u[x];w=fS(C,w,_)}const v=a.fn({...e,[m]:g,[p]:w});return{...v,data:{x:v.x-t,y:v.y-i,enabled:{[m]:r,[p]:o}}}}}},A5=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ro(n,e),u={x:t,y:i},p=ur(s),m=TT(p);let g=u[m],w=u[p];const v=Ro(a,e),S=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const _=m==="y"?"height":"width",A=r.reference[m]-r.floating[_]+S.mainAxis,P=r.reference[m]+r.reference[_]-S.mainAxis;g<A?g=A:g>P&&(g=P)}if(c){var x,C;const _=m==="y"?"width":"height",A=["top","left"].includes(Po(s)),P=r.reference[p]-r.floating[_]+(A&&((x=o.offset)==null?void 0:x[p])||0)+(A?0:S.crossAxis),M=r.reference[p]+r.reference[_]+(A?0:((C=o.offset)==null?void 0:C[p])||0)-(A?S.crossAxis:0);w<P?w=P:w>M&&(w=M)}return{[m]:g,[p]:w}}}},b5=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ro(n,e),u=await Gp(e,c),p=Po(s),m=lh(s),g=ur(s)==="y",{width:w,height:v}=r.floating;let S,x;p==="top"||p==="bottom"?(S=p,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=p,S=m==="end"?"top":"bottom");const C=v-u.top-u.bottom,_=w-u.left-u.right,A=ll(v-u[S],C),P=ll(w-u[x],_),M=!e.middlewareData.shift;let N=A,I=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=_),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(N=C),M&&!m){const D=Si(u.left,0),L=Si(u.right,0),$=Si(u.top,0),j=Si(u.bottom,0);g?I=w-2*(D!==0||L!==0?D+L:Si(u.left,u.right)):N=v-2*($!==0||j!==0?$+j:Si(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:N});const k=await o.getDimensions(a.floating);return w!==k.width||v!==k.height?{reset:{rects:!0}}:{}}}};function Px(){return typeof window<"u"}function ch(n){return pk(n)?(n.nodeName||"").toLowerCase():"#document"}function Ai(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function _r(n){var e;return(e=(pk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pk(n){return Px()?n instanceof Node||n instanceof Ai(n).Node:!1}function Ps(n){return Px()?n instanceof Element||n instanceof Ai(n).Element:!1}function wr(n){return Px()?n instanceof HTMLElement||n instanceof Ai(n).HTMLElement:!1}function A1(n){return!Px()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ai(n).ShadowRoot}function zg(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=Ms(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function R5(n){return["table","td","th"].includes(ch(n))}function Mx(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function RT(n){const e=PT(),t=Ps(n)?Ms(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function P5(n){let e=cl(n);for(;wr(e)&&!Xf(e);){if(RT(e))return e;if(Mx(e))return null;e=cl(e)}return null}function PT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xf(n){return["html","body","#document"].includes(ch(n))}function Ms(n){return Ai(n).getComputedStyle(n)}function Nx(n){return Ps(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function cl(n){if(ch(n)==="html")return n;const e=n.assignedSlot||n.parentNode||A1(n)&&n.host||_r(n);return A1(e)?e.host:e}function mk(n){const e=cl(n);return Xf(e)?n.ownerDocument?n.ownerDocument.body:n.body:wr(e)&&zg(e)?e:mk(e)}function qp(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=mk(n),r=s===((i=n.ownerDocument)==null?void 0:i.body),o=Ai(s);if(r){const a=pS(o);return e.concat(o,o.visualViewport||[],zg(s)?s:[],a&&t?qp(a):[])}return e.concat(s,qp(s,[],t))}function pS(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function gk(n){const e=Ms(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=wr(n),r=s?n.offsetWidth:t,o=s?n.offsetHeight:i,a=h0(t)!==r||h0(i)!==o;return a&&(t=r,i=o),{width:t,height:i,$:a}}function MT(n){return Ps(n)?n:n.contextElement}function gd(n){const e=MT(n);if(!wr(e))return gr(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:r}=gk(e);let o=(r?h0(t.width):t.width)/i,a=(r?h0(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const M5=gr(0);function yk(n){const e=Ai(n);return!PT()||!e.visualViewport?M5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function N5(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ai(n)?!1:e}function au(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=MT(n);let o=gr(1);e&&(i?Ps(i)&&(o=gd(i)):o=gd(n));const a=N5(r,t,i)?yk(r):gr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,p=s.height/o.y;if(r){const m=Ai(r),g=i&&Ps(i)?Ai(i):i;let w=m,v=pS(w);for(;v&&i&&g!==w;){const S=gd(v),x=v.getBoundingClientRect(),C=Ms(v),_=x.left+(v.clientLeft+parseFloat(C.paddingLeft))*S.x,A=x.top+(v.clientTop+parseFloat(C.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,p*=S.y,l+=_,c+=A,w=Ai(v),v=pS(w)}}return m0({width:u,height:p,x:l,y:c})}function NT(n,e){const t=Nx(n).scrollLeft;return e?e.left+t:au(_r(n)).left+t}function vk(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=i.left+e.scrollLeft-(t?0:NT(n,i)),r=i.top+e.scrollTop;return{x:s,y:r}}function I5(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const r=s==="fixed",o=_r(i),a=e?Mx(e.floating):!1;if(i===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=gr(1);const u=gr(0),p=wr(i);if((p||!p&&!r)&&((ch(i)!=="body"||zg(o))&&(l=Nx(i)),wr(i))){const g=au(i);c=gd(i),u.x=g.x+i.clientLeft,u.y=g.y+i.clientTop}const m=o&&!p&&!r?vk(o,l,!0):gr(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:t.y*c.y-l.scrollTop*c.y+u.y+m.y}}function k5(n){return Array.from(n.getClientRects())}function D5(n){const e=_r(n),t=Nx(n),i=n.ownerDocument.body,s=Si(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Si(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+NT(n);const a=-t.scrollTop;return Ms(i).direction==="rtl"&&(o+=Si(e.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function L5(n,e){const t=Ai(n),i=_r(n),s=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=PT();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function F5(n,e){const t=au(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,r=wr(n)?gd(n):gr(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function b1(n,e,t){let i;if(e==="viewport")i=L5(n,t);else if(e==="document")i=D5(_r(n));else if(Ps(e))i=F5(e,t);else{const s=yk(n);i={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return m0(i)}function xk(n,e){const t=cl(n);return t===e||!Ps(t)||Xf(t)?!1:Ms(t).position==="fixed"||xk(t,e)}function O5(n,e){const t=e.get(n);if(t)return t;let i=qp(n,[],!1).filter(a=>Ps(a)&&ch(a)!=="body"),s=null;const r=Ms(n).position==="fixed";let o=r?cl(n):n;for(;Ps(o)&&!Xf(o);){const a=Ms(o),l=RT(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||zg(o)&&!l&&xk(n,o))?i=i.filter(u=>u!==o):s=a,o=cl(o)}return e.set(n,i),i}function U5(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const o=[...t==="clippingAncestors"?Mx(e)?[]:O5(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,u)=>{const p=b1(e,u,s);return c.top=Si(p.top,c.top),c.right=ll(p.right,c.right),c.bottom=ll(p.bottom,c.bottom),c.left=Si(p.left,c.left),c},b1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $5(n){const{width:e,height:t}=gk(n);return{width:e,height:t}}function V5(n,e,t){const i=wr(e),s=_r(e),r=t==="fixed",o=au(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=gr(0);function c(){l.x=NT(s)}if(i||!i&&!r)if((ch(e)!=="body"||zg(s))&&(a=Nx(e)),i){const g=au(e,!0,r,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();r&&!i&&s&&c();const u=s&&!i&&!r?vk(s,a):gr(0),p=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:p,y:m,width:o.width,height:o.height}}function Gw(n){return Ms(n).position==="static"}function R1(n,e){if(!wr(n)||Ms(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return _r(n)===t&&(t=t.ownerDocument.body),t}function wk(n,e){const t=Ai(n);if(Mx(n))return t;if(!wr(n)){let s=cl(n);for(;s&&!Xf(s);){if(Ps(s)&&!Gw(s))return s;s=cl(s)}return t}let i=R1(n,e);for(;i&&R5(i)&&Gw(i);)i=R1(i,e);return i&&Xf(i)&&Gw(i)&&!RT(i)?t:i||P5(n)||t}const B5=async function(n){const e=this.getOffsetParent||wk,t=this.getDimensions,i=await t(n.floating);return{reference:V5(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function H5(n){return Ms(n).direction==="rtl"}const z5={convertOffsetParentRelativeRectToViewportRelativeRect:I5,getDocumentElement:_r,getClippingRect:U5,getOffsetParent:wk,getElementRects:B5,getClientRects:k5,getDimensions:$5,getScale:gd,isElement:Ps,isRTL:H5};function Ck(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function j5(n,e){let t=null,i;const s=_r(n);function r(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=n.getBoundingClientRect(),{left:u,top:p,width:m,height:g}=c;if(a||e(),!m||!g)return;const w=Ay(p),v=Ay(s.clientWidth-(u+m)),S=Ay(s.clientHeight-(p+g)),x=Ay(u),_={rootMargin:-w+"px "+-v+"px "+-S+"px "+-x+"px",threshold:Si(0,ll(1,l))||1};let A=!0;function P(M){const N=M[0].intersectionRatio;if(N!==l){if(!A)return o();N?o(!1,N):i=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!Ck(c,n.getBoundingClientRect())&&o(),A=!1}try{t=new IntersectionObserver(P,{..._,root:s.ownerDocument})}catch{t=new IntersectionObserver(P,_)}t.observe(n)}return o(!0),r}function G5(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=MT(n),u=s||r?[...c?qp(c):[],...qp(e)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",t,{passive:!0}),r&&x.addEventListener("resize",t)});const p=c&&a?j5(c,t):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[C]=x;C&&C.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let w,v=l?au(n):null;l&&S();function S(){const x=au(n);v&&!Ck(v,x)&&t(),v=x,w=requestAnimationFrame(S)}return t(),()=>{var x;u.forEach(C=>{s&&C.removeEventListener("scroll",t),r&&C.removeEventListener("resize",t)}),p==null||p(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(w)}}const q5=_5,W5=T5,K5=C5,Y5=b5,J5=S5,P1=w5,X5=A5,Q5=(n,e,t)=>{const i=new Map,s={platform:z5,...t},r={...s.platform,_c:i};return x5(n,e,{...s,platform:r})};var Z5=typeof document<"u",eH=function(){},nv=Z5?E.useLayoutEffect:eH;function g0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!g0(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const r=s[i];if(!(r==="_owner"&&n.$$typeof)&&!g0(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function Sk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function M1(n,e){const t=Sk(n);return Math.round(e*t)/t}function qw(n){const e=E.useRef(n);return nv(()=>{e.current=n}),e}function tH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,p]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=E.useState(i);g0(m,i)||g(i);const[w,v]=E.useState(null),[S,x]=E.useState(null),C=E.useCallback(U=>{U!==M.current&&(M.current=U,v(U))},[]),_=E.useCallback(U=>{U!==N.current&&(N.current=U,x(U))},[]),A=r||w,P=o||S,M=E.useRef(null),N=E.useRef(null),I=E.useRef(u),k=l!=null,D=qw(l),L=qw(s),$=qw(c),j=E.useCallback(()=>{if(!M.current||!N.current)return;const U={placement:e,strategy:t,middleware:m};L.current&&(U.platform=L.current),Q5(M.current,N.current,U).then(F=>{const z={...F,isPositioned:$.current!==!1};V.current&&!g0(I.current,z)&&(I.current=z,Eu.flushSync(()=>{p(z)}))})},[m,e,t,L,$]);nv(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[c]);const V=E.useRef(!1);nv(()=>(V.current=!0,()=>{V.current=!1}),[]),nv(()=>{if(A&&(M.current=A),P&&(N.current=P),A&&P){if(D.current)return D.current(A,P,j);j()}},[A,P,j,D,k]);const H=E.useMemo(()=>({reference:M,floating:N,setReference:C,setFloating:_}),[C,_]),O=E.useMemo(()=>({reference:A,floating:P}),[A,P]),B=E.useMemo(()=>{const U={position:t,left:0,top:0};if(!O.floating)return U;const F=M1(O.floating,u.x),z=M1(O.floating,u.y);return a?{...U,transform:"translate("+F+"px, "+z+"px)",...Sk(O.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:F,top:z}},[t,a,O.floating,u.x,u.y]);return E.useMemo(()=>({...u,update:j,refs:H,elements:O,floatingStyles:B}),[u,j,H,O,B])}const nH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?P1({element:i.current,padding:s}).fn(t):{}:i?P1({element:i,padding:s}).fn(t):{}}}},iH=(n,e)=>({...q5(n),options:[n,e]}),sH=(n,e)=>({...W5(n),options:[n,e]}),rH=(n,e)=>({...X5(n),options:[n,e]}),oH=(n,e)=>({...K5(n),options:[n,e]}),aH=(n,e)=>({...Y5(n),options:[n,e]}),lH=(n,e)=>({...J5(n),options:[n,e]}),cH=(n,e)=>({...nH(n),options:[n,e]});var uH="Arrow",Ek=E.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...r}=n;return y.jsx(ue.svg,{...r,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ek.displayName=uH;var dH=Ek;function Ix(n){const[e,t]=E.useState(void 0);return dn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var IT="Popper",[_k,uh]=Bn(IT),[fH,Tk]=_k(IT),Ak=n=>{const{__scopePopper:e,children:t}=n,[i,s]=E.useState(null);return y.jsx(fH,{scope:e,anchor:i,onAnchorChange:s,children:t})};Ak.displayName=IT;var bk="PopperAnchor",Rk=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,r=Tk(bk,t),o=E.useRef(null),a=_e(e,o);return E.useEffect(()=>{r.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:y.jsx(ue.div,{...s,ref:a})});Rk.displayName=bk;var kT="PopperContent",[hH,pH]=_k(kT),Pk=E.forwardRef((n,e)=>{var G,Te,Ie,Me,Z,ne;const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=n,S=Tk(kT,t),[x,C]=E.useState(null),_=_e(e,Le=>C(Le)),[A,P]=E.useState(null),M=Ix(A),N=(M==null?void 0:M.width)??0,I=(M==null?void 0:M.height)??0,k=i+(r!=="center"?"-"+r:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],$=L.length>0,j={padding:D,boundary:L.filter(gH),altBoundary:$},{refs:V,floatingStyles:H,placement:O,isPositioned:B,middlewareData:U}=tH({strategy:"fixed",placement:k,whileElementsMounted:(...Le)=>G5(...Le,{animationFrame:g==="always"}),elements:{reference:S.anchor},middleware:[iH({mainAxis:s+I,alignmentAxis:o}),l&&sH({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?rH():void 0,...j}),l&&oH({...j}),aH({...j,apply:({elements:Le,rects:pt,availableWidth:Tr,availableHeight:Uo})=>{const{width:Sl,height:Th}=pt.reference,Mu=Le.floating.style;Mu.setProperty("--radix-popper-available-width",`${Tr}px`),Mu.setProperty("--radix-popper-available-height",`${Uo}px`),Mu.setProperty("--radix-popper-anchor-width",`${Sl}px`),Mu.setProperty("--radix-popper-anchor-height",`${Th}px`)}}),A&&cH({element:A,padding:a}),yH({arrowWidth:N,arrowHeight:I}),m&&lH({strategy:"referenceHidden",...j})]}),[F,z]=Ik(O),te=ii(w);dn(()=>{B&&(te==null||te())},[B,te]);const Y=(G=U.arrow)==null?void 0:G.x,ie=(Te=U.arrow)==null?void 0:Te.y,he=((Ie=U.arrow)==null?void 0:Ie.centerOffset)!==0,[Re,Pe]=E.useState();return dn(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:B?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(Me=U.transformOrigin)==null?void 0:Me.x,(Z=U.transformOrigin)==null?void 0:Z.y].join(" "),...((ne=U.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(hH,{scope:t,placedSide:F,onArrowChange:P,arrowX:Y,arrowY:ie,shouldHideArrow:he,children:y.jsx(ue.div,{"data-side":F,"data-align":z,...v,ref:_,style:{...v.style,animation:B?void 0:"none"}})})})});Pk.displayName=kT;var Mk="PopperArrow",mH={top:"bottom",right:"left",bottom:"top",left:"right"},Nk=E.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,r=pH(Mk,i),o=mH[r.placedSide];return y.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:y.jsx(dH,{...s,ref:t,style:{...s.style,display:"block"}})})});Nk.displayName=Mk;function gH(n){return n!==null}var yH=n=>({name:"transformOrigin",options:n,fn(e){var S,x,C;const{placement:t,rects:i,middlewareData:s}=e,o=((S=s.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=Ik(t),p={start:"0%",center:"50%",end:"100%"}[u],m=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,g=(((C=s.arrow)==null?void 0:C.y)??0)+l/2;let w="",v="";return c==="bottom"?(w=o?p:`${m}px`,v=`${-l}px`):c==="top"?(w=o?p:`${m}px`,v=`${i.floating.height+l}px`):c==="right"?(w=`${-l}px`,v=o?p:`${g}px`):c==="left"&&(w=`${i.floating.width+l}px`,v=o?p:`${g}px`),{data:{x:w,y:v}}}});function Ik(n){const[e,t="center"]=n.split("-");return[e,t]}var kk=Ak,DT=Rk,LT=Pk,FT=Nk,[kx,_ie]=Bn("Tooltip",[uh]),OT=uh(),Dk="TooltipProvider",vH=700,N1="tooltip.open",[xH,Lk]=kx(Dk),Fk=n=>{const{__scopeTooltip:e,delayDuration:t=vH,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:r}=n,o=E.useRef(!0),a=E.useRef(!1),l=E.useRef(0);return E.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),y.jsx(xH,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:E.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:r})};Fk.displayName=Dk;var Ok="Tooltip",[Tie,Dx]=kx(Ok),mS="TooltipTrigger",wH=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=Dx(mS,t),r=Lk(mS,t),o=OT(t),a=E.useRef(null),l=_e(e,a,s.onTriggerChange),c=E.useRef(!1),u=E.useRef(!1),p=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),y.jsx(DT,{asChild:!0,...o,children:y.jsx(ue.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:l,onPointerMove:J(n.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:J(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:J(n.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:J(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:J(n.onBlur,s.onClose),onClick:J(n.onClick,s.onClose)})})});wH.displayName=mS;var CH="TooltipPortal",[Aie,SH]=kx(CH,{forceMount:void 0}),Qf="TooltipContent",Uk=E.forwardRef((n,e)=>{const t=SH(Qf,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...r}=n,o=Dx(Qf,n.__scopeTooltip);return y.jsx(Ni,{present:i||o.open,children:o.disableHoverableContent?y.jsx($k,{side:s,...r,ref:e}):y.jsx(EH,{side:s,...r,ref:e})})}),EH=E.forwardRef((n,e)=>{const t=Dx(Qf,n.__scopeTooltip),i=Lk(Qf,n.__scopeTooltip),s=E.useRef(null),r=_e(e,s),[o,a]=E.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:p}=i,m=E.useCallback(()=>{a(null),p(!1)},[p]),g=E.useCallback((w,v)=>{const S=w.currentTarget,x={x:w.clientX,y:w.clientY},C=RH(x,S.getBoundingClientRect()),_=PH(x,C),A=MH(v.getBoundingClientRect()),P=IH([..._,...A]);a(P),p(!0)},[p]);return E.useEffect(()=>()=>m(),[m]),E.useEffect(()=>{if(l&&u){const w=S=>g(S,u),v=S=>g(S,l);return l.addEventListener("pointerleave",w),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),E.useEffect(()=>{if(o){const w=v=>{const S=v.target,x={x:v.clientX,y:v.clientY},C=(l==null?void 0:l.contains(S))||(u==null?void 0:u.contains(S)),_=!NH(x,o);C?m():_&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,u,o,c,m]),y.jsx($k,{...n,ref:r})}),[_H,TH]=kx(Ok,{isInside:!1}),AH=xB("TooltipContent"),$k=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=n,l=Dx(Qf,t),c=OT(t),{onClose:u}=l;return E.useEffect(()=>(document.addEventListener(N1,u),()=>document.removeEventListener(N1,u)),[u]),E.useEffect(()=>{if(l.trigger){const p=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[l.trigger,u]),y.jsx(ah,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:y.jsxs(LT,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(AH,{children:i}),y.jsx(_H,{scope:t,isInside:!0,children:y.jsx(BB,{id:l.contentId,role:"tooltip",children:s||i})})]})})});Uk.displayName=Qf;var Vk="TooltipArrow",bH=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=OT(t);return TH(Vk,t).isInside?null:y.jsx(FT,{...s,...i,ref:e})});bH.displayName=Vk;function RH(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,i,s,r)){case r:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function PH(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function MH(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function NH(n,e){const{x:t,y:i}=n;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],l=e[o],c=a.x,u=a.y,p=l.x,m=l.y;u>i!=m>i&&t<(p-c)*(i-u)/(m-u)+c&&(s=!s)}return s}function IH(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),kH(e)}function kH(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var DH=Fk,Bk=Uk;const LH=DH,FH=E.forwardRef(({className:n,sideOffset:e=4,...t},i)=>y.jsx(Bk,{ref:i,sideOffset:e,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));FH.displayName=Bk.displayName;var dh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lu=typeof window>"u"||"Deno"in globalThis;function kn(){}function OH(n,e){return typeof n=="function"?n(e):n}function gS(n){return typeof n=="number"&&n>=0&&n!==1/0}function Hk(n,e){return Math.max(n+(e||0)-Date.now(),0)}function nl(n,e){return typeof n=="function"?n(e):n}function _s(n,e){return typeof n=="function"?n(e):n}function I1(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:r,queryKey:o,stale:a}=n;if(o){if(i){if(e.queryHash!==UT(o,e.options))return!1}else if(!Wp(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||r&&!r(e))}function k1(n,e){const{exact:t,status:i,predicate:s,mutationKey:r}=n;if(r){if(!e.options.mutationKey)return!1;if(t){if(cu(e.options.mutationKey)!==cu(r))return!1}else if(!Wp(e.options.mutationKey,r))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function UT(n,e){return((e==null?void 0:e.queryKeyHashFn)||cu)(n)}function cu(n){return JSON.stringify(n,(e,t)=>yS(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function Wp(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Wp(n[t],e[t])):!1}function zk(n,e){if(n===e)return n;const t=D1(n)&&D1(e);if(t||yS(n)&&yS(e)){const i=t?n:Object.keys(n),s=i.length,r=t?e:Object.keys(e),o=r.length,a=t?[]:{},l=new Set(i);let c=0;for(let u=0;u<o;u++){const p=t?u:r[u];(!t&&l.has(p)||t)&&n[p]===void 0&&e[p]===void 0?(a[p]=void 0,c++):(a[p]=zk(n[p],e[p]),a[p]===n[p]&&n[p]!==void 0&&c++)}return s===o&&c===s?n:a}return e}function y0(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function D1(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function yS(n){if(!L1(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!L1(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function L1(n){return Object.prototype.toString.call(n)==="[object Object]"}function UH(n){return new Promise(e=>{setTimeout(e,n)})}function vS(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?zk(n,e):e}function $H(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function VH(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var $T=Symbol();function jk(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===$T?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Gk(n,e){return typeof n=="function"?n(...e):!!n}var Fl,Zo,Ad,aM,BH=(aM=class extends dh{constructor(){super();b(this,Fl);b(this,Zo);b(this,Ad);T(this,Ad,e=>{if(!lu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,Zo)||this.setEventListener(d(this,Ad))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,Zo))==null||e.call(this),T(this,Zo,void 0))}setEventListener(e){var t;T(this,Ad,e),(t=d(this,Zo))==null||t.call(this),T(this,Zo,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){d(this,Fl)!==e&&(T(this,Fl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,Fl)=="boolean"?d(this,Fl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fl=new WeakMap,Zo=new WeakMap,Ad=new WeakMap,aM),VT=new BH,bd,ea,Rd,lM,HH=(lM=class extends dh{constructor(){super();b(this,bd,!0);b(this,ea);b(this,Rd);T(this,Rd,e=>{if(!lu&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){d(this,ea)||this.setEventListener(d(this,Rd))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,ea))==null||e.call(this),T(this,ea,void 0))}setEventListener(e){var t;T(this,Rd,e),(t=d(this,ea))==null||t.call(this),T(this,ea,e(this.setOnline.bind(this)))}setOnline(e){d(this,bd)!==e&&(T(this,bd,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return d(this,bd)}},bd=new WeakMap,ea=new WeakMap,Rd=new WeakMap,lM),v0=new HH;function xS(){let n,e;const t=new Promise((s,r)=>{n=s,e=r});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function zH(n){return Math.min(1e3*2**n,3e4)}function qk(n){return(n??"online")==="online"?v0.isOnline():!0}var Wk=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Ww(n){return n instanceof Wk}function Kk(n){let e=!1,t=0,i=!1,s;const r=xS(),o=v=>{var S;i||(m(new Wk(v)),(S=n.abort)==null||S.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>VT.isFocused()&&(n.networkMode==="always"||v0.isOnline())&&n.canRun(),u=()=>qk(n.networkMode)&&n.canRun(),p=v=>{var S;i||(i=!0,(S=n.onSuccess)==null||S.call(n,v),s==null||s(),r.resolve(v))},m=v=>{var S;i||(i=!0,(S=n.onError)==null||S.call(n,v),s==null||s(),r.reject(v))},g=()=>new Promise(v=>{var S;s=x=>{(i||c())&&v(x)},(S=n.onPause)==null||S.call(n)}).then(()=>{var v;s=void 0,i||(v=n.onContinue)==null||v.call(n)}),w=()=>{if(i)return;let v;const S=t===0?n.initialPromise:void 0;try{v=S??n.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(p).catch(x=>{var M;if(i)return;const C=n.retry??(lu?0:3),_=n.retryDelay??zH,A=typeof _=="function"?_(t,x):_,P=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,x);if(e||!P){m(x);return}t++,(M=n.onFail)==null||M.call(n,t,x),UH(A).then(()=>c()?void 0:g()).then(()=>{e?m(x):w()})})};return{promise:r,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?w():g().then(w),r)}}var jH=n=>setTimeout(n,0);function GH(){let n=[],e=0,t=a=>{a()},i=a=>{a()},s=jH;const r=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{r(()=>{a(...l)})},schedule:r,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{s=a}}}var Vt=GH(),Ol,cM,Yk=(cM=class{constructor(){b(this,Ol)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gS(this.gcTime)&&T(this,Ol,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(lu?1/0:5*60*1e3))}clearGcTimeout(){d(this,Ol)&&(clearTimeout(d(this,Ol)),T(this,Ol,void 0))}},Ol=new WeakMap,cM),Pd,Ul,Di,$l,gn,im,Vl,ls,Ar,uM,qH=(uM=class extends Yk{constructor(e){super();b(this,ls);b(this,Pd);b(this,Ul);b(this,Di);b(this,$l);b(this,gn);b(this,im);b(this,Vl);T(this,Vl,!1),T(this,im,e.defaultOptions),this.setOptions(e.options),this.observers=[],T(this,$l,e.client),T(this,Di,d(this,$l).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,T(this,Pd,WH(this.options)),this.state=e.state??d(this,Pd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,gn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,im),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,Di).remove(this)}setData(e,t){const i=vS(this.state.data,e,this.options);return R(this,ls,Ar).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){R(this,ls,Ar).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=d(this,gn))==null?void 0:i.promise;return(s=d(this,gn))==null||s.cancel(e),t?t.then(kn).catch(kn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Pd))}isActive(){return this.observers.some(e=>_s(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$T||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>nl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Hk(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,gn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,gn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,Di).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,gn)&&(d(this,Vl)?d(this,gn).cancel({revert:!0}):d(this,gn).cancelRetry()),this.scheduleGc()),d(this,Di).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||R(this,ls,Ar).call(this,{type:"invalidate"})}fetch(e,t){var c,u,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,gn))return d(this,gn).continueRetry(),d(this,gn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(T(this,Vl,!0),i.signal)})},r=()=>{const m=jk(this.options,t),w=(()=>{const v={client:d(this,$l),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return T(this,Vl,!1),this.options.persister?this.options.persister(m,w,this):m(w)},a=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,$l),state:this.state,fetchFn:r};return s(m),m})();(c=this.options.behavior)==null||c.onFetch(a,this),T(this,Ul,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&R(this,ls,Ar).call(this,{type:"fetch",meta:(p=a.fetchOptions)==null?void 0:p.meta});const l=m=>{var g,w,v,S;Ww(m)&&m.silent||R(this,ls,Ar).call(this,{type:"error",error:m}),Ww(m)||((w=(g=d(this,Di).config).onError)==null||w.call(g,m,this),(S=(v=d(this,Di).config).onSettled)==null||S.call(v,this.state.data,m,this)),this.scheduleGc()};return T(this,gn,Kk({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var g,w,v,S;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(w=(g=d(this,Di).config).onSuccess)==null||w.call(g,m,this),(S=(v=d(this,Di).config).onSettled)==null||S.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,g)=>{R(this,ls,Ar).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{R(this,ls,Ar).call(this,{type:"pause"})},onContinue:()=>{R(this,ls,Ar).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,gn).start()}},Pd=new WeakMap,Ul=new WeakMap,Di=new WeakMap,$l=new WeakMap,gn=new WeakMap,im=new WeakMap,Vl=new WeakMap,ls=new WeakSet,Ar=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Jk(i.data,this.options),fetchMeta:e.meta??null};case"success":return T(this,Ul,void 0),{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Ww(s)&&s.revert&&d(this,Ul)?{...d(this,Ul),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),Vt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),d(this,Di).notify({query:this,type:"updated",action:e})})},uM);function Jk(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qk(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function WH(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Bs,dM,KH=(dM=class extends dh{constructor(e={}){super();b(this,Bs);this.config=e,T(this,Bs,new Map)}build(e,t,i){const s=t.queryKey,r=t.queryHash??UT(s,t);let o=this.get(r);return o||(o=new qH({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){d(this,Bs).has(e.queryHash)||(d(this,Bs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,Bs).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,Bs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,Bs).get(e)}getAll(){return[...d(this,Bs).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>I1(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>I1(e,i)):t}notify(e){Vt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Vt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Bs=new WeakMap,dM),Hs,Tn,Bl,zs,zo,fM,YH=(fM=class extends Yk{constructor(e){super();b(this,zs);b(this,Hs);b(this,Tn);b(this,Bl);this.mutationId=e.mutationId,T(this,Tn,e.mutationCache),T(this,Hs,[]),this.state=e.state||Xk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,Hs).includes(e)||(d(this,Hs).push(e),this.clearGcTimeout(),d(this,Tn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){T(this,Hs,d(this,Hs).filter(t=>t!==e)),this.scheduleGc(),d(this,Tn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,Hs).length||(this.state.status==="pending"?this.scheduleGc():d(this,Tn).remove(this))}continue(){var e;return((e=d(this,Bl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,o,a,l,c,u,p,m,g,w,v,S,x,C,_,A,P,M,N,I;const t=()=>{R(this,zs,zo).call(this,{type:"continue"})};T(this,Bl,Kk({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,D)=>{R(this,zs,zo).call(this,{type:"failed",failureCount:k,error:D})},onPause:()=>{R(this,zs,zo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,Tn).canRun(this)}));const i=this.state.status==="pending",s=!d(this,Bl).canStart();try{if(i)t();else{R(this,zs,zo).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(r=d(this,Tn).config).onMutate)==null?void 0:o.call(r,e,this));const D=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));D!==this.state.context&&R(this,zs,zo).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const k=await d(this,Bl).start();return await((u=(c=d(this,Tn).config).onSuccess)==null?void 0:u.call(c,k,e,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,k,e,this.state.context)),await((w=(g=d(this,Tn).config).onSettled)==null?void 0:w.call(g,k,null,this.state.variables,this.state.context,this)),await((S=(v=this.options).onSettled)==null?void 0:S.call(v,k,null,e,this.state.context)),R(this,zs,zo).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(x=d(this,Tn).config).onError)==null?void 0:C.call(x,k,e,this.state.context,this)),await((A=(_=this.options).onError)==null?void 0:A.call(_,k,e,this.state.context)),await((M=(P=d(this,Tn).config).onSettled)==null?void 0:M.call(P,void 0,k,this.state.variables,this.state.context,this)),await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,k,e,this.state.context)),k}finally{R(this,zs,zo).call(this,{type:"error",error:k})}}finally{d(this,Tn).runNext(this)}}},Hs=new WeakMap,Tn=new WeakMap,Bl=new WeakMap,zs=new WeakSet,zo=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Vt.batch(()=>{d(this,Hs).forEach(i=>{i.onMutationUpdate(e)}),d(this,Tn).notify({mutation:this,type:"updated",action:e})})},fM);function Xk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lr,cs,sm,hM,JH=(hM=class extends dh{constructor(e={}){super();b(this,Lr);b(this,cs);b(this,sm);this.config=e,T(this,Lr,new Set),T(this,cs,new Map),T(this,sm,0)}build(e,t,i){const s=new YH({mutationCache:this,mutationId:++zt(this,sm)._,options:e.defaultMutationOptions(t),state:i});return this.add(s),s}add(e){d(this,Lr).add(e);const t=by(e);if(typeof t=="string"){const i=d(this,cs).get(t);i?i.push(e):d(this,cs).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,Lr).delete(e)){const t=by(e);if(typeof t=="string"){const i=d(this,cs).get(t);if(i)if(i.length>1){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}else i[0]===e&&d(this,cs).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=by(e);if(typeof t=="string"){const i=d(this,cs).get(t),s=i==null?void 0:i.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){var i;const t=by(e);if(typeof t=="string"){const s=(i=d(this,cs).get(t))==null?void 0:i.find(r=>r!==e&&r.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vt.batch(()=>{d(this,Lr).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,Lr).clear(),d(this,cs).clear()})}getAll(){return Array.from(d(this,Lr))}find(e){const t={exact:!0,...e};return this.getAll().find(i=>k1(t,i))}findAll(e={}){return this.getAll().filter(t=>k1(e,t))}notify(e){Vt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Vt.batch(()=>Promise.all(e.map(t=>t.continue().catch(kn))))}},Lr=new WeakMap,cs=new WeakMap,sm=new WeakMap,hM);function by(n){var e;return(e=n.options.scope)==null?void 0:e.id}function F1(n){return{onFetch:(e,t)=>{var u,p,m,g,w;const i=e.options,s=(m=(p=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,r=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const S=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=jk(e.options,e.fetchOptions),C=async(_,A,P)=>{if(v)return Promise.reject();if(A==null&&_.pages.length)return Promise.resolve(_);const N=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:A,direction:P?"backward":"forward",meta:e.options.meta};return S(L),L})(),I=await x(N),{maxPages:k}=e.options,D=P?VH:$H;return{pages:D(_.pages,I,k),pageParams:D(_.pageParams,A,k)}};if(s&&r.length){const _=s==="backward",A=_?XH:O1,P={pages:r,pageParams:o},M=A(i,P);a=await C(P,M,_)}else{const _=n??r.length;do{const A=l===0?o[0]??i.initialPageParam:O1(i,a);if(l>0&&A==null)break;a=await C(a,A),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function O1(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function XH(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var Ct,ta,na,Md,Nd,ia,Id,kd,pM,QH=(pM=class{constructor(n={}){b(this,Ct);b(this,ta);b(this,na);b(this,Md);b(this,Nd);b(this,ia);b(this,Id);b(this,kd);T(this,Ct,n.queryCache||new KH),T(this,ta,n.mutationCache||new JH),T(this,na,n.defaultOptions||{}),T(this,Md,new Map),T(this,Nd,new Map),T(this,ia,0)}mount(){zt(this,ia)._++,d(this,ia)===1&&(T(this,Id,VT.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,Ct).onFocus())})),T(this,kd,v0.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,Ct).onOnline())})))}unmount(){var n,e;zt(this,ia)._--,d(this,ia)===0&&((n=d(this,Id))==null||n.call(this),T(this,Id,void 0),(e=d(this,kd))==null||e.call(this),T(this,kd,void 0))}isFetching(n){return d(this,Ct).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,ta).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,Ct).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,Ct).build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(nl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return d(this,Ct).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=d(this,Ct).get(i.queryHash),r=s==null?void 0:s.state.data,o=OH(e,r);if(o!==void 0)return d(this,Ct).build(this,i).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Vt.batch(()=>d(this,Ct).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,Ct).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,Ct);Vt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,Ct);return Vt.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=Vt.batch(()=>d(this,Ct).findAll(n).map(s=>s.cancel(t)));return Promise.all(i).then(kn).catch(kn)}invalidateQueries(n,e={}){return Vt.batch(()=>(d(this,Ct).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=Vt.batch(()=>d(this,Ct).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let r=s.fetch(void 0,t);return t.throwOnError||(r=r.catch(kn)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(i).then(kn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,Ct).build(this,e);return t.isStaleByTime(nl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(kn).catch(kn)}fetchInfiniteQuery(n){return n.behavior=F1(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(kn).catch(kn)}ensureInfiniteQueryData(n){return n.behavior=F1(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return v0.isOnline()?d(this,ta).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,Ct)}getMutationCache(){return d(this,ta)}getDefaultOptions(){return d(this,na)}setDefaultOptions(n){T(this,na,n)}setQueryDefaults(n,e){d(this,Md).set(cu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,Md).values()],t={};return e.forEach(i=>{Wp(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){d(this,Nd).set(cu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,Nd).values()],t={};return e.forEach(i=>{Wp(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,na).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=UT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$T&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,na).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,Ct).clear(),d(this,ta).clear()}},Ct=new WeakMap,ta=new WeakMap,na=new WeakMap,Md=new WeakMap,Nd=new WeakMap,ia=new WeakMap,Id=new WeakMap,kd=new WeakMap,pM),Gn,Fe,rm,An,Hl,Dd,sa,ra,om,Ld,Fd,zl,jl,oa,Od,je,Gh,wS,CS,SS,ES,_S,TS,AS,Qk,mM,ZH=(mM=class extends dh{constructor(e,t){super();b(this,je);b(this,Gn);b(this,Fe);b(this,rm);b(this,An);b(this,Hl);b(this,Dd);b(this,sa);b(this,ra);b(this,om);b(this,Ld);b(this,Fd);b(this,zl);b(this,jl);b(this,oa);b(this,Od,new Set);this.options=t,T(this,Gn,e),T(this,ra,null),T(this,sa,xS()),this.options.experimental_prefetchInRender||d(this,sa).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,Fe).addObserver(this),U1(d(this,Fe),this.options)?R(this,je,Gh).call(this):this.updateResult(),R(this,je,ES).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bS(d(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bS(d(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,R(this,je,_S).call(this),R(this,je,TS).call(this),d(this,Fe).removeObserver(this)}setOptions(e){const t=this.options,i=d(this,Fe);if(this.options=d(this,Gn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _s(this.options.enabled,d(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");R(this,je,AS).call(this),d(this,Fe).setOptions(this.options),t._defaulted&&!y0(this.options,t)&&d(this,Gn).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,Fe),observer:this});const s=this.hasListeners();s&&$1(d(this,Fe),i,this.options,t)&&R(this,je,Gh).call(this),this.updateResult(),s&&(d(this,Fe)!==i||_s(this.options.enabled,d(this,Fe))!==_s(t.enabled,d(this,Fe))||nl(this.options.staleTime,d(this,Fe))!==nl(t.staleTime,d(this,Fe)))&&R(this,je,wS).call(this);const r=R(this,je,CS).call(this);s&&(d(this,Fe)!==i||_s(this.options.enabled,d(this,Fe))!==_s(t.enabled,d(this,Fe))||r!==d(this,oa))&&R(this,je,SS).call(this,r)}getOptimisticResult(e){const t=d(this,Gn).getQueryCache().build(d(this,Gn),e),i=this.createResult(t,e);return tz(this,i)&&(T(this,An,i),T(this,Dd,this.options),T(this,Hl,d(this,Fe).state)),i}getCurrentResult(){return d(this,An)}trackResult(e,t){return new Proxy(e,{get:(i,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(i,s))})}trackProp(e){d(this,Od).add(e)}getCurrentQuery(){return d(this,Fe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=d(this,Gn).defaultQueryOptions(e),i=d(this,Gn).getQueryCache().build(d(this,Gn),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return R(this,je,Gh).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,An)))}createResult(e,t){var k;const i=d(this,Fe),s=this.options,r=d(this,An),o=d(this,Hl),a=d(this,Dd),c=e!==i?e.state:d(this,rm),{state:u}=e;let p={...u},m=!1,g;if(t._optimisticResults){const D=this.hasListeners(),L=!D&&U1(e,t),$=D&&$1(e,i,t,s);(L||$)&&(p={...p,...Jk(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:S}=p;g=p.data;let x=!1;if(t.placeholderData!==void 0&&g===void 0&&S==="pending"){let D;r!=null&&r.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(D=r.data,x=!0):D=typeof t.placeholderData=="function"?t.placeholderData((k=d(this,Fd))==null?void 0:k.state.data,d(this,Fd)):t.placeholderData,D!==void 0&&(S="success",g=vS(r==null?void 0:r.data,D,t),m=!0)}if(t.select&&g!==void 0&&!x)if(r&&g===(o==null?void 0:o.data)&&t.select===d(this,om))g=d(this,Ld);else try{T(this,om,t.select),g=t.select(g),g=vS(r==null?void 0:r.data,g,t),T(this,Ld,g),T(this,ra,null)}catch(D){T(this,ra,D)}d(this,ra)&&(w=d(this,ra),g=d(this,Ld),v=Date.now(),S="error");const C=p.fetchStatus==="fetching",_=S==="pending",A=S==="error",P=_&&C,M=g!==void 0,I={status:S,fetchStatus:p.fetchStatus,isPending:_,isSuccess:S==="success",isError:A,isInitialLoading:P,isLoading:P,data:g,dataUpdatedAt:p.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>c.dataUpdateCount||p.errorUpdateCount>c.errorUpdateCount,isFetching:C,isRefetching:C&&!_,isLoadingError:A&&!M,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:A&&M,isStale:BT(e,t),refetch:this.refetch,promise:d(this,sa)};if(this.options.experimental_prefetchInRender){const D=j=>{I.status==="error"?j.reject(I.error):I.data!==void 0&&j.resolve(I.data)},L=()=>{const j=T(this,sa,I.promise=xS());D(j)},$=d(this,sa);switch($.status){case"pending":e.queryHash===i.queryHash&&D($);break;case"fulfilled":(I.status==="error"||I.data!==$.value)&&L();break;case"rejected":(I.status!=="error"||I.error!==$.reason)&&L();break}}return I}updateResult(){const e=d(this,An),t=this.createResult(d(this,Fe),this.options);if(T(this,Hl,d(this,Fe).state),T(this,Dd,this.options),d(this,Hl).data!==void 0&&T(this,Fd,d(this,Fe)),y0(t,e))return;T(this,An,t);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!d(this,Od).size)return!0;const o=new Set(r??d(this,Od));return this.options.throwOnError&&o.add("error"),Object.keys(d(this,An)).some(a=>{const l=a;return d(this,An)[l]!==e[l]&&o.has(l)})};R(this,je,Qk).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&R(this,je,ES).call(this)}},Gn=new WeakMap,Fe=new WeakMap,rm=new WeakMap,An=new WeakMap,Hl=new WeakMap,Dd=new WeakMap,sa=new WeakMap,ra=new WeakMap,om=new WeakMap,Ld=new WeakMap,Fd=new WeakMap,zl=new WeakMap,jl=new WeakMap,oa=new WeakMap,Od=new WeakMap,je=new WeakSet,Gh=function(e){R(this,je,AS).call(this);let t=d(this,Fe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(kn)),t},wS=function(){R(this,je,_S).call(this);const e=nl(this.options.staleTime,d(this,Fe));if(lu||d(this,An).isStale||!gS(e))return;const i=Hk(d(this,An).dataUpdatedAt,e)+1;T(this,zl,setTimeout(()=>{d(this,An).isStale||this.updateResult()},i))},CS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,Fe)):this.options.refetchInterval)??!1},SS=function(e){R(this,je,TS).call(this),T(this,oa,e),!(lu||_s(this.options.enabled,d(this,Fe))===!1||!gS(d(this,oa))||d(this,oa)===0)&&T(this,jl,setInterval(()=>{(this.options.refetchIntervalInBackground||VT.isFocused())&&R(this,je,Gh).call(this)},d(this,oa)))},ES=function(){R(this,je,wS).call(this),R(this,je,SS).call(this,R(this,je,CS).call(this))},_S=function(){d(this,zl)&&(clearTimeout(d(this,zl)),T(this,zl,void 0))},TS=function(){d(this,jl)&&(clearInterval(d(this,jl)),T(this,jl,void 0))},AS=function(){const e=d(this,Gn).getQueryCache().build(d(this,Gn),this.options);if(e===d(this,Fe))return;const t=d(this,Fe);T(this,Fe,e),T(this,rm,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Qk=function(e){Vt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(d(this,An))}),d(this,Gn).getQueryCache().notify({query:d(this,Fe),type:"observerResultsUpdated"})})},mM);function ez(n,e){return _s(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function U1(n,e){return ez(n,e)||n.state.data!==void 0&&bS(n,e,e.refetchOnMount)}function bS(n,e,t){if(_s(e.enabled,n)!==!1&&nl(e.staleTime,n)!=="static"){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&BT(n,e)}return!1}function $1(n,e,t,i){return(n!==e||_s(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&BT(n,t)}function BT(n,e){return _s(e.enabled,n)!==!1&&n.isStaleByTime(nl(e.staleTime,n))}function tz(n,e){return!y0(n.getCurrentResult(),e)}var aa,la,qn,Fr,Co,iv,RS,gM,nz=(gM=class extends dh{constructor(t,i){super();b(this,Co);b(this,aa);b(this,la);b(this,qn);b(this,Fr);T(this,aa,t),this.setOptions(i),this.bindMethods(),R(this,Co,iv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const i=this.options;this.options=d(this,aa).defaultMutationOptions(t),y0(this.options,i)||d(this,aa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,qn),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&cu(i.mutationKey)!==cu(this.options.mutationKey)?this.reset():((s=d(this,qn))==null?void 0:s.state.status)==="pending"&&d(this,qn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=d(this,qn))==null||t.removeObserver(this)}onMutationUpdate(t){R(this,Co,iv).call(this),R(this,Co,RS).call(this,t)}getCurrentResult(){return d(this,la)}reset(){var t;(t=d(this,qn))==null||t.removeObserver(this),T(this,qn,void 0),R(this,Co,iv).call(this),R(this,Co,RS).call(this)}mutate(t,i){var s;return T(this,Fr,i),(s=d(this,qn))==null||s.removeObserver(this),T(this,qn,d(this,aa).getMutationCache().build(d(this,aa),this.options)),d(this,qn).addObserver(this),d(this,qn).execute(t)}},aa=new WeakMap,la=new WeakMap,qn=new WeakMap,Fr=new WeakMap,Co=new WeakSet,iv=function(){var i;const t=((i=d(this,qn))==null?void 0:i.state)??Xk();T(this,la,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},RS=function(t){Vt.batch(()=>{var i,s,r,o,a,l,c,u;if(d(this,Fr)&&this.hasListeners()){const p=d(this,la).variables,m=d(this,la).context;(t==null?void 0:t.type)==="success"?((s=(i=d(this,Fr)).onSuccess)==null||s.call(i,t.data,p,m),(o=(r=d(this,Fr)).onSettled)==null||o.call(r,t.data,null,p,m)):(t==null?void 0:t.type)==="error"&&((l=(a=d(this,Fr)).onError)==null||l.call(a,t.error,p,m),(u=(c=d(this,Fr)).onSettled)==null||u.call(c,void 0,t.error,p,m))}this.listeners.forEach(p=>{p(d(this,la))})})},gM),Zk=E.createContext(void 0),HT=n=>{const e=E.useContext(Zk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},iz=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),y.jsx(Zk.Provider,{value:n,children:e})),eD=E.createContext(!1),sz=()=>E.useContext(eD);eD.Provider;function rz(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var oz=E.createContext(rz()),az=()=>E.useContext(oz),lz=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},cz=n=>{E.useEffect(()=>{n.clearReset()},[n])},uz=({result:n,errorResetBoundary:e,throwOnError:t,query:i,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&(s&&n.data===void 0||Gk(t,[n.error,i])),dz=n=>{if(n.suspense){const e=i=>i==="static"?i:Math.max(i??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...i)=>e(t(...i)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},fz=(n,e)=>n.isLoading&&n.isFetching&&!e,hz=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,V1=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function pz(n,e,t){var p,m,g,w,v;const i=sz(),s=az(),r=HT(),o=r.defaultQueryOptions(n);(m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=i?"isRestoring":"optimistic",dz(o),lz(o,s),cz(s);const a=!r.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),u=!i&&n.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(S=>{const x=u?l.subscribe(Vt.batchCalls(S)):kn;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),hz(o,c))throw V1(o,l,s);if(uz({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||w.call(g,o,c),o.experimental_prefetchInRender&&!lu&&fz(c,i)){const S=a?V1(o,l,s):(v=r.getQueryCache().get(o.queryHash))==null?void 0:v.promise;S==null||S.catch(kn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function mz(n,e){return pz(n,ZH)}function B1(n,e){const t=HT(),[i]=E.useState(()=>new nz(t,n));E.useEffect(()=>{i.setOptions(n)},[i,n]);const s=E.useSyncExternalStore(E.useCallback(o=>i.subscribe(Vt.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),r=E.useCallback((o,a)=>{i.mutate(o,a).catch(kn)},[i]);if(s.error&&Gk(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}var zT={};Object.defineProperty(zT,"__esModule",{value:!0});zT.parse=Sz;zT.serialize=Ez;const gz=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,yz=/^[\u0021-\u003A\u003C-\u007E]*$/,vz=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,xz=/^[\u0020-\u003A\u003D-\u007E]*$/,wz=Object.prototype.toString,Cz=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function Sz(n,e){const t=new Cz,i=n.length;if(i<2)return t;const s=(e==null?void 0:e.decode)||_z;let r=0;do{const o=n.indexOf("=",r);if(o===-1)break;const a=n.indexOf(";",r),l=a===-1?i:a;if(o>l){r=n.lastIndexOf(";",o-1)+1;continue}const c=H1(n,r,o),u=z1(n,o,c),p=n.slice(c,u);if(t[p]===void 0){let m=H1(n,o+1,l),g=z1(n,l,m);const w=s(n.slice(m,g));t[p]=w}r=l+1}while(r<i);return t}function H1(n,e,t){do{const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<t);return t}function z1(n,e,t){for(;e>t;){const i=n.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return t}function Ez(n,e,t){const i=(t==null?void 0:t.encode)||encodeURIComponent;if(!gz.test(n))throw new TypeError(`argument name is invalid: ${n}`);const s=i(e);if(!yz.test(s))throw new TypeError(`argument val is invalid: ${e}`);let r=n+"="+s;if(!t)return r;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);r+="; Max-Age="+t.maxAge}if(t.domain){if(!vz.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);r+="; Domain="+t.domain}if(t.path){if(!xz.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);r+="; Path="+t.path}if(t.expires){if(!Tz(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);r+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.partitioned&&(r+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"none":r+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return r}function _z(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function Tz(n){return wz.call(n)==="[object Date]"}var j1="popstate";function Az(n={}){function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return PS("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Kp(s)}return Rz(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ns(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bz(){return Math.random().toString(36).substring(2,10)}function G1(n,e){return{usr:n.state,key:n.key,idx:e}}function PS(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?fh(e):e,state:t,key:e&&e.key||i||bz()}}function Kp({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function fh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Rz(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function p(){a="POP";let S=u(),x=S==null?null:S-c;c=S,l&&l({action:a,location:v.location,delta:x})}function m(S,x){a="PUSH";let C=PS(v.location,S,x);c=u()+1;let _=G1(C,c),A=v.createHref(C);try{o.pushState(_,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(A)}r&&l&&l({action:a,location:v.location,delta:1})}function g(S,x){a="REPLACE";let C=PS(v.location,S,x);c=u();let _=G1(C,c),A=v.createHref(C);o.replaceState(_,"",A),r&&l&&l({action:a,location:v.location,delta:0})}function w(S){return Pz(S)}let v={get action(){return a},get location(){return n(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(j1,p),l=S,()=>{s.removeEventListener(j1,p),l=null}},createHref(S){return e(s,S)},createURL:w,encodeLocation(S){let x=w(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(S){return o.go(S)}};return v}function Pz(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Kp(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function tD(n,e,t="/"){return Mz(n,e,t,!1)}function Mz(n,e,t,i){let s=typeof e=="string"?fh(e):e,r=Mo(s.pathname||"/",t);if(r==null)return null;let o=nD(n);Nz(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Hz(r);a=Vz(o[l],c,i)}return a}function nD(n,e=[],t=[],i=""){let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(ht(l.relativePath.startsWith(i),`Absolute route path "${l.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(i.length));let c=wo([i,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(ht(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),nD(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:Uz(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of iD(r.path))s(r,o,l)}),e}function iD(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=iD(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Nz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$z(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Iz=/^:[\w-]+$/,kz=3,Dz=2,Lz=1,Fz=10,Oz=-2,q1=n=>n==="*";function Uz(n,e){let t=n.split("/"),i=t.length;return t.some(q1)&&(i+=Oz),e&&(i+=Dz),t.filter(s=>!q1(s)).reduce((s,r)=>s+(Iz.test(r)?kz:r===""?Lz:Fz),i)}function $z(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function Vz(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",p=x0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!p&&c&&t&&!i[i.length-1].route.index&&(p=x0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:wo([r,p.pathname]),pathnameBase:qz(wo([r,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(r=wo([r,p.pathnameBase]))}return o}function x0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Bz(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:p},m)=>{if(u==="*"){let w=a[m]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[m];return p&&!g?c[u]=void 0:c[u]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function Bz(n,e=!1,t=!0){Ns(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Hz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ns(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Mo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function zz(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?fh(n):n;return{pathname:t?t.startsWith("/")?t:jz(t,e):e,search:Wz(i),hash:Kz(s)}}function jz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Kw(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jT(n){let e=Gz(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function GT(n,e,t,i=!1){let s;typeof n=="string"?s=fh(n):(s={...n},ht(!s.pathname||!s.pathname.includes("?"),Kw("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),Kw("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),Kw("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=zz(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var wo=n=>n.join("/").replace(/\/\/+/g,"/"),qz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Kz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Yz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var sD=["POST","PUT","PATCH","DELETE"];new Set(sD);var Jz=["GET",...sD];new Set(Jz);var hh=E.createContext(null);hh.displayName="DataRouter";var Lx=E.createContext(null);Lx.displayName="DataRouterState";var rD=E.createContext({isTransitioning:!1});rD.displayName="ViewTransition";var Xz=E.createContext(new Map);Xz.displayName="Fetchers";var Qz=E.createContext(null);Qz.displayName="Await";var Ds=E.createContext(null);Ds.displayName="Navigation";var jg=E.createContext(null);jg.displayName="Location";var Qi=E.createContext({outlet:null,matches:[],isDataRoute:!1});Qi.displayName="Route";var qT=E.createContext(null);qT.displayName="RouteError";function Zz(n,{relative:e}={}){ht(ph(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=E.useContext(Ds),{hash:s,pathname:r,search:o}=Gg(n,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:wo([t,r])),i.createHref({pathname:a,search:o,hash:s})}function ph(){return E.useContext(jg)!=null}function Lo(){return ht(ph(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(jg).location}var oD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aD(n){E.useContext(Ds).static||E.useLayoutEffect(n)}function mh(){let{isDataRoute:n}=E.useContext(Qi);return n?m6():e6()}function e6(){ht(ph(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(hh),{basename:e,navigator:t}=E.useContext(Ds),{matches:i}=E.useContext(Qi),{pathname:s}=Lo(),r=JSON.stringify(jT(i)),o=E.useRef(!1);return aD(()=>{o.current=!0}),E.useCallback((l,c={})=>{if(Ns(o.current,oD),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=GT(l,JSON.parse(r),s,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:wo([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,r,s,n])}var t6=E.createContext(null);function n6(n){let e=E.useContext(Qi).outlet;return e&&E.createElement(t6.Provider,{value:n},e)}function i6(){let{matches:n}=E.useContext(Qi),e=n[n.length-1];return e?e.params:{}}function Gg(n,{relative:e}={}){let{matches:t}=E.useContext(Qi),{pathname:i}=Lo(),s=JSON.stringify(jT(t));return E.useMemo(()=>GT(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function s6(n,e){return lD(n,e)}function lD(n,e,t,i){var x;ht(ph(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=E.useContext(Ds),{matches:r}=E.useContext(Qi),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let C=u&&u.path||"";cD(l,!u||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Lo(),m;if(e){let C=typeof e=="string"?fh(e):e;ht(c==="/"||((x=C.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${C.pathname}" was given in the \`location\` prop.`),m=C}else m=p;let g=m.pathname||"/",w=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=tD(n,{pathname:w});Ns(u||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ns(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=c6(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:wo([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:wo([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),r,t,i);return e&&S?E.createElement(jg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function r6(){let n=p6(),e=Yz(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:r},"ErrorBoundary")," or"," ",E.createElement("code",{style:r},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,o)}var o6=E.createElement(r6,null),a6=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?E.createElement(Qi.Provider,{value:this.props.routeContext},E.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function l6({routeContext:n,match:e,children:t}){let i=E.useContext(hh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Qi.Provider,{value:n},t)}function c6(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,r=t==null?void 0:t.errors;if(r!=null){let l=s.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);ht(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:p}=t,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let p,m=!1,g=null,w=null;t&&(p=r&&c.route.id?r[c.route.id]:void 0,g=c.route.errorElement||o6,o&&(a<0&&u===0?(cD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,w=null):a===u&&(m=!0,w=c.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,u+1)),S=()=>{let x;return p?x=g:m?x=w:c.route.Component?x=E.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,E.createElement(l6,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?E.createElement(a6,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}function WT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u6(n){let e=E.useContext(hh);return ht(e,WT(n)),e}function d6(n){let e=E.useContext(Lx);return ht(e,WT(n)),e}function f6(n){let e=E.useContext(Qi);return ht(e,WT(n)),e}function KT(n){let e=f6(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function h6(){return KT("useRouteId")}function p6(){var i;let n=E.useContext(qT),e=d6("useRouteError"),t=KT("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function m6(){let{router:n}=u6("useNavigate"),e=KT("useNavigate"),t=E.useRef(!1);return aD(()=>{t.current=!0}),E.useCallback(async(s,r={})=>{Ns(t.current,oD),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var W1={};function cD(n,e,t){!e&&!W1[n]&&(W1[n]=!0,Ns(!1,t))}E.memo(g6);function g6({routes:n,future:e,state:t}){return lD(n,void 0,t,e)}function y6({to:n,replace:e,state:t,relative:i}){ht(ph(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(Ds);Ns(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=E.useContext(Qi),{pathname:o}=Lo(),a=mh(),l=GT(n,jT(r),o,i==="path"),c=JSON.stringify(l);return E.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:i})},[a,c,i,e,t]),null}function v6(n){return n6(n.context)}function $u(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x6({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1}){ht(!ph(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof t=="string"&&(t=fh(t));let{pathname:l="/",search:c="",hash:u="",state:p=null,key:m="default"}=t,g=E.useMemo(()=>{let w=Mo(l,o);return w==null?null:{location:{pathname:w,search:c,hash:u,state:p,key:m},navigationType:i}},[o,l,c,u,p,m,i]);return Ns(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:E.createElement(Ds.Provider,{value:a},E.createElement(jg.Provider,{children:e,value:g}))}function w6({children:n,location:e}){return s6(MS(n),e)}function MS(n,e=[]){let t=[];return E.Children.forEach(n,(i,s)=>{if(!E.isValidElement(i))return;let r=[...e,s];if(i.type===E.Fragment){t.push.apply(t,MS(i.props.children,r));return}ht(i.type===$u,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=MS(i.props.children,r)),t.push(o)}),t}var sv="get",rv="application/x-www-form-urlencoded";function Fx(n){return n!=null&&typeof n.tagName=="string"}function C6(n){return Fx(n)&&n.tagName.toLowerCase()==="button"}function S6(n){return Fx(n)&&n.tagName.toLowerCase()==="form"}function E6(n){return Fx(n)&&n.tagName.toLowerCase()==="input"}function _6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function T6(n,e){return n.button===0&&(!e||e==="_self")&&!_6(n)}var Ry=null;function A6(){if(Ry===null)try{new FormData(document.createElement("form"),0),Ry=!1}catch{Ry=!0}return Ry}var b6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yw(n){return n!=null&&!b6.has(n)?(Ns(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rv}"`),null):n}function R6(n,e){let t,i,s,r,o;if(S6(n)){let a=n.getAttribute("action");i=a?Mo(a,e):null,t=n.getAttribute("method")||sv,s=Yw(n.getAttribute("enctype"))||rv,r=new FormData(n)}else if(C6(n)||E6(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(i=l?Mo(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||sv,s=Yw(n.getAttribute("formenctype"))||Yw(a.getAttribute("enctype"))||rv,r=new FormData(a,n),!A6()){let{name:c,type:u,value:p}=n;if(u==="image"){let m=c?`${c}.`:"";r.append(`${m}x`,"0"),r.append(`${m}y`,"0")}else c&&r.append(c,p)}}else{if(Fx(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sv,i=null,s=rv,o=n}return r&&s==="text/plain"&&(o=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:o}}function YT(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function P6(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M6(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function N6(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let o=await P6(r,t);return o.links?o.links():[]}return[]}));return L6(i.flat(1).filter(M6).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function K1(n,e,t,i,s,r){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?e.filter((l,c)=>{var p;let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function I6(n,e,{includeHydrateFallback:t}={}){return k6(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function k6(n){return[...new Set(n)]}function D6(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function L6(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(D6(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var F6=new Set([100,101,204,205]);function O6(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Mo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function uD(){let n=E.useContext(hh);return YT(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function U6(){let n=E.useContext(Lx);return YT(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var JT=E.createContext(void 0);JT.displayName="FrameworkContext";function dD(){let n=E.useContext(JT);return YT(n,"You must render this element inside a <HydratedRouter> element"),n}function $6(n,e){let t=E.useContext(JT),[i,s]=E.useState(!1),[r,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:p}=e,m=E.useRef(null);E.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=x=>{x.forEach(C=>{o(C.isIntersecting)})},S=new IntersectionObserver(v,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),E.useEffect(()=>{if(i){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[i]);let g=()=>{s(!0)},w=()=>{s(!1),o(!1)};return t?n!=="intent"?[r,m,{}]:[r,m,{onFocus:Lh(a,g),onBlur:Lh(l,w),onMouseEnter:Lh(c,g),onMouseLeave:Lh(u,w),onTouchStart:Lh(p,g)}]:[!1,m,{}]}function Lh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function V6({page:n,...e}){let{router:t}=uD(),i=E.useMemo(()=>tD(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?E.createElement(H6,{page:n,matches:i,...e}):null}function B6(n){let{manifest:e,routeModules:t}=dD(),[i,s]=E.useState([]);return E.useEffect(()=>{let r=!1;return N6(n,e,t).then(o=>{r||s(o)}),()=>{r=!0}},[n,e,t]),i}function H6({page:n,matches:e,...t}){let i=Lo(),{manifest:s,routeModules:r}=dD(),{basename:o}=uD(),{loaderData:a,matches:l}=U6(),c=E.useMemo(()=>K1(n,e,l,s,i,"data"),[n,e,l,s,i]),u=E.useMemo(()=>K1(n,e,l,s,i,"assets"),[n,e,l,s,i]),p=E.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let w=new Set,v=!1;if(e.forEach(x=>{var _;let C=s.routes[x.route.id];!C||!C.hasLoader||(!c.some(A=>A.route.id===x.route.id)&&x.route.id in a&&((_=r[x.route.id])!=null&&_.shouldRevalidate)||C.hasClientLoader?v=!0:w.add(x.route.id))}),w.size===0)return[];let S=O6(n,o);return v&&w.size>0&&S.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[S.pathname+S.search]},[o,a,i,s,c,e,n,r]),m=E.useMemo(()=>I6(u,s),[u,s]),g=B6(u);return E.createElement(E.Fragment,null,p.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),g.map(({key:w,link:v})=>E.createElement("link",{key:w,...v})))}function z6(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var fD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fD&&(window.__reactRouterVersion="7.6.3")}catch{}function j6({basename:n,children:e,window:t}){let i=E.useRef();i.current==null&&(i.current=Az({window:t,v5Compat:!0}));let s=i.current,[r,o]=E.useState({action:s.action,location:s.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>s.listen(a),[s,a]),E.createElement(x6,{basename:n,children:e,location:r.location,navigationType:r.action,navigator:s})}var hD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yp=E.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p,...m},g){let{basename:w}=E.useContext(Ds),v=typeof c=="string"&&hD.test(c),S,x=!1;if(typeof c=="string"&&v&&(S=c,fD))try{let k=new URL(window.location.href),D=c.startsWith("//")?new URL(k.protocol+c):new URL(c),L=Mo(D.pathname,w);D.origin===k.origin&&L!=null?c=L+D.search+D.hash:x=!0}catch{Ns(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Zz(c,{relative:s}),[_,A,P]=$6(i,m),M=K6(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:p});function N(k){e&&e(k),k.defaultPrevented||M(k)}let I=E.createElement("a",{...m,...P,href:S||C,onClick:x||r?e:N,ref:z6(g,A),target:l,"data-discover":!v&&t==="render"?"true":void 0});return _&&!v?E.createElement(E.Fragment,null,I,E.createElement(V6,{page:C})):I});Yp.displayName="Link";var G6=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:o,viewTransition:a,children:l,...c},u){let p=Gg(o,{relative:c.relative}),m=Lo(),g=E.useContext(Lx),{navigator:w,basename:v}=E.useContext(Ds),S=g!=null&&Z6(p)&&a===!0,x=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,C=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(C=C.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&v&&(_=Mo(_,v)||_);const A=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let P=C===x||!s&&C.startsWith(x)&&C.charAt(A)==="/",M=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),N={isActive:P,isPending:M,isTransitioning:S},I=P?e:void 0,k;typeof i=="function"?k=i(N):k=[i,P?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof r=="function"?r(N):r;return E.createElement(Yp,{...c,"aria-current":I,className:k,ref:u,style:D,to:o,viewTransition:a},typeof l=="function"?l(N):l)});G6.displayName="NavLink";var q6=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:o=sv,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:p,...m},g)=>{let w=X6(),v=Q6(a,{relative:c}),S=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&hD.test(a),C=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let A=_.nativeEvent.submitter,P=(A==null?void 0:A.getAttribute("formmethod"))||o;w(A||_.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:s,state:r,relative:c,preventScrollReset:u,viewTransition:p})};return E.createElement("form",{ref:g,method:S,action:v,onSubmit:i?l:C,...m,"data-discover":!x&&n==="render"?"true":void 0})});q6.displayName="Form";function W6(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(n){let e=E.useContext(hh);return ht(e,W6(n)),e}function K6(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=mh(),l=Lo(),c=Gg(n,{relative:r});return E.useCallback(u=>{if(T6(u,e)){u.preventDefault();let p=t!==void 0?t:Kp(l)===Kp(c);a(n,{replace:p,state:i,preventScrollReset:s,relative:r,viewTransition:o})}},[l,a,c,t,i,e,n,s,r,o])}var Y6=0,J6=()=>`__${String(++Y6)}__`;function X6(){let{router:n}=pD("useSubmit"),{basename:e}=E.useContext(Ds),t=h6();return E.useCallback(async(i,s={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=R6(i,e);if(s.navigate===!1){let u=s.fetcherKey||J6();await n.fetch(u,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await n.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function Q6(n,{relative:e}={}){let{basename:t}=E.useContext(Ds),i=E.useContext(Qi);ht(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Gg(n||".",{relative:e})},o=Lo();if(n==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let u=a.toString();r.search=u?`?${u}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:wo([t,r.pathname])),Kp(r)}function Z6(n,e={}){let t=E.useContext(rD);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=pD("useViewTransitionState"),s=Gg(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=Mo(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Mo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return x0(s.pathname,o)!=null||x0(s.pathname,r)!=null}[...F6];const mD=E.createContext(void 0);function ej({children:n}){const[e,t]=E.useState(null),[i,s]=E.useState(!1),c={user:e,isLoading:i,isAuthenticated:!!e,signIn:async(u,p)=>{const m={id:"mock-user-id",email:u,name:u.split("@")[0]};return t(m),{success:!0}},signUp:async(u,p)=>{const m={id:"mock-user-id",email:u,name:u.split("@")[0]};return t(m),{success:!0}},signInWithGoogle:async()=>(t({id:"mock-google-user-id",email:"user@gmail.com",name:"Google User"}),{success:!0}),signOut:async()=>{t(null)}};return y.jsx(mD.Provider,{value:c,children:n})}function xl(){const n=E.useContext(mD);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function tj({redirectTo:n="/"}){const{isAuthenticated:e,isLoading:t}=xl();return t?y.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e?y.jsx(v6,{}):y.jsx(y6,{to:n,replace:!0})}const nj=_T("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),me=E.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},r)=>{const o=i?yB:"button";return y.jsx(o,{className:ye(nj({variant:e,size:t,className:n})),ref:r,...s})});me.displayName="Button";var Jw="focusScope.autoFocusOnMount",Xw="focusScope.autoFocusOnUnmount",Y1={bubbles:!1,cancelable:!0},ij="FocusScope",Ox=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...o}=n,[a,l]=E.useState(null),c=ii(s),u=ii(r),p=E.useRef(null),m=_e(e,v=>l(v)),g=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let v=function(_){if(g.paused||!a)return;const A=_.target;a.contains(A)?p.current=A:jo(p.current,{select:!0})},S=function(_){if(g.paused||!a)return;const A=_.relatedTarget;A!==null&&(a.contains(A)||jo(p.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const P of _)P.removedNodes.length>0&&jo(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",S);const C=new MutationObserver(x);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",S),C.disconnect()}}},[i,a,g.paused]),E.useEffect(()=>{if(a){X1.add(g);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(Jw,Y1);a.addEventListener(Jw,c),a.dispatchEvent(x),x.defaultPrevented||(sj(cj(gD(a)),{select:!0}),document.activeElement===v&&jo(a))}return()=>{a.removeEventListener(Jw,c),setTimeout(()=>{const x=new CustomEvent(Xw,Y1);a.addEventListener(Xw,u),a.dispatchEvent(x),x.defaultPrevented||jo(v??document.body,{select:!0}),a.removeEventListener(Xw,u),X1.remove(g)},0)}}},[a,c,u,g]);const w=E.useCallback(v=>{if(!t&&!i||g.paused)return;const S=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(S&&x){const C=v.currentTarget,[_,A]=rj(C);_&&A?!v.shiftKey&&x===A?(v.preventDefault(),t&&jo(_,{select:!0})):v.shiftKey&&x===_&&(v.preventDefault(),t&&jo(A,{select:!0})):x===C&&v.preventDefault()}},[t,i,g.paused]);return y.jsx(ue.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});Ox.displayName=ij;function sj(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(jo(i,{select:e}),document.activeElement!==t)return}function rj(n){const e=gD(n),t=J1(e,n),i=J1(e.reverse(),n);return[t,i]}function gD(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function J1(n,e){for(const t of n)if(!oj(t,{upTo:e}))return t}function oj(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function aj(n){return n instanceof HTMLInputElement&&"select"in n}function jo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&aj(n)&&e&&n.select()}}var X1=lj();function lj(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Q1(n,e),n.unshift(e)},remove(e){var t;n=Q1(n,e),(t=n[0])==null||t.resume()}}}function Q1(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function cj(n){return n.filter(e=>e.tagName!=="A")}var Qw=0;function XT(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Z1()),document.body.insertAdjacentElement("beforeend",n[1]??Z1()),Qw++,()=>{Qw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qw--}},[])}function Z1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var lr=function(){return lr=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lr.apply(this,arguments)};function yD(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function uj(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var ov="right-scroll-bar-position",av="width-before-scroll-bar",dj="with-scroll-bars-hidden",fj="--removed-body-scroll-bar-size";function Zw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function hj(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var pj=typeof window<"u"?E.useLayoutEffect:E.useEffect,eR=new WeakMap;function mj(n,e){var t=hj(null,function(i){return n.forEach(function(s){return Zw(s,i)})});return pj(function(){var i=eR.get(t);if(i){var s=new Set(i),r=new Set(n),o=t.current;s.forEach(function(a){r.has(a)||Zw(a,null)}),r.forEach(function(a){s.has(a)||Zw(a,o)})}eR.set(t,n)},[n]),t}function gj(n){return n}function yj(n,e){e===void 0&&(e=gj);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(i=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var l=function(){var u=o;o=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function vj(n){n===void 0&&(n={});var e=yj(null);return e.options=lr({async:!0,ssr:!1},n),e}var vD=function(n){var e=n.sideCar,t=yD(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,lr({},t))};vD.isSideCarExport=!0;function xj(n,e){return n.useMedium(e),vD}var xD=vj(),eC=function(){},Ux=E.forwardRef(function(n,e){var t=E.useRef(null),i=E.useState({onScrollCapture:eC,onWheelCapture:eC,onTouchMoveCapture:eC}),s=i[0],r=i[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,p=n.shards,m=n.sideCar,g=n.noRelative,w=n.noIsolation,v=n.inert,S=n.allowPinchZoom,x=n.as,C=x===void 0?"div":x,_=n.gapMode,A=yD(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=m,M=mj([t,e]),N=lr(lr({},A),s);return E.createElement(E.Fragment,null,u&&E.createElement(P,{sideCar:xD,removeScrollBar:c,shards:p,noRelative:g,noIsolation:w,inert:v,setCallbacks:r,allowPinchZoom:!!S,lockRef:t,gapMode:_}),o?E.cloneElement(E.Children.only(a),lr(lr({},N),{ref:M})):E.createElement(C,lr({},N,{className:l,ref:M}),a))});Ux.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ux.classNames={fullWidth:av,zeroRight:ov};var wj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cj(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=wj();return e&&n.setAttribute("nonce",e),n}function Sj(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Ej(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var _j=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Cj())&&(Sj(e,t),Ej(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Tj=function(){var n=_j();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},wD=function(){var n=Tj(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},Aj={left:0,top:0,right:0,gap:0},tC=function(n){return parseInt(n||"",10)||0},bj=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[tC(t),tC(i),tC(s)]},Rj=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Aj;var e=bj(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},Pj=wD(),yd="data-scroll-locked",Mj=function(n,e,t,i){var s=n.left,r=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(dj,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(yd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ov,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(av,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(ov," .").concat(ov,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(av," .").concat(av,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(yd,`] {
    `).concat(fj,": ").concat(a,`px;
  }
`)},tR=function(){var n=parseInt(document.body.getAttribute(yd)||"0",10);return isFinite(n)?n:0},Nj=function(){E.useEffect(function(){return document.body.setAttribute(yd,(tR()+1).toString()),function(){var n=tR()-1;n<=0?document.body.removeAttribute(yd):document.body.setAttribute(yd,n.toString())}},[])},Ij=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;Nj();var r=E.useMemo(function(){return Rj(s)},[s]);return E.createElement(Pj,{styles:Mj(r,!e,s,t?"":"!important")})},NS=!1;if(typeof window<"u")try{var Py=Object.defineProperty({},"passive",{get:function(){return NS=!0,!0}});window.addEventListener("test",Py,Py),window.removeEventListener("test",Py,Py)}catch{NS=!1}var Lu=NS?{passive:!1}:!1,kj=function(n){return n.tagName==="TEXTAREA"},CD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!kj(n)&&t[e]==="visible")},Dj=function(n){return CD(n,"overflowY")},Lj=function(n){return CD(n,"overflowX")},nR=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=SD(n,i);if(s){var r=ED(n,i),o=r[1],a=r[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},Fj=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},Oj=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},SD=function(n,e){return n==="v"?Dj(e):Lj(e)},ED=function(n,e){return n==="v"?Fj(e):Oj(e)},Uj=function(n,e){return n==="h"&&e==="rtl"?-1:1},$j=function(n,e,t,i,s){var r=Uj(n,window.getComputedStyle(e).direction),o=r*i,a=t.target,l=e.contains(a),c=!1,u=o>0,p=0,m=0;do{if(!a)break;var g=ED(n,a),w=g[0],v=g[1],S=g[2],x=v-S-r*w;(w||x)&&SD(n,a)&&(p+=x,m+=w);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(p)<1||!u&&Math.abs(m)<1)&&(c=!0),c},My=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},iR=function(n){return[n.deltaX,n.deltaY]},sR=function(n){return n&&"current"in n?n.current:n},Vj=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Bj=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Hj=0,Fu=[];function zj(n){var e=E.useRef([]),t=E.useRef([0,0]),i=E.useRef(),s=E.useState(Hj++)[0],r=E.useState(wD)[0],o=E.useRef(n);E.useEffect(function(){o.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var v=uj([n.lockRef.current],(n.shards||[]).map(sR),!0).filter(Boolean);return v.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=E.useCallback(function(v,S){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=My(v),C=t.current,_="deltaX"in v?v.deltaX:C[0]-x[0],A="deltaY"in v?v.deltaY:C[1]-x[1],P,M=v.target,N=Math.abs(_)>Math.abs(A)?"h":"v";if("touches"in v&&N==="h"&&M.type==="range")return!1;var I=nR(N,M);if(!I)return!0;if(I?P=N:(P=N==="v"?"h":"v",I=nR(N,M)),!I)return!1;if(!i.current&&"changedTouches"in v&&(_||A)&&(i.current=P),!P)return!0;var k=i.current||P;return $j(k,S,v,k==="h"?_:A)},[]),l=E.useCallback(function(v){var S=v;if(!(!Fu.length||Fu[Fu.length-1]!==r)){var x="deltaY"in S?iR(S):My(S),C=e.current.filter(function(P){return P.name===S.type&&(P.target===S.target||S.target===P.shadowParent)&&Vj(P.delta,x)})[0];if(C&&C.should){S.cancelable&&S.preventDefault();return}if(!C){var _=(o.current.shards||[]).map(sR).filter(Boolean).filter(function(P){return P.contains(S.target)}),A=_.length>0?a(S,_[0]):!o.current.noIsolation;A&&S.cancelable&&S.preventDefault()}}},[]),c=E.useCallback(function(v,S,x,C){var _={name:v,delta:S,target:x,should:C,shadowParent:jj(x)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(A){return A!==_})},1)},[]),u=E.useCallback(function(v){t.current=My(v),i.current=void 0},[]),p=E.useCallback(function(v){c(v.type,iR(v),v.target,a(v,n.lockRef.current))},[]),m=E.useCallback(function(v){c(v.type,My(v),v.target,a(v,n.lockRef.current))},[]);E.useEffect(function(){return Fu.push(r),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Lu),document.addEventListener("touchmove",l,Lu),document.addEventListener("touchstart",u,Lu),function(){Fu=Fu.filter(function(v){return v!==r}),document.removeEventListener("wheel",l,Lu),document.removeEventListener("touchmove",l,Lu),document.removeEventListener("touchstart",u,Lu)}},[]);var g=n.removeScrollBar,w=n.inert;return E.createElement(E.Fragment,null,w?E.createElement(r,{styles:Bj(s)}):null,g?E.createElement(Ij,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function jj(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Gj=xj(xD,zj);var $x=E.forwardRef(function(n,e){return E.createElement(Ux,lr({},n,{ref:e,sideCar:Gj}))});$x.classNames=Ux.classNames;var qj=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Ou=new WeakMap,Ny=new WeakMap,Iy={},nC=0,_D=function(n){return n&&(n.host||_D(n.parentNode))},Wj=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=_D(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Kj=function(n,e,t,i){var s=Wj(e,Array.isArray(n)?n:[n]);Iy[t]||(Iy[t]=new WeakMap);var r=Iy[t],o=[],a=new Set,l=new Set(s),c=function(p){!p||a.has(p)||(a.add(p),c(p.parentNode))};s.forEach(c);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(i),w=g!==null&&g!=="false",v=(Ou.get(m)||0)+1,S=(r.get(m)||0)+1;Ou.set(m,v),r.set(m,S),o.push(m),v===1&&w&&Ny.set(m,!0),S===1&&m.setAttribute(t,"true"),w||m.setAttribute(i,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return u(e),a.clear(),nC++,function(){o.forEach(function(p){var m=Ou.get(p)-1,g=r.get(p)-1;Ou.set(p,m),r.set(p,g),m||(Ny.has(p)||p.removeAttribute(i),Ny.delete(p)),g||p.removeAttribute(t)}),nC--,nC||(Ou=new WeakMap,Ou=new WeakMap,Ny=new WeakMap,Iy={})}},QT=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=qj(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live], script"))),Kj(i,s,t,"aria-hidden")):function(){return null}},Vx="Dialog",[TD,Rie]=Bn(Vx),[Yj,Ls]=TD(Vx),AD=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:s,onOpenChange:r,modal:o=!0}=n,a=E.useRef(null),l=E.useRef(null),[c,u]=xr({prop:i,defaultProp:s??!1,onChange:r,caller:Vx});return y.jsx(Yj,{scope:e,triggerRef:a,contentRef:l,contentId:mr(),titleId:mr(),descriptionId:mr(),open:c,onOpenChange:u,onOpenToggle:E.useCallback(()=>u(p=>!p),[u]),modal:o,children:t})};AD.displayName=Vx;var bD="DialogTrigger",RD=E.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Ls(bD,t),r=_e(e,s.triggerRef);return y.jsx(ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tA(s.open),...i,ref:r,onClick:J(n.onClick,s.onOpenToggle)})});RD.displayName=bD;var ZT="DialogPortal",[Jj,PD]=TD(ZT,{forceMount:void 0}),MD=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:s}=n,r=Ls(ZT,e);return y.jsx(Jj,{scope:e,forceMount:t,children:E.Children.map(i,o=>y.jsx(Ni,{present:t||r.open,children:y.jsx(Bg,{asChild:!0,container:s,children:o})}))})};MD.displayName=ZT;var w0="DialogOverlay",ND=E.forwardRef((n,e)=>{const t=PD(w0,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Ls(w0,n.__scopeDialog);return r.modal?y.jsx(Ni,{present:i||r.open,children:y.jsx(Qj,{...s,ref:e})}):null});ND.displayName=w0;var Xj=ou("DialogOverlay.RemoveScroll"),Qj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Ls(w0,t);return y.jsx($x,{as:Xj,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(ue.div,{"data-state":tA(s.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),uu="DialogContent",ID=E.forwardRef((n,e)=>{const t=PD(uu,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Ls(uu,n.__scopeDialog);return y.jsx(Ni,{present:i||r.open,children:r.modal?y.jsx(Zj,{...s,ref:e}):y.jsx(eG,{...s,ref:e})})});ID.displayName=uu;var Zj=E.forwardRef((n,e)=>{const t=Ls(uu,n.__scopeDialog),i=E.useRef(null),s=_e(e,t.contentRef,i);return E.useEffect(()=>{const r=i.current;if(r)return QT(r)},[]),y.jsx(kD,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:J(n.onCloseAutoFocus,r=>{var o;r.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:J(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&r.preventDefault()}),onFocusOutside:J(n.onFocusOutside,r=>r.preventDefault())})}),eG=E.forwardRef((n,e)=>{const t=Ls(uu,n.__scopeDialog),i=E.useRef(!1),s=E.useRef(!1);return y.jsx(kD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,r),r.defaultPrevented||(i.current||(a=t.triggerRef.current)==null||a.focus(),r.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:r=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,r),r.defaultPrevented||(i.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=r.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),kD=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:r,...o}=n,a=Ls(uu,t),l=E.useRef(null),c=_e(e,l);return XT(),y.jsxs(y.Fragment,{children:[y.jsx(Ox,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:r,children:y.jsx(ah,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":tA(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(tG,{titleId:a.titleId}),y.jsx(iG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),eA="DialogTitle",DD=E.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Ls(eA,t);return y.jsx(ue.h2,{id:s.titleId,...i,ref:e})});DD.displayName=eA;var LD="DialogDescription",FD=E.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Ls(LD,t);return y.jsx(ue.p,{id:s.descriptionId,...i,ref:e})});FD.displayName=LD;var OD="DialogClose",UD=E.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Ls(OD,t);return y.jsx(ue.button,{type:"button",...i,ref:e,onClick:J(n.onClick,()=>s.onOpenChange(!1))})});UD.displayName=OD;function tA(n){return n?"open":"closed"}var $D="DialogTitleWarning",[Pie,VD]=mB($D,{contentName:uu,titleName:eA,docsSlug:"dialog"}),tG=({titleId:n})=>{const e=VD($D),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},nG="DialogDescriptionWarning",iG=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VD(nG).contentName}}.`;return E.useEffect(()=>{var r;const s=(r=n.current)==null?void 0:r.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},sG=AD,rG=RD,oG=MD,BD=ND,HD=ID,zD=DD,jD=FD,aG=UD;const Bx=sG,Hx=rG,lG=oG,GD=E.forwardRef(({className:n,...e},t)=>y.jsx(BD,{ref:t,className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));GD.displayName=BD.displayName;const qg=E.forwardRef(({className:n,children:e,...t},i)=>y.jsxs(lG,{children:[y.jsx(GD,{}),y.jsxs(HD,{ref:i,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),"aria-describedby":t["aria-describedby"],...t,children:[e,y.jsxs(aG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(Rx,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qg.displayName=HD.displayName;const Wg=({className:n,...e})=>y.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Wg.displayName="DialogHeader";const nA=({className:n,...e})=>y.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});nA.displayName="DialogFooter";const Kg=E.forwardRef(({className:n,...e},t)=>y.jsx(zD,{ref:t,className:ye("text-lg font-semibold leading-none tracking-tight",n),...e}));Kg.displayName=zD.displayName;const zx=E.forwardRef(({className:n,...e},t)=>y.jsx(jD,{ref:t,className:ye("text-sm text-muted-foreground",n),...e}));zx.displayName=jD.displayName;function cG({children:n}){const[e,t]=E.useState(!1),{signInWithGoogle:i,loading:s}=xl(),{toast:r}=Do(),o=async()=>{const a=await i();a.success?r({title:"Logging in with Google...",description:"You will be redirected shortly"}):r({title:"Google login failed",description:a.error||"Please try again",variant:"destructive"})};return y.jsxs(Bx,{open:e,onOpenChange:t,children:[y.jsx(Hx,{asChild:!0,children:n||y.jsx(me,{variant:"outline",children:"Log in"})}),y.jsxs(qg,{className:"sm:max-w-[425px]",children:[y.jsxs(Wg,{children:[y.jsx(Kg,{className:"text-xl font-bold",children:"Log in to Qzzly"}),y.jsx(zx,{children:"Log in with Google to access your account. Email/password login is not supported."})]}),y.jsx(me,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,disabled:s,children:"Continue with Google"})]})]})}function iA({children:n}){const[e,t]=E.useState(!1),{signInWithGoogle:i,loading:s}=xl(),{toast:r}=Do(),o=async()=>{const a=await i();a.success?r({title:"Signing up with Google...",description:"You will be redirected shortly"}):r({title:"Google sign-up failed",description:a.error||"Please try again",variant:"destructive"})};return y.jsxs(Bx,{open:e,onOpenChange:t,children:[y.jsx(Hx,{asChild:!0,children:n||y.jsx(me,{children:"Sign up"})}),y.jsxs(qg,{className:"sm:max-w-[425px]",children:[y.jsxs(Wg,{children:[y.jsx(Kg,{className:"text-xl font-bold",children:"Create your account"}),y.jsx(zx,{children:"Sign up with Google to start using Qzzly. Email/password sign up is not supported."})]}),y.jsx(me,{type:"button",variant:"outline",className:"w-full mt-2",onClick:o,disabled:s,children:"Continue with Google"})]})]})}var uG=E.createContext(void 0);function gh(n){const e=E.useContext(uG);return n||e||"ltr"}var iC="rovingFocusGroup.onEntryFocus",dG={bubbles:!1,cancelable:!0},Yg="RovingFocusGroup",[IS,qD,fG]=Vg(Yg),[hG,yh]=Bn(Yg,[fG]),[pG,mG]=hG(Yg),WD=E.forwardRef((n,e)=>y.jsx(IS.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(IS.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(gG,{...n,ref:e})})}));WD.displayName=Yg;var gG=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...p}=n,m=E.useRef(null),g=_e(e,m),w=gh(r),[v,S]=xr({prop:o,defaultProp:a??null,onChange:l,caller:Yg}),[x,C]=E.useState(!1),_=ii(c),A=qD(t),P=E.useRef(!1),[M,N]=E.useState(0);return E.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(iC,_),()=>I.removeEventListener(iC,_)},[_]),y.jsx(pG,{scope:t,orientation:i,dir:w,loop:s,currentTabStopId:v,onItemFocus:E.useCallback(I=>S(I),[S]),onItemShiftTab:E.useCallback(()=>C(!0),[]),onFocusableItemAdd:E.useCallback(()=>N(I=>I+1),[]),onFocusableItemRemove:E.useCallback(()=>N(I=>I-1),[]),children:y.jsx(ue.div,{tabIndex:x||M===0?-1:0,"data-orientation":i,...p,ref:g,style:{outline:"none",...n.style},onMouseDown:J(n.onMouseDown,()=>{P.current=!0}),onFocus:J(n.onFocus,I=>{const k=!P.current;if(I.target===I.currentTarget&&k&&!x){const D=new CustomEvent(iC,dG);if(I.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=A().filter(O=>O.focusable),$=L.find(O=>O.active),j=L.find(O=>O.id===v),H=[$,j,...L].filter(Boolean).map(O=>O.ref.current);JD(H,u)}}P.current=!1}),onBlur:J(n.onBlur,()=>C(!1))})})}),KD="RovingFocusGroupItem",YD=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:r,children:o,...a}=n,l=mr(),c=r||l,u=mG(KD,t),p=u.currentTabStopId===c,m=qD(t),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:v}=u;return E.useEffect(()=>{if(i)return g(),()=>w()},[i,g,w]),y.jsx(IS.ItemSlot,{scope:t,id:c,focusable:i,active:s,children:y.jsx(ue.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:J(n.onMouseDown,S=>{i?u.onItemFocus(c):S.preventDefault()}),onFocus:J(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:J(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){u.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=xG(S,u.orientation,u.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let _=m().filter(A=>A.focusable).map(A=>A.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const A=_.indexOf(S.currentTarget);_=u.loop?wG(_,A+1):_.slice(A+1)}setTimeout(()=>JD(_))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:v!=null}):o})})});YD.displayName=KD;var yG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vG(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function xG(n,e,t){const i=vG(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return yG[i]}function JD(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function wG(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var sA=WD,rA=YD,kS=["Enter"," "],CG=["ArrowDown","PageUp","Home"],XD=["ArrowUp","PageDown","End"],SG=[...CG,...XD],EG={ltr:[...kS,"ArrowRight"],rtl:[...kS,"ArrowLeft"]},_G={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jg="Menu",[Jp,TG,AG]=Vg(Jg),[_u,QD]=Bn(Jg,[AG,uh,yh]),jx=uh(),ZD=yh(),[bG,Tu]=_u(Jg),[RG,Xg]=_u(Jg),e2=n=>{const{__scopeMenu:e,open:t=!1,children:i,dir:s,onOpenChange:r,modal:o=!0}=n,a=jx(e),[l,c]=E.useState(null),u=E.useRef(!1),p=ii(r),m=gh(s);return E.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),y.jsx(kk,{...a,children:y.jsx(bG,{scope:e,open:t,onOpenChange:p,content:l,onContentChange:c,children:y.jsx(RG,{scope:e,onClose:E.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:u,dir:m,modal:o,children:i})})})};e2.displayName=Jg;var PG="MenuAnchor",oA=E.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=jx(t);return y.jsx(DT,{...s,...i,ref:e})});oA.displayName=PG;var aA="MenuPortal",[MG,t2]=_u(aA,{forceMount:void 0}),n2=n=>{const{__scopeMenu:e,forceMount:t,children:i,container:s}=n,r=Tu(aA,e);return y.jsx(MG,{scope:e,forceMount:t,children:y.jsx(Ni,{present:t||r.open,children:y.jsx(Bg,{asChild:!0,container:s,children:i})})})};n2.displayName=aA;var Wi="MenuContent",[NG,lA]=_u(Wi),i2=E.forwardRef((n,e)=>{const t=t2(Wi,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,r=Tu(Wi,n.__scopeMenu),o=Xg(Wi,n.__scopeMenu);return y.jsx(Jp.Provider,{scope:n.__scopeMenu,children:y.jsx(Ni,{present:i||r.open,children:y.jsx(Jp.Slot,{scope:n.__scopeMenu,children:o.modal?y.jsx(IG,{...s,ref:e}):y.jsx(kG,{...s,ref:e})})})})}),IG=E.forwardRef((n,e)=>{const t=Tu(Wi,n.__scopeMenu),i=E.useRef(null),s=_e(e,i);return E.useEffect(()=>{const r=i.current;if(r)return QT(r)},[]),y.jsx(cA,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:J(n.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),kG=E.forwardRef((n,e)=>{const t=Tu(Wi,n.__scopeMenu);return y.jsx(cA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),DG=ou("MenuContent.ScrollLock"),cA=E.forwardRef((n,e)=>{const{__scopeMenu:t,loop:i=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...v}=n,S=Tu(Wi,t),x=Xg(Wi,t),C=jx(t),_=ZD(t),A=TG(t),[P,M]=E.useState(null),N=E.useRef(null),I=_e(e,N,S.onContentChange),k=E.useRef(0),D=E.useRef(""),L=E.useRef(0),$=E.useRef(null),j=E.useRef("right"),V=E.useRef(0),H=w?$x:E.Fragment,O=w?{as:DG,allowPinchZoom:!0}:void 0,B=F=>{var G,Te;const z=D.current+F,te=A().filter(Ie=>!Ie.disabled),Y=document.activeElement,ie=(G=te.find(Ie=>Ie.ref.current===Y))==null?void 0:G.textValue,he=te.map(Ie=>Ie.textValue),Re=qG(he,z,ie),Pe=(Te=te.find(Ie=>Ie.textValue===Re))==null?void 0:Te.ref.current;(function Ie(Me){D.current=Me,window.clearTimeout(k.current),Me!==""&&(k.current=window.setTimeout(()=>Ie(""),1e3))})(z),Pe&&setTimeout(()=>Pe.focus())};E.useEffect(()=>()=>window.clearTimeout(k.current),[]),XT();const U=E.useCallback(F=>{var te,Y;return j.current===((te=$.current)==null?void 0:te.side)&&KG(F,(Y=$.current)==null?void 0:Y.area)},[]);return y.jsx(NG,{scope:t,searchRef:D,onItemEnter:E.useCallback(F=>{U(F)&&F.preventDefault()},[U]),onItemLeave:E.useCallback(F=>{var z;U(F)||((z=N.current)==null||z.focus(),M(null))},[U]),onTriggerLeave:E.useCallback(F=>{U(F)&&F.preventDefault()},[U]),pointerGraceTimerRef:L,onPointerGraceIntentChange:E.useCallback(F=>{$.current=F},[]),children:y.jsx(H,{...O,children:y.jsx(Ox,{asChild:!0,trapped:s,onMountAutoFocus:J(r,F=>{var z;F.preventDefault(),(z=N.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(ah,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:m,onDismiss:g,children:y.jsx(sA,{asChild:!0,..._,dir:x.dir,orientation:"vertical",loop:i,currentTabStopId:P,onCurrentTabStopIdChange:M,onEntryFocus:J(l,F=>{x.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(LT,{role:"menu","aria-orientation":"vertical","data-state":x2(S.open),"data-radix-menu-content":"",dir:x.dir,...C,...v,ref:I,style:{outline:"none",...v.style},onKeyDown:J(v.onKeyDown,F=>{const te=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Y=F.ctrlKey||F.altKey||F.metaKey,ie=F.key.length===1;te&&(F.key==="Tab"&&F.preventDefault(),!Y&&ie&&B(F.key));const he=N.current;if(F.target!==he||!SG.includes(F.key))return;F.preventDefault();const Pe=A().filter(G=>!G.disabled).map(G=>G.ref.current);XD.includes(F.key)&&Pe.reverse(),jG(Pe)}),onBlur:J(n.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(k.current),D.current="")}),onPointerMove:J(n.onPointerMove,Xp(F=>{const z=F.target,te=V.current!==F.clientX;if(F.currentTarget.contains(z)&&te){const Y=F.clientX>V.current?"right":"left";j.current=Y,V.current=F.clientX}}))})})})})})})});i2.displayName=Wi;var LG="MenuGroup",uA=E.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return y.jsx(ue.div,{role:"group",...i,ref:e})});uA.displayName=LG;var FG="MenuLabel",s2=E.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return y.jsx(ue.div,{...i,ref:e})});s2.displayName=FG;var C0="MenuItem",rR="menu.itemSelect",Gx=E.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:i,...s}=n,r=E.useRef(null),o=Xg(C0,n.__scopeMenu),a=lA(C0,n.__scopeMenu),l=_e(e,r),c=E.useRef(!1),u=()=>{const p=r.current;if(!t&&p){const m=new CustomEvent(rR,{bubbles:!0,cancelable:!0});p.addEventListener(rR,g=>i==null?void 0:i(g),{once:!0}),wT(p,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(r2,{...s,ref:l,disabled:t,onClick:J(n.onClick,u),onPointerDown:p=>{var m;(m=n.onPointerDown)==null||m.call(n,p),c.current=!0},onPointerUp:J(n.onPointerUp,p=>{var m;c.current||(m=p.currentTarget)==null||m.click()}),onKeyDown:J(n.onKeyDown,p=>{const m=a.searchRef.current!=="";t||m&&p.key===" "||kS.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Gx.displayName=C0;var r2=E.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:i=!1,textValue:s,...r}=n,o=lA(C0,t),a=ZD(t),l=E.useRef(null),c=_e(e,l),[u,p]=E.useState(!1),[m,g]=E.useState("");return E.useEffect(()=>{const w=l.current;w&&g((w.textContent??"").trim())},[r.children]),y.jsx(Jp.ItemSlot,{scope:t,disabled:i,textValue:s??m,children:y.jsx(rA,{asChild:!0,...a,focusable:!i,children:y.jsx(ue.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...r,ref:c,onPointerMove:J(n.onPointerMove,Xp(w=>{i?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:J(n.onPointerLeave,Xp(w=>o.onItemLeave(w))),onFocus:J(n.onFocus,()=>p(!0)),onBlur:J(n.onBlur,()=>p(!1))})})})}),OG="MenuCheckboxItem",o2=E.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:i,...s}=n;return y.jsx(d2,{scope:n.__scopeMenu,checked:t,children:y.jsx(Gx,{role:"menuitemcheckbox","aria-checked":S0(t)?"mixed":t,...s,ref:e,"data-state":fA(t),onSelect:J(s.onSelect,()=>i==null?void 0:i(S0(t)?!0:!t),{checkForDefaultPrevented:!1})})})});o2.displayName=OG;var a2="MenuRadioGroup",[UG,$G]=_u(a2,{value:void 0,onValueChange:()=>{}}),l2=E.forwardRef((n,e)=>{const{value:t,onValueChange:i,...s}=n,r=ii(i);return y.jsx(UG,{scope:n.__scopeMenu,value:t,onValueChange:r,children:y.jsx(uA,{...s,ref:e})})});l2.displayName=a2;var c2="MenuRadioItem",u2=E.forwardRef((n,e)=>{const{value:t,...i}=n,s=$G(c2,n.__scopeMenu),r=t===s.value;return y.jsx(d2,{scope:n.__scopeMenu,checked:r,children:y.jsx(Gx,{role:"menuitemradio","aria-checked":r,...i,ref:e,"data-state":fA(r),onSelect:J(i.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});u2.displayName=c2;var dA="MenuItemIndicator",[d2,VG]=_u(dA,{checked:!1}),f2=E.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:i,...s}=n,r=VG(dA,t);return y.jsx(Ni,{present:i||S0(r.checked)||r.checked===!0,children:y.jsx(ue.span,{...s,ref:e,"data-state":fA(r.checked)})})});f2.displayName=dA;var BG="MenuSeparator",h2=E.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return y.jsx(ue.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});h2.displayName=BG;var HG="MenuArrow",p2=E.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=jx(t);return y.jsx(FT,{...s,...i,ref:e})});p2.displayName=HG;var zG="MenuSub",[Mie,m2]=_u(zG),qh="MenuSubTrigger",g2=E.forwardRef((n,e)=>{const t=Tu(qh,n.__scopeMenu),i=Xg(qh,n.__scopeMenu),s=m2(qh,n.__scopeMenu),r=lA(qh,n.__scopeMenu),o=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=r,c={__scopeMenu:n.__scopeMenu},u=E.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return E.useEffect(()=>u,[u]),E.useEffect(()=>{const p=a.current;return()=>{window.clearTimeout(p),l(null)}},[a,l]),y.jsx(oA,{asChild:!0,...c,children:y.jsx(r2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":x2(t.open),...n,ref:Tx(e,s.onTriggerChange),onClick:p=>{var m;(m=n.onClick)==null||m.call(n,p),!(n.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:J(n.onPointerMove,Xp(p=>{r.onItemEnter(p),!p.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:J(n.onPointerLeave,Xp(p=>{var g,w;u();const m=(g=t.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(w=t.content)==null?void 0:w.dataset.side,S=v==="right",x=S?-5:5,C=m[S?"left":"right"],_=m[S?"right":"left"];r.onPointerGraceIntentChange({area:[{x:p.clientX+x,y:p.clientY},{x:C,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:C,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(p),p.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:J(n.onKeyDown,p=>{var g;const m=r.searchRef.current!=="";n.disabled||m&&p.key===" "||EG[i.dir].includes(p.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),p.preventDefault())})})})});g2.displayName=qh;var y2="MenuSubContent",v2=E.forwardRef((n,e)=>{const t=t2(Wi,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,r=Tu(Wi,n.__scopeMenu),o=Xg(Wi,n.__scopeMenu),a=m2(y2,n.__scopeMenu),l=E.useRef(null),c=_e(e,l);return y.jsx(Jp.Provider,{scope:n.__scopeMenu,children:y.jsx(Ni,{present:i||r.open,children:y.jsx(Jp.Slot,{scope:n.__scopeMenu,children:y.jsx(cA,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var p;o.isUsingKeyboardRef.current&&((p=l.current)==null||p.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:J(n.onFocusOutside,u=>{u.target!==a.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:J(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:J(n.onKeyDown,u=>{var g;const p=u.currentTarget.contains(u.target),m=_G[o.dir].includes(u.key);p&&m&&(r.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});v2.displayName=y2;function x2(n){return n?"open":"closed"}function S0(n){return n==="indeterminate"}function fA(n){return S0(n)?"indeterminate":n?"checked":"unchecked"}function jG(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function GG(n,e){return n.map((t,i)=>n[(e+i)%n.length])}function qG(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=GG(n,Math.max(r,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function WG(n,e){const{x:t,y:i}=n;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],l=e[o],c=a.x,u=a.y,p=l.x,m=l.y;u>i!=m>i&&t<(p-c)*(i-u)/(m-u)+c&&(s=!s)}return s}function KG(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return WG(t,e)}function Xp(n){return e=>e.pointerType==="mouse"?n(e):void 0}var YG=e2,JG=oA,XG=n2,QG=i2,ZG=uA,eq=s2,tq=Gx,nq=o2,iq=l2,sq=u2,rq=f2,oq=h2,aq=p2,lq=g2,cq=v2,qx="DropdownMenu",[uq,Nie]=Bn(qx,[QD]),Hn=QD(),[dq,w2]=uq(qx),C2=n=>{const{__scopeDropdownMenu:e,children:t,dir:i,open:s,defaultOpen:r,onOpenChange:o,modal:a=!0}=n,l=Hn(e),c=E.useRef(null),[u,p]=xr({prop:s,defaultProp:r??!1,onChange:o,caller:qx});return y.jsx(dq,{scope:e,triggerId:mr(),triggerRef:c,contentId:mr(),open:u,onOpenChange:p,onOpenToggle:E.useCallback(()=>p(m=>!m),[p]),modal:a,children:y.jsx(YG,{...l,open:u,onOpenChange:p,dir:i,modal:a,children:t})})};C2.displayName=qx;var S2="DropdownMenuTrigger",E2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:i=!1,...s}=n,r=w2(S2,t),o=Hn(t);return y.jsx(JG,{asChild:!0,...o,children:y.jsx(ue.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...s,ref:Tx(e,r.triggerRef),onPointerDown:J(n.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(r.onOpenToggle(),r.open||a.preventDefault())}),onKeyDown:J(n.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&r.onOpenToggle(),a.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});E2.displayName=S2;var fq="DropdownMenuPortal",_2=n=>{const{__scopeDropdownMenu:e,...t}=n,i=Hn(e);return y.jsx(XG,{...i,...t})};_2.displayName=fq;var T2="DropdownMenuContent",A2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=w2(T2,t),r=Hn(t),o=E.useRef(!1);return y.jsx(QG,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...i,ref:e,onCloseAutoFocus:J(n.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:J(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});A2.displayName=T2;var hq="DropdownMenuGroup",pq=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(ZG,{...s,...i,ref:e})});pq.displayName=hq;var mq="DropdownMenuLabel",b2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(eq,{...s,...i,ref:e})});b2.displayName=mq;var gq="DropdownMenuItem",R2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(tq,{...s,...i,ref:e})});R2.displayName=gq;var yq="DropdownMenuCheckboxItem",P2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(nq,{...s,...i,ref:e})});P2.displayName=yq;var vq="DropdownMenuRadioGroup",xq=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(iq,{...s,...i,ref:e})});xq.displayName=vq;var wq="DropdownMenuRadioItem",M2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(sq,{...s,...i,ref:e})});M2.displayName=wq;var Cq="DropdownMenuItemIndicator",N2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(rq,{...s,...i,ref:e})});N2.displayName=Cq;var Sq="DropdownMenuSeparator",I2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(oq,{...s,...i,ref:e})});I2.displayName=Sq;var Eq="DropdownMenuArrow",_q=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(aq,{...s,...i,ref:e})});_q.displayName=Eq;var Tq="DropdownMenuSubTrigger",k2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(lq,{...s,...i,ref:e})});k2.displayName=Tq;var Aq="DropdownMenuSubContent",D2=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hn(t);return y.jsx(cq,{...s,...i,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});D2.displayName=Aq;var bq=C2,Rq=E2,Pq=_2,L2=A2,F2=b2,O2=R2,U2=P2,$2=M2,V2=N2,B2=I2,H2=k2,z2=D2;const Mq=bq,Nq=Rq,Iq=E.forwardRef(({className:n,inset:e,children:t,...i},s)=>y.jsxs(H2,{ref:s,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...i,children:[t,y.jsx(p3,{className:"ml-auto h-4 w-4"})]}));Iq.displayName=H2.displayName;const kq=E.forwardRef(({className:n,...e},t)=>y.jsx(z2,{ref:t,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));kq.displayName=z2.displayName;const j2=E.forwardRef(({className:n,sideOffset:e=4,...t},i)=>y.jsx(Pq,{children:y.jsx(L2,{ref:i,sideOffset:e,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));j2.displayName=L2.displayName;const DS=E.forwardRef(({className:n,inset:e,...t},i)=>y.jsx(O2,{ref:i,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));DS.displayName=O2.displayName;const Dq=E.forwardRef(({className:n,children:e,checked:t,...i},s)=>y.jsxs(U2,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...i,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(V2,{children:y.jsx(al,{className:"h-4 w-4"})})}),e]}));Dq.displayName=U2.displayName;const Lq=E.forwardRef(({className:n,children:e,...t},i)=>y.jsxs($2,{ref:i,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(V2,{children:y.jsx(y3,{className:"h-2 w-2 fill-current"})})}),e]}));Lq.displayName=$2.displayName;const G2=E.forwardRef(({className:n,inset:e,...t},i)=>y.jsx(F2,{ref:i,className:ye("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));G2.displayName=F2.displayName;const LS=E.forwardRef(({className:n,...e},t)=>y.jsx(B2,{ref:t,className:ye("-mx-1 my-1 h-px bg-muted",n),...e}));LS.displayName=B2.displayName;function Fq(){const{user:n,signOut:e}=xl(),t=mh(),i=async()=>{await e(),t("/")};return y.jsxs(Mq,{children:[y.jsx(Nq,{asChild:!0,children:y.jsxs(me,{variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:[y.jsx("span",{className:"hidden md:block mr-2",children:n==null?void 0:n.email.split("@")[0]}),y.jsx("div",{className:"size-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-600",children:y.jsx(A3,{className:"size-4"})})]})}),y.jsxs(j2,{align:"end",className:"w-56",children:[y.jsxs(G2,{children:[y.jsx("div",{className:"font-medium",children:(n==null?void 0:n.email.split("@")[0])||"My Account"}),y.jsx("div",{className:"text-xs text-muted-foreground truncate",children:n==null?void 0:n.email})]}),y.jsx(LS,{}),y.jsx(DS,{asChild:!0,children:y.jsx(Yp,{to:"/sessions",className:"cursor-pointer",children:"My Study Sessions"})}),y.jsx(LS,{}),y.jsxs(DS,{className:"text-red-600 focus:text-red-600 cursor-pointer",onClick:i,children:[y.jsx(S3,{className:"mr-2 size-4"}),"Logout"]})]})]})}function Au(){const n=E.useRef(null);return E.useEffect(()=>{const e=n.current;if(!e)return;e.classList.add("opacity-0");const t=new IntersectionObserver(([i])=>{i.isIntersecting&&(e.classList.remove("opacity-0"),e.classList.add("animate-fade-in"),t.unobserve(e))},{threshold:.1});return t.observe(e),()=>t.disconnect()},[]),n}const vd=()=>{const{user:n}=xl(),e=Au();return y.jsx("header",{ref:e,className:"bg-white py-5 border-b border-gray-100 sticky top-0 z-50 shadow-sm backdrop-blur-lg bg-white/90",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center",children:y.jsxs(Yp,{to:"/",className:"text-2xl font-bold flex items-center",children:[y.jsx("div",{className:"w-9 h-9 mr-2 gradient-bg rounded-md flex items-center justify-center",children:y.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("span",{className:"font-extrabold tracking-tighter",children:"Qzzly"})]})}),y.jsxs("nav",{className:"hidden md:flex items-center space-x-10",children:[y.jsx("a",{href:"/#features",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"Features"}),y.jsx("a",{href:"/#how-it-works",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"How it Works"}),y.jsx(Yp,{to:"/sessions",className:"text-gray-600 hover:text-purple-600 transition font-medium text-sm",children:"My Sessions"})]}),y.jsx("div",{className:"flex items-center space-x-4",children:n?y.jsx(Fq,{}):y.jsxs(y.Fragment,{children:[y.jsx(cG,{children:y.jsx(me,{variant:"outline",className:"hidden md:flex border-purple-300 text-purple-600 hover:bg-purple-50 font-medium",children:"Log in"})}),y.jsx(iA,{children:y.jsx(me,{className:"gradient-bg font-medium shadow-md shadow-purple-200",children:"Sign up"})})]})})]})})})},Oq=()=>{const[n,e]=E.useState(!1),[t,i]=E.useState(!1),s=E.useRef(null),r=mh(),{toast:o}=Do(),{user:a}=xl(),l=async m=>{if(!a){o({title:"Authentication required",description:"Please sign up or log in to upload files"});return}if(!(!m||m.length===0)){i(!0);try{const g=m[0];if(g.type!=="application/pdf"){o({title:"Unsupported file format",description:"Please upload PDF files only",variant:"destructive"});return}const w=g.name.replace(/\.pdf$/,""),v=`session-${Date.now()}`;o({title:"Files uploaded successfully",description:`Created new study session: ${w}`}),r(`/session/${v}`)}catch{o({title:"Upload failed",description:"There was an error uploading your files",variant:"destructive"})}finally{i(!1)}}},c=m=>{m.preventDefault(),e(!1),m.dataTransfer.files&&m.dataTransfer.files.length>0&&l(m.dataTransfer.files)},u=()=>{var m;(m=s.current)==null||m.click()},p=()=>{a?r("/sessions"):o({title:"Authentication required",description:"Please sign up to get started"})};return y.jsx("section",{className:"py-20 md:py-28 container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[y.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0",children:[y.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-8 leading-tight animate-fade-in",children:["Transform Your ",y.jsx("span",{className:"gradient-text",children:"Study Material"})," Into Interactive Quizzes"]}),y.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed animate-fade-in max-w-lg",style:{animationDelay:"0.2s"},children:"Upload your PDFs and explore our demo features to see how AI-powered study tools can accelerate your learning journey."}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 animate-fade-in",style:{animationDelay:"0.4s"},children:[a?y.jsx(me,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",onClick:p,children:"Go to Study Sessions"}):y.jsx(iA,{children:y.jsx(me,{className:"gradient-bg text-white px-8 py-7 rounded-lg text-lg font-medium shadow-lg shadow-purple-200",children:"Get Started Free"})}),y.jsxs(me,{variant:"outline",className:"bg-white border border-gray-300 px-8 py-7 rounded-lg text-lg font-medium hover:bg-gray-50 transition-colors",children:[y.jsx(ak,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]}),y.jsx("div",{className:"md:w-1/2 animate-fade-in animate-float",style:{animationDelay:"0.6s"},children:y.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Try it now"}),y.jsxs("div",{id:"upload-container",className:`upload-area rounded-xl p-10 text-center cursor-pointer mb-6 border-2 border-dashed border-gray-300 ${n?"border-purple-500 bg-purple-50":""}`,onDragOver:m=>{m.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:c,onClick:u,children:[t?y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-purple-500 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Creating study session..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-500 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),y.jsx("p",{className:"text-gray-600 mb-3 text-lg",children:"Drag & drop your PDF files here"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"or"}),y.jsx(me,{variant:"outline",className:"px-6 py-3 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50 font-medium",onClick:u,children:"Browse files"})]}),y.jsx("input",{type:"file",ref:s,className:"hidden",accept:".pdf",multiple:!0,onChange:m=>{m.target.files&&m.target.files.length>0&&l(m.target.files)}})]}),y.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Supported formats: PDF (Max size: 25MB per file)"})]})})]})})},Uq=()=>{const n=Au();return y.jsx("section",{ref:n,id:"features",className:"py-20 bg-white",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-16",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Features"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"Supercharge Your Learning"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Our AI analyzes your study materials and creates personalized learning resources to help you master any subject."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(x3,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Smart Quizzes"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"AI-generated quizzes that adapt to your knowledge gaps and learning style for maximum retention."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(f0,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Interactive Flashcards"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Turn complex concepts into easy-to-review flashcards with spaced repetition for better memorization."})]}),y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md card-hover",children:[y.jsx("div",{className:"feature-icon",children:y.jsx(g3,{className:"w-6 h-6"})}),y.jsx("h3",{className:"text-xl font-bold mb-4",children:"Mock Tests"}),y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Simulate real exam conditions with comprehensive mock tests that prepare you for the real thing."})]})]})]})})},$q=()=>{const n=Au();return y.jsx("section",{ref:n,id:"how-it-works",className:"py-24 bg-gray-50",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"text-center mb-20",children:[y.jsx("span",{className:"text-purple-600 font-semibold text-sm uppercase tracking-wider mb-2 block",children:"Process"}),y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 tracking-tight",children:"How Qzzly Works"}),y.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Three simple steps to transform your study materials into effective learning tools."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 max-w-6xl mx-auto relative",children:[y.jsx("div",{className:"hidden md:block absolute top-24 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-600"}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.2s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"1"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Upload Your PDFs"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Simply drag and drop your study materials, lecture notes, or textbook PDFs."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.4s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"2"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI Analysis"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Our advanced AI reads and understands your content, identifying key concepts and knowledge points."})]}),y.jsxs("div",{className:"text-center relative animate-fade-in",style:{animationDelay:"0.6s"},children:[y.jsx("div",{className:"w-20 h-20 gradient-bg rounded-full flex items-center justify-center text-white text-2xl font-bold mx-auto mb-8 shadow-lg shadow-purple-200",children:"3"}),y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Study Smarter"}),y.jsx("p",{className:"text-gray-600 leading-relaxed mx-auto max-w-xs",children:"Access your personalized quizzes, flashcards, and mock tests anytime, anywhere."})]})]})]})})},Vq=()=>{const{user:n}=xl(),e=Au();return y.jsx("section",{ref:e,className:"py-24 bg-white",children:y.jsx("div",{className:"container mx-auto px-4 md:px-6",children:y.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-10 md:p-16 shadow-2xl overflow-hidden relative",children:[y.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -mr-20 -mt-20"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-purple-500/10 rounded-full -ml-20 -mb-20"}),y.jsxs("div",{className:"max-w-3xl mx-auto text-center relative",children:[y.jsx("h2",{className:"text-3xl md:text-5xl font-extrabold text-white mb-8 leading-tight",children:"Ready to Transform Your Study Habits?"}),y.jsx("p",{className:"text-xl text-purple-100 mb-10 leading-relaxed",children:"Join thousands of students who are studying smarter, not harder. Try Qzzly today and see the difference."}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5",children:[y.jsx(iA,{redirectPath:"/sessions",children:y.jsx(me,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 px-10 py-7 text-lg font-bold rounded-xl",children:"Get Started Free"})}),y.jsxs(me,{size:"lg",variant:"outline",className:"bg-transparent text-white border-2 border-white px-10 py-7 hover:bg-white/10 text-lg font-bold rounded-xl",children:[y.jsx(ak,{className:"w-5 h-5 mr-2"})," Watch Demo"]})]})]})]})})})},q2=()=>{const n=Au();return y.jsx("footer",{ref:n,className:"bg-gray-900 text-white pt-20 pb-10",children:y.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center mb-6",children:[y.jsx("div",{className:"w-10 h-10 gradient-bg rounded-lg flex items-center justify-center mr-3",children:y.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"white"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"white",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Qzzly"})]}),y.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"AI-powered study tools to help you learn faster and remember more."}),y.jsxs("div",{className:"flex space-x-5",children:[y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Product"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Features"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"FAQ"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Resources"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Blog"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Help Center"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Tutorials"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Contact"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold mb-5",children:"Company"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"About Us"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Careers"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})})]})]})]}),y.jsx("div",{className:"border-t border-gray-800 mt-16 pt-8 text-center text-gray-400",children:y.jsxs("p",{children:[" ",new Date().getFullYear()," Qzzly. All rights reserved."]})})]})})},Bq=()=>y.jsxs("div",{className:"flex flex-col min-h-screen",children:[y.jsx(vd,{}),y.jsxs("main",{className:"flex-grow",children:[y.jsx(Oq,{}),y.jsx(Uq,{}),y.jsx($q,{}),y.jsx(Vq,{})]}),y.jsx(q2,{})]}),Hq=()=>{const n=Lo();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),y.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",children:[y.jsx(vd,{}),y.jsx("main",{className:"flex flex-1 flex-col items-center justify-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mb-6 animate-float",children:[y.jsx("ellipse",{cx:"60",cy:"60",rx:"55",ry:"55",fill:"#ede9fe"}),y.jsx("ellipse",{cx:"60",cy:"60",rx:"40",ry:"40",fill:"#a5b4fc"}),y.jsx("path",{d:"M60 80c-10 0-18-8-18-18s8-18 18-18 18 8 18 18-8 18-18 18zm0-8a10 10 0 100-20 10 10 0 000 20z",fill:"#7c3aed"}),y.jsx("circle",{cx:"50",cy:"55",r:"3",fill:"#fff"}),y.jsx("circle",{cx:"70",cy:"55",r:"3",fill:"#fff"}),y.jsx("ellipse",{cx:"60",cy:"70",rx:"6",ry:"3",fill:"#fff"})]}),y.jsx("h1",{className:"text-5xl font-extrabold text-purple-700 mb-2",children:"404"}),y.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Sorry, we couldn't find that page."}),y.jsx(me,{className:"gradient-bg px-8 py-3 text-lg font-semibold shadow-md",asChild:!0,children:y.jsx("a",{href:"/sessions",children:"Go to My Sessions"})}),y.jsx(me,{variant:"ghost",className:"mt-2 text-purple-600 hover:underline",asChild:!0,children:y.jsx("a",{href:"/",children:"Back to Home"})})]})}),y.jsx(q2,{})]})},xd=E.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));xd.displayName="Card";const wd=E.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("flex flex-col space-y-1.5 p-6",n),...e}));wd.displayName="CardHeader";const Cd=E.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ye("text-2xl font-semibold leading-none tracking-tight",n),...e}));Cd.displayName="CardTitle";const zq=E.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ye("text-sm text-muted-foreground",n),...e}));zq.displayName="CardDescription";const Sd=E.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("p-6 pt-0",n),...e}));Sd.displayName="CardContent";const hA=E.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ye("flex items-center p-6 pt-0",n),...e}));hA.displayName="CardFooter";const du=E.forwardRef(({className:n,type:e,...t},i)=>y.jsx("input",{type:e,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));du.displayName="Input";var jq="Label",W2=E.forwardRef((n,e)=>y.jsx(ue.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));W2.displayName=jq;var K2=W2;const Gq=_T("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yt=E.forwardRef(({className:n,...e},t)=>y.jsx(K2,{ref:t,className:ye(Gq(),n),...e}));yt.displayName=K2.displayName;const pA=E.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ye("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));pA.displayName="Textarea";function qq(){const{user:n}=xl();HT();const[e,t]=E.useState([{id:"mock-session-1",title:"Sample Study Session",description:"A sample study session for testing",createdat:new Date().toISOString(),updatedat:new Date().toISOString(),files:[],flashcardSets:[],quizzes:[]}]),[i,s]=E.useState(""),[r,o]=E.useState(""),[a,l]=E.useState(!1),c=mh(),{toast:u}=Do(),p=B1({mutationFn:async x=>({session:{id:`session-${Date.now()}`,title:x.title,description:x.description,createdat:new Date().toISOString(),updatedat:new Date().toISOString(),files:[],flashcardSets:[],quizzes:[]},error:null}),onSuccess:async x=>{if(x.error||!x.session){u({title:"Error",description:x.error||"Failed to create session",variant:"destructive"});return}t(C=>[...C,x.session]),s(""),o(""),l(!1),u({title:"Success",description:`"${x.session.title}" has been created successfully.`}),setTimeout(()=>{c(`/session/${x.session.id}`)},100)},onError:()=>{u({title:"Error",description:"Failed to create session",variant:"destructive"})}}),m=()=>{if(!i.trim()){u({title:"Error",description:"Session title is required",variant:"destructive"});return}p.mutate({title:i,description:r})},g=B1({mutationFn:async x=>({error:null}),onSuccess:(x,C)=>{if(x.error){u({title:"Error",description:x.error,variant:"destructive"});return}t(_=>_.filter(A=>A.id!==C)),u({title:"Success",description:"Session has been deleted successfully."})},onError:()=>{u({title:"Error",description:"Failed to delete session",variant:"destructive"})}}),w=(x,C)=>{C.stopPropagation(),g.mutate(x)},v=x=>{if(!x)return"Unknown";const C=new Date(x);return isNaN(C.getTime())?"Unknown":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(C)},S=Au();return y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(vd,{}),y.jsxs("main",{ref:S,className:"container mx-auto px-4 py-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold",children:"Your Study Sessions"}),y.jsxs(Bx,{open:a,onOpenChange:l,children:[y.jsx(Hx,{asChild:!0,children:y.jsx(me,{className:"gradient-bg",children:"Create New Session"})}),y.jsxs(qg,{children:[y.jsxs(Wg,{children:[y.jsx(Kg,{children:"Create New Study Session"}),y.jsx(zx,{children:"Create a new study session to organize your learning materials."})]}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{htmlFor:"title",children:"Session Title"}),y.jsx(du,{id:"title",placeholder:"Enter a title for your study session",value:i,onChange:x=>s(x.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{htmlFor:"description",children:"Description (Optional)"}),y.jsx(pA,{id:"description",placeholder:"Describe what you'll be studying",value:r,onChange:x=>o(x.target.value)})]})]}),y.jsxs(nA,{children:[y.jsx(me,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),y.jsx(me,{className:"gradient-bg",onClick:m,children:"Create Session"})]})]})]})]}),e.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(x=>y.jsxs(xd,{className:"border shadow-md hover:shadow-lg transition-shadow cursor-pointer card-hover",onClick:()=>c(`/session/${x.id}`),children:[y.jsx(wd,{className:"pb-2",children:y.jsxs(Cd,{className:"flex justify-between items-start",children:[y.jsx("span",{className:"text-xl",children:x.title}),y.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-500 hover:bg-red-50",onClick:C=>w(x.id,C),children:y.jsx(_3,{className:"h-4 w-4"})})]})}),y.jsxs(Sd,{className:"pb-2",children:[y.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:x.description||"No description"}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(h3,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Created: ",v(x.createdat)]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(v3,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Updated: ",v(x.updatedat)]})]})]})]}),y.jsx(hA,{className:"pt-3 border-t flex justify-between",children:y.jsx("div",{})})]},x.id))}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"w-16 h-16 gradient-bg rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"currentColor"}),y.jsx("path",{d:"M2 17L12 22L22 17V7L12 12L2 7V17Z",fill:"currentColor",fillOpacity:"0.8"})]})}),y.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Study Sessions Yet"}),y.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first study session to upload PDFs and start generating flashcards, quizzes, and more."}),y.jsx(me,{className:"gradient-bg",onClick:()=>l(!0),children:"Create Your First Session"})]})]})]})}var Wx="Tabs",[Wq,Iie]=Bn(Wx,[yh]),Y2=yh(),[Kq,mA]=Wq(Wx),J2=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=gh(a),[p,m]=xr({prop:i,onChange:s,defaultProp:r??"",caller:Wx});return y.jsx(Kq,{scope:t,baseId:mr(),value:p,onValueChange:m,orientation:o,dir:u,activationMode:l,children:y.jsx(ue.div,{dir:u,"data-orientation":o,...c,ref:e})})});J2.displayName=Wx;var X2="TabsList",Q2=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,r=mA(X2,t),o=Y2(t);return y.jsx(sA,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:y.jsx(ue.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:e})})});Q2.displayName=X2;var Z2="TabsTrigger",eL=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...r}=n,o=mA(Z2,t),a=Y2(t),l=iL(o.baseId,i),c=sL(o.baseId,i),u=i===o.value;return y.jsx(rA,{asChild:!0,...a,focusable:!s,active:u,children:y.jsx(ue.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:e,onMouseDown:J(n.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?o.onValueChange(i):p.preventDefault()}),onKeyDown:J(n.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(i)}),onFocus:J(n.onFocus,()=>{const p=o.activationMode!=="manual";!u&&!s&&p&&o.onValueChange(i)})})})});eL.displayName=Z2;var tL="TabsContent",nL=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:r,...o}=n,a=mA(tL,t),l=iL(a.baseId,i),c=sL(a.baseId,i),u=i===a.value,p=E.useRef(u);return E.useEffect(()=>{const m=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Ni,{present:s||u,children:({present:m})=>y.jsx(ue.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:p.current?"0s":void 0},children:m&&r})})});nL.displayName=tL;function iL(n,e){return`${n}-trigger-${e}`}function sL(n,e){return`${n}-content-${e}`}var Yq=J2,rL=Q2,oL=eL,aL=nL;const lL=Yq,gA=E.forwardRef(({className:n,...e},t)=>y.jsx(rL,{ref:t,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));gA.displayName=rL.displayName;const po=E.forwardRef(({className:n,...e},t)=>y.jsx(oL,{ref:t,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));po.displayName=oL.displayName;const mo=E.forwardRef(({className:n,...e},t)=>y.jsx(aL,{ref:t,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));mo.displayName=aL.displayName;const Wh=({title:n,isLoading:e,error:t,children:i,generationText:s})=>e?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),y.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:s||"Processing..."})]}):t?y.jsx("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:y.jsxs("div",{className:"text-red-500 text-center",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error"}),y.jsx("p",{className:"text-sm",children:t})]})}):y.jsxs("div",{className:"h-full",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:n}),i]});var He;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const r={};for(const o of s)r[o]=o;return r},n.getValidEnumValues=s=>{const r=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of r)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(r){return s[r]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const r=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&r.push(o);return r},n.find=(s,r)=>{for(const o of s)if(r(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function i(s,r=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}n.joinValues=i,n.jsonStringifyReplacer=(s,r)=>typeof r=="bigint"?r.toString():r})(He||(He={}));var oR;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(oR||(oR={}));const le=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ko=n=>{switch(typeof n){case"undefined":return le.undefined;case"string":return le.string;case"number":return Number.isNaN(n)?le.nan:le.number;case"boolean":return le.boolean;case"function":return le.function;case"bigint":return le.bigint;case"symbol":return le.symbol;case"object":return Array.isArray(n)?le.array:n===null?le.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?le.promise:typeof Map<"u"&&n instanceof Map?le.map:typeof Set<"u"&&n instanceof Set?le.set:typeof Date<"u"&&n instanceof Date?le.date:le.object;default:return le.unknown}},K=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class No extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},i={_errors:[]},s=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)i._errors.push(t(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),i}static assert(e){if(!(e instanceof No))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}No.create=n=>new No(n);const FS=(n,e)=>{let t;switch(n.code){case K.invalid_type:n.received===le.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,He.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${He.joinValues(n.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${He.joinValues(n.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${He.joinValues(n.options)}, received '${n.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:He.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case K.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case K.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,He.assertNever(n)}return{message:t}};let Jq=FS;function Xq(){return Jq}const Qq=n=>{const{data:e,path:t,errorMaps:i,issueData:s}=n,r=[...t,...s.path||[]],o={...s,path:r};if(s.message!==void 0)return{...s,path:r,message:s.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:r,message:a}};function ee(n,e){const t=Xq(),i=Qq({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===FS?void 0:FS].filter(s=>!!s)});n.common.issues.push(i)}class Un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const s of t){if(s.status==="aborted")return xe;s.status==="dirty"&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const s of t){const r=await s.key,o=await s.value;i.push({key:r,value:o})}return Un.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:r,value:o}=s;if(r.status==="aborted"||o.status==="aborted")return xe;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(i[r.value]=o.value)}return{status:e.value,value:i}}}const xe=Object.freeze({status:"aborted"}),Kh=n=>({status:"dirty",value:n}),Zi=n=>({status:"valid",value:n}),aR=n=>n.status==="aborted",lR=n=>n.status==="dirty",Zf=n=>n.status==="valid",E0=n=>typeof Promise<"u"&&n instanceof Promise;var ce;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));class Cr{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cR=(n,e)=>{if(Zf(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new No(n.common.issues);return this._error=t,this._error}}};function be(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:s}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:s}}class Ue{get description(){return this._def.description}_getType(e){return Ko(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ko(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Un,ctx:{common:e.parent.common,data:e.data,parsedType:Ko(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(E0(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ko(e)},s=this._parseSync({data:e,path:i.path,parent:i});return cR(i,s)}"~validate"(e){var i,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ko(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Zf(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(s=(i=r==null?void 0:r.message)==null?void 0:i.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Zf(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ko(e)},s=this._parse({data:e,path:i.path,parent:i}),r=await(E0(s)?s:Promise.resolve(s));return cR(i,r)}refine(e,t){const i=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,r)=>{const o=e(s),a=()=>r.addIssue({code:K.custom,...i(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((i,s)=>e(i)?!0:(s.addIssue(typeof t=="function"?t(i,s):t),!1))}_refinement(e){return new nh({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return il.create(this,this._def)}nullable(){return ih.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yr.create(this)}promise(){return R0.create(this,this._def)}or(e){return T0.create([this,e],this._def)}and(e){return A0.create(this,e,this._def)}transform(e){return new nh({...be(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new VS({...be(this._def),innerType:this,defaultValue:t,typeName:ve.ZodDefault})}brand(){return new C8({typeName:ve.ZodBranded,type:this,...be(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new BS({...be(this._def),innerType:this,catchValue:t,typeName:ve.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return yA.create(this,e)}readonly(){return HS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zq=/^c[^\s-]{8,}$/i,e8=/^[0-9a-z]+$/,t8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,n8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,i8=/^[a-z0-9_-]{21}$/i,s8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,r8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,o8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,a8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sC;const l8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,c8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,u8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,d8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,f8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,h8=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",p8=new RegExp(`^${cL}$`);function uL(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function m8(n){return new RegExp(`^${uL(n)}$`)}function g8(n){let e=`${cL}T${uL(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function y8(n,e){return!!((e==="v4"||!e)&&l8.test(n)||(e==="v6"||!e)&&u8.test(n))}function v8(n,e){if(!s8.test(n))return!1;try{const[t]=n.split("."),i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(i));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function x8(n,e){return!!((e==="v4"||!e)&&c8.test(n)||(e==="v6"||!e)&&d8.test(n))}class dr extends Ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==le.string){const r=this._getOrReturnCtx(e);return ee(r,{code:K.invalid_type,expected:le.string,received:r.parsedType}),xe}const i=new Un;let s;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")e.data.length>r.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,a=e.data.length<r.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ee(s,{code:K.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&ee(s,{code:K.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")o8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"email",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")sC||(sC=new RegExp(a8,"u")),sC.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"emoji",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")n8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"uuid",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")i8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"nanoid",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")Zq.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")e8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid2",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")t8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ulid",code:K.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ee(s,{validation:"url",code:K.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"regex",code:K.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?g8(r).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?p8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?m8(r).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?r8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"duration",code:K.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?y8(e.data,r.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ip",code:K.invalid_string,message:r.message}),i.dirty()):r.kind==="jwt"?v8(e.data,r.alg)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"jwt",code:K.invalid_string,message:r.message}),i.dirty()):r.kind==="cidr"?x8(e.data,r.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cidr",code:K.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?f8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64",code:K.invalid_string,message:r.message}),i.dirty()):r.kind==="base64url"?h8.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64url",code:K.invalid_string,message:r.message}),i.dirty()):He.assertNever(r);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(s=>e.test(s),{validation:t,code:K.invalid_string,...ce.errToObj(i)})}_addCheck(e){return new dr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ce.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ce.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ce.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new dr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new dr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new dr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}dr.create=n=>new dr({checks:[],typeName:ve.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...be(n)});function w8(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,s=t>i?t:i,r=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return r%o/10**s}class fu extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==le.number){const r=this._getOrReturnCtx(e);return ee(r,{code:K.invalid_type,expected:le.number,received:r.parsedType}),xe}let i;const s=new Un;for(const r of this._def.checks)r.kind==="int"?He.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:K.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="multipleOf"?w8(e.data,r.value)!==0&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:K.not_finite,message:r.message}),s.dirty()):He.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,i,s){return new fu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:ce.toString(s)}]})}_addCheck(e){return new fu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}fu.create=n=>new fu({checks:[],typeName:ve.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...be(n)});class hu extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==le.bigint)return this._getInvalidInput(e);let i;const s=new Un;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ee(i,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):He.assertNever(r);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ee(t,{code:K.invalid_type,expected:le.bigint,received:t.parsedType}),xe}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,i,s){return new hu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:ce.toString(s)}]})}_addCheck(e){return new hu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}hu.create=n=>new hu({checks:[],typeName:ve.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...be(n)});class _0 extends Ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==le.boolean){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.boolean,received:i.parsedType}),xe}return Zi(e.data)}}_0.create=n=>new _0({typeName:ve.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...be(n)});class eh extends Ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==le.date){const r=this._getOrReturnCtx(e);return ee(r,{code:K.invalid_type,expected:le.date,received:r.parsedType}),xe}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return ee(r,{code:K.invalid_date}),xe}const i=new Un;let s;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):He.assertNever(r);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eh({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}eh.create=n=>new eh({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ve.ZodDate,...be(n)});class uR extends Ue{_parse(e){if(this._getType(e)!==le.symbol){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.symbol,received:i.parsedType}),xe}return Zi(e.data)}}uR.create=n=>new uR({typeName:ve.ZodSymbol,...be(n)});class dR extends Ue{_parse(e){if(this._getType(e)!==le.undefined){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.undefined,received:i.parsedType}),xe}return Zi(e.data)}}dR.create=n=>new dR({typeName:ve.ZodUndefined,...be(n)});class fR extends Ue{_parse(e){if(this._getType(e)!==le.null){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.null,received:i.parsedType}),xe}return Zi(e.data)}}fR.create=n=>new fR({typeName:ve.ZodNull,...be(n)});class hR extends Ue{constructor(){super(...arguments),this._any=!0}_parse(e){return Zi(e.data)}}hR.create=n=>new hR({typeName:ve.ZodAny,...be(n)});class OS extends Ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Zi(e.data)}}OS.create=n=>new OS({typeName:ve.ZodUnknown,...be(n)});class ul extends Ue{_parse(e){const t=this._getOrReturnCtx(e);return ee(t,{code:K.invalid_type,expected:le.never,received:t.parsedType}),xe}}ul.create=n=>new ul({typeName:ve.ZodNever,...be(n)});class pR extends Ue{_parse(e){if(this._getType(e)!==le.undefined){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.void,received:i.parsedType}),xe}return Zi(e.data)}}pR.create=n=>new pR({typeName:ve.ZodVoid,...be(n)});class yr extends Ue{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==le.array)return ee(t,{code:K.invalid_type,expected:le.array,received:t.parsedType}),xe;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(ee(t,{code:o?K.too_big:K.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(ee(t,{code:K.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(ee(t,{code:K.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Cr(t,o,t.path,a)))).then(o=>Un.mergeArray(i,o));const r=[...t.data].map((o,a)=>s.type._parseSync(new Cr(t,o,t.path,a)));return Un.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new yr({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new yr({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new yr({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}yr.create=(n,e)=>new yr({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...be(e)});function Vu(n){if(n instanceof Mt){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=il.create(Vu(i))}return new Mt({...n._def,shape:()=>e})}else return n instanceof yr?new yr({...n._def,type:Vu(n.element)}):n instanceof il?il.create(Vu(n.unwrap())):n instanceof ih?ih.create(Vu(n.unwrap())):n instanceof pu?pu.create(n.items.map(e=>Vu(e))):n}class Mt extends Ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=He.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==le.object){const c=this._getOrReturnCtx(e);return ee(c,{code:K.invalid_type,expected:le.object,received:c.parsedType}),xe}const{status:i,ctx:s}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ul&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=r[c],p=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Cr(s,p,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof ul){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(ee(s,{code:K.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const p=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Cr(s,p,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const p=await u.key,m=await u.value;c.push({key:p,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>Un.mergeObjectSync(i,c)):Un.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new Mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var r,o;const s=((o=(r=this._def).errorMap)==null?void 0:o.call(r,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:ce.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const t={};for(const i of He.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new Mt({...this._def,shape:()=>t})}omit(e){const t={};for(const i of He.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new Mt({...this._def,shape:()=>t})}deepPartial(){return Vu(this)}partial(e){const t={};for(const i of He.objectKeys(this.shape)){const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()}return new Mt({...this._def,shape:()=>t})}required(e){const t={};for(const i of He.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof il;)r=r._def.innerType;t[i]=r}return new Mt({...this._def,shape:()=>t})}keyof(){return dL(He.objectKeys(this.shape))}}Mt.create=(n,e)=>new Mt({shape:()=>n,unknownKeys:"strip",catchall:ul.create(),typeName:ve.ZodObject,...be(e)});Mt.strictCreate=(n,e)=>new Mt({shape:()=>n,unknownKeys:"strict",catchall:ul.create(),typeName:ve.ZodObject,...be(e)});Mt.lazycreate=(n,e)=>new Mt({shape:n,unknownKeys:"strip",catchall:ul.create(),typeName:ve.ZodObject,...be(e)});class T0 extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function s(r){for(const a of r)if(a.result.status==="valid")return a.result;for(const a of r)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=r.map(a=>new No(a.ctx.common.issues));return ee(t,{code:K.invalid_union,unionErrors:o}),xe}if(t.common.async)return Promise.all(i.map(async r=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let r;const o=[];for(const l of i){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!r&&(r={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const a=o.map(l=>new No(l));return ee(t,{code:K.invalid_union,unionErrors:a}),xe}}get options(){return this._def.options}}T0.create=(n,e)=>new T0({options:n,typeName:ve.ZodUnion,...be(e)});function US(n,e){const t=Ko(n),i=Ko(e);if(n===e)return{valid:!0,data:n};if(t===le.object&&i===le.object){const s=He.objectKeys(e),r=He.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of r){const l=US(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===le.array&&i===le.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let r=0;r<n.length;r++){const o=n[r],a=e[r],l=US(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===le.date&&i===le.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class A0 extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(r,o)=>{if(aR(r)||aR(o))return xe;const a=US(r.value,o.value);return a.valid?((lR(r)||lR(o))&&t.dirty(),{status:t.value,value:a.data}):(ee(i,{code:K.invalid_intersection_types}),xe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,o])=>s(r,o)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}A0.create=(n,e,t)=>new A0({left:n,right:e,typeName:ve.ZodIntersection,...be(t)});class pu extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==le.array)return ee(i,{code:K.invalid_type,expected:le.array,received:i.parsedType}),xe;if(i.data.length<this._def.items.length)return ee(i,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&i.data.length>this._def.items.length&&(ee(i,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Cr(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(r).then(o=>Un.mergeArray(t,o)):Un.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new pu({...this._def,rest:e})}}pu.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pu({items:n,typeName:ve.ZodTuple,rest:null,...be(e)})};class b0 extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==le.object)return ee(i,{code:K.invalid_type,expected:le.object,received:i.parsedType}),xe;const s=[],r=this._def.keyType,o=this._def.valueType;for(const a in i.data)s.push({key:r._parse(new Cr(i,a,i.path,a)),value:o._parse(new Cr(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?Un.mergeObjectAsync(t,s):Un.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof Ue?new b0({keyType:e,valueType:t,typeName:ve.ZodRecord,...be(i)}):new b0({keyType:dr.create(),valueType:e,typeName:ve.ZodRecord,...be(t)})}}class mR extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==le.map)return ee(i,{code:K.invalid_type,expected:le.map,received:i.parsedType}),xe;const s=this._def.keyType,r=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:s._parse(new Cr(i,a,i.path,[c,"key"])),value:r._parse(new Cr(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return xe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return xe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}mR.create=(n,e,t)=>new mR({valueType:e,keyType:n,typeName:ve.ZodMap,...be(t)});class Qp extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==le.set)return ee(i,{code:K.invalid_type,expected:le.set,received:i.parsedType}),xe;const s=this._def;s.minSize!==null&&i.data.size<s.minSize.value&&(ee(i,{code:K.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&i.data.size>s.maxSize.value&&(ee(i,{code:K.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const r=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return xe;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...i.data.values()].map((l,c)=>r._parse(new Cr(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Qp({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new Qp({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Qp.create=(n,e)=>new Qp({valueType:n,minSize:null,maxSize:null,typeName:ve.ZodSet,...be(e)});class $S extends Ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}$S.create=(n,e)=>new $S({getter:n,typeName:ve.ZodLazy,...be(e)});class gR extends Ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ee(t,{received:t.data,code:K.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}gR.create=(n,e)=>new gR({value:n,typeName:ve.ZodLiteral,...be(e)});function dL(n,e){return new th({values:n,typeName:ve.ZodEnum,...be(e)})}class th extends Ue{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return ee(t,{expected:He.joinValues(i),received:t.parsedType,code:K.invalid_type}),xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return ee(t,{received:t.data,code:K.invalid_enum_value,options:i}),xe}return Zi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return th.create(e,{...this._def,...t})}exclude(e,t=this._def){return th.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}th.create=dL;class yR extends Ue{_parse(e){const t=He.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==le.string&&i.parsedType!==le.number){const s=He.objectValues(t);return ee(i,{expected:He.joinValues(s),received:i.parsedType,code:K.invalid_type}),xe}if(this._cache||(this._cache=new Set(He.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=He.objectValues(t);return ee(i,{received:i.data,code:K.invalid_enum_value,options:s}),xe}return Zi(e.data)}get enum(){return this._def.values}}yR.create=(n,e)=>new yR({values:n,typeName:ve.ZodNativeEnum,...be(e)});class R0 extends Ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==le.promise&&t.common.async===!1)return ee(t,{code:K.invalid_type,expected:le.promise,received:t.parsedType}),xe;const i=t.parsedType===le.promise?t.data:Promise.resolve(t.data);return Zi(i.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}R0.create=(n,e)=>new R0({type:n,typeName:ve.ZodPromise,...be(e)});class nh extends Ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,r={addIssue:o=>{ee(i,o),o.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){const o=s.transform(i.data,r);if(i.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return xe;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?xe:l.status==="dirty"||t.value==="dirty"?Kh(l.value):l});{if(t.value==="aborted")return xe;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?xe:a.status==="dirty"||t.value==="dirty"?Kh(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,r);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?xe:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?xe:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Zf(o))return xe;const a=s.transform(o.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Zf(o)?Promise.resolve(s.transform(o.value,r)).then(a=>({status:t.value,value:a})):xe);He.assertNever(s)}}nh.create=(n,e,t)=>new nh({schema:n,typeName:ve.ZodEffects,effect:e,...be(t)});nh.createWithPreprocess=(n,e,t)=>new nh({schema:e,effect:{type:"preprocess",transform:n},typeName:ve.ZodEffects,...be(t)});class il extends Ue{_parse(e){return this._getType(e)===le.undefined?Zi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}il.create=(n,e)=>new il({innerType:n,typeName:ve.ZodOptional,...be(e)});class ih extends Ue{_parse(e){return this._getType(e)===le.null?Zi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ih.create=(n,e)=>new ih({innerType:n,typeName:ve.ZodNullable,...be(e)});class VS extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===le.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}VS.create=(n,e)=>new VS({innerType:n,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...be(e)});class BS extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return E0(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new No(i.common.issues)},input:i.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new No(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}BS.create=(n,e)=>new BS({innerType:n,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...be(e)});class vR extends Ue{_parse(e){if(this._getType(e)!==le.nan){const i=this._getOrReturnCtx(e);return ee(i,{code:K.invalid_type,expected:le.nan,received:i.parsedType}),xe}return{status:"valid",value:e.data}}}vR.create=n=>new vR({typeName:ve.ZodNaN,...be(n)});class C8 extends Ue{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class yA extends Ue{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?xe:r.status==="dirty"?(t.dirty(),Kh(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?xe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(e,t){return new yA({in:e,out:t,typeName:ve.ZodPipeline})}}class HS extends Ue{_parse(e){const t=this._def.innerType._parse(e),i=s=>(Zf(s)&&(s.value=Object.freeze(s.value)),s);return E0(t)?t.then(s=>i(s)):i(t)}unwrap(){return this._def.innerType}}HS.create=(n,e)=>new HS({innerType:n,typeName:ve.ZodReadonly,...be(e)});var ve;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ve||(ve={}));const Tl=dr.create,xR=fu.create;hu.create;const S8=_0.create;eh.create;const wR=OS.create;ul.create;const Yh=yr.create,E8=Mt.create,_8=T0.create;A0.create;pu.create;const T8=b0.create,A8=$S.create,b8=th.create;R0.create;il.create;ih.create;const Uu={string:n=>dr.create({...n,coerce:!0}),number:n=>fu.create({...n,coerce:!0}),boolean:n=>_0.create({...n,coerce:!0}),bigint:n=>hu.create({...n,coerce:!0}),date:n=>eh.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let R8,P8;function M8(){return{geminiUrl:R8,vertexUrl:P8}}function N8(n,e,t){var i,s,r;if(!(!((i=n.httpOptions)===null||i===void 0)&&i.baseUrl)){const o=M8();return n.vertexai?(s=o.vertexUrl)!==null&&s!==void 0?s:e:(r=o.geminiUrl)!==null&&r!==void 0?r:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bu{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(n,e,t){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const u=l[c];h(u,e.slice(r+1),t[c])}else for(const c of l)h(c,e.slice(r+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];h(l[0],e.slice(r+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function f(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const r=n[s];return Array.isArray(r)?r.map(o=>f(o,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CR;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(CR||(CR={}));var SR;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(SR||(SR={}));var fr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(fr||(fr={}));var ER;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ER||(ER={}));var _R;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_R||(_R={}));var TR;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(TR||(TR={}));var AR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(AR||(AR={}));var bR;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(bR||(bR={}));var RR;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(RR||(RR={}));var PR;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PR||(PR={}));var MR;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(MR||(MR={}));var NR;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(NR||(NR={}));var IR;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(IR||(IR={}));var kR;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kR||(kR={}));var DR;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(DR||(DR={}));var LR;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(LR||(LR={}));var P0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(P0||(P0={}));var FR;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(FR||(FR={}));var zS;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zS||(zS={}));var OR;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OR||(OR={}));var UR;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(UR||(UR={}));var $R;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})($R||($R={}));var VR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(VR||(VR={}));var BR;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(BR||(BR={}));var HR;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(HR||(HR={}));var zR;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(zR||(zR={}));var jR;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(jR||(jR={}));var GR;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(GR||(GR={}));var qR;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qR||(qR={}));var WR;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WR||(WR={}));var KR;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KR||(KR={}));var YR;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(YR||(YR={}));var JR;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(JR||(JR={}));var XR;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(XR||(XR={}));var QR;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(QR||(QR={}));var ZR;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ZR||(ZR={}));var eP;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eP||(eP={}));var tP;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(tP||(tP={}));var nP;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nP||(nP={}));var iP;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(iP||(iP={}));var sP;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sP||(sP={}));var od;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(od||(od={}));class jS{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fh{get text(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const p=[];for(const m of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,w]of Object.entries(m))g!=="text"&&g!=="thought"&&(w!==null||w!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const p of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,i,s,r,o,a,l,c;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,s,r,o,a,l,c;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class rP{}class oP{}class I8{}class k8{}class aP{}class lP{}class cP{}class D8{}class uP{}class dP{}class fP{}class L8{}class F8{}class O8{}class hP{}class U8{get text(){var e,t,i;let s="",r=!1;const o=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,t,i;let s="";const r=[];for(const o of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&r.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class $8{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fL(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function hL(n){return Array.isArray(n)?n.map(e=>M0(e)):[M0(n)]}function M0(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function pL(n){const e=M0(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mL(n){const e=M0(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pP(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function gL(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>pP(e)):[pP(n)]}function GS(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function mP(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function gP(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Cn(n){if(n==null)throw new Error("ContentUnion is required");return GS(n)?n:{role:"user",parts:gL(n)}}function yL(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Cn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Cn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Cn(t)):[Cn(e)]}function Ki(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(mP(n)||gP(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cn(n)]}const e=[],t=[],i=GS(n[0]);for(const s of n){const r=GS(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(mP(s)||gP(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:gL(t)}),e}const V8=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),yP=b8(["string","number","integer","object","array","boolean","null"]),B8=_8([yP,Yh(yP)]);function H8(n=!0){const e=A8(()=>{const t=E8({type:B8.optional(),format:Tl().optional(),title:Tl().optional(),description:Tl().optional(),default:wR().optional(),items:e.optional(),minItems:Uu.string().optional(),maxItems:Uu.string().optional(),enum:Yh(wR()).optional(),properties:T8(Tl(),e).optional(),required:Yh(Tl()).optional(),minProperties:Uu.string().optional(),maxProperties:Uu.string().optional(),propertyOrdering:Yh(Tl()).optional(),minimum:xR().optional(),maximum:xR().optional(),minLength:Uu.string().optional(),maxLength:Uu.string().optional(),pattern:Tl().optional(),anyOf:Yh(e).optional(),additionalProperties:S8().optional()});return n?t.strict():t});return e}function z8(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(fr).includes(t[0].toUpperCase())?t[0].toUpperCase():fr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(fr).includes(i.toUpperCase())?i.toUpperCase():fr.TYPE_UNSPECIFIED})}}function Ed(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&z8(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(fr).includes(a.toUpperCase())?a.toUpperCase():fr.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Ed(a);else if(i.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Ed(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=Ed(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Zp(n){if(Object.keys(n).includes("$schema")){delete n.$schema;const e=H8().parse(n);return Ed(e)}else return Ed(n)}function vA(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function xA(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function vh(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(e.parameters=Zp(e.parameters)),e.response&&(e.response=Zp(e.response));return n}function xh(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function j8(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Fo(n,e){if(typeof e!="string")throw new Error("name must be a string");return j8(n,e,"cachedContents")}function vL(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Oo(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function G8(n){return n!=null&&typeof n=="object"&&"name"in n}function q8(n){return n!=null&&typeof n=="object"&&"video"in n}function W8(n){return n!=null&&typeof n=="object"&&"uri"in n}function xL(n){var e;let t;if(G8(n)&&(t=n.name),!(W8(n)&&(t=n.uri,t===void 0))&&!(q8(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function wL(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function CL(n){for(const e of["models","tunedModels","publisherModels"])if(K8(n,e))return n[e];return[]}function K8(n,e){return n!==null&&typeof n=="object"&&e in n}function Y8(n,e={}){const t=n,i={name:t.name,description:t.description,parameters:Ed(Kx(t.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function J8(n,e={}){const t=[],i=new Set;for(const s of n){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const o=Y8(s,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function X8(n){const e=[];for(const t of n)e.push(Kx(t));return e}function Q8(n){const e={};for(const[t,i]of Object.entries(n)){const s=i;e[t]=Kx(s)}return e}function Kx(n){const e=new Set(["items"]),t=new Set(["anyOf"]),i=new Set(["properties"]),s={};for(const[r,o]of Object.entries(n))if(e.has(r))s[r]=Kx(o);else if(t.has(r))s[r]=X8(o);else if(i.has(r))s[r]=Q8(o);else if(r==="type"){const a=o.toUpperCase();s[r]=Object.values(fr).includes(a)?a:fr.TYPE_UNSPECIFIED}else V8.has(r)&&(s[r]=o);return s}function SL(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Z8(n){const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function wh(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function EL(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eW(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function tW(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function nW(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function iW(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],eW(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],tW(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],nW(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function _L(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>iW(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function sW(n){const e={},t=f(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=f(n,["default"]);i!=null&&h(e,["default"],i);const s=f(n,["description"]);s!=null&&h(e,["description"],s);const r=f(n,["enum"]);r!=null&&h(e,["enum"],r);const o=f(n,["example"]);o!=null&&h(e,["example"],o);const a=f(n,["format"]);a!=null&&h(e,["format"],a);const l=f(n,["items"]);l!=null&&h(e,["items"],l);const c=f(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(n,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(n,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const m=f(n,["maximum"]);m!=null&&h(e,["maximum"],m);const g=f(n,["minItems"]);g!=null&&h(e,["minItems"],g);const w=f(n,["minLength"]);w!=null&&h(e,["minLength"],w);const v=f(n,["minProperties"]);v!=null&&h(e,["minProperties"],v);const S=f(n,["minimum"]);S!=null&&h(e,["minimum"],S);const x=f(n,["nullable"]);x!=null&&h(e,["nullable"],x);const C=f(n,["pattern"]);C!=null&&h(e,["pattern"],C);const _=f(n,["properties"]);_!=null&&h(e,["properties"],_);const A=f(n,["propertyOrdering"]);A!=null&&h(e,["propertyOrdering"],A);const P=f(n,["required"]);P!=null&&h(e,["required"],P);const M=f(n,["title"]);M!=null&&h(e,["title"],M);const N=f(n,["type"]);return N!=null&&h(e,["type"],N),e}function rW(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&h(e,["category"],t);const i=f(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function oW(n){const e={},t=f(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=f(n,["description"]);i!=null&&h(e,["description"],i);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(n,["response"]);a!=null&&h(e,["response"],a);const l=f(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function aW(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function lW(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],aW(t)),e}function cW(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function uW(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],cW(t)),e}function dW(){return{}}function fW(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>oW(c))),h(e,["functionDeclarations"],l)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],lW(i));const s=f(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],uW(s)),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(n,["urlContext"])!=null&&h(e,["urlContext"],dW());const o=f(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(n,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function hW(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function pW(n){const e={},t=f(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=f(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function mW(n){const e={},t=f(n,["latLng"]);t!=null&&h(e,["latLng"],pW(t));const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function gW(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],hW(t));const i=f(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],mW(i)),e}function yW(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function TL(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],yW(t)),e}function vW(n){const e={},t=f(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=f(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],TL(i)),e}function xW(n){const e={},t=f(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>vW(s))),h(e,["speakerVoiceConfigs"],i)}return e}function wW(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],TL(t));const i=f(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],xW(i));const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function CW(n){const e={},t=f(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=f(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function SW(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],_L(Cn(s)));const r=f(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=f(e,["topP"]);o!=null&&h(i,["topP"],o);const a=f(e,["topK"]);a!=null&&h(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(i,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=f(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&h(i,["presencePenalty"],g);const w=f(e,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const v=f(e,["seed"]);v!=null&&h(i,["seed"],v);const S=f(e,["responseMimeType"]);S!=null&&h(i,["responseMimeType"],S);const x=f(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],sW(Zp(x)));const C=f(e,["responseJsonSchema"]);if(C!=null&&h(i,["responseJsonSchema"],C),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(t!==void 0&&_!=null){let L=_;Array.isArray(L)&&(L=L.map($=>rW($))),h(t,["safetySettings"],L)}const A=f(e,["tools"]);if(t!==void 0&&A!=null){let L=xh(A);Array.isArray(L)&&(L=L.map($=>fW(vh($)))),h(t,["tools"],L)}const P=f(e,["toolConfig"]);if(t!==void 0&&P!=null&&h(t,["toolConfig"],gW(P)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],Fo(n,M));const N=f(e,["responseModalities"]);N!=null&&h(i,["responseModalities"],N);const I=f(e,["mediaResolution"]);I!=null&&h(i,["mediaResolution"],I);const k=f(e,["speechConfig"]);if(k!=null&&h(i,["speechConfig"],wW(vA(k))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);return D!=null&&h(i,["thinkingConfig"],CW(D)),i}function EW(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["request","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>_L(a))),h(t,["request","contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["request","generationConfig"],SW(n,r,t)),t}function _W(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&h(t,["fileName"],i);const s=f(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>EW(n,o))),h(t,["requests","requests"],r)}return t}function TW(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function AW(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["src"]);s!=null&&h(t,["batch","inputConfig"],_W(n,SL(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["config"],TW(r,t)),t}function bW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function RW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function PW(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function MW(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],PW(t,e)),e}function NW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function IW(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const s=f(n,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kW(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const s=f(n,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function DW(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=f(n,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],kW(Z8(s))),t}function LW(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],Ke(n,i));const s=f(e,["src"]);s!=null&&h(t,["inputConfig"],IW(SL(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["config"],DW(r,t)),t}function FW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function OW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function UW(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=f(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function $W(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],UW(t,e)),e}function VW(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],wh(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function AL(){return{}}function BW(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function HW(n){const e={},t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function zW(n){const e={},t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function jW(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],BW(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],HW(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],zW(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function GW(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>jW(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function qW(n){const e={},t=f(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function WW(n){const e={},t=f(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=f(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function KW(n){const e={},t=f(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>WW(s))),h(e,["urlMetadata"],i)}return e}function YW(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],GW(t));const i=f(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],qW(i));const s=f(n,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const r=f(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=f(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],KW(o));const a=f(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(n,["index"]);c!=null&&h(e,["index"],c);const u=f(n,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(n,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function JW(n){const e={},t=f(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>YW(a))),h(e,["candidates"],o)}const i=f(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const s=f(n,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const r=f(n,["usageMetadata"]);return r!=null&&h(e,["usageMetadata"],r),e}function XW(n){const e={},t=f(n,["response"]);return t!=null&&h(e,["response"],JW(t)),f(n,["error"])!=null&&h(e,["error"],AL()),e}function QW(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>XW(r))),h(e,["inlinedResponses"],s)}return e}function qS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["metadata","state"]);s!=null&&h(e,["state"],EL(s));const r=f(n,["metadata","createTime"]);r!=null&&h(e,["createTime"],r);const o=f(n,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=f(n,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(n,["metadata","model"]);l!=null&&h(e,["model"],l);const c=f(n,["metadata","output"]);return c!=null&&h(e,["dest"],QW(c)),e}function ZW(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>qS(r))),h(e,["batchJobs"],s)}return e}function e9(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["done"]);return i!=null&&h(e,["done"],i),f(n,["error"])!=null&&h(e,["error"],AL()),e}function bL(n){const e={},t=f(n,["details"]);t!=null&&h(e,["details"],t);const i=f(n,["code"]);i!=null&&h(e,["code"],i);const s=f(n,["message"]);return s!=null&&h(e,["message"],s),e}function t9(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const s=f(n,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function n9(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const s=f(n,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function WS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["state"]);s!=null&&h(e,["state"],EL(s));const r=f(n,["error"]);r!=null&&h(e,["error"],bL(r));const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(n,["startTime"]);a!=null&&h(e,["startTime"],a);const l=f(n,["endTime"]);l!=null&&h(e,["endTime"],l);const c=f(n,["updateTime"]);c!=null&&h(e,["updateTime"],c);const u=f(n,["model"]);u!=null&&h(e,["model"],u);const p=f(n,["inputConfig"]);p!=null&&h(e,["src"],t9(p));const m=f(n,["outputConfig"]);return m!=null&&h(e,["dest"],n9(m)),e}function i9(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>WS(r))),h(e,["batchJobs"],s)}return e}function s9(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["done"]);i!=null&&h(e,["done"],i);const s=f(n,["error"]);return s!=null&&h(e,["error"],bL(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mu;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(mu||(mu={}));class Qg{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r9 extends bu{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${s}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new Qg(mu.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=LW(this.apiClient,e);return a=fe("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>WS(u))}else{const c=AW(this.apiClient,e);return a=fe("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qS(u))}}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=FW(this.apiClient,e);return a=fe("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>WS(u))}else{const c=bW(this.apiClient,e);return a=fe("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>qS(u))}}async cancel(e){var t,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const l=OW(this.apiClient,e);o=fe("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=RW(this.apiClient,e);o=fe("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=$W(e);return a=fe("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=i9(u),m=new hP;return Object.assign(m,p),m})}else{const c=MW(e);return a=fe("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=ZW(u),m=new hP;return Object.assign(m,p),m})}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=VW(this.apiClient,e);return a=fe("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>s9(u))}else{const c=NW(this.apiClient,e);return a=fe("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>e9(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o9(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function a9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function l9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function c9(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],o9(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],a9(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],l9(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function vP(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>c9(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function u9(n){const e={},t=f(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=f(n,["description"]);i!=null&&h(e,["description"],i);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(n,["response"]);a!=null&&h(e,["response"],a);const l=f(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function d9(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function f9(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],d9(t)),e}function h9(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function p9(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],h9(t)),e}function m9(){return{}}function g9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>u9(c))),h(e,["functionDeclarations"],l)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],f9(i));const s=f(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],p9(s)),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(n,["urlContext"])!=null&&h(e,["urlContext"],m9());const o=f(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(n,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function y9(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function v9(n){const e={},t=f(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=f(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function x9(n){const e={},t=f(n,["latLng"]);t!=null&&h(e,["latLng"],v9(t));const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function w9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],y9(t));const i=f(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],x9(i)),e}function C9(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=f(n,["contents"]);if(e!==void 0&&o!=null){let u=Ki(o);Array.isArray(u)&&(u=u.map(p=>vP(p))),h(e,["contents"],u)}const a=f(n,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],vP(Cn(a)));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(p=>g9(p))),h(e,["tools"],u)}const c=f(n,["toolConfig"]);if(e!==void 0&&c!=null&&h(e,["toolConfig"],w9(c)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function S9(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],fL(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],C9(s,t)),t}function E9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function _9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function T9(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),t}function A9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],T9(s,t)),t}function b9(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function R9(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],b9(t,e)),e}function P9(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function M9(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["data"]);i!=null&&h(e,["data"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function N9(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function I9(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],P9(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],M9(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],N9(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function xP(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>I9(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function k9(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const s=f(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=f(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=f(n,["response"]);o!=null&&h(e,["response"],o);const a=f(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function D9(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function L9(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],D9(t)),e}function F9(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function O9(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],F9(t)),e}function U9(){return{}}function $9(n){const e={},t=f(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function V9(n){const e={},t=f(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],$9(t));const i=f(n,["authType"]);i!=null&&h(e,["authType"],i);const s=f(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=f(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=f(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function B9(n){const e={},t=f(n,["authConfig"]);return t!=null&&h(e,["authConfig"],V9(t)),e}function H9(){return{}}function z9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>k9(m))),h(e,["functionDeclarations"],p)}const i=f(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],L9(s));const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],O9(r)),f(n,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],U9());const a=f(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],B9(a)),f(n,["urlContext"])!=null&&h(e,["urlContext"],H9());const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(n,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function j9(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function G9(n){const e={},t=f(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=f(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function q9(n){const e={},t=f(n,["latLng"]);t!=null&&h(e,["latLng"],G9(t));const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function W9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],j9(t));const i=f(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],q9(i)),e}function K9(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=f(n,["contents"]);if(e!==void 0&&o!=null){let p=Ki(o);Array.isArray(p)&&(p=p.map(m=>xP(m))),h(e,["contents"],p)}const a=f(n,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],xP(Cn(a)));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>z9(m))),h(e,["tools"],p)}const c=f(n,["toolConfig"]);e!==void 0&&c!=null&&h(e,["toolConfig"],W9(c));const u=f(n,["kmsKeyName"]);return e!==void 0&&u!=null&&h(e,["encryption_spec","kmsKeyName"],u),t}function Y9(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],fL(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],K9(s,t)),t}function J9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function X9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function Q9(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),t}function Z9(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Fo(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],Q9(s,t)),t}function e7(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function t7(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],e7(t,e)),e}function lv(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["model"]);s!=null&&h(e,["model"],s);const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=f(n,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=f(n,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=f(n,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function n7(){return{}}function i7(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>lv(r))),h(e,["cachedContents"],s)}return e}function cv(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["model"]);s!=null&&h(e,["model"],s);const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=f(n,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=f(n,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=f(n,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function s7(){return{}}function r7(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>cv(r))),h(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o7 extends bu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qg(mu.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Y9(this.apiClient,e);return a=fe("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>cv(u))}else{const c=S9(this.apiClient,e);return a=fe("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>lv(u))}}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=J9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>cv(u))}else{const c=E9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>lv(u))}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=X9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=s7(),p=new dP;return Object.assign(p,u),p})}else{const c=_9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=n7(),p=new dP;return Object.assign(p,u),p})}}async update(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Z9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>cv(u))}else{const c=A9(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>lv(u))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=t7(e);return a=fe("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=r7(u),m=new fP;return Object.assign(m,p),m})}else{const c=R9(e);return a=fe("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=i7(u),m=new fP;return Object.assign(m,p),m})}}}function wP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(n){return this instanceof rt?(this.v=n,this):new rt(n)}function _d(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(w){return Promise.resolve(w).then(g,p)}}function a(g,w){i[g]&&(s[g]=function(v){return new Promise(function(S,x){r.push([g,v,S,x])>1||l(g,v)})},w&&(s[g]=w(s[g])))}function l(g,w){try{c(i[g](w))}catch(v){m(r[0][3],v)}}function c(g){g.value instanceof rt?Promise.resolve(g.value.v).then(u,p):m(r[0][2],g)}function u(g){l("next",g)}function p(g){l("throw",g)}function m(g,w){g(w),r.shift(),r.length&&l(r[0][0],r[0][1])}}function bp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wP=="function"?wP(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a7(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:RL(t)}function RL(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function l7(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function CP(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let r=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),r&&!RL(n[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class c7{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new u7(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class u7{constructor(e,t,i,s={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),l7(r)}async sendMessage(e){var t;await this.sendPromise;const i=Cn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,o,a;const l=await s,c=(o=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(p))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=Cn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){const t=e?CP(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return _d(this,arguments,function*(){var o,a,l,c;const u=[];try{for(var p=!0,m=bp(e),g;g=yield rt(m.next()),o=g.done,!o;p=!0){c=g.value,p=!1;const w=c;if(a7(w)){const v=(s=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;v!==void 0&&u.push(v)}yield yield rt(w)}}catch(w){a={error:w}}finally{try{!p&&!o&&(l=m.return)&&(yield rt(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,u)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(r=>r.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...CP(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yx extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yx.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d7(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function f7(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],d7(t,e)),e}function h7(n){const e={},t=f(n,["details"]);t!=null&&h(e,["details"],t);const i=f(n,["message"]);i!=null&&h(e,["message"],i);const s=f(n,["code"]);return s!=null&&h(e,["code"],s),e}function p7(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["mimeType"]);s!=null&&h(e,["mimeType"],s);const r=f(n,["sizeBytes"]);r!=null&&h(e,["sizeBytes"],r);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(n,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=f(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=f(n,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const u=f(n,["uri"]);u!=null&&h(e,["uri"],u);const p=f(n,["downloadUri"]);p!=null&&h(e,["downloadUri"],p);const m=f(n,["state"]);m!=null&&h(e,["state"],m);const g=f(n,["source"]);g!=null&&h(e,["source"],g);const w=f(n,["videoMetadata"]);w!=null&&h(e,["videoMetadata"],w);const v=f(n,["error"]);return v!=null&&h(e,["error"],h7(v)),e}function m7(n){const e={},t=f(n,["file"]);t!=null&&h(e,["file"],p7(t));const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function g7(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","file"],xL(t));const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function y7(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","file"],xL(t));const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function v7(n){const e={},t=f(n,["details"]);t!=null&&h(e,["details"],t);const i=f(n,["message"]);i!=null&&h(e,["message"],i);const s=f(n,["code"]);return s!=null&&h(e,["code"],s),e}function KS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["mimeType"]);s!=null&&h(e,["mimeType"],s);const r=f(n,["sizeBytes"]);r!=null&&h(e,["sizeBytes"],r);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=f(n,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=f(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=f(n,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const u=f(n,["uri"]);u!=null&&h(e,["uri"],u);const p=f(n,["downloadUri"]);p!=null&&h(e,["downloadUri"],p);const m=f(n,["state"]);m!=null&&h(e,["state"],m);const g=f(n,["source"]);g!=null&&h(e,["source"],g);const w=f(n,["videoMetadata"]);w!=null&&h(e,["videoMetadata"],w);const v=f(n,["error"]);return v!=null&&h(e,["error"],v7(v)),e}function x7(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>KS(r))),h(e,["files"],s)}return e}function w7(){return{}}function C7(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S7 extends bu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qg(mu.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>KS(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=f7(e);return r=fe("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=x7(l),u=new L8;return Object.assign(u,c),u})}}async createInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=m7(e);return r=fe("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(()=>{const l=w7(),c=new F8;return Object.assign(c,l),c})}}async get(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=g7(e);return r=fe("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>KS(l))}}async delete(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=y7(e);return r=fe("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(()=>{const l=C7(),c=new O8;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E7(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function _7(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function PL(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],E7(t)),e}function T7(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],_7(t)),e}function A7(n){const e={},t=f(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=f(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],PL(i)),e}function b7(n){const e={},t=f(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>A7(s))),h(e,["speakerVoiceConfigs"],i)}return e}function R7(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],PL(t));const i=f(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],b7(i));const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function P7(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],T7(t)),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function M7(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function N7(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function I7(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function k7(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["data"]);i!=null&&h(e,["data"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function D7(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function L7(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function F7(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],M7(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],I7(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],D7(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function O7(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],N7(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],k7(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],L7(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function U7(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>F7(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function $7(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>O7(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function V7(n){const e={},t=f(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=f(n,["description"]);i!=null&&h(e,["description"],i);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(n,["response"]);a!=null&&h(e,["response"],a);const l=f(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function B7(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const s=f(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=f(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=f(n,["response"]);o!=null&&h(e,["response"],o);const a=f(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function H7(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function z7(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function j7(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],H7(t)),e}function G7(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],z7(t)),e}function q7(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function W7(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function K7(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],q7(t)),e}function Y7(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],W7(t)),e}function J7(){return{}}function X7(n){const e={},t=f(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function Q7(n){const e={},t=f(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],X7(t));const i=f(n,["authType"]);i!=null&&h(e,["authType"],i);const s=f(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=f(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=f(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function Z7(n){const e={},t=f(n,["authConfig"]);return t!=null&&h(e,["authConfig"],Q7(t)),e}function eK(){return{}}function tK(){return{}}function nK(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>V7(c))),h(e,["functionDeclarations"],l)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],j7(i));const s=f(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],K7(s)),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(n,["urlContext"])!=null&&h(e,["urlContext"],eK());const o=f(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(n,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function iK(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>B7(m))),h(e,["functionDeclarations"],p)}const i=f(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],G7(s));const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],Y7(r)),f(n,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],J7());const a=f(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],Z7(a)),f(n,["urlContext"])!=null&&h(e,["urlContext"],tK());const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(n,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function sK(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rK(n){const e={},t=f(n,["handle"]);t!=null&&h(e,["handle"],t);const i=f(n,["transparent"]);return i!=null&&h(e,["transparent"],i),e}function SP(){return{}}function EP(){return{}}function oK(n){const e={},t=f(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=f(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=f(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=f(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=f(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function aK(n){const e={},t=f(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=f(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=f(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=f(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=f(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function lK(n){const e={},t=f(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],oK(t));const i=f(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=f(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function cK(n){const e={},t=f(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],aK(t));const i=f(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=f(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function uK(n){const e={},t=f(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function dK(n){const e={},t=f(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function fK(n){const e={},t=f(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=f(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],uK(i)),e}function hK(n){const e={},t=f(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=f(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],dK(i)),e}function pK(n){const e={},t=f(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function mK(n){const e={},t=f(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function gK(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=f(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=f(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(n,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],R7(xA(p)));const m=f(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=f(n,["systemInstruction"]);e!==void 0&&g!=null&&h(e,["setup","systemInstruction"],U7(Cn(g)));const w=f(n,["tools"]);if(e!==void 0&&w!=null){let P=xh(w);Array.isArray(P)&&(P=P.map(M=>nK(vh(M)))),h(e,["setup","tools"],P)}const v=f(n,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],sK(v));const S=f(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&h(e,["setup","inputAudioTranscription"],SP());const x=f(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],SP());const C=f(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],lK(C));const _=f(n,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],fK(_));const A=f(n,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],pK(A)),t}function yK(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=f(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=f(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(n,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],P7(xA(p)));const m=f(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=f(n,["systemInstruction"]);e!==void 0&&g!=null&&h(e,["setup","systemInstruction"],$7(Cn(g)));const w=f(n,["tools"]);if(e!==void 0&&w!=null){let P=xh(w);Array.isArray(P)&&(P=P.map(M=>iK(vh(M)))),h(e,["setup","tools"],P)}const v=f(n,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],rK(v));const S=f(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&h(e,["setup","inputAudioTranscription"],EP());const x=f(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],EP());const C=f(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],cK(C));const _=f(n,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],hK(_));const A=f(n,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],mK(A)),t}function vK(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],gK(s,t)),t}function xK(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],yK(s,t)),t}function wK(){return{}}function CK(){return{}}function SK(){return{}}function EK(){return{}}function _K(n){const e={},t=f(n,["media"]);t!=null&&h(e,["mediaChunks"],hL(t));const i=f(n,["audio"]);i!=null&&h(e,["audio"],mL(i));const s=f(n,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const r=f(n,["video"]);r!=null&&h(e,["video"],pL(r));const o=f(n,["text"]);return o!=null&&h(e,["text"],o),f(n,["activityStart"])!=null&&h(e,["activityStart"],wK()),f(n,["activityEnd"])!=null&&h(e,["activityEnd"],SK()),e}function TK(n){const e={},t=f(n,["media"]);t!=null&&h(e,["mediaChunks"],hL(t));const i=f(n,["audio"]);i!=null&&h(e,["audio"],mL(i));const s=f(n,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const r=f(n,["video"]);r!=null&&h(e,["video"],pL(r));const o=f(n,["text"]);return o!=null&&h(e,["text"],o),f(n,["activityStart"])!=null&&h(e,["activityStart"],CK()),f(n,["activityEnd"])!=null&&h(e,["activityEnd"],EK()),e}function ML(n){const e={},t=f(n,["text"]);t!=null&&h(e,["text"],t);const i=f(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function AK(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>ML(s))),h(e,["weightedPrompts"],i)}return e}function NL(n){const e={},t=f(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=f(n,["topK"]);i!=null&&h(e,["topK"],i);const s=f(n,["seed"]);s!=null&&h(e,["seed"],s);const r=f(n,["guidance"]);r!=null&&h(e,["guidance"],r);const o=f(n,["bpm"]);o!=null&&h(e,["bpm"],o);const a=f(n,["density"]);a!=null&&h(e,["density"],a);const l=f(n,["brightness"]);l!=null&&h(e,["brightness"],l);const c=f(n,["scale"]);c!=null&&h(e,["scale"],c);const u=f(n,["muteBass"]);u!=null&&h(e,["muteBass"],u);const p=f(n,["muteDrums"]);p!=null&&h(e,["muteDrums"],p);const m=f(n,["onlyBassAndDrums"]);return m!=null&&h(e,["onlyBassAndDrums"],m),e}function bK(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],NL(t)),e}function IL(n){const e={},t=f(n,["model"]);return t!=null&&h(e,["model"],t),e}function kL(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>ML(s))),h(e,["weightedPrompts"],i)}return e}function YS(n){const e={},t=f(n,["setup"]);t!=null&&h(e,["setup"],IL(t));const i=f(n,["clientContent"]);i!=null&&h(e,["clientContent"],kL(i));const s=f(n,["musicGenerationConfig"]);s!=null&&h(e,["musicGenerationConfig"],NL(s));const r=f(n,["playbackControl"]);return r!=null&&h(e,["playbackControl"],r),e}function RK(){return{}}function PK(n){const e={},t=f(n,["sessionId"]);return t!=null&&h(e,["sessionId"],t),e}function MK(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function NK(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function IK(n){const e={},t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function kK(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["data"]);i!=null&&h(e,["data"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function DK(n){const e={},t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function LK(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function FK(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],MK(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],IK(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],DK(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function OK(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],NK(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],kK(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],LK(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function UK(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>FK(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function $K(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>OK(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function _P(n){const e={},t=f(n,["text"]);t!=null&&h(e,["text"],t);const i=f(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function TP(n){const e={},t=f(n,["text"]);t!=null&&h(e,["text"],t);const i=f(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function VK(n){const e={},t=f(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=f(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function BK(n){const e={},t=f(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>VK(s))),h(e,["urlMetadata"],i)}return e}function HK(n){const e={},t=f(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],UK(t));const i=f(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const s=f(n,["interrupted"]);s!=null&&h(e,["interrupted"],s);const r=f(n,["groundingMetadata"]);r!=null&&h(e,["groundingMetadata"],r);const o=f(n,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=f(n,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],_P(a));const l=f(n,["outputTranscription"]);l!=null&&h(e,["outputTranscription"],_P(l));const c=f(n,["urlContextMetadata"]);return c!=null&&h(e,["urlContextMetadata"],BK(c)),e}function zK(n){const e={},t=f(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],$K(t));const i=f(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const s=f(n,["interrupted"]);s!=null&&h(e,["interrupted"],s);const r=f(n,["groundingMetadata"]);r!=null&&h(e,["groundingMetadata"],r);const o=f(n,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=f(n,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],TP(a));const l=f(n,["outputTranscription"]);return l!=null&&h(e,["outputTranscription"],TP(l)),e}function jK(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const s=f(n,["name"]);return s!=null&&h(e,["name"],s),e}function GK(n){const e={},t=f(n,["args"]);t!=null&&h(e,["args"],t);const i=f(n,["name"]);return i!=null&&h(e,["name"],i),e}function qK(n){const e={},t=f(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>jK(s))),h(e,["functionCalls"],i)}return e}function WK(n){const e={},t=f(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>GK(s))),h(e,["functionCalls"],i)}return e}function KK(n){const e={},t=f(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function YK(n){const e={},t=f(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function ky(n){const e={},t=f(n,["modality"]);t!=null&&h(e,["modality"],t);const i=f(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function Dy(n){const e={},t=f(n,["modality"]);t!=null&&h(e,["modality"],t);const i=f(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function JK(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const s=f(n,["responseTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const r=f(n,["toolUsePromptTokenCount"]);r!=null&&h(e,["toolUsePromptTokenCount"],r);const o=f(n,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=f(n,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=f(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>ky(g))),h(e,["promptTokensDetails"],m)}const c=f(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>ky(g))),h(e,["cacheTokensDetails"],m)}const u=f(n,["responseTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>ky(g))),h(e,["responseTokensDetails"],m)}const p=f(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>ky(g))),h(e,["toolUsePromptTokensDetails"],m)}return e}function XK(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const s=f(n,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const r=f(n,["toolUsePromptTokenCount"]);r!=null&&h(e,["toolUsePromptTokenCount"],r);const o=f(n,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=f(n,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=f(n,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(w=>Dy(w))),h(e,["promptTokensDetails"],g)}const c=f(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>Dy(w))),h(e,["cacheTokensDetails"],g)}const u=f(n,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(w=>Dy(w))),h(e,["responseTokensDetails"],g)}const p=f(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>Dy(w))),h(e,["toolUsePromptTokensDetails"],g)}const m=f(n,["trafficType"]);return m!=null&&h(e,["trafficType"],m),e}function QK(n){const e={},t=f(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function ZK(n){const e={},t=f(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function eY(n){const e={},t=f(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=f(n,["resumable"]);i!=null&&h(e,["resumable"],i);const s=f(n,["lastConsumedClientMessageIndex"]);return s!=null&&h(e,["lastConsumedClientMessageIndex"],s),e}function tY(n){const e={},t=f(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=f(n,["resumable"]);i!=null&&h(e,["resumable"],i);const s=f(n,["lastConsumedClientMessageIndex"]);return s!=null&&h(e,["lastConsumedClientMessageIndex"],s),e}function nY(n){const e={};f(n,["setupComplete"])!=null&&h(e,["setupComplete"],RK());const i=f(n,["serverContent"]);i!=null&&h(e,["serverContent"],HK(i));const s=f(n,["toolCall"]);s!=null&&h(e,["toolCall"],qK(s));const r=f(n,["toolCallCancellation"]);r!=null&&h(e,["toolCallCancellation"],KK(r));const o=f(n,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],JK(o));const a=f(n,["goAway"]);a!=null&&h(e,["goAway"],QK(a));const l=f(n,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],eY(l)),e}function iY(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],PK(t));const i=f(n,["serverContent"]);i!=null&&h(e,["serverContent"],zK(i));const s=f(n,["toolCall"]);s!=null&&h(e,["toolCall"],WK(s));const r=f(n,["toolCallCancellation"]);r!=null&&h(e,["toolCallCancellation"],YK(r));const o=f(n,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],XK(o));const a=f(n,["goAway"]);a!=null&&h(e,["goAway"],ZK(a));const l=f(n,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],tY(l)),e}function sY(){return{}}function rY(n){const e={},t=f(n,["text"]);t!=null&&h(e,["text"],t);const i=f(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function oY(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>rY(s))),h(e,["weightedPrompts"],i)}return e}function aY(n){const e={},t=f(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=f(n,["topK"]);i!=null&&h(e,["topK"],i);const s=f(n,["seed"]);s!=null&&h(e,["seed"],s);const r=f(n,["guidance"]);r!=null&&h(e,["guidance"],r);const o=f(n,["bpm"]);o!=null&&h(e,["bpm"],o);const a=f(n,["density"]);a!=null&&h(e,["density"],a);const l=f(n,["brightness"]);l!=null&&h(e,["brightness"],l);const c=f(n,["scale"]);c!=null&&h(e,["scale"],c);const u=f(n,["muteBass"]);u!=null&&h(e,["muteBass"],u);const p=f(n,["muteDrums"]);p!=null&&h(e,["muteDrums"],p);const m=f(n,["onlyBassAndDrums"]);return m!=null&&h(e,["onlyBassAndDrums"],m),e}function lY(n){const e={},t=f(n,["clientContent"]);t!=null&&h(e,["clientContent"],oY(t));const i=f(n,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],aY(i)),e}function cY(n){const e={},t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);i!=null&&h(e,["mimeType"],i);const s=f(n,["sourceMetadata"]);return s!=null&&h(e,["sourceMetadata"],lY(s)),e}function uY(n){const e={},t=f(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>cY(s))),h(e,["audioChunks"],i)}return e}function dY(n){const e={},t=f(n,["text"]);t!=null&&h(e,["text"],t);const i=f(n,["filteredReason"]);return i!=null&&h(e,["filteredReason"],i),e}function fY(n){const e={};f(n,["setupComplete"])!=null&&h(e,["setupComplete"],sY());const i=f(n,["serverContent"]);i!=null&&h(e,["serverContent"],uY(i));const s=f(n,["filteredPrompt"]);return s!=null&&h(e,["filteredPrompt"],dY(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hY(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function pY(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function mY(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gY(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],hY(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],pY(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],mY(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function Jx(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>gY(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function yY(n){const e={},t=f(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=f(n,["default"]);i!=null&&h(e,["default"],i);const s=f(n,["description"]);s!=null&&h(e,["description"],s);const r=f(n,["enum"]);r!=null&&h(e,["enum"],r);const o=f(n,["example"]);o!=null&&h(e,["example"],o);const a=f(n,["format"]);a!=null&&h(e,["format"],a);const l=f(n,["items"]);l!=null&&h(e,["items"],l);const c=f(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(n,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(n,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const m=f(n,["maximum"]);m!=null&&h(e,["maximum"],m);const g=f(n,["minItems"]);g!=null&&h(e,["minItems"],g);const w=f(n,["minLength"]);w!=null&&h(e,["minLength"],w);const v=f(n,["minProperties"]);v!=null&&h(e,["minProperties"],v);const S=f(n,["minimum"]);S!=null&&h(e,["minimum"],S);const x=f(n,["nullable"]);x!=null&&h(e,["nullable"],x);const C=f(n,["pattern"]);C!=null&&h(e,["pattern"],C);const _=f(n,["properties"]);_!=null&&h(e,["properties"],_);const A=f(n,["propertyOrdering"]);A!=null&&h(e,["propertyOrdering"],A);const P=f(n,["required"]);P!=null&&h(e,["required"],P);const M=f(n,["title"]);M!=null&&h(e,["title"],M);const N=f(n,["type"]);return N!=null&&h(e,["type"],N),e}function vY(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&h(e,["category"],t);const i=f(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function xY(n){const e={},t=f(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=f(n,["description"]);i!=null&&h(e,["description"],i);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(n,["response"]);a!=null&&h(e,["response"],a);const l=f(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function wY(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function CY(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],wY(t)),e}function SY(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function EY(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],SY(t)),e}function _Y(){return{}}function TY(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>xY(c))),h(e,["functionDeclarations"],l)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],CY(i));const s=f(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],EY(s)),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(n,["urlContext"])!=null&&h(e,["urlContext"],_Y());const o=f(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(n,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function AY(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function bY(n){const e={},t=f(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=f(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function RY(n){const e={},t=f(n,["latLng"]);t!=null&&h(e,["latLng"],bY(t));const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function PY(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],AY(t));const i=f(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],RY(i)),e}function MY(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function DL(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],MY(t)),e}function NY(n){const e={},t=f(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=f(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],DL(i)),e}function IY(n){const e={},t=f(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>NY(s))),h(e,["speakerVoiceConfigs"],i)}return e}function kY(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],DL(t));const i=f(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],IY(i));const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function DY(n){const e={},t=f(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=f(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function LY(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],Jx(Cn(s)));const r=f(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=f(e,["topP"]);o!=null&&h(i,["topP"],o);const a=f(e,["topK"]);a!=null&&h(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(i,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=f(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&h(i,["presencePenalty"],g);const w=f(e,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const v=f(e,["seed"]);v!=null&&h(i,["seed"],v);const S=f(e,["responseMimeType"]);S!=null&&h(i,["responseMimeType"],S);const x=f(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],yY(Zp(x)));const C=f(e,["responseJsonSchema"]);if(C!=null&&h(i,["responseJsonSchema"],C),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(t!==void 0&&_!=null){let L=_;Array.isArray(L)&&(L=L.map($=>vY($))),h(t,["safetySettings"],L)}const A=f(e,["tools"]);if(t!==void 0&&A!=null){let L=xh(A);Array.isArray(L)&&(L=L.map($=>TY(vh($)))),h(t,["tools"],L)}const P=f(e,["toolConfig"]);if(t!==void 0&&P!=null&&h(t,["toolConfig"],PY(P)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],Fo(n,M));const N=f(e,["responseModalities"]);N!=null&&h(i,["responseModalities"],N);const I=f(e,["mediaResolution"]);I!=null&&h(i,["mediaResolution"],I);const k=f(e,["speechConfig"]);if(k!=null&&h(i,["speechConfig"],kY(vA(k))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);return D!=null&&h(i,["thinkingConfig"],DY(D)),i}function AP(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>Jx(a))),h(t,["contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["generationConfig"],LY(n,r,t)),t}function FY(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const s=f(n,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const r=f(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&h(e,["requests[]","outputDimensionality"],r),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function OY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);s!=null&&h(t,["requests[]","content"],yL(n,s));const r=f(e,["config"]);r!=null&&h(t,["config"],FY(r,t));const o=f(e,["model"]);return o!==void 0&&h(t,["requests[]","model"],Ke(n,o)),t}function UY(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const s=f(n,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const r=f(n,["guidanceScale"]);if(e!==void 0&&r!=null&&h(e,["parameters","guidanceScale"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=f(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const u=f(n,["language"]);e!==void 0&&u!=null&&h(e,["parameters","language"],u);const p=f(n,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const m=f(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function $Y(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&h(t,["config"],UY(r,t)),t}function VY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function BY(n,e,t){const i={},s=f(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=f(e,["pageToken"]);t!==void 0&&r!=null&&h(t,["_query","pageToken"],r);const o=f(e,["filter"]);t!==void 0&&o!=null&&h(t,["_query","filter"],o);const a=f(e,["queryBase"]);return t!==void 0&&a!=null&&h(t,["_url","models_url"],wL(n,a)),i}function HY(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],BY(n,i,t)),t}function zY(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=f(n,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const r=f(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&h(e,["defaultCheckpointId"],r),t}function jY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],zY(s,t)),t}function GY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function qY(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function WY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>Jx(a))),h(t,["contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["config"],qY(r)),t}function KY(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],Oo(t));const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function YY(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(n,["durationSeconds"]);if(e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=f(n,["aspectRatio"]);if(e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r),f(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=f(n,["personGeneration"]);if(e!==void 0&&o!=null&&h(e,["parameters","personGeneration"],o),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const l=f(n,["enhancePrompt"]);if(e!==void 0&&l!=null&&h(e,["parameters","enhancePrompt"],l),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(f(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function JY(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["image"]);if(r!=null&&h(t,["instances[0]","image"],KY(r)),f(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=f(e,["config"]);return o!=null&&h(t,["config"],YY(o,t)),t}function XY(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function QY(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["data"]);i!=null&&h(e,["data"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ZY(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function eJ(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],XY(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],QY(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],ZY(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function Ch(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>eJ(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function tJ(n){const e={},t=f(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=f(n,["default"]);i!=null&&h(e,["default"],i);const s=f(n,["description"]);s!=null&&h(e,["description"],s);const r=f(n,["enum"]);r!=null&&h(e,["enum"],r);const o=f(n,["example"]);o!=null&&h(e,["example"],o);const a=f(n,["format"]);a!=null&&h(e,["format"],a);const l=f(n,["items"]);l!=null&&h(e,["items"],l);const c=f(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const u=f(n,["maxLength"]);u!=null&&h(e,["maxLength"],u);const p=f(n,["maxProperties"]);p!=null&&h(e,["maxProperties"],p);const m=f(n,["maximum"]);m!=null&&h(e,["maximum"],m);const g=f(n,["minItems"]);g!=null&&h(e,["minItems"],g);const w=f(n,["minLength"]);w!=null&&h(e,["minLength"],w);const v=f(n,["minProperties"]);v!=null&&h(e,["minProperties"],v);const S=f(n,["minimum"]);S!=null&&h(e,["minimum"],S);const x=f(n,["nullable"]);x!=null&&h(e,["nullable"],x);const C=f(n,["pattern"]);C!=null&&h(e,["pattern"],C);const _=f(n,["properties"]);_!=null&&h(e,["properties"],_);const A=f(n,["propertyOrdering"]);A!=null&&h(e,["propertyOrdering"],A);const P=f(n,["required"]);P!=null&&h(e,["required"],P);const M=f(n,["title"]);M!=null&&h(e,["title"],M);const N=f(n,["type"]);return N!=null&&h(e,["type"],N),e}function nJ(n){const e={},t=f(n,["featureSelectionPreference"]);return t!=null&&h(e,["featureSelectionPreference"],t),e}function iJ(n){const e={},t=f(n,["method"]);t!=null&&h(e,["method"],t);const i=f(n,["category"]);i!=null&&h(e,["category"],i);const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function sJ(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const s=f(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=f(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=f(n,["response"]);o!=null&&h(e,["response"],o);const a=f(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function rJ(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function oJ(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],rJ(t)),e}function aJ(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function lJ(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],aJ(t)),e}function cJ(){return{}}function uJ(n){const e={},t=f(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function dJ(n){const e={},t=f(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],uJ(t));const i=f(n,["authType"]);i!=null&&h(e,["authType"],i);const s=f(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=f(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=f(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=f(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function fJ(n){const e={},t=f(n,["authConfig"]);return t!=null&&h(e,["authConfig"],dJ(t)),e}function hJ(){return{}}function LL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>sJ(m))),h(e,["functionDeclarations"],p)}const i=f(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],oJ(s));const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],lJ(r)),f(n,["enterpriseWebSearch"])!=null&&h(e,["enterpriseWebSearch"],cJ());const a=f(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],fJ(a)),f(n,["urlContext"])!=null&&h(e,["urlContext"],hJ());const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const u=f(n,["computerUse"]);return u!=null&&h(e,["computerUse"],u),e}function pJ(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function mJ(n){const e={},t=f(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=f(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function gJ(n){const e={},t=f(n,["latLng"]);t!=null&&h(e,["latLng"],mJ(t));const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function yJ(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],pJ(t));const i=f(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],gJ(i)),e}function vJ(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function xJ(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],vJ(t)),e}function wJ(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],xJ(t)),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=f(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function CJ(n){const e={},t=f(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=f(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function SJ(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],Ch(Cn(s)));const r=f(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=f(e,["topP"]);o!=null&&h(i,["topP"],o);const a=f(e,["topK"]);a!=null&&h(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=f(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const u=f(e,["stopSequences"]);u!=null&&h(i,["stopSequences"],u);const p=f(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=f(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&h(i,["presencePenalty"],g);const w=f(e,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const v=f(e,["seed"]);v!=null&&h(i,["seed"],v);const S=f(e,["responseMimeType"]);S!=null&&h(i,["responseMimeType"],S);const x=f(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],tJ(Zp(x)));const C=f(e,["responseJsonSchema"]);C!=null&&h(i,["responseJsonSchema"],C);const _=f(e,["routingConfig"]);_!=null&&h(i,["routingConfig"],_);const A=f(e,["modelSelectionConfig"]);A!=null&&h(i,["modelConfig"],nJ(A));const P=f(e,["safetySettings"]);if(t!==void 0&&P!=null){let H=P;Array.isArray(H)&&(H=H.map(O=>iJ(O))),h(t,["safetySettings"],H)}const M=f(e,["tools"]);if(t!==void 0&&M!=null){let H=xh(M);Array.isArray(H)&&(H=H.map(O=>LL(vh(O)))),h(t,["tools"],H)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&h(t,["toolConfig"],yJ(N));const I=f(e,["labels"]);t!==void 0&&I!=null&&h(t,["labels"],I);const k=f(e,["cachedContent"]);t!==void 0&&k!=null&&h(t,["cachedContent"],Fo(n,k));const D=f(e,["responseModalities"]);D!=null&&h(i,["responseModalities"],D);const L=f(e,["mediaResolution"]);L!=null&&h(i,["mediaResolution"],L);const $=f(e,["speechConfig"]);$!=null&&h(i,["speechConfig"],wJ(vA($)));const j=f(e,["audioTimestamp"]);j!=null&&h(i,["audioTimestamp"],j);const V=f(e,["thinkingConfig"]);return V!=null&&h(i,["thinkingConfig"],CJ(V)),i}function bP(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>Ch(a))),h(t,["contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["generationConfig"],SJ(n,r,t)),t}function EJ(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const s=f(n,["title"]);e!==void 0&&s!=null&&h(e,["instances[]","title"],s);const r=f(n,["outputDimensionality"]);e!==void 0&&r!=null&&h(e,["parameters","outputDimensionality"],r);const o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=f(n,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),t}function _J(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);s!=null&&h(t,["instances[]","content"],yL(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],EJ(r,t)),t}function TJ(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const s=f(n,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=f(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const g=f(n,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const w=f(n,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const v=f(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const S=f(n,["addWatermark"]);e!==void 0&&S!=null&&h(e,["parameters","addWatermark"],S);const x=f(n,["enhancePrompt"]);return e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x),t}function AJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&h(t,["config"],TJ(r,t)),t}function Xx(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Oo(i));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function bJ(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const s=f(n,["maskDilation"]);return s!=null&&h(e,["dilation"],s),e}function RJ(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function PJ(n){const e={},t=f(n,["styleDescription"]);return t!=null&&h(e,["styleDescription"],t),e}function MJ(n){const e={},t=f(n,["subjectType"]);t!=null&&h(e,["subjectType"],t);const i=f(n,["subjectDescription"]);return i!=null&&h(e,["subjectDescription"],i),e}function NJ(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],Xx(t));const i=f(n,["referenceId"]);i!=null&&h(e,["referenceId"],i);const s=f(n,["referenceType"]);s!=null&&h(e,["referenceType"],s);const r=f(n,["maskImageConfig"]);r!=null&&h(e,["maskImageConfig"],bJ(r));const o=f(n,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],RJ(o));const a=f(n,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],PJ(a));const l=f(n,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],MJ(l)),e}function IJ(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const s=f(n,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=f(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const g=f(n,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const w=f(n,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const v=f(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const S=f(n,["editMode"]);e!==void 0&&S!=null&&h(e,["parameters","editMode"],S);const x=f(n,["baseSteps"]);return e!==void 0&&x!=null&&h(e,["parameters","editConfig","baseSteps"],x),t}function kJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>NJ(l))),h(t,["instances[0]","referenceImages"],a)}const o=f(e,["config"]);return o!=null&&h(t,["config"],IJ(o,t)),t}function DJ(n,e){const t={},i=f(n,["includeRaiReason"]);e!==void 0&&i!=null&&h(e,["parameters","includeRaiReason"],i);const s=f(n,["outputMimeType"]);e!==void 0&&s!=null&&h(e,["parameters","outputOptions","mimeType"],s);const r=f(n,["outputCompressionQuality"]);e!==void 0&&r!=null&&h(e,["parameters","outputOptions","compressionQuality"],r);const o=f(n,["enhanceInputImage"]);e!==void 0&&o!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=f(n,["imagePreservationFactor"]);e!==void 0&&a!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["mode"]);return e!==void 0&&c!=null&&h(e,["parameters","mode"],c),t}function LJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["image"]);s!=null&&h(t,["instances[0]","image"],Xx(s));const r=f(e,["upscaleFactor"]);r!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],r);const o=f(e,["config"]);return o!=null&&h(t,["config"],DJ(o,t)),t}function FJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function OJ(n,e,t){const i={},s=f(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=f(e,["pageToken"]);t!==void 0&&r!=null&&h(t,["_query","pageToken"],r);const o=f(e,["filter"]);t!==void 0&&o!=null&&h(t,["_query","filter"],o);const a=f(e,["queryBase"]);return t!==void 0&&a!=null&&h(t,["_url","models_url"],wL(n,a)),i}function UJ(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],OJ(n,i,t)),t}function $J(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=f(n,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const r=f(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&h(e,["defaultCheckpointId"],r),t}function VJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],$J(s,t)),t}function BJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function HJ(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],Ch(Cn(i)));const s=f(n,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>LL(a))),h(e,["tools"],o)}const r=f(n,["generationConfig"]);return e!==void 0&&r!=null&&h(e,["generationConfig"],r),t}function zJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>Ch(a))),h(t,["contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["config"],HJ(r,t)),t}function jJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["contents"]);if(s!=null){let o=Ki(s);Array.isArray(o)&&(o=o.map(a=>Ch(a))),h(t,["contents"],o)}const r=f(e,["config"]);return r!=null&&h(t,["config"],r),t}function GJ(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Oo(i));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function qJ(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["fps"]);e!==void 0&&r!=null&&h(e,["parameters","fps"],r);const o=f(n,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=f(n,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const p=f(n,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const g=f(n,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const w=f(n,["generateAudio"]);e!==void 0&&w!=null&&h(e,["parameters","generateAudio"],w);const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Xx(v));const S=f(n,["compressionQuality"]);return e!==void 0&&S!=null&&h(e,["parameters","compressionQuality"],S),t}function WJ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],Ke(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],Xx(r));const o=f(e,["video"]);o!=null&&h(t,["instances[0]","video"],GJ(o));const a=f(e,["config"]);return a!=null&&h(t,["config"],qJ(a,t)),t}function KJ(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function YJ(n){const e={},t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function JJ(n){const e={},t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function XJ(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],KJ(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],YJ(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],JJ(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function QJ(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>XJ(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function ZJ(n){const e={},t=f(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function eX(n){const e={},t=f(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=f(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function tX(n){const e={},t=f(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>eX(s))),h(e,["urlMetadata"],i)}return e}function nX(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],QJ(t));const i=f(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],ZJ(i));const s=f(n,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const r=f(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=f(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],tX(o));const a=f(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(n,["index"]);c!=null&&h(e,["index"],c);const u=f(n,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(n,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function RP(n){const e={},t=f(n,["candidates"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>nX(a))),h(e,["candidates"],o)}const i=f(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const s=f(n,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const r=f(n,["usageMetadata"]);return r!=null&&h(e,["usageMetadata"],r),e}function iX(n){const e={},t=f(n,["values"]);return t!=null&&h(e,["values"],t),e}function sX(){return{}}function rX(n){const e={},t=f(n,["embeddings"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>iX(r))),h(e,["embeddings"],s)}return f(n,["metadata"])!=null&&h(e,["metadata"],sX()),e}function oX(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],Oo(t));const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function FL(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const s=f(n,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function aX(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],oX(t));const i=f(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const s=f(n,["_self"]);return s!=null&&h(e,["safetyAttributes"],FL(s)),e}function lX(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>aX(r))),h(e,["generatedImages"],s)}const i=f(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],FL(i)),e}function cX(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&h(e,["createTime"],i);const s=f(n,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function JS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["description"]);s!=null&&h(e,["description"],s);const r=f(n,["version"]);r!=null&&h(e,["version"],r);const o=f(n,["_self"]);o!=null&&h(e,["tunedModelInfo"],cX(o));const a=f(n,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=f(n,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const c=f(n,["supportedGenerationMethods"]);return c!=null&&h(e,["supportedActions"],c),e}function uX(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["_self"]);if(i!=null){let s=CL(i);Array.isArray(s)&&(s=s.map(r=>JS(r))),h(e,["models"],s)}return e}function dX(){return{}}function fX(n){const e={},t=f(n,["totalTokens"]);t!=null&&h(e,["totalTokens"],t);const i=f(n,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function hX(n){const e={},t=f(n,["video","uri"]);t!=null&&h(e,["uri"],t);const i=f(n,["video","encodedVideo"]);i!=null&&h(e,["videoBytes"],Oo(i));const s=f(n,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function pX(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],hX(t)),e}function mX(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>pX(o))),h(e,["generatedVideos"],r)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function gX(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=f(n,["done"]);s!=null&&h(e,["done"],s);const r=f(n,["error"]);r!=null&&h(e,["error"],r);const o=f(n,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],mX(o)),e}function yX(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function vX(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["data"]);i!=null&&h(e,["data"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function xX(n){const e={},t=f(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=f(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function wX(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],yX(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],vX(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],xX(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function CX(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>wX(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function SX(n){const e={},t=f(n,["citations"]);return t!=null&&h(e,["citations"],t),e}function EX(n){const e={},t=f(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=f(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function _X(n){const e={},t=f(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>EX(s))),h(e,["urlMetadata"],i)}return e}function TX(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],CX(t));const i=f(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],SX(i));const s=f(n,["finishMessage"]);s!=null&&h(e,["finishMessage"],s);const r=f(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=f(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],_X(o));const a=f(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=f(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=f(n,["index"]);c!=null&&h(e,["index"],c);const u=f(n,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const p=f(n,["safetyRatings"]);return p!=null&&h(e,["safetyRatings"],p),e}function PP(n){const e={},t=f(n,["candidates"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>TX(c))),h(e,["candidates"],l)}const i=f(n,["createTime"]);i!=null&&h(e,["createTime"],i);const s=f(n,["responseId"]);s!=null&&h(e,["responseId"],s);const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const o=f(n,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=f(n,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function AX(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function bX(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&h(e,["statistics"],AX(i)),e}function RX(n){const e={},t=f(n,["billableCharacterCount"]);return t!=null&&h(e,["billableCharacterCount"],t),e}function PX(n){const e={},t=f(n,["predictions[]","embeddings"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>bX(r))),h(e,["embeddings"],s)}const i=f(n,["metadata"]);return i!=null&&h(e,["metadata"],RX(i)),e}function MX(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],Oo(i));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function OL(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const s=f(n,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function wA(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],MX(t));const i=f(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const s=f(n,["_self"]);s!=null&&h(e,["safetyAttributes"],OL(s));const r=f(n,["prompt"]);return r!=null&&h(e,["enhancedPrompt"],r),e}function NX(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>wA(r))),h(e,["generatedImages"],s)}const i=f(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],OL(i)),e}function IX(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>wA(s))),h(e,["generatedImages"],i)}return e}function kX(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>wA(s))),h(e,["generatedImages"],i)}return e}function DX(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function LX(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&h(e,["createTime"],i);const s=f(n,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function FX(n){const e={},t=f(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=f(n,["epoch"]);i!=null&&h(e,["epoch"],i);const s=f(n,["step"]);return s!=null&&h(e,["step"],s),e}function XS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=f(n,["description"]);s!=null&&h(e,["description"],s);const r=f(n,["versionId"]);r!=null&&h(e,["version"],r);const o=f(n,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>DX(m))),h(e,["endpoints"],p)}const a=f(n,["labels"]);a!=null&&h(e,["labels"],a);const l=f(n,["_self"]);l!=null&&h(e,["tunedModelInfo"],LX(l));const c=f(n,["defaultCheckpointId"]);c!=null&&h(e,["defaultCheckpointId"],c);const u=f(n,["checkpoints"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>FX(m))),h(e,["checkpoints"],p)}return e}function OX(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["_self"]);if(i!=null){let s=CL(i);Array.isArray(s)&&(s=s.map(r=>XS(r))),h(e,["models"],s)}return e}function UX(){return{}}function $X(n){const e={},t=f(n,["totalTokens"]);return t!=null&&h(e,["totalTokens"],t),e}function VX(n){const e={},t=f(n,["tokensInfo"]);return t!=null&&h(e,["tokensInfo"],t),e}function BX(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Oo(i));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function HX(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],BX(t)),e}function zX(n){const e={},t=f(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>HX(o))),h(e,["generatedVideos"],r)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function jX(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=f(n,["done"]);s!=null&&h(e,["done"],s);const r=f(n,["error"]);r!=null&&h(e,["error"],r);const o=f(n,["response"]);return o!=null&&h(e,["response"],zX(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GX="Content-Type",qX="X-Server-Timeout",WX="User-Agent",QS="x-goog-api-client",KX="1.8.0",YX=`google-genai-sdk/${KX}`,JX="v1beta1",XX="v1beta",MP=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class QX{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:JX,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:XX,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(t))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const s=new AbortController,r=s.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>s.abort(),t.timeout),i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return t&&t.extraBody!==null&&ZX(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await NP(s),new jS(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await NP(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return _d(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield rt(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(l);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,w=m.code,v=`got status: ${g}. ${JSON.stringify(p)}`;if(w>=400&&w<600)throw new Yx({message:v,status:w})}}catch(p){if(p.name==="ApiError")throw p}o+=c;let u=o.match(MP);for(;u;){const p=u[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield rt(new jS(m)),o=o.slice(u[0].length),u=o.match(MP)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=YX+" "+this.clientOptions.userAgentExtra;return e[WX]=t,e[QS]=t,e[GX]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(qX,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);s.sizeBytes=String(o.size);const a=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,t);return r.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:fe("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function NP(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Yx({message:s,status:t}):new Error(s)}}function ZX(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,o){const a=Object.assign({},r);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=i(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eQ="mcp_used/unknown";function UL(n){for(const e of n)if(CA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function $L(n){var e;const t=(e=n[QS])!==null&&e!==void 0?e:"";n[QS]=(t+` ${eQ}`).trimStart()}function tQ(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>CA(s)))!==null&&i!==void 0?i:!1}function nQ(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!CA(s)))!==null&&i!==void 0?i:!1}function CA(n){return n!==null&&typeof n=="object"&&n instanceof SA}function iQ(n,e=100){return _d(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield rt(n.listTools({cursor:i}));for(const o of r.tools)yield yield rt(o),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class SA{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new SA(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const r={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(t=void 0,bp(iQ(u))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const p=s;o.push(p);const m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=u}}catch(p){t={error:p}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),J8(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await s.callTool({name:i.name,arguments:i.args},void 0,r);t.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sQ(n,e,t){const i=new $8;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const r=fY(s);Object.assign(i,r),e(i)}class rQ{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=lQ(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(_=>{c=_}),p=e.callbacks,m=function(){c({})},g=this.apiClient,w={onopen:m,onmessage:_=>{sQ(g,p.onmessage,_)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(_){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(_){}},v=this.webSocketFactory.create(l,aQ(o),w);v.connect(),await u;const S=Ke(this.apiClient,e.model),x=IL({model:S}),C=YS({setup:x});return v.send(JSON.stringify(C)),new oQ(v,this.apiClient)}}class oQ{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=AK(e),i=kL(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=bK(e),i=YS(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=YS({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(od.PLAY)}pause(){this.sendPlaybackControl(od.PAUSE)}stop(){this.sendPlaybackControl(od.STOP)}resetContext(){this.sendPlaybackControl(od.RESET_CONTEXT)}close(){this.conn.close()}}function aQ(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function lQ(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cQ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uQ(n,e,t){const i=new U8;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const r=JSON.parse(s);if(n.isVertexAI()){const o=iY(r);Object.assign(i,o)}else{const o=nY(r);Object.assign(i,o)}e(i)}class dQ{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new rQ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,r,o,a;const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&UL(e.config.tools)&&$L(p);const m=mQ(p);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const k=this.apiClient.getApiKey();let D="BidiGenerateContent",L="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),D="BidiGenerateContentConstrained",L="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${D}?${L}=${k}`}let g=()=>{};const w=new Promise(k=>{g=k}),v=e.callbacks,S=function(){var k;(k=v==null?void 0:v.onopen)===null||k===void 0||k.call(v),g({})},x=this.apiClient,C={onopen:S,onmessage:k=>{uQ(x,v.onmessage,k)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(k){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(k){}},_=this.webSocketFactory.create(u,pQ(m),C);_.connect(),await w;let A=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const k=this.apiClient.getProject(),D=this.apiClient.getLocation();A=`projects/${k}/locations/${D}/`+A}let P={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[P0.AUDIO]}:e.config.responseModalities=[P0.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],N=[];for(const k of M)if(this.isCallableTool(k)){const D=k;N.push(await D.tool())}else N.push(k);N.length>0&&(e.config.tools=N);const I={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=xK(this.apiClient,I):P=vK(this.apiClient,I),delete P.config,_.send(JSON.stringify(P)),new hQ(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const fQ={turnComplete:!0};class hQ{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ki(t.turns),e.isVertexAI()?i=i.map(s=>Ch(s)):i=i.map(s=>Jx(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(cQ)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},fQ),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:TK(e)}:t={realtimeInput:_K(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function pQ(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function mQ(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IP=10;function kP(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(uv(o)){s=!0;break}if(!s)return!0;const r=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function uv(n){return"callTool"in n&&typeof n.callTool=="function"}function DP(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gQ extends bu{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,r,o,a;const l=await this.processParamsForMcpUsage(t);if(!tQ(t)||kP(t.config))return await this.generateContentInternal(l);if(nQ(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const p=Ki(l.contents),m=(r=(s=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:IP;let g=0;for(;g<m&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const w=c.candidates[0].content,v=[];for(const S of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(uv(S)){const C=await S.callTool(c.functionCalls);v.push(...C)}g++,u={role:"user",parts:v},l.contents=Ki(l.contents),l.contents.push(w),l.contents.push(u),DP(l.config)&&(p.push(w),p.push(u))}return DP(l.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(kP(t.config)){const i=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let r;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:o.push(l);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r}:a={generatedImages:o},a}),this.list=async t=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Qg(mu.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)}}async processParamsForMcpUsage(e){var t,i,s;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const o=await Promise.all(r.map(async l=>uv(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&UL(e.config.tools)){const l=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),$L(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,i,s;const r=new Map;for(const o of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(uv(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(e){var t,i,s;const r=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:IP;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,p){var m,g;return _d(this,arguments,function*(){for(var w,v,S,x;a<r;){o&&(a++,o=!1);const P=yield rt(c.processParamsForMcpUsage(p)),M=yield rt(c.generateContentStreamInternal(P)),N=[],I=[];try{for(var C=!0,_=(v=void 0,bp(M)),A;A=yield rt(_.next()),w=A.done,!w;C=!0){x=A.value,C=!1;const k=x;if(yield yield rt(k),k.candidates&&(!((m=k.candidates[0])===null||m===void 0)&&m.content)){I.push(k.candidates[0].content);for(const D of(g=k.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<r&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(D.functionCall.name)){const L=yield rt(u.get(D.functionCall.name).callTool([D.functionCall]));N.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(k){v={error:k}}finally{try{!C&&!w&&(S=_.return)&&(yield rt(S.call(_)))}finally{if(v)throw v.error}}if(N.length>0){o=!0;const k=new Fh;k.candidates=[{content:{role:"user",parts:N}}],yield yield rt(k);const D=[];D.push(...I),D.push({role:"user",parts:N});const L=Ki(p.contents).concat(D);p.contents=L}else break}})}(this,l,e)}async generateContentInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bP(this.apiClient,e);return a=fe("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=PP(u),m=new Fh;return Object.assign(m,p),m})}else{const c=AP(this.apiClient,e);return a=fe("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=RP(u),m=new Fh;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bP(this.apiClient,e);return a=fe("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return _d(this,arguments,function*(){var m,g,w,v;try{for(var S=!0,x=bp(p),C;C=yield rt(x.next()),m=C.done,!m;S=!0){v=C.value,S=!1;const A=PP(yield rt(v.json())),P=new Fh;Object.assign(P,A),yield yield rt(P)}}catch(_){g={error:_}}finally{try{!S&&!m&&(w=x.return)&&(yield rt(w.call(x)))}finally{if(g)throw g.error}}})})}else{const c=AP(this.apiClient,e);return a=fe("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return _d(this,arguments,function*(){var m,g,w,v;try{for(var S=!0,x=bp(p),C;C=yield rt(x.next()),m=C.done,!m;S=!0){v=C.value,S=!1;const A=RP(yield rt(v.json())),P=new Fh;Object.assign(P,A),yield yield rt(P)}}catch(_){g={error:_}}finally{try{!S&&!m&&(w=x.return)&&(yield rt(w.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_J(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=PX(u),m=new rP;return Object.assign(m,p),m})}else{const c=OY(this.apiClient,e);return a=fe("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=rX(u),m=new rP;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=AJ(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=NX(u),m=new oP;return Object.assign(m,p),m})}else{const c=$Y(this.apiClient,e);return a=fe("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=lX(u),m=new oP;return Object.assign(m,p),m})}}async editImageInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=kJ(this.apiClient,e);return r=fe("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=IX(l),u=new I8;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=LJ(this.apiClient,e);return r=fe("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=kX(l),u=new k8;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=FJ(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>XS(u))}else{const c=VY(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>JS(u))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=UJ(this.apiClient,e);return a=fe("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=OX(u),m=new aP;return Object.assign(m,p),m})}else{const c=HY(this.apiClient,e);return a=fe("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=uX(u),m=new aP;return Object.assign(m,p),m})}}async update(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=VJ(this.apiClient,e);return a=fe("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>XS(u))}else{const c=jY(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>JS(u))}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=BJ(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(()=>{const u=UX(),p=new lP;return Object.assign(p,u),p})}else{const c=GY(this.apiClient,e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(()=>{const u=dX(),p=new lP;return Object.assign(p,u),p})}}async countTokens(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=zJ(this.apiClient,e);return a=fe("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=$X(u),m=new cP;return Object.assign(m,p),m})}else{const c=WY(this.apiClient,e);return a=fe("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=fX(u),m=new cP;return Object.assign(m,p),m})}}async computeTokens(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=jJ(this.apiClient,e);return r=fe("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=VX(l),u=new D8;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=WJ(this.apiClient,e);return a=fe("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>jX(u))}else{const c=JY(this.apiClient,e);return a=fe("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>gX(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yQ(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function vQ(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function xQ(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=f(n,["resourceName"]);i!=null&&h(e,["_url","resourceName"],i);const s=f(n,["config"]);return s!=null&&h(e,["config"],s),e}function wQ(n){const e={},t=f(n,["video","uri"]);t!=null&&h(e,["uri"],t);const i=f(n,["video","encodedVideo"]);i!=null&&h(e,["videoBytes"],Oo(i));const s=f(n,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function CQ(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],wQ(t)),e}function SQ(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>CQ(o))),h(e,["generatedVideos"],r)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function EQ(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=f(n,["done"]);s!=null&&h(e,["done"],s);const r=f(n,["error"]);r!=null&&h(e,["error"],r);const o=f(n,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],SQ(o)),e}function _Q(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Oo(i));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function TQ(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],_Q(t)),e}function AQ(n){const e={},t=f(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>TQ(o))),h(e,["generatedVideos"],r)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function LP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=f(n,["done"]);s!=null&&h(e,["done"],s);const r=f(n,["error"]);r!=null&&h(e,["error"],r);const o=f(n,["response"]);return o!=null&&h(e,["response"],AQ(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bQ extends bu{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;return i&&"httpOptions"in i&&(r=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vQ(e);return a=fe("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>LP(u))}else{const c=yQ(e);return a=fe("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>EQ(u))}}async fetchPredictVideosOperationInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=xQ(e);return r=fe("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>LP(l))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RQ(n){const e={},t=f(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function VL(n){const e={},t=f(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],RQ(t)),e}function PQ(n){const e={},t=f(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=f(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],VL(i)),e}function MQ(n){const e={},t=f(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>PQ(s))),h(e,["speakerVoiceConfigs"],i)}return e}function NQ(n){const e={},t=f(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],VL(t));const i=f(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],MQ(i));const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function IQ(n){const e={},t=f(n,["fps"]);t!=null&&h(e,["fps"],t);const i=f(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=f(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function kQ(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function DQ(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function LQ(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],IQ(t));const i=f(n,["thought"]);i!=null&&h(e,["thought"],i);const s=f(n,["inlineData"]);s!=null&&h(e,["inlineData"],kQ(s));const r=f(n,["fileData"]);r!=null&&h(e,["fileData"],DQ(r));const o=f(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=f(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const u=f(n,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const p=f(n,["text"]);return p!=null&&h(e,["text"],p),e}function FQ(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>LQ(r))),h(e,["parts"],s)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function OQ(n){const e={},t=f(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=f(n,["description"]);i!=null&&h(e,["description"],i);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=f(n,["response"]);a!=null&&h(e,["response"],a);const l=f(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function UQ(n){const e={},t=f(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=f(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function $Q(n){const e={},t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],UQ(t)),e}function VQ(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const i=f(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function BQ(n){const e={},t=f(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],VQ(t)),e}function HQ(){return{}}function zQ(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>OQ(c))),h(e,["functionDeclarations"],l)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],$Q(i));const s=f(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],BQ(s)),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(n,["urlContext"])!=null&&h(e,["urlContext"],HQ());const o=f(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=f(n,["computerUse"]);return a!=null&&h(e,["computerUse"],a),e}function jQ(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function FP(){return{}}function GQ(n){const e={},t=f(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=f(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=f(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=f(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=f(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function qQ(n){const e={},t=f(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],GQ(t));const i=f(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=f(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function WQ(n){const e={},t=f(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function KQ(n){const e={},t=f(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=f(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],WQ(i)),e}function YQ(n){const e={},t=f(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function JQ(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=f(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=f(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=f(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=f(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=f(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","seed"],u);const p=f(n,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],NQ(xA(p)));const m=f(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=f(n,["systemInstruction"]);e!==void 0&&g!=null&&h(e,["setup","systemInstruction"],FQ(Cn(g)));const w=f(n,["tools"]);if(e!==void 0&&w!=null){let P=xh(w);Array.isArray(P)&&(P=P.map(M=>zQ(vh(M)))),h(e,["setup","tools"],P)}const v=f(n,["sessionResumption"]);e!==void 0&&v!=null&&h(e,["setup","sessionResumption"],jQ(v));const S=f(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&h(e,["setup","inputAudioTranscription"],FP());const x=f(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],FP());const C=f(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],qQ(C));const _=f(n,["contextWindowCompression"]);e!==void 0&&_!=null&&h(e,["setup","contextWindowCompression"],KQ(_));const A=f(n,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],YQ(A)),t}function XQ(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],Ke(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],JQ(s,t)),t}function QQ(n,e,t){const i={},s=f(e,["expireTime"]);t!==void 0&&s!=null&&h(t,["expireTime"],s);const r=f(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&h(t,["newSessionExpireTime"],r);const o=f(e,["uses"]);t!==void 0&&o!=null&&h(t,["uses"],o);const a=f(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&h(t,["bidiGenerateContentSetup"],XQ(n,a));const l=f(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&h(t,["fieldMask"],l),i}function ZQ(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],QQ(n,i,t)),t}function eZ(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tZ(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${t}.${r}`);e.push(...s)}else e.push(t)}return e.join(",")}function nZ(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const r=tZ(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?n.fieldMask=r:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class iZ extends bu{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ZQ(this.apiClient,e);r=fe("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=nZ(a,e.config);return s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>eZ(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sZ(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function rZ(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=f(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function oZ(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],rZ(t,e)),e}function aZ(n){const e={},t=f(n,["textInput"]);t!=null&&h(e,["textInput"],t);const i=f(n,["output"]);return i!=null&&h(e,["output"],i),e}function lZ(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>aZ(s))),h(e,["examples","examples"],i)}return e}function cZ(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=f(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=f(n,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);const r=f(n,["learningRateMultiplier"]);if(r!=null&&h(t,["tuningTask","hyperparameters","learningRateMultiplier"],r),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=f(n,["batchSize"]);e!==void 0&&o!=null&&h(e,["tuningTask","hyperparameters","batchSize"],o);const a=f(n,["learningRate"]);return e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","learningRate"],a),t}function uZ(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=f(n,["trainingDataset"]);i!=null&&h(e,["tuningTask","trainingData"],lZ(i));const s=f(n,["config"]);return s!=null&&h(e,["config"],cZ(s,e)),e}function dZ(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&h(e,["config"],i),e}function fZ(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=f(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=f(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function hZ(n){const e={},t=f(n,["config"]);return t!=null&&h(e,["config"],fZ(t,e)),e}function pZ(n,e){const t={},i=f(n,["gcsUri"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=f(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function mZ(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const s=f(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function gZ(n,e){const t={},i=f(n,["validationDataset"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec"],mZ(i,t));const s=f(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const o=f(n,["epochCount"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=f(n,["learningRateMultiplier"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=f(n,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=f(n,["adapterSize"]);if(e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function yZ(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=f(n,["trainingDataset"]);i!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],pZ(i,e));const s=f(n,["config"]);return s!=null&&h(e,["config"],gZ(s,e)),e}function vZ(n){const e={},t=f(n,["name"]);t!=null&&h(e,["model"],t);const i=f(n,["name"]);return i!=null&&h(e,["endpoint"],i),e}function BL(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["state"]);i!=null&&h(e,["state"],vL(i));const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["tuningTask","startTime"]);r!=null&&h(e,["startTime"],r);const o=f(n,["tuningTask","completeTime"]);o!=null&&h(e,["endTime"],o);const a=f(n,["updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(n,["description"]);l!=null&&h(e,["description"],l);const c=f(n,["baseModel"]);c!=null&&h(e,["baseModel"],c);const u=f(n,["_self"]);u!=null&&h(e,["tunedModel"],vZ(u));const p=f(n,["distillationSpec"]);p!=null&&h(e,["distillationSpec"],p);const m=f(n,["experiment"]);m!=null&&h(e,["experiment"],m);const g=f(n,["labels"]);g!=null&&h(e,["labels"],g);const w=f(n,["pipelineJob"]);w!=null&&h(e,["pipelineJob"],w);const v=f(n,["satisfiesPzi"]);v!=null&&h(e,["satisfiesPzi"],v);const S=f(n,["satisfiesPzs"]);S!=null&&h(e,["satisfiesPzs"],S);const x=f(n,["serviceAccount"]);x!=null&&h(e,["serviceAccount"],x);const C=f(n,["tunedModelDisplayName"]);return C!=null&&h(e,["tunedModelDisplayName"],C),e}function xZ(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>BL(r))),h(e,["tuningJobs"],s)}return e}function wZ(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=f(n,["done"]);s!=null&&h(e,["done"],s);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function CZ(n){const e={},t=f(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=f(n,["epoch"]);i!=null&&h(e,["epoch"],i);const s=f(n,["step"]);s!=null&&h(e,["step"],s);const r=f(n,["endpoint"]);return r!=null&&h(e,["endpoint"],r),e}function SZ(n){const e={},t=f(n,["model"]);t!=null&&h(e,["model"],t);const i=f(n,["endpoint"]);i!=null&&h(e,["endpoint"],i);const s=f(n,["checkpoints"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>CZ(o))),h(e,["checkpoints"],r)}return e}function ZS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["state"]);i!=null&&h(e,["state"],vL(i));const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["startTime"]);r!=null&&h(e,["startTime"],r);const o=f(n,["endTime"]);o!=null&&h(e,["endTime"],o);const a=f(n,["updateTime"]);a!=null&&h(e,["updateTime"],a);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["description"]);c!=null&&h(e,["description"],c);const u=f(n,["baseModel"]);u!=null&&h(e,["baseModel"],u);const p=f(n,["tunedModel"]);p!=null&&h(e,["tunedModel"],SZ(p));const m=f(n,["supervisedTuningSpec"]);m!=null&&h(e,["supervisedTuningSpec"],m);const g=f(n,["tuningDataStats"]);g!=null&&h(e,["tuningDataStats"],g);const w=f(n,["encryptionSpec"]);w!=null&&h(e,["encryptionSpec"],w);const v=f(n,["partnerModelTuningSpec"]);v!=null&&h(e,["partnerModelTuningSpec"],v);const S=f(n,["distillationSpec"]);S!=null&&h(e,["distillationSpec"],S);const x=f(n,["experiment"]);x!=null&&h(e,["experiment"],x);const C=f(n,["labels"]);C!=null&&h(e,["labels"],C);const _=f(n,["pipelineJob"]);_!=null&&h(e,["pipelineJob"],_);const A=f(n,["satisfiesPzi"]);A!=null&&h(e,["satisfiesPzi"],A);const P=f(n,["satisfiesPzs"]);P!=null&&h(e,["satisfiesPzs"],P);const M=f(n,["serviceAccount"]);M!=null&&h(e,["serviceAccount"],M);const N=f(n,["tunedModelDisplayName"]);return N!=null&&h(e,["tunedModelDisplayName"],N),e}function EZ(n){const e={},t=f(n,["nextPageToken"]);t!=null&&h(e,["nextPageToken"],t);const i=f(n,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>ZS(r))),h(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _Z extends bu{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Qg(mu.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:zS.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dZ(e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>ZS(u))}else{const c=sZ(e);return a=fe("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>BL(u))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hZ(e);return a=fe("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const p=EZ(u),m=new uP;return Object.assign(m,p),m})}else{const c=oZ(e);return a=fe("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const p=xZ(u),m=new uP;return Object.assign(m,p),m})}}async tuneInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=yZ(e);return r=fe("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>ZS(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uZ(e);return r=fe("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>wZ(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TZ{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const AZ=1024*1024*8,bZ=3,RZ=1e3,PZ=2,rC="x-goog-upload-status";async function MZ(n,e,t){var i,s,r;let o=0,a=0,l=new jS(new Response),c="upload";for(o=n.size;a<o;){const p=Math.min(AZ,o-a),m=n.slice(a,a+p);a+p>=o&&(c+=", finalize");let g=0,w=RZ;for(;g<bZ&&(l=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[rC]));)g++,await IZ(w),w=w*PZ;if(a+=p,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[rC])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[rC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function NZ(n){return{size:n.size,type:n.type}}function IZ(n){return new Promise(e=>setTimeout(e,n))}class kZ{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MZ(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NZ(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DZ{create(e,t,i){return new LZ(e,t,i)}}class LZ{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OP="x-goog-api-key";class FZ{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(OP)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(OP,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OZ="gl-node/";class UZ{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=N8(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new FZ(this.apiKey);this.apiClient=new QX({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:OZ+"web",uploader:new kZ,downloader:new TZ}),this.models=new gQ(this.apiClient),this.live=new dQ(this.apiClient,s,new DZ),this.batches=new r9(this.apiClient),this.chats=new c7(this.models,this.apiClient),this.caches=new o7(this.apiClient),this.files=new S7(this.apiClient),this.operations=new bQ(this.apiClient),this.authTokens=new iZ(this.apiClient),this.tunings=new _Z(this.apiClient)}}const $Z="AIzaSyCxykzmAuWfh4MMe3K8FliQ8uNcvqoWb2c",HL=new UZ({apiKey:$Z}),zL="gemini-2.5-flash-preview-04-17",jL=n=>{let e=n.trim();const t=/^```(json)?\s*\n?(.*?)\n?\s*```$/s,i=e.match(t);i&&i[2]&&(e=i[2].trim()),e=e.replace(/,\s*([}\]])/g,"$1");const s=Math.min(...["[","{"].map(l=>e.indexOf(l)).filter(l=>l!==-1));s>0&&(e=e.slice(s));const r=e.lastIndexOf("]"),o=e.lastIndexOf("}"),a=Math.max(r,o);a!==-1&&(e=e.slice(0,a+1)),e.startsWith("[")&&(e=e.split(`
`).filter(l=>l.trim().startsWith("{")||l.trim().endsWith("}")||l.trim()==="["||l.trim()==="]"||l.trim()===",").join(`
`));try{const l=JSON.parse(e);return Array.isArray(l)?l.filter(c=>c&&(typeof c.term=="string"||typeof c.front=="string")&&(typeof c.definition=="string"||typeof c.back=="string")):l}catch(l){const c=e.match(/\[.*\]/s),u=e.match(/\{.*\}/s),p=c?c[0]:u?u[0]:null;if(p)try{const m=JSON.parse(p);return Array.isArray(m)?m.filter(g=>g&&(typeof g.term=="string"||typeof g.front=="string")&&(typeof g.definition=="string"||typeof g.back=="string")):m}catch{}return console.error("Failed to parse JSON response:",l),console.error("Original string:",n),null}},VZ=n=>{const e=[];let t="";return n.forEach(i=>{i.type==="application/pdf"?t+=`

--- Content from ${i.name} ---
${i.content}`:i.type.startsWith("image/")&&e.push({inlineData:{mimeType:i.type,data:i.content}})}),t&&e.unshift({text:t}),e},Sh=async(n,e,t=!1)=>{const i=VZ(n);return i.unshift({text:e}),await HL.models.generateContent({model:zL,contents:{parts:i},config:t?{responseMimeType:"application/json"}:{}})},BZ=async n=>(await Sh(n,"Using ONLY the content from the following files, provide a concise, easy-to-understand summary. Do not use any information that is not present in the files. If the files do not contain enough information, say so.")).text,HZ=async n=>(await Sh(n,"Using ONLY the content from the following files, create detailed, well-structured study notes. Do not use any information that is not present in the files. If the files do not contain enough information, say so.")).text,zZ=async n=>(await Sh(n,"Using ONLY the content from the following files, generate a hierarchical outline. Do not use any information that is not present in the files. If the files do not contain enough information, say so.")).text,jZ=async(n,e=15,t="medium",i="")=>{let s=`Using ONLY the content from the following files, generate ${e} key terms and their definitions for a set of flashcards. Do not use any information that is not present in the files.`;i&&i.trim()&&(s+=` Focus on the topic: ${i}. If the topic is not covered in the files, say so.`),s+=` The flashcards should be at a ${t} difficulty level. The output MUST be a valid JSON array of objects, where each object has a "term" and a "definition" key. Do not include any text, comments, or explanations outside of the JSON array. If you cannot generate valid JSON, return an empty array [].`;const r=await Sh(n,s,!0),o=jL(r.text);if(!o||!Array.isArray(o)||o.length===0)throw new Error("AI output was not valid JSON. Please try again or use a different file.");return(o||[]).map((a,l)=>({id:`fc_${Date.now()}_${l}`,front:a.term||a.front||"",back:a.definition||a.back||"",mastered:!1}))},GZ=async(n,e=10,t="medium",i="")=>{let s=`Using ONLY the content from the following files, create a multiple-choice quiz with ${e} questions. Do not use any information that is not present in the files.`;i&&i.trim()&&(s+=` Focus on the topic: ${i}. If the topic is not covered in the files, say so.`),s+=` The quiz should be at a ${t} difficulty level. For each question, provide 4 distinct options and indicate the correct answer. The output MUST be a valid JSON array of objects. Each object should have a "question" (string), "options" (array of 4 strings), and "answer" (string, the full text of the correct option). Do not include any text, comments, or explanations outside of the JSON array. If you cannot generate valid JSON, return an empty array [].`;const r=await Sh(n,s,!0),o=jL(r.text);if(!o||!Array.isArray(o)||o.length===0)throw new Error("AI output was not valid JSON. Please try again or use a different file.");return o||[]},qZ=async(n,e,t="medium")=>{const i=`Using ONLY the content from the following files, answer the following question in a detailed, well-explained manner at a ${t} complexity level. Do not use any information that is not present in the files. If the answer is not present in the files, say so.

Question: ${e}`;return(await Sh(n,i)).text},WZ=n=>{let e=n.map(t=>`--- Content from ${t.name} (${t.type}) ---
${(t.content||"").slice(0,2e3)}`).join(`

`);return e.length>1e4&&(e=e.slice(0,1e4)+`
...`),{async sendMessage(t){try{const i=`Context:
${e}

User: ${t}

Assistant: Please format your response using Markdown. Use **bold** for emphasis, - or 1. for lists, and never use asterisks for lists or emphasis. Always use proper Markdown formatting for all structure, lists, and highlights.`;return{text:(await HL.models.generateContent({model:zL,contents:[{text:i}]})).text}}catch(i){const s=i;throw console.error("Gemini chat error:",s),new Error((s==null?void 0:s.message)||"Gemini chat failed")}}}};function N0(n,[e,t]){return Math.min(t,Math.max(e,n))}function Qx(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var GL=["PageUp","PageDown"],qL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],WL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Eh="Slider",[eE,KZ,YZ]=Vg(Eh),[KL,kie]=Bn(Eh,[YZ]),[JZ,Zx]=KL(Eh),YL=E.forwardRef((n,e)=>{const{name:t,min:i=0,max:s=100,step:r=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:w,...v}=n,S=E.useRef(new Set),x=E.useRef(0),_=o==="horizontal"?XZ:QZ,[A=[],P]=xr({prop:u,defaultProp:c,onChange:L=>{var j;(j=[...S.current][x.current])==null||j.focus(),p(L)}}),M=E.useRef(A);function N(L){const $=iee(A,L);D(L,$)}function I(L){D(L,x.current)}function k(){const L=M.current[x.current];A[x.current]!==L&&m(A)}function D(L,$,{commit:j}={commit:!1}){const V=aee(r),H=lee(Math.round((L-i)/r)*r+i,V),O=N0(H,[i,s]);P((B=[])=>{const U=tee(B,O,$);if(oee(U,l*r)){x.current=U.indexOf(O);const F=String(U)!==String(B);return F&&j&&m(U),F?U:B}else return B})}return y.jsx(JZ,{scope:n.__scopeSlider,name:t,disabled:a,min:i,max:s,valueIndexToChangeRef:x,thumbs:S.current,values:A,orientation:o,form:w,children:y.jsx(eE.Provider,{scope:n.__scopeSlider,children:y.jsx(eE.Slot,{scope:n.__scopeSlider,children:y.jsx(_,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:J(v.onPointerDown,()=>{a||(M.current=A)}),min:i,max:s,inverted:g,onSlideStart:a?void 0:N,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:k,onHomeKeyDown:()=>!a&&D(i,0,{commit:!0}),onEndKeyDown:()=>!a&&D(s,A.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:$})=>{if(!a){const H=GL.includes(L.key)||L.shiftKey&&qL.includes(L.key)?10:1,O=x.current,B=A[O],U=r*H*$;D(B+U,O,{commit:!0})}}})})})})});YL.displayName=Eh;var[JL,XL]=KL(Eh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),XZ=E.forwardRef((n,e)=>{const{min:t,max:i,dir:s,inverted:r,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[p,m]=E.useState(null),g=_e(e,_=>m(_)),w=E.useRef(void 0),v=gh(s),S=v==="ltr",x=S&&!r||!S&&r;function C(_){const A=w.current||p.getBoundingClientRect(),P=[0,A.width],N=EA(P,x?[t,i]:[i,t]);return w.current=A,N(_-A.left)}return y.jsx(JL,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(QL,{dir:v,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const A=C(_.clientX);o==null||o(A)},onSlideMove:_=>{const A=C(_.clientX);a==null||a(A)},onSlideEnd:()=>{w.current=void 0,l==null||l()},onStepKeyDown:_=>{const P=WL[x?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:P?-1:1})}})})}),QZ=E.forwardRef((n,e)=>{const{min:t,max:i,inverted:s,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=E.useRef(null),p=_e(e,u),m=E.useRef(void 0),g=!s;function w(v){const S=m.current||u.current.getBoundingClientRect(),x=[0,S.height],_=EA(x,g?[i,t]:[t,i]);return m.current=S,_(v-S.top)}return y.jsx(JL,{scope:n.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(QL,{"data-orientation":"vertical",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const S=w(v.clientY);r==null||r(S)},onSlideMove:v=>{const S=w(v.clientY);o==null||o(S)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:v=>{const x=WL[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:x?-1:1})}})})}),QL=E.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:i,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=Zx(Eh,t);return y.jsx(ue.span,{...c,ref:e,onKeyDown:J(n.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(a(p),p.preventDefault()):GL.concat(qL).includes(p.key)&&(l(p),p.preventDefault())}),onPointerDown:J(n.onPointerDown,p=>{const m=p.target;m.setPointerCapture(p.pointerId),p.preventDefault(),u.thumbs.has(m)?m.focus():i(p)}),onPointerMove:J(n.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&s(p)}),onPointerUp:J(n.onPointerUp,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&(m.releasePointerCapture(p.pointerId),r(p))})})}),ZL="SliderTrack",eF=E.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=Zx(ZL,t);return y.jsx(ue.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...i,ref:e})});eF.displayName=ZL;var tE="SliderRange",tF=E.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=Zx(tE,t),r=XL(tE,t),o=E.useRef(null),a=_e(e,o),l=s.values.length,c=s.values.map(m=>sF(m,s.min,s.max)),u=l>1?Math.min(...c):0,p=100-Math.max(...c);return y.jsx(ue.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...i,ref:a,style:{...n.style,[r.startEdge]:u+"%",[r.endEdge]:p+"%"}})});tF.displayName=tE;var nE="SliderThumb",nF=E.forwardRef((n,e)=>{const t=KZ(n.__scopeSlider),[i,s]=E.useState(null),r=_e(e,a=>s(a)),o=E.useMemo(()=>i?t().findIndex(a=>a.ref.current===i):-1,[t,i]);return y.jsx(ZZ,{...n,ref:r,index:o})}),ZZ=E.forwardRef((n,e)=>{const{__scopeSlider:t,index:i,name:s,...r}=n,o=Zx(nE,t),a=XL(nE,t),[l,c]=E.useState(null),u=_e(e,C=>c(C)),p=l?o.form||!!l.closest("form"):!0,m=Ix(l),g=o.values[i],w=g===void 0?0:sF(g,o.min,o.max),v=nee(i,o.values.length),S=m==null?void 0:m[a.size],x=S?see(S,w,a.direction):0;return E.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${w}% + ${x}px)`},children:[y.jsx(eE.ItemSlot,{scope:n.__scopeSlider,children:y.jsx(ue.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...r,ref:u,style:g===void 0?{display:"none"}:n.style,onFocus:J(n.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),p&&y.jsx(iF,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},i)]})});nF.displayName=nE;var eee="RadioBubbleInput",iF=E.forwardRef(({__scopeSlider:n,value:e,...t},i)=>{const s=E.useRef(null),r=_e(s,i),o=Qx(e);return E.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),y.jsx(ue.input,{style:{display:"none"},...t,ref:r,defaultValue:e})});iF.displayName=eee;function tee(n=[],e,t){const i=[...n];return i[t]=e,i.sort((s,r)=>s-r)}function sF(n,e,t){const r=100/(t-e)*(n-e);return N0(r,[0,100])}function nee(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function iee(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),i=Math.min(...t);return t.indexOf(i)}function see(n,e,t){const i=n/2,r=EA([0,50],[0,i]);return(i-r(e)*t)*t}function ree(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function oee(n,e){if(e>0){const t=ree(n);return Math.min(...t)>=e}return!0}function EA(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function aee(n){return(String(n).split(".")[1]||"").length}function lee(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var rF=YL,cee=eF,uee=tF,dee=nF;const _A=E.forwardRef(({className:n,...e},t)=>y.jsxs(rF,{ref:t,className:ye("relative flex w-full touch-none select-none items-center",n),...e,children:[y.jsx(cee,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:y.jsx(uee,{className:"absolute h-full bg-primary"})}),y.jsx(dee,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_A.displayName=rF.displayName;var fee=[" ","Enter","ArrowUp","ArrowDown"],hee=[" ","Enter"],gu="Select",[ew,tw,pee]=Vg(gu),[_h,Die]=Bn(gu,[pee,uh]),nw=uh(),[mee,wl]=_h(gu),[gee,yee]=_h(gu),oF=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:s,onOpenChange:r,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:p,disabled:m,required:g,form:w}=n,v=nw(e),[S,x]=E.useState(null),[C,_]=E.useState(null),[A,P]=E.useState(!1),M=gh(c),[N,I]=xr({prop:i,defaultProp:s??!1,onChange:r,caller:gu}),[k,D]=xr({prop:o,defaultProp:a,onChange:l,caller:gu}),L=E.useRef(null),$=S?w||!!S.closest("form"):!0,[j,V]=E.useState(new Set),H=Array.from(j).map(O=>O.props.value).join(";");return y.jsx(kk,{...v,children:y.jsxs(mee,{required:g,scope:e,trigger:S,onTriggerChange:x,valueNode:C,onValueNodeChange:_,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:mr(),value:k,onValueChange:D,open:N,onOpenChange:I,dir:M,triggerPointerDownPosRef:L,disabled:m,children:[y.jsx(ew.Provider,{scope:e,children:y.jsx(gee,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(O=>{V(B=>new Set(B).add(O))},[]),onNativeOptionRemove:E.useCallback(O=>{V(B=>{const U=new Set(B);return U.delete(O),U})},[]),children:t})}),$?y.jsxs(MF,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:p,value:k,onChange:O=>D(O.target.value),disabled:m,form:w,children:[k===void 0?y.jsx("option",{value:""}):null,Array.from(j)]},H):null]})})};oF.displayName=gu;var aF="SelectTrigger",lF=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...s}=n,r=nw(t),o=wl(aF,t),a=o.disabled||i,l=_e(e,o.onTriggerChange),c=tw(t),u=E.useRef("touch"),[p,m,g]=IF(v=>{const S=c().filter(_=>!_.disabled),x=S.find(_=>_.value===o.value),C=kF(S,v,x);C!==void 0&&o.onValueChange(C.value)}),w=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return y.jsx(DT,{asChild:!0,...r,children:y.jsx(ue.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":NF(o.value)?"":void 0,...s,ref:l,onClick:J(s.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:J(s.onPointerDown,v=>{u.current=v.pointerType;const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:J(s.onKeyDown,v=>{const S=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(S&&v.key===" ")&&fee.includes(v.key)&&(w(),v.preventDefault())})})})});lF.displayName=aF;var cF="SelectValue",uF=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,children:r,placeholder:o="",...a}=n,l=wl(cF,t),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,p=_e(e,l.onValueNodeChange);return dn(()=>{c(u)},[c,u]),y.jsx(ue.span,{...a,ref:p,style:{pointerEvents:"none"},children:NF(l.value)?y.jsx(y.Fragment,{children:o}):r})});uF.displayName=cF;var vee="SelectIcon",dF=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...s}=n;return y.jsx(ue.span,{"aria-hidden":!0,...s,ref:e,children:i||""})});dF.displayName=vee;var xee="SelectPortal",fF=n=>y.jsx(Bg,{asChild:!0,...n});fF.displayName=xee;var yu="SelectContent",hF=E.forwardRef((n,e)=>{const t=wl(yu,n.__scopeSelect),[i,s]=E.useState();if(dn(()=>{s(new DocumentFragment)},[]),!t.open){const r=i;return r?Eu.createPortal(y.jsx(pF,{scope:n.__scopeSelect,children:y.jsx(ew.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),r):null}return y.jsx(mF,{...n,ref:e})});hF.displayName=yu;var rs=10,[pF,Cl]=_h(yu),wee="SelectContentImpl",Cee=ou("SelectContent.RemoveScroll"),mF=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:S,...x}=n,C=wl(yu,t),[_,A]=E.useState(null),[P,M]=E.useState(null),N=_e(e,G=>A(G)),[I,k]=E.useState(null),[D,L]=E.useState(null),$=tw(t),[j,V]=E.useState(!1),H=E.useRef(!1);E.useEffect(()=>{if(_)return QT(_)},[_]),XT();const O=E.useCallback(G=>{const[Te,...Ie]=$().map(ne=>ne.ref.current),[Me]=Ie.slice(-1),Z=document.activeElement;for(const ne of G)if(ne===Z||(ne==null||ne.scrollIntoView({block:"nearest"}),ne===Te&&P&&(P.scrollTop=0),ne===Me&&P&&(P.scrollTop=P.scrollHeight),ne==null||ne.focus(),document.activeElement!==Z))return},[$,P]),B=E.useCallback(()=>O([I,_]),[O,I,_]);E.useEffect(()=>{j&&B()},[j,B]);const{onOpenChange:U,triggerPointerDownPosRef:F}=C;E.useEffect(()=>{if(_){let G={x:0,y:0};const Te=Me=>{var Z,ne;G={x:Math.abs(Math.round(Me.pageX)-(((Z=F.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((ne=F.current)==null?void 0:ne.y)??0))}},Ie=Me=>{G.x<=10&&G.y<=10?Me.preventDefault():_.contains(Me.target)||U(!1),document.removeEventListener("pointermove",Te),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[_,U,F]),E.useEffect(()=>{const G=()=>U(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[U]);const[z,te]=IF(G=>{const Te=$().filter(Z=>!Z.disabled),Ie=Te.find(Z=>Z.ref.current===document.activeElement),Me=kF(Te,G,Ie);Me&&setTimeout(()=>Me.ref.current.focus())}),Y=E.useCallback((G,Te,Ie)=>{const Me=!H.current&&!Ie;(C.value!==void 0&&C.value===Te||Me)&&(k(G),Me&&(H.current=!0))},[C.value]),ie=E.useCallback(()=>_==null?void 0:_.focus(),[_]),he=E.useCallback((G,Te,Ie)=>{const Me=!H.current&&!Ie;(C.value!==void 0&&C.value===Te||Me)&&L(G)},[C.value]),Re=i==="popper"?iE:gF,Pe=Re===iE?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:S}:{};return y.jsx(pF,{scope:t,content:_,viewport:P,onViewportChange:M,itemRefCallback:Y,selectedItem:I,onItemLeave:ie,itemTextRefCallback:he,focusSelectedItem:B,selectedItemText:D,position:i,isPositioned:j,searchRef:z,children:y.jsx($x,{as:Cee,allowPinchZoom:!0,children:y.jsx(Ox,{asChild:!0,trapped:C.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:J(s,G=>{var Te;(Te=C.trigger)==null||Te.focus({preventScroll:!0}),G.preventDefault()}),children:y.jsx(ah,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:y.jsx(Re,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:G=>G.preventDefault(),...x,...Pe,onPlaced:()=>V(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:J(x.onKeyDown,G=>{const Te=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!Te&&G.key.length===1&&te(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let Me=$().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(G.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const Z=G.target,ne=Me.indexOf(Z);Me=Me.slice(ne+1)}setTimeout(()=>O(Me)),G.preventDefault()}})})})})})})});mF.displayName=wee;var See="SelectItemAlignedPosition",gF=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...s}=n,r=wl(yu,t),o=Cl(yu,t),[a,l]=E.useState(null),[c,u]=E.useState(null),p=_e(e,N=>u(N)),m=tw(t),g=E.useRef(!1),w=E.useRef(!0),{viewport:v,selectedItem:S,selectedItemText:x,focusSelectedItem:C}=o,_=E.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&c&&v&&S&&x){const N=r.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),k=r.valueNode.getBoundingClientRect(),D=x.getBoundingClientRect();if(r.dir!=="rtl"){const Z=D.left-I.left,ne=k.left-Z,Le=N.left-ne,pt=N.width+Le,Tr=Math.max(pt,I.width),Uo=window.innerWidth-rs,Sl=N0(ne,[rs,Math.max(rs,Uo-Tr)]);a.style.minWidth=pt+"px",a.style.left=Sl+"px"}else{const Z=I.right-D.right,ne=window.innerWidth-k.right-Z,Le=window.innerWidth-N.right-ne,pt=N.width+Le,Tr=Math.max(pt,I.width),Uo=window.innerWidth-rs,Sl=N0(ne,[rs,Math.max(rs,Uo-Tr)]);a.style.minWidth=pt+"px",a.style.right=Sl+"px"}const L=m(),$=window.innerHeight-rs*2,j=v.scrollHeight,V=window.getComputedStyle(c),H=parseInt(V.borderTopWidth,10),O=parseInt(V.paddingTop,10),B=parseInt(V.borderBottomWidth,10),U=parseInt(V.paddingBottom,10),F=H+O+j+U+B,z=Math.min(S.offsetHeight*5,F),te=window.getComputedStyle(v),Y=parseInt(te.paddingTop,10),ie=parseInt(te.paddingBottom,10),he=N.top+N.height/2-rs,Re=$-he,Pe=S.offsetHeight/2,G=S.offsetTop+Pe,Te=H+O+G,Ie=F-Te;if(Te<=he){const Z=L.length>0&&S===L[L.length-1].ref.current;a.style.bottom="0px";const ne=c.clientHeight-v.offsetTop-v.offsetHeight,Le=Math.max(Re,Pe+(Z?ie:0)+ne+B),pt=Te+Le;a.style.height=pt+"px"}else{const Z=L.length>0&&S===L[0].ref.current;a.style.top="0px";const Le=Math.max(he,H+v.offsetTop+(Z?Y:0)+Pe)+Ie;a.style.height=Le+"px",v.scrollTop=Te-he+v.offsetTop}a.style.margin=`${rs}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=$+"px",i==null||i(),requestAnimationFrame(()=>g.current=!0)}},[m,r.trigger,r.valueNode,a,c,v,S,x,r.dir,i]);dn(()=>_(),[_]);const[A,P]=E.useState();dn(()=>{c&&P(window.getComputedStyle(c).zIndex)},[c]);const M=E.useCallback(N=>{N&&w.current===!0&&(_(),C==null||C(),w.current=!1)},[_,C]);return y.jsx(_ee,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:y.jsx(ue.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});gF.displayName=See;var Eee="SelectPopperPosition",iE=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:s=rs,...r}=n,o=nw(t);return y.jsx(LT,{...o,...r,ref:e,align:i,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});iE.displayName=Eee;var[_ee,TA]=_h(yu,{}),sE="SelectViewport",yF=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...s}=n,r=Cl(sE,t),o=TA(sE,t),a=_e(e,r.onViewportChange),l=E.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),y.jsx(ew.Slot,{scope:t,children:y.jsx(ue.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:J(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&p){const g=Math.abs(l.current-u.scrollTop);if(g>0){const w=window.innerHeight-rs*2,v=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),x=Math.max(v,S);if(x<w){const C=x+g,_=Math.min(w,C),A=C-_;p.style.height=_+"px",p.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,p.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});yF.displayName=sE;var vF="SelectGroup",[Tee,Aee]=_h(vF),bee=E.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=mr();return y.jsx(Tee,{scope:t,id:s,children:y.jsx(ue.div,{role:"group","aria-labelledby":s,...i,ref:e})})});bee.displayName=vF;var xF="SelectLabel",wF=E.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=Aee(xF,t);return y.jsx(ue.div,{id:s.id,...i,ref:e})});wF.displayName=xF;var I0="SelectItem",[Ree,CF]=_h(I0),SF=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:s=!1,textValue:r,...o}=n,a=wl(I0,t),l=Cl(I0,t),c=a.value===i,[u,p]=E.useState(r??""),[m,g]=E.useState(!1),w=_e(e,C=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,C,i,s)}),v=mr(),S=E.useRef("touch"),x=()=>{s||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Ree,{scope:t,value:i,disabled:s,textId:v,isSelected:c,onItemTextChange:E.useCallback(C=>{p(_=>_||((C==null?void 0:C.textContent)??"").trim())},[]),children:y.jsx(ew.ItemSlot,{scope:t,value:i,disabled:s,textValue:u,children:y.jsx(ue.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:J(o.onFocus,()=>g(!0)),onBlur:J(o.onBlur,()=>g(!1)),onClick:J(o.onClick,()=>{S.current!=="mouse"&&x()}),onPointerUp:J(o.onPointerUp,()=>{S.current==="mouse"&&x()}),onPointerDown:J(o.onPointerDown,C=>{S.current=C.pointerType}),onPointerMove:J(o.onPointerMove,C=>{var _;S.current=C.pointerType,s?(_=l.onItemLeave)==null||_.call(l):S.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:J(o.onPointerLeave,C=>{var _;C.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:J(o.onKeyDown,C=>{var A;((A=l.searchRef)==null?void 0:A.current)!==""&&C.key===" "||(hee.includes(C.key)&&x(),C.key===" "&&C.preventDefault())})})})})});SF.displayName=I0;var Jh="SelectItemText",EF=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,...r}=n,o=wl(Jh,t),a=Cl(Jh,t),l=CF(Jh,t),c=yee(Jh,t),[u,p]=E.useState(null),m=_e(e,x=>p(x),l.onItemTextChange,x=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,x,l.value,l.disabled)}),g=u==null?void 0:u.textContent,w=E.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:S}=c;return dn(()=>(v(w),()=>S(w)),[v,S,w]),y.jsxs(y.Fragment,{children:[y.jsx(ue.span,{id:l.textId,...r,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Eu.createPortal(r.children,o.valueNode):null]})});EF.displayName=Jh;var _F="SelectItemIndicator",TF=E.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return CF(_F,t).isSelected?y.jsx(ue.span,{"aria-hidden":!0,...i,ref:e}):null});TF.displayName=_F;var rE="SelectScrollUpButton",AF=E.forwardRef((n,e)=>{const t=Cl(rE,n.__scopeSelect),i=TA(rE,n.__scopeSelect),[s,r]=E.useState(!1),o=_e(e,i.onScrollButtonChange);return dn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;r(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?y.jsx(RF,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});AF.displayName=rE;var oE="SelectScrollDownButton",bF=E.forwardRef((n,e)=>{const t=Cl(oE,n.__scopeSelect),i=TA(oE,n.__scopeSelect),[s,r]=E.useState(!1),o=_e(e,i.onScrollButtonChange);return dn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?y.jsx(RF,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});bF.displayName=oE;var RF=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...s}=n,r=Cl("SelectScrollButton",t),o=E.useRef(null),a=tw(t),l=E.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),dn(()=>{var u;const c=a().find(p=>p.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),y.jsx(ue.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:J(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:J(s.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:J(s.onPointerLeave,()=>{l()})})}),Pee="SelectSeparator",PF=E.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return y.jsx(ue.div,{"aria-hidden":!0,...i,ref:e})});PF.displayName=Pee;var aE="SelectArrow",Mee=E.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=nw(t),r=wl(aE,t),o=Cl(aE,t);return r.open&&o.position==="popper"?y.jsx(FT,{...s,...i,ref:e}):null});Mee.displayName=aE;var Nee="SelectBubbleInput",MF=E.forwardRef(({__scopeSelect:n,value:e,...t},i)=>{const s=E.useRef(null),r=_e(i,s),o=Qx(e);return E.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const p=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(p)}},[o,e]),y.jsx(ue.select,{...t,style:{...OI,...t.style},ref:r,defaultValue:e})});MF.displayName=Nee;function NF(n){return n===""||n===void 0}function IF(n){const e=ii(n),t=E.useRef(""),i=E.useRef(0),s=E.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),r=E.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,s,r]}function kF(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=Iee(n,Math.max(r,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function Iee(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var kee=oF,DF=lF,Dee=uF,Lee=dF,Fee=fF,LF=hF,Oee=yF,FF=wF,OF=SF,Uee=EF,$ee=TF,UF=AF,$F=bF,VF=PF;const AA=kee,bA=Dee,iw=E.forwardRef(({className:n,children:e,...t},i)=>y.jsxs(DF,{ref:i,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,y.jsx(Lee,{asChild:!0,children:y.jsx(ok,{className:"h-4 w-4 opacity-50"})})]}));iw.displayName=DF.displayName;const BF=E.forwardRef(({className:n,...e},t)=>y.jsx(UF,{ref:t,className:ye("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(m3,{className:"h-4 w-4"})}));BF.displayName=UF.displayName;const HF=E.forwardRef(({className:n,...e},t)=>y.jsx($F,{ref:t,className:ye("flex cursor-default items-center justify-center py-1",n),...e,children:y.jsx(ok,{className:"h-4 w-4"})}));HF.displayName=$F.displayName;const sw=E.forwardRef(({className:n,children:e,position:t="popper",...i},s)=>y.jsx(Fee,{children:y.jsxs(LF,{ref:s,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...i,children:[y.jsx(BF,{}),y.jsx(Oee,{className:ye("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(HF,{})]})}));sw.displayName=LF.displayName;const Vee=E.forwardRef(({className:n,...e},t)=>y.jsx(FF,{ref:t,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));Vee.displayName=FF.displayName;const vr=E.forwardRef(({className:n,children:e,...t},i)=>y.jsxs(OF,{ref:i,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx($ee,{children:y.jsx(al,{className:"h-4 w-4"})})}),y.jsx(Uee,{children:e})]}));vr.displayName=OF.displayName;const Bee=E.forwardRef(({className:n,...e},t)=>y.jsx(VF,{ref:t,className:ye("-mx-1 my-1 h-px bg-muted",n),...e}));Bee.displayName=VF.displayName;const Hee=({flashcardSets:n,onCreateSet:e,onUpdateSet:t,files:i,sessionId:s})=>{const[r,o]=E.useState(null),[a,l]=E.useState(!1),[c,u]=E.useState(""),[p,m]=E.useState({count:15,difficulty:"medium",topic:""}),[g,w]=E.useState(!1),[v,S]=E.useState(null),[x,C]=E.useState(0),[_,A]=E.useState(!1);E.useEffect(()=>{C(0),A(!1)},[r]);const P=async()=>{w(!0),S(null);try{const $=await jZ(i,p.count,p.difficulty,p.topic),j=c||`Set ${n.length+1}`,V={id:`set-${Date.now()}`,name:j,createdAt:new Date().toISOString(),settings:{...p},flashcards:$};e(V),o(V.id),l(!1),u("")}catch($){S($ instanceof Error?$.message:"Failed to generate flashcards")}finally{w(!1)}},M=n.find($=>$.id===r)||null;if(!M)return y.jsx(Wh,{title:"Flashcards",isLoading:g,error:v,children:y.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[y.jsxs("div",{className:"w-full max-w-xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Your Flashcard Sets"}),y.jsx(me,{onClick:()=>l(!0),className:"px-4 py-2",children:"+ New Set"})]}),n.length===0?y.jsx("div",{className:"text-gray-500 text-center py-8",children:"No flashcard sets yet."}):y.jsx("ul",{className:"space-y-3",children:n.map($=>y.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 cursor-pointer hover:bg-purple-50",onClick:()=>o($.id),children:[y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold",children:$.name}),y.jsxs("div",{className:"text-xs text-gray-500",children:[$.flashcards.filter(j=>j.mastered).length," / ",$.flashcards.length," mastered"]})]}),y.jsx(me,{size:"sm",variant:"outline",onClick:j=>{j.stopPropagation(),o($.id)},children:"Study"})]},$.id))})]}),a&&y.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create New Flashcard Set"}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Set Name"}),y.jsx(du,{value:c,onChange:$=>u($.target.value),placeholder:"e.g. Chapter 1 Vocab"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Number of flashcards"}),y.jsx(_A,{value:[p.count],min:5,max:30,step:1,onValueChange:$=>m({...p,count:$[0]})}),y.jsx("span",{className:"ml-2",children:p.count})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Difficulty"}),y.jsxs(AA,{value:p.difficulty,onValueChange:$=>m({...p,difficulty:$}),children:[y.jsx(iw,{children:y.jsx(bA,{placeholder:"Select difficulty"})}),y.jsxs(sw,{children:[y.jsx(vr,{value:"easy",children:"Easy"}),y.jsx(vr,{value:"medium",children:"Medium"}),y.jsx(vr,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-1 font-medium",children:"Topic (optional)"}),y.jsx(du,{value:p.topic,onChange:$=>m({...p,topic:$.target.value}),placeholder:"e.g. Photosynthesis"})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsx(me,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),y.jsx(me,{onClick:P,disabled:g,children:g?"Generating...":"Create"})]}),v&&y.jsx("div",{className:"text-red-500 mt-2 text-sm",children:v})]})})]})});const N=M.flashcards,I=N[x],k=()=>{x<N.length-1&&(C(x+1),A(!1))},D=()=>{x>0&&(C(x-1),A(!1))},L=()=>{const $=[...N];$[x].mastered=!$[x].mastered;const j={...M,flashcards:$};t(j)};return g?y.jsx(Wh,{title:"Flashcards",isLoading:g,error:v,children:y.jsx("div",{className:"flex justify-center items-center h-32",children:"Generating flashcards..."})}):v?y.jsx(Wh,{title:"Flashcards",isLoading:g,error:v,children:y.jsx("div",{className:"flex justify-center items-center h-32 text-red-500",children:v})}):y.jsx(Wh,{title:M.name,isLoading:g,error:v,children:y.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[y.jsxs("div",{className:"text-base text-gray-500 mb-2",children:["Card ",x+1," of ",N.length," | ",N.filter($=>$.mastered).length," mastered"]}),y.jsx("div",{className:"w-full flex justify-center",children:y.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 w-full max-w-2xl min-h-[320px] flex flex-col justify-center items-center border border-gray-200 transition-all duration-300",children:[y.jsx("div",{className:"text-3xl font-extrabold mb-6 text-gray-900",children:I.front}),_&&y.jsx("div",{className:"text-2xl text-gray-700 border-t pt-8 mt-8 w-full text-center",children:I.back})]})}),y.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mt-10",children:[y.jsx(me,{onClick:D,disabled:x===0,className:"min-w-[140px] py-3 text-lg",children:"Previous"}),y.jsx(me,{onClick:()=>A(!_),className:"min-w-[180px] py-3 text-lg",children:_?"Hide Answer":"Show Answer"}),y.jsx(me,{onClick:k,disabled:x===N.length-1,className:"min-w-[140px] py-3 text-lg",children:"Next"})]}),y.jsx("div",{className:"flex justify-center mt-6",children:y.jsx(me,{variant:I.mastered?"default":"outline",onClick:L,className:"min-w-[220px] py-3 text-lg",children:I.mastered?"Mastered":"Mark as Mastered"})}),y.jsx("div",{className:"flex justify-center mt-8",children:y.jsx(me,{variant:"outline",onClick:()=>o(null),children:"Back to Sets"})})]})})};var rw="Checkbox",[zee,Lie]=Bn(rw),[jee,RA]=zee(rw);function Gee(n){const{__scopeCheckbox:e,checked:t,children:i,defaultChecked:s,disabled:r,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:p}=n,[m,g]=xr({prop:t,defaultProp:s??!1,onChange:l,caller:rw}),[w,v]=E.useState(null),[S,x]=E.useState(null),C=E.useRef(!1),_=w?!!o||!!w.closest("form"):!0,A={checked:m,disabled:r,setChecked:g,control:w,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:C,required:c,defaultChecked:sl(s)?!1:s,isFormControl:_,bubbleInput:S,setBubbleInput:x};return y.jsx(jee,{scope:e,...A,children:qee(p)?p(A):i})}var zF="CheckboxTrigger",jF=E.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...i},s)=>{const{control:r,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:w}=RA(zF,n),v=_e(s,u),S=E.useRef(l);return E.useEffect(()=>{const x=r==null?void 0:r.form;if(x){const C=()=>p(S.current);return x.addEventListener("reset",C),()=>x.removeEventListener("reset",C)}},[r,p]),y.jsx(ue.button,{type:"button",role:"checkbox","aria-checked":sl(l)?"mixed":l,"aria-required":c,"data-state":YF(l),"data-disabled":a?"":void 0,disabled:a,value:o,...i,ref:v,onKeyDown:J(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:J(t,x=>{p(C=>sl(C)?!0:!C),w&&g&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});jF.displayName=zF;var PA=E.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:i,checked:s,defaultChecked:r,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...p}=n;return y.jsx(Gee,{__scopeCheckbox:t,checked:s,defaultChecked:r,disabled:a,required:o,onCheckedChange:c,name:i,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>y.jsxs(y.Fragment,{children:[y.jsx(jF,{...p,ref:e,__scopeCheckbox:t}),m&&y.jsx(KF,{__scopeCheckbox:t})]})})});PA.displayName=rw;var GF="CheckboxIndicator",qF=E.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:i,...s}=n,r=RA(GF,t);return y.jsx(Ni,{present:i||sl(r.checked)||r.checked===!0,children:y.jsx(ue.span,{"data-state":YF(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});qF.displayName=GF;var WF="CheckboxBubbleInput",KF=E.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:i,hasConsumerStoppedPropagationRef:s,checked:r,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:p,bubbleInput:m,setBubbleInput:g}=RA(WF,n),w=_e(t,g),v=Qx(r),S=Ix(i);E.useEffect(()=>{const C=m;if(!C)return;const _=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(_,"checked").set,M=!s.current;if(v!==r&&P){const N=new Event("click",{bubbles:M});C.indeterminate=sl(r),P.call(C,sl(r)?!1:r),C.dispatchEvent(N)}},[m,v,r,s]);const x=E.useRef(sl(r)?!1:r);return y.jsx(ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:p,...e,tabIndex:-1,ref:w,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});KF.displayName=WF;function qee(n){return typeof n=="function"}function sl(n){return n==="indeterminate"}function YF(n){return sl(n)?"indeterminate":n?"checked":"unchecked"}const Xh=E.forwardRef(({className:n,...e},t)=>y.jsx(PA,{ref:t,className:ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(qF,{className:ye("flex items-center justify-center text-current"),children:y.jsx(al,{className:"h-4 w-4"})})}));Xh.displayName=PA.displayName;function Wee(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Kee=["color"],Yee=E.forwardRef(function(n,e){var t=n.color,i=t===void 0?"currentColor":t,s=Wee(n,Kee);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),E.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),MA="Radio",[Jee,JF]=Bn(MA),[Xee,Qee]=Jee(MA),XF=E.forwardRef((n,e)=>{const{__scopeRadio:t,name:i,checked:s=!1,required:r,disabled:o,value:a="on",onCheck:l,form:c,...u}=n,[p,m]=E.useState(null),g=_e(e,S=>m(S)),w=E.useRef(!1),v=p?c||!!p.closest("form"):!0;return y.jsxs(Xee,{scope:t,checked:s,disabled:o,children:[y.jsx(ue.button,{type:"button",role:"radio","aria-checked":s,"data-state":tO(s),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:g,onClick:J(n.onClick,S=>{s||l==null||l(),v&&(w.current=S.isPropagationStopped(),w.current||S.stopPropagation())})}),v&&y.jsx(eO,{control:p,bubbles:!w.current,name:i,value:a,checked:s,required:r,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});XF.displayName=MA;var QF="RadioIndicator",ZF=E.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:i,...s}=n,r=Qee(QF,t);return y.jsx(Ni,{present:i||r.checked,children:y.jsx(ue.span,{"data-state":tO(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})})});ZF.displayName=QF;var Zee="RadioBubbleInput",eO=E.forwardRef(({__scopeRadio:n,control:e,checked:t,bubbles:i=!0,...s},r)=>{const o=E.useRef(null),a=_e(o,r),l=Qx(t),c=Ix(e);return E.useEffect(()=>{const u=o.current;if(!u)return;const p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==t&&g){const w=new Event("click",{bubbles:i});g.call(u,t),u.dispatchEvent(w)}},[l,t,i]),y.jsx(ue.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});eO.displayName=Zee;function tO(n){return n?"checked":"unchecked"}var ete=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ow="RadioGroup",[tte,Fie]=Bn(ow,[yh,JF]),nO=yh(),iO=JF(),[nte,ite]=tte(ow),sO=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:i,defaultValue:s,value:r,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:p,...m}=n,g=nO(t),w=gh(c),[v,S]=xr({prop:r,defaultProp:s??null,onChange:p,caller:ow});return y.jsx(nte,{scope:t,name:i,required:o,disabled:a,value:v,onValueChange:S,children:y.jsx(sA,{asChild:!0,...g,orientation:l,dir:w,loop:u,children:y.jsx(ue.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:w,...m,ref:e})})})});sO.displayName=ow;var rO="RadioGroupItem",oO=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:i,...s}=n,r=ite(rO,t),o=r.disabled||i,a=nO(t),l=iO(t),c=E.useRef(null),u=_e(e,c),p=r.value===s.value,m=E.useRef(!1);return E.useEffect(()=>{const g=v=>{ete.includes(v.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",w)}},[]),y.jsx(rA,{asChild:!0,...a,focusable:!o,active:p,children:y.jsx(XF,{disabled:o,required:r.required,checked:p,...l,...s,name:r.name,ref:u,onCheck:()=>r.onValueChange(s.value),onKeyDown:J(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:J(s.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});oO.displayName=rO;var ste="RadioGroupIndicator",aO=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...i}=n,s=iO(t);return y.jsx(ZF,{...s,...i,ref:e})});aO.displayName=ste;var lO=sO,cO=oO,rte=aO;const k0=E.forwardRef(({className:n,...e},t)=>y.jsx(lO,{className:ye("grid gap-2",n),...e,ref:t}));k0.displayName=lO.displayName;const Yo=E.forwardRef(({className:n,...e},t)=>y.jsx(cO,{ref:t,className:ye("aspect-square h-5 w-5 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:y.jsx(rte,{className:"flex items-center justify-center",children:y.jsx(Yee,{className:"h-3.5 w-3.5 fill-primary"})})}));Yo.displayName=cO.displayName;function ote({sessionId:n,quizzes:e,files:t,onQuizAdded:i}){const[s,r]=E.useState(null),[o,a]=E.useState(0),[l,c]=E.useState(null),[u,p]=E.useState(!1),[m,g]=E.useState(0),[w,v]=E.useState(!1),[S,x]=E.useState(!1),[C,_]=E.useState(!1),[A,P]=E.useState(!1),[M,N]=E.useState({questionCount:5,difficulty:"medium",topic:"",showExplanations:!0,questionTypes:["multiple-choice"]}),{toast:I}=Do(),k=H=>{r(H),a(0),c(null),p(!1),g(0),v(!1)},D=H=>{u||c(H)},L=()=>{l===null||!s||(p(!0),l===s.questions[o].correctAnswer&&g(m+1))},$=()=>{s&&(o<s.questions.length-1?(a(o+1),c(null),p(!1)):v(!0))},j=()=>{!s||o===0||(a(o-1),c(null),p(!1))},V=async()=>{var H;_(!0);try{if(!t||t.length===0){I({title:"No study materials",description:"Please upload files first to generate quiz questions from your content",variant:"destructive"}),_(!1);return}const B=(await GZ(t.map(F=>({id:F.id,name:F.name,type:F.type,content:F.content||""})),M.questionCount,M.difficulty,M.topic)).slice(0,M.questionCount),U={title:M.topic||((H=t[0])==null?void 0:H.name.replace(".pdf",""))||"Quiz",questions:B.map((F,z)=>({id:`q_${Date.now()}_${z}`,text:F.question,options:F.options,correctAnswer:F.options.findIndex(te=>te===F.answer),explanation:""}))};I({title:"Success",description:"New quiz generated successfully"})}catch(O){console.error("Error generating quiz:",O),I({title:"Error",description:"Failed to generate quiz",variant:"destructive"})}finally{_(!1)}};return y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Quizzes"}),y.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes"})]}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsxs(Bx,{open:A,onOpenChange:P,children:[y.jsx(Hx,{asChild:!0,children:y.jsxs(me,{variant:"outline",className:"flex items-center gap-2",children:[y.jsx(x1,{className:"h-4 w-4"}),"Quiz Options"]})}),y.jsxs(qg,{children:[y.jsx(Wg,{children:y.jsx(Kg,{children:"Quiz Generation Settings"})}),y.jsxs("div",{className:"space-y-4 py-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{children:"Number of questions"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(_A,{value:[M.questionCount],min:3,max:15,step:1,onValueChange:H=>N({...M,questionCount:H[0]}),className:"flex-grow"}),y.jsx("span",{className:"w-8 text-center font-medium",children:M.questionCount})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{children:"Difficulty level"}),y.jsxs(AA,{value:M.difficulty,onValueChange:H=>N({...M,difficulty:H}),children:[y.jsx(iw,{children:y.jsx(bA,{placeholder:"Select difficulty"})}),y.jsxs(sw,{children:[y.jsx(vr,{value:"easy",children:"Easy"}),y.jsx(vr,{value:"medium",children:"Medium"}),y.jsx(vr,{value:"hard",children:"Hard"})]})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{children:"Specific Topic (optional)"}),y.jsx(du,{id:"topic",placeholder:"Leave blank to generate from uploaded files",value:M.topic,onChange:H=>N({...M,topic:H.target.value})}),y.jsx("p",{className:"text-xs text-gray-500",children:"If left blank, quiz will be generated based on your study materials"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(yt,{children:"Question Types"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Xh,{id:"multiple-choice",checked:M.questionTypes.includes("multiple-choice"),onCheckedChange:H=>{const O=H?[...M.questionTypes,"multiple-choice"]:M.questionTypes.filter(B=>B!=="multiple-choice");N({...M,questionTypes:O.length>0?O:["multiple-choice"]})}}),y.jsx(yt,{htmlFor:"multiple-choice",children:"Multiple Choice"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Xh,{id:"true-false",checked:M.questionTypes.includes("true-false"),onCheckedChange:H=>{const O=H?[...M.questionTypes,"true-false"]:M.questionTypes.filter(B=>B!=="true-false");N({...M,questionTypes:O})}}),y.jsx(yt,{htmlFor:"true-false",children:"True/False"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Xh,{id:"short-answer",checked:M.questionTypes.includes("short-answer"),onCheckedChange:H=>{const O=H?[...M.questionTypes,"short-answer"]:M.questionTypes.filter(B=>B!=="short-answer");N({...M,questionTypes:O})}}),y.jsx(yt,{htmlFor:"short-answer",children:"Short Answer"})]})]}),y.jsx("p",{className:"text-xs text-gray-500",children:"Select the types of questions you want in your quiz"})]}),y.jsxs("div",{className:"flex items-start space-x-2",children:[y.jsx(Xh,{id:"explanations",checked:M.showExplanations,onCheckedChange:H=>N({...M,showExplanations:H===!0})}),y.jsxs("div",{className:"grid gap-1.5 leading-none",children:[y.jsx(yt,{htmlFor:"explanations",children:"Include answer explanations"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Show detailed explanations after answering each question"})]})]})]}),y.jsx(nA,{children:y.jsx(me,{onClick:()=>P(!1),children:"Save Settings"})})]})]}),y.jsxs(me,{variant:"outline",className:"flex items-center gap-2 border-purple-300 text-purple-600 hover:bg-purple-50",onClick:V,disabled:C,children:[C?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-purple-500"}):y.jsx(w1,{className:"h-4 w-4"}),"Generate with AI"]})]})]}),s?w?y.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full gradient-bg mx-auto flex items-center justify-center mb-4",children:y.jsx(al,{className:"h-8 w-8 text-white"})}),y.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Completed!"}),y.jsxs("p",{className:"text-gray-600 mb-2",children:["Your score: ",m," out of ",s.questions.length]}),y.jsxs("p",{className:"text-gray-600 mb-6",children:[Math.round(m/s.questions.length*100),"% correct"]}),y.jsxs("div",{className:"flex justify-center gap-4",children:[y.jsx(me,{variant:"outline",onClick:()=>k(s),children:"Retry Quiz"}),y.jsx(me,{className:"gradient-bg",onClick:()=>r(null),children:"Back to Quizzes"})]})]}):y.jsxs("div",{className:"bg-white rounded-lg border",children:[y.jsxs("div",{className:"border-b p-6",children:[y.jsx("h3",{className:"text-xl font-semibold",children:s.title}),y.jsxs("div",{className:"flex justify-between items-center mt-2",children:[y.jsxs("span",{className:"text-gray-600",children:["Question ",o+1," of ",s.questions.length]}),y.jsx(me,{variant:"ghost",onClick:()=>r(null),children:"Exit Quiz"})]})]}),y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h4",{className:"text-lg font-medium mb-4",children:s.questions[o].text}),y.jsx(k0,{value:l==null?void 0:l.toString(),onValueChange:H=>D(parseInt(H)),className:"space-y-3",disabled:u,children:s.questions[o].options.map((H,O)=>{const B=O===s.questions[o].correctAnswer,U=l===O,F=u&&U&&!B,z=u&&B;let te="flex items-center space-x-3 p-4 rounded-md border ";return u?z?te+="border-green-500 bg-green-50":F?te+="border-red-500 bg-red-50":te+="border-gray-200":U?te+="border-purple-500 bg-purple-50":te+="border-gray-200 hover:border-gray-300",y.jsxs("div",{className:te,children:[y.jsx(Yo,{value:O.toString(),id:`option-${O}`}),y.jsx(yt,{htmlFor:`option-${O}`,className:"flex-grow cursor-pointer",children:H}),u&&B&&y.jsx(al,{className:"h-5 w-5 text-green-600"}),u&&F&&y.jsx(Rx,{className:"h-5 w-5 text-red-600"})]},O)})})]}),u&&y.jsxs("div",{className:`p-4 rounded-md ${l===s.questions[o].correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} mb-6`,children:[y.jsx("p",{className:`font-medium mb-1 ${l===s.questions[o].correctAnswer?"text-green-600":"text-red-600"}`,children:l===s.questions[o].correctAnswer?"Correct!":"Incorrect"}),y.jsx("p",{className:"text-gray-700",children:s.questions[o].explanation||"No explanation available."})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx(me,{variant:"outline",disabled:o===0||!u,onClick:j,children:"Previous"}),u?y.jsx(me,{className:"gradient-bg",onClick:$,children:o<s.questions.length-1?"Next Question":"Finish Quiz"}):y.jsx(me,{className:"gradient-bg",onClick:L,disabled:l===null,children:"Check Answer"})]})]})]}):y.jsx("div",{children:e.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(H=>y.jsxs(xd,{className:"card-hover",children:[y.jsx(wd,{children:y.jsx(Cd,{children:H.title})}),y.jsx(Sd,{children:y.jsxs("p",{className:"text-sm text-gray-500",children:[H.questions.length," questions"]})}),y.jsx(hA,{children:y.jsx(me,{className:"gradient-bg w-full",onClick:()=>k(H),children:"Start Quiz"})})]},H.id))}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx("svg",{className:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No quizzes yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate a quiz with AI based on your study materials"}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[y.jsxs(me,{variant:"outline",onClick:()=>P(!0),children:[y.jsx(x1,{className:"mr-2 h-4 w-4"}),"Quiz Options"]}),y.jsxs(me,{className:"gradient-bg",onClick:V,disabled:C,children:[C?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-white mr-2"}):y.jsx(w1,{className:"mr-2 h-4 w-4"}),"Generate Quiz with AI"]})]})]})})]})}const ate=n=>{if(!n)return"";let e=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e=e.replace(/\*\*(.*?)\*\*|__(.*?)__/g,"<strong>$1$2</strong>"),e=e.replace(/\*(.*?)\*|_(.*?)_/g,"<em>$1$2</em>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/^\s*\n\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/^\* (.*)/gim,`<ul>
<li>$1</li>`),e=e.replace(/<\/ul>\n<ul>/gim,""),e=e.replace(/\n\* (.*)/gim,"<li>$1</li>"),e=e.replace(/\n\n/g,"</p><p>"),e=e.replace(/```(.*?)\n(.*?)```/gs,(t,i,s)=>{const r=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre><code class="language-${i}">${r}</code></pre>`}),e=`<p>${e}</p>`,e=e.replace(/<\/li><li>/g,`</li>
<li>`),e=e.replace(/<p><\/p>/g,""),e=e.replace(/<p><ul>/g,"<ul>"),e=e.replace(/<\/ul><\/p>/g,"</ul>"),e},lte=({content:n})=>{const e=ate(n);return y.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e}})};var br=(n=>(n.SUMMARY="summary",n.NOTES="notes",n.OUTLINE="outline",n.FLASHCARDS="flashcards",n.QUIZ="quiz",n.CHAT="chat",n.STUDY_PLAN="study_plan",n.CONCEPT_MAP="concept_map",n))(br||{});const cte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),y.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),ute=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),y.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),dte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),y.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),fte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),y.jsx("polyline",{points:"14 2 14 8 20 8"}),y.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),y.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),y.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),hte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),y.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),y.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),y.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),uO=n=>y.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),pte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),y.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),y.jsx("path",{d:"M12 11h4"}),y.jsx("path",{d:"M12 16h4"}),y.jsx("path",{d:"M8 11h.01"}),y.jsx("path",{d:"M8 16h.01"})]}),mte=n=>y.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"15"}),y.jsx("circle",{cx:"18",cy:"6",r:"3"}),y.jsx("circle",{cx:"6",cy:"18",r:"3"}),y.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]});br.SUMMARY,br.NOTES,br.OUTLINE,br.FLASHCARDS,br.QUIZ,br.CHAT,br.STUDY_PLAN,br.CONCEPT_MAP;const gte=({files:n,chatMessages:e,sessionId:t})=>{const[i,s]=E.useState([]),[r,o]=E.useState(""),[a,l]=E.useState(!1),c=E.useRef(null),[u,p]=E.useState(null),m=()=>{var v;(v=c.current)==null||v.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{p(WZ(n))},[n]),E.useEffect(()=>{s(e||[])},[e]),E.useEffect(()=>{m()},[i]);const g=async()=>{if(!r.trim()||!u)return;const v={id:Date.now().toString(),role:"user",content:r,timestamp:new Date().toISOString()};s(S=>[...S,v]),o(""),l(!0);try{const S=await u.sendMessage(r),x={id:(Date.now()+1).toString(),role:"assistant",content:S.text,timestamp:new Date().toISOString()};s(C=>[...C,x])}catch(S){const x=S,C={id:(Date.now()+1).toString(),role:"assistant",content:(x==null?void 0:x.message)||"Sorry, I encountered an error while processing your request. Please try again.",timestamp:new Date().toISOString()};s(_=>[..._,C])}finally{l(!1)}},w=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())};return y.jsx(Wh,{title:"Chat with your Documents",isLoading:!1,error:null,children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 mb-4 px-2",children:[i.length===0&&y.jsxs("div",{className:"text-center text-gray-500 py-8",children:[y.jsx(uO,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsx("p",{children:"Start a conversation about your documents!"})]}),i.map(v=>y.jsx("div",{className:`flex ${v.role==="user"?"justify-end":"justify-start"} w-full`,children:y.jsx("div",{className:`rounded-2xl px-6 py-4 max-w-[70%] ${v.role==="user"?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white self-end":"bg-gray-100 text-gray-900 self-start"} shadow-md`,children:y.jsx("div",{className:"text-base whitespace-pre-line",children:y.jsx(lte,{content:v.content})})})},v.id)),a&&y.jsx("div",{className:"flex justify-start w-full",children:y.jsx("div",{className:"rounded-2xl px-6 py-4 max-w-[70%] bg-gray-100 text-gray-900 shadow-md",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),y.jsx("div",{ref:c})]}),y.jsxs("div",{className:"flex space-x-2 mt-4 px-2 pb-2",children:[y.jsx(du,{value:r,onChange:v=>o(v.target.value),onKeyPress:w,placeholder:"Ask a question about your documents...",disabled:a,className:"flex-1 text-lg py-3"}),y.jsx(me,{onClick:g,disabled:a||!r.trim(),className:"px-6 py-3 text-lg",children:"Send"})]})]})})},Mn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),lE=[.001,0,0,.001,0,0],oC=1.35,xi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dO="pdfjs_internal_editor_",we={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},yte={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Bu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},aw={ERRORS:0,WARNINGS:1,INFOS:5},D0={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ly={moveTo:0,lineTo:1,curveTo:2,closePath:3},vte={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let lw=aw.WARNINGS;function xte(n){Number.isInteger(n)&&(lw=n)}function wte(){return lw}function cw(n){lw>=aw.INFOS&&console.log(`Info: ${n}`)}function Ce(n){lw>=aw.WARNINGS&&console.log(`Warning: ${n}`)}function Qe(n){throw new Error(n)}function kt(n,e){n||Qe(e)}function Cte(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fO(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Ate(n)}catch{}}const i=e?URL.parse(n,e):URL.parse(n);return Cte(i)?i:null}function hO(n,e,t=!1){const i=URL.parse(n);return i?(i.hash=e,i.href):t&&fO(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function De(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Ru=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class UP extends Ru{constructor(e,t){super(e,"PasswordException"),this.code=t}}class aC extends Ru{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class cE extends Ru{constructor(e){super(e,"InvalidPDFException")}}class L0 extends Ru{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class Ste extends Ru{constructor(e){super(e,"FormatError")}}class dl extends Ru{constructor(e){super(e,"AbortException")}}function pO(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Qe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Zg(n){typeof n!="string"&&Qe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function Ete(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function _te(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Tte(){try{return new Function(""),!0}catch{return!1}}class cn{static get isLittleEndian(){return De(this,"isLittleEndian",_te())}static get isEvalSupported(){return De(this,"isEvalSupported",Tte())}static get isOffscreenCanvasSupported(){return De(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return De(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return De(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return De(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const lC=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var So,fv,uE;class pe{static makeHexColor(e,t,i){return`#${lC[e]}${lC[t]}${lC[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,i=0){const s=e[i],r=e[i+1];e[i]=s*t[0]+r*t[2]+t[4],e[i+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const s=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const p=e[i+u],m=e[i+u+1];e[i+u]=p*s+m*o+l,e[i+u+1]=p*r+m*a+c}}static applyInverseTransform(e,t){const i=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-i*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,i){const s=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],p=e[1],m=e[2],g=e[3];let w=s*u+l,v=w,S=s*m+l,x=S,C=a*p+c,_=C,A=a*g+c,P=A;if(r!==0||o!==0){const M=r*u,N=r*m,I=o*p,k=o*g;w+=I,x+=I,S+=k,v+=k,C+=M,P+=M,A+=N,_+=N}i[0]=Math.min(i[0],w,S,v,x),i[1]=Math.min(i[1],C,A,_,P),i[2]=Math.max(i[2],w,S,v,x),i[3]=Math.max(i[3],C,A,_,P)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],s=e[1],r=e[2],o=e[3],a=i**2+s**2,l=i*r+s*o,c=r**2+o**2,u=(a+c)/2,p=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+p||1),t[1]=Math.sqrt(u-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,s,r){r[0]=Math.min(r[0],e,i),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,i),r[3]=Math.max(r[3],t,s)}static bezierBoundingBox(e,t,i,s,r,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),R(this,So,uE).call(this,e,i,r,a,t,s,o,l,3*(-e+3*(i-r)+a),6*(e-2*i+r),3*(i-e),c),R(this,So,uE).call(this,e,i,r,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c)}}So=new WeakSet,fv=function(e,t,i,s,r,o,a,l,c,u){if(c<=0||c>=1)return;const p=1-c,m=c*c,g=m*c,w=p*(p*(p*e+3*c*t)+3*m*i)+g*s,v=p*(p*(p*r+3*c*o)+3*m*a)+g*l;u[0]=Math.min(u[0],w),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],w),u[3]=Math.max(u[3],v)},uE=function(e,t,i,s,r,o,a,l,c,u,p,m){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&R(this,So,fv).call(this,e,t,i,s,r,o,a,l,-p/u,m);return}const g=u**2-4*p*c;if(g<0)return;const w=Math.sqrt(g),v=2*c;R(this,So,fv).call(this,e,t,i,s,r,o,a,l,(-u+w)/v,m),R(this,So,fv).call(this,e,t,i,s,r,o,a,l,(-u-w)/v,m)},b(pe,So);function Ate(n){return decodeURIComponent(escape(n))}let cC=null,$P=null;function bte(n){return cC||(cC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$P=new Map([["","t"]])),n.replaceAll(cC,(e,t,i)=>t?t.normalize("NFKC"):$P.get(i))}function mO(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),pO(n)}const NA="pdfjs_internal_id_";function Rte(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,s,...r]=t;if(!n(i)&&!Number.isInteger(i)||!e(s))return!1;const o=r.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Nn(n,e,t){return Math.min(Math.max(n,e),t)}function gO(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(pO(n))}function Pte(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Zg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Rr="http://www.w3.org/2000/svg",Nl=class Nl{};W(Nl,"CSS",96),W(Nl,"PDF",72),W(Nl,"PDF_TO_CSS_UNITS",Nl.CSS/Nl.PDF);let fl=Nl;async function ey(n,e="text"){if(Qh(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class ty{constructor({viewBox:e,userUnit:t,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,p,m,g;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,p=0,m=0,g=1;break;case 90:u=0,p=1,m=1,g=0;break;case 270:u=0,p=-1,m=-1,g=0;break;case 0:u=1,p=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,g=-g);let w,v,S,x;u===0?(w=Math.abs(c-e[1])*i+r,v=Math.abs(l-e[0])*i+o,S=(e[3]-e[1])*i,x=(e[2]-e[0])*i):(w=Math.abs(l-e[0])*i+r,v=Math.abs(c-e[1])*i+o,S=(e[2]-e[0])*i,x=(e[3]-e[1])*i),this.transform=[u*i,p*i,m*i,g*i,w-u*i*l-m*i*c,v-p*i*l-g*i*c],this.width=S,this.height=x}get rawDims(){const e=this.viewBox;return De(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new ty({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const i=[e,t];return pe.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];pe.applyTransform(t,this.transform);const i=[e[2],e[3]];return pe.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return pe.applyInverseTransform(i,this.transform),i}}class IA extends Ru{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function uw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function kA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Mte(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Nte(n,e="document.pdf"){if(typeof n!="string")return e;if(uw(n))return Ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return e;const s=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const a=Array.from(i.searchParams.values()).reverse();for(const c of a)if(r.test(c))return s(c);const l=Array.from(i.searchParams.keys()).reverse();for(const c of l)if(r.test(c))return s(c)}if(i.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return s(l[0])}return e}class VP{constructor(){W(this,"started",Object.create(null));W(this,"times",[])}time(e){e in this.started&&Ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Qh(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Is(n){n.preventDefault()}function Nt(n){n.preventDefault(),n.stopPropagation()}function Ite(n){console.log("Deprecated API usage: "+n)}var am;class DA{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,am)||T(this,am,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,am).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,c==="-"?(o+=u,a+=p):c==="+"&&(o-=u,a-=p),new Date(Date.UTC(i,s,r,o,a,l))}}am=new WeakMap,b(DA,am);function kte(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new ty({viewBox:r,userUnit:1,scale:e,rotation:t})}function LA(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ce(`Not a valid color format: "${n}"`),[0,0,0])}function Dte(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,LA(i))}e.remove()}function gt(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function Os(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function vu(n,e,t=!1,i=!0){if(e instanceof ty){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,a=cn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,c=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,p=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=p):(o.width=p,o.height=u)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Sr{constructor(){const{pixelRatio:e}=Sr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,s,r=-1){let o=1/0,a=1/0,l=1/0;i=Sr.capPixels(i,r),i>0&&(o=Math.sqrt(i/(e*t))),s!==-1&&(a=s/e,l=s/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const dE=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ca,Gl,Li,ua,lm,Ud,cm,j0,yO,Dn,vO,xO,Zh,hv;const Ir=class Ir{constructor(e){b(this,Dn);b(this,ca,null);b(this,Gl,null);b(this,Li);b(this,ua,null);b(this,lm,null);b(this,Ud,null);T(this,Li,e),d(Ir,cm)||T(Ir,cm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=T(this,ca,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,Li)._uiManager._signal;e.addEventListener("contextmenu",Is,{signal:t}),e.addEventListener("pointerdown",R(Ir,j0,yO),{signal:t});const i=T(this,ua,document.createElement("div"));i.className="buttons",e.append(i);const s=d(this,Li).toolbarPosition;if(s){const{style:r}=e,o=d(this,Li)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,ca)}hide(){var e;d(this,ca).classList.add("hidden"),(e=d(this,Gl))==null||e.hideDropdown()}show(){var e;d(this,ca).classList.remove("hidden"),(e=d(this,lm))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,Li),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",d(Ir,cm)[e]),R(this,Dn,Zh).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),d(this,ua).append(i)}async addAltText(e){const t=await e.render();R(this,Dn,Zh).call(this,t),d(this,ua).append(t,d(this,Dn,hv)),T(this,lm,e)}addColorPicker(e){T(this,Gl,e);const t=e.renderButton();R(this,Dn,Zh).call(this,t),d(this,ua).append(t,d(this,Dn,hv))}async addEditSignatureButton(e){const t=T(this,Ud,await e.renderEditButton(d(this,Li)));R(this,Dn,Zh).call(this,t),d(this,ua).append(t,d(this,Dn,hv))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){d(this,Ud)&&(d(this,Ud).title=e)}remove(){var e;d(this,ca).remove(),(e=d(this,Gl))==null||e.destroy(),T(this,Gl,null)}};ca=new WeakMap,Gl=new WeakMap,Li=new WeakMap,ua=new WeakMap,lm=new WeakMap,Ud=new WeakMap,cm=new WeakMap,j0=new WeakSet,yO=function(e){e.stopPropagation()},Dn=new WeakSet,vO=function(e){d(this,Li)._focusEventsAllowed=!1,Nt(e)},xO=function(e){d(this,Li)._focusEventsAllowed=!0,Nt(e)},Zh=function(e){const t=d(this,Li)._uiManager._signal;e.addEventListener("focusin",R(this,Dn,vO).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,Dn,xO).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Is,{signal:t})},hv=function(){const e=document.createElement("div");return e.className="divider",e},b(Ir,j0),b(Ir,cm,null);let fE=Ir;var um,ql,Wl,hl,wO,CO,SO;class Lte{constructor(e){b(this,hl);b(this,um,null);b(this,ql,null);b(this,Wl);T(this,Wl,e)}show(e,t,i){const[s,r]=R(this,hl,CO).call(this,t,i),{style:o}=d(this,ql)||T(this,ql,R(this,hl,wO).call(this));e.append(d(this,ql)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,ql).remove()}}um=new WeakMap,ql=new WeakMap,Wl=new WeakMap,hl=new WeakSet,wO=function(){const e=T(this,ql,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Is,{signal:d(this,Wl)._signal});const t=T(this,um,document.createElement("div"));return t.className="buttons",e.append(t),R(this,hl,SO).call(this),e},CO=function(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const a=r.x+(t?r.width:0);if(o>i){s=a,i=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,i]},SO=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=d(this,Wl)._signal;e.addEventListener("contextmenu",Is,{signal:i}),e.addEventListener("click",()=>{d(this,Wl).highlightSelection("floating_button")},{signal:i}),d(this,um).append(e)};function EO(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}var G0;class Fte{constructor(){b(this,G0,0)}get id(){return`${dO}${zt(this,G0)._++}`}}G0=new WeakMap;var $d,dm,yn,Vd,pv;const jA=class jA{constructor(){b(this,Vd);b(this,$d,mO());b(this,dm,0);b(this,yn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return De(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return R(this,Vd,pv).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return R(this,Vd,pv).call(this,e,e)}async getFromBlob(e,t){const i=await t;return R(this,Vd,pv).call(this,e,i)}async getFromId(e){d(this,yn)||T(this,yn,new Map);const t=d(this,yn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,yn)||T(this,yn,new Map);let i=d(this,yn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${d(this,$d)}_${zt(this,dm)._++}`,refCounter:1,isSvg:!1},d(this,yn).set(e,i),d(this,yn).set(i.id,i),i}getSvgUrl(e){const t=d(this,yn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;d(this,yn)||T(this,yn,new Map);const t=d(this,yn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,$d)}_`)}};$d=new WeakMap,dm=new WeakMap,yn=new WeakMap,Vd=new WeakSet,pv=async function(e,t){d(this,yn)||T(this,yn,new Map);let i=d(this,yn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${d(this,$d)}_${zt(this,dm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await ey(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=jA._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},o.onload=async()=>{const p=i.svgUrl=o.result;a.src=await r?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){Ce(s),i=null}return d(this,yn).set(e,i),i&&d(this,yn).set(i.id,i),i};let hE=jA;var _t,da,fm,mt;class Ote{constructor(e=128){b(this,_t,[]);b(this,da,!1);b(this,fm);b(this,mt,-1);T(this,fm,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),d(this,da))return;const l={cmd:e,undo:t,post:i,type:r};if(d(this,mt)===-1){d(this,_t).length>0&&(d(this,_t).length=0),T(this,mt,0),d(this,_t).push(l);return}if(o&&d(this,_t)[d(this,mt)].type===r){a&&(l.undo=d(this,_t)[d(this,mt)].undo),d(this,_t)[d(this,mt)]=l;return}const c=d(this,mt)+1;c===d(this,fm)?d(this,_t).splice(0,1):(T(this,mt,c),c<d(this,_t).length&&d(this,_t).splice(c)),d(this,_t).push(l)}undo(){if(d(this,mt)===-1)return;T(this,da,!0);const{undo:e,post:t}=d(this,_t)[d(this,mt)];e(),t==null||t(),T(this,da,!1),T(this,mt,d(this,mt)-1)}redo(){if(d(this,mt)<d(this,_t).length-1){T(this,mt,d(this,mt)+1),T(this,da,!0);const{cmd:e,post:t}=d(this,_t)[d(this,mt)];e(),t==null||t(),T(this,da,!1)}}hasSomethingToUndo(){return d(this,mt)!==-1}hasSomethingToRedo(){return d(this,mt)<d(this,_t).length-1}cleanType(e){if(d(this,mt)!==-1){for(let t=d(this,mt);t>=0;t--)if(d(this,_t)[t].type!==e){d(this,_t).splice(t+1,d(this,mt)-t),T(this,mt,t);return}d(this,_t).length=0,T(this,mt,-1)}}destroy(){T(this,_t,null)}}_t=new WeakMap,da=new WeakMap,fm=new WeakMap,mt=new WeakMap;var q0,_O;class ny{constructor(e){b(this,q0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=cn.platform;for(const[i,s,r={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(R(this,q0,_O).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(s.bind(e,...o,t)(),r||Nt(t))}}q0=new WeakSet,_O=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const W0=class W0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Dte(e),De(this,"_colors",e)}convert(e){const t=LA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return W0._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?pe.makeHexColor(...t):e}};W(W0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let pE=W0;var Bd,ri,Ot,Zt,Hd,Or,zd,Fi,fa,ha,jd,Kl,js,us,Yl,hm,pm,Gd,mm,Gs,pa,qd,ma,qs,K0,ga,gm,ya,Jl,Xl,va,ym,jt,qe,Ur,xa,Ql,vm,xm,wa,Ws,$r,wm,Cm,Oi,Q,mv,mE,TO,AO,gv,bO,RO,PO,gE,MO,yE,vE,NO,En,Pr,IO,kO,xE,DO,ep,wE;const ld=class ld{constructor(e,t,i,s,r,o,a,l,c,u,p,m,g,w,v){b(this,Q);b(this,Bd,new AbortController);b(this,ri,null);b(this,Ot,new Map);b(this,Zt,new Map);b(this,Hd,null);b(this,Or,null);b(this,zd,null);b(this,Fi,new Ote);b(this,fa,null);b(this,ha,null);b(this,jd,0);b(this,Kl,new Set);b(this,js,null);b(this,us,null);b(this,Yl,new Set);W(this,"_editorUndoBar",null);b(this,hm,!1);b(this,pm,!1);b(this,Gd,!1);b(this,mm,null);b(this,Gs,null);b(this,pa,null);b(this,qd,null);b(this,ma,!1);b(this,qs,null);b(this,K0,new Fte);b(this,ga,!1);b(this,gm,!1);b(this,ya,null);b(this,Jl,null);b(this,Xl,null);b(this,va,null);b(this,ym,null);b(this,jt,we.NONE);b(this,qe,new Set);b(this,Ur,null);b(this,xa,null);b(this,Ql,null);b(this,vm,null);b(this,xm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,wa,[0,0]);b(this,Ws,null);b(this,$r,null);b(this,wm,null);b(this,Cm,null);b(this,Oi,null);const S=this._signal=d(this,Bd).signal;T(this,$r,e),T(this,wm,t),T(this,Cm,i),T(this,Hd,s),T(this,xa,r),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:S}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),o._on("setpreference",this.onSetPreference.bind(this),{signal:S}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:S}),R(this,Q,bO).call(this),R(this,Q,NO).call(this),R(this,Q,gE).call(this),T(this,Or,a.annotationStorage),T(this,mm,a.filterFactory),T(this,Ql,l),T(this,qd,c||null),T(this,hm,u),T(this,pm,p),T(this,Gd,m),T(this,ym,g||null),this.viewParameters={realScale:fl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const e=ld.prototype,t=o=>d(o,$r).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return De(this,"_keyboardManager",new ny([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,$r).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,$r).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s,r,o,a,l;(e=d(this,Oi))==null||e.resolve(),T(this,Oi,null),(t=d(this,Bd))==null||t.abort(),T(this,Bd,null),this._signal=null;for(const c of d(this,Zt).values())c.destroy();d(this,Zt).clear(),d(this,Ot).clear(),d(this,Yl).clear(),(i=d(this,va))==null||i.clear(),T(this,ri,null),d(this,qe).clear(),d(this,Fi).destroy(),(s=d(this,Hd))==null||s.destroy(),(r=d(this,xa))==null||r.destroy(),(o=d(this,qs))==null||o.hide(),T(this,qs,null),(a=d(this,Xl))==null||a.destroy(),T(this,Xl,null),d(this,Gs)&&(clearTimeout(d(this,Gs)),T(this,Gs,null)),d(this,Ws)&&(clearTimeout(d(this,Ws)),T(this,Ws,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,ym)}get useNewAltTextFlow(){return d(this,pm)}get useNewAltTextWhenAddingImage(){return d(this,Gd)}get hcmFilter(){return De(this,"hcmFilter",d(this,Ql)?d(this,mm).addHCMFilter(d(this,Ql).foreground,d(this,Ql).background):"none")}get direction(){return De(this,"direction",getComputedStyle(d(this,$r)).direction)}get highlightColors(){return De(this,"highlightColors",d(this,qd)?new Map(d(this,qd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return De(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,ha,e)}setMainHighlightColorPicker(e){T(this,Xl,e)}editAltText(e,t=!1){var i;(i=d(this,Hd))==null||i.editAltText(this,e,t)}getSignature(e){var t;(t=d(this,xa))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,xa)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":T(this,Gd,t);break}}onPageChanging({pageNumber:e}){T(this,jd,e-1)}focusMainContainer(){d(this,$r).focus()}findParent(e,t){for(const i of d(this,Zt).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return i}return null}disableUserSelect(e=!1){d(this,wm).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,Yl).add(e)}removeShouldRescale(e){d(this,Yl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*fl.PDF_TO_CSS_UNITS;for(const i of d(this,Yl))i.onScaleChanging();(t=d(this,ha))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),c=R(this,Q,mv).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const p=R(this,Q,mE).call(this,c),m=d(this,jt)===we.NONE,g=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(we.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,Or)&&!d(this,Or).has(e.id)&&d(this,Or).setValue(e.id,e)}a11yAlert(e,t=null){const i=d(this,Cm);i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,ma)&&(T(this,ma,!1),R(this,Q,gv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,qe))if(t.div.contains(e)){T(this,Jl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,Jl))return;const[e,t]=d(this,Jl);T(this,Jl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,Q,gE).call(this),R(this,Q,yE).call(this)}removeEditListeners(){R(this,Q,MO).call(this),R(this,Q,vE).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of d(this,us))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of d(this,us))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=d(this,ri))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of d(this,qe)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of d(this,us))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){Ce(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const c=await s.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)R(this,Q,xE).call(this,l);R(this,Q,wE).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Ce(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,jt)!==we.NONE&&!this.isEditorHandlingKeyboard&&ld._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,ma)&&(T(this,ma,!1),R(this,Q,gv).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,Q,RO).call(this),R(this,Q,yE).call(this),R(this,Q,En).call(this,{isEditing:d(this,jt)!==we.NONE,isEmpty:R(this,Q,ep).call(this),hasSomethingToUndo:d(this,Fi).hasSomethingToUndo(),hasSomethingToRedo:d(this,Fi).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,Q,PO).call(this),R(this,Q,vE).call(this),R(this,Q,En).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,us)){T(this,us,e);for(const t of d(this,us))R(this,Q,Pr).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,K0).id}get currentLayer(){return d(this,Zt).get(d(this,jd))}getLayer(e){return d(this,Zt).get(e)}get currentPageIndex(){return d(this,jd)}addLayer(e){d(this,Zt).set(e.pageIndex,e),d(this,ga)?e.enable():e.disable()}removeLayer(e){d(this,Zt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1,s=!1){var r,o,a;if(d(this,jt)!==e&&!(d(this,Oi)&&(await d(this,Oi).promise,!d(this,Oi)))){if(T(this,Oi,Promise.withResolvers()),(r=d(this,ha))==null||r.commitOrRemove(),T(this,jt,e),e===we.NONE){this.setEditingState(!1),R(this,Q,kO).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,Oi).resolve();return}e===we.SIGNATURE&&await((a=d(this,xa))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await R(this,Q,IO).call(this),this.unselectAll();for(const l of d(this,Zt).values())l.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),d(this,Oi).resolve();return}for(const l of d(this,Ot).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),s&&l.enterInEditMode()):l.unselect();d(this,Oi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,jt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var i;if(d(this,us)){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor(t);return;case Oe.HIGHLIGHT_DEFAULT_COLOR:(i=d(this,Xl))==null||i.updateColor(t);break;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,vm)||T(this,vm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of d(this,qe))s.updateParams(e,t);for(const s of d(this,us))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const o of d(this,Ot).values())o.editorType===e&&o.show(t);(((r=d(this,vm))==null?void 0:r.get(Oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,Q,Pr).call(this,[[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,gm)!==e){T(this,gm,e);for(const t of d(this,Zt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of d(this,Ot).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return d(this,Ot).get(e)}addEditor(e){d(this,Ot).set(e.id,e)}removeEditor(e){var t,i;e.div.contains(document.activeElement)&&(d(this,Gs)&&clearTimeout(d(this,Gs)),T(this,Gs,setTimeout(()=>{this.focusMainContainer(),T(this,Gs,null)},0))),d(this,Ot).delete(e.id),e.annotationElementId&&((t=d(this,va))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,Kl).has(e.annotationElementId))&&((i=d(this,Or))==null||i.remove(e.id))}addDeletedAnnotationElement(e){d(this,Kl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,Kl).has(e)}removeDeletedAnnotationElement(e){d(this,Kl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,ri)!==e&&(T(this,ri,e),e&&R(this,Q,Pr).call(this,e.propertiesToUpdate))}updateUI(e){d(this,Q,DO)===e&&R(this,Q,Pr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){R(this,Q,Pr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,qe).has(e)){d(this,qe).delete(e),e.unselect(),R(this,Q,En).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,qe).add(e),e.select(),R(this,Q,Pr).call(this,e.propertiesToUpdate),R(this,Q,En).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,ha))==null||t.commitOrRemove();for(const i of d(this,qe))i!==e&&i.unselect();d(this,qe).clear(),d(this,qe).add(e),e.select(),R(this,Q,Pr).call(this,e.propertiesToUpdate),R(this,Q,En).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,qe).has(e)}get firstSelectedEditor(){return d(this,qe).values().next().value}unselect(e){e.unselect(),d(this,qe).delete(e),R(this,Q,En).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,qe).size!==0}get isEnterHandled(){return d(this,qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Fi).undo(),R(this,Q,En).call(this,{hasSomethingToUndo:d(this,Fi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,Q,ep).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Fi).redo(),R(this,Q,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Fi).hasSomethingToRedo(),isEmpty:R(this,Q,ep).call(this)})}addCommands(e){d(this,Fi).add(e),R(this,Q,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,Q,ep).call(this)})}cleanUndoStack(e){d(this,Fi).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,qe)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},s=()=>{for(const o of t)R(this,Q,xE).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=d(this,ri))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,ri)||this.hasSelection}selectAll(){for(const e of d(this,qe))e.commit();R(this,Q,wE).call(this,d(this,Ot).values())}unselectAll(){var e;if(!(d(this,ri)&&(d(this,ri).commitOrRemove(),d(this,jt)!==we.NONE))&&!((e=d(this,ha))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,qe))t.unselect();d(this,qe).clear(),R(this,Q,En).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;d(this,wa)[0]+=e,d(this,wa)[1]+=t;const[s,r]=d(this,wa),o=[...d(this,qe)],a=1e3;d(this,Ws)&&clearTimeout(d(this,Ws)),T(this,Ws,setTimeout(()=>{T(this,Ws,null),d(this,wa)[0]=d(this,wa)[1]=0,this.addCommands({cmd:()=>{for(const l of o)d(this,Ot).has(l.id)&&(l.translateInPage(s,r),l.translationDone())},undo:()=>{for(const l of o)d(this,Ot).has(l.id)&&(l.translateInPage(-s,-r),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,js,new Map);for(const e of d(this,qe))d(this,js).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,js))return!1;this.disableUserSelect(!1);const e=d(this,js);T(this,js,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||(t=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(s,r,o,a)=>{if(d(this,Ot).has(s.id)){const l=d(this,Zt).get(a);l?s._setParentAndPosition(l,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,js))for(const i of d(this,js).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,ri)===e}getActive(){return d(this,ri)}getMode(){return d(this,jt)}get imageManager(){return De(this,"imageManager",new hE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,p,m)=>({x:(u-s)/o,y:1-(c+p-i)/r,width:m/o,height:p/r});break;case"180":a=(c,u,p,m)=>({x:1-(c+p-i)/r,y:1-(u+m-s)/o,width:p/r,height:m/o});break;case"270":a=(c,u,p,m)=>({x:1-(u+m-s)/o,y:(c-i)/r,width:m/o,height:p/r});break;default:a=(c,u,p,m)=>({x:(c-i)/r,y:(u-s)/o,width:p/r,height:m/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const p=t.getRangeAt(c);if(!p.collapsed)for(const{x:m,y:g,width:w,height:v}of p.getClientRects())w===0||v===0||l.push(a(m,g,w,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,zd)||T(this,zd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,zd))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=d(this,zd))==null?void 0:s.get(e.data.id);if(!t)return;const i=d(this,Or).getRawValue(t);i&&(d(this,jt)===we.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){var r;const s=(r=d(this,va))==null?void 0:r.get(e);s&&(s.setCanvas(t,i),d(this,va).delete(e))}addMissingCanvas(e,t){(d(this,va)||T(this,va,new Map)).set(e,t)}};Bd=new WeakMap,ri=new WeakMap,Ot=new WeakMap,Zt=new WeakMap,Hd=new WeakMap,Or=new WeakMap,zd=new WeakMap,Fi=new WeakMap,fa=new WeakMap,ha=new WeakMap,jd=new WeakMap,Kl=new WeakMap,js=new WeakMap,us=new WeakMap,Yl=new WeakMap,hm=new WeakMap,pm=new WeakMap,Gd=new WeakMap,mm=new WeakMap,Gs=new WeakMap,pa=new WeakMap,qd=new WeakMap,ma=new WeakMap,qs=new WeakMap,K0=new WeakMap,ga=new WeakMap,gm=new WeakMap,ya=new WeakMap,Jl=new WeakMap,Xl=new WeakMap,va=new WeakMap,ym=new WeakMap,jt=new WeakMap,qe=new WeakMap,Ur=new WeakMap,xa=new WeakMap,Ql=new WeakMap,vm=new WeakMap,xm=new WeakMap,wa=new WeakMap,Ws=new WeakMap,$r=new WeakMap,wm=new WeakMap,Cm=new WeakMap,Oi=new WeakMap,Q=new WeakSet,mv=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},mE=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of d(this,Zt).values())if(i.hasTextLayer(e))return i;return null},TO=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=R(this,Q,mv).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(d(this,qs)||T(this,qs,new Lte(this)),d(this,qs).show(i,s,this.direction==="ltr"))},AO=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Ur)&&((r=d(this,qs))==null||r.hide(),T(this,Ur,null),R(this,Q,En).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Ur))return;const s=R(this,Q,mv).call(this,e).closest(".textLayer");if(!s){d(this,Ur)&&((o=d(this,qs))==null||o.hide(),T(this,Ur,null),R(this,Q,En).call(this,{hasSelectedText:!1}));return}if((a=d(this,qs))==null||a.hide(),T(this,Ur,t),R(this,Q,En).call(this,{hasSelectedText:!0}),!(d(this,jt)!==we.HIGHLIGHT&&d(this,jt)!==we.NONE)&&(d(this,jt)===we.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,ma,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,jt)===we.HIGHLIGHT?R(this,Q,mE).call(this,s):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),p=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),m.type==="pointerup"&&R(this,Q,gv).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})}},gv=function(e=""){d(this,jt)===we.HIGHLIGHT?this.highlightSelection(e):d(this,hm)&&R(this,Q,TO).call(this)},bO=function(){document.addEventListener("selectionchange",R(this,Q,AO).bind(this),{signal:this._signal})},RO=function(){if(d(this,pa))return;T(this,pa,new AbortController);const e=this.combinedSignal(d(this,pa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},PO=function(){var e;(e=d(this,pa))==null||e.abort(),T(this,pa,null)},gE=function(){if(d(this,ya))return;T(this,ya,new AbortController);const e=this.combinedSignal(d(this,ya));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},MO=function(){var e;(e=d(this,ya))==null||e.abort(),T(this,ya,null)},yE=function(){if(d(this,fa))return;T(this,fa,new AbortController);const e=this.combinedSignal(d(this,fa));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},vE=function(){var e;(e=d(this,fa))==null||e.abort(),T(this,fa,null)},NO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},En=function(e){Object.entries(e).some(([i,s])=>d(this,xm)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,xm),e)}),d(this,jt)===we.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,Q,Pr).call(this,[[Oe.HIGHLIGHT_FREE,!0]]))},Pr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},IO=async function(){if(!d(this,ga)){T(this,ga,!0);const e=[];for(const t of d(this,Zt).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,Ot).values())t.enable()}},kO=function(){if(this.unselectAll(),d(this,ga)){T(this,ga,!1);for(const e of d(this,Zt).values())e.disable();for(const e of d(this,Ot).values())e.disable()}},xE=function(e){const t=d(this,Zt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},DO=function(){let e=null;for(e of d(this,qe));return e},ep=function(){if(d(this,Ot).size===0)return!0;if(d(this,Ot).size===1)for(const e of d(this,Ot).values())return e.isEmpty();return!1},wE=function(e){for(const t of d(this,qe))t.unselect();d(this,qe).clear();for(const t of e)t.isEmpty()||(d(this,qe).add(t),t.select());R(this,Q,En).call(this,{hasSelectedEditor:this.hasSelection})},W(ld,"TRANSLATE_SMALL",1),W(ld,"TRANSLATE_BIG",10);let xu=ld;var Gt,Ks,ds,Wd,Ys,oi,Kd,Js,Wn,Vr,Zl,Xs,Ca,Ts,tp,yv;const _n=class _n{constructor(e){b(this,Ts);b(this,Gt,null);b(this,Ks,!1);b(this,ds,null);b(this,Wd,null);b(this,Ys,null);b(this,oi,null);b(this,Kd,!1);b(this,Js,null);b(this,Wn,null);b(this,Vr,null);b(this,Zl,null);b(this,Xs,!1);T(this,Wn,e),T(this,Xs,e._uiManager.useNewAltTextFlow),d(_n,Ca)||T(_n,Ca,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){_n._l10n??(_n._l10n=e)}async render(){const e=T(this,ds,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=T(this,Wd,document.createElement("span"));e.append(t),d(this,Xs)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(_n,Ca).missing),t.setAttribute("data-l10n-id",d(_n,Ca)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=d(this,Wn)._uiManager._signal;e.addEventListener("contextmenu",Is,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),d(this,Wn)._uiManager.editAltText(d(this,Wn)),d(this,Xs)&&d(this,Wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Ts,tp)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(T(this,Kd,!0),s(r))},{signal:i}),await R(this,Ts,yv).call(this),e}finish(){d(this,ds)&&(d(this,ds).focus({focusVisible:d(this,Kd)}),T(this,Kd,!1))}isEmpty(){return d(this,Xs)?d(this,Gt)===null:!d(this,Gt)&&!d(this,Ks)}hasData(){return d(this,Xs)?d(this,Gt)!==null||!!d(this,Vr):this.isEmpty()}get guessedText(){return d(this,Vr)}async setGuessedText(e){d(this,Gt)===null&&(T(this,Vr,e),T(this,Zl,await _n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,Ts,yv).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,Xs)||d(this,Gt)){(t=d(this,Js))==null||t.remove(),T(this,Js,null);return}if(!d(this,Js)){const i=T(this,Js,document.createElement("div"));i.className="noAltTextBadge",d(this,Wn).div.append(i)}d(this,Js).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Gt);return!e&&d(this,Vr)===t&&(t=d(this,Zl)),{altText:t,decorative:d(this,Ks),guessedText:d(this,Vr),textWithDisclaimer:d(this,Zl)}}get data(){return{altText:d(this,Gt),decorative:d(this,Ks)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(T(this,Vr,i),T(this,Zl,s)),!(d(this,Gt)===e&&d(this,Ks)===t)&&(r||(T(this,Gt,e),T(this,Ks,t)),R(this,Ts,yv).call(this))}toggle(e=!1){d(this,ds)&&(!e&&d(this,oi)&&(clearTimeout(d(this,oi)),T(this,oi,null)),d(this,ds).disabled=!e)}shown(){d(this,Wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Ts,tp)}})}destroy(){var e,t;(e=d(this,ds))==null||e.remove(),T(this,ds,null),T(this,Wd,null),T(this,Ys,null),(t=d(this,Js))==null||t.remove(),T(this,Js,null)}};Gt=new WeakMap,Ks=new WeakMap,ds=new WeakMap,Wd=new WeakMap,Ys=new WeakMap,oi=new WeakMap,Kd=new WeakMap,Js=new WeakMap,Wn=new WeakMap,Vr=new WeakMap,Zl=new WeakMap,Xs=new WeakMap,Ca=new WeakMap,Ts=new WeakSet,tp=function(){return d(this,Gt)&&"added"||d(this,Gt)===null&&this.guessedText&&"review"||"missing"},yv=async function(){var s,r,o;const e=d(this,ds);if(!e)return;if(d(this,Xs)){if(e.classList.toggle("done",!!d(this,Gt)),e.setAttribute("data-l10n-id",d(_n,Ca)[d(this,Ts,tp)]),(s=d(this,Wd))==null||s.setAttribute("data-l10n-id",d(_n,Ca)[`${d(this,Ts,tp)}-label`]),!d(this,Gt)){(r=d(this,Ys))==null||r.remove();return}}else{if(!d(this,Gt)&&!d(this,Ks)){e.classList.remove("done"),(o=d(this,Ys))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,Ys);if(!t){T(this,Ys,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,Wn).id}`;const a=100,l=d(this,Wn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,oi)),T(this,oi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{T(this,oi,setTimeout(()=>{T(this,oi,null),d(this,Ys).classList.add("show"),d(this,Wn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,oi)&&(clearTimeout(d(this,oi)),T(this,oi,null)),(c=d(this,Ys))==null||c.classList.remove("show")},{signal:l})}d(this,Ks)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Gt)),t.parentNode||e.append(t);const i=d(this,Wn).getElementForAltText();i==null||i.setAttribute("aria-describedby",t.id)},b(_n,Ca,null),W(_n,"_l10n",null);let F0=_n;var Yd,ec,Sm,Em,_m,Tm,Am,Br,tc,Hr,nc,zr,pl,LO,FO,OO;const GA=class GA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){b(this,pl);b(this,Yd);b(this,ec,!1);b(this,Sm,null);b(this,Em);b(this,_m);b(this,Tm);b(this,Am);b(this,Br,null);b(this,tc);b(this,Hr,null);b(this,nc);b(this,zr,null);T(this,Yd,e),T(this,Sm,i),T(this,Em,t),T(this,_m,s),T(this,Tm,r),T(this,Am,o),T(this,nc,new AbortController),T(this,tc,AbortSignal.any([a,d(this,nc).signal])),e.addEventListener("touchstart",R(this,pl,LO).bind(this),{passive:!1,signal:d(this,tc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Sr.pixelRatio}destroy(){var e,t;(e=d(this,nc))==null||e.abort(),T(this,nc,null),(t=d(this,Br))==null||t.abort(),T(this,Br,null)}};Yd=new WeakMap,ec=new WeakMap,Sm=new WeakMap,Em=new WeakMap,_m=new WeakMap,Tm=new WeakMap,Am=new WeakMap,Br=new WeakMap,tc=new WeakMap,Hr=new WeakMap,nc=new WeakMap,zr=new WeakMap,pl=new WeakSet,LO=function(e){var s,r,o;if((s=d(this,Em))!=null&&s.call(this))return;if(e.touches.length===1){if(d(this,Br))return;const a=T(this,Br,new AbortController),l=AbortSignal.any([d(this,tc),a.signal]),c=d(this,Yd),u={capture:!0,signal:l,passive:!1},p=m=>{var g;m.pointerType==="touch"&&((g=d(this,Br))==null||g.abort(),T(this,Br,null))};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Nt(m),p(m))},u),c.addEventListener("pointerup",p,u),c.addEventListener("pointercancel",p,u);return}if(!d(this,zr)){T(this,zr,new AbortController);const a=AbortSignal.any([d(this,tc),d(this,zr).signal]),l=d(this,Yd),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",R(this,pl,FO).bind(this),c);const u=R(this,pl,OO).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Nt,c),l.addEventListener("pointermove",Nt,c),l.addEventListener("pointercancel",Nt,c),l.addEventListener("pointerup",Nt,c),(r=d(this,_m))==null||r.call(this)}if(Nt(e),e.touches.length!==2||(o=d(this,Sm))!=null&&o.call(this)){T(this,Hr,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),T(this,Hr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},FO=function(e){var A;if(!d(this,Hr)||e.touches.length!==2)return;Nt(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:s,screenY:r}=t,{screenX:o,screenY:a}=i,l=d(this,Hr),{touch0X:c,touch0Y:u,touch1X:p,touch1Y:m}=l,g=p-c,w=m-u,v=o-s,S=a-r,x=Math.hypot(v,S)||1,C=Math.hypot(g,w)||1;if(!d(this,ec)&&Math.abs(C-x)<=GA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!d(this,ec)){T(this,ec,!0);return}const _=[(s+o)/2,(r+a)/2];(A=d(this,Tm))==null||A.call(this,_,C,x)},OO=function(e){var t;e.touches.length>=2||(d(this,zr)&&(d(this,zr).abort(),T(this,zr,null),(t=d(this,Am))==null||t.call(this)),d(this,Hr)&&(Nt(e),T(this,Hr,null),T(this,ec,!1)))};let O0=GA;var ic,fs,ct,Jd,Sa,bm,sc,en,rc,jr,Ea,Rm,oc,ai,Pm,ac,Gr,Qs,Xd,Qd,Ui,lc,Mm,Y0,ge,CE,Nm,SE,vv,UO,$O,EE,xv,_E,VO,BO,HO,TE,zO,AE,jO,GO,qO,bE,np;const Ae=class Ae{constructor(e){b(this,ge);b(this,ic,null);b(this,fs,null);b(this,ct,null);b(this,Jd,!1);b(this,Sa,null);b(this,bm,"");b(this,sc,!1);b(this,en,null);b(this,rc,null);b(this,jr,null);b(this,Ea,null);b(this,Rm,"");b(this,oc,!1);b(this,ai,null);b(this,Pm,!1);b(this,ac,!1);b(this,Gr,!1);b(this,Qs,null);b(this,Xd,0);b(this,Qd,0);b(this,Ui,null);b(this,lc,null);W(this,"isSelected",!1);W(this,"_isCopy",!1);W(this,"_editToolbar",null);W(this,"_initialOptions",Object.create(null));W(this,"_initialData",null);W(this,"_isVisible",!0);W(this,"_uiManager",null);W(this,"_focusEventsAllowed",!0);b(this,Mm,!1);b(this,Y0,Ae._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ae.prototype._resizeWithKeyboard,t=xu.TRANSLATE_SMALL,i=xu.TRANSLATE_BIG;return De(this,"_resizerKeyboardManager",new ny([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ae.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return De(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ute({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ae._l10n??(Ae._l10n=e),Ae._l10nResizer||(Ae._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ae._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ae._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,Mm)}set _isDraggable(e){var t;T(this,Mm,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Y0)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,ge,np).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,oc)?T(this,oc,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,s]=this.parentDimensions;this.setAt(e*i,t*s,this.width*i,this.height*s),this._onTranslated()}translate(e,t){R(this,ge,CE).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,ai)||T(this,ai,[this.x,this.y,this.width,this.height]),R(this,ge,CE).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,ai)||T(this,ai,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=i;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,ai)&&(d(this,ai)[0]!==this.x||d(this,ai)[1]!==this.y)}get _hasBeenResized(){return!!d(this,ai)&&(d(this,ai)[2]!==this.width||d(this,ai)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ae,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,s]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=i,l*=s,r*=i,o*=s,this._mustFixPosition)switch(e){case 0:r=Nn(r,0,i-a),o=Nn(o,0,s-l);break;case 90:r=Nn(r,0,i-l),o=Nn(o,a,s);break;case 180:r=Nn(r,a,i),o=Nn(o,l,s);break;case 270:r=Nn(r,l,i),o=Nn(o,0,s-a);break}this.x=r/=i,this.y=o/=s;const[c,u]=this.getBaseTranslation();r+=c,o+=u,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return R(i=Ae,Nm,SE).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return R(i=Ae,Nm,SE).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/i).toFixed(2)}%`,d(this,sc)||(r.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!d(this,sc)&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!d(this,sc)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,ct))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,ac))return this._editToolbar;this._editToolbar=new fE(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,ct))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,ct)||(F0.initialize(Ae._l10n),T(this,ct,new F0(this)),d(this,ic)&&(d(this,ct).data=d(this,ic),T(this,ic,null))),d(this,ct)}get altTextData(){var e;return(e=d(this,ct))==null?void 0:e.data}set altTextData(e){d(this,ct)&&(d(this,ct).data=e)}get guessedAltText(){var e;return(e=d(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,ct)&&!d(this,ct).isEmpty()}hasAltTextData(){var e;return((e=d(this,ct))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,Jd)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),R(this,ge,AE).call(this);const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),EO(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,lc)||T(this,lc,new O0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,ge,VO).bind(this),onPinching:R(this,ge,BO).bind(this),onPinchEnd:R(this,ge,HO).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=cn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,oc,!0),this._isDraggable){R(this,ge,zO).call(this,e);return}R(this,ge,TE).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Qs)&&clearTimeout(d(this,Qs)),T(this,Qs,setTimeout(()=>{var e;T(this,Qs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,u=t/s,p=this.x*r,m=this.y*o,g=this.width*r,w=this.height*o;switch(i){case 0:return[p+c+a,o-m-u-w+l,p+c+g+a,o-m-u+l];case 90:return[p+u+a,o-m+c+l,p+u+w+a,o-m+c+g+l];case 180:return[p-c-g+a,o-m+u+l,p-c+a,o-m+u+w+l];case 270:return[p-u-w+a,o-m-c-g+l,p-u+a,o-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,t-o,a,l];case 90:return[i,t-s,l,a];case 180:return[r,t-s,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),T(this,ac,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),T(this,ac,!1),!0):!1}isInEditMode(){return d(this,ac)}shouldGetKeyboardEvents(){return d(this,Gr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&s>0&&e<r&&i>0}rebuild(){R(this,ge,AE).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Qe("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId});s.rotation=e.rotation,T(s,ic,e.accessibilityData),s._isCopy=e.isCopy||!1;const[r,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=l/o,s.width=c/r,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Ea))==null||e.abort(),T(this,Ea,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,Qs)&&(clearTimeout(d(this,Qs)),T(this,Qs,null)),R(this,ge,np).call(this),this.removeEditToolbar(),d(this,Ui)){for(const i of d(this,Ui).values())clearTimeout(i);T(this,Ui,null)}this.parent=null,(t=d(this,lc))==null||t.destroy(),T(this,lc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,ge,UO).call(this),d(this,en).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,jr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,en).children;if(!d(this,fs)){T(this,fs,Array.from(t));const o=R(this,ge,jO).bind(this),a=R(this,ge,GO).bind(this),l=this._uiManager._signal;for(const c of d(this,fs)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",R(this,ge,qO).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Ae._l10nResizer[u])}}const i=d(this,fs)[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(d(this,fs).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)d(this,en).append(d(this,en).firstChild);else if(r>s)for(let a=0;a<r-s;a++)d(this,en).firstChild.before(d(this,en).lastChild);let o=0;for(const a of t){const c=d(this,fs)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ae._l10nResizer[c])}}R(this,ge,bE).call(this,0),T(this,Gr,!0),d(this,en).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,Gr)&&R(this,ge,_E).call(this,d(this,Rm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,ge,np).call(this),this.div.focus()}select(){var e,t,i;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=d(this,ct))==null||i.toggleAltTextBadge(!1)}}unselect(){var e,t,i,s,r;this.isSelected&&(this.isSelected=!1,(e=d(this,en))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=d(this,ct))==null||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,Pm)}set isEditing(e){T(this,Pm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){T(this,sc,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,Ui)||T(this,Ui,new Map);const{action:i}=e;let s=d(this,Ui).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),d(this,Ui).delete(i),d(this,Ui).size===0&&T(this,Ui,null)},Ae._telemetryTimeout),d(this,Ui).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,Jd,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,Jd,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ic=new WeakMap,fs=new WeakMap,ct=new WeakMap,Jd=new WeakMap,Sa=new WeakMap,bm=new WeakMap,sc=new WeakMap,en=new WeakMap,rc=new WeakMap,jr=new WeakMap,Ea=new WeakMap,Rm=new WeakMap,oc=new WeakMap,ai=new WeakMap,Pm=new WeakMap,ac=new WeakMap,Gr=new WeakMap,Qs=new WeakMap,Xd=new WeakMap,Qd=new WeakMap,Ui=new WeakMap,lc=new WeakMap,Mm=new WeakMap,Y0=new WeakMap,ge=new WeakSet,CE=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Nm=new WeakSet,SE=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},vv=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},UO=function(){if(d(this,en))return;T(this,en,document.createElement("div")),d(this,en).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");d(this,en).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",R(this,ge,$O).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Is,{signal:t}),s.tabIndex=-1}this.div.prepend(d(this,en))},$O=function(e,t){var u;t.preventDefault();const{isMac:i}=cn.platform;if(t.button!==0||t.ctrlKey&&i)return;(u=d(this,ct))==null||u.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,T(this,rc,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,ge,_E).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Nt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Is,{signal:o}),T(this,jr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var p;r.abort(),this.parent.togglePointerEvents(!0),(p=d(this,ct))==null||p.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,R(this,ge,xv).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},EE=function(e,t,i,s){this.width=i,this.height=s,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*i,o*s),this.fixAndSetPosition(),this._onResized()},xv=function(){if(!d(this,jr))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=d(this,jr);T(this,jr,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===i&&l===s||this.addCommands({cmd:R(this,ge,EE).bind(this,r,o,a,l),undo:R(this,ge,EE).bind(this,e,t,i,s),mustExec:!0})},_E=function(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=Ae.MIN_SIZE/i,u=Ae.MIN_SIZE/s,p=R(this,ge,vv).call(this,this.rotation),m=(O,B)=>[p[0]*O+p[2]*B,p[1]*O+p[3]*B],g=R(this,ge,vv).call(this,360-this.rotation),w=(O,B)=>[g[0]*O+g[2]*B,g[1]*O+g[3]*B];let v,S,x=!1,C=!1;switch(e){case"topLeft":x=!0,v=(O,B)=>[0,0],S=(O,B)=>[O,B];break;case"topMiddle":v=(O,B)=>[O/2,0],S=(O,B)=>[O/2,B];break;case"topRight":x=!0,v=(O,B)=>[O,0],S=(O,B)=>[0,B];break;case"middleRight":C=!0,v=(O,B)=>[O,B/2],S=(O,B)=>[0,B/2];break;case"bottomRight":x=!0,v=(O,B)=>[O,B],S=(O,B)=>[0,0];break;case"bottomMiddle":v=(O,B)=>[O/2,B],S=(O,B)=>[O/2,0];break;case"bottomLeft":x=!0,v=(O,B)=>[0,B],S=(O,B)=>[O,0];break;case"middleLeft":C=!0,v=(O,B)=>[0,B/2],S=(O,B)=>[O,B/2];break}const _=v(a,l),A=S(a,l);let P=m(...A);const M=Ae._round(r+P[0]),N=Ae._round(o+P[1]);let I=1,k=1,D,L;if(t.fromKeyboard)({deltaX:D,deltaY:L}=t);else{const{screenX:O,screenY:B}=t,[U,F]=d(this,rc);[D,L]=this.screenToPageTranslation(O-U,B-F),d(this,rc)[0]=O,d(this,rc)[1]=B}if([D,L]=w(D/i,L/s),x){const O=Math.hypot(a,l);I=k=Math.max(Math.min(Math.hypot(A[0]-_[0]-D,A[1]-_[1]-L)/O,1/a,1/l),c/a,u/l)}else C?I=Nn(Math.abs(A[0]-_[0]-D),c,1)/a:k=Nn(Math.abs(A[1]-_[1]-L),u,1)/l;const $=Ae._round(a*I),j=Ae._round(l*k);P=m(...S($,j));const V=M-P[0],H=N-P[1];d(this,ai)||T(this,ai,[this.x,this.y,this.width,this.height]),this.width=$,this.height=j,this.x=V,this.y=H,this.setDims(i*$,s*j),this.fixAndSetPosition(),this._onResizing()},VO=function(){var e;T(this,jr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,ct))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},BO=function(e,t,i){let r=.7*(i/t)+1-.7;if(r===1)return;const o=R(this,ge,vv).call(this,this.rotation),a=(M,N)=>[o[0]*M+o[2]*N,o[1]*M+o[3]*N],[l,c]=this.parentDimensions,u=this.x,p=this.y,m=this.width,g=this.height,w=Ae.MIN_SIZE/l,v=Ae.MIN_SIZE/c;r=Math.max(Math.min(r,1/m,1/g),w/m,v/g);const S=Ae._round(m*r),x=Ae._round(g*r);if(S===m&&x===g)return;d(this,ai)||T(this,ai,[u,p,m,g]);const C=a(m/2,g/2),_=Ae._round(u+C[0]),A=Ae._round(p+C[1]),P=a(S/2,x/2);this.x=_-P[0],this.y=A-P[1],this.width=S,this.height=x,this.setDims(l*S,c*x),this.fixAndSetPosition(),this._onResizing()},HO=function(){var e;(e=d(this,ct))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),R(this,ge,xv).call(this)},TE=function(e){const{isMac:t}=cn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},zO=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},a=c=>{s.abort(),T(this,Sa,null),T(this,oc,!1),this._uiManager.endDragSession()||R(this,ge,TE).call(this,c),i&&this._onStopDragging()};t&&(T(this,Xd,e.clientX),T(this,Qd,e.clientY),T(this,Sa,e.pointerId),T(this,bm,e.pointerType),window.addEventListener("pointermove",c=>{i||(i=!0,this._onStartDragging());const{clientX:u,clientY:p,pointerId:m}=c;if(m!==d(this,Sa)){Nt(c);return}const[g,w]=this.screenToPageTranslation(u-d(this,Xd),p-d(this,Qd));T(this,Xd,u),T(this,Qd,p),this._uiManager.dragSelectedEditors(g,w)},o),window.addEventListener("touchmove",Nt,o),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,bm)&&(d(this,lc)||c.isPrimary)&&a(c),Nt(c)},o));const l=c=>{if(!d(this,Sa)||d(this,Sa)===c.pointerId){a(c);return}Nt(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},AE=function(){if(d(this,Ea)||!this.div)return;T(this,Ea,new AbortController);const e=this._uiManager.combinedSignal(d(this,Ea));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},jO=function(e){Ae._resizerKeyboardManager.exec(this,e)},GO=function(e){var t;d(this,Gr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,en)&&R(this,ge,np).call(this)},qO=function(e){T(this,Rm,d(this,Gr)?e:"")},bE=function(e){if(d(this,fs))for(const t of d(this,fs))t.tabIndex=e},np=function(){T(this,Gr,!1),R(this,ge,bE).call(this,-1),R(this,ge,xv).call(this)},b(Ae,Nm),W(Ae,"_l10n",null),W(Ae,"_l10nResizer",null),W(Ae,"_borderLineWidth",-1),W(Ae,"_colorManager",new pE),W(Ae,"_zIndex",1),W(Ae,"_telemetryTimeout",1e3);let nt=Ae;class Ute extends nt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const BP=3285377520,ki=4294901760,Us=65535;class WO{constructor(e){this.h1=e?e&4294967295:BP,this.h2=e?e&4294967295:BP}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let v=0,S=e.length;v<S;v++){const x=e.charCodeAt(v);x<=255?t[i++]=x:(t[i++]=x>>>8,t[i++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const p=3432918353,m=461845907,g=p&Us,w=m&Us;for(let v=0;v<s;v++)v&1?(a=o[v],a=a*p&ki|a*g&Us,a=a<<15|a>>>17,a=a*m&ki|a*w&Us,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*p&ki|l*g&Us,l=l<<15|l>>>17,l=l*m&ki|l*w&Us,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*p&ki|a*g&Us,a=a<<15|a>>>17,a=a*m&ki|a*w&Us,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ki|e*36045&Us,t=t*4283543511&ki|((t<<16|e>>>16)*2950163797&ki)>>>16,e^=t>>>1,e=e*444984403&ki|e*60499&Us,t=t*3301882366&ki|((t<<16|e>>>16)*3120437893&ki)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const RE=Object.freeze({map:null,hash:"",transfer:void 0});var cc,uc,tn,J0,KO;class FA{constructor(){b(this,J0);b(this,cc,!1);b(this,uc,null);b(this,tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=d(this,tn).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return d(this,tn).get(e)}remove(e){if(d(this,tn).delete(e),d(this,tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,tn).values())if(t instanceof nt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=d(this,tn).get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,d(this,tn).set(e,t);s&&R(this,J0,KO).call(this),t instanceof nt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,tn).has(e)}get size(){return d(this,tn).size}resetModified(){d(this,cc)&&(T(this,cc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new YO(this)}get serializable(){if(d(this,tn).size===0)return RE;const e=new Map,t=new WO,i=[],s=Object.create(null);let r=!1;for(const[o,a]of d(this,tn)){const l=a instanceof nt?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:RE}get editorStats(){let e=null;const t=new Map;for(const i of d(this,tn).values()){if(!(i instanceof nt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){T(this,uc,null)}get modifiedIds(){if(d(this,uc))return d(this,uc);const e=[];for(const t of d(this,tn).values())!(t instanceof nt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return T(this,uc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,tn).entries()}}cc=new WeakMap,uc=new WeakMap,tn=new WeakMap,J0=new WeakSet,KO=function(){d(this,cc)||(T(this,cc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Im;class YO extends FA{constructor(t){super();b(this,Im);const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);T(this,Im,{map:o,hash:s,transfer:r})}get print(){Qe("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Im)}get modifiedIds(){return De(this,"modifiedIds",{ids:new Set,hash:""})}}Im=new WeakMap;var Zd;class $te{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,Zd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Zd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||d(this,Zd).has(e.loadedName))){if(kt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=e,a=new FontFace(s,r,o);this.addNativeFontFace(a);try{await a.load(),d(this,Zd).add(s),i==null||i(e)}catch{Ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Qe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw Ce(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return De(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return De(this,"isSyncFontLoadingSupported",Mn||cn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(kt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return De(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(A,P){return A.charCodeAt(P)<<24|A.charCodeAt(P+1)<<16|A.charCodeAt(P+2)<<8|A.charCodeAt(P+3)&255}function s(A,P,M,N){const I=A.substring(0,P),k=A.substring(P+M);return I+N+k}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(A,P){if(++c>30){Ce("Load test font never loaded."),P();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(u.bind(null,A,P))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,p.length,p);const w=16,v=1482184792;let S=i(m,w);for(r=0,o=p.length-3;r<o;r+=4)S=S-v+i(p,r)|0;r<p.length&&(S=S-v+i(p+"XXX",r)|0),m=s(m,w,4,Ete(S));const x=`url(data:font/opentype;base64,${btoa(m)});`,C=`@font-face {font-family:"${p}";src:${x}}`;this.insertRule(C);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const A of[e.loadedName,p]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=A,_.append(P)}this._document.body.append(_),u(p,()=>{_.remove(),t.complete()})}}Zd=new WeakMap;class Vte{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${gO(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(o){Ce(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}}function Bte(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Mn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Hte(n){if(Mn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Zg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Fy(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const PE=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,zte=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",jte=Rte.bind(null,PE,zte);var qr,X0;class Gte{constructor(){b(this,qr,new Map);b(this,X0,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};d(this,X0).then(()=>{for(const[s]of d(this,qr))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){Ce("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}d(this,qr).set(t,s)}removeEventListener(e,t){const i=d(this,qr).get(t);i==null||i(),d(this,qr).delete(t)}terminate(){for(const[,e]of d(this,qr))e==null||e();d(this,qr).clear()}}qr=new WeakMap,X0=new WeakMap;const Oy={DATA:1,ERROR:2},Rt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function HP(){}function zn(n){if(n instanceof dl||n instanceof cE||n instanceof UP||n instanceof L0||n instanceof aC)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new dl(n.message);case"InvalidPDFException":return new cE(n.message);case"PasswordException":return new UP(n.message,n.code);case"ResponseException":return new L0(n.message,n.status,n.missing);case"UnknownErrorException":return new aC(n.message,n.details)}return new aC(n.message,n.toString())}var ef,Yi,JO,XO,QO,wv;class ip{constructor(e,t,i){b(this,Yi);b(this,ef,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",R(this,Yi,JO).bind(this),{signal:d(this,ef).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:Rt.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{kt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Rt.CANCEL,streamId:r,reason:zn(c)}),u.promise}},i)}destroy(){var e;(e=d(this,ef))==null||e.abort(),T(this,ef,null)}}ef=new WeakMap,Yi=new WeakSet,JO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,Yi,QO).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Oy.DATA)s.resolve(e.data);else if(e.callback===Oy.ERROR)s.reject(zn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:Oy.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:Oy.ERROR,callbackId:e.callbackId,reason:zn(o)})});return}if(e.streamId){R(this,Yi,XO).call(this,e);return}t(e.data)},XO=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=u,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Rt.ENQUEUE,streamId:t,chunk:c},p)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Rt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){kt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Rt.ERROR,streamId:t,reason:zn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Rt.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Rt.START_COMPLETE,streamId:t,reason:zn(c)})})},QO=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Rt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(zn(e.reason));break;case Rt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(zn(e.reason));break;case Rt.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||HP).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Rt.PULL_COMPLETE,streamId:t,reason:zn(c)})});break;case Rt.ENQUEUE:if(kt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Rt.CLOSE:if(kt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),R(this,Yi,wv).call(this,o,t);break;case Rt.ERROR:kt(o,"error should have stream controller"),o.controller.error(zn(e.reason)),R(this,Yi,wv).call(this,o,t);break;case Rt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(zn(e.reason)),R(this,Yi,wv).call(this,o,t);break;case Rt.CANCEL:if(!a)break;const l=zn(e.reason);Promise.try(a.onCancel||HP,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Rt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Rt.CANCEL_COMPLETE,streamId:t,reason:zn(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},wv=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var km;class ZO{constructor({enableHWA:e=!1}){b(this,km,!1);T(this,km,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!d(this,km)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Qe("Abstract method `_createCanvas` called.")}}km=new WeakMap;class qte extends ZO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class eU{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class zP extends eU{async _fetch(e){const t=await ey(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Zg(t)}}class tU{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var dc,tf,Wr,Kr,vn,fc,hc,se,mn,sp,Hu,Cv,zu,nU,ME,ju,rp,op,NE,ap;class Wte extends tU{constructor({docId:t,ownerDocument:i=globalThis.document}){super();b(this,se);b(this,dc);b(this,tf);b(this,Wr);b(this,Kr);b(this,vn);b(this,fc);b(this,hc,0);T(this,Kr,t),T(this,vn,i)}addFilter(t){if(!t)return"none";let i=d(this,se,mn).get(t);if(i)return i;const[s,r,o]=R(this,se,Cv).call(this,t),a=t.length===1?s:`${s}${r}${o}`;if(i=d(this,se,mn).get(a),i)return d(this,se,mn).set(t,i),i;const l=`g_${d(this,Kr)}_transfer_map_${zt(this,hc)._++}`,c=R(this,se,zu).call(this,l);d(this,se,mn).set(t,c),d(this,se,mn).set(a,c);const u=R(this,se,ju).call(this,l);return R(this,se,op).call(this,s,r,o,u),c}addHCMFilter(t,i){var w;const s=`${t}-${i}`,r="base";let o=d(this,se,sp).get(r);if((o==null?void 0:o.key)===s||(o?((w=o.filter)==null||w.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},d(this,se,sp).set(r,o)),!t||!i))return o.url;const a=R(this,se,ap).call(this,t);t=pe.makeHexColor(...a);const l=R(this,se,ap).call(this,i);if(i=pe.makeHexColor(...l),d(this,se,Hu).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const S=v/255;c[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const u=c.join(","),p=`g_${d(this,Kr)}_hcm_filter`,m=o.filter=R(this,se,ju).call(this,p);R(this,se,op).call(this,u,u,u,m),R(this,se,ME).call(this,m);const g=(v,S)=>{const x=a[v]/255,C=l[v]/255,_=new Array(S+1);for(let A=0;A<=S;A++)_[A]=x+A/S*(C-x);return _.join(",")};return R(this,se,op).call(this,g(0,5),g(1,5),g(2,5),m),o.url=R(this,se,zu).call(this,p),o.url}addAlphaFilter(t){let i=d(this,se,mn).get(t);if(i)return i;const[s]=R(this,se,Cv).call(this,[t]),r=`alpha_${s}`;if(i=d(this,se,mn).get(r),i)return d(this,se,mn).set(t,i),i;const o=`g_${d(this,Kr)}_alpha_map_${zt(this,hc)._++}`,a=R(this,se,zu).call(this,o);d(this,se,mn).set(t,a),d(this,se,mn).set(r,a);const l=R(this,se,ju).call(this,o);return R(this,se,NE).call(this,s,l),a}addLuminosityFilter(t){let i=d(this,se,mn).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=R(this,se,Cv).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=d(this,se,mn).get(r),i)return d(this,se,mn).set(t,i),i;const o=`g_${d(this,Kr)}_luminosity_map_${zt(this,hc)._++}`,a=R(this,se,zu).call(this,o);d(this,se,mn).set(t,a),d(this,se,mn).set(r,a);const l=R(this,se,ju).call(this,o);return R(this,se,nU).call(this,l),t&&R(this,se,NE).call(this,s,l),a}addHighlightHCMFilter(t,i,s,r,o){var C;const a=`${i}-${s}-${r}-${o}`;let l=d(this,se,sp).get(t);if((l==null?void 0:l.key)===a||(l?((C=l.filter)==null||C.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,se,sp).set(t,l)),!i||!s))return l.url;const[c,u]=[i,s].map(R(this,se,ap).bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),m=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,w]=[r,o].map(R(this,se,ap).bind(this));m<p&&([p,m,g,w]=[m,p,w,g]),d(this,se,Hu).style.color="";const v=(_,A,P)=>{const M=new Array(256),N=(m-p)/P,I=_/255,k=(A-_)/(255*P);let D=0;for(let L=0;L<=P;L++){const $=Math.round(p+L*N),j=I+L*k;for(let V=D;V<=$;V++)M[V]=j;D=$+1}for(let L=D;L<256;L++)M[L]=M[D-1];return M.join(",")},S=`g_${d(this,Kr)}_hcm_${t}_filter`,x=l.filter=R(this,se,ju).call(this,S);return R(this,se,ME).call(this,x),R(this,se,op).call(this,v(g[0],w[0],5),v(g[1],w[1],5),v(g[2],w[2],5),x),l.url=R(this,se,zu).call(this,S),l.url}destroy(t=!1){var i,s,r,o;t&&((i=d(this,fc))!=null&&i.size)||((s=d(this,Wr))==null||s.parentNode.parentNode.remove(),T(this,Wr,null),(r=d(this,tf))==null||r.clear(),T(this,tf,null),(o=d(this,fc))==null||o.clear(),T(this,fc,null),T(this,hc,0))}}dc=new WeakMap,tf=new WeakMap,Wr=new WeakMap,Kr=new WeakMap,vn=new WeakMap,fc=new WeakMap,hc=new WeakMap,se=new WeakSet,mn=function(){return d(this,tf)||T(this,tf,new Map)},sp=function(){return d(this,fc)||T(this,fc,new Map)},Hu=function(){if(!d(this,Wr)){const t=d(this,vn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=d(this,vn).createElementNS(Rr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),T(this,Wr,d(this,vn).createElementNS(Rr,"defs")),t.append(s),s.append(d(this,Wr)),d(this,vn).body.append(t)}return d(this,Wr)},Cv=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let m=0;m<256;m++)u[m]=c[m]/255;const p=u.join(",");return[p,p,p]}const[i,s,r]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=i[c]/255,a[c]=s[c]/255,l[c]=r[c]/255;return[o.join(","),a.join(","),l.join(",")]},zu=function(t){if(d(this,dc)===void 0){T(this,dc,"");const i=d(this,vn).URL;i!==d(this,vn).baseURI&&(uw(i)?Ce('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,dc,hO(i,"")))}return`url(${d(this,dc)}#${t})`},nU=function(t){const i=d(this,vn).createElementNS(Rr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},ME=function(t){const i=d(this,vn).createElementNS(Rr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},ju=function(t){const i=d(this,vn).createElementNS(Rr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),d(this,se,Hu).append(i),i},rp=function(t,i,s){const r=d(this,vn).createElementNS(Rr,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},op=function(t,i,s,r){const o=d(this,vn).createElementNS(Rr,"feComponentTransfer");r.append(o),R(this,se,rp).call(this,o,"feFuncR",t),R(this,se,rp).call(this,o,"feFuncG",i),R(this,se,rp).call(this,o,"feFuncB",s)},NE=function(t,i){const s=d(this,vn).createElementNS(Rr,"feComponentTransfer");i.append(s),R(this,se,rp).call(this,s,"feFuncA",t)},ap=function(t){return d(this,se,Hu).style.color=t,LA(getComputedStyle(d(this,se,Hu)).getPropertyValue("color"))};class iU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class jP extends iU{async _fetch(e){const t=await ey(e,"arraybuffer");return new Uint8Array(t)}}class sU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class GP extends sU{async _fetch(e){const t=await ey(e,"arraybuffer");return new Uint8Array(t)}}Mn&&Ce("Please use the `legacy` build in Node.js environments.");async function OA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Kte extends tU{}class Yte extends ZO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Jte extends eU{async _fetch(e){return OA(e)}}class Xte extends iU{async _fetch(e){return OA(e)}}class Qte extends sU{async _fetch(e){return OA(e)}}const on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function IE(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class UA{isModifyingCurrentTransform(){return!1}getPattern(){Qe("Abstract method `getPattern` called.")}}class Zte extends UA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===on.STROKE||s===on.FILL){const o=t.current.getClippedPathBoundingBox(s,gt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=pe.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),IE(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=e.createPattern(c.canvas,"no-repeat");const p=new DOMMatrix(i);r.setTransform(p)}else IE(e,this._bbox),r=this._createGradient(e);return r}}function uC(n,e,t,i,s,r,o,a){const l=e.coords,c=e.colors,u=n.data,p=n.width*4;let m;l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=r,r=o,o=m),l[i+1]>l[s+1]&&(m=i,i=s,s=m,m=o,o=a,a=m),l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=r,r=o,o=m);const g=(l[t]+e.offsetX)*e.scaleX,w=(l[t+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,S=(l[i+1]+e.offsetY)*e.scaleY,x=(l[s]+e.offsetX)*e.scaleX,C=(l[s+1]+e.offsetY)*e.scaleY;if(w>=C)return;const _=c[r],A=c[r+1],P=c[r+2],M=c[o],N=c[o+1],I=c[o+2],k=c[a],D=c[a+1],L=c[a+2],$=Math.round(w),j=Math.round(C);let V,H,O,B,U,F,z,te;for(let Y=$;Y<=j;Y++){if(Y<S){const G=Y<w?0:(w-Y)/(w-S);V=g-(g-v)*G,H=_-(_-M)*G,O=A-(A-N)*G,B=P-(P-I)*G}else{let G;Y>C?G=1:S===C?G=0:G=(S-Y)/(S-C),V=v-(v-x)*G,H=M-(M-k)*G,O=N-(N-D)*G,B=I-(I-L)*G}let ie;Y<w?ie=0:Y>C?ie=1:ie=(w-Y)/(w-C),U=g-(g-x)*ie,F=_-(_-k)*ie,z=A-(A-D)*ie,te=P-(P-L)*ie;const he=Math.round(Math.min(V,U)),Re=Math.round(Math.max(V,U));let Pe=p*Y+he*4;for(let G=he;G<=Re;G++)ie=(V-G)/(V-U),ie<0?ie=0:ie>1&&(ie=1),u[Pe++]=H-(H-F)*ie|0,u[Pe++]=O-(O-z)*ie|0,u[Pe++]=B-(B-te)*ie|0,u[Pe++]=255}}function ene(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let p=0;p<c;p++,u++)uC(n,t,i[u],i[u+1],i[u+a],s[u],s[u+1],s[u+a]),uC(n,t,i[u+a+1],i[u+1],i[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)uC(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class tne extends UA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),g=c/p,w=u/m,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/w},S=p+2*2,x=m+2*2,C=i.getCanvas("mesh",S,x),_=C.context,A=_.createImageData(p,m);if(t){const M=A.data;for(let N=0,I=M.length;N<I;N+=4)M[N]=t[0],M[N+1]=t[1],M[N+2]=t[2],M[N+3]=255}for(const M of this._figures)ene(A,M,v);return _.putImageData(A,2,2),{canvas:C.canvas,offsetX:a-2*g,offsetY:l-2*w,scaleX:g,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,s){IE(e,this._bbox);const r=new Float32Array(2);if(s===on.SHADING)pe.singularValueDecompose2dScale(gt(e),r);else if(this.matrix){pe.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;pe.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=a,r[1]*=l}else pe.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,s===on.SHADING?null:this._background,t.cachedCanvases);return s!==on.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class nne extends UA{getPattern(){return"hotpink"}}function ine(n){switch(n[0]){case"RadialAxial":return new Zte(n);case"Mesh":return new tne(n);case"Dummy":return new nne}throw new Error(`Unknown IR type: ${n[0]}`)}const qP={COLORED:1,UNCOLORED:2},Q0=class Q0{constructor(e,t,i,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),cw("TilingType: "+r);const u=t[0],p=t[1],m=t[2],g=t[3],w=m-u,v=g-p,S=new Float32Array(2);pe.singularValueDecompose2dScale(this.matrix,S);const[x,C]=S;pe.singularValueDecompose2dScale(this.baseTransform,S);const _=x*S[0],A=C*S[1];let P=w,M=v,N=!1,I=!1;const k=Math.ceil(l*_),D=Math.ceil(c*A),L=Math.ceil(w*_),$=Math.ceil(v*A);k>=L?P=l:N=!0,D>=$?M=c:I=!0;const j=this.getSizeAndScale(P,this.ctx.canvas.width,_),V=this.getSizeAndScale(M,this.ctx.canvas.height,A),H=e.cachedCanvases.getCanvas("pattern",j.size,V.size),O=H.context,B=a.createCanvasGraphics(O);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,s,o),O.translate(-j.scale*u,-V.scale*p),B.transform(j.scale,0,0,V.scale,0,0),O.save(),this.clipBbox(B,u,p,m,g),B.baseTransform=gt(B.ctx),B.executeOperatorList(i),B.endDrawing(),O.restore(),N||I){const U=H.canvas;N&&(P=l),I&&(M=c);const F=this.getSizeAndScale(P,this.ctx.canvas.width,_),z=this.getSizeAndScale(M,this.ctx.canvas.height,A),te=F.size,Y=z.size,ie=e.cachedCanvases.getCanvas("pattern-workaround",te,Y),he=ie.context,Re=N?Math.floor(w/l):0,Pe=I?Math.floor(v/c):0;for(let G=0;G<=Re;G++)for(let Te=0;Te<=Pe;Te++)he.drawImage(U,te*G,Y*Te,te,Y,0,0,te,Y);return{canvas:ie.canvas,scaleX:F.scale,scaleY:z.scale,offsetX:u,offsetY:p}}return{canvas:H.canvas,scaleX:j.scale,scaleY:V.scale,offsetX:u,offsetY:p}}getSizeAndScale(e,t,i){const s=Math.max(Q0.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,a=r-i;e.ctx.rect(t,i,o,a),pe.axialAlignedBoundingBox([t,i,s,r],gt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case qP.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=a;break;case qP.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new Ste(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,s){let r=i;s!==on.SHADING&&(r=pe.transform(r,t.baseTransform),this.matrix&&(r=pe.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};W(Q0,"MAX_PATTERN_SIZE",3e3);let kE=Q0;function sne({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=cn.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=i>>3,p=i&7,m=n.length;t=new Uint32Array(t.buffer);let g=0;for(let w=0;w<s;w++){for(const S=e+u;e<S;e++){const x=e<m?n[e]:255;t[g++]=x&128?c:l,t[g++]=x&64?c:l,t[g++]=x&32?c:l,t[g++]=x&16?c:l,t[g++]=x&8?c:l,t[g++]=x&4?c:l,t[g++]=x&2?c:l,t[g++]=x&1?c:l}if(p===0)continue;const v=e<m?n[e++]:255;for(let S=0;S<p;S++)t[g++]=v&1<<7-S?c:l}return{srcPos:e,destPos:g}}const WP=16,KP=100,rne=15,YP=10,Xn=16,dC=new DOMMatrix,Ci=new Float32Array(2),ad=new Float32Array([1/0,1/0,-1/0,-1/0]);function one(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},n.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},n.transform=function(t,i,s,r,o,a){e.transform(t,i,s,r,o,a),this.__originalTransform(t,i,s,r,o,a)},n.setTransform=function(t,i,s,r,o,a){e.setTransform(t,i,s,r,o,a),this.__originalSetTransform(t,i,s,r,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,a){e.bezierCurveTo(t,i,s,r,o,a),this.__originalBezierCurveTo(t,i,s,r,o,a)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class ane{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Uy(n,e,t,i,s,r,o,a,l,c){const[u,p,m,g,w,v]=gt(n);if(p===0&&m===0){const C=o*u+w,_=Math.round(C),A=a*g+v,P=Math.round(A),M=(o+l)*u+w,N=Math.abs(Math.round(M)-_)||1,I=(a+c)*g+v,k=Math.abs(Math.round(I)-P)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),_,P),n.drawImage(e,t,i,s,r,0,0,N,k),n.setTransform(u,p,m,g,w,v),[N,k]}if(u===0&&g===0){const C=a*m+w,_=Math.round(C),A=o*p+v,P=Math.round(A),M=(a+c)*m+w,N=Math.abs(Math.round(M)-_)||1,I=(o+l)*p+v,k=Math.abs(Math.round(I)-P)||1;return n.setTransform(0,Math.sign(p),Math.sign(m),0,_,P),n.drawImage(e,t,i,s,r,0,0,k,N),n.setTransform(u,p,m,g,w,v),[k,N]}n.drawImage(e,t,i,s,r,o,a,l,c);const S=Math.hypot(u,p),x=Math.hypot(m,g);return[S*l,x*c]}class JP{constructor(e,t){W(this,"alphaIsShape",!1);W(this,"fontSize",0);W(this,"fontSizeScale",1);W(this,"textMatrix",null);W(this,"textMatrixScale",1);W(this,"fontMatrix",lE);W(this,"leading",0);W(this,"x",0);W(this,"y",0);W(this,"lineX",0);W(this,"lineY",0);W(this,"charSpacing",0);W(this,"wordSpacing",0);W(this,"textHScale",1);W(this,"textRenderingMode",pn.FILL);W(this,"textRise",0);W(this,"fillColor","#000000");W(this,"strokeColor","#000000");W(this,"patternFill",!1);W(this,"patternStroke",!1);W(this,"fillAlpha",1);W(this,"strokeAlpha",1);W(this,"lineWidth",1);W(this,"activeSMask",null);W(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ad.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=on.FILL,t=null){const i=this.minMax.slice();if(e===on.STROKE){t||Qe("Stroke bounding box must include transform."),pe.singularValueDecompose2dScale(t,Ci);const s=Ci[0]*this.lineWidth/2,r=Ci[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const e=pe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ad,0)}getClippedPathBoundingBox(e=on.FILL,t=null){return pe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function XP(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Xn,r=(t-s)/Xn,o=s===0?r:r+1,a=n.createImageData(i,Xn);let l=0,c;const u=e.data,p=a.data;let m,g,w,v;if(e.kind===dv.GRAYSCALE_1BPP){const S=u.byteLength,x=new Uint32Array(p.buffer,0,p.byteLength>>2),C=x.length,_=i+7>>3,A=4294967295,P=cn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<r?Xn:s,c=0,g=0;g<w;g++){const M=S-l;let N=0;const I=M>_?i:M*8-7,k=I&-8;let D=0,L=0;for(;N<k;N+=8)L=u[l++],x[c++]=L&128?A:P,x[c++]=L&64?A:P,x[c++]=L&32?A:P,x[c++]=L&16?A:P,x[c++]=L&8?A:P,x[c++]=L&4?A:P,x[c++]=L&2?A:P,x[c++]=L&1?A:P;for(;N<I;N++)D===0&&(L=u[l++],D=128),x[c++]=L&D?A:P,D>>=1}for(;c<C;)x[c++]=0;n.putImageData(a,0,m*Xn)}}else if(e.kind===dv.RGBA_32BPP){for(g=0,v=i*Xn*4,m=0;m<r;m++)p.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,g),g+=Xn;m<o&&(v=i*s*4,p.set(u.subarray(l,l+v)),n.putImageData(a,0,g))}else if(e.kind===dv.RGB_24BPP)for(w=Xn,v=i*w,m=0;m<o;m++){for(m>=r&&(w=s,v=i*w),c=0,g=v;g--;)p[c++]=u[l++],p[c++]=u[l++],p[c++]=u[l++],p[c++]=255;n.putImageData(a,0,m*Xn)}else throw new Error(`bad image kind: ${e.kind}`)}function QP(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Xn,r=(t-s)/Xn,o=s===0?r:r+1,a=n.createImageData(i,Xn);let l=0;const c=e.data,u=a.data;for(let p=0;p<o;p++){const m=p<r?Xn:s;({srcPos:l}=sne({src:c,srcPos:l,dest:u,width:i,height:m,nonBlackColor:0})),n.putImageData(a,0,p*Xn)}}function Oh(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function $y(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function ZP(n,e){if(e)return!0;pe.singularValueDecompose2dScale(n,Ci);const t=Math.fround(Sr.pixelRatio*fl.PDF_TO_CSS_UNITS);return Ci[0]<=t&&Ci[1]<=t}const lne=["butt","round","square"],cne=["miter","round","bevel"],une={},eM={};var ks,DE,LE,FE;const qA=class qA{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){b(this,ks);this.ctx=e,this.current=new JP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new ane(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...gt(this.compositeCtx))}this.ctx.save(),$y(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=gt(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const l=r.length;if(l===a)return a;const c=l-a>YP&&typeof i=="function",u=c?Date.now()+rne:0;let p=0;const m=this.commonObjs,g=this.objs;let w;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(w=o[a],w!==D0.dependency)this[w].apply(this,r[a]);else for(const v of r[a]){const S=v.startsWith("g_")?m:g;if(!S.has(v))return S.get(v,i),a}if(a++,a===l)return a;if(c&&++p>YP){if(Date.now()>u)return i(),a;p=0}}}endDrawing(){R(this,ks,DE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,ks,LE).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,l=s,c="prescale1",u,p;for(;r>2&&a>1||o>2&&l>1;){let m=a,g=l;r>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/m),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),u=this.cachedCanvases.getCanvas(c,m,g),p=u.context,p.clearRect(0,0,m,g),p.drawImage(e,0,0,a,l,0,0,m,g),e=u.canvas,a=m,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=gt(t);let l,c,u,p;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const D=l.get(c);if(D&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),$=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:D,offsetX:L,offsetY:$}}u=D}u||(p=this.cachedCanvases.getCanvas("maskCanvas",i,s),QP(p.context,e));let m=pe.transform(a,[1/i,0,0,-1/s,0,0]);m=pe.transform(m,[1,0,0,1,0,-s]);const g=ad.slice();pe.axialAlignedBoundingBox([0,0,i,s],m,g);const[w,v,S,x]=g,C=Math.round(S-w)||1,_=Math.round(x-v)||1,A=this.cachedCanvases.getCanvas("fillCanvas",C,_),P=A.context,M=w,N=v;P.translate(-M,-N),P.transform(...m),u||(u=this._scaleImage(p.canvas,Os(P)),u=u.img,l&&o&&l.set(c,u)),P.imageSmoothingEnabled=ZP(gt(P),e.interpolate),Uy(P,u,0,0,u.width,u.height,0,0,i,s),P.globalCompositeOperation="source-in";const I=pe.transform(Os(P),[1,0,0,1,-M,-N]);return P.fillStyle=o?r.getPattern(t,this,I,on.FILL):r,P.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,A.canvas)),{canvas:A.canvas,offsetX:Math.round(M),offsetY:Math.round(N)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=lne[e]}setLineJoin(e){this.ctx.lineJoin=cne[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),Oh(this.suspendedCtx,r),one(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,i,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,a,l,c,u,p){let m=e.canvas,g=l-u,w=c-p;if(o)if(g<0||w<0||g+i>m.width||w+s>m.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),x=S.context;x.drawImage(m,-g,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,i,s),x.globalCompositeOperation="source-over",m=S.canvas,g=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,w,i,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,w,i,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,i,s),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,g,w,i,s,l,c,i,s),t.restore()}save(){this.inSMaskMode&&Oh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Oh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,s,r,o){this.ctx.transform(e,t,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let[s]=t;if(!i){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const r=t[0]=new Path2D;for(let o=0,a=s.length;o<a;)switch(s[o++]){case Ly.moveTo:r.moveTo(s[o++],s[o++]);break;case Ly.lineTo:r.lineTo(s[o++],s[o++]);break;case Ly.curveTo:r.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case Ly.closePath:r.closePath();break;default:Ce(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=r}pe.axialAlignedBoundingBox(i,gt(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const r=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Os(i),on.STROKE),r){const o=new Path2D;o.addPath(e,i.getTransform().invertSelf().multiplySelf(r)),e=o}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(on.STROKE,gt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=s.getPattern(i,this,Os(i),on.FILL),l){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),o&&i.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=une}eoClip(){this.pendingClip=eM}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const i=new Path2D,s=t.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:c}of e)i.addPath(c,new DOMMatrix(r).preMultiplySelf(s).translate(o,a).scale(l,-l));t.clip(i),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||lE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ce("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((u=i.systemFontInfo)==null?void 0:u.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=t;t<WP?c=WP:t>KP&&(c=KP),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s,r){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,p=c&pn.FILL_STROKE_MASK,m=!!(c&pn.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,w=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||m||g||w)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||w){o.save(),o.translate(t,i),o.scale(u,-u);let S;if((p===pn.FILL||p===pn.FILL_STROKE)&&(s?(S=o.getTransform(),o.setTransform(...s),o.fill(R(this,ks,FE).call(this,v,S,s))):o.fill(v)),p===pn.STROKE||p===pn.FILL_STROKE)if(r){S||(S=o.getTransform()),o.setTransform(...r);const{a:x,b:C,c:_,d:A}=S,P=pe.inverseTransform(r),M=pe.transform([x,C,_,A,0,0],P);pe.singularValueDecompose2dScale(M,Ci),o.lineWidth*=Math.max(Ci[0],Ci[1])/u,o.stroke(R(this,ks,FE).call(this,v,S,r))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(p===pn.FILL||p===pn.FILL_STROKE)&&o.fillText(e,t,i),(p===pn.STROKE||p===pn.FILL_STROKE)&&o.strokeText(e,t,i);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:gt(o),x:t,y:i,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return De(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,p=e.length,m=i.vertical,g=m?1:-1,w=i.defaultVMetrics,v=s*t.fontMatrix[0],S=t.textRenderingMode===pn.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),c>0?r.scale(u,-1):r.scale(u,1);let x,C;if(t.patternFill){r.save();const N=t.fillColor.getPattern(r,this,Os(r),on.FILL);x=gt(r),r.restore(),r.fillStyle=N}if(t.patternStroke){r.save();const N=t.strokeColor.getPattern(r,this,Os(r),on.STROKE);C=gt(r),r.restore(),r.strokeStyle=N}let _=t.lineWidth;const A=t.textMatrixScale;if(A===0||_===0){const N=t.textRenderingMode&pn.FILL_STROKE_MASK;(N===pn.STROKE||N===pn.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=A;if(o!==1&&(r.scale(o,o),_/=o),r.lineWidth=_,i.isInvalidPDFjsFont){const N=[];let I=0;for(const k of e)N.push(k.unicode),I+=k.width;r.fillText(N.join(""),0,0),t.x+=I*v*u,r.restore(),this.compose();return}let P=0,M;for(M=0;M<p;++M){const N=e[M];if(typeof N=="number"){P+=g*N*s/1e3;continue}let I=!1;const k=(N.isSpace?l:0)+a,D=N.fontChar,L=N.accent;let $,j,V=N.width;if(m){const O=N.vmetric||w,B=-(N.vmetric?O[1]:V*.5)*v,U=O[2]*v;V=O?-O[0]:V,$=B/o,j=(P+U)/o}else $=P/o,j=0;if(i.remeasure&&V>0){const O=r.measureText(D).width*1e3/s*o;if(V<O&&this.isFontSubpixelAAEnabled){const B=V/O;I=!0,r.save(),r.scale(B,1),$/=B}else V!==O&&($+=(V-O)/2e3*s/o)}if(this.contentVisible&&(N.isInFont||i.missingFile)){if(S&&!L)r.fillText(D,$,j);else if(this.paintChar(D,$,j,x,C),L){const O=$+s*L.offset.x/o,B=j-s*L.offset.y/o;this.paintChar(L.fontChar,O,B,x,C)}}const H=m?V*v-k*c:V*v+k*c;P+=H,I&&r.restore()}m?t.y-=P:t.x+=P*u,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,p=i.fontMatrix||lE,m=e.length,g=i.textRenderingMode===pn.INVISIBLE;let w,v,S,x;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),i.textMatrix&&t.transform(...i.textMatrix),t.translate(i.x,i.y+i.textRise),t.scale(u,o),w=0;w<m;++w){if(v=e[w],typeof v=="number"){x=a*v*r/1e3,this.ctx.translate(x,0),i.x+=x*u;continue}const C=(v.isSpace?c:0)+l,_=s.charProcOperatorList[v.operatorListId];_?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...p),this.executeOperatorList(_),this.restore()):Ce(`Type3 character "${v.operatorListId}" is not available.`);const A=[v.width,0];pe.applyTransform(A,p),S=A[0]*r+C,t.translate(S,0),i.x+=S*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,o){const a=new Path2D;a.rect(i,s,r-i,o-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=this.baseTransform||gt(this.ctx),s={createCanvasGraphics:r=>new qA(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new kE(e,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=ine(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Os(t),on.SHADING);const s=Os(t);if(s){const{width:r,height:o}=t.canvas,a=ad.slice();pe.axialAlignedBoundingBox([0,0,r,o],s,a);const[l,c,u,p]=a;this.ctx.fillRect(l,c,u-l,p-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qe("Should not call beginInlineImage")}beginImageData(){Qe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=gt(this.ctx),t)){pe.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[i,s,r,o]=t,a=new Path2D;a.rect(i,s,r-i,o-s),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||cw("TODO: Support non-isolated groups."),e.knockout&&Ce("Knockout groups not supported.");const i=gt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ad.slice();pe.axialAlignedBoundingBox(e.bbox,gt(t),s);const r=[0,0,t.canvas.width,t.canvas.height];s=pe.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(u,l,c),m=p.context;m.translate(-o,-a),m.transform(...i);let g=new Path2D;const[w,v,S,x]=e.bbox;if(g.rect(w,v,S-w,x-v),e.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(e.matrix)),g=C}m.clip(g),e.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Oh(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=gt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=ad.slice();pe.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(R(this,ks,DE).call(this),$y(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,pe.singularValueDecompose2dScale(gt(this.ctx),Ci);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Ci[0],0,0,-Ci[1],0,a*Ci[1]),$y(this.ctx)}else{$y(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new JP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,ks,LE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this._createMaskCanvas(e),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=gt(a);a.transform(t,i,s,r,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,p=o.length;u<p;u+=2){const m=pe.transform(l,[t,i,s,r,o[u],o[u+1]]);a.drawImage(c.canvas,m[4],m[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),p=u.context;p.save();const m=this.getObject(o,r);QP(p,m),p.globalCompositeOperation="source-in",p.fillStyle=s?i.getPattern(p,this,Os(t),on.FILL):i,p.fillRect(0,0,a,l),p.restore(),t.save(),t.transform(...c),t.scale(1,-1),Uy(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Ce("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;this.save();const{filter:r}=s;r!=="none"&&r!==""&&(s.filter="none"),s.scale(1/t,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;XP(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,Os(s));s.imageSmoothingEnabled=ZP(gt(s),e.interpolate),Uy(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;XP(l,e),s=this.applyTransferMapsToCanvas(l)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),Uy(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===eM?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=gt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const l=Math.abs(t),c=Math.abs(r);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,p=c*e;o=u<1?1/u:1,a=p<1?1/p:1}}else{const l=Math.abs(t*r-i*s),c=Math.hypot(t,i),u=Math.hypot(s,r);if(e===0)o=u/l,a=c/l;else{const p=e*l;o=u>p?u/p:1,a=c>p?c/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(e);return}const a=i.getLineDash();t&&i.save(),i.scale(r,o),dC.a=1/r,dC.d=1/o;const l=new Path2D;if(l.addPath(e,dC),a.length>0){const c=Math.max(r,o);i.setLineDash(a.map(u=>u/c)),i.lineDashOffset/=c}i.lineWidth=s||1,i.stroke(l),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ks=new WeakSet,DE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},LE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},FE=function(e,t,i){const s=new Path2D;return s.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),s};let Td=qA;for(const n in D0)Td.prototype[n]!==void 0&&(Td.prototype[D0[n]]=Td.prototype[n]);var Dm,Lm;class cr{static get workerPort(){return d(this,Dm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,Dm,e)}static get workerSrc(){return d(this,Lm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,Lm,e)}}Dm=new WeakMap,Lm=new WeakMap,b(cr,Dm,null),b(cr,Lm,"");var nf,Fm;class dne{constructor({parsedData:e,rawData:t}){b(this,nf);b(this,Fm);T(this,nf,e),T(this,Fm,t)}getRaw(){return d(this,Fm)}get(e){return d(this,nf).get(e)??null}[Symbol.iterator](){return d(this,nf).entries()}}nf=new WeakMap,Fm=new WeakMap;const Gu=Symbol("INTERNAL");var Om,Um,$m,sf;class fne{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){b(this,Om,!1);b(this,Um,!1);b(this,$m,!1);b(this,sf,!0);T(this,Om,!!(e&xi.DISPLAY)),T(this,Um,!!(e&xi.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(d(this,$m))return d(this,sf);if(!d(this,sf))return!1;const{print:e,view:t}=this.usage;return d(this,Om)?(t==null?void 0:t.viewState)!=="OFF":d(this,Um)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Gu&&Qe("Internal method `_setVisible` called."),T(this,$m,i),T(this,sf,t)}}Om=new WeakMap,Um=new WeakMap,$m=new WeakMap,sf=new WeakMap;var _a,Je,rf,of,Vm,OE;class hne{constructor(e,t=xi.DISPLAY){b(this,Vm);b(this,_a,null);b(this,Je,new Map);b(this,rf,null);b(this,of,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,of,e.order);for(const i of e.groups)d(this,Je).set(i.id,new fne(t,i));if(e.baseState==="OFF")for(const i of d(this,Je).values())i._setVisible(Gu,!1);for(const i of e.on)d(this,Je).get(i)._setVisible(Gu,!0);for(const i of e.off)d(this,Je).get(i)._setVisible(Gu,!1);T(this,rf,this.getHash())}}isVisible(e){if(d(this,Je).size===0)return!0;if(!e)return cw("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Je).has(e.id)?d(this,Je).get(e.id).visible:(Ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,Vm,OE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Je).has(t))return Ce(`Optional content group not found: ${t}`),!0;if(d(this,Je).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Je).has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!d(this,Je).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Je).has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!d(this,Je).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Je).has(t))return Ce(`Optional content group not found: ${t}`),!0;if(d(this,Je).get(t).visible)return!1}return!0}return Ce(`Unknown optional content policy ${e.policy}.`),!0}return Ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=d(this,Je).get(e);if(!s){Ce(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((r=d(this,Je).get(a))==null||r._setVisible(Gu,!1,!0));s._setVisible(Gu,!!t,!0),T(this,_a,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=d(this,Je).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}T(this,_a,null)}get hasInitialVisibility(){return d(this,rf)===null||this.getHash()===d(this,rf)}getOrder(){return d(this,Je).size?d(this,of)?d(this,of).slice():[...d(this,Je).keys()]:null}getGroup(e){return d(this,Je).get(e)||null}getHash(){if(d(this,_a)!==null)return d(this,_a);const e=new WO;for(const[t,i]of d(this,Je))e.update(`${t}:${i.visible}`);return T(this,_a,e.hexdigest())}[Symbol.iterator](){return d(this,Je).entries()}}_a=new WeakMap,Je=new WeakMap,rf=new WeakMap,of=new WeakMap,Vm=new WeakSet,OE=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=R(this,Vm,OE).call(this,r);else if(d(this,Je).has(r))o=d(this,Je).get(r).visible;else return Ce(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class pne{constructor(e,{disableRange:t=!1,disableStream:i=!1}){kt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});kt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){kt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new mne(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new gne(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class mne{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=kA(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gne{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yne(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),r(u)}if(t=o(n),t){const u=c(t);return r(u)}if(t=i("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),r(u)}function i(u,p){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(u,p){if(u){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(u,{fatal:!0}),g=Zg(p);p=m.decode(g),e=!1}catch{}}return p}function r(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function o(u){const p=[];let m;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(u))!==null;){let[,v,S,x]=m;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[S,x]}const w=[];for(let v=0;v<p.length&&v in p;++v){let[S,x]=p[v];x=a(x),S&&(x=unescape(x),v===0&&(x=l(x))),w.push(x)}return w.join("")}function a(u){if(u.startsWith('"')){const p=u.slice(1).split('\\"');for(let m=0;m<p.length;++m){const g=p[m].indexOf('"');g!==-1&&(p[m]=p[m].slice(0,g),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}u=p.join('"')}return u}function l(u){const p=u.indexOf("'");if(p===-1)return u;const m=u.slice(0,p),w=u.slice(p+1).replace(/^[^']*'/,"");return s(m,w)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,g,w){if(g==="q"||g==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),s(m,w);try{w=atob(w)}catch{}return s(m,w)})}return""}function rU(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function dw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function oU({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function aU(n){const e=n.get("Content-Disposition");if(e){let t=yne(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(kA(t))return t}return null}function iy(n,e){return new L0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function lU(n){return n===200||n===206}function cU(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function uU(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ce(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class vne{constructor(e){W(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=rU(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return kt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xne(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new wne(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class xne{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,cU(i,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=dw(r.url),!lU(r.status))throw iy(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=oU({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=aU(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new dl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:uU(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class wne{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,cU(r,this._withCredentials,this._abortController)).then(a=>{const l=dw(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!lU(a.status))throw iy(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:uU(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const fC=200,hC=206;function Cne(n){const e=n.response;return typeof e!="string"?e:Zg(e).buffer}class Sne{constructor({url:e,httpHeaders:t,withCredentials:i}){W(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=rU(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=hC):s.expectedStatus=fC,t.responseType="arraybuffer",kt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||fC;if(!(r===fC&&i.expectedStatus===hC)&&r!==i.expectedStatus){i.onError(s.status);return}const a=Cne(s);if(r===hC){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?i.onDone({begin:parseInt(c[1],10),chunk:a}):(Ce('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Ene{constructor(e){this._source=e,this._manager=new Sne(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return kt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _ne(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new Tne(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class _ne{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=dw(t.responseURL);const i=t.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=oU({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=aU(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=iy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Tne{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=dw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=iy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Ane=/^[a-z][a-z0-9\-+.]+:/i;function bne(n){if(Ane.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Rne{constructor(e){this.source=e,this.url=bne(e.url),kt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return kt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Pne(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Mne(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Pne{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=iy(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new dl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Mne{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Uh=Symbol("INITIAL_DATA");var li,Bm,UE;class dU{constructor(){b(this,Bm);b(this,li,Object.create(null))}get(e,t=null){if(t){const s=R(this,Bm,UE).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=d(this,li)[e];if(!i||i.data===Uh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=d(this,li)[e];return!!t&&t.data!==Uh}delete(e){const t=d(this,li)[e];return!t||t.data===Uh?!1:(delete d(this,li)[e],!0)}resolve(e,t=null){const i=R(this,Bm,UE).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in d(this,li)){const{data:i}=d(this,li)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}T(this,li,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,li)){const{data:t}=d(this,li)[e];t!==Uh&&(yield[e,t])}}}li=new WeakMap,Bm=new WeakSet,UE=function(e){var t;return(t=d(this,li))[e]||(t[e]={...Promise.withResolvers(),data:Uh})};const Nne=1e5,tM=30;var yM,Ta,Kn,Hm,zm,pc,Yr,jm,Gm,mc,af,lf,Aa,cf,qm,uf,gc,Wm,Km,df,yc,Ym,ba,ff,Io,fU,hU,$E,bi,Sv,VE,pU,mU;const Lt=class Lt{constructor({textContentSource:e,container:t,viewport:i}){b(this,Io);b(this,Ta,Promise.withResolvers());b(this,Kn,null);b(this,Hm,!1);b(this,zm,!!((yM=globalThis.FontInspector)!=null&&yM.enabled));b(this,pc,null);b(this,Yr,null);b(this,jm,0);b(this,Gm,0);b(this,mc,null);b(this,af,null);b(this,lf,0);b(this,Aa,0);b(this,cf,Object.create(null));b(this,qm,[]);b(this,uf,null);b(this,gc,[]);b(this,Wm,new WeakMap);b(this,Km,null);var l;if(e instanceof ReadableStream)T(this,uf,e);else if(typeof e=="object")T(this,uf,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,Kn,T(this,af,t)),T(this,Aa,i.scale*Sr.pixelRatio),T(this,lf,i.rotation),T(this,Yr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;T(this,Km,[1,0,0,-1,-o,a+r]),T(this,Gm,s),T(this,jm,r),R(l=Lt,bi,pU).call(l),vu(t,i),d(this,Ta).promise.finally(()=>{d(Lt,ff).delete(this),T(this,Yr,null),T(this,cf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=cn.platform;return De(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,mc).read().then(({value:t,done:i})=>{if(i){d(this,Ta).resolve();return}d(this,pc)??T(this,pc,t.lang),Object.assign(d(this,cf),t.styles),R(this,Io,fU).call(this,t.items),e()},d(this,Ta).reject)};return T(this,mc,d(this,uf).getReader()),d(Lt,ff).add(this),e(),d(this,Ta).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*Sr.pixelRatio,s=e.rotation;if(s!==d(this,lf)&&(t==null||t(),T(this,lf,s),vu(d(this,af),{rotation:s})),i!==d(this,Aa)){t==null||t(),T(this,Aa,i);const o={div:null,properties:null,ctx:R(r=Lt,bi,Sv).call(r,d(this,pc))};for(const a of d(this,gc))o.properties=d(this,Wm).get(a),o.div=a,R(this,Io,$E).call(this,o)}}cancel(){var t;const e=new dl("TextLayer task cancelled.");(t=d(this,mc))==null||t.cancel(e).catch(()=>{}),T(this,mc,null),d(this,Ta).reject(e)}get textDivs(){return d(this,gc)}get textContentItemsStr(){return d(this,qm)}static cleanup(){if(!(d(this,ff).size>0)){d(this,df).clear();for(const{canvas:e}of d(this,yc).values())e.remove();d(this,yc).clear()}}};Ta=new WeakMap,Kn=new WeakMap,Hm=new WeakMap,zm=new WeakMap,pc=new WeakMap,Yr=new WeakMap,jm=new WeakMap,Gm=new WeakMap,mc=new WeakMap,af=new WeakMap,lf=new WeakMap,Aa=new WeakMap,cf=new WeakMap,qm=new WeakMap,uf=new WeakMap,gc=new WeakMap,Wm=new WeakMap,Km=new WeakMap,df=new WeakMap,yc=new WeakMap,Ym=new WeakMap,ba=new WeakMap,ff=new WeakMap,Io=new WeakSet,fU=function(e){var s,r;if(d(this,Hm))return;(r=d(this,Yr)).ctx??(r.ctx=R(s=Lt,bi,Sv).call(s,d(this,pc)));const t=d(this,gc),i=d(this,qm);for(const o of e){if(t.length>Nne){Ce("Ignoring additional textDivs for performance reasons."),T(this,Hm,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,Kn);T(this,Kn,document.createElement("span")),d(this,Kn).classList.add("markedContent"),o.id!==null&&d(this,Kn).setAttribute("id",`${o.id}`),a.append(d(this,Kn))}else o.type==="endMarkedContent"&&T(this,Kn,d(this,Kn).parentNode);continue}i.push(o.str),R(this,Io,hU).call(this,o)}},hU=function(e){var v;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,gc).push(t);const s=pe.transform(d(this,Km),e.transform);let r=Math.atan2(s[1],s[0]);const o=d(this,cf)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=d(this,zm)&&o.fontSubstitution||o.fontFamily;a=Lt.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),c=l*R(v=Lt,bi,mU).call(v,a,o,d(this,pc));let u,p;r===0?(u=s[4],p=s[5]-c):(u=s[4]+c*Math.sin(r),p=s[5]-c*Math.cos(r));const m="calc(var(--total-scale-factor) *",g=t.style;d(this,Kn)===d(this,af)?(g.left=`${(100*u/d(this,Gm)).toFixed(2)}%`,g.top=`${(100*p/d(this,jm)).toFixed(2)}%`):(g.left=`${m}${u.toFixed(2)}px)`,g.top=`${m}${p.toFixed(2)}px)`),g.fontSize=`${m}${(d(Lt,ba)*l).toFixed(2)}px)`,g.fontFamily=a,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,zm)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);S!==x&&Math.max(S,x)/Math.min(S,x)>1.5&&(w=!0)}if(w&&(i.canvasWidth=o.vertical?e.height:e.width),d(this,Wm).set(t,i),d(this,Yr).div=t,d(this,Yr).properties=i,R(this,Io,$E).call(this,d(this,Yr)),i.hasText&&d(this,Kn).append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),d(this,Kn).append(S)}},$E=function(e){var a;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let o="";if(d(Lt,ba)>1&&(o=`scale(${1/d(Lt,ba)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:u}=i;R(a=Lt,bi,VE).call(a,s,u*d(this,Aa),l);const{width:p}=s.measureText(t.textContent);p>0&&(o=`scaleX(${c*d(this,Aa)/p}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},bi=new WeakSet,Sv=function(e=null){let t=d(this,yc).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,yc).set(e,t),d(this,Ym).set(t,{size:0,family:""})}return t},VE=function(e,t,i){const s=d(this,Ym).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},pU=function(){if(d(this,ba)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),T(this,ba,e.getBoundingClientRect().height),e.remove()},mU=function(e,t,i){const s=d(this,df).get(e);if(s)return s;const r=R(this,bi,Sv).call(this,i);r.canvas.width=r.canvas.height=tM,R(this,bi,VE).call(this,r,tM,e);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return a?c=a/(a+l):(cn.platform.isFirefox&&Ce("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),d(this,df).set(e,c),c},b(Lt,bi),b(Lt,df,new Map),b(Lt,yc,new Map),b(Lt,Ym,new WeakMap),b(Lt,ba,null),b(Lt,ff,new Set);let em=Lt;class tm{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(tm.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const c of r.children)s(c)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Ine=100;function gU(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new BE,{docId:t}=e,i=n.url?Bte(n.url):null,s=n.data?Hte(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof yU?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof nm?n.worker:null;const p=n.verbosity,m=typeof n.docBaseUrl=="string"&&!uw(n.docBaseUrl)?n.docBaseUrl:null,g=Fy(n.cMapUrl),w=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Mn?Jte:zP),S=Fy(n.iccUrl),x=Fy(n.standardFontDataUrl),C=n.StandardFontDataFactory||(Mn?Xte:jP),_=Fy(n.wasmUrl),A=n.WasmFactory||(Mn?Qte:GP),P=n.stopAtErrors!==!0,M=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,I=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Mn,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Mn&&(cn.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:Mn,$=n.fontExtraProperties===!0,j=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,H=n.disableRange===!0,O=n.disableStream===!0,B=n.disableAutoFetch===!0,U=n.pdfBug===!0,F=n.CanvasFactory||(Mn?Yte:qte),z=n.FilterFactory||(Mn?Kte:Wte),te=n.enableHWA===!0,Y=n.useWasm!==!1,ie=l?l.length:n.length??NaN,he=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Mn&&!L,Re=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===zP&&C===jP&&A===GP&&g&&x&&_&&Qh(g,document.baseURI)&&Qh(x,document.baseURI)&&Qh(_,document.baseURI)),Pe=null;xte(p);const G={canvasFactory:new F({ownerDocument:V,enableHWA:te}),filterFactory:new z({docId:t,ownerDocument:V}),cMapReaderFactory:Re?null:new v({baseUrl:g,isCompressed:w}),standardFontDataFactory:Re?null:new C({baseUrl:x}),wasmFactory:Re?null:new A({baseUrl:_})};u||(u=nm.create({verbosity:p,port:cr.workerPort}),e._worker=u);const Te={docId:t,apiVersion:"5.3.93",data:s,password:a,disableAutoFetch:B,rangeChunkSize:c,length:ie,docBaseUrl:m,enableXfa:j,evaluatorOptions:{maxImageSize:M,disableFontFace:L,ignoreErrors:P,isEvalSupported:N,isOffscreenCanvasSupported:I,isImageDecoderSupported:k,canvasMaxAreaInBytes:D,fontExtraProperties:$,useSystemFonts:he,useWasm:Y,useWorkerFetch:Re,cMapUrl:g,iccUrl:S,standardFontDataUrl:x,wasmUrl:_}},Ie={ownerDocument:V,pdfBug:U,styleElement:Pe,loadingParams:{disableAutoFetch:B,enableXfa:j}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Me=u.messageHandler.sendWithPromise("GetDocRequest",Te,s?[s.buffer]:null);let Z;if(l)Z=new pne(l,{disableRange:H,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ne=Qh(i)?vne:Mn?Rne:Ene;Z=new ne({url:i,length:ie,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:H,disableStream:O})}return Me.then(ne=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Le=new ip(t,ne,u.port),pt=new Lne(Le,e,Z,Ie,G);e._transport=pt,Le.send("Ready",null)})}).catch(e._capability.reject),e}var Z0;const ex=class ex{constructor(){W(this,"_capability",Promise.withResolvers());W(this,"_transport",null);W(this,"_worker",null);W(this,"docId",`d${zt(ex,Z0)._++}`);W(this,"destroyed",!1);W(this,"onPassword",null);W(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,i,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Z0=new WeakMap,b(ex,Z0,0);let BE=ex;var vc,Jm,Xm,Qm,Zm;class yU{constructor(e,t,i=!1,s=null){b(this,vc,Promise.withResolvers());b(this,Jm,[]);b(this,Xm,[]);b(this,Qm,[]);b(this,Zm,[]);this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(e){d(this,Zm).push(e)}addProgressListener(e){d(this,Qm).push(e)}addProgressiveReadListener(e){d(this,Xm).push(e)}addProgressiveDoneListener(e){d(this,Jm).push(e)}onDataRange(e,t){for(const i of d(this,Zm))i(e,t)}onDataProgress(e,t){d(this,vc).promise.then(()=>{for(const i of d(this,Qm))i(e,t)})}onDataProgressiveRead(e){d(this,vc).promise.then(()=>{for(const t of d(this,Xm))t(e)})}onDataProgressiveDone(){d(this,vc).promise.then(()=>{for(const e of d(this,Jm))e()})}transportReady(){d(this,vc).resolve()}requestDataRange(e,t){Qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}vc=new WeakMap,Jm=new WeakMap,Xm=new WeakMap,Qm=new WeakMap,Zm=new WeakMap;class kne{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Jr,xc,lp;class Dne{constructor(e,t,i,s=!1){b(this,xc);b(this,Jr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new VP:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new dU,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new ty({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=Qo.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:p=!1}){var A,P;(A=this._stats)==null||A.time("Overall");const m=this._transport.getRenderingIntent(i,s,u,p),{renderingIntent:g,cacheKey:w}=m;T(this,Jr,!1),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(w);v||(v=Object.create(null),this._intentStates.set(w,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const S=!!(g&xi.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(m));const x=M=>{var N;v.renderTasks.delete(C),S&&T(this,Jr,!0),R(this,xc,lp).call(this),M?(C.capability.reject(M),this._abortOperatorList({intentState:v,reason:M instanceof Error?M:new Error(M)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new HE({callback:x,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(C);const _=C.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([M,N])=>{var I;if(this.destroyed){x();return}if((I=this._stats)==null||I.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:M,optionalContentConfig:N}),C.operatorListChanged()}).catch(x),_}getOperatorList({intent:e="display",annotationMode:t=Qo.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var c;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>tm.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:c}){if(c){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),T(this,Jr,!1),Promise.all(e)}cleanup(e=!1){T(this,Jr,!0);const t=R(this,xc,lp).call(this);return e&&t&&this._stats&&(this._stats=new VP),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&R(this,xc,lp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:p,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,c),u())},p=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();R(this,xc,lp).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(p);else if(c.opListReadCapability)c.opListReadCapability.reject(p);else throw p}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof IA){let s=Ine;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new dl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Jr=new WeakMap,xc=new WeakSet,lp=function(){if(!d(this,Jr)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Jr,!1),!0};var Ra,hs,Xr,wc,tx,Cc,Sc,Ln,Ev,vU,xU,cp,hf,_v;const lt=class lt{constructor({name:e=null,port:t=null,verbosity:i=wte()}={}){b(this,Ln);b(this,Ra,Promise.withResolvers());b(this,hs,null);b(this,Xr,null);b(this,wc,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(d(lt,Sc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(lt,Sc).set(t,this),R(this,Ln,vU).call(this,t)}else R(this,Ln,xU).call(this)}get promise(){return d(this,Ra).promise}get port(){return d(this,Xr)}get messageHandler(){return d(this,hs)}destroy(){var e,t;this.destroyed=!0,(e=d(this,wc))==null||e.terminate(),T(this,wc,null),d(lt,Sc).delete(d(this,Xr)),T(this,Xr,null),(t=d(this,hs))==null||t.destroy(),T(this,hs,null)}static create(e){const t=d(this,Sc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new lt(e)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return De(this,"_setupFakeWorkerGlobal",(async()=>d(this,hf,_v)?d(this,hf,_v):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ra=new WeakMap,hs=new WeakMap,Xr=new WeakMap,wc=new WeakMap,tx=new WeakMap,Cc=new WeakMap,Sc=new WeakMap,Ln=new WeakSet,Ev=function(){d(this,Ra).resolve(),d(this,hs).send("configure",{verbosity:this.verbosity})},vU=function(e){T(this,Xr,e),T(this,hs,new ip("main","worker",e)),d(this,hs).on("ready",()=>{}),R(this,Ln,Ev).call(this)},xU=function(){if(d(lt,Cc)||d(lt,hf,_v)){R(this,Ln,cp).call(this);return}let{workerSrc:e}=lt;try{lt._isSameOrigin(window.location,e)||(e=lt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ip("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?d(this,Ra).reject(new Error("Worker was destroyed")):R(this,Ln,cp).call(this)},r=new AbortController;t.addEventListener("error",()=>{d(this,wc)||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}T(this,hs,i),T(this,Xr,t),T(this,wc,t),R(this,Ln,Ev).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{R(this,Ln,cp).call(this)}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{cw("The worker has been disabled.")}R(this,Ln,cp).call(this)},cp=function(){d(lt,Cc)||(Ce("Setting up fake worker."),T(lt,Cc,!0)),lt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Ra).reject(new Error("Worker was destroyed"));return}const t=new Gte;T(this,Xr,t);const i=`fake${zt(lt,tx)._++}`,s=new ip(i+"_worker",i,t);e.setup(s,t),T(this,hs,new ip(i,i+"_worker",t)),R(this,Ln,Ev).call(this)}).catch(e=>{d(this,Ra).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},hf=new WeakSet,_v=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(lt,hf),b(lt,tx,0),b(lt,Cc,!1),b(lt,Sc,new WeakMap),Mn&&(T(lt,Cc,!0),cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),lt._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(t,i);return i.origin===s.origin},lt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},lt.fromPort=e=>{if(Ite("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return lt.create(e)};let nm=lt;var Qr,Zs,pf,mf,Zr,Ec,up;class Lne{constructor(e,t,i,s,r){b(this,Ec);b(this,Qr,new Map);b(this,Zs,new Map);b(this,pf,new Map);b(this,mf,new Map);b(this,Zr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new dU,this.fontLoader=new $te({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return De(this,"annotationStorage",new FA)}getRenderingIntent(e,t=Qo.ENABLE,i=null,s=!1,r=!1){let o=xi.DISPLAY,a=RE;switch(e){case"any":o=xi.ANY;break;case"display":break;case"print":o=xi.PRINT;break;default:Ce(`getRenderingIntent - invalid intent: ${e}`)}const l=o&xi.PRINT&&i instanceof YO?i:this.annotationStorage;switch(t){case Qo.DISABLE:o+=xi.ANNOTATIONS_DISABLE;break;case Qo.ENABLE:break;case Qo.ENABLE_FORMS:o+=xi.ANNOTATIONS_FORMS;break;case Qo.ENABLE_STORAGE:o+=xi.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ce(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=xi.IS_EDITING),r&&(o+=xi.OPLIST);const{ids:c,hash:u}=l.modifiedIds,p=[o,a.hash,u];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=d(this,Zr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of d(this,Zs).values())e.push(s._destroy());d(this,Zs).clear(),d(this,pf).clear(),d(this,mf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Qr).clear(),this.filterFactory.destroy(),em.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new dl("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{kt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}kt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(i,s)=>{kt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}kt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new kne(i,this))}),e.on("DocException",i=>{t._capability.reject(zn(i))}),e.on("PasswordRequest",i=>{T(this,Zr,Promise.withResolvers());try{if(!t.onPassword)throw zn(i);const s=r=>{r instanceof Error?d(this,Zr).reject(r):d(this,Zr).resolve({password:r})};t.onPassword(s,i.code)}catch(s){d(this,Zr).reject(s)}return d(this,Zr).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;d(this,Zs).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const u=r.error;Ce(`Error during font loading: ${u}`),this.commonObjs.resolve(i,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,p)=>globalThis.FontInspector.fontAdded(u,p):null,l=new Vte(r,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:c}=r;kt(c,"The imageRef must be defined.");for(const u of d(this,Zs).values())for(const[,p]of u.objs)if((p==null?void 0:p.ref)===c)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{var l;if(this.destroyed)return;const a=d(this,Zs).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=d(this,pf).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&d(this,mf).set(r.refStr,e);const o=new Dne(t,r,this,this._params.pdfBug);return d(this,Zs).set(t,o),o});return d(this,pf).set(t,s),s}getPageIndex(e){return PE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,Ec,up).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Ec,up).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,Ec,up).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,Ec,up).call(this,"GetOptionalContentConfig").then(t=>new hne(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,Qr).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new dne(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,Qr).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,Zs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Qr).clear(),this.filterFactory.destroy(!0),em.cleanup()}}cachedPageNumber(e){if(!PE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,mf).get(t)??null}}Qr=new WeakMap,Zs=new WeakMap,pf=new WeakMap,mf=new WeakMap,Zr=new WeakMap,Ec=new WeakSet,up=function(e,t=null){const i=d(this,Qr).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return d(this,Qr).set(e,s),s};var Pa;class Fne{constructor(e){b(this,Pa,null);W(this,"onContinue",null);W(this,"onError",null);T(this,Pa,e)}get promise(){return d(this,Pa).capability.promise}cancel(e=0){d(this,Pa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,Pa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,Pa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Pa=new WeakMap;var Ma,_c;const Il=class Il{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:p=!1,pageColors:m=null}){b(this,Ma,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Fne(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(Il,_c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Il,_c).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new Td(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),d(this,Ma)&&(window.cancelAnimationFrame(d(this,Ma)),T(this,Ma,null)),d(Il,_c).delete(this._canvas),e||(e=new IA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(s=this.task).onError)==null||r.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,Ma,window.requestAnimationFrame(()=>{T(this,Ma,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Il,_c).delete(this._canvas),this.callback())))}};Ma=new WeakMap,_c=new WeakMap,b(Il,_c,new WeakSet);let HE=Il;const One="5.3.93",Une="cbeef3233";function nM(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function $h(n){return Math.max(0,Math.min(255,255*n))}class iM{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=$h(e),[e,e,e]}static G_HTML([e]){const t=nM(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map($h)}static RGB_HTML(e){return`#${e.map(nM).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[$h(1-Math.min(1,e+s)),$h(1-Math.min(1,i+s)),$h(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class $ne{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Qe("Abstract method `_createSVG` called.")}}class U0 extends $ne{_createSVG(e){return document.createElementNS(Rr,e)}}class wU{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var p,m;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),a&&tm.shouldBuildText(s.name)&&c.push(g)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[g,w,v]=u.at(-1);if(w+1===g.children.length){u.pop();continue}const S=g.children[++u.at(-1)[1]];if(S===null)continue;const{name:x}=S;if(x==="#text"){const _=document.createTextNode(S.value);c.push(_),v.append(_);continue}const C=(p=S==null?void 0:S.attributes)!=null&&p.xmlns?document.createElementNS(S.attributes.xmlns,x):document.createElement(x);if(v.append(C),S.attributes&&this.setAttributes({html:C,element:S,storage:t,intent:r,linkService:i}),((m=S.children)==null?void 0:m.length)>0)u.push([S,-1,C]);else if(S.value){const _=document.createTextNode(S.value);a&&tm.shouldBuildText(x)&&c.push(_),C.append(_)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Vne=9,wu=new WeakSet;class sM{static create(e){switch(e.data.annotationType){case Pt.LINK:return new CU(e);case Pt.TEXT:return new Bne(e);case Pt.WIDGET:switch(e.data.fieldType){case"Tx":return new Hne(e);case"Btn":return e.data.radioButton?new _U(e):e.data.checkBox?new jne(e):new Gne(e);case"Ch":return new qne(e);case"Sig":return new zne(e)}return new Pu(e);case Pt.POPUP:return new jE(e);case Pt.FREETEXT:return new PU(e);case Pt.LINE:return new Kne(e);case Pt.SQUARE:return new Yne(e);case Pt.CIRCLE:return new Jne(e);case Pt.POLYLINE:return new MU(e);case Pt.CARET:return new Qne(e);case Pt.INK:return new $A(e);case Pt.POLYGON:return new Xne(e);case Pt.HIGHLIGHT:return new NU(e);case Pt.UNDERLINE:return new Zne(e);case Pt.SQUIGGLY:return new eie(e);case Pt.STRIKEOUT:return new tie(e);case Pt.STAMP:return new IU(e);case Pt.FILEATTACHMENT:return new nie(e);default:return new bt(e)}}}var Tc,gf,yf,eg,zE;const WA=class WA{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){b(this,eg);b(this,Tc,null);b(this,gf,!1);b(this,yf,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return WA._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;d(this,Tc)||T(this,Tc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,eg,zE).call(this,t),(i=d(this,yf))==null||i.popup.updateEdited(e)}resetEdited(){var e;d(this,Tc)&&(R(this,eg,zE).call(this,d(this,Tc).rect),(e=d(this,yf))==null||e.popup.resetEdited(),T(this,Tc,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Pu||(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof jE){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(v>0||S>0){const C=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof _U){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=C}switch(t.borderStyle.style){case Bu.SOLID:o.borderStyle="solid";break;case Bu.DASHED:o.borderStyle="dashed";break;case Bu.BEVELED:Ce("Unimplemented border style: beveled");break;case Bu.INSET:Ce("Unimplemented border style: inset");break;case Bu.UNDERLINE:o.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(T(this,gf,!0),o.borderColor=pe.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const c=pe.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:p,pageX:m,pageY:g}=s.rawDims;o.left=`${100*(c[0]-m)/u}%`,o.top=`${100*(c[1]-g)/p}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(o.width=`${100*a/u}%`,o.height=`${100*l/p}%`):this.setRotation(w,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/i}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[i]=iM[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:iM[`${o}_rgb`](a)})};return De(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,S,x,C]=e.subarray(2,6);if(s===v&&r===S&&t===x&&i===C)return}const{style:o}=this.container;let a;if(d(this,gf)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=s-t,c=r-i,{svgFactory:u}=this,p=u.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const m=u.createElement("defs");p.append(m);const g=u.createElement("clipPath"),w=`clippath_${this.data.id}`;g.setAttribute("id",w),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let v=2,S=e.length;v<S;v+=8){const x=e[v],C=e[v+1],_=e[v+2],A=e[v+3],P=u.createElement("rect"),M=(_-t)/l,N=(r-C)/c,I=(x-_)/l,k=(C-A)/c;P.setAttribute("x",M),P.setAttribute("y",N),P.setAttribute("width",I),P.setAttribute("height",k),g.append(P),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${N}" width="${I}" height="${k}"/>`)}d(this,gf)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=T(this,yf,new jE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!wu.has(c)){Ce(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:c})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&wu.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Tc=new WeakMap,gf=new WeakMap,yf=new WeakMap,eg=new WeakSet,zE=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...e),t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let bt=WA;var Ei,Rl,SU,EU;class CU extends bt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});b(this,Ei);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(R(this,Ei,SU).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(R(this,Ei,EU).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&R(this,Ei,Rl).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),R(this,Ei,Rl).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,Ei,Rl).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),R(this,Ei,Rl).call(this),!this._fieldObjects){Ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var p;s==null||s();const{fields:r,refs:o,include:a}=i,l=[];if(r.length!==0||o.length!==0){const m=new Set(o);for(const g of r){const w=this._fieldObjects[g]||[];for(const{id:v}of w)m.add(v)}for(const g of Object.values(this._fieldObjects))for(const w of g)m.has(w.id)===a&&l.push(w)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,u=[];for(const m of l){const{id:g}=m;switch(u.push(g),m.type){case"text":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;c.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";c.setValue(g,{value:v});break}default:continue}const w=document.querySelector(`[data-element-id="${g}"]`);if(w){if(!wu.has(w)){Ce(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Ei=new WeakSet,Rl=function(){this.container.setAttribute("data-internal-link","")},SU=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},R(this,Ei,Rl).call(this)},EU=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),R(this,Ei,Rl).call(this)};class Bne extends bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Pu extends bt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return cn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,i,s){var r,o,a;for(const[l,c]of i)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":pe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Vne,r=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(oC*s))||1,p=c/u;o=Math.min(s,l(p/oC))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/oC))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=pe.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Hne extends Pu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",c??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),wu.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const p=this.data.dateFormat||this.data.timeFormat;p&&(i.title=p),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(i,"value",g.target.value,"value"),u.formattedValue=null}),i.addEventListener("resetform",g=>{const w=this.data.defaultFieldValue??"";i.value=u.userValue=w,u.formattedValue=null});let m=g=>{const{formattedValue:w}=u;w!=null&&(g.target.value=w),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{var S;if(u.focused)return;const{target:v}=w;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(u.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const v={value(S){u.userValue=S.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),S.target.value=u.userValue},formattedValue(S){const{formattedValue:x}=S.detail;u.formattedValue=x,x!=null&&S.target!==document.activeElement&&(S.target.value=x),e.setValue(t,{formattedValue:x})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var A;const{charLimit:x}=S.detail,{target:C}=S;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let _=u.userValue;!_||_.length<=x||(_=_.slice(0,x),C.value=u.userValue=_,e.setValue(t,{value:_}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(v,w)}),i.addEventListener("keydown",w=>{var x;u.commitKey=1;let v=-1;if(w.key==="Escape"?v=0:w.key==="Enter"&&!this.data.multiLine?v=2:w.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:S}=w.target;u.lastCommittedValue!==S&&(u.lastCommittedValue=S,u.userValue=S,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:v,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const g=m;m=null,i.addEventListener("blur",w=>{var S,x;if(!u.focused||!w.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(u.focused=!1);const{value:v}=w.target;u.userValue=v,u.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),g(w)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",w=>{var M;u.lastCommittedValue=null;const{data:v,target:S}=w,{value:x,selectionStart:C,selectionEnd:_}=S;let A=C,P=_;switch(w.inputType){case"deleteWordBackward":{const N=x.substring(0,C).match(/\w*[^\w]*$/);N&&(A-=N[0].length);break}case"deleteWordForward":{const N=x.substring(C).match(/^[^\w]*\w*/);N&&(P+=N[0].length);break}case"deleteContentBackward":C===_&&(A-=1);break;case"deleteContentForward":C===_&&(P+=1);break}w.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:A,selEnd:P}})}),this._setEventListeners(i,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(m&&i.addEventListener("blur",m),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class zne extends Pu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class jne extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return wu.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class _U extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(wu.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const p of this._getElementsByName(c.target.name)){const m=u&&p.id===i;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Gne extends CU{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class qne extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");wu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const p=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===p});for(const u of this.data.options){const p=document.createElement("option");p.textContent=u.displayValue,p.value=u.exportValue,i.value.includes(u.exportValue)&&(p.setAttribute("selected",!0),r=!1),s.append(p)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const p=u?"value":"textContent",{options:m,multiple:g}=s;return g?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let l=a(!1);const c=u=>{const p=u.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const p={value(m){o==null||o();const g=m.detail.value,w=new Set(Array.isArray(g)?g:[g]);for(const v of s.options)v.selected=w.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(m){s.multiple=!0},remove(m){const g=s.options,w=m.detail.remove;g[w].selected=!1,s.remove(w),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},clear(m){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(m){const{index:g,displayValue:w,exportValue:v}=m.detail.insert,S=s.children[g],x=document.createElement("option");x.textContent=w,x.value=v,S?S.before(x):s.append(x),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},items(m){const{items:g}=m.detail;for(;s.length!==0;)s.remove(0);for(const w of g){const{displayValue:v,exportValue:S}=w,x=document.createElement("option");x.textContent=v,x.value=S,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},indices(m){const g=new Set(m.detail.indices);for(const w of m.target.options)w.selected=g.has(w.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,u)}),s.addEventListener("input",u=>{var g;const p=a(!0),m=a(!1);e.setValue(t,{value:p}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jE extends bt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:bt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Wne({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${NA}${s}`).join(",")),this.container}}var vf,nx,ix,xf,wf,St,eo,Ac,tg,ng,Cf,to,ps,no,ig,io,sg,bc,Rc,Ze,Tv,GE,TU,AU,bU,RU,Av,bv,qE;class Wne{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:p}){b(this,Ze);b(this,vf,R(this,Ze,bU).bind(this));b(this,nx,R(this,Ze,qE).bind(this));b(this,ix,R(this,Ze,bv).bind(this));b(this,xf,R(this,Ze,Av).bind(this));b(this,wf,null);b(this,St,null);b(this,eo,null);b(this,Ac,null);b(this,tg,null);b(this,ng,null);b(this,Cf,null);b(this,to,!1);b(this,ps,null);b(this,no,null);b(this,ig,null);b(this,io,null);b(this,sg,null);b(this,bc,null);b(this,Rc,!1);var m;T(this,St,e),T(this,sg,s),T(this,eo,o),T(this,io,a),T(this,ng,l),T(this,wf,t),T(this,ig,c),T(this,Cf,u),T(this,tg,i),T(this,Ac,DA.toDateObject(r)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",d(this,xf)),g.addEventListener("mouseenter",d(this,ix)),g.addEventListener("mouseleave",d(this,nx)),g.classList.add("popupTriggerArea");for(const g of i)(m=g.container)==null||m.addEventListener("keydown",d(this,vf));d(this,St).hidden=!0,p&&R(this,Ze,Av).call(this)}render(){if(d(this,ps))return;const e=T(this,ps,document.createElement("div"));if(e.className="popup",d(this,wf)){const r=e.style.outlineColor=pe.makeHexColor(...d(this,wf));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=d(this,sg),e.append(t),d(this,Ac)){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Ac).valueOf()})),r.dateTime=d(this,Ac).toISOString(),t.append(r)}const s=d(this,Ze,Tv);if(s)wU.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(d(this,eo));e.append(r)}d(this,St).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;d(this,bc)||T(this,bc,{contentsObj:d(this,eo),richText:d(this,io)}),e&&T(this,no,null),t&&(T(this,io,R(this,Ze,AU).call(this,t)),T(this,eo,null)),(i=d(this,ps))==null||i.remove(),T(this,ps,null)}resetEdited(){var e;d(this,bc)&&({contentsObj:zt(this,eo)._,richText:zt(this,io)._}=d(this,bc),T(this,bc,null),(e=d(this,ps))==null||e.remove(),T(this,ps,null),T(this,no,null))}forceHide(){T(this,Rc,this.isVisible),d(this,Rc)&&(d(this,St).hidden=!0)}maybeShow(){d(this,Rc)&&(d(this,ps)||R(this,Ze,bv).call(this),T(this,Rc,!1),d(this,St).hidden=!1)}get isVisible(){return d(this,St).hidden===!1}}vf=new WeakMap,nx=new WeakMap,ix=new WeakMap,xf=new WeakMap,wf=new WeakMap,St=new WeakMap,eo=new WeakMap,Ac=new WeakMap,tg=new WeakMap,ng=new WeakMap,Cf=new WeakMap,to=new WeakMap,ps=new WeakMap,no=new WeakMap,ig=new WeakMap,io=new WeakMap,sg=new WeakMap,bc=new WeakMap,Rc=new WeakMap,Ze=new WeakSet,Tv=function(){const e=d(this,io),t=d(this,eo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,io).html||null},GE=function(){var e,t,i;return((i=(t=(e=d(this,Ze,Tv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},TU=function(){var e,t,i;return((i=(t=(e=d(this,Ze,Tv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},AU=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:d(this,Ze,TU),fontSize:d(this,Ze,GE)?`calc(${d(this,Ze,GE)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},bU=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,to))&&R(this,Ze,Av).call(this)},RU=function(){if(d(this,no)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=d(this,ng);let o=!!d(this,Cf),a=o?d(this,Cf):d(this,ig);for(const w of d(this,tg))if(!a||pe.intersect(w.data.rect,a)!==null){a=w.data.rect,o=!0;break}const l=pe.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,p=l[0]+u,m=l[1];T(this,no,[100*(p-s)/t,100*(m-r)/i]);const{style:g}=d(this,St);g.left=`${d(this,no)[0]}%`,g.top=`${d(this,no)[1]}%`},Av=function(){T(this,to,!d(this,to)),d(this,to)?(R(this,Ze,bv).call(this),d(this,St).addEventListener("click",d(this,xf)),d(this,St).addEventListener("keydown",d(this,vf))):(R(this,Ze,qE).call(this),d(this,St).removeEventListener("click",d(this,xf)),d(this,St).removeEventListener("keydown",d(this,vf)))},bv=function(){d(this,ps)||this.render(),this.isVisible?d(this,to)&&d(this,St).classList.add("focused"):(R(this,Ze,RU).call(this),d(this,St).hidden=!1,d(this,St).style.zIndex=parseInt(d(this,St).style.zIndex)+1e3)},qE=function(){d(this,St).classList.remove("focused"),!(d(this,to)||!this.isVisible)&&(d(this,St).hidden=!0,d(this,St).style.zIndex=parseInt(d(this,St).style.zIndex)-1e3)};class PU extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=we.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var rg;class Kne extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,rg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=T(this,rg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}rg=new WeakMap;var og;class Yne extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,og,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=T(this,og,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,og)}addHighlightArea(){this.container.classList.add("highlightArea")}}og=new WeakMap;var ag;class Jne extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,ag,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=T(this,ag,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ag)}addHighlightArea(){this.container.classList.add("highlightArea")}}ag=new WeakMap;var lg;class MU extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,lg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:a}=this;if(!i)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let p=0,m=i.length;p<m;p+=2){const g=i[p]-t[0],w=t[3]-i[p+1];c.push(`${g},${w}`)}c=c.join(" ");const u=T(this,lg,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}lg=new WeakMap;class Xne extends MU{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Qne extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var cg,Pc,ug,WE;class $A extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,ug);b(this,cg,null);b(this,Pc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?we.HIGHLIGHT:we.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:c}=R(this,ug,WE).call(this,i,t),u=this.svgFactory.create(l,c,!0),p=T(this,cg,this.svgFactory.createElement("svg:g"));u.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let m=0,g=s.length;m<g;m++){const w=this.svgFactory.createElement(this.svgElementName);d(this,Pc).push(w),w.setAttribute("points",s[m].join(",")),p.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=d(this,cg);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let a=0,l=d(this,Pc).length;a<l;a++)d(this,Pc)[a].setAttribute("points",s[a].join(","));if(r){const{transform:a,width:l,height:c}=R(this,ug,WE).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Pc)}addHighlightArea(){this.container.classList.add("highlightArea")}}cg=new WeakMap,Pc=new WeakMap,ug=new WeakSet,WE=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class NU extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=we.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Zne extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class eie extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class tie extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class IU extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=we.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dg,fg,KE;class nie extends bt{constructor(t){var s;super(t,{isRenderable:!0});b(this,fg);b(this,dg,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",R(this,fg,KE).bind(this)),T(this,dg,s);const{isMac:r}=cn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&R(this,fg,KE).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return d(this,dg)}addHighlightArea(){this.container.classList.add("highlightArea")}}dg=new WeakMap,fg=new WeakSet,KE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hg,Mc,Na,pg,ml,JE,XE;const KA=class KA{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){b(this,ml);b(this,hg,null);b(this,Mc,null);b(this,Na,new Map);b(this,pg,null);this.div=e,T(this,hg,t),T(this,Mc,i),T(this,pg,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return d(this,Na).size>0}async render(e){var o;const{annotations:t}=e,i=this.div;vu(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new U0,annotationStorage:e.annotationStorage||new FA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Pt.POPUP;if(l){const p=s.get(a.id);if(!p)continue;r.elements=p}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const c=sM.create(r);if(!c.isRenderable)continue;if(!l&&a.popupRef){const p=s.get(a.popupRef);p?p.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await R(this,ml,JE).call(this,u,a.id,r.elements),c._isEditable&&(d(this,Na).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}R(this,ml,XE).call(this)}async addLinkAnnotations(e,t){const i={data:null,layer:this.div,linkService:t,svgFactory:new U0,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=KA._defaultBorderStyle),i.data=s;const r=sM.create(i);if(!r.isRenderable)continue;const o=r.render();await R(this,ml,JE).call(this,o,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,vu(t,{rotation:e.rotation}),R(this,ml,XE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Na).values())}getEditableAnnotation(e){return d(this,Na).get(e)}static get _defaultBorderStyle(){return De(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Bu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hg=new WeakMap,Mc=new WeakMap,Na=new WeakMap,pg=new WeakMap,ml=new WeakSet,JE=async function(e,t,i){var a,l;const s=e.firstChild||e,r=s.id=`${NA}${t}`,o=await((a=d(this,pg))==null?void 0:a.getAriaAttributes(r));if(o)for(const[c,u]of o)s.setAttribute(c,u);i?i.at(-1).container.after(e):(this.div.append(e),(l=d(this,hg))==null||l.moveElementInDOM(this.div,e,s,!1))},XE=function(){var t;if(!d(this,Mc))return;const e=this.div;for(const[i,s]of d(this,Mc)){const r=e.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const a=d(this,Na).get(i);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(i,r.id,s),a._hasNoCanvas=!1):a.canvas=s)}d(this,Mc).clear()};let YE=KA;const Vy=/\r\n?|\n/g;var ms,ci,mg,Nc,ui,Dt,kU,DU,LU,Rv,Eo,Pv,Mv,FU,ZE,OU;const et=class et extends nt{constructor(t){super({...t,name:"freeTextEditor"});b(this,Dt);b(this,ms);b(this,ci,"");b(this,mg,`${this.id}-editor`);b(this,Nc,null);b(this,ui);T(this,ms,t.color||et._defaultColor||nt._defaultLineColor),T(this,ui,t.fontSize||et._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=et.prototype,i=o=>o.isEmpty(),s=xu.TRANSLATE_SMALL,r=xu.TRANSLATE_BIG;return De(this,"_keyboardManager",new ny([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){nt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Oe.FREETEXT_SIZE:et._defaultFontSize=i;break;case Oe.FREETEXT_COLOR:et._defaultColor=i;break}}updateParams(t,i){switch(t){case Oe.FREETEXT_SIZE:R(this,Dt,kU).call(this,i);break;case Oe.FREETEXT_COLOR:R(this,Dt,DU).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,et._defaultFontSize],[Oe.FREETEXT_COLOR,et._defaultColor||nt._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,d(this,ui)],[Oe.FREETEXT_COLOR,d(this,ms)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-et._internalPadding*t,-(et._internalPadding+d(this,ui))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,Nc,new AbortController);const t=this._uiManager.combinedSignal(d(this,Nc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,mg)),this._isDraggable=!0,(t=d(this,Nc))==null||t.abort(),T(this,Nc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,ci),i=T(this,ci,R(this,Dt,LU).call(this).trimEnd());if(t===i)return;const s=r=>{if(T(this,ci,r),!r){this.remove();return}R(this,Dt,Mv).call(this),this._uiManager.rebuild(this),R(this,Dt,Rv).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),R(this,Dt,Rv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){et._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,mg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,ui)}px * var(--total-scale-factor))`,s.color=d(this,ms),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,p]=this.pageDimensions,[m,g]=this.pageTranslation;let w,v;switch(this.rotation){case 0:w=t+(a[0]-m)/u,v=i+this.height-(a[1]-g)/p;break;case 90:w=t+(a[0]-m)/u,v=i-(a[1]-g)/p,[l,c]=[c,-l];break;case 180:w=t-this.width+(a[0]-m)/u,v=i-(a[1]-g)/p,[l,c]=[-l,-c];break;case 270:w=t+(a[0]-m-this.height*p)/u,v=i+(a[1]-g-this.width*u)/p,[l,c]=[-c,l];break}this.setAt(w*r,v*o,l,c)}else this._moveAfterPaste(t,i);R(this,Dt,Mv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,v,S;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=R(w=et,Eo,ZE).call(w,i.getData("text")||"").replaceAll(Vy,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],p=[];if(l.nodeType===Node.TEXT_NODE){const x=l.parentElement;if(p.push(l.nodeValue.slice(c).replaceAll(Vy,"")),x!==this.editorDiv){let C=u;for(const _ of this.editorDiv.childNodes){if(_===x){C=p;continue}C.push(R(v=et,Eo,Pv).call(v,_))}}u.push(l.nodeValue.slice(0,c).replaceAll(Vy,""))}else if(l===this.editorDiv){let x=u,C=0;for(const _ of this.editorDiv.childNodes)C++===c&&(x=p),x.push(R(S=et,Eo,Pv).call(S,_))}T(this,ci,`${u.join(`
`)}${r}${p.join(`
`)}`),R(this,Dt,Mv).call(this);const m=new Range;let g=Math.sumPrecise(u.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const C=x.nodeValue.length;if(g<=C){m.setStart(x,g),m.setEnd(x,g);break}g-=C}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var a;let r=null;if(t instanceof PU){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:p,id:m,popupRef:g},textContent:w,textPosition:v,parent:{page:{pageNumber:S}}}=t;if(!w||w.length===0)return null;r=t={annotationType:we.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:v,pageIndex:S-1,rect:u.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:g}}const o=await super.deserialize(t,i,s);return T(o,ui,t.fontSize),T(o,ms,pe.makeHexColor(...t.color)),T(o,ci,R(a=et,Eo,ZE).call(a,t.value)),o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=et._internalPadding*this.parentScale,s=this.getRect(i,i),r=nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,ms)),o={annotationType:we.FREETEXT,color:r,fontSize:d(this,ui),value:R(this,Dt,FU).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!R(this,Dt,OU).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${d(this,ui)}px * var(--total-scale-factor))`,s.color=d(this,ms),i.replaceChildren();for(const o of d(this,ci).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const r=et._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:d(this,ci)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ms=new WeakMap,ci=new WeakMap,mg=new WeakMap,Nc=new WeakMap,ui=new WeakMap,Dt=new WeakSet,kU=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-d(this,ui))*this.parentScale),T(this,ui,r),R(this,Dt,Rv).call(this)},s=d(this,ui);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},DU=function(t){const i=r=>{T(this,ms,this.editorDiv.style.color=r)},s=d(this,ms);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},LU=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(R(s=et,Eo,Pv).call(s,r)),i=r);return t.join(`
`)},Rv=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},Eo=new WeakSet,Pv=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Vy,"")},Mv=function(){if(this.editorDiv.replaceChildren(),!!d(this,ci))for(const t of d(this,ci).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},FU=function(){return d(this,ci).replaceAll(""," ")},ZE=function(t){return t.replaceAll(" ","")},OU=function(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((a,l)=>a!==r[l])||t.pageIndex!==o},b(et,Eo),W(et,"_freeTextDefaultContent",""),W(et,"_internalPadding",0),W(et,"_defaultColor",null),W(et,"_defaultFontSize",10),W(et,"_type","freetext"),W(et,"_editorType",we.FREETEXT);let QE=et;class re{toSVGPath(){Qe("Abstract method `toSVGPath` must be implemented.")}get box(){Qe("Abstract getter `box` must be implemented.")}serialize(e,t){Qe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,s,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*s,o[a+1]=i+e[a+1]*r;return o}static _rescaleAndSwap(e,t,i,s,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*s,o[a+1]=i+e[a]*r;return o}static _translate(e,t,i,s){s||(s=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)s[r]=t+e[r],s[r+1]=i+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,s,r){switch(r){case 90:return[1-t/i,e/s];case 180:return[1-e/i,1-t/s];case 270:return[t/i,1-e/s];default:return[e/i,t/s]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,s,r,o){return[(e+5*i)/6,(t+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}W(re,"PRECISION",1e-4);var di,gs,Sf,Ef,er,Ne,Ic,kc,gg,yg,_f,Tf,Ia,vg,sx,rx,Ht,dp,UU,$U,VU,BU,HU,zU;const kr=class kr{constructor({x:e,y:t},i,s,r,o,a=0){b(this,Ht);b(this,di);b(this,gs,[]);b(this,Sf);b(this,Ef);b(this,er,[]);b(this,Ne,new Float32Array(18));b(this,Ic);b(this,kc);b(this,gg);b(this,yg);b(this,_f);b(this,Tf);b(this,Ia,[]);T(this,di,i),T(this,Tf,r*s),T(this,Ef,o),d(this,Ne).set([NaN,NaN,NaN,NaN,e,t],6),T(this,Sf,a),T(this,yg,d(kr,vg)*s),T(this,gg,d(kr,rx)*s),T(this,_f,s),d(this,Ia).push(e,t)}isEmpty(){return isNaN(d(this,Ne)[8])}add({x:e,y:t}){var k;T(this,Ic,e),T(this,kc,t);const[i,s,r,o]=d(this,di);let[a,l,c,u]=d(this,Ne).subarray(8,12);const p=e-c,m=t-u,g=Math.hypot(p,m);if(g<d(this,gg))return!1;const w=g-d(this,yg),v=w/g,S=v*p,x=v*m;let C=a,_=l;a=c,l=u,c+=S,u+=x,(k=d(this,Ia))==null||k.push(e,t);const A=-x/w,P=S/w,M=A*d(this,Tf),N=P*d(this,Tf);return d(this,Ne).set(d(this,Ne).subarray(2,8),0),d(this,Ne).set([c+M,u+N],4),d(this,Ne).set(d(this,Ne).subarray(14,18),12),d(this,Ne).set([c-M,u-N],16),isNaN(d(this,Ne)[6])?(d(this,er).length===0&&(d(this,Ne).set([a+M,l+N],2),d(this,er).push(NaN,NaN,NaN,NaN,(a+M-i)/r,(l+N-s)/o),d(this,Ne).set([a-M,l-N],14),d(this,gs).push(NaN,NaN,NaN,NaN,(a-M-i)/r,(l-N-s)/o)),d(this,Ne).set([C,_,a,l,c,u],6),!this.isEmpty()):(d(this,Ne).set([C,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,C-a)-Math.atan2(x,S))<Math.PI/2?([a,l,c,u]=d(this,Ne).subarray(2,6),d(this,er).push(NaN,NaN,NaN,NaN,((a+c)/2-i)/r,((l+u)/2-s)/o),[a,l,C,_]=d(this,Ne).subarray(14,18),d(this,gs).push(NaN,NaN,NaN,NaN,((C+a)/2-i)/r,((_+l)/2-s)/o),!0):([C,_,a,l,c,u]=d(this,Ne).subarray(0,6),d(this,er).push(((C+5*a)/6-i)/r,((_+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),[c,u,a,l,C,_]=d(this,Ne).subarray(12,18),d(this,gs).push(((C+5*a)/6-i)/r,((_+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,er),t=d(this,gs);if(isNaN(d(this,Ne)[6])&&!this.isEmpty())return R(this,Ht,UU).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);R(this,Ht,VU).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return R(this,Ht,$U).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,o){return new jU(e,t,i,s,r,o)}getOutlines(){var p;const e=d(this,er),t=d(this,gs),i=d(this,Ne),[s,r,o,a]=d(this,di),l=new Float32Array((((p=d(this,Ia))==null?void 0:p.length)??0)+2);for(let m=0,g=l.length-2;m<g;m+=2)l[m]=(d(this,Ia)[m]-s)/o,l[m+1]=(d(this,Ia)[m+1]-r)/a;if(l[l.length-2]=(d(this,Ic)-s)/o,l[l.length-1]=(d(this,kc)-r)/a,isNaN(i[6])&&!this.isEmpty())return R(this,Ht,BU).call(this,l);const c=new Float32Array(d(this,er).length+24+d(this,gs).length);let u=e.length;for(let m=0;m<u;m+=2){if(isNaN(e[m])){c[m]=c[m+1]=NaN;continue}c[m]=e[m],c[m+1]=e[m+1]}u=R(this,Ht,zU).call(this,c,u);for(let m=t.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(t[m+g])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[m+g],c[u+1]=t[m+g+1],u+=2}return R(this,Ht,HU).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,di),d(this,_f),d(this,Sf),d(this,Ef))}};di=new WeakMap,gs=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,er=new WeakMap,Ne=new WeakMap,Ic=new WeakMap,kc=new WeakMap,gg=new WeakMap,yg=new WeakMap,_f=new WeakMap,Tf=new WeakMap,Ia=new WeakMap,vg=new WeakMap,sx=new WeakMap,rx=new WeakMap,Ht=new WeakSet,dp=function(){const e=d(this,Ne).subarray(4,6),t=d(this,Ne).subarray(16,18),[i,s,r,o]=d(this,di);return[(d(this,Ic)+(e[0]-t[0])/2-i)/r,(d(this,kc)+(e[1]-t[1])/2-s)/o,(d(this,Ic)+(t[0]-e[0])/2-i)/r,(d(this,kc)+(t[1]-e[1])/2-s)/o]},UU=function(){const[e,t,i,s]=d(this,di),[r,o,a,l]=R(this,Ht,dp).call(this);return`M${(d(this,Ne)[2]-e)/i} ${(d(this,Ne)[3]-t)/s} L${(d(this,Ne)[4]-e)/i} ${(d(this,Ne)[5]-t)/s} L${r} ${o} L${a} ${l} L${(d(this,Ne)[16]-e)/i} ${(d(this,Ne)[17]-t)/s} L${(d(this,Ne)[14]-e)/i} ${(d(this,Ne)[15]-t)/s} Z`},$U=function(e){const t=d(this,gs);e.push(`L${t[4]} ${t[5]} Z`)},VU=function(e){const[t,i,s,r]=d(this,di),o=d(this,Ne).subarray(4,6),a=d(this,Ne).subarray(16,18),[l,c,u,p]=R(this,Ht,dp).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-i)/r} L${l} ${c} L${u} ${p} L${(a[0]-t)/s} ${(a[1]-i)/r}`)},BU=function(e){const t=d(this,Ne),[i,s,r,o]=d(this,di),[a,l,c,u]=R(this,Ht,dp).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(p,e,d(this,di),d(this,_f),d(this,Sf),d(this,Ef))},HU=function(e,t){const i=d(this,gs);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},zU=function(e,t){const i=d(this,Ne).subarray(4,6),s=d(this,Ne).subarray(16,18),[r,o,a,l]=d(this,di),[c,u,p,m]=R(this,Ht,dp).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l],t),t+=24},b(kr,vg,8),b(kr,sx,2),b(kr,rx,d(kr,vg)+d(kr,sx));let $0=kr;var Af,Dc,so,xg,fi,wg,Tt,ox,GU;class jU extends re{constructor(t,i,s,r,o,a){super();b(this,ox);b(this,Af);b(this,Dc,new Float32Array(4));b(this,so);b(this,xg);b(this,fi);b(this,wg);b(this,Tt);T(this,Tt,t),T(this,fi,i),T(this,Af,s),T(this,wg,r),T(this,so,o),T(this,xg,a),this.lastPoint=[NaN,NaN],R(this,ox,GU).call(this,a);const[l,c,u,p]=d(this,Dc);for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-l)/u,t[m+1]=(t[m+1]-c)/p;for(let m=0,g=i.length;m<g;m+=2)i[m]=(i[m]-l)/u,i[m+1]=(i[m+1]-c)/p}toSVGPath(){const t=[`M${d(this,Tt)[4]} ${d(this,Tt)[5]}`];for(let i=6,s=d(this,Tt).length;i<s;i+=6){if(isNaN(d(this,Tt)[i])){t.push(`L${d(this,Tt)[i+4]} ${d(this,Tt)[i+5]}`);continue}t.push(`C${d(this,Tt)[i]} ${d(this,Tt)[i+1]} ${d(this,Tt)[i+2]} ${d(this,Tt)[i+3]} ${d(this,Tt)[i+4]} ${d(this,Tt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const a=s-t,l=r-i;let c,u;switch(o){case 0:c=re._rescale(d(this,Tt),t,r,a,-l),u=re._rescale(d(this,fi),t,r,a,-l);break;case 90:c=re._rescaleAndSwap(d(this,Tt),t,i,a,l),u=re._rescaleAndSwap(d(this,fi),t,i,a,l);break;case 180:c=re._rescale(d(this,Tt),s,i,-a,l),u=re._rescale(d(this,fi),s,i,-a,l);break;case 270:c=re._rescaleAndSwap(d(this,Tt),s,r,-a,-l),u=re._rescaleAndSwap(d(this,fi),s,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,Dc)}newOutliner(t,i,s,r,o,a=0){return new $0(t,i,s,r,o,a)}getNewOutline(t,i){const[s,r,o,a]=d(this,Dc),[l,c,u,p]=d(this,Af),m=o*u,g=a*p,w=s*u+l,v=r*p+c,S=this.newOutliner({x:d(this,fi)[0]*m+w,y:d(this,fi)[1]*g+v},d(this,Af),d(this,wg),t,d(this,xg),i??d(this,so));for(let x=2;x<d(this,fi).length;x+=2)S.add({x:d(this,fi)[x]*m+w,y:d(this,fi)[x+1]*g+v});return S.getOutlines()}}Af=new WeakMap,Dc=new WeakMap,so=new WeakMap,xg=new WeakMap,fi=new WeakMap,wg=new WeakMap,Tt=new WeakMap,ox=new WeakSet,GU=function(t){const i=d(this,Tt);let s=i[4],r=i[5];const o=[s,r,s,r];let a=s,l=r;const c=t?Math.max:Math.min;for(let p=6,m=i.length;p<m;p+=6){const g=i[p+4],w=i[p+5];if(isNaN(i[p]))pe.pointBoundingBox(g,w,o),l<w?(a=g,l=w):l===w&&(a=c(a,g));else{const v=[1/0,1/0,-1/0,-1/0];pe.bezierBoundingBox(s,r,...i.slice(p,p+6),v),pe.rectBoundingBox(...v,o),l<v[3]?(a=v[2],l=v[3]):l===v[3]&&(a=c(a,v[2]))}s=g,r=w}const u=d(this,Dc);u[0]=o[0]-d(this,so),u[1]=o[1]-d(this,so),u[2]=o[2]-o[0]+2*d(this,so),u[3]=o[3]-o[1]+2*d(this,so),this.lastPoint=[a,l]};var Cg,Sg,ka,ys,On,qU,Nv,WU,KU,t_;class e_{constructor(e,t=0,i=0,s=!0){b(this,On);b(this,Cg);b(this,Sg);b(this,ka,[]);b(this,ys,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:w,width:v,height:S}of e){const x=Math.floor((g-t)/o)*o,C=Math.ceil((g+v+t)/o)*o,_=Math.floor((w-t)/o)*o,A=Math.ceil((w+S+t)/o)*o,P=[x,_,A,!0],M=[C,_,A,!1];d(this,ka).push(P,M),pe.rectBoundingBox(x,_,C,A,r)}const a=r[2]-r[0]+2*i,l=r[3]-r[1]+2*i,c=r[0]-i,u=r[1]-i,p=d(this,ka).at(s?-1:-2),m=[p[0],p[2]];for(const g of d(this,ka)){const[w,v,S]=g;g[0]=(w-c)/a,g[1]=(v-u)/l,g[2]=(S-u)/l}T(this,Cg,new Float32Array([c,u,a,l])),T(this,Sg,m)}getOutlines(){d(this,ka).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of d(this,ka))t[3]?(e.push(...R(this,On,t_).call(this,t)),R(this,On,WU).call(this,t)):(R(this,On,KU).call(this,t),e.push(...R(this,On,t_).call(this,t)));return R(this,On,qU).call(this,e)}}Cg=new WeakMap,Sg=new WeakMap,ka=new WeakMap,ys=new WeakMap,On=new WeakSet,qU=function(e){const t=[],i=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,l,c,u,p]=o;i.delete(o);let m=a,g=l;for(r=[a,c],s.push(r);;){let w;if(i.has(u))w=u;else if(i.has(p))w=p;else break;i.delete(w),[a,l,c,u,p]=w,m!==a&&(r.push(m,g,a,g===l?l:c),m=a),g=g===l?c:l}r.push(m,g)}return new iie(s,d(this,Cg),d(this,Sg))},Nv=function(e){const t=d(this,ys);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1},WU=function([,e,t]){const i=R(this,On,Nv).call(this,e);d(this,ys).splice(i,0,[e,t])},KU=function([,e,t]){const i=R(this,On,Nv).call(this,e);for(let s=i;s<d(this,ys).length;s++){const[r,o]=d(this,ys)[s];if(r!==e)break;if(r===e&&o===t){d(this,ys).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=d(this,ys)[s];if(r!==e)break;if(r===e&&o===t){d(this,ys).splice(s,1);return}}},t_=function(e){const[t,i,s]=e,r=[[t,i,s]],o=R(this,On,Nv).call(this,s);for(let a=0;a<o;a++){const[l,c]=d(this,ys)[a];for(let u=0,p=r.length;u<p;u++){const[,m,g]=r[u];if(!(c<=m||g<=l)){if(m>=l){if(g>c)r[u][1]=c;else{if(p===1)return[];r.splice(u,1),u--,p--}continue}r[u][2]=l,g>c&&r.push([t,c,g])}}}return r};var Eg,bf;class iie extends re{constructor(t,i,s){super();b(this,Eg);b(this,bf);T(this,bf,t),T(this,Eg,i),this.lastPoint=s}toSVGPath(){const t=[];for(const i of d(this,bf)){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===s?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const a=[],l=s-t,c=r-i;for(const u of d(this,bf)){const p=new Array(u.length);for(let m=0;m<u.length;m+=2)p[m]=t+u[m]*l,p[m+1]=r-u[m+1]*c;a.push(p)}return a}get box(){return d(this,Eg)}get classNamesForOutlining(){return["highlightOutline"]}}Eg=new WeakMap,bf=new WeakMap;class n_ extends $0{newFreeDrawOutline(e,t,i,s,r,o){return new sie(e,t,i,s,r,o)}}class sie extends jU{newOutliner(e,t,i,s,r,o=0){return new n_(e,t,i,s,r,o)}}var hi,Lc,Rf,Ut,_g,Pf,ro,Tg,Da,vs,Mf,Ag,Xe,i_,s_,r_,Pl,YU,Go;const jn=class jn{constructor({editor:e=null,uiManager:t=null}){b(this,Xe);b(this,hi,null);b(this,Lc,null);b(this,Rf);b(this,Ut,null);b(this,_g,!1);b(this,Pf,!1);b(this,ro,null);b(this,Tg);b(this,Da,null);b(this,vs,null);b(this,Mf);var i,s;e?(T(this,Pf,!1),T(this,Mf,Oe.HIGHLIGHT_COLOR),T(this,ro,e)):(T(this,Pf,!0),T(this,Mf,Oe.HIGHLIGHT_DEFAULT_COLOR)),T(this,vs,(e==null?void 0:e._uiManager)||t),T(this,Tg,d(this,vs)._eventBus),T(this,Rf,((i=e==null?void 0:e.color)==null?void 0:i.toUpperCase())||((s=d(this,vs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(jn,Ag)||T(jn,Ag,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return De(this,"_keyboardManager",new ny([[["Escape","mac+Escape"],jn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],jn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],jn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],jn.prototype._moveToPrevious],[["Home","mac+Home"],jn.prototype._moveToBeginning],[["End","mac+End"],jn.prototype._moveToEnd]]))}renderButton(){const e=T(this,hi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,ro)&&(e.ariaControls=`${d(this,ro).id}_colorpicker_dropdown`);const t=d(this,vs)._signal;e.addEventListener("click",R(this,Xe,Pl).bind(this),{signal:t}),e.addEventListener("keydown",R(this,Xe,r_).bind(this),{signal:t});const i=T(this,Lc,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=d(this,Rf),e.append(i),e}renderMainDropdown(){const e=T(this,Ut,R(this,Xe,i_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,hi)){R(this,Xe,Pl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,Xe,s_).call(this,t,e)}_moveToNext(e){var t,i;if(!d(this,Xe,Go)){R(this,Xe,Pl).call(this,e);return}if(e.target===d(this,hi)){(t=d(this,Ut).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=d(this,Ut))==null?void 0:t.firstChild)||e.target===d(this,hi)){d(this,Xe,Go)&&this._hideDropdownFromKeyboard();return}d(this,Xe,Go)||R(this,Xe,Pl).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!d(this,Xe,Go)){R(this,Xe,Pl).call(this,e);return}(t=d(this,Ut).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Xe,Go)){R(this,Xe,Pl).call(this,e);return}(t=d(this,Ut).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Ut))==null||e.classList.add("hidden"),d(this,hi).ariaExpanded="false",(t=d(this,Da))==null||t.abort(),T(this,Da,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Pf)){if(!d(this,Xe,Go)){(e=d(this,ro))==null||e.unselect();return}this.hideDropdown(),d(this,hi).focus({preventScroll:!0,focusVisible:d(this,_g)})}}updateColor(e){if(d(this,Lc)&&(d(this,Lc).style.backgroundColor=e),!d(this,Ut))return;const t=d(this,vs).highlightColors.values();for(const i of d(this,Ut).children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,hi))==null||e.remove(),T(this,hi,null),T(this,Lc,null),(t=d(this,Ut))==null||t.remove(),T(this,Ut,null)}};hi=new WeakMap,Lc=new WeakMap,Rf=new WeakMap,Ut=new WeakMap,_g=new WeakMap,Pf=new WeakMap,ro=new WeakMap,Tg=new WeakMap,Da=new WeakMap,vs=new WeakMap,Mf=new WeakMap,Ag=new WeakMap,Xe=new WeakSet,i_=function(){const e=document.createElement("div"),t=d(this,vs)._signal;e.addEventListener("contextmenu",Is,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,ro)&&(e.id=`${d(this,ro).id}_colorpicker_dropdown`);for(const[i,s]of d(this,vs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",d(jn,Ag)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===d(this,Rf),r.addEventListener("click",R(this,Xe,s_).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",R(this,Xe,r_).bind(this),{signal:t}),e},s_=function(e,t){t.stopPropagation(),d(this,Tg).dispatch("switchannotationeditorparams",{source:this,type:d(this,Mf),value:e})},r_=function(e){jn._keyboardManager.exec(this,e)},Pl=function(e){if(d(this,Xe,Go)){this.hideDropdown();return}if(T(this,_g,e.detail===0),d(this,Da)||(T(this,Da,new AbortController),window.addEventListener("pointerdown",R(this,Xe,YU).bind(this),{signal:d(this,vs).combinedSignal(d(this,Da))})),d(this,hi).ariaExpanded="true",d(this,Ut)){d(this,Ut).classList.remove("hidden");return}const t=T(this,Ut,R(this,Xe,i_).call(this));d(this,hi).append(t)},YU=function(e){var t;(t=d(this,Ut))!=null&&t.contains(e.target)||this.hideDropdown()},Go=function(){return d(this,Ut)&&!d(this,Ut).classList.contains("hidden")},b(jn,Ag,null);let V0=jn;var Nf,bg,oo,Fc,Rg,Yn,Pg,Mg,Oc,$i,pi,nn,If,ao,xn,kf,Vi,Ng,Ee,o_,Iv,JU,XU,QU,a_,Ml,ji,qu,ZU,kv,fp,e$,t$,n$,i$,s$;const ze=class ze extends nt{constructor(t){super({...t,name:"highlightEditor"});b(this,Ee);b(this,Nf,null);b(this,bg,0);b(this,oo);b(this,Fc,null);b(this,Rg,null);b(this,Yn,null);b(this,Pg,null);b(this,Mg,0);b(this,Oc,null);b(this,$i,null);b(this,pi,null);b(this,nn,!1);b(this,If,null);b(this,ao);b(this,xn,null);b(this,kf,"");b(this,Vi);b(this,Ng,"");this.color=t.color||ze._defaultColor,T(this,Vi,t.thickness||ze._defaultThickness),T(this,ao,t.opacity||ze._defaultOpacity),T(this,oo,t.boxes||null),T(this,Ng,t.methodOfCreation||""),T(this,kf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(T(this,nn,!0),R(this,Ee,Iv).call(this,t),R(this,Ee,Ml).call(this)):d(this,oo)&&(T(this,Nf,t.anchorNode),T(this,bg,t.anchorOffset),T(this,Pg,t.focusNode),T(this,Mg,t.focusOffset),R(this,Ee,o_).call(this),R(this,Ee,Ml).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ze.prototype;return De(this,"_keyboardManager",new ny([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,nn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Vi),methodOfCreation:d(this,Ng)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;nt.initialize(t,i),ze._defaultColor||(ze._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Oe.HIGHLIGHT_DEFAULT_COLOR:ze._defaultColor=i;break;case Oe.HIGHLIGHT_THICKNESS:ze._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return d(this,If)}updateParams(t,i){switch(t){case Oe.HIGHLIGHT_COLOR:R(this,Ee,JU).call(this,i);break;case Oe.HIGHLIGHT_THICKNESS:R(this,Ee,XU).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_DEFAULT_COLOR,ze._defaultColor],[Oe.HIGHLIGHT_THICKNESS,ze._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||ze._defaultColor],[Oe.HIGHLIGHT_THICKNESS,d(this,Vi)||ze._defaultThickness],[Oe.HIGHLIGHT_FREE,d(this,nn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",T(this,Rg,new V0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Ee,fp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,R(this,Ee,fp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){R(this,Ee,a_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Ee,Ml).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?R(this,Ee,a_).call(this):t&&(R(this,Ee,Ml).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,o,a;const{drawLayer:i}=this.parent;let s;d(this,nn)?(t=(t-this.rotation+360)%360,s=R(r=ze,ji,qu).call(r,d(this,$i).box,t)):s=R(o=ze,ji,qu).call(o,[this.x,this.y,this.width,this.height],t),i.updateProperties(d(this,pi),{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(d(this,xn),{bbox:R(a=ze,ji,qu).call(a,d(this,Yn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,kf)&&(t.setAttribute("aria-label",d(this,kf)),t.setAttribute("role","mark")),d(this,nn)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,Ee,ZU).bind(this),{signal:this._uiManager._signal});const i=T(this,Oc,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=d(this,Fc);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),EO(this,d(this,Oc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,xn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,xn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,Ee,kv).call(this,!0);break;case 1:case 3:R(this,Ee,kv).call(this,!1);break}}select(){var t;super.select(),d(this,xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,xn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,xn),{rootClass:{selected:!1}}),d(this,nn)||R(this,Ee,kv).call(this,!1))}get _mustFixPosition(){return!d(this,nn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,pi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,xn),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),g=w=>{p.abort(),R(this,ji,i$).call(this,t,w)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",Nt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Is,{signal:m}),s.addEventListener("pointermove",R(this,ji,n$).bind(this,t),{signal:m}),this._freeHighlight=new n_({x:r,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,s){var v,S,x,C;let r=null;if(t instanceof NU){const{data:{quadPoints:_,rect:A,rotation:P,id:M,color:N,opacity:I,popupRef:k},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:we.HIGHLIGHT,color:Array.from(N),opacity:I,quadPoints:_,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:P,annotationElementId:M,id:M,deleted:!1,popupRef:k}}else if(t instanceof $A){const{data:{inkLists:_,rect:A,rotation:P,id:M,color:N,borderStyle:{rawWidth:I},popupRef:k},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:we.HIGHLIGHT,color:Array.from(N),thickness:I,inkLists:_,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:P,annotationElementId:M,id:M,deleted:!1,popupRef:k}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,i,s);u.color=pe.makeHexColor(...o),T(u,ao,c||1),l&&T(u,Vi,t.thickness),u._initialData=r;const[p,m]=u.pageDimensions,[g,w]=u.pageTranslation;if(a){const _=T(u,oo,[]);for(let A=0;A<a.length;A+=8)_.push({x:(a[A]-g)/p,y:1-(a[A+1]-w)/m,width:(a[A+2]-a[A])/p,height:(a[A+1]-a[A+5])/m});R(v=u,Ee,o_).call(v),R(S=u,Ee,Ml).call(S),u.rotate(u.rotation)}else if(l){T(u,nn,!0);const _=l[0],A={x:_[0]-g,y:m-(_[1]-w)},P=new n_(A,[0,0,p,m],1,d(u,Vi)/2,!0,.001);for(let I=0,k=_.length;I<k;I+=2)A.x=_[I]-g,A.y=m-(_[I+1]-w),P.add(A);const{id:M,clipPathId:N}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:P.toSVGPath()}},!0,!0);R(x=u,Ee,Iv).call(x,{highlightOutlines:P.getOutlines(),highlightId:M,clipPathId:N}),R(C=u,Ee,Ml).call(C),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=nt._colorManager.convert(this.color),r={annotationType:we.HIGHLIGHT,color:s,opacity:d(this,ao),thickness:d(this,Vi),quadPoints:R(this,Ee,e$).call(this),outlines:R(this,Ee,t$).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:R(this,Ee,fp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,Ee,s$).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Nf=new WeakMap,bg=new WeakMap,oo=new WeakMap,Fc=new WeakMap,Rg=new WeakMap,Yn=new WeakMap,Pg=new WeakMap,Mg=new WeakMap,Oc=new WeakMap,$i=new WeakMap,pi=new WeakMap,nn=new WeakMap,If=new WeakMap,ao=new WeakMap,xn=new WeakMap,kf=new WeakMap,Vi=new WeakMap,Ng=new WeakMap,Ee=new WeakSet,o_=function(){const t=new e_(d(this,oo),.001);T(this,$i,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,$i).box;const i=new e_(d(this,oo),.0025,.001,this._uiManager.direction==="ltr");T(this,Yn,i.getOutlines());const{lastPoint:s}=d(this,Yn);T(this,If,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Iv=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var p,m;if(T(this,$i,t),T(this,Yn,t.getNewOutline(d(this,Vi)/2+1.5,.0025)),i>=0)T(this,pi,i),T(this,Fc,s),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),T(this,xn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,Yn).box,path:{d:d(this,Yn).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,pi),{bbox:R(p=ze,ji,qu).call(p,d(this,$i).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,xn),{bbox:R(m=ze,ji,qu).call(m,d(this,Yn).box,g),path:{d:d(this,Yn).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[g,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*w/g,this.height=c*g/w;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[g,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*w/g,this.height=c*g/w;break}}const{lastPoint:u}=d(this,Yn);T(this,If,[(u[0]-o)/l,(u[1]-a)/c])},JU=function(t){const i=(o,a)=>{var l,c;this.color=o,T(this,ao,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,pi),{root:{fill:o,"fill-opacity":a}}),(c=d(this,Rg))==null||c.updateColor(o)},s=this.color,r=d(this,ao);this.addCommands({cmd:i.bind(this,t,ze._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},XU=function(t){const i=d(this,Vi),s=r=>{T(this,Vi,r),R(this,Ee,QU).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},QU=function(t){if(!d(this,nn))return;R(this,Ee,Iv).call(this,{highlightOutlines:d(this,$i).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},a_=function(){d(this,pi)===null||!this.parent||(this.parent.drawLayer.remove(d(this,pi)),T(this,pi,null),this.parent.drawLayer.remove(d(this,xn)),T(this,xn,null))},Ml=function(t=this.parent){d(this,pi)===null&&({id:zt(this,pi)._,clipPathId:zt(this,Fc)._}=t.drawLayer.draw({bbox:d(this,$i).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,ao)},rootClass:{highlight:!0,free:d(this,nn)},path:{d:d(this,$i).toSVGPath()}},!1,!0),T(this,xn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,nn)},bbox:d(this,Yn).box,path:{d:d(this,Yn).toSVGPath()}},d(this,nn))),d(this,Oc)&&(d(this,Oc).style.clipPath=d(this,Fc)))},ji=new WeakSet,qu=function([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]},ZU=function(t){ze._keyboardManager.exec(this,t)},kv=function(t){if(!d(this,Nf))return;const i=window.getSelection();t?i.setPosition(d(this,Nf),d(this,bg)):i.setPosition(d(this,Pg),d(this,Mg))},fp=function(){return d(this,nn)?this.rotation:0},e$=function(){if(d(this,nn))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=d(this,oo),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:p,height:m}of o){const g=c*t+s,w=(1-u)*i+r;a[l]=a[l+4]=g,a[l+1]=a[l+3]=w,a[l+2]=a[l+6]=g+p*t,a[l+5]=a[l+7]=w-m*i,l+=8}return a},t$=function(t){return d(this,$i).serialize(t,R(this,Ee,fp).call(this))},n$=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},i$=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},s$=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},b(ze,ji),W(ze,"_defaultColor",null),W(ze,"_defaultOpacity",1),W(ze,"_defaultThickness",12),W(ze,"_type","highlight"),W(ze,"_editorType",we.HIGHLIGHT),W(ze,"_freeHighlightId",-1),W(ze,"_freeHighlight",null),W(ze,"_freeHighlightClipId","");let B0=ze;var Uc;class r${constructor(){b(this,Uc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){d(this,Uc)[e]=t}toSVGProperties(){const e=d(this,Uc);return T(this,Uc,Object.create(null)),{root:e}}reset(){T(this,Uc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Qe("Not implemented")}}Uc=new WeakMap;var mi,Df,qt,$c,Vc,La,Fa,Oa,Bc,Ve,l_,c_,u_,hp,o$,Dv,pp,Wu;const ae=class ae extends nt{constructor(t){super(t);b(this,Ve);b(this,mi,null);b(this,Df);W(this,"_drawId",null);T(this,Df,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(R(this,Ve,l_).call(this,t),R(this,Ve,hp).call(this))}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Qe("Not implemented")}static get typesMap(){Qe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(d(ae,qt).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],a=l=>{var u;r.updateProperty(i,l);const c=d(this,mi).updateProperty(i,l);c&&R(this,Ve,pp).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(d(this,mi).getPathResizingSVGProperties(R(this,Ve,Dv).call(this)),{bbox:R(this,Ve,Wu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(d(this,mi).getPathResizedSVGProperties(R(this,Ve,Dv).call(this)),{bbox:R(this,Ve,Wu).call(this)}))}_onTranslating(t,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:R(this,Ve,Wu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(d(this,mi).getPathTranslatedSVGProperties(R(this,Ve,Dv).call(this),this.parentDimensions),{bbox:R(this,Ve,Wu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Df)&&(T(this,Df,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){R(this,Ve,u_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Ve,hp).call(this),R(this,Ve,pp).call(this,d(this,mi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),R(this,Ve,u_).call(this)):t&&(this._uiManager.addShouldRescale(this),R(this,Ve,hp).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties({bbox:R(this,Ve,Wu).call(this)},d(this,mi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,Ve,pp).call(this,d(this,mi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){Qe("Not implemented")}static startDrawing(t,i,s,r){var S;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=r;if(d(ae,Fa)&&d(ae,Fa)!==u)return;const{viewport:{rotation:p}}=t,{width:m,height:g}=o.getBoundingClientRect(),w=T(ae,$c,new AbortController),v=t.combinedSignal(w);if(d(ae,La)||T(ae,La,c),d(ae,Fa)??T(ae,Fa,u),window.addEventListener("pointerup",x=>{var C;d(ae,La)===x.pointerId?this._endDraw(x):(C=d(ae,Oa))==null||C.delete(x.pointerId)},{signal:v}),window.addEventListener("pointercancel",x=>{var C;d(ae,La)===x.pointerId?this._currentParent.endDrawingSession():(C=d(ae,Oa))==null||C.delete(x.pointerId)},{signal:v}),window.addEventListener("pointerdown",x=>{d(ae,Fa)===x.pointerType&&((d(ae,Oa)||T(ae,Oa,new Set)).add(x.pointerId),d(ae,qt).isCancellable()&&(d(ae,qt).removeLastElement(),d(ae,qt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Is,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",x=>{x.timeStamp===d(ae,Bc)&&Nt(x)},{signal:v}),t.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),d(ae,qt)){t.drawLayer.updateProperties(this._currentDrawId,d(ae,qt).startNew(a,l,m,g,p));return}i.updateUIForDefaultProperties(this),T(ae,qt,this.createDrawerInstance(a,l,m,g,p)),T(ae,Vc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(ae,Vc).toSVGProperties(),d(ae,qt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(T(ae,Bc,-1),!d(ae,qt))return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(d(ae,La)===r){if(((o=d(ae,Oa))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ae,qt).add(i,s)),T(ae,Bc,t.timeStamp),Nt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,T(ae,qt,null),T(ae,Vc,null),T(ae,Fa,null),T(ae,Bc,NaN)),d(ae,$c)&&(d(ae,$c).abort(),T(ae,$c,null),T(ae,La,NaN),T(ae,Oa,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,d(ae,qt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=d(ae,qt),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Oe.DRAW_STEP),!d(ae,qt).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ae,qt).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:d(ae,Vc),mustBeCommitted:!t});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,a){Qe("Not implemented")}static async deserialize(t,i,s){var p,m;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=i.viewport,c=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,t),u=await super.deserialize(t,i,s);return u.createDrawingOptions(t),R(p=u,Ve,l_).call(p,{drawOutlines:c}),R(m=u,Ve,hp).call(m),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return d(this,mi).serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};mi=new WeakMap,Df=new WeakMap,qt=new WeakMap,$c=new WeakMap,Vc=new WeakMap,La=new WeakMap,Fa=new WeakMap,Oa=new WeakMap,Bc=new WeakMap,Ve=new WeakSet,l_=function({drawOutlines:t,drawId:i,drawingOptions:s}){T(this,mi,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=R(this,Ve,c_).call(this,t,this.parent),R(this,Ve,pp).call(this,t.box)},c_=function(t,i){const{id:s}=i.drawLayer.draw(ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},u_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},hp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,Ve,c_).call(this,d(this,mi),t)}},o$=function([t,i,s,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[i,1-t,s*(a/o),r*(o/a)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(a/o),r*(o/a)];default:return[t,i,s,r]}},Dv=function(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-i,t,s*(o/a),r*(a/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/a),r*(a/o)];default:return[t,i,s,r]}},pp=function(t){if([this.x,this.y,this.width,this.height]=R(this,Ve,o$).call(this,t),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Wu=function(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(l/c),r*(c/l),s*(l/c)];case 5:return[1-i,t,s*(l/c),r*(c/l)];case 6:return[1-t-r*(c/l),1-i,r*(c/l),s*(l/c)];case 7:return[i-s*(l/c),1-t-r*(c/l),s*(l/c),r*(c/l)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(c/l),i,r*(c/l),s*(l/c)];case 13:return[1-i-s*(l/c),t-r*(c/l),s*(l/c),r*(c/l)];case 14:return[1-t,1-i-s*(l/c),r*(c/l),s*(l/c)];case 15:return[i,1-t,s*(l/c),r*(c/l)];default:return[t,i,s,r]}},W(ae,"_currentDrawId",-1),W(ae,"_currentParent",null),b(ae,qt,null),b(ae,$c,null),b(ae,Vc,null),b(ae,La,NaN),b(ae,Fa,null),b(ae,Oa,null),b(ae,Bc,NaN),W(ae,"_INNER_MARGIN",3);let H0=ae;var tr,Wt,Kt,Hc,Lf,bn,sn,Bi,zc,jc,Gc,Ff,Lv;class rie{constructor(e,t,i,s,r,o){b(this,Ff);b(this,tr,new Float64Array(6));b(this,Wt);b(this,Kt);b(this,Hc);b(this,Lf);b(this,bn);b(this,sn,"");b(this,Bi,0);b(this,zc,new sy);b(this,jc);b(this,Gc);T(this,jc,i),T(this,Gc,s),T(this,Hc,r),T(this,Lf,o),[e,t]=R(this,Ff,Lv).call(this,e,t);const a=T(this,Wt,[NaN,NaN,NaN,NaN,e,t]);T(this,bn,[e,t]),T(this,Kt,[{line:a,points:d(this,bn)}]),d(this,tr).set(a,0)}updateProperty(e,t){e==="stroke-width"&&T(this,Lf,t)}isEmpty(){return!d(this,Kt)||d(this,Kt).length===0}isCancellable(){return d(this,bn).length<=10}add(e,t){[e,t]=R(this,Ff,Lv).call(this,e,t);const[i,s,r,o]=d(this,tr).subarray(2,6),a=e-r,l=t-o;return Math.hypot(d(this,jc)*a,d(this,Gc)*l)<=2?null:(d(this,bn).push(e,t),isNaN(i)?(d(this,tr).set([r,o,e,t],2),d(this,Wt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,tr)[0])&&d(this,Wt).splice(6,6),d(this,tr).set([i,s,r,o,e,t],0),d(this,Wt).push(...re.createBezierPoints(i,s,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(d(this,bn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,s,r){T(this,jc,i),T(this,Gc,s),T(this,Hc,r),[e,t]=R(this,Ff,Lv).call(this,e,t);const o=T(this,Wt,[NaN,NaN,NaN,NaN,e,t]);T(this,bn,[e,t]);const a=d(this,Kt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,Kt).push({line:o,points:d(this,bn)}),d(this,tr).set(o,0),T(this,Bi,0),this.toSVGPath(),null}getLastElement(){return d(this,Kt).at(-1)}setLastElement(e){return d(this,Kt)?(d(this,Kt).push(e),T(this,Wt,e.line),T(this,bn,e.points),T(this,Bi,0),{path:{d:this.toSVGPath()}}):d(this,zc).setLastElement(e)}removeLastElement(){if(!d(this,Kt))return d(this,zc).removeLastElement();d(this,Kt).pop(),T(this,sn,"");for(let e=0,t=d(this,Kt).length;e<t;e++){const{line:i,points:s}=d(this,Kt)[e];T(this,Wt,i),T(this,bn,s),T(this,Bi,0),this.toSVGPath()}return{path:{d:d(this,sn)}}}toSVGPath(){const e=re.svgRound(d(this,Wt)[4]),t=re.svgRound(d(this,Wt)[5]);if(d(this,bn).length===2)return T(this,sn,`${d(this,sn)} M ${e} ${t} Z`),d(this,sn);if(d(this,bn).length<=6){const s=d(this,sn).lastIndexOf("M");T(this,sn,`${d(this,sn).slice(0,s)} M ${e} ${t}`),T(this,Bi,6)}if(d(this,bn).length===4){const s=re.svgRound(d(this,Wt)[10]),r=re.svgRound(d(this,Wt)[11]);return T(this,sn,`${d(this,sn)} L ${s} ${r}`),T(this,Bi,12),d(this,sn)}const i=[];d(this,Bi)===0&&(i.push(`M ${e} ${t}`),T(this,Bi,6));for(let s=d(this,Bi),r=d(this,Wt).length;s<r;s+=6){const[o,a,l,c,u,p]=d(this,Wt).slice(s,s+6).map(re.svgRound);i.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}return T(this,sn,d(this,sn)+i.join(" ")),T(this,Bi,d(this,Wt).length),d(this,sn)}getOutlines(e,t,i,s){const r=d(this,Kt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),d(this,zc).build(d(this,Kt),e,t,i,d(this,Hc),d(this,Lf),s),T(this,tr,null),T(this,Wt,null),T(this,Kt,null),T(this,sn,null),d(this,zc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}tr=new WeakMap,Wt=new WeakMap,Kt=new WeakMap,Hc=new WeakMap,Lf=new WeakMap,bn=new WeakMap,sn=new WeakMap,Bi=new WeakMap,zc=new WeakMap,jc=new WeakMap,Gc=new WeakMap,Ff=new WeakSet,Lv=function(e,t){return re._normalizePoint(e,t,d(this,jc),d(this,Gc),d(this,Hc))};var Rn,Ig,kg,gi,nr,ir,Of,Uf,qc,an,Mr,a$,l$,c$;class sy extends re{constructor(){super(...arguments);b(this,an);b(this,Rn);b(this,Ig,0);b(this,kg);b(this,gi);b(this,nr);b(this,ir);b(this,Of);b(this,Uf);b(this,qc)}build(t,i,s,r,o,a,l){T(this,nr,i),T(this,ir,s),T(this,Of,r),T(this,Uf,o),T(this,qc,a),T(this,kg,l??0),T(this,gi,t),R(this,an,l$).call(this)}get thickness(){return d(this,qc)}setLastElement(t){return d(this,gi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,gi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of d(this,gi)){if(t.push(`M${re.svgRound(i[4])} ${re.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${re.svgRound(i[10])} ${re.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,a,l,c,u,p]=i.subarray(s,s+6).map(re.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${p}`)}}return t.join("")}serialize([t,i,s,r],o){const a=[],l=[],[c,u,p,m]=R(this,an,a$).call(this);let g,w,v,S,x,C,_,A,P;switch(d(this,Uf)){case 0:P=re._rescale,g=t,w=i+r,v=s,S=-r,x=t+c*s,C=i+(1-u-m)*r,_=t+(c+p)*s,A=i+(1-u)*r;break;case 90:P=re._rescaleAndSwap,g=t,w=i,v=s,S=r,x=t+u*s,C=i+c*r,_=t+(u+m)*s,A=i+(c+p)*r;break;case 180:P=re._rescale,g=t+s,w=i,v=-s,S=r,x=t+(1-c-p)*s,C=i+u*r,_=t+(1-c)*s,A=i+(u+m)*r;break;case 270:P=re._rescaleAndSwap,g=t+s,w=i+r,v=-s,S=-r,x=t+(1-u-m)*s,C=i+(1-c-p)*r,_=t+(1-u)*s,A=i+(1-c)*r;break}for(const{line:M,points:N}of d(this,gi))a.push(P(M,g,w,v,S,o?new Array(M.length):null)),l.push(P(N,g,w,v,S,o?new Array(N.length):null));return{lines:a,points:l,rect:[x,C,_,A]}}static deserialize(t,i,s,r,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const p=[];let m,g,w,v,S;switch(c){case 0:S=re._rescale,m=-t/s,g=i/r+1,w=1/s,v=-1/r;break;case 90:S=re._rescaleAndSwap,m=-i/r,g=-t/s,w=1/r,v=1/s;break;case 180:S=re._rescale,m=t/s+1,g=-i/r,w=-1/s,v=1/r;break;case 270:S=re._rescaleAndSwap,m=i/r+1,g=t/s+1,w=-1/r,v=-1/s;break}if(!a){a=[];for(const C of l){const _=C.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const A=new Float32Array(3*(_-2));a.push(A);let[P,M,N,I]=C.subarray(0,4);A.set([NaN,NaN,NaN,NaN,P,M],0);for(let k=4;k<_;k+=2){const D=C[k],L=C[k+1];A.set(re.createBezierPoints(P,M,N,I,D,L),(k-2)*3),[P,M,N,I]=[N,I,D,L]}}}for(let C=0,_=a.length;C<_;C++)p.push({line:S(a[C].map(A=>A??NaN),m,g,w,v),points:S(l[C].map(A=>A??NaN),m,g,w,v)});const x=new this.prototype.constructor;return x.build(p,s,r,1,c,u,o),x}get box(){return d(this,Rn)}updateProperty(t,i){return t==="stroke-width"?R(this,an,c$).call(this,i):null}updateParentDimensions([t,i],s){const[r,o]=R(this,an,Mr).call(this);T(this,nr,t),T(this,ir,i),T(this,Of,s);const[a,l]=R(this,an,Mr).call(this),c=a-r,u=l-o,p=d(this,Rn);return p[0]-=c,p[1]-=u,p[2]+=2*c,p[3]+=2*u,p}updateRotation(t){return T(this,Ig,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Rn).map(re.svgRound).join(" ")}get defaultProperties(){const[t,i]=d(this,Rn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=d(this,Rn);let s=0,r=0,o=0,a=0,l=0,c=0;switch(d(this,Ig)){case 90:r=i/t,o=-t/i,l=t;break;case 180:s=-1,a=-1,l=t,c=i;break;case 270:r=-i/t,o=t/i,c=i;break;default:return""}return`matrix(${s} ${r} ${o} ${a} ${re.svgRound(l)} ${re.svgRound(c)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,a]=R(this,an,Mr).call(this),[l,c,u,p]=d(this,Rn);if(Math.abs(u-o)<=re.PRECISION||Math.abs(p-a)<=re.PRECISION){const S=t+s/2-(l+u/2),x=i+r/2-(c+p/2);return{path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${x})`}}}const m=(s-2*o)/(u-2*o),g=(r-2*a)/(p-2*a),w=u/s,v=p/r;return{path:{"transform-origin":`${re.svgRound(l)} ${re.svgRound(c)}`,transform:`${this.rotationTransform} scale(${w} ${v}) translate(${re.svgRound(o)} ${re.svgRound(a)}) scale(${m} ${g}) translate(${re.svgRound(-o)} ${re.svgRound(-a)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,a]=R(this,an,Mr).call(this),l=d(this,Rn),[c,u,p,m]=l;if(l[0]=t,l[1]=i,l[2]=s,l[3]=r,Math.abs(p-o)<=re.PRECISION||Math.abs(m-a)<=re.PRECISION){const x=t+s/2-(c+p/2),C=i+r/2-(u+m/2);for(const{line:_,points:A}of d(this,gi))re._translate(_,x,C,_),re._translate(A,x,C,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(s-2*o)/(p-2*o),w=(r-2*a)/(m-2*a),v=-g*(c+o)+t+o,S=-w*(u+a)+i+a;if(g!==1||w!==1||v!==0||S!==0)for(const{line:x,points:C}of d(this,gi))re._rescale(x,v,S,g,w,x),re._rescale(C,v,S,g,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,a=d(this,Rn),l=t-a[0],c=i-a[1];if(d(this,nr)===r&&d(this,ir)===o)for(const{line:u,points:p}of d(this,gi))re._translate(u,l,c,u),re._translate(p,l,c,p);else{const u=d(this,nr)/r,p=d(this,ir)/o;T(this,nr,r),T(this,ir,o);for(const{line:m,points:g}of d(this,gi))re._rescale(m,l,c,u,p,m),re._rescale(g,l,c,u,p,g);a[2]*=u,a[3]*=p}return a[0]=t,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t)} ${re.svgRound(i)}`}}}get defaultSVGProperties(){const t=d(this,Rn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t[0])} ${re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Rn=new WeakMap,Ig=new WeakMap,kg=new WeakMap,gi=new WeakMap,nr=new WeakMap,ir=new WeakMap,Of=new WeakMap,Uf=new WeakMap,qc=new WeakMap,an=new WeakSet,Mr=function(t=d(this,qc)){const i=d(this,kg)+t/2*d(this,Of);return d(this,Uf)%180===0?[i/d(this,nr),i/d(this,ir)]:[i/d(this,ir),i/d(this,nr)]},a$=function(){const[t,i,s,r]=d(this,Rn),[o,a]=R(this,an,Mr).call(this,0);return[t+o,i+a,s-2*o,r-2*a]},l$=function(){const t=T(this,Rn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of d(this,gi)){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6)pe.pointBoundingBox(r[l],r[l+1],t);continue}let o=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[u,p,m,g,w,v]=r.subarray(l,l+6);pe.bezierBoundingBox(o,a,u,p,m,g,w,v,t),o=w,a=v}}const[i,s]=R(this,an,Mr).call(this);t[0]=Nn(t[0]-i,0,1),t[1]=Nn(t[1]-s,0,1),t[2]=Nn(t[2]+i,0,1),t[3]=Nn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},c$=function(t){const[i,s]=R(this,an,Mr).call(this);T(this,qc,t);const[r,o]=R(this,an,Mr).call(this),[a,l]=[r-i,o-s],c=d(this,Rn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class fw extends r${constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new fw(this._viewParameters);return e.updateAll(this),e}}var ax,u$;const cd=class cd extends H0{constructor(t){super({...t,name:"inkEditor"});b(this,ax);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){nt.initialize(t,i),this._defaultDrawingOptions=new fw(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return De(this,"typesMap",new Map([[Oe.INK_THICKNESS,"stroke-width"],[Oe.INK_COLOR,"stroke"],[Oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new rie(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,a){return sy.deserialize(t,i,s,r,o,a)}static async deserialize(t,i,s){let r=null;if(t instanceof $A){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:p,opacity:m,borderStyle:{rawWidth:g},popupRef:w},parent:{page:{pageNumber:v}}}=t;r=t={annotationType:we.INK,color:Array.from(p),thickness:g,opacity:m,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:w}}const o=await super.deserialize(t,i,s);return o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=cd.getDefaultDrawingOptions({stroke:pe.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:we.INK,color:nt._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!R(this,ax,u$).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};ax=new WeakSet,u$=function(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==i[l])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o},W(cd,"_type","ink"),W(cd,"_editorType",we.INK),W(cd,"_defaultDrawingOptions",null);let d_=cd;class f_ extends sy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const By=8,Vh=3;var Wc,Ge,h_,xs,d$,f$,p_,Fv,h$,p$,m$,m_,g_,g$;class go{static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:s},r,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const p=200,m=u.font=`${i} ${s} ${p}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:x,fontBoundingBoxDescent:C,width:_}=u.measureText(e),A=1.5,P=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||0,_)*A),M=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||p,Math.abs(x)+Math.abs(C)||p)*A);c=new OffscreenCanvas(P,M),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=m,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,P,M),u.fillStyle="black",u.fillText(e,P*(A-1)/2,M*(3-A)/2);const N=R(this,Ge,m_).call(this,u.getImageData(0,0,P,M).data),I=R(this,Ge,m$).call(this,N),k=R(this,Ge,g_).call(this,I),D=R(this,Ge,p_).call(this,N,P,M,k);return this.processDrawnLines({lines:{curves:D,width:P,height:M},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,i,s,r){const[o,a,l]=R(this,Ge,g$).call(this,e),[c,u]=R(this,Ge,p$).call(this,o,a,l,Math.hypot(a,l)*d(this,Wc).sigmaSFactor,d(this,Wc).sigmaR,d(this,Wc).kernelSize),p=R(this,Ge,g_).call(this,u),m=R(this,Ge,p_).call(this,c,a,l,p);return this.processDrawnLines({lines:{curves:m,width:a,height:l},pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:a}){s%180!==0&&([t,i]=[i,t]);const{curves:l,width:c,height:u}=e,p=e.thickness??0,m=[],g=Math.min(t/c,i/u),w=g/t,v=g/i,S=[];for(const{points:C}of l){const _=o?R(this,Ge,h$).call(this,C):C;if(!_)continue;S.push(_);const A=_.length,P=new Float32Array(A),M=new Float32Array(3*(A===2?2:A-2));if(m.push({line:M,points:P}),A===2){P[0]=_[0]*w,P[1]=_[1]*v,M.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[N,I,k,D]=_;N*=w,I*=v,k*=w,D*=v,P.set([N,I,k,D],0),M.set([NaN,NaN,NaN,NaN,N,I],0);for(let L=4;L<A;L+=2){const $=P[L]=_[L]*w,j=P[L+1]=_[L+1]*v;M.set(re.createBezierPoints(N,I,k,D,$,j),(L-2)*3),[N,I,k,D]=[k,D,$,j]}}if(m.length===0)return null;const x=a?new f_:new sy;return x.build(m,t,i,1,s,a?0:p,r),{outline:x,newCurves:S,areContours:a,thickness:p,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:s,height:r}){let o=1/0,a=-1/0,l=0;for(const _ of e){l+=_.length;for(let A=2,P=_.length;A<P;A++){const M=_[A]-_[A-2];o=Math.min(o,M),a=Math.max(a,M)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,p=By+Vh*u,m=new Uint32Array(p);let g=0;m[g++]=p*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,m[g++]=0,m[g++]=s,m[g++]=r,m[g++]=t?0:1,m[g++]=Math.max(0,Math.floor(i??0)),m[g++]=u,m[g++]=c.BYTES_PER_ELEMENT;for(const _ of e)m[g++]=_.length-2,m[g++]=_[0],m[g++]=_[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const S=c.prototype.constructor;for(const _ of e){const A=new S(_.length-2);for(let P=2,M=_.length;P<M;P++)A[P-2]=_[P]-_[P-2];v.write(A)}v.close();const x=await new Response(w.readable).arrayBuffer(),C=new Uint8Array(x);return gO(C)}static async decompressSignature(e){try{const t=Pte(e),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const _ of i)o||(o=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),o.set(_,a),a+=_.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],p=l[3],m=l[4]===0,g=l[5],w=l[6],v=l[7],S=[],x=(By+Vh*w)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(v){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,x);break}a=0;for(let _=0;_<w;_++){const A=l[Vh*_+By],P=new Float32Array(A+2);S.push(P);for(let M=0;M<Vh-1;M++)P[M]=l[Vh*_+By+M+1];for(let M=0;M<A;M++)P[M+2]=P[M]+C[a++]}return{areContours:m,thickness:g,outlines:S,width:u,height:p}}catch(t){return Ce(`decompressSignature: ${t}`),null}}}Wc=new WeakMap,Ge=new WeakSet,h_=function(e,t,i,s){return i-=e,s-=t,i===0?s>0?0:4:i===1?s+6:2-s},xs=new WeakMap,d$=function(e,t,i,s,r,o,a){const l=R(this,Ge,h_).call(this,i,s,r,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,p=d(this,xs)[2*u],m=d(this,xs)[2*u+1];if(e[(i+p)*t+(s+m)]!==0)return u}return-1},f$=function(e,t,i,s,r,o,a){const l=R(this,Ge,h_).call(this,i,s,r,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,p=d(this,xs)[2*u],m=d(this,xs)[2*u+1];if(e[(i+p)*t+(s+m)]!==0)return u}return-1},p_=function(e,t,i,s){const r=e.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=e[u]<=s?1:0;for(let u=1;u<i-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*i-1-u]=0;let a=1,l;const c=[];for(let u=1;u<i-1;u++){l=1;for(let p=1;p<t-1;p++){const m=u*t+p,g=o[m];if(g===0)continue;let w=u,v=p;if(g===1&&o[m-1]===0)a+=1,v-=1;else if(g>=1&&o[m+1]===0)a+=1,v+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const S=[p,u],x=v===p+1,C={isHole:x,points:S,id:a,parent:0};c.push(C);let _;for(const L of c)if(L.id===l){_=L;break}_?_.isHole?C.parent=x?_.parent:l:C.parent=x?l:_.parent:C.parent=x?l:0;const A=R(this,Ge,d$).call(this,o,t,u,p,w,v,0);if(A===-1){o[m]=-a,o[m]!==1&&(l=Math.abs(o[m]));continue}let P=d(this,xs)[2*A],M=d(this,xs)[2*A+1];const N=u+P,I=p+M;w=N,v=I;let k=u,D=p;for(;;){const L=R(this,Ge,f$).call(this,o,t,k,D,w,v,1);P=d(this,xs)[2*L],M=d(this,xs)[2*L+1];const $=k+P,j=D+M;S.push(j,$);const V=k*t+D;if(o[V+1]===0?o[V]=-a:o[V]===1&&(o[V]=a),$===u&&j===p&&k===N&&D===I){o[m]!==1&&(l=Math.abs(o[m]));break}else w=k,v=D,k=$,D=j}}}return c},Fv=function(e,t,i,s){if(i-t<=4){for(let N=t;N<i-2;N+=2)s.push(e[N],e[N+1]);return}const r=e[t],o=e[t+1],a=e[i-4]-r,l=e[i-3]-o,c=Math.hypot(a,l),u=a/c,p=l/c,m=u*o-p*r,g=l/a,w=1/c,v=Math.atan(g),S=Math.cos(v),x=Math.sin(v),C=w*(Math.abs(S)+Math.abs(x)),_=w*(1-C+C**2),A=Math.max(Math.atan(Math.abs(x+S)*_),Math.atan(Math.abs(x-S)*_));let P=0,M=t;for(let N=t+2;N<i-2;N+=2){const I=Math.abs(m-u*e[N+1]+p*e[N]);I>P&&(M=N,P=I)}P>(c*A)**2?(R(this,Ge,Fv).call(this,e,t,M+2,s),R(this,Ge,Fv).call(this,e,M,i,s)):s.push(r,o)},h$=function(e){const t=[],i=e.length;return R(this,Ge,Fv).call(this,e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t},p$=function(e,t,i,s,r,o){const a=new Float32Array(o**2),l=-2*s**2,c=o>>1;for(let v=0;v<o;v++){const S=(v-c)**2;for(let x=0;x<o;x++)a[v*o+x]=Math.exp((S+(x-c)**2)/l)}const u=new Float32Array(256),p=-2*r**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/p);const m=e.length,g=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<i;v++)for(let S=0;S<t;S++){const x=v*t+S,C=e[x];let _=0,A=0;for(let M=0;M<o;M++){const N=v+M-c;if(!(N<0||N>=i))for(let I=0;I<o;I++){const k=S+I-c;if(k<0||k>=t)continue;const D=e[N*t+k],L=a[M*o+I]*u[Math.abs(D-C)];_+=D*L,A+=L}}const P=g[x]=Math.round(_/A);w[P]++}return[g,w]},m$=function(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t},m_=function(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let a=0,l=i.length;a<l;a++){if(e[(a<<2)+3]===0){s=i[a]=255;continue}const u=i[a]=e[a<<2];u>s&&(s=u),u<r&&(r=u)}const o=255/(s-r);for(let a=0;a<t;a++)i[a]=(i[a]-r)*o;return i},g_=function(e){let t,i=-1/0,s=-1/0;const r=e.findIndex(l=>l!==0);let o=r,a=r;for(t=r;t<256;t++){const l=e[t];l>i&&(t-o>s&&(s=t-o,a=t-1),i=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},g$=function(e){const t=e,{width:i,height:s}=e,{maxDim:r}=d(this,Wc);let o=i,a=s;if(i>r||s>r){let m=i,g=s,w=Math.log2(Math.max(i,s)/r);const v=Math.floor(w);w=w===v?v-1:v;for(let x=0;x<w;x++){o=Math.ceil(m/2),a=Math.ceil(g/2);const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(e,0,0,m,g,0,0,o,a),m=o,g=a,e!==t&&e.close(),e=C.transferToImageBitmap()}const S=Math.min(r/o,r/a);o=Math.round(o*S),a=Math.round(a*S)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[R(this,Ge,m_).call(this,u),o,a]},b(go,Ge),b(go,Wc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(go,xs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class VA extends r${constructor(){super(),super.updateProperties({fill:nt._defaultLineColor,"stroke-width":0})}clone(){const e=new VA;return e.updateAll(this),e}}class BA extends fw{constructor(e){super(e),super.updateProperties({stroke:nt._defaultLineColor,"stroke-width":1})}clone(){const e=new BA(this._viewParameters);return e.updateAll(this),e}}var Ua,sr,$a,Kc;const si=class si extends H0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});b(this,Ua,!1);b(this,sr,null);b(this,$a,null);b(this,Kc,null);this._willKeepAspectRatio=!0,T(this,$a,t.signatureData||null),T(this,sr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){nt.initialize(t,i),this._defaultDrawingOptions=new VA,this._defaultDrawnSignatureOptions=new BA(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return De(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,sr)}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(d(this,$a)){const{lines:r,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=d(this,$a),{rawDims:{pageWidth:p,pageHeight:m},rotation:g}=this.parent.viewport,w=go.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:g,innerMargin:si._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(w,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){T(this,Kc,t),this.addEditToolbar()}getUuid(){return d(this,Kc)}get description(){return d(this,sr)}set description(t){T(this,sr,t),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=d(this,$a),a=Math.max(r,o),l=go.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:s,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:a}=this,{outline:l}=T(this,$a,t);T(this,Ua,l instanceof f_),this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let c;d(this,Ua)?c=si.getDefaultDrawingOptions():(c=si._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,p]=this.parentDimensions,[,m]=this.pageDimensions;let g=i/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,p*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return go.process(t,i,s,r,si._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return go.extractContoursFromText(t,i,s,r,o,si._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return go.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:si._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=si.getDefaultDrawingOptions():(this._drawingOptions=si._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:we.SIGNATURE,isSignature:!0,areContours:d(this,Ua),color:[0,0,0],thickness:d(this,Ua)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:i,points:s},a.uuid=d(this,Kc),a.isCopy=!0):a.lines=i,d(this,sr)&&(a.accessibilityData={type:"Figure",alt:d(this,sr)}),a}static deserializeDraw(t,i,s,r,o,a){return a.areContours?f_.deserialize(t,i,s,r,o,a):sy.deserialize(t,i,s,r,o,a)}static async deserialize(t,i,s){var o;const r=await super.deserialize(t,i,s);return T(r,Ua,t.areContours),T(r,sr,((o=t.accessibilityData)==null?void 0:o.alt)||""),T(r,Kc,t.uuid),r}};Ua=new WeakMap,sr=new WeakMap,$a=new WeakMap,Kc=new WeakMap,W(si,"_type","signature"),W(si,"_editorType",we.SIGNATURE),W(si,"_defaultDrawingOptions",null);let y_=si;var ut,Yt,Va,lo,Ba,$f,co,Yc,rr,yi,Vf,Be,mp,gp,Ov,Uv,$v,x_,Vv,y$;class v_ extends nt{constructor(t){super({...t,name:"stampEditor"});b(this,Be);b(this,ut,null);b(this,Yt,null);b(this,Va,null);b(this,lo,null);b(this,Ba,null);b(this,$f,"");b(this,co,null);b(this,Yc,!1);b(this,rr,null);b(this,yi,!1);b(this,Vf,!1);T(this,lo,t.bitmapUrl),T(this,Ba,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){nt.initialize(t,i)}static isHandlingMimeForPasting(t){return dE.includes(t)}static paste(t,i){i.pasteEditor({mode:we.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;d(this,Yt)&&(T(this,ut,null),this._uiManager.imageManager.deleteId(d(this,Yt)),(t=d(this,co))==null||t.remove(),T(this,co,null),d(this,rr)&&(clearTimeout(d(this,rr)),T(this,rr,null))),super.remove()}rebuild(){if(!this.parent){d(this,Yt)&&R(this,Be,Ov).call(this);return}super.rebuild(),this.div!==null&&(d(this,Yt)&&d(this,co)===null&&R(this,Be,Ov).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,Va)||d(this,ut)||d(this,lo)||d(this,Ba)||d(this,Yt)||d(this,Yc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,Yc)||(d(this,ut)?R(this,Be,Uv).call(this):R(this,Be,Ov).call(this)),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(T(this,Yt,s),r&&T(this,ut,r),T(this,Yc,!1),R(this,Be,Uv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,rr)!==null&&clearTimeout(d(this,rr)),T(this,rr,setTimeout(()=>{T(this,rr,null),R(this,Be,x_).call(this)},200))}copyCanvas(t,i,s=!1){var g;t||(t=224);const{width:r,height:o}=d(this,ut),a=new Sr;let l=d(this,ut),c=r,u=o,p=null;if(i){if(r>i||o>i){const I=Math.min(i/r,i/o);c=Math.floor(r*I),u=Math.floor(o*I)}p=document.createElement("canvas");const w=p.width=Math.ceil(c*a.sx),v=p.height=Math.ceil(u*a.sy);d(this,yi)||(l=R(this,Be,$v).call(this,w,v));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let x="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",C="#42414d");const _=15,A=_*a.sx,P=_*a.sy,M=new OffscreenCanvas(A*2,P*2),N=M.getContext("2d");N.fillStyle=x,N.fillRect(0,0,A*2,P*2),N.fillStyle=C,N.fillRect(0,0,A,P),N.fillRect(A,P,A,P),S.fillStyle=S.createPattern(M,"repeat"),S.fillRect(0,0,w,v),S.drawImage(l,0,0,l.width,l.height,0,0,w,v)}let m=null;if(s){let w,v;if(a.symmetric&&l.width<t&&l.height<t)w=l.width,v=l.height;else if(l=d(this,ut),r>t||o>t){const C=Math.min(t/r,t/o);w=Math.floor(r*C),v=Math.floor(o*C),d(this,yi)||(l=R(this,Be,$v).call(this,w,v))}const x=new OffscreenCanvas(w,v).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,w,v),m={width:w,height:v,data:x.getImageData(0,0,w,v).data}}return{canvas:p,width:c,height:u,imageData:m}}static async deserialize(t,i,s){var S;let r=null,o=!1;if(t instanceof IU){const{data:{rect:x,rotation:C,id:_,structParent:A,popupRef:P},container:M,parent:{page:{pageNumber:N}},canvas:I}=t;let k,D;I?(delete t.canvas,{id:k,bitmap:D}=s.imageManager.getFromCanvas(M.id,I),I.remove()):(o=!0,t._hasNoCanvas=!0);const L=((S=await i._structTree.getAriaAttributes(`${NA}${_}`))==null?void 0:S.get("aria-label"))||"";r=t={annotationType:we.STAMP,bitmapId:k,bitmap:D,pageIndex:N-1,rect:x.slice(0),rotation:C,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:A,popupRef:P}}const a=await super.deserialize(t,i,s),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:p,isSvg:m,accessibilityData:g}=t;o?(s.addMissingCanvas(t.id,a),T(a,Yc,!0)):p&&s.imageManager.isValidId(p)?(T(a,Yt,p),c&&T(a,ut,c)):T(a,lo,u),T(a,yi,m);const[w,v]=a.pageDimensions;return a.width=(l[2]-l[0])/w,a.height=(l[3]-l[1])/v,g&&(a.altTextData=g),a._initialData=r,T(a,Vf,!!r),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:we.STAMP,bitmapId:d(this,Yt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,yi),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=R(this,Be,Vv).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=R(this,Be,y$).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const a=d(this,yi)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(d(this,Yt)))i.stamps.set(d(this,Yt),{area:a,serialized:s}),s.bitmap=R(this,Be,Vv).call(this,!1);else if(d(this,yi)){const l=i.stamps.get(d(this,Yt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=R(this,Be,Vv).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}ut=new WeakMap,Yt=new WeakMap,Va=new WeakMap,lo=new WeakMap,Ba=new WeakMap,$f=new WeakMap,co=new WeakMap,Yc=new WeakMap,rr=new WeakMap,yi=new WeakMap,Vf=new WeakMap,Be=new WeakSet,mp=function(t,i=!1){if(!t){this.remove();return}T(this,ut,t.bitmap),i||(T(this,Yt,t.id),T(this,yi,t.isSvg)),t.file&&T(this,$f,t.file.name),R(this,Be,Uv).call(this)},gp=function(){if(T(this,Va,null),this._uiManager.enableWaiting(!1),!!d(this,co)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ut)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ov=function(){if(d(this,Yt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Yt)).then(s=>R(this,Be,mp).call(this,s,!0)).finally(()=>R(this,Be,gp).call(this));return}if(d(this,lo)){const s=d(this,lo);T(this,lo,null),this._uiManager.enableWaiting(!0),T(this,Va,this._uiManager.imageManager.getFromUrl(s).then(r=>R(this,Be,mp).call(this,r)).finally(()=>R(this,Be,gp).call(this)));return}if(d(this,Ba)){const s=d(this,Ba);T(this,Ba,null),this._uiManager.enableWaiting(!0),T(this,Va,this._uiManager.imageManager.getFromFile(s).then(r=>R(this,Be,mp).call(this,r)).finally(()=>R(this,Be,gp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=dE.join(",");const i=this._uiManager._signal;T(this,Va,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,Be,mp).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>R(this,Be,gp).call(this))),t.click()},Uv=function(){var p;const{div:t}=this;let{width:i,height:s}=d(this,ut);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const m=Math.min(a*r/i,a*o/s);i*=m,s*=m}const[l,c]=this.parentDimensions;this.setDims(i*l/r,s*c/o),this._uiManager.enableWaiting(!1);const u=T(this,co,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,Be,x_).call(this),d(this,Vf)||(this.parent.addUndoableEditor(this),T(this,Vf,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,$f)&&this.div.setAttribute("aria-description",d(this,$f)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},$v=function(t,i){const{width:s,height:r}=d(this,ut);let o=s,a=r,l=d(this,ut);for(;o>2*t||a>2*i;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(o,a);p.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=p.transferToImageBitmap()}return l},x_=function(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Sr,a=Math.ceil(s*t*o.sx),l=Math.ceil(r*i*o.sy),c=d(this,co);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=d(this,yi)?d(this,ut):R(this,Be,$v).call(this,a,l),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(u,0,0,u.width,u.height,0,0,a,l)},Vv=function(t){if(t){if(d(this,yi)){const r=this._uiManager.imageManager.getSvgUrl(d(this,Yt));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=d(this,ut),i.getContext("2d").drawImage(d(this,ut),0,0),i.toDataURL()}if(d(this,yi)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*fl.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*fl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(d(this,ut),0,0,d(this,ut).width,d(this,ut).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(d(this,ut))},y$=function(t){var a;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},W(v_,"_type","stamp"),W(v_,"_editorType",we.STAMP);var Jc,Bf,or,Ha,uo,vi,za,Hf,Xc,ws,fo,Jt,ho,ja,zf,de,Ga,dt,v$,$s,C_,S_,Bv;const os=class os{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){b(this,dt);b(this,Jc);b(this,Bf,!1);b(this,or,null);b(this,Ha,null);b(this,uo,null);b(this,vi,new Map);b(this,za,!1);b(this,Hf,!1);b(this,Xc,!1);b(this,ws,null);b(this,fo,null);b(this,Jt,null);b(this,ho,null);b(this,ja,null);b(this,zf,-1);b(this,de);const p=[...d(os,Ga).values()];if(!os._initialized){os._initialized=!0;for(const m of p)m.initialize(u,e)}e.registerEditorTypes(p),T(this,de,e),this.pageIndex=t,this.div=i,T(this,Jc,r),T(this,or,o),this.viewport=c,T(this,Jt,l),this.drawLayer=a,this._structTree=s,d(this,de).addLayer(this)}get isEmpty(){return d(this,vi).size===0}get isInvisible(){return this.isEmpty&&d(this,de).getMode()===we.NONE}updateToolbar(e){d(this,de).updateToolbar(e)}updateMode(e=d(this,de).getMode()){switch(R(this,dt,Bv).call(this),e){case we.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case we.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case we.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of d(os,Ga).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,Jt))==null?void 0:t.div)}setEditingState(e){d(this,de).setEditingState(e)}addCommands(e){d(this,de).addCommands(e)}cleanUndoStack(e){d(this,de).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,or))==null||t.div.classList.toggle("disabled",!e)}async enable(){var i;T(this,Xc,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(i=d(this,ja))==null||i.abort(),T(this,ja,null);const e=new Set;for(const s of d(this,vi).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,de).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!d(this,or)){T(this,Xc,!1);return}const t=d(this,or).getEditableAnnotations();for(const s of t){if(s.hide(),d(this,de).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}T(this,Xc,!1)}disable(){var s;if(T(this,Hf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,Jt)&&!d(this,ja)){T(this,ja,new AbortController);const r=d(this,de).combinedSignal(d(this,ja));d(this,Jt).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,p=d(this,zf);if(u-p>500){T(this,zf,u);return}T(this,zf,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let w;const v=new RegExp(`^${dO}[0-9]+$`);for(const x of g)if(v.test(x.id)){w=x.id;break}if(!w)return;const S=d(this,vi).get(w);(S==null?void 0:S.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of d(this,vi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(d(this,or)){const r=d(this,or).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(d(this,de).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(d(this,de).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}R(this,dt,Bv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of d(os,Ga).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,Hf,!1)}getEditableAnnotation(e){var t;return((t=d(this,or))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,de).getActive()!==e&&d(this,de).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,Jt))!=null&&e.div&&!d(this,ho)){T(this,ho,new AbortController);const t=d(this,de).combinedSignal(d(this,ho));d(this,Jt).div.addEventListener("pointerdown",R(this,dt,v$).bind(this),{signal:t}),d(this,Jt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,Jt))!=null&&e.div&&d(this,ho)&&(d(this,ho).abort(),T(this,ho,null),d(this,Jt).div.classList.remove("highlighting"))}enableClick(){if(d(this,Ha))return;T(this,Ha,new AbortController);const e=d(this,de).combinedSignal(d(this,Ha));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,Ha))==null||e.abort(),T(this,Ha,null)}attach(e){d(this,vi).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,de).isDeletedAnnotationElement(t)&&d(this,de).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,vi).delete(e.id),(t=d(this,Jc))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,Hf)&&e.annotationElementId&&d(this,de).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,de).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,de).addDeletedAnnotationElement(e.annotationElementId),nt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,de).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,Xc)),d(this,de).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,uo)&&(e._focusEventsAllowed=!1,T(this,uo,setTimeout(()=>{T(this,uo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,de)._signal}),t.focus())},0))),e._structTreeParentId=(i=d(this,Jc))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return d(this,de).getId()}combinedSignal(e){return d(this,de).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,dt,$s))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,de).updateMode(e.mode);const{offsetX:i,offsetY:s}=R(this,dt,S_).call(this),r=this.getNextId(),o=R(this,dt,C_).call(this,{parent:this,id:r,x:i,y:s,uiManager:d(this,de),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=d(os,Ga).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,de)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=R(this,dt,C_).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:d(this,de),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(e={}){this.createAndAddNewEditor(R(this,dt,S_).call(this),!0,e)}setSelected(e){d(this,de).setSelected(e)}toggleSelected(e){d(this,de).toggleSelected(e)}unselect(e){d(this,de).unselect(e)}pointerup(e){var s;const{isMac:t}=cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,za)||(T(this,za,!1),(s=d(this,dt,$s))!=null&&s.isDrawer&&d(this,dt,$s).supportMultipleDrawings))return;if(!d(this,Bf)){T(this,Bf,!0);return}const i=d(this,de).getMode();if(i===we.STAMP||i===we.SIGNATURE){d(this,de).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(d(this,de).getMode()===we.HIGHLIGHT&&this.enableTextSelection(),d(this,za)){T(this,za,!1);return}const{isMac:t}=cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(T(this,za,!0),(s=d(this,dt,$s))!=null&&s.isDrawer){this.startDrawingSession(e);return}const i=d(this,de).getActive();T(this,Bf,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,ws)){d(this,dt,$s).startDrawing(this,d(this,de),!1,e);return}d(this,de).setCurrentDrawingSession(this),T(this,ws,new AbortController);const t=d(this,de).combinedSignal(d(this,ws));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(T(this,fo,null),this.commitOrRemove())},{signal:t}),d(this,dt,$s).startDrawing(this,d(this,de),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&T(this,fo,t);return}d(this,fo)&&setTimeout(()=>{var t;(t=d(this,fo))==null||t.focus(),T(this,fo,null)},0)}endDrawingSession(e=!1){return d(this,ws)?(d(this,de).setCurrentDrawingSession(null),d(this,ws).abort(),T(this,ws,null),T(this,fo,null),d(this,dt,$s).endDrawing(e)):null}findNewParent(e,t,i){const s=d(this,de).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return d(this,ws)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,ws)&&d(this,dt,$s).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,de).getActive())==null?void 0:e.parent)===this&&(d(this,de).commitOrRemove(),d(this,de).setActiveEditor(null)),d(this,uo)&&(clearTimeout(d(this,uo)),T(this,uo,null));for(const i of d(this,vi).values())(t=d(this,Jc))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,d(this,vi).clear(),d(this,de).removeLayer(this)}render({viewport:e}){this.viewport=e,vu(this.div,e);for(const t of d(this,de).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,de).commitOrRemove(),R(this,dt,Bv).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,vu(this.div,{rotation:i}),t!==i)for(const s of d(this,vi).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,de).viewParameters.realScale}};Jc=new WeakMap,Bf=new WeakMap,or=new WeakMap,Ha=new WeakMap,uo=new WeakMap,vi=new WeakMap,za=new WeakMap,Hf=new WeakMap,Xc=new WeakMap,ws=new WeakMap,fo=new WeakMap,Jt=new WeakMap,ho=new WeakMap,ja=new WeakMap,zf=new WeakMap,de=new WeakMap,Ga=new WeakMap,dt=new WeakSet,v$=function(e){d(this,de).unselectAll();const{target:t}=e;if(t===d(this,Jt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,Jt).div.contains(t)){const{isMac:i}=cn.platform;if(e.button!==0||e.ctrlKey&&i)return;d(this,de).showAllEditors("highlight",!0,!0),d(this,Jt).div.classList.add("free"),this.toggleDrawing(),B0.startHighlighting(this,d(this,de).direction==="ltr",{target:d(this,Jt).div,x:e.x,y:e.y}),d(this,Jt).div.addEventListener("pointerup",()=>{d(this,Jt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,de)._signal}),e.preventDefault()}},$s=function(){return d(os,Ga).get(d(this,de).getMode())},C_=function(e){const t=d(this,dt,$s);return t?new t.prototype.constructor(e):null},S_=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+s),c=(r+a)/2-e,u=(o+l)/2-t,[p,m]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:p,offsetY:m}},Bv=function(){for(const e of d(this,vi).values())e.isEmpty()&&e.remove()},W(os,"_initialized",!1),b(os,Ga,new Map([QE,d_,v_,B0,y_].map(e=>[e._editorType,e])));let w_=os;var Cs,Pn,Qc,Dg,lx,x$,Er,__,w$,T_;const Ft=class Ft{constructor({pageIndex:e}){b(this,Er);b(this,Cs,null);b(this,Pn,new Map);b(this,Qc,new Map);this.pageIndex=e}setParent(e){if(!d(this,Cs)){T(this,Cs,e);return}if(d(this,Cs)!==e){if(d(this,Pn).size>0)for(const t of d(this,Pn).values())t.remove(),e.append(t);T(this,Cs,e)}}static get _svgFactory(){return De(this,"_svgFactory",new U0)}draw(e,t=!1,i=!1){const s=zt(Ft,Dg)._++,r=R(this,Er,__).call(this),o=Ft._svgFactory.createElement("defs");r.append(o);const a=Ft._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,Qc).set(s,a);const c=i?R(this,Er,w$).call(this,o,l):null,u=Ft._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,e),d(this,Pn).set(s,r),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const i=zt(Ft,Dg)._++,s=R(this,Er,__).call(this),r=Ft._svgFactory.createElement("defs");s.append(r);const o=Ft._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const p=Ft._svgFactory.createElement("mask");r.append(p),l=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",l),p.setAttribute("maskUnits","objectBoundingBox");const m=Ft._svgFactory.createElement("rect");p.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=Ft._svgFactory.createElement("use");p.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const c=Ft._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,e),d(this,Pn).set(i,s),i}finalizeDraw(e,t){d(this,Qc).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:i,bbox:s,rootClass:r,path:o}=t,a=typeof e=="number"?d(this,Pn).get(e):e;if(a){if(i&&R(this,Er,T_).call(this,a,i),s&&R(l=Ft,lx,x$).call(l,a,s),r){const{classList:c}=a;for(const[u,p]of Object.entries(r))c.toggle(u,p)}if(o){const u=a.firstChild.firstChild;R(this,Er,T_).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const i=d(this,Pn).get(e);i&&(d(t,Cs).append(i),d(this,Pn).delete(e),d(t,Pn).set(e,i))}remove(e){d(this,Qc).delete(e),d(this,Cs)!==null&&(d(this,Pn).get(e).remove(),d(this,Pn).delete(e))}destroy(){T(this,Cs,null);for(const e of d(this,Pn).values())e.remove();d(this,Pn).clear(),d(this,Qc).clear()}};Cs=new WeakMap,Pn=new WeakMap,Qc=new WeakMap,Dg=new WeakMap,lx=new WeakSet,x$=function(e,[t,i,s,r]){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Er=new WeakSet,__=function(){const e=Ft._svgFactory.create(1,1,!0);return d(this,Cs).append(e),e.setAttribute("aria-hidden",!0),e},w$=function(e,t){const i=Ft._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Ft._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},T_=function(e,t){for(const[i,s]of Object.entries(t))s===null?e.removeAttribute(i):e.setAttribute(i,s)},b(Ft,lx),b(Ft,Dg,0);let E_=Ft;globalThis._pdfjsTestingUtils={HighlightOutliner:e_};globalThis.pdfjsLib={AbortException:dl,AnnotationEditorLayer:w_,AnnotationEditorParamsType:Oe,AnnotationEditorType:we,AnnotationEditorUIManager:xu,AnnotationLayer:YE,AnnotationMode:Qo,AnnotationType:Pt,build:Une,ColorPicker:V0,createValidAbsoluteUrl:fO,DOMSVGFactory:U0,DrawLayer:E_,FeatureTest:cn,fetchData:ey,getDocument:gU,getFilenameFromUrl:Mte,getPdfFilenameFromUrl:Nte,getUuid:mO,getXfaPageViewport:kte,GlobalWorkerOptions:cr,ImageKind:dv,InvalidPDFException:cE,isDataScheme:uw,isPdfFile:kA,isValidExplicitDest:jte,MathClamp:Nn,noContextMenu:Is,normalizeUnicode:bte,OPS:D0,OutputScale:Sr,PasswordResponses:vte,PDFDataRangeTransport:yU,PDFDateString:DA,PDFWorker:nm,PermissionFlag:yte,PixelsPerInch:fl,RenderingCancelledException:IA,ResponseException:L0,setLayerDimensions:vu,shadow:De,SignatureExtractor:go,stopEvent:Nt,SupportedImageMimeTypes:dE,TextLayer:em,TouchManager:O0,updateUrlHash:hO,Util:pe,VerbosityLevel:aw,version:One,XfaLayer:wU};const oie="/assets/pdf.worker-B8q3_SH5.mjs";cr.workerSrc=oie;const aie=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const s=i.result.split(",")[1];e(s)},i.onerror=s=>t(s),i.readAsDataURL(n)}),lie=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=async s=>{var r;if((r=s.target)!=null&&r.result)try{const o=new Uint8Array(s.target.result),a=await gU(o).promise;let l="";for(let c=1;c<=a.numPages;c++){const p=await(await a.getPage(c)).getTextContent();l+=p.items.map(m=>"str"in m?m.str:"").join(" ")+`
`}e(l)}catch(o){t(o)}},i.onerror=()=>t(new Error(`Failed to read ${n.name}.`)),i.readAsArrayBuffer(n)}),cie=async n=>{const e=["application/pdf","image/png","image/jpeg"],t=Array.from(n).filter(i=>e.includes(i.type)).map(async i=>{let s;return i.type==="application/pdf"?s=await lie(i):s=await aie(i),{id:crypto.randomUUID(),name:i.name,type:i.type,content:s,url:URL.createObjectURL(i),uploadedAt:new Date().toISOString()}});return Promise.all(t)};function uie({sessionId:n,files:e,onFileAdded:t}){const[i,s]=E.useState(!1),[r,o]=E.useState(!1),[a,l]=E.useState(""),c=E.useRef(null),{toast:u}=Do(),p=v=>{v.preventDefault(),s(!1),v.dataTransfer.files&&v.dataTransfer.files.length>0&&m(v.dataTransfer.files)},m=async v=>{if(v.length!==0){o(!0);try{const S=await cie(v);for(const x of S)t(x),u({title:"File uploaded",description:`${x.name} was uploaded successfully.`})}catch(S){console.error("Error uploading files:",S),u({title:"Upload failed",description:"There was an error uploading your files.",variant:"destructive"})}finally{o(!1)}}},g=()=>{var v;(v=c.current)==null||v.click()},w=v=>{v.target.files&&v.target.files.length>0&&m(v.target.files)};return y.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Upload Study Materials"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload PDFs, images, or other documents to generate study materials"})]}),y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,onDragOver:v=>{v.preventDefault(),s(!0)},onDragLeave:()=>s(!1),onDrop:p,children:[y.jsx(T3,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),y.jsx("p",{className:"text-lg font-medium mb-2",children:i?"Drop files here":"Drag and drop files here"}),y.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF, PNG, JPG files"}),y.jsx(me,{onClick:g,disabled:r,children:r?"Processing...":"Browse Files"}),y.jsx("input",{ref:c,type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:w,className:"hidden"})]}),e.length>0&&y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Files"}),y.jsx("div",{className:"space-y-2",children:e.map(v=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[y.jsx("span",{className:"font-medium",children:v.name}),y.jsx("span",{className:"text-sm text-gray-500",children:v.type})]},v.id))})]})]})}var HA="Progress",zA=100,[die,Oie]=Bn(HA),[fie,hie]=die(HA),C$=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:i=null,max:s,getValueLabel:r=pie,...o}=n;(s||s===0)&&!rM(s)&&console.error(mie(`${s}`,"Progress"));const a=rM(s)?s:zA;i!==null&&!oM(i,a)&&console.error(gie(`${i}`,"Progress"));const l=oM(i,a)?i:null,c=z0(l)?r(l,a):void 0;return y.jsx(fie,{scope:t,value:l,max:a,children:y.jsx(ue.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":z0(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":_$(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});C$.displayName=HA;var S$="ProgressIndicator",E$=E.forwardRef((n,e)=>{const{__scopeProgress:t,...i}=n,s=hie(S$,t);return y.jsx(ue.div,{"data-state":_$(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...i,ref:e})});E$.displayName=S$;function pie(n,e){return`${Math.round(n/e*100)}%`}function _$(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function z0(n){return typeof n=="number"}function rM(n){return z0(n)&&!isNaN(n)&&n>0}function oM(n,e){return z0(n)&&!isNaN(n)&&n<=e&&n>=0}function mie(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zA}\`.`}function gie(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var T$=C$,yie=E$;const A$=E.forwardRef(({className:n,value:e,...t},i)=>y.jsx(T$,{ref:i,className:ye("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...t,children:y.jsx(yie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));A$.displayName=T$.displayName;function vie({sessionId:n,flashcards:e=[],studyMaterials:t=[],files:i=[]}){var Ie,Me;const[s,r]=E.useState([]),[o,a]=E.useState(0),[l,c]=E.useState(!1),[u,p]=E.useState(0),[m,g]=E.useState(0),[w,v]=E.useState(0),{toast:S}=Do(),[x,C]=E.useState(!1),[_,A]=E.useState(""),[P,M]=E.useState("notes"),[N,I]=E.useState("medium"),[k,D]=E.useState(null),[L,$]=E.useState(""),[j,V]=E.useState("medium"),[H,O]=E.useState(!1),[B,U]=E.useState(""),F=Array.isArray(e)?e:[],z=Array.isArray(s)?s:[];E.useEffect(()=>{const Z=F.filter(pt=>!pt.mastered);r(te([...Z])),a(0),c(!1),g(Z.length),v(F.length-Z.length);const ne=F.length,Le=ne>0?Math.round(F.filter(pt=>pt.mastered).length/ne*100):0;p(Le)},[e]);const te=Z=>{const ne=[...Z];for(let Le=ne.length-1;Le>0;Le--){const pt=Math.floor(Math.random()*(Le+1));[ne[Le],ne[pt]]=[ne[pt],ne[Le]]}return ne},Y=async()=>{if(z.length===0)return;const Z=z[o];try{const ne=z.filter(Tr=>Tr.id!==Z.id);r(ne),g(ne.length),v(w+1);const Le=F.length,pt=Le>0?Math.round((w+1)/Le*100):0;p(pt),c(!1),a(o>=ne.length?0:o),S({title:"Marked as mastered",description:"You've mastered this flashcard!"})}catch{S({title:"Error",description:"Failed to update flashcard",variant:"destructive"})}},ie=()=>{if(z.length===0)return;const Z=[...z],ne=Z.splice(o,1)[0];Z.push(ne),r(Z),c(!1),a(o>=Z.length-1?0:o)},he=()=>{c(!1),a((o+1)%z.length)},Re=()=>{c(!1),a((o-1+z.length)%z.length)},Pe=()=>{const Z=te([...F]);r(Z),a(0),c(!1),g(Z.length),v(0),p(0)},G=async()=>{C(!0),D(null);try{let Z="";P==="summary"?Z=await BZ(i.map(ne=>({id:ne.id,name:ne.name,type:ne.type,content:ne.content||""}))):P==="notes"?Z=await HZ(i.map(ne=>({id:ne.id,name:ne.name,type:ne.type,content:ne.content||""}))):P==="outline"&&(Z=await zZ(i.map(ne=>({id:ne.id,name:ne.name,type:ne.type,content:ne.content||""})))),S({title:"Success",description:`${P.charAt(0).toUpperCase()+P.slice(1)} generated and saved!`})}catch(Z){S({title:"Error",description:Z instanceof Error?Z.message:"Failed to generate study material.",variant:"destructive"})}finally{C(!1)}},Te=async()=>{O(!0),U("");try{const Z=(i||[]).map(Le=>({id:Le.id,name:Le.name,type:Le.type,content:Le.content||""})),ne=await qZ(Z,L,j);U(ne)}catch{S({title:"Error",description:"Failed to generate long answer.",variant:"destructive"})}finally{O(!1)}};return y.jsxs("div",{children:[y.jsxs(lL,{defaultValue:"longAnswer",className:"w-full",children:[y.jsxs(gA,{className:"w-full mb-6",children:[y.jsxs(po,{value:"flashcards",className:"flex-1",children:[y.jsx(f0,{className:"h-4 w-4 mr-2"}),"Flashcards"]}),y.jsxs(po,{value:"longAnswer",className:"flex-1",children:[y.jsx(f3,{className:"h-4 w-4 mr-2"}),"Ask Questions"]}),y.jsxs(po,{value:"material",className:"flex-1",children:[y.jsx(v1,{className:"h-4 w-4 mr-2"}),"Study Materials"]})]}),y.jsxs(mo,{value:"flashcards",children:[y.jsx("div",{className:"flex justify-between items-center mb-6",children:y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Flashcard Review"}),y.jsx("p",{className:"text-gray-600",children:"Practice your flashcards until you master them"})]})}),y.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-sm font-medium",children:"Mastery Progress"}),y.jsxs("span",{className:"text-sm font-medium",children:[u,"%"]})]}),y.jsx(A$,{value:u,className:"h-2"}),y.jsxs("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-600",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:w})," mastered"]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-purple-600",children:m})," remaining"]})]})]}),z.length>0?y.jsxs("div",{children:[y.jsx("div",{className:"flex justify-center mb-8",children:y.jsx("div",{className:"relative w-full max-w-2xl h-64 cursor-pointer perspective-1000",onClick:()=>c(!l),children:y.jsxs("div",{className:`absolute w-full h-full transform transition-transform duration-500 preserve-3d ${l?"rotate-y-180":""}`,children:[y.jsxs("div",{className:"absolute w-full h-full bg-white rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden flex flex-col items-center justify-center",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:y.jsx("span",{className:"text-purple-600 font-semibold",children:o+1})}),y.jsx("p",{className:"text-center text-xl font-medium",children:(Ie=z[o])==null?void 0:Ie.front}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip"})]}),y.jsxs("div",{className:"absolute w-full h-full bg-purple-50 rounded-xl p-8 border-2 border-purple-200 shadow-md backface-hidden rotate-y-180 flex flex-col items-center justify-center",children:[y.jsx("p",{className:"text-center text-lg",children:(Me=z[o])==null?void 0:Me.back}),y.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Click to flip back"})]})]})})}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs(me,{variant:"outline",onClick:Re,disabled:z.length<=1,className:"flex items-center",children:[y.jsx(rk,{className:"mr-2 h-4 w-4"}),"Previous"]}),y.jsxs(me,{variant:"outline",onClick:he,disabled:z.length<=1,className:"flex items-center",children:["Next",y.jsx(u3,{className:"ml-2 h-4 w-4"})]})]}),y.jsxs("div",{className:"flex gap-4 justify-center",children:[y.jsxs(me,{variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 flex-1 md:flex-none",onClick:ie,children:[y.jsx(Rx,{className:"mr-2 h-4 w-4"}),"Need More Practice"]}),y.jsxs(me,{variant:"outline",className:"border-green-300 text-green-600 hover:bg-green-50 flex-1 md:flex-none",onClick:Y,children:[y.jsx(al,{className:"mr-2 h-4 w-4"}),"Mark as Mastered"]})]})]}):F.length===0?y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-gray-50",children:[y.jsx(f0,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No flashcards to learn"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Create flashcards first in the Flashcards tab"})]}):y.jsxs("div",{className:"text-center py-16 border rounded-lg bg-purple-50",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:y.jsx(al,{className:"h-8 w-8 text-purple-600"})}),y.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All cards mastered!"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Congratulations! You've mastered all your flashcards."}),y.jsx(me,{className:"gradient-bg",onClick:Pe,children:"Restart All Cards"})]})]}),y.jsx(mo,{value:"longAnswer",children:y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ask a Long-Form Question"}),y.jsxs("div",{className:"mb-4",children:[y.jsx(yt,{htmlFor:"question",children:"Your Question"}),y.jsx(pA,{id:"question",value:L,onChange:Z=>$(Z.target.value),placeholder:"Type your question about the study materials...",rows:3,className:"mt-2"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx(yt,{htmlFor:"complexity",children:"Answer Complexity"}),y.jsxs(AA,{value:j,onValueChange:V,children:[y.jsx(iw,{className:"mt-2",children:y.jsx(bA,{placeholder:"Select complexity"})}),y.jsxs(sw,{children:[y.jsx(vr,{value:"easy",children:"Easy"}),y.jsx(vr,{value:"medium",children:"Medium"}),y.jsx(vr,{value:"hard",children:"Hard"})]})]})]}),y.jsx(me,{onClick:Te,disabled:!L.trim()||H,className:"mb-4",children:H?"Generating...":"Generate Long Answer"}),B&&y.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border",children:[y.jsx("h3",{className:"font-bold mb-2",children:"Answer"}),y.jsx("div",{className:"whitespace-pre-line text-gray-800",children:B})]})]})}),y.jsxs(mo,{value:"material",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-2xl font-semibold",children:"Study Materials"}),i.length>0&&y.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),y.jsxs("span",{children:[i.length," file",i.length>1?"s":""," available"]})]})]}),y.jsx("p",{className:"text-gray-600",children:"Generate study materials and practice with flashcards"})]}),t.length>0||k?y.jsxs("div",{className:"mb-6",children:[k&&y.jsxs(xd,{className:"mb-6",children:[y.jsx(wd,{children:y.jsx(Cd,{children:k.title})}),y.jsx(Sd,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:k.content.replace(/\n/g,"<br>")}})})})]}),t.map(Z=>y.jsxs(xd,{className:"mb-6",children:[y.jsx(wd,{children:y.jsx(Cd,{children:Z.title})}),y.jsx(Sd,{children:y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:Z.content.replace(/\n/g,"<br>")}})})})]},Z.id))]}):y.jsxs("div",{className:"text-center py-10 border rounded-lg bg-gray-50 mb-6",children:[y.jsx(v1,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No study materials yet"}),y.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Generate comprehensive study materials below"})]}),y.jsxs(xd,{children:[y.jsx(wd,{children:y.jsx(Cd,{children:"Generate New Study Material"})}),y.jsx(Sd,{children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(yt,{htmlFor:"topic",children:"Topic"}),y.jsx(du,{id:"topic",placeholder:"Enter topic (e.g., 'The Holocaust and World War II')",value:_,onChange:Z=>A(Z.target.value)})]}),y.jsxs("div",{children:[y.jsx(yt,{children:"Format"}),y.jsxs(k0,{value:P,onValueChange:Z=>M(Z),className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Yo,{value:"notes",id:"notes"}),y.jsx(yt,{htmlFor:"notes",children:"Notes"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(Yo,{value:"outline",id:"outline"}),y.jsx(yt,{htmlFor:"outline",children:"Outline"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(Yo,{value:"summary",id:"summary"}),y.jsx(yt,{htmlFor:"summary",children:"Summary"})]})]})]}),y.jsxs("div",{children:[y.jsx(yt,{children:"Complexity"}),y.jsxs(k0,{value:N,onValueChange:I,className:"flex mt-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Yo,{value:"simple",id:"simple"}),y.jsx(yt,{htmlFor:"simple",children:"Simple"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(Yo,{value:"medium",id:"medium"}),y.jsx(yt,{htmlFor:"medium",children:"Medium"})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.jsx(Yo,{value:"advanced",id:"advanced"}),y.jsx(yt,{htmlFor:"advanced",children:"Advanced"})]})]})]}),y.jsx(me,{onClick:G,disabled:x,className:"w-full",children:x?"Generating...":y.jsxs(y.Fragment,{children:[y.jsx(C3,{className:"mr-2 h-4 w-4"}),"Generate Study Material"]})})]})})]})]})]}),y.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        
        .preserve-3d {
          transform-style: preserve-3d;
        }
        
        .backface-hidden {
          backface-visibility: hidden;
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        `})]})}function xie(){const{id:n}=i6(),e=mh(),{toast:t}=Do(),[i,s]=E.useState(null),[r,o]=E.useState("files"),a=Au(),{isLoading:l,error:c,data:u}=mz({queryKey:["session",n],queryFn:async()=>({id:n??"mock-session-id",title:"Sample Study Session",description:"A sample study session for testing",createdat:new Date().toISOString(),updatedat:new Date().toISOString(),files:[],flashcardSets:[],quizzes:[],studyMaterials:[]}),enabled:!!n,retry:1,retryDelay:1e3});return E.useEffect(()=>{u?(console.log("Session query success:",{id:n,data:u}),s(u)):c?(console.error("Session query error:",{id:n,error:c}),t({title:"Error",description:"Failed to load study session",variant:"destructive"}),e("/sessions")):!l&&!u&&(console.log("Session not found for ID:",n),t({title:"Error",description:"Study session not found",variant:"destructive"}),e("/sessions"))},[u,c,l,n,e,t]),l?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(vd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})})]}):i?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(vd,{}),y.jsxs("div",{ref:a,className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs(me,{variant:"outline",className:"mb-4",onClick:()=>e("/sessions"),children:[y.jsx(rk,{className:"mr-2 h-4 w-4"}),"Back to Sessions"]}),y.jsx("h1",{className:"text-3xl font-bold",children:i.title}),y.jsx("p",{className:"text-gray-600 mt-1",children:i.description})]}),y.jsxs(lL,{value:r,onValueChange:o,children:[y.jsxs(gA,{className:"grid grid-cols-5 mb-8",children:[y.jsxs(po,{value:"files",className:"flex items-center",children:[y.jsx(w3,{className:"mr-2 h-4 w-4"}),"Files"]}),y.jsxs(po,{value:"flashcards",className:"flex items-center",children:[y.jsx(d3,{className:"mr-2 h-4 w-4"}),"Flashcards"]}),y.jsxs(po,{value:"quiz",className:"flex items-center",children:[y.jsx(al,{className:"mr-2 h-4 w-4"}),"Quiz"]}),y.jsxs(po,{value:"learn",className:"flex items-center",children:[y.jsx(f0,{className:"mr-2 h-4 w-4"}),"Learn"]}),y.jsxs(po,{value:"chat",className:"flex items-center",children:[y.jsx(E3,{className:"mr-2 h-4 w-4"}),"Chat"]})]}),y.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[y.jsx(mo,{value:"files",children:y.jsx(uie,{sessionId:i.id,files:i.files,onFileAdded:p=>{s({...i,files:[...i.files,p]})}})}),y.jsx(mo,{value:"flashcards",children:y.jsx(Hee,{flashcardSets:i.flashcardSets,files:i.files.map(p=>({id:p.id,name:p.name,type:p.type,content:p.content||""})),sessionId:i.id,onCreateSet:p=>{s({...i,flashcardSets:[...i.flashcardSets,p]})},onUpdateSet:p=>{s({...i,flashcardSets:i.flashcardSets.map(m=>m.id===p.id?p:m)})}})}),y.jsx(mo,{value:"quiz",children:y.jsx(ote,{sessionId:i.id,quizzes:i.quizzes,files:i.files,flashcards:i.flashcardSets.flatMap(p=>p.flashcards),onQuizAdded:p=>{s({...i,quizzes:[...i.quizzes,p]})}})}),y.jsx(mo,{value:"learn",children:y.jsx(vie,{sessionId:i.id,flashcards:i.flashcardSets.flatMap(p=>p.flashcards),studyMaterials:i.studyMaterials||[],files:i.files})}),y.jsx(mo,{value:"chat",children:y.jsx(gte,{files:i.files.map(p=>({id:p.id,name:p.name,type:p.type,content:p.content||""})),chatMessages:[],sessionId:i.id})})]})]})]})]}):y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx(vd,{}),y.jsx("div",{className:"container mx-auto px-4 py-12",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:"Session not found"}),y.jsx(me,{variant:"outline",className:"mt-4",onClick:()=>e("/sessions"),children:"Go back to sessions"})]})})]})}const wie=new QH,Cie=()=>y.jsx(iz,{client:wie,children:y.jsxs(LH,{children:[y.jsx(M3,{}),y.jsx(l5,{}),y.jsx(ej,{children:y.jsx(j6,{children:y.jsxs(w6,{children:[y.jsx($u,{path:"/",element:y.jsx(Bq,{})}),y.jsxs($u,{element:y.jsx(tj,{redirectTo:"/"}),children:[y.jsx($u,{path:"/sessions",element:y.jsx(qq,{})}),y.jsx($u,{path:"/session/:id",element:y.jsx(xie,{})})]}),y.jsx($u,{path:"*",element:y.jsx(Hq,{})})]})})})]})});localStorage.removeItem("quiz_io_current_user");pC.createRoot(document.getElementById("root")).render(y.jsx(X.StrictMode,{children:y.jsx(Cie,{})}));
